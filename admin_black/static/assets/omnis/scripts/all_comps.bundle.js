/*! Omnis Studio 10.22 31896. JS: 31896 */
(self.webpackChunkomnis_webpack=self.webpackChunkomnis_webpack||[]).push([[398],{7910:function(t,e,i){"use strict";i(2526),i(2222),i(7327),i(9554),i(5003),i(9337),i(7941),i(4747);var s,r,n,o=i(5304),a=i(6353);function l(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function h(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?l(Object(i),!0).forEach((function(e){c(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function c(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var u="$activitystyle",d="$customlink",p="$alttext",m="$activitycolor",f=1,g=2,v=3,b=99,y=4,C=5,_=6,E=(c(s={},f,"activity_7258"),c(s,g,"activity_7259"),c(s,v,"activity_7260"),s),w=(c(r={},f,"width=220 height=19 border=0"),c(r,g,"width=43 height=11 border=0"),c(r,v,"width=16 height=16 border=0"),r),k={0:"#d50000",25:"#ff660d",50:"#64dd17",75:"#2962ff",100:"#d50000"};x.prototype=new a.U2;var T="LINEAR",S="LINEAR_DOTS";function x(){this.init_class_inst()}x.prototype.DefaultColors=h(h({},a.U2.prototype.DefaultColors),{},(c(n={},T,o.l1.primary),c(n,S,o.l1.backgroundText),n)),x.prototype.init_class_inst=function(){this.superclass=a.U2.prototype,this.superclass.init_class_inst.call(this),this.activitystyle=f,this.customlink="",this.usesTouchScroll=!1,this.mFocusStyle=eBaseFocusStyle.eNone,this.baseClassName="omnis-activity",this.activeReplacesEnabled=!0,this.showDesignName=!0},x.prototype.init_ctrl_inst=function(t,e,i,s){this.superclass.init_ctrl_inst.call(this,t,e,i,s);var r=this.getClientElem();return this.activitystyle=+r.getAttribute("data-activitystyle"),this.customlink=r.getAttribute("data-customlink"),this.alttext=r.getAttribute("data-alttext"),this.activityColor=+r.getAttribute("data-activitycolor"),this.removeFromTabOrder(),this.update(),!1},x.prototype.updateCtrl=function(){var t=this.getClientElem();switch(t.innerHTML="",this.styleSheet&&(jOmnis.removeStyleSheet(this.styleSheet),this.styleSheetNeedsAdding=!0),this.activitystyle){case f:case g:case v:t.innerHTML=this.getImgHTML(this.activitystyle!==v);break;case b:this.isActive()&&(t.innerHTML='<img src="'.concat(this.customlink,'" border="0">'));break;case y:this.buildCircularActivity();break;case C:this.buildLinearActivity();break;case _:this.buildLinearDotsActivity()}this.setAltText(),this.styleSheetNeedsAdding&&jOmnis.addStyleSheet("")},x.prototype.setAltText=function(){var t=this.clientElem,e=this.alttext||"";switch(this.activitystyle){case f:case g:case v:case b:t.firstChild&&(t.firstChild.alt=e);break;case y:var i=document.getElementById(this.getCircularTitleId());i&&(i.innerHTML=e);break;case C:case _:t.firstChild&&t.firstChild.setAttribute("aria-label",e)}},x.prototype.getImgHTML=function(t){return'<img src="images/'.concat(E[this.activitystyle]).concat(!this.isActive()||jOmnis.mDesign?"_disabled":"").concat(t?this.form.inst.resSuffix:"",'.gif" ').concat(w[this.activitystyle],">")},x.prototype.buildCircularActivity=function(){var t=jOmnis.mDesign||!this.isActive(),e='<title id="'.concat(this.getCircularTitleId(),'"></title>'),i='<svg class="omnis-activity-circular '.concat(t?"activity-disabled":"",'" viewBox="25 25 50 50">').concat(e),s="";t&&(i+=this.getCircularColors(!0),s='stroke="url(#'.concat(this.getCircularGradientId(),')"')),i+='<circle class="omnis-activity-path" cx="50" cy="50" r="20" '.concat(s,' fill="none" stroke-width="5" /></svg>'),this.clientElem.innerHTML=i,t||this.applyCircularActivityCSS()},x.prototype.applyCircularActivityCSS=function(){var t=this.clientElem.id,e="".concat(t,"-color"),i="@keyframes ".concat(e," {").concat(this.getCircularColors(!1),"} \n\t\t\t\t\t\t#").concat(t,".omnis-activity .omnis-activity-path { animation: omnis-activity-circular-dash 1.5s ease-in-out infinite, ").concat(e," 6s ease-in-out infinite; }");this.styleSheet=jOmnis.addStyleSheet(i),this.styleSheetNeedsAdding=!1},x.prototype.getCircularColors=function(t){var e=Object.keys(k),i=this;function s(){return i.getTheme().getColorString(i.activityColor)}if(t){var r='<defs><linearGradient id="'.concat(this.getCircularGradientId(),'" x1="0%" y1="0%" x2="100%" y2="100%">');return this.activityColor===o.JT?e.forEach((function(t){r+='<stop offset="'.concat(t,'%" stop-color="').concat(k[t],'" />')})):r+='<stop offset="0%" stop-color="'.concat(s(),'" />'),r+="</linearGradient></defs>"}if(this.activityColor===o.JT){var n="";return e.forEach((function(t){n+="".concat(t,"%{stroke:").concat(k[t],";}")})),n}return"0%, 100%{stroke: ".concat(s(),";}")},x.prototype.getCircularTitleId=function(){return"".concat(this.clientElem.id,"_circular_title")},x.prototype.getCircularGradientId=function(){return"".concat(this.clientElem.id,"_circular_gradient")},x.prototype.buildLinearActivity=function(){var t=this.getTheme(),e=jOmnis.mDesign||!this.isActive(),i=document.createElement("div");i.className="omnis-activity-linear";var s=document.createElement("div");s.className="omnis-activity-line omnis-activity-main-line",s.style.backgroundColor=t.getColorString(OMColor.TintRGB(t.getColorRGB(this.resolveDefaultColor(this.activityColor,T)),OMColor.eTintFactor.DEFAULT));var r=document.createElement("div");r.className="omnis-activity-line omnis-activity-sub-line ".concat(e?"omnis-activity-inc-disabled":"omnis-activity-inc");var n=document.createElement("div");n.className="omnis-activity-line omnis-activity-sub-line ".concat(e?"omnis-activity-dec-disabled":"omnis-activity-dec"),r.style.backgroundColor=n.style.backgroundColor=t.getColorString(this.activityColor,this.DefaultColors[T]),i.append(s,r,n),this.clientElem.appendChild(i)},x.prototype.buildLinearDotsActivity=function(){var t=this.clientElem,e=Math.min(t.clientHeight,t.clientWidth)-4,i=2*e,s=[-2*i,-1*i,0,i,2*i],r=this.getTheme().getColorString(this.activityColor,this.DefaultColors[S]),n=document.createElement("div");n.className="omnis-activity-linear-dots";var o=document.createElement("div");o.className="omnis-activity-linear-dots-wrapper";for(var a=jOmnis.mDesign||!this.isActive()?"dots-disabled":"",l=0;l<5;l++)o.innerHTML+='<div class="'.concat(a,'" style="background-color: ').concat(r,"; height: ").concat(e,"px; width: ").concat(e,"px; left: ").concat(s[l],"px; animation-delay: ").concat(100*(5-l),'ms"></div>');if(!a){var h=this.clientElem.id,c="".concat(h,"-linear-dots-anim"),u=.5*t.clientWidth+"px",d="@keyframes ".concat(c," {\n\t\t0% {\n    \ttransform:translateX(-").concat(u,");\n    \topacity:0;\n\t\t}\n\t\t35%,65% {\n\t\t\ttransform:translateX(0px);\n\t\t\topacity:1;\n\t\t}\n\t\t100% {\n\t\t\ttransform:translateX(").concat(u,");\n\t\t\topacity:0;\n\t\t}\n  }\n  \n  #").concat(h," .omnis-activity-linear-dots .omnis-activity-linear-dots-wrapper div:not(.dots-disabled) {\n  \tanimation:").concat(c," 3000ms ease-in-out infinite;\n\t}");this.styleSheet=jOmnis.addStyleSheet(d),this.styleSheetNeedsAdding=!1}n.appendChild(o),t.appendChild(n)},x.prototype.activeChanged=function(){this.update(),this.setAriaDisabled()},x.prototype.sizeChanged=function(){this.superclass.sizeChanged.call(this),this.update()},x.prototype.getProperty=function(t){switch(t){case u:return this.activitystyle;case d:return this.customlink;case p:return this.alttext;case m:return this.activityColor}return this.superclass.getProperty.call(this,t)},x.prototype.getCanAssign=function(t){switch(t){case u:case d:case p:case m:return!0}return this.superclass.getCanAssign.call(this,t)},x.prototype.setProperty=function(t,e){switch(t){case u:return this.activitystyle=e,this.update(),!0;case d:return this.customlink=e,this.update(),!0;case p:return this.alttext=e?e+"":"",this.setAltText(),!0;case m:return+e!==this.activityColor&&(this.activityColor=+e,this.update()),!0}return this.superclass.setProperty.call(this,t,e)};var D,O=x;i(3290),i(3123),i(1818);function A(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function P(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?A(Object(i),!0).forEach((function(e){I(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):A(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function I(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var L={evAnimComplete:6e3};N.prototype=new ctrl_base,N.prototype.noBackColor=!0;var j=P(P({},a.Mr),{},{FORECOLOR:"forecolor"});function N(){this.init_class_inst()}N.prototype.DefaultColors=P(P({},ctrl_base.prototype.DefaultColors),{},(I(D={},j.BACKGROUND,o.l1[o._l.background]),I(D,j.FORECOLOR,o.l1[o._l.primary]),D)),N.prototype.init_class_inst=function(){if(this.superclass=ctrl_base.prototype,!F){F=!0;try{var t=Raphael(document.body,1,1);t.canvas&&(t.canvas.style.position="absolute"),H=!0,t=null}catch(t){H=!1}}this.superclass.init_class_inst.call(this),this.mCustomEvents=L,this.usesTouchScroll=!1,this.mFocusStyle=eBaseFocusStyle.eNone,this.baseClassName="omnis-background"},N.prototype.init_ctrl_inst=function(t,e,i,s){this.superclass.init_ctrl_inst.call(this,t,e,i,s);var r=this.getClientElem();return this.strokewidth=parseInt(r.getAttribute("data-strokewidth")),this.shape=parseInt(r.getAttribute("data-theshape")),this.shapeborderColor=+this.clientElem.getAttribute("data-bordercolor"),this.shapebackColor=this.themeableData.backgroundColor,this.shapeforeColor=+this.clientElem.getAttribute("data-forecolor"),this.shapePattern=parseInt(this.clientElem.getAttribute("data-backpattern")),this.imagePath=this.clientElem.getAttribute("data-imagepath"),this.animation=this.clientElem.getAttribute("data-animation"),this.cornerRadius=10,this.mScale=1,this.removeFromTabOrder(),!1};var B=function(t,e,i){t.canSendEvent(L.evAnimComplete)&&(t.eventParamsAdd("pAnimContext",i),t.sendEvent("evAnimComplete"))};N.prototype.addAttr=function(t){if("attr"==t.substr(0,4)){var e=t.substr(5,t.length-6).split(","),i=e[0],s=e[1];H?this.object.attr(i,s):"scale"==i&&(this.mScale=s,this.update())}},N.prototype.addAnimation=function(t){if("scale"==t.substr(0,5)){var e=t.substr(6,t.length-7),i=e.split(","),s=i[0],r=i[1],n=i[2],o=i[3];if(""==n&&(n="="),o){var a=this;this.object.animate({scale:s},r,n,(function(){B(a,0,o)}))}else this.object.animate({scale:s},r,n)}else if("rotate"==t.substr(0,6)){var l=(i=(e=t.substr(7,t.length-8)).split(","))[0];r=i[1],""==(n=i[2])&&(n="="),(o=i[3])?(a=this,this.object.animate({rotation:l},r,n,(function(){B(a,0,o)}))):this.object.animate({rotation:l},r,n)}else"alpha"==t.substr(0,5)&&(s=(i=(e=t.substr(6,t.length-7)).split(","))[0],r=i[1],""==(n=i[2])&&(n="="),(o=i[3])?(a=this,this.object.animate({opacity:s},r,n,(function(){B(a,0,o)}))):this.object.animate({opacity:s},r,n))},N.prototype.updateCtrl=function(){if(this.getTrueVisibility())if(H){var t=this.elem,e=this.getClientElem(),i=parseInt(t.style.width)||0,s=parseInt(t.style.height)||0;if(0!=i&&0!=s){this.paper?this.paper.setSize(i+1,s+1):(this.paper=Raphael(e,i+1,s+1),this.clientElem.firstElementChild.setAttribute("role","presentation"),this.clientElem.firstElementChild.style.display="block");var r=i-2*this.strokewidth,n=s-2*this.strokewidth;this.object&&this.object.remove();var o=this.getTheme(),a=o.resolveCSSVarsInString(o.getColorString(this.shapeforeColor,this.DefaultColors[j.FORECOLOR],this.themeableData.backgroundAlpha/255)),l=o.resolveCSSVarsInString(o.getColorString(this.shapebackColor,this.DefaultColors[j.BACKGROUND],this.themeableData.backgroundAlpha/255)),h=o.resolveCSSVarsInString(o.getColorString(this.shapeborderColor,this.DefaultColors[j.BORDER])),c=0===this.shapePattern?a:l;if(33==this.shapePattern?c="180-"+l+"-"+a:34==this.shapePattern?c="0-"+l+"-"+a:35==this.shapePattern?c="90-"+l+"-"+a:36==this.shapePattern&&(c="270-"+l+"-"+a),1==this.shape)this.object=this.paper.ellipse(i/2,s/2,(i-this.strokewidth)/2,(s-this.strokewidth)/2),this.object.attr("fill",c),this.object.attr("stroke",h),this.object.attr("stroke-width",this.strokewidth);else if(2==this.shape)this.object=this.paper.rect(this.strokewidth/2,this.strokewidth/2,i-this.strokewidth,s-this.strokewidth),this.object.attr("fill",c),this.object.attr("stroke",h),this.object.attr("stroke-width",this.strokewidth);else if(3==this.shape)this.object=this.paper.rect(this.strokewidth/2,this.strokewidth/2,i-this.strokewidth,s-this.strokewidth,this.cornerRadius,this.cornerRadius),this.object.attr("fill",c),this.object.attr("stroke",h),this.object.attr("stroke-width",this.strokewidth);else if(4==this.shape){var u=r+this.strokewidth,d=n+this.strokewidth,p="M"+i/2+" "+this.strokewidth+"L"+u+" "+d+"L"+this.strokewidth+" "+d+" z";this.object=this.paper.path(p),this.object.attr({fill:c}),this.object.attr("stroke",h),this.object.attr("stroke-width",this.strokewidth)}else 5==this.shape?(this.object=this.paper.path("M0 "+s/2+"L"+i+" "+s/2),this.object.attr("stroke",h),this.object.attr("stroke-width",this.strokewidth)):6==this.shape?(this.object=this.paper.path("M"+i/2+" 0L"+i/2+" "+s),this.object.attr("stroke",h),this.object.attr("stroke-width",this.strokewidth)):7==this.shape&&(this.object=this.paper.image(this.imagePath,0,0,i,s))}}else this.updateUsingCanvas()},N.prototype.updateUsingCanvas=function(){var t=this.elem,e=t.offsetWidth,i=t.offsetHeight;if(0!=e&&0!=i){this.canvas&&t.removeChild(this.canvas),this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.top=0,this.canvas.style.left=0,this.canvas.width=e,this.canvas.height=i,t.appendChild(this.canvas);var s,r=this.canvas.getContext("2d");if(1!=this.mScale&&(r.scale(this.mScale,this.mScale),r.translate(e/2,i/2)),7==this.shape){var n=document.createElement("image");return n.style.display="none",document.body.appendChild(n),n.src=this.imagePath,void(n.onload=function(){r.drawImage(n,0,0,e,i),document.body.removeChild(n)})}switch(this.shapePattern){case 0:r.fillStyle=this.shapeforeColor;break;case 1:r.fillStyle=this.shapebackColor;break;case 33:(s=r.createLinearGradient(0,0,t.offsetWidth-1,0)).addColorStop(0,this.shapeforeColor),s.addColorStop(1,this.shapebackColor);break;case 34:(s=r.createLinearGradient(0,0,t.offsetWidth-1,0)).addColorStop(0,this.shapebackColor),s.addColorStop(1,this.shapeforeColor);break;case 35:(s=r.createLinearGradient(0,0,0,t.offsetHeight-1)).addColorStop(0,this.shapeforeColor),s.addColorStop(1,this.shapebackColor);break;case 36:(s=r.createLinearGradient(0,0,0,t.offsetHeight-1)).addColorStop(0,this.shapebackColor),s.addColorStop(1,this.shapeforeColor)}switch(null!=s&&(r.fillStyle=s),r.lineWidth=this.strokewidth,r.strokeStyle=this.shapeborderColor,r.beginPath(),this.shape){case 1:var o;r.save(),r.translate(e/2,i/2),e<i?(o=(e-this.strokewidth)/2,r.scale(1,i/e)):(o=(i-this.strokewidth)/2,r.scale(e/i,1)),r.arc(0,0,o,0,2*Math.PI,!1),r.restore();break;case 2:r.rect(this.strokewidth/2,this.strokewidth/2,e-this.strokewidth,i-this.strokewidth);break;case 3:var a=this.strokewidth/2,l=this.strokewidth/2,h=e-this.strokewidth,c=i-this.strokewidth;r.moveTo(a+this.cornerRadius,l),r.lineTo(a+h-this.cornerRadius,l),r.arcTo(a+h,l,a+h,l+this.cornerRadius,this.cornerRadius),r.lineTo(a+h,l+c-this.cornerRadius),r.quadraticCurveTo(a+h,l+c,a+h-this.cornerRadius,l+c),r.lineTo(a+this.cornerRadius,l+c),r.quadraticCurveTo(a,l+c,a,l+c-this.cornerRadius),r.lineTo(a,l+this.cornerRadius),r.quadraticCurveTo(a,l,a+this.cornerRadius,l);break;case 4:r.moveTo(e/2,this.strokewidth),r.lineTo(e-this.strokewidth,i-this.strokewidth/2),r.lineTo(this.strokewidth,i-this.strokewidth/2),r.lineTo(e/2,this.strokewidth);break;case 5:r.moveTo(0,i/2),r.lineTo(e,i/2);break;case 6:r.moveTo(e/2,0),r.lineTo(e/2,i)}r.closePath(),r.fill(),this.strokewidth>0&&r.stroke()}},N.prototype.getProperty=function(t){switch(t){case R.theshape:return this.shape;case R.strokewidth:return this.strokewidth;case R.imagepath:return this.imagePath;case R.animation:case R.attr:return null;case eBaseProperties.backcolor:case eBaseProperties.backalpha:return this.shapebackColor;case eBaseProperties.forecolor:return this.shapeforeColor;case eBaseProperties.backpattern:return this.shapePattern;case eBaseProperties.bordercolor:return this.shapeborderColor}return this.superclass.getProperty.call(this,t)},N.prototype.getCanAssign=function(t){switch(t){case R.theshape:case R.strokewidth:case R.imagepath:case R.attr:case eBaseProperties.backcolor:case eBaseProperties.forecolor:case eBaseProperties.backpattern:case eBaseProperties.bordercolor:case eBaseProperties.backalpha:return!0;case R.animation:return H}return this.superclass.getCanAssign.call(this,t)};var R={theshape:"$::shape",strokewidth:"$strokewidth",imagepath:"$imagepath",animation:"$animation",attr:"$attr"};N.prototype.setProperty=function(t,e){switch(t){case R.theshape:return this.shape=e,this.mScale=1,this.update(),!0;case R.strokewidth:return this.strokewidth=e,this.mScale=1,this.update(),!0;case R.imagepath:return this.imagePath=e,this.mScale=1,this.update(),!0;case R.animation:return H&&this.addAnimation(e),!0;case R.attr:return this.addAttr(e),!0;case eBaseProperties.backcolor:return this.mScale=1,this.shapebackColor=+e,this.update(),!0;case eBaseProperties.backalpha:return this.themeableData.backgroundAlpha=+e,this.mScale=1,this.update(),!0;case eBaseProperties.forecolor:return this.mScale=1,this.shapeforeColor=+e,this.update(),!0;case eBaseProperties.backpattern:return this.mScale=1,this.shapePattern=1*e,this.update(),!0;case eBaseProperties.bordercolor:return this.mScale=1,this.shapeborderColor=+e,this.update(),!0}return this.superclass.setProperty.call(this,t,e)},N.prototype.visibilityChanged=function(){var t=this.superclass.visibilityChanged.call(this);return t&&this.getTrueVisibility()&&this.update(),t},N.prototype.sizeChanged=function(){this.superclass.sizeChanged.call(this),this.update()};var M,F=!1,H=!1,z=N;i(2772),i(4986),i(561),i(9653);function W(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function U(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?W(Object(i),!0).forEach((function(e){V(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):W(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function V(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var q={headerborder:-283,headerfillcolor:-287,headerlinestyle:-487,horzheaderborder:-284,horzheaderfillcolor:-288,horzheaderlinestyle:-488,showheader:-477,showhorzheader:-478,horzfooterborder:-1389,horzfooterfillcolor:-1388,horzfooterlinestyle:-1390,showhorzfooter:-1386,rowheight:-517,headerheight:-515,horzheaderheight:-516,horzfooterheight:-1387,rowborder:-286,rowdividerlinestyle:-489},K=1,G=258,Y=260,X=288;Q.prototype=new a.U2,Q.prototype.WHICH_ELEM={FIRST:0,LAST:1,SAME:2};var J=U(U({},a.Mr),{},{HEADER_BACKCOLOR:"HEADER_BACKCOLOR",HORZ_HEADER_BACKCOLOR:"HORZ_HEADER_BACKCOLOR",HORZ_FOOTER_BACKCOLOR:"HORZ_FOOTER_BACKCOLOR"});function Q(){this.init_class_inst()}Q.prototype.DefaultColors=U(U({},a.U2.prototype.DefaultColors),{},(V(M={},J.HEADER_BACKCOLOR,o.l1.primaryLight),V(M,J.HORZ_HEADER_BACKCOLOR,o.l1.background),V(M,J.HORZ_FOOTER_BACKCOLOR,o.l1.background),M)),Q.prototype.init_class_inst=function(){this.superclass=a.U2.prototype,this.superclass.init_class_inst.call(this),this.lastLineCount=-1,this.origRowHeight=-1,this.mFocusStyle=eBaseFocusStyle.eWithin,this.usesNotActiveOverlay=!0,this.mDisableSetClientSize=!0},Q.prototype.baseClassName=Q.prototype.baseCSSClassName="omnis-complexgrid",Q.prototype.delete_class_inst=function(){null!=this.iscroll&&this.iscroll.destroy(),this.getClientElem().removeEventListener("focus",this.mEventFunction,!0),this.superclass.delete_class_inst.call(this)},Q.prototype.init_ctrl_inst=function(t,e,i,s){var r=this;this.superclass.init_ctrl_inst.call(this,t,e,i,s),jOmnis.mDesign&&(this.dataName=jOmnis.mDesignTempList),this.initialLayoutWidths={};for(var n=this.form.mPositionInfo.getLayoutNames(),o=0;o<n.length;o++)this.initialLayoutWidths[n[o]]=this.cachedPositionInfo.getLayoutInfo(n[o]).width;this.mRenderCache={},this.mFreeRows=[],this.mLastRenderedScrollTop=0;var l=this.getCtrlElem("_header"),h=this.getCtrlElem("_hheader"),c=this.getCtrlElem("_hfooter");this.mHeaderElem=l,this.mHHeaderElem=h,this.mHFooterElem=c,this.mHHeaderScrElem=this.getCtrlElem("_hheaderscr"),this.mHFooterScrElem=this.getCtrlElem("_hfooterscr"),this.mBorderElem=this.getCtrlElem("_border");var u=this.baseCSSClassName+"-header",d=this.baseCSSClassName+"-hheader",p=this.baseCSSClassName+"-hfooter",m=this.getProperty(eBaseProperties.cssclassname);if(m){var f=" "+m.split(" ")[0],g=f+"-hheader",v=f+"-hfooter";u+=f+="-header",d+=g,p+=v}jOmnis.addClass(l,u),jOmnis.addClass(h,d),c&&jOmnis.addClass(c,p),this.mBorderElem.style.boxSizing="border-box",l.style.boxSizing="border-box",h.style.boxSizing="border-box",c&&(c.style.boxSizing="border-box"),this.mHeaderObjCount=0,this.mHHeaderObjCount=0,this.mRowObjCount=0,this.mCountRowSectionObjs=!0;var b=this.getClientElem(),y=b.firstChild;this.applyBorderToElements(y);var C=this.getTheme(),_=this.DefaultColors;[l,h,c].forEach((function(t){!function(t){if(t&&(t.themeableData=C.getThemeableObj(t),t.themeableData)){var e=0;switch(t){case l:e=_[J.HEADER_BACKCOLOR];break;case h:e=_[J.HORZ_HEADER_BACKCOLOR];break;case c:e=_[J.HORZ_FOOTER_BACKCOLOR]}t.style.backgroundColor=C.getColorString(t.themeableData.backgroundColor,e,t.themeableData.backgroundAlpha)}}(t)})),y&&(this.origRowHeight=Number(y.getAttribute("data-height"))),jOmnis.mDesign&&+b.firstChild.getAttribute("data-linestyle")===a.EF.None&&this.setPropertyLineStyle(b.firstChild,a.EF.Dotted,"Bottom"),this.rowTemplate=b.cloneNode(!0),b.innerHTML="";var E=b.getAttribute("data-vst");this.mScrollTips=null!=E&&1*E!=0;var w=document.createElement("DIV");if(w.id="scroll_"+this.objNumber,b.innerHTML="",b.appendChild(w),jOmnis.mDesign&&this.form.isSubform&&this.showDisabledDesignScrollbars(b),this.form.installChildren(this,l,this,0,!0),this.form.installChildren(this,this.mHHeaderScrElem,this,0,!0),this.mHFooterScrElem&&this.form.installChildren(this,this.mHFooterScrElem,this,0,!0),jOmnis.useiScroll){var k={};k.omnisObject=this,k.preventDefault=!0,k.preventDefaultException={tagName:/^(INPUT|TEXTAREA|SELECT)$/},k.scrollX=!0,k.scrollY=!0,k.probeType=3,k.click=!0,k.scrollbars=!0,k.mouseWheel=!0,Function.prototype.bind&&(k.fadeScrollbars=!0),k.momentum=!0,k.bounce=!0,k.disableMouse=!1,this.iscroll=this.attachIScroll(b,k,!0),this.horzscroll&&this.vertscroll||this.updateIScrollOptions(this.iscroll,{scrollX:this.horzscroll,scrollY:this.vertscroll})}var T=jOmnis.getAttributeAsBool(l,"data-visible",!0),S=jOmnis.getAttributeAsBool(h,"data-visible",!0),x=!!c&&jOmnis.getAttributeAsBool(c,"data-visible",!0);return T&&S&&x||this.visibilityChanged(),b.onscroll=this.mEventFunction,b.addEventListener("focus",this.mEventFunction),b.addEventListener("click",this.mEventFunction,!0),b.tabIndex=this.isActive()?0:-1,b.addEventListener("keydown",this.mEventFunction),b.addEventListener("keyup",this.mEventFunction),b.addEventListener("focusin",(function(t){var e=jOmnis.getOmnisCtrl(t.target);e&&r.isChildControl(e)&&(r.mElemsAreTabbable=!0)})),b.setAttribute("role","grid"),jOmnis.addClass(b,this.mDisableSystemFocus?"noFocus":"autoFocus"),!1},Q.prototype.getErrorBorderDiv=function(){return this.mBorderElem},Q.prototype.getFilterDiv=function(){return this.mBorderElem},Q.prototype.installChild=function(t){var e;this.mChildren.push(t),this.mRowObjs&&this.mRowObjs.push(t),e=t.mChildren&&t.mChildren.length?t.mChildren.length+1:1,t.elem.parentNode==this.mHeaderElem?this.mHeaderObjCount+=e:t.elem.parentNode==this.mHHeaderScrElem?this.mHHeaderObjCount+=e:t.elem.parentNode==this.mHFooterScrElem?this.mHFooterObjCount+=e:this.mCountRowSectionObjs&&(this.mRowObjCount+=e)},Q.prototype.setScreenSize=function(t,e,i,s,r){this.ssEdgeFloat=s?this.superclass.setScreenSize.call(this,t,0,0,s,r):this.superclass.setScreenSize.call(this,t,e,i,s,r);var n=this.ssEdgeFloat;switch(n){case WND_WC_MENUBAR:case WND_WC_TOOLBAR_TOP:case WND_WC_STATUSBAR:case WND_WC_TOOLBAR_BOTTOM:case WND_WC_MAIN_HEADER:case WND_WC_HORZ_FOOTER:case WND_WC_HORZ_HEADER:this.ssEdgeFloat=WND_FLOAT_RIGHT;break;case WND_WC_TOOLBAR_LEFT:case WND_WC_TOOLBAR_RIGHT:case WND_WC_VERT_HEADER:this.ssEdgeFloat=WND_FLOAT_BOTTOM;break;case WND_WC_CLIENT:case WND_WC_HEADER_BUTTON:this.ssEdgeFloat=WND_FLOAT_RIGHT+WND_FLOAT_BOTTOM}var o=this.getClientElem();"scroll"==o.style.overflowX&&(this.ssEdgeFloat=0),this.mSetScreenSize=!0,this.mRowSize={width:0,height:0},this.mChildrenSizeInfo={};var a=o.firstChild.childNodes;if(a.length){var l=a[0].getAttribute("data-row");if(l){var h=1*l;h>0&&(this.setScreenSizeChildControls(this.form.curScreenSize,h,this.mRowSize,null,s,!1,e,i,r),this.mChildrenSizeInfo=this.getClientControlSizes(this.mRenderCache[h].objs))}}this.resizeElements(!0,!0);return this.setScreenSizeChildControls(this.form.curScreenSize,0,{width:0,height:0},null,s,!1,e,i,r),this.mSetScreenSize=!1,this.ssEdgeFloat=n,n};var Z=0;Q.prototype.updateCtrl=function(t,e){var i=this;if(!this.getTrueVisibility(null)&&!this.mSetScreenSize){if(""===t){for(var s in this.mRenderCache)this.removeRenderCacheEntry(s);this.mFreeRows=[]}return!1}if(this.mInUpdate||this.mWillRender)return!1;this.mInUpdate=!0;var r=this.getLineCount(),n=this.getClientElem(),o=0;function a(t,e){jOmnis.mDesign||(e.style.width="100%");var i=n.clientWidth;o=i>t.width?i:t.width}if(this.lastLineCount=r,this.mScrolling&&this.saveBeforeMadeInvisible(),this.mScrollEndDiv){var l=this.origRowHeight*r;this.mScrollEndDiv.style.top=l-1+"px",jOmnis.useiScroll&&(n.firstChild.style.height=l+"px")}this.mLastRenderedScrollTop=this.getScrollTop(),e=Math.ceil(this.mLastRenderedScrollTop/this.origRowHeight)-1,this.visLineCount=Math.ceil(n.clientHeight/this.origRowHeight);var h=e+this.visLineCount+2;if(e<1){var c=1-e;e+=c,h+=c}for(var s in h>r&&(h=r),this.mRenderStart=e,this.mRenderEnd=h,delete this.mObjs,this.mRenderCache){var u=1*s;(u<e||u>h)&&this.removeRenderCacheEntry(s)}jOmnis.mDeferApplyStyles=!0;for(var d=h-e+1,p={},m=!1;e<=h;++e){var f,g=this.mRenderCache[e];if(g)f=g.rowDiv,this.mInRender&&(p[e]=1);else if(this.mFreeRows.length){if(f=this.installFreeRow(e),w=e%2?"odd":"even",!jOmnis.hasClass(f,w)){if("odd"==w)var v="even";else v="odd";jOmnis.removeClass(f,v),jOmnis.addClass(f,w)}}else{f=this.rowTemplate.cloneNode(!0);for(var b=++Z,y=f.querySelectorAll('*[id*="_"]'),C=0;C<y.length;C++){var _=y[C],E=_.id.lastIndexOf("_");_.id=_.id.substr(0,E+1)+b+_.id.substring(E)}(f=f.firstChild).parentNode.removeChild(f),f.setAttribute("data-row",e);var w=e%2?"odd":"even";f.className=this.baseCSSClassName+"-row "+w;var k=f.children;for(C=0;C<k.length;C++)k[C].setAttribute("role","cell");this.appendRowDiv(n.firstChild,f,e),this.mRowObjs=[],this.form.installChildren(this,f,this,e,!1,b),this.mCountRowSectionObjs=!1,this.mRenderCache[e]={rowDiv:f,objs:this.mRowObjs},this.mRowObjs=null}if(!g||this.pager&&this.pager.changingPage){var T,S=this.mRenderCache[e].objs;if(this.mRowPropertyCache)T=i.pager?i.pager.pagedRowToAbsoluteRow(e):e,function t(e){for(var i=0;i<e.length;++i){var s=e[i],r=this.mRowPropertyCache[s.objNumber];if(r){var n=function(t,e){if(t){var i,r=s.currentItemProperty();for(var n in r&&(i=s.getProperty(r)),t)if(!e||null==e[n]){jOmnis.isInteger(n)&&(n*=1),m||(s.form.inst.startRecordingUpdates(),m=!0);var o=t[n];if(s.isItemProperty(n))for(var a in o)s.doSetProperty(r,a),s.doSetProperty(n,o[a]);else s.doSetProperty(n,o)}r&&s.doSetProperty(r,i)}},o=r[T];n(r[0],o),n(o)}s.complexGridRerendered&&s.complexGridRerendered(),s.mChildren&&t.call(this,s.mChildren)}}.call(i,S)}var x=this.mInitDone&&this.lastRenderedRows>0,D=0;if(!x){D=this.cachedPositionInfo.getLayoutInfo(this.form.curScreenSize).width-this.initialLayoutWidths[this.form.curScreenSize];for(var O=0;O<this.mChildren.length;O++){var A=this.mChildren[O];A.cachedPositionInfo.floatedLayouts||(A.cachedPositionInfo.floatedLayouts={}),A.cachedPositionInfo.floatedLayouts[this.form.curScreenSize]=!0}}this.mRowSize={width:0,height:0},this.setScreenSizeChildControls(this.form.curScreenSize,e,this.mRowSize,this.mChildrenSizeInfo,!1,x,D,null,!1,!0),0==o&&a(this.mRowSize,f),f.style.position="absolute",f.style.top=this.origRowHeight*(e-1)+"px",jOmnis.mDesign||(f.style.width=o+"px"),f.style.overflow="hidden",f.style.height=this.origRowHeight-this.rowBorderWidth+"px"}m&&this.form.inst.stopRecordingAndApplyUpdates(),jOmnis.mDeferApplyStyles=!1,jOmnis.applyStyles(),this.mTotalObjCount=this.mHeaderObjCount+this.mHHeaderObjCount+this.mRowObjCount*d,0===d&&this.lastRenderedRows>0&&(this.mFreeRows=[],this.mChildrenSizeInfo={}),this.lastRenderedRows=d,this.mScrolling&&this.restoreAfterMadeVisible(!0);var P=this.mHHeaderScrElem;P.style.width=o?o+jOmnis.getScrollbarWidth()+"px":"100%";var I=this.mHFooterScrElem;if(I&&(I.style.width=o?o+jOmnis.getScrollbarWidth()+"px":"100%"),n.firstChild.style.width=o+"px",this.updateChildControls(this.mChildren,!1,p),d>0){var L=+n.firstChild.childNodes[0].getAttribute("data-row");this.mChildrenSizeInfo=this.getClientControlSizes(this.mRenderCache[L].objs)}this.iscroll&&this.iscroll.refresh(),this.mInitDone=!0,this.mTabOrderTimeout&&clearTimeout(this.mTabOrderTimeout);var j=this;return this.mTabOrderTimeout=setTimeout((function(){j.form.setTabOrder(),j.mTabOrderTimeout=null}),0),this.mContainedElems&&this.setContainedElemsTabIndex(!0),this.setContainedElems(),this.setContainedElemsTabIndex(this.mElemsAreTabbable),this.setDefaultAriaLabelledBy(),this.mInUpdate=!1,!0},Q.prototype.removeRenderCacheEntry=function(t){var e=this.mRenderCache[t];e.rowDiv.parentNode.removeChild(e.rowDiv);var i=e.objs;if(i.length){for(var s=0;s<i.length;++s){var r=i[s];if(r.mValidateNumbers){var n=r instanceof ctrl_combobox?r.edit:r.getClientElem();jOmnisVal.removeObject(n)}r.resetAppearance()}var o=this.mChildren.indexOf(i[0]);-1!=o&&this.mChildren.splice(o,i.length)}this.mFreeRows.push(e),delete this.mRenderCache[t]},Q.prototype.installFreeRow=function(t){var e=this.mFreeRows.pop(),i=e.rowDiv;i.setAttribute("data-row",t);var s=e.objs;!function e(i){for(var s=0;s<i.length;++s){var r=i[s];r.mChildren&&r.mChildren.length&&e(r.mChildren),r.rowNumber=t,r.dataIndex=-1}}(s);var r=this.getClientElem();this.appendRowDiv(r.firstChild,i,t);for(var n=0;n<s.length;++n)this.installChild(s[n]);return this.mRenderCache[t]=e,i},Q.prototype.appendRowDiv=function(t,e,i){for(var s=t.children,r=s.length,n=0;n<r;++n){var o=s[n];if(+o.getAttribute("data-row")>i)return void t.insertBefore(e,o)}e.setAttribute("role","row"),t.appendChild(e)},Q.prototype.render=function(){var t;this.mScrolling=!0;var e=jOmnis.getOmnisCtrl(document.activeElement);e&&(e.rowNumber,t=e.getFocusState(document.activeElement)),this.mInRender=!0,this.updateCtrl(),this.mInRender=!1,t&&e.setFocusFromState(t),this.mScrolling=!1},Q.prototype.getScrollTop=function(){return jOmnis.useiScroll?this.iscroll?-this.iscroll.y:0:this.clientElem.scrollTop},Q.prototype.getScrollLeft=function(){return jOmnis.useiScroll?this.iscroll?-this.iscroll.x:0:this.clientElem.scrollLeft},Q.prototype.handleEvent=function(t){var e,i,s=this.getClientElem();function r(){for(u=t.target,i=jOmnis.getOmnisCtrl(u),e=i.clientElem.parentElement.attributes.name.value;null!==i&&!(i instanceof Q);)u=i.elem.parentNode,i=jOmnis.getOmnisCtrl(u)}switch(t.type){case"click":var n=function(t,e){this.eventParamsAdd("pLineNumber",t),this.sendEvent(e?eBaseEvent.evDoubleClick:eBaseEvent.evClick)};for(u=t.target,i=jOmnis.getOmnisCtrl(u);!(null===i||i instanceof Q||i.canSendEvent(eBaseEvent.evClick));)u=i.elem.parentNode,i=jOmnis.getOmnisCtrl(u);if(null!==i&&i instanceof Q)if(this.setContainedElemsTabIndex(!0),this.canSendEvent(eBaseEvent.evDoubleClick,!0))if(this.doubleClickTimer&&u===this.firstClickTarget)u===this.firstClickTarget&&(clearTimeout(this.doubleClickTimer),this.doubleClickTimer=null,n.call(this,+u.getAttribute("data-row"),!0));else{this.firstClickTarget=u;var o=this;this.doubleClickTimer=setTimeout((function(){o.doubleClickTimer=null,o.canSendEvent(eBaseEvent.evClick)&&n.call(o,+u.getAttribute("data-row"),!1)}),400)}else this.canSendEvent(eBaseEvent.evClick,!0)&&n.call(this,+u.getAttribute("data-row"),!1);break;case"scroll":if(this.ignoreNextScrollEvent)return void(this.ignoreNextScrollEvent=!1);if(jOmnis.useiScroll&&!t.isArtificial)return;if(t.target===s&&!this.mInScrollEvent){this.mInScrollEvent=!0;try{var a;if(!jOmnis.useiScroll)(a=this.mHHeaderScrElem).style.left=s.scrollLeft>0?-s.scrollLeft+"px":"0px",(a=this.mHFooterScrElem)&&(a.style.left=s.scrollLeft>0?-s.scrollLeft+"px":"0px");this.mScrollTimeout&&(clearTimeout(this.mScrollTimeout),this.mScrollTimeout=null);var l=this.getScrollTop();if(this.mLastRenderedScrollTop!=l&&(1!=this.mRenderStart||this.mRenderEnd!=this.getLineCount())){var h=this.origRowHeight/2;h>32&&(h=32),!jOmnis.useiScroll&&Math.abs(l-this.mLastRenderedScrollTop)<h&&(l<this.mLastRenderedScrollTop&&(h=-h),l=this.mLastRenderedScrollTop+h,s.scrollTop=l),!this.iscroll&&Math.abs(this.mLastRenderedScrollTop-l)>s.clientHeight?this.render():(i=this,this.mScrollTimeout=setTimeout((function(){i.render(),i.mScrollTimeout=null}),100)),this.mScrollTips&&this.showScrollTip(l)}}finally{this.mInScrollEvent=!1}}return this.superclass.handleEvent.call(this,t);case"keyup":"Escape"===OmnisKeyboardHandler.getNormalizedEventKey(t)&&document.activeElement!==s&&s.focus();break;case"keydown":var c=OmnisKeyboardHandler.getNormalizedEventKey(t);switch(c){case"Tab":if(document.activeElement===s){this.setContainedElemsTabIndex(!1);break}var u=t.target;for(i=jOmnis.getOmnisCtrl(u);null!==i&&!(i instanceof Q);)u=i.elem.parentNode,i=jOmnis.getOmnisCtrl(u);var d=+u.getAttribute("data-row");this.lastLineCount<=Object.keys(this.mRenderCache).length?jOmnis.tabFocusTrap(this.mContainedElems[0],this.mContainedElems[this.mContainedElems.length-1],t):d!==this.lastLineCount||t.shiftKey||t.target!==this.mContainedElems[this.mContainedElems.length-1]?1===d&&t.shiftKey&&t.target===this.mContainedElems[0]&&this.focusOnOffScreenRowAndCtrl(this.lastLineCount,this.WHICH_ELEM.LAST):this.focusOnOffScreenRowAndCtrl(1,this.WHICH_ELEM.FIRST);break;case"Enter":if(document.activeElement!==s)break;this.setContainedElemsTabIndex(!0),this.mElemsAreTabbable=!0,this.focusOnLastSelectedElement(),jOmnis.stopEventNow(t);break;case"Home":case"End":if(!t.ctrlKey||s===document.activeElement)break;var p="Home"===c?1:this.lastLineCount;if(r(),p===+u.getAttribute("data-row"))break;this.focusOnOffScreenRowAndCtrl(p,this.WHICH_ELEM.SAME,e);break;case"PageUp":case"PageDown":case"[":case"]":if(!t.ctrlKey&&("]"===c||"["===c)||s===document.activeElement)break;t.preventDefault(),jOmnis.stopEventNow(t),r(),this.focusOnRowAndCtrl(u,c,t.ctrlKey,e)}break;case"focus":for(var m=t.relatedTarget,f=!1;!f&&m&&m.parentElement;)m===s&&(f=!0),m=m.parentElement;return this.containedFocusEvent||f?(this.containedFocusEvent=!1,this.mContainedElems||this.setContainedElems(),document.activeElement===s?(this.mContainedElems||this.setContainedElems(),this.setContainedElemsTabIndex(!1),this.mElemsAreTabbable=!1):(this.mContainedElems&&this.setContainedElemsTabIndex(!0),this.mLastActiveElement=document.activeElement),!0):void s.focus();case"tap":return!0;case"omnis-getrownumber":return this.getLineNumber();default:return this.superclass.handleEvent.call(this,t)}},Q.prototype.scrollTo=function(t){t>this.lastLineCount&&(t=this.lastLineCount);var e=(t-1)*this.origRowHeight;this.iscroll?(this.iscroll.scrollTo(this.iscroll.x,-e,0),this.iscroll.refresh(),this.render()):(this.clientElem.scrollTop=e,this.ignoreNextScrollEvent=!0,this.render())},Q.prototype.focusOnOffScreenRowAndCtrl=function(t,e,i){switch(this.scrollTo(t),event.preventDefault(),this.containedFocusEvent=!0,e){case this.WHICH_ELEM.FIRST:var s=this.mContainedElems[0];break;case this.WHICH_ELEM.LAST:s=this.mContainedElems[this.mContainedElems.length-1];break;case this.WHICH_ELEM.SAME:s=this.getNamedControlFromRow(i,t)}s.focus()},Q.prototype.focusOnRowAndCtrl=function(t,e,i,s){var r=t.parentElement.querySelectorAll("[data-row]"),n=+r[0].attributes["data-row"].value,o=+r[r.length-1].attributes["data-row"].value,a=+t.getAttribute("data-row");switch(e){case"]":var l=a+1>o?a:a+1;break;case"[":l=a-1<n?a:a-1;break;case"PageUp":l=a-this.visLineCount<n?n:a-this.visLineCount;break;case"PageDown":l=a+this.visLineCount>o?o:a+this.visLineCount}var h="[data-row='"+l+"']";t.parentElement.querySelector(h).querySelector("[name='"+s+"']").omnisObject.clientElem.focus()},Q.prototype.focusOnLastSelectedElement=function(){this.mLastActiveElement?this.mLastActiveElement.focus():this.mContainedElems[0].focus()},Q.prototype.setContainedElemsTabIndex=function(t){for(var e=0;e<this.mContainedElems.length;e++)this.mContainedElems[e].tabIndex=t?"0":"-1"},Q.prototype.setContainedElems=function(){this.mContainedElems=this.clientElem.querySelectorAll("[tabindex='0']")},Q.prototype.showScrollTip=function(t){var e=this.getClientElem();this.mScrollTip?(this.mScrollTipTimeout&&(clearTimeout(this.mScrollTipTimeout),this.mScrollTipTimeout=null),jOmnis.clearAnimations(this.mScrollTip)):this.mScrollTip=document.createElement("DIV");var i=this.mScrollTip;i.parentNode||document.body.appendChild(i),i.omnisObject=this,i.className="ctrl-scrolltip";var s,r=Math.ceil(t/this.origRowHeight)+1;null!=this.mScrollTipMethod&&!0!==this.mScrollTipMethod||(s=this.callMethodEx("$getscrolltip",eDoMethodFlags.clientOnly|eDoMethodFlags.noLog|eDoMethodFlags.noOverlay,r),this.mScrollTipMethod=null!=s),null==s&&(s=this.getData("#COL",r,1)),i.textContent=s,i.style.position="absolute",i.style.opacity=1;var n=jOmnis.getElemPosRelativeToAncestor(e);i.style.top=n.y+e.clientHeight/2+"px",i.style.left=n.x+e.clientWidth-i.clientWidth+"px";var o=this;this.mScrollTipTimeout=setTimeout((function(){jOmnis.animate(i,{opacity:0},200),o.mScrollTipTimeout=null}),1e3)},Q.prototype.transitionEnded=function(t){t==this.mScrollTip&&document.body.removeChild(t)},Q.prototype.sizeChanged=function(t){if(this.rowTemplate)if(this.mScrollEndDiv)t&&this.resizeElements(!0,!0);else{var e=document.createElement("DIV");e.style.height="1px",e.style.position="relative",this.getClientElem().appendChild(e),this.mScrollEndDiv=e,this.resizeElements(!0,!0)}this.superclass.sizeChanged.call(this)},Q.prototype.defaultBorder=function(){return this.getClientElem().getAttribute("data-effect")},Q.prototype.defaultFillColor=function(){return this.getClientElem().getAttribute("data-backgroundcolor")},Q.prototype.getChildVisibility=function(t){switch(Number(t.elem.getAttribute("data-objlink"))>>16){case K:return jOmnis.getAttributeAsBool(this.mHeaderElem,"data-visible",!0);case G:return jOmnis.getAttributeAsBool(this.mHHeaderElem,"data-visible",!0);case X:return!!this.mHFooterElem&&jOmnis.getAttributeAsBool(this.mHFooterElem,"data-visible",!0);case Y:return!0}return!1},Q.prototype.getTrueVisibility=function(t){var e=this.superclass.getTrueVisibility.call(this,t);return e&&t&&(e=this.getChildVisibility(t)),e},Q.prototype.visibilityChangedElem=function(t,e){if(null!=t){var i="hidden"!=t.style.visibility;if(jOmnis.getAttributeAsBool(t,"data-visible",!0)||(e=!1),i!=e)return t.style.visibility=e?"visible":"hidden",this.resizeElements(!0,!0),!0}return!1},Q.prototype.visibilityChanged=function(){var t=this.superclass.visibilityChanged.call(this),e=this.getTrueVisibility(null);t&&(this.getClientElem().style.display=e?"":"none");if(t|=this.visibilityChangedElem(this.mBorderElem,e),t|=this.visibilityChangedElem(this.mHeaderElem,e),t|=this.visibilityChangedElem(this.mHHeaderElem,e),this.mHFooterElem&&(t|=this.visibilityChangedElem(this.mHFooterElem,e)),t|=this.visibilityChangedElem(this.mHHeaderScrElem,e),this.mHFooterScrElem&&(t|=this.visibilityChangedElem(this.mHFooterScrElem,e)),t){e&&this.render();var i=this.mChildren;if(i)for(var s=0;s<i.length;s++)i[s].visibilityChanged();return!0}return!1},Q.prototype.touchChangedPosition=function(t){this.handleTouchScroll(t)},Q.prototype.touchScrollEnded=function(t){this.handleTouchScroll(t)},Q.prototype.handleTouchScroll=function(t){"h"==t.directionLocked?(this.mHHeaderScrElem.style.left=t.x+"px",this.mHFooterScrElem&&(this.mHFooterScrElem.style.left=t.x+"px")):(this.getClientElem().contains(document.activeElement)&&document.activeElement.blur(),jOmnis.sendDOMEvent(this.getClientElem(),"scroll"))},Q.prototype.getProperty=function(t){switch(t){case q.headerborder:return(i=this.mHeaderElem.getAttribute("data-effect"))?1*i:eBaseBorder.None;case q.headerfillcolor:return jOmnis.rgbFromCssColor(this.mHeaderElem.style.backgroundColor);case q.headerlinestyle:return(e=this.mHeaderElem.getAttribute("data-linestyle"))?1*e:a.EF.None;case q.horzfooterborder:return(i=this.mHFooterElem.getAttribute("data-effect"))?1*i:eBaseBorder.None;case q.horzfooterfillcolor:return jOmnis.rgbFromCssColor(this.mHFooterElem.style.backgroundColor);case q.horzfooterlinestyle:return(e=this.mHFooterElem.getAttribute("data-linestyle"))?1*e:a.EF.None;case q.showhorzfooter:return 1==this.mHFooterElem.getAttribute("data-visible");case q.horzheaderborder:return(i=this.mHHeaderElem.getAttribute("data-effect"))?1*i:eBaseBorder.None;case q.horzheaderfillcolor:return jOmnis.rgbFromCssColor(this.mHHeaderElem.style.backgroundColor);case q.horzheaderlinestyle:var e;return(e=this.mHHeaderElem.getAttribute("data-linestyle"))?1*e:a.EF.None;case q.showheader:return 1==this.mHeaderElem.getAttribute("data-visible");case q.showhorzheader:return 1==this.mHHeaderElem.getAttribute("data-visible");case eBaseProperties.errorline:return this.errorRow?this.errorRow:0;case eBaseProperties.vscrolltips:return this.mScrollTips;case q.rowheight:return this.origRowHeight;case q.headerheight:return jOmnis.getOmnisHeight(this.mHeaderElem);case q.horzheaderheight:return jOmnis.getOmnisHeight(this.mHHeaderElem);case q.horzfooterheight:return jOmnis.getOmnisHeight(this.mHFooterElem);case q.rowborder:var i;return(i=this.clientElem.getAttribute("data-effect"))?1*i:eBaseBorder.None;case q.rowdividerlinestyle:return+this.rowTemplate.firstChild.getAttribute("data-linestyle");case eBaseProperties.effect:return this.getPropertyBorder(this.mBorderElem);case eBaseProperties.linestyle:return this.getPropertyLineStyle(this.mBorderElem)}return this.superclass.getProperty.call(this,t)},Q.prototype.getCanAssign=function(t){switch(t){case q.horzfooterborder:case q.horzfooterfillcolor:case q.horzfooterlinestyle:case q.showhorzfooter:case q.headerborder:case q.headerfillcolor:case q.headerlinestyle:case q.horzheaderborder:case q.horzheaderfillcolor:case q.horzheaderlinestyle:case q.showheader:case q.showhorzheader:case eBaseProperties.errorline:case eBaseProperties.vscrolltips:case q.rowheight:case q.headerheight:case q.horzheaderheight:case q.horzfooterheight:case q.rowborder:case q.rowdividerlinestyle:return!0}return this.superclass.getCanAssign.call(this,t)},Q.prototype.setProperty=function(t,e){function i(t,i){(e*=1)>=0&&e!=+i.getAttribute("data-height")&&(i.setAttribute("data-height",e),t.resizeElements(!0,!0))}var s,r;switch(t){case q.headerborder:r=this.setPropertyBorder(this.mHeaderElem,e,this.defaultBorder()),s=!0;break;case q.headerfillcolor:return e=+e,this.mHeaderElem.themeableData.backgroundColor=e,this.mHeaderElem.style.backgroundColor=this.getTheme().getColorString(e,this.DefaultColors[J.HEADER_BACKCOLOR],this.mHeaderElem.themeableData.backgroundAlpha),!0;case q.headerlinestyle:r=this.setPropertyLineStyle(this.mHeaderElem,e),s=!0;break;case q.horzheaderborder:r=this.setPropertyBorder(this.mHHeaderElem,e,this.defaultBorder()),s=!0;break;case q.horzheaderfillcolor:return e=+e,this.mHHeaderElem.themeableData.backgroundColor=e,this.mHHeaderElem.style.backgroundColor=this.getTheme().getColorString(e,this.DefaultColors[J.HORZ_HEADER_BACKCOLOR],this.mHHeaderElem.themeableData.backgroundAlpha),!0;case q.horzheaderlinestyle:r=this.setPropertyLineStyle(this.mHHeaderElem,e),s=!0;break;case q.horzfooterborder:r=this.setPropertyBorder(this.mHFooterElem,e,this.defaultBorder()),s=!0;break;case q.horzfooterfillcolor:return e=+e,this.mHFooterElem.themeableData.backgroundColor=e,this.mHFooterElem.style.backgroundColor=this.getTheme().getColorString(e,this.DefaultColors[J.HORZ_FOOTER_BACKCOLOR],this.mHFooterElem.themeableData.backgroundAlpha),!0;case q.horzfooterlinestyle:r=this.setPropertyLineStyle(this.mHFooterElem,e),s=!0;break;case q.showhorzfooter:this.mHFooterElem.setAttribute("data-visible",e?1:0);try{this.mWillRender=!0,this.visibilityChanged()}finally{this.mWillRender=!1,this.resizeElements(!1,!0)}return!0;case q.showheader:case q.showhorzheader:(t==q.showheader?this.mHeaderElem:this.mHHeaderElem).setAttribute("data-visible",e?1:0);try{this.mWillRender=!0,this.visibilityChanged()}finally{this.mWillRender=!1,this.resizeElements(!1,!0)}return!0;case eBaseProperties.width:case eBaseProperties.height:return this.superclass.setProperty.call(this,t,e),this.resizeElements(t==eBaseProperties.width,t==eBaseProperties.height),!0;case eBaseProperties.errorline:return this.errorRow=1*e,!0;case eBaseProperties.vscrolltips:return this.mScrollTips=1*e!=0,!0;case eBaseProperties.vscroll:return this.scrollTo(e),!0;case eBaseProperties.hscroll:var n=this.mRowSize.width-this.clientElem.clientWidth;return e<0?e=0:e>n&&(e=n),this.iscroll?this.iscroll.scrollTo(-1*e,this.iscroll.y,0):this.clientElem.scrollLeft=1*e,!0;case q.rowheight:return(e*=1)>0&&e!=this.origRowHeight&&(this.origRowHeight=e,this.render()),!0;case q.headerheight:return i(this,this.mHeaderElem),!0;case q.horzheaderheight:return i(this,this.mHHeaderElem),this.mHHeaderScrElem.style.height="100%",!0;case q.horzfooterheight:return i(this,this.mHFooterElem),this.mHFooterScrElem.style.height="100%",!0;case q.rowborder:r=this.setPropertyBorder(this.clientElem,e,this.defaultBorder()),s=!0;break;case q.rowdividerlinestyle:e=+e;var o=this.clientElem,l=this;jOmnis.mDesign&&+e===a.EF.None&&(e=a.EF.Dotted),this.setPropertyLineStyle(this.rowTemplate.firstChild,e,"Bottom"),o.querySelectorAll(".omnis-complexgrid-row").forEach((function(t){r=l.setPropertyLineStyle(t,e,"Bottom")})),+o.getAttribute("data-effect")===eBaseEffect.plain?this.setPropertyLineStyle(o,e):o.setAttribute("data-linestyle",e),s=!0;break;case eBaseProperties.bordercolor:r=this.superclass.setProperty.call(this,t,e),this.clientElem.setAttribute("data-bordercolor",e),this.mBorderElem.setAttribute("data-bordercolor",e),this.mHeaderElem.setAttribute("data-bordercolor",e),this.mHHeaderElem.setAttribute("data-bordercolor",e);var h=this.clientElem.firstChild.firstChild;h&&h.setAttribute("data-bordercolor",e),this.mHFooterElem&&this.mHFooterElem.setAttribute("data-bordercolor",e),s=!0,this.applyBorderToElements(this.clientElem.firstChild.firstChild);break;case eBaseProperties.linestyle:r=this.setPropertyLineStyle(this.mBorderElem,e),s=!0;break;case eBaseProperties.effect:r=this.setPropertyBorder(this.mBorderElem,e),s=!0}return s?(this.resizeElements(!0,!0),r):this.superclass.setProperty.call(this,t,e)},Q.prototype.setTabIndex=function(t,e,i){var s=this.getClientElem();s.tabIndex=this.isActive()?0:-1;var r=-1==t;if(r)this.mTabOrderSetFromFocus=!1;else{if(i&&this.mTabOrderSetFromFocus)return;this.mTabOrderSetFromFocus=i}this.mTabOrder=[];var n=this;function o(t,e){var i=t.mChildren;if(i&&i.length)for(var s=0;s<i.length;++s)e=i[s].setTabIndex(e),r?e=-1:i[s].mRemovedFromTabOrder||n.mTabOrder.push(i[s]);else e=t.setTabIndex(e),r?e=-1:t.mRemovedFromTabOrder||n.mTabOrder.push(t);return e}var a=this.mChildren;if(a){for(var l=r?-1:t,h=r?-1:t+this.mHeaderObjCount,c=r?-1:h+this.mHHeaderObjCount,u=0;u<a.length;++u){var d=a[u];if(d){if(d.rowNumber)break;var p=d.elem.parentNode;p==this.mHeaderElem?l=o(d,l):p==this.mHHeaderScrElem&&(h=o(d,h))}}var m,f=this.mRenderCache;for(u=this.mRenderStart;u<=this.mRenderEnd;++u){var g=f[u];if(g){if(e){var v=g.rowDiv.offsetTop+this.rowBorderWidth,b=this.getScrollTop();m=v<b||v-b>s.clientHeight}a=g.objs;for(var y=c+(u-this.mRenderStart)*this.mRowObjCount,C=0;C<a.length;++C)y=o(a[C],m?-1:y)}}}return this.setContainedElems(),this.setContainedElemsTabIndex(this.mElemsAreTabbable),t+this.mTotalObjCount},Q.prototype.resizeElements=function(t,e){if(e){var i=0,s=0;if(this.breakpointTransitionAnimationFrame){var r=this.elem.style.height;-1!=(u=r.indexOf("px"))&&(s=parseInt(r.substr(0,u)))}s||(s=jOmnis.getOmnisHeight(this.elem,!0)),this.pager&&this.pager.isAttached&&(s-=this.pager.pagerHeight);var n=this.mBorderElem;if(jOmnis.setOmnisHeight(n,s),s=jOmnis.getOmnisHeight(n,!0),"hidden"!=(p=this.mHeaderElem).style.visibility){var o=Number(p.getAttribute("data-height"));jOmnis.setOmnisHeight(p,o),i+=o}if("hidden"!=(f=this.mHHeaderElem).style.visibility){o=Number(f.getAttribute("data-height"));jOmnis.setOmnisTop(f,i),jOmnis.setOmnisHeight(f,o),i+=o}var a=0;(m=this.mHFooterElem)&&"hidden"!=m.style.visibility&&(a=Number(m.getAttribute("data-height")));var l=this.getClientElem();jOmnis.setOmnisTop(l,i);var h=s-i;h-=a,jOmnis.setOmnisHeight(l,h),i+=h,m&&"hidden"!=m.style.visibility&&(jOmnis.setOmnisTop(m,i),jOmnis.setOmnisHeight(m,a)),this.iscroll&&this.iscroll.refresh()}if(t){var c=0;if(this.breakpointTransitionAnimationFrame){var u,d=this.elem.style.width;-1!=(u=d.indexOf("px"))&&(c=parseInt(d.substr(0,u)))}c||(c=jOmnis.getOmnisWidth(this.elem,!0));n=this.mBorderElem;jOmnis.setOmnisWidth(n,c),c=jOmnis.getOmnisWidth(n,!0);var p=this.mHeaderElem;jOmnis.setOmnisWidth(p,c);var m,f=this.mHHeaderElem;jOmnis.setOmnisWidth(f,c),(m=this.mHFooterElem)&&jOmnis.setOmnisWidth(m,c);l=this.getClientElem();jOmnis.setOmnisWidth(l,c),this.mSetScreenSize&&this.mInitDone||(this.lastLineCount=0)}this.render()},Q.prototype.setPropertyChildControls=function(t,e,i,s,r){var n=this.mChildren;if(n){var o=function(i,s){var r=u[t];r||(r={},u[t]=r);var n=r[i];if(n||(n={},r[i]=n),l){var o=n[e];o||(o={},n[e]=o),o[c]=s}else n[e]=s},a=function(i){var s=u[t];if(s&&s[i]){var r=s[i][e];return l?!!r&&null!=r[c]:null!=r}};s||(s=0);var l,h,c,u=this.mRowPropertyCache;u||(u={},this.mRowPropertyCache=u);var d=[];!function t(e){for(var i=0;i<e.length;i++){var s=e[i];d.push(s),s.mChildren&&s.mChildren.length&&t(s.mChildren)}}(n);for(var p=0;p<d.length;p++){var m=d[p];if(m.objNumber==t){g=m;break}}if(!g)return!1;if(h=g.currentItemProperty()){if(s&&e==h)return!1;if((l=g.isItemProperty(e))&&(null==(c=g.getProperty(h))||c<=0))return!1}if(s&&!a(0))o(0,g.getProperty(e));var f=s;if(this.pager){if(Math.ceil(s/this.pager.entriesPerPage)!==this.pager.displayedPage)return o(s,i),!0;f=this.pager.absoluteRowToPagedRow(s)}for(p=0;p<d.length;p++){var g;if((g=d[p]).objNumber==t&&(!s||f==g.rowNumber)){if(!s&&a(g.rowNumber))continue;if(r||g.doSetProperty(e,i),s){this.mHasExceptions=!0;break}}}o(s,i)}return!0},Q.prototype.getPropertyChildControls=function(t,e,i){i||(i=0);var s=this.mRowPropertyCache;if(s){var r=s[t.objNumber];if(r){var n=r[i];if(n){var o=n[e];if(null!=o){var a=t.currentItemProperty();if(!a)return o;if(!t.isItemProperty(e))return o;var l=t.getProperty(a);if(null!=l&&l>0&&null!=(o=o[l]))return o}}}}return t.getProperty(e)},Q.prototype.doClearexceptions=function(t,e){if(this.mRowPropertyCache){var i,s=this.mRenderCache,r=this;if(t)i=this.mRowPropertyCache[t],a();else for(var n in this.mRowPropertyCache)i=this.mRowPropertyCache[n],a();return this.mHasExceptions=!1,this.render(),!0}function o(t){1*t!=0&&(delete i[t],s[t]&&r.removeRenderCacheEntry(t))}function a(){if(i)if(e)o(e);else for(var t in i)o(t)}},Q.prototype.$clearexceptions=function(t){return this.doClearexceptions(0,t?1*t:0)},Q.prototype.setScreenSizeChildControls=function(t,e,i,s,r,n,o,a,l,h){if(-1!=t){null==o&&(o=this.form.floatX),null==a&&(a=this.form.floatY),!n&&jOmnis.canFloatHorz(this.ssEdgeFloat,this.mInLayout&&!r)||(o=0),!n&&jOmnis.canFloatVert(this.ssEdgeFloat,this.mInLayout&&!r)||(a=0),i.width=0,i.height=0;var c=this.mChildren;if(c)for(var u=0;u<c.length;u++){var d=c[u];if(d.rowNumber==e){s?f(d):d.cachedPositionInfo.floatedLayouts&&d.cachedPositionInfo.floatedLayouts[t]||(o=this.cachedPositionInfo.getLayoutInfo(t).width-this.initialLayoutWidths[t],d.cachedPositionInfo.floatedLayouts||(d.cachedPositionInfo.floatedLayouts={}),d.cachedPositionInfo.floatedLayouts[t]=!0),d.setScreenSize(t,o,a,!1,h?d.currentLayout!==this.form.curScreenSize:l);var p=d.elem.offsetTop+d.elem.offsetHeight;p>i.height&&(i.height=p);var m=d.elem.offsetLeft+d.elem.offsetWidth;m>i.width&&(i.width=m)}}return!0}function f(t){var e=s[t.objIdent];if(e&&(t.cachedPositionInfo=e),t.mChildren)for(var i=0;i<t.mChildren.length;++i)f(t.mChildren[i])}},Q.prototype.childVisibilityChanged=function(t,e){},Q.prototype.getClientControlSizes=function(t){var e={};return t&&function t(i){for(var s=0;s<i.length;++s){var r=i[s];e[r.objIdent]=r.cachedPositionInfo,r.mChildren&&t(r.mChildren)}}(t),e},Q.prototype.updateChildControls=function(t,e,i){if(t){var s,r=jOmnis.getCurrentActiveControl();e&&(s=this.getLineNumber());for(var n=0;n<t.length;n++){var o=t[n];if(!(o.mDisableUpdate||e&&o.rowNumber!=s)){if(!e&&i[o.rowNumber])continue;o.prepForComplexGridUpdate(),o.update(null,null,null,!0),o!==r||o.hasFocus()||o.focus(),o instanceof ctrl_pagedpane&&this.updateChildControls(o.mChildren,e,i)}}}},Q.prototype.getNamedControlFromRow=function(t,e){var i=this.clientElem.querySelector('[data-row="'+e+'"]'),s=i?i.querySelector('[name="'+t+'"]'):null;return s?s.omnisObject:null},Q.prototype.getLineCount=function(){return jOmnis.mDesign?1:this.useDefault?this.defaultText.length:this.getData("#LCNT")},Q.prototype.getLineNumber=function(){return this.useDefault?this.defaultLine:this.getData("#L")},Q.prototype.setLineNumber=function(t){return this.useDefault?(this.defaultLine=t,!0):this.setData(t,"#L")},Q.prototype.$objs=function(){return this.mObjs||(this.mObjs=new omnis_objs(this)),this.mObjs},Q.prototype.resolveBuiltInPropertyName=function(t){var e=q[t];return e||this.superclass.resolveBuiltInPropertyName.call(this,t)},Q.prototype.saveBeforeMadeInvisible=function(){null==this.savedScrollTop&&(this.savedScrollTop=this.getScrollTop(),this.savedScrollLeft=this.getScrollLeft())},Q.prototype.restoreAfterMadeVisible=function(t){if(null!=this.savedScrollTop){var e=function(){n.iscroll?n.iscroll.scrollTo(-r,-s,0):(i.scrollTop=s,i.scrollLeft=r),n.savedScrollTop=null,n.savedScrollLeft=null},i=this.getClientElem(),s=this.savedScrollTop,r=this.savedScrollLeft,n=this;t?e():setTimeout((function(){n.getTrueVisibility()&&e()}),0)}},Q.prototype.getNextPrevTabObject=function(t,e){var i;if(t){if(-1==(i=this.mTabOrder.indexOf(t)))return null}else i=e?this.mTabOrder.length:-1;if(e){for(var s=i-1;s>=0;--s){var r=this.mTabOrder[s];if(r=jOmnis.canTabToObject(r))return r}return this.form.getNextPrevTabObject(this,!0)}for(s=i+1;s<this.mTabOrder.length;++s){r=this.mTabOrder[s];if(r=jOmnis.canTabToObject(r))return r}return this.form.getNextPrevTabObject(this,!1)},Q.prototype.setDefaultAriaLabelledBy=function(){if(!this.mAriaLabelledby&&!this.mAriaLabel&&this.mHeaderElem){for(var t="",e=1;e<7;e++){var i;if((i=this.mHeaderElem.querySelector("h"+e))&&i.parentElement.omnisObject&&i.parentElement.omnisObject.objName&&(t=i.parentElement.omnisObject.objName),t)break}if(!t)(i=this.mHeaderElem.querySelector("label"))&&i.parentElement.omnisObject&&i.parentElement.omnisObject.objName&&(t=i.parentElement.omnisObject.objName);t&&(this.mAriaLabelledby=t,this.setAriaAttributes(eBaseProperties.arialabelledby))}},Q.prototype.getNotActiveElem=function(){return this.elem},Q.prototype.getNotEnabledElem=function(){return this.elem},Q.prototype.setChildCtrlParent=function(t,e,i){t.parentCtrl?t.parentCtrl.removeChildCtrl(t):t.form.removeChildCtrl(t);var s=-1;(e&&(s=this.mChildren.indexOf(e)),-1==s)?(K==i?this.mHeaderElem:G==i?this.mHHeaderScrElem:X==i?this.mHFooterScrElem:this.clientElem.firstChild.firstChild).appendChild(t.elem):e.elem.after(t.elem);(t.objLink=i<<16|this.objNumber,t.elem.setAttribute("data-objlink",t.objLink),t.parentCtrl=this,this.installChild(t),i==Y&&this.mRenderCache[1])&&this.mRenderCache[1].objs.push(t)},Q.prototype.removeChildCtrl=function(t){var e,i=this.mChildren.indexOf(t);if(-1!=i&&(this.mChildren.splice(i,1),t.objNumber>0&&-1!=(i=this.form.mTabOrder.indexOf(t))&&this.form.mTabOrder.splice(i,1),this.mRenderCache[1])){var s=this.mRenderCache[1].objs;-1!=(i=s.indexOf(t))&&s.splice(i,1)}e=t.mChildren&&t.mChildren.length?t.mChildren.length+1:1,t.elem.parentNode==this.mHeaderElem?this.mHeaderObjCount-=e:t.elem.parentNode==this.mHHeaderScrElem?this.mHHeaderObjCount-=e:t.elem.parentNode==this.mHFooterScrElem?this.mHFooterObjCount-=e:this.mRowObjCount-=e,t.elem.parentNode&&t.elem.parentNode.removeChild(t.elem);var r=t.getEdgeFloat(this.form.curScreenSize);r>=WND_WC_MENUBAR&&this.removeComponent(t,r),t.elem.removeAttribute("data-objlink"),t.objLink=0},Q.prototype.addParentElements=function(t){t.push(this.mHeaderElem),t.push(this.mHHeaderScrElem),t.push(this.mHFooterScrElem),t.push(this.clientElem.firstChild.firstChild)},Q.prototype.applyBorderToElements=function(t){this.setBorderFromOmnisDefinition(this.mBorderElem),this.setBorderFromOmnisDefinition(this.mHeaderElem),this.setBorderFromOmnisDefinition(this.mHHeaderElem),t&&(this.setBorderFromOmnisDefinition(t,"Bottom"),this.rowBorderWidth=this.borderWidth),this.mHFooterElem&&this.setBorderFromOmnisDefinition(this.mHFooterElem)},Q.prototype.isChildControl=function(t){for(var e=t.parentCtrl;e;){if(e===this)return!0;e=e.parentCtrl}return!1};var tt=Q;it.prototype=new ctrl_base,it.prototype.devicePixelRatio=window.devicePixelRatio||1,it.prototype.defaultAriaElem=!1;var et="$colorlist";function it(){this.init_class_inst()}function st(t,e,i){var s=[];if(0==e)s.red=s.green=s.blue=Math.round(255*i);else{var r=6*t;6==r&&(r=0);var n,o,a,l=Math.floor(r),h=i*(1-e),c=i*(1-e*(r-l)),u=i*(1-e*(1-(r-l)));0==l?(n=i,o=u,a=h):1==l?(n=c,o=i,a=h):2==l?(n=h,o=i,a=u):3==l?(n=h,o=c,a=i):4==l?(n=u,o=h,a=i):(n=i,o=h,a=c),s.red=Math.round(255*n),s.green=Math.round(255*o),s.blue=Math.round(255*a)}return s}it.prototype.COLORMANIPULATION={defaultAlpha:1,negativeAlpha:.15,negativeSelectedAlpha:.3,negativeLuminance:-.5,positiveLuminance:.5},it.prototype.init_class_inst=function(){this.superclass=ctrl_base.prototype,this.superclass.init_class_inst.call(this),this.chartBase=it.prototype,this.mFocusStyle=eBaseFocusStyle.eNone,this.usesNotActiveOverlay=!0,this.mFocusStyle=eBaseFocusStyle.eCustom,this.mCanHaveDesignBorder=0!=jOmnis.mDesign,this.showDesignName=!0},it.prototype.init_ctrl_inst=function(t,e,i,s){return this.superclass.init_ctrl_inst.call(this,t,e,i,s),!1};var rt=[];it.prototype.getcolors=function(){if(this.colorlist&&(rt=this.colorlist),null==rt||rt.length<=0){var t,e,i=[.6,.2,.05,.1333,.75,0];for(e=0;e<10;e++)e<i.length?(t=st(i[e],.75,.75),rt.push("rgb("+t.red+","+t.green+","+t.blue+")")):(t=st(i[e-i.length],1,.5),rt.push("rgb("+t.red+","+t.green+","+t.blue+")"));for(e=0;e<30;e++)rt.push("rgb("+Math.floor(255*Math.random())+","+Math.floor(255*Math.random())+","+Math.floor(255*Math.random())+")")}return rt},it.prototype.getTintColor=function(t){return this.getTheme().getColorString(OMColor.TintRGB(jOmnis.rgbFromCssColor(t),OMColor.eTintFactor.MEDIUM))},it.prototype.getLineCount=function(){return this.useDefault?this.defaultText.length:this.getData("#LCNT")},it.prototype.getColumnData=function(t,e){return this.useDefault?this.defaultText[t]:this.getData("#COL",t,e)},it.prototype.sizeChanged=function(){this.superclass.sizeChanged.call(this),this.update()},it.prototype.visibilityChanged=function(){var t=this.superclass.visibilityChanged.call(this);return this.getTrueVisibility()&&this.update(),this.activeChanged(),t},it.prototype.resizeCanvasAndGetContext=function(t,e,i){t.width=e*this.devicePixelRatio,t.height=i*this.devicePixelRatio,t.style.width=e+"px",t.style.height=i+"px";var s=t.getContext("2d");return s.scale(this.devicePixelRatio,this.devicePixelRatio),s},it.prototype.setTabIndex=function(t){return this.tabIndex=0,this.canTabToObject()&&this.canvas&&(this.canvas.tabIndex=-1==t?-1:0),t},it.prototype.focus=function(){try{this.canvas.focus()}catch(t){}},it.prototype.disableSystemFocusChanged=function(){var t=this.mDisableSystemFocus;jOmnis.removeClass(this.canvas,t?"autoFocus":"noFocus"),jOmnis.addClass(this.canvas,t?"noFocus":"autoFocus")},it.prototype.getNotActiveElem=function(){return this.elem},it.prototype.getProperty=function(t){return t===et?this.colorlist:this.superclass.getProperty.call(this,t)},it.prototype.getCanAssign=function(t){return t===et||this.superclass.getCanAssign.call(this,t)},it.prototype.setProperty=function(t,e){switch(t){case et:var i=this.getTheme();this.colorlist=[];for(var s=0;s<e.lstData.length;s++){var r=!1,n=e.lstData[s][0];isNaN(n)||(n=+n,o.Q2.isConstant(n)?n=i.getThemeColorRGB(n):o.Q2.isNonThemeConstant(n)&&(r=!0),n=i.getColorString(n)),r||this.colorlist.push(n)}return this.update(),!0;case eBaseProperties.backcolor:case eBaseProperties.textcolor:return this.superclass.setProperty.call(this,t,e),this.update(),!0}return this.superclass.setProperty.call(this,t,e)},it.prototype.getTextColor=function(){var t=this.getTheme(),e=t.getTextColorRGB(this.themeableData.color,this.resolveDefaultColor(this.themeableData.backgroundColor,a.Mr.BACKGROUND),this.DefaultColors[a.Mr.TEXT]);return t.getColorString(e)},it.prototype.getBackColor=function(){var t=this.getTheme(),e=t.getColorRGB(this.themeableData.backgroundColor,this.DefaultColors[a.Mr.BACKGROUND]);return t.getColorString(e)};var nt={evBarClicked:6e3};at.prototype=new it;var ot=16;function at(){this.init_class_inst()}function lt(t){var e=this;if(null!=e&&null!=e.chartobject||!t.srcElement||(e=t.srcElement),e.chartobject.isActive()){var i=t.offsetX;null==i&&(i=t.layerX),e.chartobject.MouseX=i*e.chartobject.devicePixelRatio;var s=t.offsetY;null==s&&(s=t.layerY),e.chartobject.MouseY=s*e.chartobject.devicePixelRatio,e.chartobject.update()}}at.prototype.init_class_inst=function(){this.superclass=it.prototype,this.superclass.init_class_inst.call(this),this.mCustomEvents=nt,this.usesTouchScroll=!1,this.baseClassName="omnis-barchart"},at.prototype.init_ctrl_inst=function(t,e,i,s){this.mHasDefaultDisableAppearanceProperty=!0,this.superclass.init_ctrl_inst.call(this,t,e,i,s),this.paper=0,this.bar=0;var r=this.getClientElem();return r.style.outline="none",this.lastSelectedSeg=-1,this.ishorz=parseInt(r.getAttribute("data-chartdirection")),this.ishorz_orig=parseInt(r.getAttribute("data-chartdirection")),this.bar_ends=parseInt(r.getAttribute("data-chartends")),this.showvalue=0!=parseInt(r.getAttribute("data-showvalue")),this.maintitle=r.getAttribute("data-maintitle"),this.x_title=r.getAttribute("data-xtitle"),this.y_title=r.getAttribute("data-ytitle"),this.drawxaxis=0!=parseInt(r.getAttribute("data-drawxaxis")),this.drawyaxis=0!=parseInt(r.getAttribute("data-drawyaxis")),this.toggled_axis=0,this.mAxisColor=+r.getAttribute("data-axiscolor"),this.update(),this.canvas&&(this.canvas.setAttribute("role","figure"),this.setAriaElement(this.canvas),jOmnis.addClass(this.canvas,this.mDisableSystemFocus?"noFocus":"autoFocus")),!1},at.prototype.delete_class_inst=function(){this.superclass.delete_class_inst.call(this),this.canvas_set&&!jOmnis.touchDevice&&this.canvas.removeEventListener("mousemove",lt,!1)},at.prototype.updateCtrl=function(t,e,i,s){if(this.getTrueVisibility()){var r=this.getTextColor(),n=this.getAxisColor(),o=this.getBackColor(),a=this.getCtrlElem("_frame"),l=(this.getClientElem(),jOmnis.getOmnisWidth(a)),h=jOmnis.getOmnisHeight(a),c=this.getLineCount(),u=l,d=h,p=.1*(u*=.8),m=.1*(d*=.8);this.dataset=[],this.columns=[];for(var f=1;f<=c;f++)this.dataset[f-1]=this.getColumnData(f,1),this.columns[f-1]=this.getColumnData(f,2);var g="square";0==this.bar_ends?g="square":1==this.bar_ends?g="round":2==this.bar_ends?g="soft":3==this.bar_ends&&(g="sharp"),u=.8*l,d=.8*h,p=.1*l,m=.1*h,this.canvas_set&&"undefined"!=typeof omnisandroid&&(this.canvas.parentElement.removeChild(this.canvas),this.canvas_set=!1),this.canvas_set||(this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.top=0,this.canvas.style.left=0,this.canvas.onclick=this.mEventFunction,this.canvas.addEventListener("keydown",this.handleEvent,!0),this.canvas.addEventListener("keyup",this.handleEvent,!0),this.canvas.addEventListener("blur",this.handleEvent,!0),this.setAriaLiveRegion(this.canvas,ePolitenessSetting.polite),jOmnis.touchDevice||this.canvas.addEventListener("mousemove",lt,!1),a.appendChild(this.canvas),this.canvas.chartobject=this,this.canvas_set=!0,this.setTabIndex(0));var v=this.resizeCanvasAndGetContext(this.canvas,l,h);v.clearRect(0,0,l,h);var b=this.maintitle,y=this.x_title,C=this.y_title;if(this.ishorz){var _;u=.8*l,d=.9*h,p=.1*l,m=.05*h;var E=function(t,e,i,s,r,n,o,a){for(var l=0,h=1;h<=n.length;h++){var c=t.measureText(n[h-1]);c.width>l&&(l=c.width)}return(a?y:o)&&(l+=ot),l+40}(v,0,0,0,0,this.columns,this.y_title,this.toggled_axis);this.drawyaxis&&E>1.2*p&&(p+=_=1.2*(E-p),u-=_),this.drawxaxis&&m<20&&(d-=_=1.2*(20-m)),m<30&&(m+=_=30-m,d-=_);var w=this.toggled_axis?C:y;w&&(d-=ot),b&&b.length&&(d-=17.6,m+=17.6),this.drawyaxis&&function(t,e,i,s,r,n,o,a,l){var h={font:"11px Arial, sans-serif",fill:"#fff"};t.font=h.font;var c=n.length,u=s/c*.1;e-=u=Math.round(u),t.beginPath(),t.moveTo(e,i+r),t.lineTo(e,i),t.closePath(),t.lineWidth=1,t.strokeStyle=a,t.stroke();var d,p,m=r/c*.9,f=r/c*.1,g=i+=f;t.fillStyle=l;for(var v=1;v<=n.length;v++)d=void 0===(d=n[v-1])?"":d,p=t.measureText(d),t.fillText(d,e-p.width-5,g+6),g+=m+f;o&&o.length&&(h={font:"14px Arial, sans-serif",fill:"#fff"},t.font=h.font,d=o,p=t.measureText(d),t.save(),t.translate(ot,i+r/2+p.width/2),t.rotate(-Math.PI/2),t.fillText(d,0,0),t.restore())}(v,p,m,u,d,this.columns,this.toggled_axis?y:C,n,r),this.drawxaxis&&function(t,e,i,s,o,a,l){var h=s/a.length*.1;h=Math.round(h);var c={font:"11px Arial, sans-serif",fill:"#fff"},u="9px Arial, sans-serif",d="8px Arial, sans-serif";t.font=c.font;var p=0,m=12,f=Math.min.apply(Math,a);f>0&&(f=0);var g=Math.max.apply(Math,a),v=g;f<0&&(v+=-f),t.beginPath(),t.moveTo(e-h,i+o),t.lineTo(e+s+h,i+o),t.closePath(),t.lineWidth=1,t.strokeStyle=n,t.stroke(),t.fillStyle=r;for(var b,y=e,C=s/4,E=v/4,w=f,k=.8*C,T=1;T<=5;T++){b=1==T?""+g:5==T?""+f:""+S(w);var x=t.measureText(b);x.width>k&&(t.font=u,x=t.measureText(b),m=12),x.width>k&&(m=12,t.font=d,x=t.measureText(b)),x.width>k&&(p=1),w+=E}for(_=15,w=f,T=1;T<=5;T++)1!=p&&(b=1==T?""+f:5==T?""+g:""+S(w),t.fillText(b,y-x.width/2,i+o+_),1!=T&&(t.beginPath(),t.moveTo(y,i),t.lineTo(y,i+o),t.closePath(),t.lineWidth=.1,t.strokeStyle=n,t.stroke())),y+=C,w+=E;f<0&&(y=e+s/v*-f,t.beginPath(),t.moveTo(y,i-h),t.lineTo(y,i+o+h),t.closePath(),t.lineWidth=1,t.strokeStyle=n,t.stroke());l&&l.length&&(c={font:"14px Arial, sans-serif",fill:"#fff"},t.font=c.font,x=t.measureText(l),t.fillText(l,e+s/2-x.width/2,i+o+m+ot+5))}(v,p,m,u,d,this.dataset,this.toggled_axis?C:y)}else u=.8*l,d=.9*h,p=.1*l,m=.05*h,E=function(t,e,i,s,r,n,o,a){var l=Math.min.apply(Math,n);l>0&&(l=0);var h=Math.max.apply(Math,n);l<0&&(h+=-l);for(var c,u=h/4,d=h,p=1;p<=5;p++){c=1==p?""+h:5==p?"0":""+d;var m=t.measureText(c);m.width>l&&(l=m.width),d-=u}var f=a?y:o;return f&&f.length&&(l+=ot),l+25}(v,0,0,0,0,this.dataset,C,this.toggled_axis),this.drawyaxis&&E>1.2*p&&(p+=_=1.2*(E-p),u-=_),this.drawxaxis&&m<20&&(d-=_=1.2*(20-m)),m<30&&(m+=_=30-m,d-=_),(w=this.toggled_axis?C:y)&&(d-=ot),b&&b.length&&(d-=17.6,m+=17.6),this.drawyaxis&&function(t,e,i,s,r,n,o,a,l){var h=n.length,c=Math.max.apply(Math,n),u=c,d=Math.min.apply(Math,n);d>0&&(d=0),d<0&&(u+=-d);var p={font:"11px Arial, sans-serif",fill:"#fff"};t.font=p.font;var m=s/h*.1;m=Math.round(m),t.beginPath(),t.moveTo(e,i+r),t.lineTo(e,i),t.closePath(),t.lineWidth=1,t.strokeStyle=a,t.stroke(),e-=m;for(var f,g,v=i,b=r/4,y=0+u/r,C=1;C<=5;C++)f=1==C?""+c:5==C?""+d:""+S(c-(v-i)*y),g=t.measureText(f),t.fillStyle=l,t.fillText(f,e-g.width-5,v+4),5!=C&&(t.beginPath(),t.moveTo(e,v),t.lineTo(e+s,v),t.closePath(),t.lineWidth=.1,t.strokeStyle=a,t.stroke()),v+=b;d<0&&(v=i+c*((r-r/h*.15)/u),t.beginPath(),t.moveTo(e,v),t.lineTo(e+s,v),t.closePath(),t.lineWidth=1,t.strokeStyle=a,t.stroke());o&&o.length&&(p={font:"14px Arial, sans-serif",fill:"#fff"},t.font=p.font,g=t.measureText(o),t.save(),t.translate(ot,i+r/2+g.width/2),t.rotate(-Math.PI/2),t.fillText(o,0,0),t.restore())}(v,p,m,u,d,this.dataset,this.toggled_axis?y:C,n,r),this.drawxaxis&&function(t,e,i,s,r,n,o,a,l){var h=n.length,c=s/h*.9,u=s/h*.1;u=Math.round(u),c=Math.floor(c);var d={font:"11px Arial, sans-serif",fill:"#fff"},p="9px Arial, sans-serif",m="8px Arial, sans-serif";t.font=d.font;var f,g,b=e,y=0,C=12;t.beginPath(),t.moveTo(e,i+r),t.lineTo(e+s,i+r),t.closePath(),t.lineWidth=1,t.strokeStyle=a,t.stroke(),t.fillStyle=l;for(var _=1;_<=h;_++)g=n[_-1],(f=t.measureText(g)).width>c&&(t.font=p,f=t.measureText(g),C=12),f.width>c&&(C=12,t.font=m,f=t.measureText(g)),f.width>c&&(y=1);if(0==y)for(_=1;_<=h;_++){g=n[_-1];var E=b+(c-(f=t.measureText(g)).width)/2;t.fillText(g,E,i+r+C),b+=c+u}else{var w=function(t,e,i){e=void 0===e?"":e;var s=t.measureText(e).width,r=t.measureText("").width;if(s<=i||s<=r)return e;for(var n=e.length;s>=i-r&&n-- >0;)e=e.substring(0,n),s=t.measureText(e).width;return e+""};for(_=1;_<=h;_++){g=n[_-1];var k=w(v,g,c);E=u+b+(c-(f=t.measureText(k)).width)/2,t.fillText(k,E,i+r+C),b+=c+u}}o&&o.length&&(d={font:"14px Arial, sans-serif",fill:"#fff"},t.font=d.font,f=t.measureText(o),t.fillText(o,e+s/2-f.width/2,i+r+C+ot+5))}(v,p,m,u,d,this.columns,this.toggled_axis?C:y,n,r);if(this.ishorz?function(t,e,i,s,r,n,o,a,l,h){var c=(o=o||{}).type||"round",u=Math.max.apply(Math,n),d=Math.min.apply(Math,n),p=o.colors||a.getcolors(),m=n.length;u=o.to||u,d>0&&(d=0),d<0&&(u+=-d);var f=r/m*.9,g=r/m*.1,v=i,b=(s-1)/u;e+=-d*b,!o.stacked&&(f/=1);for(var y,C,_=-1,E=0;E<m;E++){[];for(var w=0;w<1;w++){var k=n[E],S=f/2,x=f/5,D=S,O=x,A=Math.round(k*b);switch(x>A&&(x=A),S>A&&(S=A),t.beginPath(),c){case"round":t.moveTo(e,v),k<0?(t.lineTo(e+A+D,v),t.arc(e+A+D,v+f/2,D,1.5*Math.PI,.5*Math.PI,!0)):(t.lineTo(e+A-S,v),t.arc(e+A-S,v+f/2,S,1.5*Math.PI,.5*Math.PI,!1)),t.lineTo(e,v+f),t.lineTo(e,v);break;case"soft":t.moveTo(e,v),k<0?(t.lineTo(e+A+O,v),t.arcTo(e+A,v,e+A,v+O,O),t.lineTo(e+A,v+f-O),t.arcTo(e+A,v+f,e+A+O,v+f,O)):(t.lineTo(e+A-x,v),t.arcTo(e+A,v,e+A,v+x,x),t.lineTo(e+A,v+f-x),t.arcTo(e+A,v+f,e+A-x,v+f,x)),t.lineTo(e,v+f),t.lineTo(e,v);break;case"sharp":t.moveTo(e,v),k<0?(t.lineTo(e+A+D,v),t.lineTo(e+A,v+f/2),t.lineTo(e+A+D,v+f)):(t.lineTo(e+A-S,v),t.lineTo(e+A,v+f/2),t.lineTo(e+A-S,v+f)),t.lineTo(e,v+f),t.lineTo(e,v);break;case"square":t.moveTo(e,v),t.lineTo(e+A,v),t.lineTo(e+A,v+f),t.lineTo(e,v+f),t.lineTo(e,v)}t.closePath(),(t.isPointInPath(a.MouseX,a.MouseY)||l&&h===E)&&(y=e+A,C=v+f/2,(_=E)===a.lastSelectedSeg&&(a.newSegment=_,t.isPointInPath(a.MouseX,a.MouseY)&&a.fromKeyboardEvent&&(a.fromKeyboardEvent=!1))),t.lineWidth=1,t.strokeStyle="black";for(var P=E;P>p.length-1;)P-=p.length;t.fillStyle=p[P],E===a.newSegment&&(t.fillStyle=a.getTintColor(t.fillStyle)),t.fill(),t.beginPath();var I=A;I<20&&I>0&&(I=20),t.moveTo(e,v),t.lineTo(e+I,v),t.lineTo(e+I,v+f),t.lineTo(e,v+f),t.lineTo(e,v),t.closePath(),v+=f}v+=g}if(a.lastSelectedSeg=_,-1!=_){var L=n[_];a.canShowValue()&&T(t,L,y,C),a.liveRegion.innerText=a.columns[_]+", "+L+", "+jGetOmnisString(a.form.inst,"ctl_barchart_bar",null,_+1,m)}}(v,p,m,u,d,this.dataset,{type:g},this,this.canvas.chartobject.fromKeyboardEvent,this.canvas.chartobject.newSegment):function(t,e,i,s,r,n,o,a,l,h){var c=(o=o||{}).type||"round",u=Math.max.apply(Math,n),d=Math.min.apply(Math,n),p=o.colors||a.getcolors(),m=n.length;d>0&&(d=0),d<0&&(u+=-d);var f,g,v=s/m*.9,b=s/m*.1,y=b;f=e+b,g=(r-y)/(u=o.to||u),o.stretch||(b=Math.round(b),v=Math.floor(v));var C=r;d<0&&(C+=d*g),r=C;for(//!opts.stacked && (barwidth /= multi || 1);
var _,E,w=-1,k=0;k<m;k++){[];for(var S=0;S<1;S++){var x=Math.round(n[k]*g),D=i+r-y-x,O=f,A=v/2,P=A,I=v/5,L=I;switch(I>x&&(I=x),A>x&&(A=x),t.beginPath(),c){case"round":t.moveTo(O,D+x),x<0?(t.lineTo(O,D-A),t.arc(O+v/2,D-P,P,Math.PI,0,!0)):(t.lineTo(O,D+A),t.arc(O+v/2,D+A,P,Math.PI,0,!1)),t.lineTo(O+v,D+x),t.lineTo(O,D+x);break;case"soft":t.moveTo(O,D+x),x<0?(t.lineTo(O,D+I),t.arcTo(O,D,O+L,D,L),t.lineTo(O+v-L,D),t.arcTo(O+v,D,O+v,D+I,L)):(t.lineTo(O,D+I),t.arcTo(O,D,O+I,D,I),t.lineTo(O+v-I,D),t.arcTo(O+v,D,O+v,D+I,I)),t.lineTo(O+v,D+x),t.lineTo(O,D+x);break;case"sharp":t.moveTo(O,D+x),x<0?(t.lineTo(O,D-P),t.lineTo(O+v/2,D),t.lineTo(O+v,D-P)):(t.lineTo(O,D+A),t.lineTo(O+v/2,D),t.lineTo(O+v,D+A)),t.lineTo(O+v,D+x),t.lineTo(O,D+x);break;case"square":t.moveTo(O,D+x),t.lineTo(O,D),t.lineTo(O+v,D),t.lineTo(O+v,D+x),t.lineTo(O,D+x)}t.closePath(),(t.isPointInPath(a.MouseX,a.MouseY)||l&&h===k)&&(_=O+v/2,E=D,(w=k)===a.lastSelectedSeg&&(a.newSegment=w,t.isPointInPath(a.MouseX,a.MouseY)&&a.fromKeyboardEvent&&(a.fromKeyboardEvent=!1))),t.lineWidth=1,t.strokeStyle="black";for(var j=k;j>p.length-1;)j-=p.length;t.fillStyle=p[j],k===a.newSegment&&(t.fillStyle=a.getTintColor(t.fillStyle)),t.fill(),t.beginPath();var N=x,B=D;N<20&&N>0&&(B=i+r-y-(N=20)),t.moveTo(O,B+N),t.lineTo(O,B),t.lineTo(O+v,B),t.lineTo(O+v,B+N),t.lineTo(O,B+N),t.closePath(),o.stacked||(f+=v)}f+=b}if(a.lastSelectedSeg=w,-1!=w){var R=n[w];a.canShowValue()&&T(t,R,_,E),a.liveRegion.innerText=a.columns[w]+", "+R+", "+jGetOmnisString(a.form.inst,"ctl_barchart_bar",null,w+1,m)}}(v,p,m,u,d,this.dataset,{type:g},this,this.canvas.chartobject.fromKeyboardEvent,this.canvas.chartobject.newSegment),b&&b.length){v.font="14px Arial, sans-serif";var k=v.measureText(b);v.fillStyle=r,v.fillText(b,l/2-k.width/2,21)}}function T(t,e,i,s){var n="bold 13px Arial, sans-serif";t.font=n;var a=t.measureText(e),l=(10+a.width)/2,h=20;t.beginPath(),t.moveTo(i,s),t.lineTo(i+5,s-5),t.lineTo(i+5+l-5,s-5),t.arcTo(i+5+l,s-5,i+5+l,s-10,5),t.lineTo(i+5+l,s-20),t.arcTo(i+5+l,s-25,i+5+l-5,s-25,5),t.lineTo(i-(l-5+5),s-5-h),t.arcTo(i-(5+l),s-5-h,i-(5+l),s-20,5),t.lineTo(i-(5+l),s-10),t.arcTo(i-(5+l),s-5,i-(l-5+5),s-5,5),t.lineTo(i-5,s-5),t.lineTo(i,s),t.closePath(),t.lineWidth=1,t.strokeStyle=r,t.fillStyle=r,t.fill(),t.font=n,t.fillStyle=o,t.fillText(e,i-a.width/2,s-11)}function S(t){return+(Math.round(t+"e+2")+"e-2")}},at.prototype.handleEvent=function(t){var e=this.chartobject;switch(t.type){case"keydown":switch(OmnisKeyboardHandler.getNormalizedEventKey(t)){case"ArrowDown":case"ArrowRight":var i=1;case"ArrowUp":case"ArrowLeft":e.MouseX=0,e.MouseY=0,i=i||-1,e.fromKeyboardEvent=!0,e.newSegment||0===e.newSegment||(e.newSegment=-1),e.newSegment=e.newSegment+i,e.newSegment>e.dataset.length-1?e.newSegment=0:e.newSegment<0&&(e.newSegment=e.dataset.length-1),e.updateCtrl(),e.fromKeyboardEvent=!1;break;case"Enter":jOmnis.sendDOMEvent(this,"click")}break;case"keyup":" "===OmnisKeyboardHandler.getNormalizedEventKey(t)&&jOmnis.sendDOMEvent(this,"click");break;case"blur":e.MouseX=0,e.MouseY=0;break;case"click":if(this.isEnabled()&&(jOmnis.touchDevice&&lt(t),this.canSendEvent(nt.evBarClicked)&&-1!=this.lastSelectedSeg)){var s=1+this.lastSelectedSeg;this.eventParamsAdd("pBar",""+s),this.sendEvent("evBarClicked")}break;default:if(this.superclass)return this.superclass.handleEvent.call(this,t);if(e.superclass)return e.superclass.handleEvent.call(this,t)}return!0};var ht="$barends",ct="$chartdirection",ut="$showvalue",dt="$maintitle",pt="$xtitle",mt="$ytitle",ft="$showxaxis",gt="$showyaxis",vt="$axiscolor";at.prototype.getProperty=function(t){switch(t){case ht:return this.bar_ends;case ct:return this.ishorz;case ut:return this.showvalue;case dt:return this.maintitle;case pt:return this.x_title;case mt:return this.y_title;case ft:return this.drawxaxis;case gt:return this.drawyaxis;case vt:return this.mAxisColor}return this.chartBase.getProperty.call(this,t)},at.prototype.getCanAssign=function(t){switch(t){case ht:case ct:case ut:case dt:case pt:case mt:case ft:case gt:case vt:return!0}return this.chartBase.getCanAssign.call(this,t)},at.prototype.setProperty=function(t,e){switch(t){case ct:return this.ishorz=parseInt(e),this.ishorz_orig!=this.ishorz?this.toggled_axis=1:this.toggled_axis=0,this.update(),!0;case ht:return this.bar_ends=e,this.update(),!0;case ut:return this.showvalue=1*e!=0,this.update(),!0;case dt:return this.maintitle=e,this.update(),!0;case pt:return this.x_title=e,this.update(),!0;case mt:return this.y_title=e,this.update(),!0;case ft:return this.drawxaxis=0!=parseInt(e),this.update(),!0;case gt:return this.drawyaxis=0!=parseInt(e),this.update(),!0;case vt:var i=+e;return this.mAxisColor!==i&&(this.mAxisColor=i,this.update()),!0}return this.chartBase.setProperty.call(this,t,e)},at.prototype.canShowValue=function(){return this.showvalue&&this.isActive()},at.prototype.getAxisColor=function(){var t=this.getTheme(),e=t.getTextColorRGB(this.mAxisColor,this.resolveDefaultColor(this.themeableData.backgroundColor,a.Mr.BACKGROUND),this.DefaultColors[a.Mr.TEXT]);return t.getColorString(e)};var bt=at,yt=(i(6977),i(5306),{evSegmentClicked:6e3});function Ct(){this.init_class_inst()}function _t(t){var e=this;if(null!=e&&null!=e.chartobject||!t.srcElement||(e=t.srcElement),e.chartobject.isActive()){var i=t.offsetX;null==i&&(i=t.layerX),e.chartobject.MouseX=i*e.chartobject.devicePixelRatio;var s=t.offsetY;null==s&&(s=t.layerY),e.chartobject.MouseY=s*e.chartobject.devicePixelRatio,e.chartobject.update()}}Ct.prototype=new it,Ct.prototype.init_class_inst=function(){this.superclass=it.prototype,this.superclass.init_class_inst.call(this),this.mCustomEvents=yt,this.usesTouchScroll=!1,this.baseClassName="omnis-piechart"},Ct.prototype.delete_class_inst=function(){this.superclass.delete_class_inst.call(this),this.canvas_set&&!jOmnis.touchDevice&&this.canvas.removeEventListener("mousemove",_t,!1)},Ct.prototype.setLegendPos=function(t){this.legendpos=0==t?"none":1==t?"north":2==t?"east":3==t?"south":4==t?"west":5==t?"autobefore":6==t?"autoafter":"none"},Ct.prototype.init_ctrl_inst=function(t,e,i,s){this.mHasDefaultDisableAppearanceProperty=!0,this.superclass.init_ctrl_inst.call(this,t,e,i,s),this.paper=0,this.pie=0;var r=this.getClientElem();r.style.outline="none",this.lastSelectedSeg=-1,this.maintitle=r.getAttribute("data-maintitle"),this.legendnames=0!=parseInt(r.getAttribute("data-legendnames"));var n=r.getAttribute("data-legendpos"),o=r.getAttribute("data-flyout"),a=r.getAttribute("data-legendcolumns");return this.legendcolumns=""==a||null==a||0==a?1:a,this.allowsflyout=1*o!=0,this.setLegendPos(n),this.update(),this.canvas&&(this.canvas.setAttribute("role","figure"),this.setAriaElement(this.canvas),jOmnis.addClass(this.canvas,this.mDisableSystemFocus?"noFocus":"autoFocus")),!1},Ct.prototype.updateCtrl=function(t,e,i,s){if(this.getTrueVisibility()){var r=this.getCtrlElem("_frame"),n=(this.getClientElem(),jOmnis.getOmnisWidth(r)),o=jOmnis.getOmnisHeight(r),a=this.getLineCount();this.dataset=[],this.datasetNegState=[],this.datasetLabels=[];for(var l=1;l<=a;l++){this.datasetNegState[l-1]=!1,this.dataset[l-1]=1*this.getColumnData(l,1);var h=0+this.dataset[l-1];h<0&&(this.dataset[l-1]=-h,this.datasetNegState[l-1]=!0),this.datasetLabels[l-1]=this.getColumnData(l,2)}this.canvas_set&&"undefined"!=typeof omnisandroid&&(this.canvas.parentElement.removeChild(this.canvas),this.canvas_set=!1),this.canvas_set||(this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.top=0,this.canvas.style.left=0,this.canvas.onclick=this.mEventFunction,this.canvas.addEventListener("keydown",this.handleEvent,!0),this.canvas.addEventListener("blur",this.handleEvent,!0),this.setAriaLiveRegion(this.canvas,ePolitenessSetting.polite),jOmnis.touchDevice||this.canvas.addEventListener("mousemove",_t,!1),r.appendChild(this.canvas),this.canvas.chartobject=this,this.canvas_set=!0,this.setTabIndex(0));var c=this.resizeCanvasAndGetContext(this.canvas,n,o);c.clearRect(0,0,n,o),function(t,e,i,s,r,n,o,a,l,h,u){n=n||{};var d,p=r.length,m=0,f=0,g=0,v=n.colors||o.getcolors(),b=!1,y=0,C=0;function _(t,e,i,s,r,n,o){t.beginPath(),t.moveTo(e,i),t.arc(e,i,s,Math.PI/180*r,Math.PI/180*n,!1),t.lineTo(e,i),t.closePath()}var E,w,k=function(t,e,i){return t&&1==o.legendnames?(t+"").replace(/(##+(?:\.#+)?)|(%%+(?:\.%+)?)/g,(function(t,s,r){return s?(+e).toFixed(s.replace(/^#+\.?/g,"").length):r?(100*e/i).toFixed(r.replace(/^%+\.?/g,"").length)+"%":void 0})):(+e).toFixed(0)},T="";if(d=p+1,1==p)f=r[0],r[0]={value:r[0],order:0,valueOf:function(){return this.value}};else for(var S=0;S<p;S++)f+=r[S],r[S]={value:r[S],order:S,valueOf:function(){return this.value}};if(null!=n.legendpos&&"none"!=n.legendpos&&(T=n.legendpos,"autobefore"==n.legendpos?T=e>i?"west":"north":"autoafter"==n.legendpos&&(T=e>i?"east":"south"),function(t,s,n,l,h){var d,m;s=s||[];var g,b={font:"12px Arial, sans-serif",fill:u},_={font:"bold 13px Arial, sans-serif",fill:u},E=0,w=0,T=o.legendcolumns;t.font=b.font,0==T&&(T=1),w=16*(g=p/T);for(var S=0,x=1,D=0;D<p;D++){var O=r[D].order;r[D].others&&(s[O]=n||"Others");var A=k(s[D],a[D]?-r[D]:r[D],f);S<(N=(j=t.measureText(A)).width+12)&&(S=N),(++x>g||D==p-1)&&(E+=S,E+=30,S=0,x=1)}if(o.maintitle&&o.maintitle.length&&(w+=19.2),"east"==h?(d=e-(E+=.05*e),m=i/2-w/2):"south"==h?(d=e/2-E/2,m=i-w-.05*i):"north"==h?(d=e/2-E/2,m=.05*i):"west"==h&&(d=.05*e,m=i/2-w/2),o.maintitle&&o.maintitle.length){c.font=b.font,t.font="14px Arial, sans-serif",j=t.measureText(o.maintitle),t.fillStyle=u;var P=E-.05*e;t.fillText(o.maintitle,d+P/2-j.width/2,m+5),m+=19.2}m+=8,d+=15,t.font=b.font,x=1;var I=m;for(S=0,D=0;D<p;D++){O=r[D].order,r[D].others&&(s[O]=n||"Others"),A=k(s[D],a[D]?-r[D]:r[D],f);for(var L=D;L>v.length-1;)L-=v.length;var j,N;t.fillStyle=v[L],a[D]?t.globalAlpha=D===o.newSegment?o.COLORMANIPULATION.negativeSelectedAlpha:o.COLORMANIPULATION.negativeAlpha:t.globalAlpha=o.COLORMANIPULATION.defaultAlpha,D===o.newSegment&&(o.liveRegion.innerText=A+", "+jGetOmnisString(o.form.inst,"ctl_piechart_segment",null,D+1,p),t.fillStyle=o.getTintColor(t.fillStyle)),t.beginPath(),o.lastSelectedSeg==D&&o.canFlyOut()?t.arc(d,m,8,0,2*Math.PI,!0):t.arc(d,m,6,0,2*Math.PI,!0),t.closePath(),t.fill(),o.lastSelectedSeg==D&&o.canFlyOut()?(t.fillStyle=_.fill,t.font=_.font):(t.fillStyle=b.fill,t.font=b.font),t.fillText(A,d+15,m+4),t.globalAlpha=R,S<(N=(j=t.measureText(A)).width+12)&&(S=N),m+=16,++x>g&&(d+=S+30,S=0,x=1,m=I)}y=E,C=w}(t,n.legend,n.legendothers,n.legendmark,T)),1==p);else{for(S=0;S<p;S++)b&&360*r[S]/f<=1.5&&(d=S,b=!1),S>d&&(b=!1,r[d].value+=r[S],r[d].others=!0,g=r[d].value);p=Math.min(d+1,r.length),g&&r.splice(p)&&(r[d].others=!0);var x=-1,D=.05*e;e*=.9;var O=.05*i;if(i*=.9,null==n.legendpos||"none"==n.legendpos){var A=D+(e/=2),P=O+(i/=2);s=e>i?i:e}else"east"==T?(e-=y,A=D+(e/=2),P=O+(i/=2),s=e>i?i:e):"south"==T?(i-=C+O,A=D+(e/=2),P=O+(i/=2),s=e>i?i:e):"north"==T?(i-=C+O,A=D+(e/=2),P=(O+=C+O)+(i/=2),s=e>i?i:e):"west"==T&&(e-=y,A=(D+=y)+(e/=2),P=O+(i/=2),s=e>i?i:e);for(S=0;S<p;S++){var I=360*r[S]/f,L=I/2;if(S||(L=(m=-90-L)-I/2),s>0){_(t,A,P,s,m,m+I);if(t.isPointInPath(o.MouseX,o.MouseY)||l&&h===S){if(x=S,o.canFlyOut()&&x==o.lastSelectedSeg){var j=Math.PI/180*m+Math.PI/180*I/2,N=o.currentPullOutDistance*(E=o.currentPullOutDistance/10,w=.8,Math.pow(1-E,w)+1);_(t,A+Math.cos(j)*N,P+Math.sin(j)*N,s,m,m+I)}x===o.lastSelectedSeg&&(o.newSegment=x,t.isPointInPath(o.MouseX,o.MouseY)&&o.fromKeyboardEvent&&(o.fromKeyboardEvent=!1))}}t.lineWidth=1,t.strokeStyle=o.getBackColor();for(var B=S;B>v.length-1;)B-=v.length;t.fillStyle=v[B];var R=t.globalAlpha;a[S]?t.globalAlpha=S===o.newSegment?o.COLORMANIPULATION.negativeSelectedAlpha:o.COLORMANIPULATION.negativeAlpha:t.globalAlpha=o.COLORMANIPULATION.defaultAlpha,S===o.newSegment&&(t.fillStyle=o.getTintColor(t.fillStyle)),t.fill(),t.globalAlpha=R,t.stroke(),m+=I}x!=o.lastSelectedSeg&&(clearInterval(o.animationId),o.animationId=0,o.currentPullOutDistance=0,-1!=x&&(o.animationId=setInterval((function(){!function(t){if(o.currentPullOutDistance+=1,o.currentPullOutDistance>=10)return clearInterval(o.animationId),void(o.animationId=0);o.update()}()}),20)),o.lastSelectedSeg=x)}}(c,n,o,0,this.dataset,{legend:this.datasetLabels,legendpos:this.legendpos,href:["",""]},this,this.datasetNegState,this.canvas.chartobject.fromKeyboardEvent,this.canvas.chartobject.newSegment,this.getTextColor())}},Ct.prototype.handleEvent=function(t){var e=this.chartobject;switch(t.type){case"keydown":switch(OmnisKeyboardHandler.getNormalizedEventKey(t)){case"ArrowDown":case"ArrowRight":var i=1;case"ArrowUp":case"ArrowLeft":e.MouseX=0,e.MouseY=0,i=i||-1,e.fromKeyboardEvent=!0,e.newSegment||0===e.newSegment||(e.newSegment=-1),e.newSegment=e.newSegment+i,e.newSegment>e.dataset.length-1?e.newSegment=0:e.newSegment<0&&(e.newSegment=e.dataset.length-1),e.updateCtrl();break;case"Enter":case" ":jOmnis.sendDOMEvent(this,"click")}break;case"blur":e.MouseX=0,e.MouseY=0;break;case"click":if(this.isEnabled()&&(jOmnis.touchDevice&&_t(t),this.canSendEvent(yt.evSegmentClicked)&&-1!=this.lastSelectedSeg)){var s=1+this.dataset[this.lastSelectedSeg].order;this.eventParamsAdd("pPieSegment",""+s),this.sendEvent("evSegmentClicked")}break;default:if(this.superclass)return this.superclass.handleEvent.call(this,t);if(e.superclass)return e.superclass.handleEvent.call(this,t)}return!0};var Et="$legendpos",wt="$flyout",kt="$maintitle",Tt="$legendnames",St="$legendcolumns";Ct.prototype.getProperty=function(t){switch(t){case Et:return this.legendpos;case wt:return this.allowsflyout;case kt:return this.maintitle;case Tt:return this.legendnames;case St:return this.legendcolumns}return this.chartBase.getProperty.call(this,t)},Ct.prototype.getCanAssign=function(t){switch(t){case Et:case wt:case kt:case Tt:case St:return!0}return this.chartBase.getCanAssign.call(this,t)},Ct.prototype.setProperty=function(t,e){switch(t){case St:return this.legendcolumns=parseInt(e),this.update(),!0;case Tt:return this.legendnames=0!=parseInt(e),this.update(),!0;case kt:return this.maintitle=e,this.update(),!0;case Et:return this.setLegendPos(e),this.update(),!0;case wt:return this.allowsflyout=1*e!=0,this.update(),!0}return this.chartBase.setProperty.call(this,t,e)},Ct.prototype.canFlyOut=function(){return this.allowsflyout&&this.isActive()},Ct.prototype.getBackColor=function(){var t=this.getTheme(),e=t.getColorRGB(this.themeableData.backgroundColor,this.DefaultColors[a.Mr.BACKGROUND]);return t.getColorString(e)};var xt=Ct;function Dt(){this.init_class_inst()}Dt.prototype=new ctrl_base,Dt.prototype.init_class_inst=function(){this.superclass=ctrl_base.prototype,this.superclass.init_class_inst.call(this),this.text="",this.normalImage="",this.checkedImage="",this.standard=!0,this.mFocusStyle=eBaseFocusStyle.eWithin},Dt.prototype.init_ctrl_inst=function(t,e,i,s){this.superclass.init_ctrl_inst.call(this,t,e,i,s);var r=this.getClientElem();return this.text=r.getAttribute("text"),this.normalImage=this.setupIcon(r.getAttribute("data-icon")),this.checkedImage=jIcons.getCheckedImage(this.normalImage),r.setAttribute("hidefocus","true"),"webkitUserSelect"in r.style?r.style.webkitUserSelect="none":"MozUserSelect"in r.style?r.style.MozUserSelect="none":r.setAttribute("unselectable","on"),jOmnis.mobileDevice&&r.style.webkitTapHighlightColor&&(r.style.webkitTapHighlightColor="transparent"),!1},Dt.prototype.updateCtrl=function(){},Dt.prototype.handleEvent=function(t){return this.superclass.handleEvent.call(this,t)},Dt.prototype.sizeChanged=function(){this.superclass.sizeChanged.call(this)},Dt.prototype.activeChanged=function(){this.update(),this.superclass.activeChanged.call(this)},Dt.prototype.disableSystemFocusChanged=function(){this.update()},Dt.setDefaultMargins=function(t){var e=parseFloat(t.style.marginTop),i=parseFloat(t.style.marginBottom),s=parseFloat(t.style.marginLeft),r=parseFloat(t.style.marginRight);isNaN(e)&&(t.style.marginTop="0px"),isNaN(i)&&(t.style.marginBottom="0px"),isNaN(s)&&(t.style.marginLeft="0px"),isNaN(r)&&(t.style.marginRight="0px")},Dt.getTotalHeight=function(t){return this.setDefaultMargins(t),jIcons.getElemHeight(t)+parseFloat(t.style.marginTop)+parseFloat(t.style.marginBottom)},Dt.getTotalWidth=function(t){return this.setDefaultMargins(t),jIcons.getElemWidth(t)+parseFloat(t.style.marginLeft)+parseFloat(t.style.marginRight)},Dt.prototype.canTabToObject=function(){var t=this.elem;return 0==t.getAttribute("data-visible")||t.disabled?null:this};var Ot=Dt,At=i(6464),Pt={input:"omnis-checkbox__input",label:"omnis-checkbox-label",boxOutline:"omnis-checkbox__box-outline",tickOutline:"omnis-checkbox__tick-outline",image:"omnis-checkbox__image",isChecked:"is-checked",wrapper:"omnis-checkbox__wrapper"};function It(t,e){return t.querySelector(".".concat(e))}var Lt={CLASS_NAMES:Pt,CHECKBOX_LEFT_POS:5,DEFAULT_BUTTON_SIZE:16,addToElem:function(t,e,i,s,r){var n='\n\t\t\t<input tabindex="-1" class="'.concat(Pt.input,'" type="checkbox">');r||(n+='<label class="'.concat(Pt.label,'">').concat(i,"</label>")),n+=s?'<img class="'.concat(Pt.image,'" alt="">'):'\n\t\t\t<span class="'.concat(Pt.boxOutline,'"></span>\n\t\t\t<span class="').concat(Pt.tickOutline,'"></span>'),t.innerHTML=n,e?jOmnis.addClass(t,Pt.isChecked):jOmnis.removeClass(t,Pt.isChecked)},updateDimensions:function(t,e,i,s){var r=It(t,Pt.input);if(!r)return!1;var n=It(t,Pt.image),o=It(t,Pt.label);null==s&&(s=Lt.getButtonSize(t));var a=2*Math.round(s/8/2),l=a,h=jOmnis.getOmnisHeight(t),c=(h-s)/2,u=2*s,d=i?5:0;r.style.lineHeight=s+"px";var p=It(t,Pt.boxOutline),m=It(t,Pt.tickOutline);p&&m&&(e||(p.style.top=m.style.top=c+"px"),p.style.width=p.style.height=m.style.width=m.style.height=s+"px",p.style.borderWidth=m.style.borderWidth=a+"px",p.style.borderRadius=m.style.borderRadius=l+"px"),n&&(n.style.top=c+"px"),o&&(o.style.padding="0 0 0 "+(d+s+8)+"px",o.style.top=(h-o.offsetHeight)/2+"px");var f=c-(u-s)/2+"px",g=d-(u-s)/2+"px",v=It(t,At.O7.CONTAINER);v&&(v.style.top=f,v.style.left=g,v.style.width=v.style.height=u+"px");var b=It(t,jOmnisEffects.FOCUS_HELPER_CLASS);b&&(b.style.top=f,b.style.left=g,b.style.width=b.style.height=u+"px")},getButtonSize:function(t){var e=It(t,Pt.image);if(e)return e.clientHeight;var i=It(t,Pt.label);if(i){var s=!1;i.textContent||(s=!0,i.textContent="T");var r=16,n=parseInt(t.style.fontSize);if(!isNaN(n)){var o=n*(96/72);r=4*Math.round(o/4)}return s&&(i.textContent=""),r}return 16},getDimensions:function(t){return It(t,Pt.boxOutline).getBoundingClientRect()},setValue:function(t,e){var i=It(t,Pt.input);e?jOmnis.addClass(t,Pt.isChecked):jOmnis.removeClass(t,Pt.isChecked),i.checked=!!e},getValue:function(t){return It(t,Pt.input).checked},setColor:function(t,e){var i=e.getTheme(),s=o.l1.secondary,r=o.l1.background,n=t===o.JT?s:t;e.clientElem.style.setProperty("--checkbox-color",i.getColorString(n)),e.clientElem.style.setProperty("--checkbox-tick-color",i.getTextColorString(o.JT,n,r))}},jt="$checkboxcolor";function Nt(){this.init_class_inst()}Nt.prototype=new Ot,Nt.prototype.defaultAriaElem=!1,Nt.prototype.init_class_inst=function(){this.ctrl_box_class=Ot.prototype,this.ctrl_box_class.init_class_inst.call(this),this.value=0,this.usesTouchScroll=!1,this.baseClassName="omnis-checkbox",this.activeReplacesEnabled=!0},Nt.prototype.init_ctrl_inst=function(t,e,i,s){this.ctrl_box_class.init_ctrl_inst.call(this,t,e,i,s);var r=this.clientElem;return this.checkboxColor=+r.getAttribute("data-checkboxcolor"),Lt.setColor(this.checkboxColor,this),this.update(),!1},Nt.prototype.visibilityChanged=function(){var t=this.superclass.visibilityChanged.call(this);return t&&this.getTrueVisibility()&&Lt.updateDimensions(this.clientElem,!1,!0),t},Nt.prototype.updateCtrl=function(){var t=this.getValue(),e=this.getClientElem(),i=e.id+"_label";this.standard=null==this.normalImage;var s=document.createElement("div");s.className=Lt.CLASS_NAMES.wrapper,s.setAttribute("role","presentation"),Lt.addToElem(s,!1,jOmnis.escapeHTML(this.getText()),!this.standard),e.innerHTML="",e.appendChild(s);var r=document.createElement("span");if(r.className=jOmnisEffects.FOCUS_HELPER_CLASS,e.appendChild(r),jIcons.replaceOrAddToElem(s,t?this.checkedImage:this.normalImage),this.inputElem=e.querySelector("input"),this.labelElem=e.querySelector("label"),this.labelElem.id=i,jOmnisEffects.addRippleToElem(e,null,!0,null,[" "],this.inputElem),e.style.overflow="visible",e.onclick=this.elem.disabled?null:this.mEventFunction,this.inputElem.onfocus=this.mEventFunction,this.inputElem.onblur=this.mEventFunction,this.inputElem.disabled=this.elem.disabled,Lt.setValue(e,t),this.standard)this.inputElem.style.outline=this.mDisableSystemFocus?"none":"";else{var n=e.querySelector("img,svg");jOmnis.setOpacity(n,this.elem.disabled?100:255),n.style.outline=this.mDisableSystemFocus?"none":"",n.classList.add(Lt.CLASS_NAMES.image),n.style.left=Lt.CHECKBOX_LEFT_POS+"px"}e.querySelector("."+At.O7.CONTAINER).style.left=Lt.CHECKBOX_LEFT_POS+"px";var o=e.querySelector("."+Lt.CLASS_NAMES.boxOutline),a=e.querySelector("."+Lt.CLASS_NAMES.tickOutline);o&&a&&(o.style.left=a.style.left=Lt.CHECKBOX_LEFT_POS+"px"),r.style.left=Lt.CHECKBOX_LEFT_POS+"px",this.setAriaElement(this.inputElem),null!=this.mAriaLabelledby&&""!==this.mAriaLabelledby||!this.labelElem.textContent||this.inputElem.setAttribute("aria-labelledby",i),this.inputElem.tabIndex=this.tabIndex,jOmnis.addClass(this.inputElem,this.mDisableSystemFocus?"noFocus":"autoFocus"),this.labelElem.setAttribute("unselectable","on"),this.updateDimensions()},Nt.prototype.handleEvent=function(t){switch(t.type){case"click":this.preventFocusClass=!0,this.inputElem.focus(),this.preventFocusClass=!1;var e=this.getValue();e=e?0:1;var i=this.getClientElem();return this.standard||jIcons.setImageUrl(i.querySelector("img,svg"),e?this.checkedImage:this.normalImage),Lt.setValue(i,e),this.dataName&&this.setData(e),this.value=e,this.canSendEvent(eBaseEvent.evClick)&&(this.eventParamsAdd("pNewVal",e),this.sendEvent(eBaseEvent.evClick)),!0;case"focus":return this.preventFocusClass||t.target!==this.inputElem||jOmnisEffects.addFocusClass(this.clientElem),!0;case"blur":return jOmnisEffects.removeFocusClass(this.clientElem),!0;default:return this.ctrl_box_class.handleEvent.call(this,t)}},Nt.prototype.getText=function(){if(this.text)return this.text;var t=this.labelElem||this.getClientElem().querySelector("label");return t?t.textContent:""},Nt.prototype.getValue=function(){return this.dataName?+this.getData()||0:this.value},Nt.prototype.getProperty=function(t){switch(t){case eBaseProperties.text:return this.getText();case eBaseProperties.iconid:return this.standard?"":this.normalImage;case jt:return this.checkboxColor}return this.ctrl_box_class.getProperty.call(this,t)},Nt.prototype.getCanAssign=function(t){switch(t){case eBaseProperties.text:case eBaseProperties.iconid:case jt:return!0}return this.superclass.getCanAssign.call(this,t)},Nt.prototype.setProperty=function(t,e){switch(t){case eBaseProperties.text:return this.text&&delete this.text,this.labelElem.textContent=e,this.setProperty(eBaseProperties.arialabelledby,this.mAriaLabelledby),!0;case eBaseProperties.iconid:if(e==this.normalImage||0==e&&this.standard)return!0;var i=this.getClientElem();return 0==e?this.normalImage=this.checkedImage=null:(this.text=this.getText(),i.innerHTML="",this.normalImage=e,this.checkedImage=jIcons.getCheckedImage(this.normalImage)),this.update(),!0;case eBaseProperties.arialabelledby:return null==e||""===e?(this.mAriaLabelledby=e,this.inputElem&&(this.labelElem.textContent?this.inputElem.setAttribute("aria-labelledby",this.labelElem.id):this.inputElem.removeAttribute("aria-labelledby")),!0):this.ctrl_box_class.setProperty.call(this,t,e);case jt:return this.checkboxColor=+e,Lt.setColor(this.checkboxColor,this),!0}this.ctrl_box_class.setProperty.call(this,t,e)},Nt.prototype.fontChanged=function(){this.superclass.fontChanged.call(this),this.updateDimensions()},Nt.prototype.setTabIndex=function(t){return this.clientElem.tabIndex=-1,this.tabIndex=-1==t?-1:0,this.inputElem&&(this.inputElem.tabIndex=this.tabIndex),t},Nt.prototype.focus=function(t){this.inputElem.focus()},Nt.prototype.getAriaDisabledElem=function(){return null},Nt.prototype.sizeChanged=function(){this.superclass.sizeChanged.call(this),this.updateDimensions()},Nt.prototype.updateDimensions=function(){this.getTrueVisibility()&&Lt.updateDimensions(this.clientElem,!1,!0)};var Bt=Nt,Rt=(i(4723),i(9447));i(1539),i(9714),i(6699),i(2023),i(6775),i(764);function Mt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function Ft(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Mt(Object(i),!0).forEach((function(e){Ht(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Mt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Ht(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var zt="Verdana, Arial, Helvetica, sans-serif",Wt=10,$t=9,Ut=9,Vt=11;function qt(){this.init_class_inst()}function Kt(t,e,i){this.init_class_inst(),this.parentClass=qt.prototype,this.init_options(t,e,i)}qt.prototype=function(){var t,e=5e3,i=5001,s=5002,r=5003,n="$allowchange",l="$datestyle",h="$datestylecustom",c="$datefacecolor",u="$datefacealpha",d="$seltextcolor",p="$currdaycolor",m="$currdaytextcolor",f="$datestyleusepickeronmobile",g="$daycolor",v="$dayfont",b="$dayfontsize",y="$firstday",C="$headingbold",_="$headingcolor",E="$headingfont",w="$headingfontsize",k="$headingtextcolor",T="$monthtextcolor",S="$navbold",x="$navcolor",D="$navfont",O="$navfontsize",A="$navhilite",P="$navtextcolor",I="$otherdaycolor",L="$othertextcolor",j="$rangeenddataname",N="$rangeselection",B="$showheading",R="$showmonthnav",M="$todaybold",F="$todayscolor",H="$todaystextcolor",z={date:0,datetime:1,time:2,calendar:3,custom:4};qt.PICKERSTYLES=z;var W={y:"Y",m:"M",n:"M",d:"D",j:"D",J:"D",h:"H",w:"W"},$="Y",U="M",V="D",q="H",K="N",G="S",Y="s",X="W",J="(",Q=")";qt.FORMATTYPES={none:0,time:1,shortDate:2,shortDateTime:3,mediumDate:4,mediumDateTime:5,longDate:6,longDateTime:7,fullDate:8,fullDateTime:9,custom:10};var Z={animate:!0,classNames:!1,closeButton:!1,dateFormat:"mm-dd-YYYY",dateStart:!1,dateRanges:[],dateBlacklist:!0,dateEnd:!1,locale:"en",position:"bottom",rtl:"auto",startOpen:!0,stayOpen:!0,timeFormat:!1,timeIncrement:!1,timeHours:null,timeMinutes:null,timeSeconds:0,timeStepHours:1,timeStepMinutes:5,timeStepSeconds:5,today:!0,tooltips:[],viewDefault:"days",viewDecades:!1,viewYears:!0,viewMonths:!0,viewDays:!0,weekStart:0,dateSelection:{rangeMode:!1,start:null,end:null}},tt={container:null,controls:!0,date:null,format:"MMM-DD-YYYY HH:mm",headers:!0,increment:1,inline:!0,language:"",momentum:2,months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],omnisDisableSystemFocus:!1,rows:5,text:{title:"Pick a date and time",cancel:"Cancel",confirm:"OK",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",second:"Second",millisecond:"Millisecond"}},et=0,it=1,st=2,rt=3,nt=4,ot=5,at=6,lt=7,ht=0,ct=1,ut=2,dt=3,pt=4,mt=5,ft=6,gt=7,vt=8,bt=9,yt=10,Ct=11,_t=12,Et=13,wt=14,kt=15,Tt=16,St=17,xt=18,Dt=19,Ot=20,At=21,Pt=22,It=23,Lt=0,jt=1,Nt=window.Picker,Bt=Object.create(ctrl_base.prototype),Rt=Ft(Ft({},a.Mr),{},{BORDER:"BORDER",CURRENT_DAY:"CURRENT_DAY",CURRENT_DAY_TEXT:"CURRENT_DAY_TEXT",DATE_FACE:"DATE_FACE",DAY:"DAY",HEADING:"HEADING",HEADING_TEXT:"HEADING_TEXT",MONTH_TEXT:"MONTH_TEXT",NAV:"NAV",NAV_HILITE:"NAV_HILITE",NAV_TEXT:"NAV_TEXT",OTHER_DAY:"OTHER_DAY",OTHER_DAY_TEXT:"OTHER_DAY_TEXT",SELECTED_TEXT:"SELECTED_TEXT",TODAY:"TODAY",TODAY_TEXT:"TODAY_TEXT",OK_BUTTON:"OK_BUTTON",CANCEL_BUTTON:"CANCEL_BUTTON"});Bt.DefaultColors=Ft(Ft({},ctrl_base.prototype.DefaultColors),{},(Ht(t={},Rt.BORDER,o.l1.border),Ht(t,Rt.CURRENT_DAY,o.l1.primary),Ht(t,Rt.CURRENT_DAY_TEXT,o.l1.primaryText),Ht(t,Rt.DATE_FACE,o.l1.background),Ht(t,Rt.DAY,o.l1.background),Ht(t,Rt.HEADING,o.l1.primaryLight),Ht(t,Rt.HEADING_TEXT,o.l1.primaryLightText),Ht(t,Rt.MONTH_TEXT,o.l1.backgroundText),Ht(t,Rt.NAV,o.l1.primary),Ht(t,Rt.NAV_HILITE,o.JT),Ht(t,Rt.NAV_TEXT,o.l1.primaryText),Ht(t,Rt.OTHER_DAY,o.l1.neutral),Ht(t,Rt.OTHER_DAY_TEXT,o.l1.neutralText),Ht(t,Rt.SELECTED_TEXT,o.l1.primary),Ht(t,Rt.TODAY,o.l1.none),Ht(t,Rt.TODAY_TEXT,o.l1.backgroundText),Ht(t,a.Mr.BACKGROUND,o.l1.neutral),Ht(t,a.Mr.TEXT,o.l1.neutralText),Ht(t,Rt.OK_BUTTON,o.l1.primary),Ht(t,Rt.CANCEL_BUTTON,o.l1.dialogText),t));var Mt="currDayColor",zt="currDayTextColor",Wt="dayColor",$t="dayFont",Ut="headingBold",Vt="headingColor",Gt="headingFont",Yt="headingTextColor",Xt="monthTextColor",Jt="navColor",Qt="navFont",Zt="navHilite",te="navTextColor",ee="otherDayColor",ie="otherTextColor",se="showHeading",re="showMonthNav",ne="todayBold",oe="todaysColor",ae="todaysTextColor",le="none",he="table",ce="table-header-group",ue={backgroundColor:"background-color",color:"color",fontFamily:"font-family",fontSize:"font-size",fontWeight:"font-weight",borderColor:"border-color",fill:"fill",display:"display"},de="bold !important",pe="normal !important",me=0,fe=1,ge=2,ve=3,be=4,ye=5;function Ce(t){t&&this.inRangeMode&&(this.mCalendarRangeEndDataName&&(this.endDateDataIndex||(this.endDateDataIndex=this.form.getDataIndex(this.mCalendarRangeEndDataName)),this.form.setData(this.endDateDataIndex,t)),this.mCurrDateEnd=t)}function _e(){if(this.mCalendarRangeEndDataName){this.endDateDataIndex||(this.endDateDataIndex=this.form.getDataIndex(this.mCalendarRangeEndDataName,this,!0));var t=this.form.getData(this.endDateDataIndex);return t&&t.toJavaScriptDate()&&(t=t.toJavaScriptDate()),t}}function Ee(t){if(t&&t instanceof Date)return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t}return Bt.init_class_inst=function(){this.superclass=ctrl_base.prototype,this.superclass.init_class_inst.call(this),this.baseClassName="omnis-datepicker",this.mFocusStyle=eBaseFocusStyle.eCustom,this.usesNotActiveOverlay=!0,this.mFocusStyle=eBaseFocusStyle.eWithin},Bt.delete_class_inst=function(){this.superclass.delete_class_inst.call(this),this.mStyleSheet&&jOmnis.removeStyleSheet(this.mStyleSheet),this.documentClick&&(document.removeEventListener("mousedown",this.documentClick,!1),jOmnis.touchDevice&&document.removeEventListener("touchstart",this.documentClick,!1))},Bt.init_ctrl_inst=function(t,e,i,s){this.superclass.init_ctrl_inst.call(this,t,e,i,s);var r=this.clientElem;this instanceof Kt||(this.mUsePickerOnMobile=!r.getAttribute("data-usecal")),tt.controls=!jOmnis.mobileDevice,this.mPickerStyle=parseInt(r.getAttribute("data-datestyle")),this.mPickerStyleCustom=r.getAttribute("data-customstyle"),jOmnis.mobileDevice&&this.mUsePickerOnMobile&&this.mPickerStyle===z.calendar&&(this.mPickerStyle=z.date),this.mDateFormat=this.getPickerColumns(this.mPickerStyleCustom);var n=r.getAttribute("data-showmonthheading");n&&r.setAttribute("data-navshow",n);var o=r.getAttribute("data-showheading");return o&&r.setAttribute("data-headshow",o),this.mFaceAlpha=+r.getAttribute("data-facealpha"),this.mFaceColor=+r.getAttribute("data-facecolor"),this.mSelectedTextColor=+r.getAttribute("data-seltextcolor"),this.mFirstDay=parseInt(r.getAttribute("data-firstday"))||0,this.mFirstDay>=eBaseDay.Sunday&&this.mFirstDay<=eBaseDay.Saturday&&(this.mFirstDay=this.mFirstDay-12),this.mCalendarRangeMode=1===parseInt(r.getAttribute("data-rangemode")),this.mCalendarRangeEndDataName=r.getAttribute("data-rangedataname"),this.inRangeMode=this.mPickerStyle===z.calendar&&this.mCalendarRangeMode,this.initCalendarProps(),this.initPickerProps(),this.updatePicker(this.mPickerStyle,null,!0),this.activeChanged(),this instanceof Kt&&(this.elem.style[jOmnis.transitionTimingFunctionProperty]="ease",this.elem.style[jOmnis.transitionDurationProperty]="250ms",this.elem.style[jOmnis.transitionProperty]=this.mPickerStyle===z.calendar?"opacity":"bottom"),r.addEventListener("change",this.handleEvent),r.addEventListener("dblclick",this.handleEvent,!0),this.updateStyleSheet(),!1},Bt.initPickerProps=function(){var t=this.clientElem;if(this.mDatePickerStyle={body:new OmnisCSSBuilder({},this.getCssSelector(At)),pickerCellBefore:new OmnisCSSBuilder({},this.getCssSelector(St)),pickerCellAfter:new OmnisCSSBuilder({},this.getCssSelector(Tt)),pickerCellControl:new OmnisCSSBuilder({},this.getCssSelector(xt)),pickerCellControlContainer:new OmnisCSSBuilder({},this.getCssSelector(It)),pickerCellControlHover:new OmnisCSSBuilder({},this.getCssSelector(Dt)),pickerCellPicked:new OmnisCSSBuilder({},this.getCssSelector(Ot)),pickerCellBody:new OmnisCSSBuilder({},this.getCssSelector(Pt))},this.applyColorToGradientAttribute(),t.style.backgroundColor&&(this.mDatePickerStyle.body.setAttribute(ue.backgroundColor,t.style.backgroundColor),this.mDatePickerStyle.pickerCellControlContainer.setAttribute(ue.backgroundColor,t.style.backgroundColor)),t.style.color&&(this.mDatePickerStyle.body.setAttribute(ue.color,t.style.color),this.mDatePickerStyle.pickerCellControlContainer.setAttribute(ue.borderColor,t.style.color)),this.mSelectedTextColor){var e=this.getTheme().getTextColorString(this.mSelectedTextColor,null,this.DefaultColors.SELECTED_TEXT);this.mDatePickerStyle.pickerCellControlHover.setAttribute(ue.borderColor,e),this.mDatePickerStyle.pickerCellPicked.setAttribute(ue.color,e)}},Bt.initCalendarProps=function(){var t,e,i,s,r,n,o=this.clientElem,a=this;[{prefix:"nav",fontStyle:Qt,color:te,backgroundColor:Jt,useFill:!0,display:re,hiliteColor:Zt},{prefix:"head",fontStyle:Gt,display:se,fontWeight:Ut,color:Yt,backgroundColor:Vt},{prefix:"day",fontStyle:$t,color:Xt,backgroundColor:Wt},{prefix:"currday",color:zt,backgroundColor:Mt},{prefix:"other",color:ie,backgroundColor:ee},{prefix:"today",color:ae,backgroundColor:oe,fontWeight:ne}].forEach((function(t){!function(t){var e="data-"+t.prefix;function i(t){return o.getAttribute("".concat(e).concat(t))}if(t.fontStyle){a[t.fontStyle]={};var s=i("fontstyle");if(s)for(var r=["font-family","font-size"],n=0;n<r.length;n++){var l=a.getStyle(s,r[n]);l&&(a[t.fontStyle][r[n]]=l)}}t.fontWeight&&(a[t.fontWeight]=+i("bold")),t.backgroundColor&&(a[t.backgroundColor]=+i("facecolor")),t.hiliteColor&&(a[t.hiliteColor]=+i("facehilitecolor")),t.color&&(a[t.color]=+i("textcolor")),t.display&&(a[t.display]=+i("show"))}(t)}));var l=ue,h=this.getTextColor(me),c=this.getColor(ve),u={nav:(t={},Ht(t,l.fontFamily,this.navFont[l.fontFamily]),Ht(t,l.fontSize,this.navFont[l.fontSize]),Ht(t,l.color,h),Ht(t,l.fill,h),Ht(t,l.backgroundColor,this.getColor(me)),Ht(t,l.display,this.showMonthNav?he:le),t),navHilite:Ht({},l.backgroundColor,this.getNavHiliteColor()),heading:(e={},Ht(e,l.fontFamily,this.headingFont[l.fontFamily]),Ht(e,l.fontSize,this.headingFont[l.fontSize]),Ht(e,l.fontWeight,this.headingBold?de:pe),Ht(e,l.display,this.showHeading?ce:le),Ht(e,l.color,this.getTextColor(fe)),Ht(e,l.backgroundColor,this.getColor(fe)),e),body:(i={},Ht(i,l.fontFamily,this.dayFont[l.fontFamily]),Ht(i,l.fontSize,this.dayFont[l.fontSize]),Ht(i,l.color,this.getTextColor(ge)),Ht(i,l.backgroundColor,this.getColor(ge)),i),currDay:(s={},Ht(s,l.color,this.getTextColor(ve)),Ht(s,l.backgroundColor,c),Ht(s,l.borderColor,c),s),otherDay:(r={},Ht(r,l.color,this.getTextColor(be)),Ht(r,l.backgroundColor,this.getColor(be)),r),today:(n={},Ht(n,l.color,this.getTextColor(ye)),Ht(n,l.backgroundColor,this.getColor(ye)),Ht(n,l.fontWeight,this.todayBold?de:pe),n)};this.mCalendarStyle={nav:new OmnisCSSBuilder(u.nav,this.getCssSelector(ct)),navHilite:new OmnisCSSBuilder(u.navHilite,this.getCssSelector(ut)),heading:new OmnisCSSBuilder(u.heading,this.getCssSelector(pt)),body:new OmnisCSSBuilder(u.body,this.getCssSelector(ft)),currDay:new OmnisCSSBuilder(u.currDay,this.getCssSelector(_t)),otherDay:new OmnisCSSBuilder(u.otherDay,this.getCssSelector(Et)),today:new OmnisCSSBuilder(u.today,this.getCssSelector(wt))}},Bt.getTextColor=function(t){var e,i,s,r;switch(t){case me:e=this.navTextColor,i=this.DefaultColors.NAV_TEXT,s=this.navColor,r=Rt.NAV;break;case fe:e=this.headingTextColor,i=this.DefaultColors.HEADING_TEXT,s=this.headingColor,r=Rt.HEADING;break;case ge:e=this.monthTextColor,i=this.DefaultColors.MONTH_TEXT,s=this.dayColor,r=Rt.DAY;break;case ve:e=this.currDayTextColor,i=this.DefaultColors.CURRENT_DAY_TEXT,s=this.currDayColor,r=Rt.CURRENT_DAY;break;case be:e=this.otherTextColor,i=this.DefaultColors.OTHER_DAY_TEXT,s=this.otherDayColor,r=Rt.OTHER_DAY;break;case ye:e=this.todaysTextColor,i=this.DefaultColors.TODAY_TEXT,s=this.todaysColor,r=Rt.TODAY}return this.getTheme().getTextColorString(e,this.resolveDefaultColor(s,r),i)},Bt.getColor=function(t){var e,i;switch(t){case me:e=this.navColor,i=this.DefaultColors.NAV;break;case fe:e=this.headingColor,i=this.DefaultColors.HEADING;break;case ge:e=this.dayColor,i=this.DefaultColors.DAY;break;case ve:e=this.currDayColor,i=this.DefaultColors.CURRENT_DAY;break;case be:e=this.otherDayColor,i=this.DefaultColors.OTHER_DAY;break;case ye:e=this.todaysColor,i=this.DefaultColors.TODAY}return this.getTheme().getColorString(e,i)},Bt.getNavHiliteColor=function(){var t=this.getTheme();if(this.navHilite!==o.JT)return t.getColorString(this.navHilite);var e,i=t.getColorRGB(this.navColor,this.DefaultColors.NAV);return t.getColorString((e=i,OMColor.TintRGB(e,OMColor.eTintFactor.SMALL)))},Bt.getCssSelector=function(t){var e="#"+this.clientElem.id;switch(t){case ht:return e+" .tail-datetime-calendar";case ct:return e+" .calendar-actions";case ut:return e+" .calendar-actions span:first-child:before,"+e+" .calendar-actions span:last-child:before,"+e+" .calendar-actions span[data-action]:hover,"+e+" .calendar-actions span[data-action]:focus";case dt:return e+" .calendar-actions svg";case pt:return e+" .calendar-datepicker thead";case mt:return e+" .calendar-datepicker th";case ft:return e+" .calendar-datepicker";case gt:return e+" .calendar-day .inner";case vt:return e+" .calendar-month, "+e+" .calendar-year";case bt:return e+" .calendar-month span.inner:before,"+e+" .calendar-year span.inner:before,"+e+" .calendar-decade span.inner:before,"+e+" .calendar-month span.inner:after,"+e+" .calendar-year span.inner:after,"+e+" .calendar-decade span.inner:after";case yt:return e+" .calendar-month:hover span.inner:after,"+e+" .calendar-year:hover span.inner:after,"+e+" .calendar-decade:hover span.inner:after";case Ct:return e+" .calendar-month:hover span.inner:before,"+e+" .calendar-year:hover span.inner:before,"+e+" .calendar-decade:hover span.inner:before";case _t:return e+" .date-select .inner";case Et:return e+" .date-previous, "+e+" .date-next";case wt:return e+" .date-today";case At:return e+" .picker";case kt:return e+" .picker-dialog";case Pt:return e+" .picker-cell__body";case St:return e+" .picker-cell__body::before";case Tt:return e+" .picker-cell__body::after";case xt:return e+" .picker-cell__control::before";case Dt:return e+" .picker-cell__control:hover::before";case Ot:return e+" .picker-picked";case It:return e+" .picker-cell__control, "+e+" .picker-cell__header"}},Bt.applyColorToGradientAttribute=function(){var t=this.getTheme(),e=t.getColorString(this.mFaceColor,this.DefaultColors.DATE_FACE,this.mFaceAlpha),i=t.getColorString(this.mFaceColor,this.DefaultColors.DATE_FACE,0),s=t.getColorString(this.themeableData.backgroundColor,this.DefaultColors.background,this.getProperty(eBaseProperties.backalpha));function r(t){switch(t){case St:return"linear-gradient(to top, "+i+", "+s+")";case Tt:return"linear-gradient(to bottom, "+i+", "+s+")";case Pt:return"linear-gradient(0deg, "+s+" 0%, "+e+", "+s+" 100%)"}}this.mDatePickerStyle.pickerCellBody.setAttribute("background-image",r.call(this,Pt)),this.mDatePickerStyle.pickerCellBefore.setAttribute("background-image",r.call(this,St)),this.mDatePickerStyle.pickerCellAfter.setAttribute("background-image",r.call(this,Tt))},Bt.updateCtrl=function(t,e,i,s){function r(t,e){if(!e||t.getTime()!==e.getTime())return!0}if(this.inRangeMode){var n=Ee(this.getDate());if(n&&r(n,this.mCurrDate)){this.mCurrDate=n;var o=!0}var a=Ee(_e.call(this));if(a&&r(a,this.mCurrDateEnd)){this.mCurrDateEnd=a;var l=!0}this.updatePickerCurrentDateRange(o,l)}else this.mCurrDate=this.getDate(),this.updatePickerCurrentDate();this.setAriaDisabled()},Bt.visibilityChanged=function(){this.superclass.visibilityChanged.call(this)&&"visible"===this.elem.style.visibility&&this.updateStylesheetWhenVisible&&(this.updateStyleSheet(),this.updateStylesheetWhenVisible=!1)},Bt.sizeChanged=function(){"hidden"!==this.elem.style.visibility&&(this.updateStyleSheet(),this.superclass.sizeChanged.call(this))},Bt.fontChanged=function(){this.mPickerStyle!==z.calendar&&this.updateStyleSheet()},Bt.activeChanged=function(){if(this.superclass.activeChanged.call(this),this.mPickerStyle!==z.calendar)return this.mPicker.update();this.mPicker.reload(),this.setPickerElems(),this.updateStyleSheet()},Bt.setAriaDisabled=function(){for(var t=this.clientElem.querySelectorAll("[tabindex='0']"),e=this.isEnabled(),i=0;i<t.length;i++)e?t[i].removeAttribute("aria-disabled"):t[i].setAttribute("aria-disabled","true");this.superclass.setAriaDisabled.call(this)},Bt.handleEvent=function(t){var n=this.omnisObject||this,o=n.clientElem;switch(t.type){case"pick":case"change":var a=o.getAttribute("data-value"),l=n.mCurrDate?n.mCurrDate.getTime():0;if(n.inRangeMode){var h=1==+o.getAttribute("data-startchanged"),c=1==+o.getAttribute("data-endchanged");if(o.removeAttribute("data-startchanged"),o.removeAttribute("data-endchanged"),c){var u=o.getAttribute("data-valueto");Ce.call(n,new Date(+u))}}if(!n.inRangeMode||c)var d=n.setCurrentDate(a);return n.mPickerStyle===z.calendar&&n.canSendEvent(i,!0)&&(n.inRangeMode&&n.eventParamsAdd("pInRangeSelection",h&&!c),n.sendEvent("evDateClick")),d&&(!n.inRangeMode&&n.canSendEvent(e,!0)&&l!==n.mCurrDate.getTime()?n.sendEvent("evDateChange"):n.inRangeMode&&n.canSendEvent(r,!0)&&(n.eventParamsAdd("pStartDate",new omnis_date(n.mCurrDate,!0)),n.eventParamsAdd("pEndDate",new omnis_date(n.mCurrDateEnd,!0)),n.sendEvent("evDateRangeChange"))),!0;case"dblclick":if(n.canSendEvent(s,!0)){if(n.mPickerStyle===z.calendar)for(var p=t.target;p&&p.parentNode&&"TD"!==p.tagName;){if(p.id===o.id)return;p=p.parentNode}return n.sendEvent("evDateDClick"),!0}}return n.superclass.handleEvent.call(n,t)},Bt.setCurrentDate=function(t){return!!t&&(this.mCurrDate=new Date(+t),this.setDate(this.mCurrDate),this.mCurrDate)},Bt.getPickerDisplayFormat=function(t){for(var e=function(t){var e=t.match(/(!|Y|y|M|m|j|D|d|H|h|N|n|s|S|W|w|\(|\))\1*/g);return e=function(t){for(var e=0;e<t.length;e++)t[e].length>1&&(t[e]=t[e].substr(0,1)),W[t[e]]&&(t[e]=W[t[e]]);if(t.includes("(")&&t.includes(")")){for(var i=t.indexOf("(");i!==t.lastIndexOf("(");)t.splice(t.lastIndexOf("("),1);for(var s=t.lastIndexOf(")");t.indexOf(")")!==s;)t.splice(t.indexOf(")"),1);i=t.indexOf("("),s=t.indexOf(")");var r=[];for(e=0;e<i;e++)for(var n=i;n<s;n++)t[e]===t[n]&&r.push(e);for(e=0;e<r.length;e++)t.splice(r[e]-e,1)}return t=t.filter((function(e,i){return t.indexOf(e)===i}))}(e),e}(t),i="",s=0;s<e.length;s++){var r=s!==e.length-1;switch(e[s]){case $:i+="YYYY";break;case U:i+="MMM";break;case V:i+="DD";break;case q:i+="HH";break;case K:i+="mm";break;case G:i+="ss";break;case Y:i+="SS";break;case X:i+="W";break;case J:i+="(",r=!1;break;case Q:"-"===i.charAt(i.length-1)&&(i=i.substr(0,i.length-1)),i+=")"}r&&(i+="-")}return i},Bt.getProperty=function(t){switch(t){default:break;case l:return this.mPickerStyle;case h:return this.mPickerStyleCustom;case u:return this.mFaceAlpha;case c:return this.mFaceColor;case d:return this.mSelectedTextColor;case y:return this.mFirstDay;case f:return this.mUsePickerOnMobile;case j:return this.mCalendarRangeEndDataName;case N:return this.mCalendarRangeMode;case S:return this.navBold;case x:return this.navColor;case D:return this.navFont[ue.fontFamily];case O:return this.navFont[ue.fontSize];case A:return this.navHilite;case P:return this.navTextColor;case R:return this.showMonthNav;case C:return this.headingBold;case _:return this.headingColor;case E:return this.headingFont[ue.fontFamily];case w:return this.headingFont[ue.fontSize];case k:return this.headingTextColor;case B:return this.showHeading;case g:return this.dayColor;case v:return this.dayFont[ue.fontFamily];case b:return this.dayFont[ue.fontSize];case T:return this.monthTextColor;case p:return this.currDayColor;case m:return this.currDayTextColor;case I:return this.otherDayColor;case L:return this.otherTextColor;case M:return this.todayBold;case F:return this.todaysColor;case H:return this.todaysTextColor}return this.superclass.getProperty.call(this,t)},Bt.getCanAssign=function(t){switch(t){case n:case p:case m:case u:case c:case l:case h:case f:case g:case v:case b:case y:case C:case _:case E:case w:case k:case T:case S:case x:case D:case O:case A:case P:case I:case L:case j:case N:case d:case B:case R:case M:case F:case H:return!0}return this.superclass.getCanAssign.call(this,t)},Bt.setProperty=function(t,e){if(!this.getCanAssign(t))return!1;this.clientElem;switch(t){case n:break;case l:var i=1*e;jOmnis.mobileDevice&&this.mUsePickerOnMobile&&i===z.calendar&&(i=z.date),this.updatePicker(i,this.mPickerOptions,!0);var s=!0;break;case h:this.mPickerStyleCustom=e,this.mPickerStyle===z.custom&&this.updatePicker(this.mPickerStyle,this.mPickerOptions,!0),s=!0;break;case eBaseProperties.backalpha:case eBaseProperties.backcolor:this.superclass.setProperty.call(this,t,e),this.pickerColorHasChanged=!0;break;case u:this.mFaceAlpha=+e,this.pickerColorHasChanged=!0;break;case c:this.mFaceColor=+e,this.pickerColorHasChanged=!0;break;case d:this.mSelectedTextColor=+e;var r=this.getTheme().getColorString(this.mSelectedTextColor,this.DefaultColors.SELECTED_TEXT);this.mDatePickerStyle.pickerCellControlHover.setAttribute(ue.borderColor,r),this.mDatePickerStyle.pickerCellPicked.setAttribute(ue.color,r),s=!0;break;case eBaseProperties.textcolor:var W=this.getTheme().getTextColorString(+e,this.mFaceColor,this.DefaultColors[a.Mr.TEXT]);this.mDatePickerStyle.body.setAttribute("color",W),this.mDatePickerStyle.pickerCellControl.setAttribute("border-color",W),s=!0;break;case y:if((e*=1)>=eBaseDay.Sunday&&e<=eBaseDay.Saturday?this.mFirstDay=e-eBaseDay.Sunday:this.mFirstDay=e,this.mPickerStyle!==z.calendar)return!0;var $=!0;break;case f:this.mUsePickerOnMobile=!!e;break;case j:this.mCalendarRangeEndDataName=e;break;case N:if(this.mCalendarRangeMode=!!e,this.inRangeMode=this.mPickerStyle===z.calendar&&this.mCalendarRangeMode,this.mPickerStyle!==z.calendar)return!0;$=!0;break;case S:this.navBold=!!e,this.mCalendarStyle.nav.setAttribute(ue.fontWeight,this.navBold?de:pe),s=!0;break;case x:this.navColor=+e,this.mCalendarStyle.nav.setAttribute(ue.backgroundColor,this.getColor(me)),this.navHilite===o.JT&&this.setProperty(A,o.JT),this.navTextColor===o.JT&&this.setProperty(P,o.JT),s=!0;break;case D:this.navFont[ue.fontFamily]=e,this.mCalendarStyle.nav.setAttribute(ue.fontFamily,e),s=!0;break;case O:this.navFont[ue.fontSize]=+e,this.mCalendarStyle.nav.setAttribute(ue.fontSize,"".concat(this.navFont[ue.fontSize],"pt")),s=!0;break;case A:this.navHilite=+e,this.mCalendarStyle.navHilite.setAttribute(ue.backgroundColor,this.getNavHiliteColor()),s=!0;break;case P:this.navTextColor=+e;var U=this.getTextColor(me);this.mCalendarStyle.nav.setAttribute(ue.color,U),this.mCalendarStyle.nav.setAttribute(ue.fill,U),s=!0;break;case R:this.showMonthNav=!!e,this.mCalendarStyle.nav.setAttribute(ue.display,this.showMonthNav?he:le),s=!0;break;case C:this.headingBold=!!e,this.mCalendarStyle.heading.setAttribute(ue.fontWeight,this.headingBold?de:pe),s=!0;break;case _:this.headingColor=+e,this.mCalendarStyle.heading.setAttribute(ue.backgroundColor,this.getColor(fe)),this.headingTextColor===o.JT&&this.setProperty(k,o.JT),s=!0;break;case E:this.headingFont[ue.fontFamily]=e,this.mCalendarStyle.heading.setAttribute(ue.fontFamily,this.headingFont[ue.fontFamily]),s=!0;break;case w:this.headingFont[ue.fontSize]=+e,this.mCalendarStyle.heading.setAttribute(ue.fontSize,"".concat(this.headingFont[ue.fontSize],"pt")),s=!0;break;case k:this.headingTextColor=+e,this.mCalendarStyle.heading.setAttribute(ue.color,this.getTextColor(fe)),s=!0;break;case B:this.showHeading=!!e,this.mCalendarStyle.heading.setAttribute(ue.display,this.showHeading?ce:le),s=!0;break;case g:this.dayColor=+e,this.mCalendarStyle.body.setAttribute(ue.backgroundColor,this.getColor(ge)),this.monthTextColor===o.JT&&this.setProperty(T,o.JT),s=!0;break;case v:this.dayFont[ue.fontFamily]=e,this.mCalendarStyle.body.setAttribute(ue.fontFamily,this.dayFont[ue.fontFamily]),s=!0;break;case b:this.dayFont[ue.fontSize]=+e,this.mCalendarStyle.body.setAttribute(ue.fontSize,"".concat(this.dayFont[ue.fontSize],"pt")),s=!0;break;case T:this.monthTextColor=+e,this.mCalendarStyle.body.setAttribute(ue.color,this.getTextColor(ge)),s=!0;break;case p:this.currDayColor=+e;var V=this.getColor(ve);this.mCalendarStyle.body.setAttribute(ue.backgroundColor,V),this.mCalendarStyle.body.setAttribute(ue.borderColor,V),this.currDayTextColor===o.JT&&this.setProperty(m,o.JT),s=!0;break;case m:this.currDayTextColor=+e,this.mCalendarStyle.body.setAttribute(ue.color,this.getTextColor(ve)),s=!0;break;case I:this.otherDayColor=+e,this.mCalendarStyle.otherDay.setAttribute(ue.backgroundColor,this.getColor(be)),this.otherTextColor===o.JT&&this.setProperty(L,o.JT),s=!0;break;case L:this.otherTextColor=+e,this.mCalendarStyle.otherDay.setAttribute(ue.color,this.getTextColor(be)),s=!0;break;case M:this.todayBold=!!e,this.mCalendarStyle.today.setAttribute(ue.fontWeight,this.todayBold?de:pe),s=!0;break;case F:this.todaysColor=+e,this.mCalendarStyle.today.setAttribute(ue.backgroundColor,this.getColor(ye)),this.todaysTextColor===o.JT&&this.setProperty(H,o.JT),s=!0;break;case H:this.todaysTextColor=+e,this.mCalendarStyle.today.setAttribute(ue.color,this.getTextColor(be)),s=!0}return this.pickerColorHasChanged&&(s=!0),$&&(this.updatePicker(this.mPickerStyle,this.mPickerOptions,!0),s=!0),s?(this.form.inst.registerPropertyObject(this),!0):this.superclass.setProperty.call(this,t,e)},Bt.applyPropertyChanges=function(){this.pickerColorHasChanged&&(this.mDatePickerStyle.pickerCellControlContainer.setAttribute("background-color",this.clientElem.style.backgroundColor),this.applyColorToGradientAttribute(),this.pickerColorHasChanged=!1),this.updateStyleSheet()},Bt.updatePicker=function(t,e,i){if(i||t!==this.mPickerStyle){var s,r=this.clientElem;if(this.mPicker&&(this.mPickerOptions=null,this.mPickerStyle===z.calendar?this.mPicker.remove():this.mPicker.destroy()),this.setOptionsFromDefault(t),e)for(var n=Object.keys(e),o=0;o<n.length;o++)this.mPickerOptions[n[o]]=e[n[o]];if(this.unsetPickerElems(),this.mPickerStyle=t,t===z.calendar){return this.mPickerOptions.weekStart=this.mFirstDay,this.mPickerOptions.dateSelection.rangeMode=this.mCalendarRangeMode,this.mPickerOptions.dateStart=(s=window.CALENDAR_START_DATE)instanceof Date?s:null!=s?new Date(s):((s=new Date).setUTCFullYear(0,0,1),s),this.mPicker=tail.DateTime(r,this.mPickerOptions),this.setPickerElems(),void this.update()}this.mDateFormat=this.getPickerColumns(this.mPickerStyleCustom),this.mPickerOptions.format=this.mDateFormat,this.mPicker=new Nt(r,this.mPickerOptions),this.setPickerElems(),this.pickerLineHeight&&(this.pickerBody.style.lineHeight=this.pickerLineHeight),this.update()}},Bt.setOptionsFromDefault=function(t){var e=t===z.calendar?Z:tt;this.mPickerOptions=jOmnis.deepCopy(e),t!==z.calendar?(this.mPickerOptions.pick=this.handleEvent,this.mPickerOptions.omnisDisableSystemFocus=this.mDisableSystemFocus,this.mPickerOptions.container="#"+this.clientElem.id):this.mPickerOptions.position="#"+this.clientElem.id},Bt.updateStyleSheet=function(){if("hidden"!==this.elem.style.visibility){this.mStyleSheet&&jOmnis.removeStyleSheet(this.mStyleSheet);var t="";if(this.mPickerStyle===z.calendar){this.calculateCalendarSizes();for(var e=Object.keys(this.mCalendarStyle),i=0;i<e.length;i++)t+=this.mCalendarStyle[e[i]].getCssString()}else{var s=document.querySelector(this.getCssSelector(At));s&&!this.mModalPopup&&(s.style.width=parseInt(this.clientElem.style.width)-2+"px");var r=parseInt(this.clientElem.style.height),n=this.pickerBody,o=getComputedStyle(n).fontSize,a=parseFloat(o);-1===o.indexOf("pt")&&(a=this.convertUnits(a,jt,Lt)),a=Math.max(Math.round(1.5*a),18),n.style.lineHeight=this.pickerLineHeight=a+"px",a+=2*parseInt(getComputedStyle(n.querySelector(".picker-item")).padding);var l=r-n.getBoundingClientRect().height;if(l>0&&l>=a){var h=Math.floor(l/a);if(h>0&&!((h+this.mPickerOptions.rows)%2)&&h--,h>0){this.mPickerOptions.rows=this.mPickerOptions.rows+h;var c=!0}}else if(l<0){var u=Math.ceil(-l/a);if(u>0){(this.mPickerOptions.rows-u)%2||u++;var d=this.mPickerOptions.rows-u;this.mPickerOptions.rows=d<=0?-1:d,c=!0}}for(c&&this.updatePicker(this.mPickerStyle,this.mPickerOptions,!0),e=Object.keys(this.mDatePickerStyle),i=0;i<e.length;i++)t+=this.mDatePickerStyle[e[i]].getCssString()}this.mStyleSheet=jOmnis.addStyleSheet(t)}else this.updateStylesheetWhenVisible=!0},Bt.updatePickerCurrentDateRange=function(t,e){if(t&&this.mCurrDate&&this.updatePickerCurrentDate(),e&&this.mCurrDateEnd){var i=this.getDatePart(this.mCurrDateEnd,et);this.mPicker.selectDate(i.year,i.month,i.date,i.hours,i.minutes,i.seconds,!0,tail.DateTime.DATESELECTION.SECOND_SELECT)}},Bt.updatePickerCurrentDate=function(){if(this.mCurrDate)if(this.mPickerStyle===z.calendar){var t=this.getDatePart(this.mCurrDate,et);this.mPicker.selectDate(t.year,t.month,t.date,t.hours,t.minutes,t.seconds,!0,tail.DateTime.DATESELECTION.FIRST_SELECT)}else this.mPicker.setDate(this.mCurrDate)},Bt.setDate=function(t){if(null!=t){var e=this.getData();null!=e&&null!=e.lstDef?(this.setData(t,"#COL",1,1),this.setData(-t.getTimezoneOffset(),"#COL",1,2)):this.setData(t)}},Bt.getDate=function(){var t,e=this.getData();return null!=e&&null!=e.lstDef&&(e=this.getData("#COL",1,1)),e&&e instanceof omnis_date&&(t=e.toJavaScriptDate()),t},Bt.getDatePart=function(t,e){if(t){var i={};switch(i.day=t.getDay(),i.date=t.getDate(),i.month=t.getMonth(),i.year=t.getFullYear(),i.hours=t.getHours(),i.minutes=t.getMinutes(),i.seconds=t.getSeconds(),e){case it:return i.day;case st:return i.date;case rt:return i.month;case nt:return i.year;case ot:return i.hours;case at:return i.minutes;case lt:return i.seconds;default:return i}}},Bt.getStyle=function(t,e){var i=e+":",s=t.indexOf(i);if(-1===s)return"";s+=i.length;var r=t.indexOf(";",s);return-1===r&&(r=t.length-1),t.substr(s,r-s)},Bt.calculateCalendarSizes=function(){var t=this.clientElem,e=t.clientHeight,i=t.clientWidth,s=this.getProperty(R),r=this.getProperty(B),n=6+(s?1:0)+(r?1:0),o=1/n,a=1/n,l=1/4,h=.25,c=.15,u=s?Math.floor(e*o):0,d=Math.floor(e*a),p=e-u-(r?d:0),m=Math.floor(p*l),f=Math.ceil(i/4*h),g=Math.ceil(m*h),v=Math.ceil(m*c),b={height:g+"px",width:f+"px"};this.mCalendarStyle.bodyMonthsYearsBorder?this.mCalendarStyle.bodyMonthsYearsBorder.setAttributes(b):this.mCalendarStyle.bodyMonthsYearsBorder=new OmnisCSSBuilder(b,this.getCssSelector(bt)),b={right:v+"px",bottom:v+"px"},this.mCalendarStyle.bodyMonthsYearsBorderSpacingBottom?this.mCalendarStyle.bodyMonthsYearsBorderSpacingBottom.setAttributes(b):this.mCalendarStyle.bodyMonthsYearsBorderSpacingBottom=new OmnisCSSBuilder(b,this.getCssSelector(yt)),b={left:v+"px",top:v+"px"},this.mCalendarStyle.bodyMonthsYearsBorderSpacingTop?this.mCalendarStyle.bodyMonthsYearsBorderSpacingTop.setAttributes(b):this.mCalendarStyle.bodyMonthsYearsBorderSpacingTop=new OmnisCSSBuilder(b,this.getCssSelector(Ct)),this.mCalendarStyle.nav.setAttribute("line-height",u+"px"),this.mCalendarStyle.body.setAttribute("line-height",d+"px"),this.mCalendarStyle.bodyMonthsYears?this.mCalendarStyle.bodyMonthsYears.setAttribute("line-height",m+"px"):this.mCalendarStyle.bodyMonthsYears=new OmnisCSSBuilder({"line-height":m+"px"},this.getCssSelector(vt));var y=Math.floor(i/7),C=Math.min(d,y);var _=C%2?C:C-1;b={height:_+"px",width:_+"px","line-height":_-2+"px"},this.mCalendarStyle.bodyCells?this.mCalendarStyle.bodyCells.setAttributes(b):this.mCalendarStyle.bodyCells=new OmnisCSSBuilder(b,this.getCssSelector(gt)),this.pickerBody.style.height=parseInt(t.style.height)-2+"px",this.pickerBody.style.width=parseInt(t.style.width)-2+"px"},Bt.convertUnits=function(t,e,i){if(e===i)return t;switch(i){case Lt:return t/72*96;case jt:return 72*t/96}},Bt.setPickerElems=function(){var t=this.clientElem;this.mPickerStyle===z.calendar?this.pickerBody=document.querySelector(this.getCssSelector(ht)):this.pickerBody=t.querySelector(this.getCssSelector(kt))},Bt.unsetPickerElems=function(){this.mPickerStyle!==z.calendar&&(this.pickerBody=null)},Bt.setTabIndex=function(t){return this.clientElem.tabIndex=-1,t},Bt.getPickerColumns=function(t){if(this.mPickerStyle===z.custom&&t)return this.getPickerDisplayFormat(t);switch(this.mPickerStyle){case z.datetime:return this.getPickerDisplayFormat(this.getDateDayTimeFormat());case z.time:this.mDateFormatType=eBaseDisplayFormats.time;break;default:this.mDateFormatType=eBaseDisplayFormats.shortdate}return this.getPickerDisplayFormat(this.getDisplayFormat())},Bt.getDateDayTimeFormat=function(){if(!qt.DATEDAYTIMEFORMAT){var t=jOmnis.mLocaleFullDateFormat.replace("y","");t="("+t+")",qt.DATEDAYTIMEFORMAT=t+" "+jOmnis.mLocaleTimeFormat}return qt.DATEDAYTIMEFORMAT},Bt}(),Kt.prototype=function(){var t=Object.create(qt.prototype);function e(t,e){var i=0,s=0,r=document.documentElement.clientWidth;if(t===qt.PICKERSTYLES.calendar)if(e){var n=document.documentElement.clientHeight,o=r<n;i=Math.max(Math.min(r-(o?50:100),600),200),s=Math.max(Math.min(n-(o?100:50),600),200)}else i=Kt.ABB_DAY_CHAR_WIDTH>3?Kt.ABB_DAY_CHAR_WIDTH/3*280:280,s=245;else{if(e){var a=Math.max(.7*r,800);r>a&&(i=a)}else i=240;s=this.usesButtonArea?this.clientElem.clientHeight:280}return{width:i,height:s}}function i(){var t=this.clientElem.getBoundingClientRect();this.elem.style.top=(document.body.clientHeight-t.height)/2+"px",this.elem.style.left=(document.body.clientWidth-t.width)/2+"px",jOmnis.addClass(this.elem,"omnis-calendar-modal-open")}function s(){this.elem.style.width?this.elem.style.left=(document.documentElement.clientWidth-this.elem.clientWidth)/2+"px":this.elem.style.left="",jOmnis.addClass(document.body,"omnis-calendar-picker-modal"),jOmnis.addClass(this.elem,"omnis-picker-modal-open")}function r(){this.setModalSize(),this.mPickerStyle===qt.PICKERSTYLES.calendar?i.call(this):s.call(this),this.dialogMask||showDialogMask.call(this,!0,!1,"omnis-datepicker-mask"),this.elem.style.zIndex=+this.dialogMask.style.zIndex+1}function n(){this.elem.style.top="",jOmnis.removeClass(this.elem,"omnis-calendar-modal-open")}function a(){if(jOmnis.removeClass(document.body,"omnis-calendar-picker-modal"),this.mPickerStyle===qt.PICKERSTYLES.calendar)return n.call(this);jOmnis.removeClass(this.elem,"omnis-picker-modal-open")}return t.init_options=function(t,i,s){Kt.ABB_DAY_CHAR_WIDTH||this.setLocaleMaxStringWidths();var r=document.createElement("div");r.setAttribute("id","datepicker_popup_"+this.uniqueID+"_frame");var n=document.createElement("div");n.setAttribute("id","datepicker_popup_"+this.uniqueID+"_client"),n.style.outline=s.disableSystemFocus?"none":"",s.initialPickerValue||(s.initialPickerValue=new Date),this.mCurrDate=s.initialPickerValue,s=function(t,e){if(e.forcePickerMode===qt.DATEPICKERMODE.calendar)var i=qt.PICKERSTYLES.calendar;else switch(e.isTimePicker=!1,e.dateFormatType){case qt.FORMATTYPES.time:i=qt.PICKERSTYLES.time,e.isTimePicker=!0;break;case qt.FORMATTYPES.shortDate:case qt.FORMATTYPES.mediumDate:case qt.FORMATTYPES.longDate:case qt.FORMATTYPES.fullDate:i=e.forcePickerMode===qt.DATEPICKERMODE.picker||jOmnis.mobileDevice?qt.PICKERSTYLES.date:qt.PICKERSTYLES.calendar;break;case qt.FORMATTYPES.shortDateTime:case qt.FORMATTYPES.mediumDateTime:case qt.FORMATTYPES.longDateTime:case qt.FORMATTYPES.fullDateTime:i=qt.PICKERSTYLES.datetime;break;case qt.FORMATTYPES.custom:i=qt.PICKERSTYLES.custom,t.setAttribute("data-customstyle",e.dateFormat),e.isTimePicker=function(t){var e=t.match(/(Y|y|M|m|j|D|d|n)\1*/g),i=t.match(/(H|h|N|s|S)\1*/g);if(i&&i.length>0&&!e)return!0}(e.dateFormat);break;case qt.FORMATTYPES.none:default:i=void 0!==e.omnisSubtype?function(t,e){switch(t){case eOmnisDataSubTypes.date1900:case eOmnisDataSubTypes.date1980:case eOmnisDataSubTypes.date2000:return e===qt.DATEPICKERMODE.picker||jOmnis.mobileDevice?qt.PICKERSTYLES.date:qt.PICKERSTYLES.calendar;case eOmnisDataSubTypes.time:return e===qt.DATEPICKERMODE.calendar?qt.PICKERSTYLES.calendar:qt.PICKERSTYLES.time;case eOmnisDataSubTypes.dateTime1900:case eOmnisDataSubTypes.dateTime1980:case eOmnisDataSubTypes.dateTime2000:case eOmnisDataSubTypes.dateTimeC:case eOmnisDataSubTypes.dpFdtimedefault:default:return e===qt.DATEPICKERMODE.calendar?qt.PICKERSTYLES.calendar:qt.PICKERSTYLES.datetime}}(e.omnisSubtype,e.forcePickerMode):qt.PICKERSTYLES.date}return t.setAttribute("data-datestyle",i+""),e.datePickerStyle=i,e}(n,s),this.setThemeAttributes(n,s.datePickerStyle),s.popupStyle!==qt.DATEPICKERPOPUPSTYLE.modal||jOmnis.inIE11OrLater()?s.popupStyle===qt.DATEPICKERPOPUPSTYLE.auto&&(this.mModalPopup=jOmnis.mobileDevice):this.mModalPopup=!0,this.mModalPopup&&(r.className=s.datePickerStyle!==qt.PICKERSTYLES.calendar?"omnis-picker-modal":"omnis-calendar-modal"),n.setAttribute("data-value",s.initialPickerValue.getTime()+"");var a,l,h=e.call(this,s.datePickerStyle,this.mModalPopup);function c(t,e,i){t.forEach((function(t){t.style[e]=i}))}function u(e,i){r.setAttribute(t.isResponsive?"data-pi":"data-ssz",t.generateDimensionsForAllSizes(0,0,e,i))}if(c([r,n],"left","0px"),c([r,n],"height",h.height+"px"),n.style.position="absolute",n.style.top="0px",h.width&&c([r,n],"width",h.width+"px"),this.mModalPopup?r.style.position="fixed":(r.style.position="absolute",r.style.top="0px"),r.setAttribute("data-ord","0"+(t.maxObjNumber+1).toString(16)),u(h.width,h.height),r.style.zIndex=jOmnis.getPopupZIndex(t,1),r.appendChild(n),document.body.appendChild(r),this.init_ctrl_inst(t,r),jOmnis.addClass(r,["omnis-datepicker-popup",this.mModalPopup?"omnis-wf-shadow":"",this.getTheme().getCSSClass()]),t.installChild(this),this.mSelectFunction=s.onSelect,this.mBeforeShowFunction=s.beforeShow,this.mAfterShowFunction=s.afterShow,this.mOnCloseFunction=s.onClose,this.mCentreIcon=s.centreIcon,this.addPickerImage(s.addToFrame?i.omnisObject.elem:i,s.isTimePicker,s.customImgStyleProps),this.mPickerStyle!==qt.PICKERSTYLES.calendar){var d=function(t){var e,i=document.createElement("button");switch(i.className="dlg-butt dp-butt omnis-button ".concat(f),t){case y.ok:i.id="".concat(n.id,"_ok"),i.innerText=jOmnis.okString,jOmnis.addClass(i,"dlg-butt-primary"),i.style.order="1",e=g.DefaultColors.OK_BUTTON;break;case y.cancel:i.id="".concat(n.id,"_cancel"),i.innerText=jOmnis.cancelString,i.style.order="0",e=g.DefaultColors.CANCEL_BUTTON}i.style.color=v.getColorString(e);var s=ctrl_pushbutton.getFlatButtonFocusColor(b,o.JT,e);function r(){dialogButtonShowHideFocus(i.id,b.index,s)}function a(){dialogButtonShowHideFocus(i.id,b.index,o.l1.none)}return i.addEventListener("mouseenter",r),i.addEventListener("focusin",r),i.addEventListener("mouseleave",a),i.addEventListener("focusout",a),m.appendChild(i),jOmnisEffects.addRippleToElem(i,v,!1,s,At._j),i},p=document.createElement("div");p.className="dp-butt-area";var m=document.createElement("div");m.className="dp-butt-container";var f=this.mDisableSystemFocus?" noFocus":"",g=this,v=this.getTheme(),b=this.form.inst,y={ok:0,cancel:1},C=d(y.ok),_=d(y.cancel);p.appendChild(m),n.appendChild(p);var E=parseInt(n.style.height),w=E-parseInt(getComputedStyle(this.pickerBody).height),k=parseInt(getComputedStyle(C).height);w<10+k&&(n.style.height=E+10+k-w+"px"),p.style.paddingTop=w-10-k+"px",r.style.height=n.style.height;for(var T=!0;C.getBoundingClientRect().top!==_.getBoundingClientRect().top&&(l=-1,(a=T?C:_).style.width=a.clientWidth+l+"px",T=!T,!(C.clientWidth<parseInt(getComputedStyle(C).minWidth))););this.usesButtonArea=!0,u(n.clientWidth,n.clientHeight),this.initLayoutInfo()}this.hide(),n.addEventListener("keydown",this.handleEvent),n.addEventListener("click",this.handleEvent,!0),this.documentClick=this.makeFunction("onDocumentClick",1),document.addEventListener("mousedown",this.documentClick,!1),jOmnis.touchDevice&&document.addEventListener("touchstart",this.documentClick,!1)},t.delete_class_inst=function(){if(this.elem&&document.body.removeChild(this.elem),this.mCalendarSelectImage&&this.mCalendarSelectImage.parentNode.removeChild(this.mCalendarSelectImage),this.form){var t=this.form.mChildren.indexOf(this);-1!=t&&this.form.mChildren.splice(t,1)}this.parentClass.delete_class_inst.call(this)},t.setThemeAttributes=function(t,e){var i={color:o.JT,backgroundColor:o.JT,backgroundAlpha:255};if(t.setAttribute("data-themeable",JSON.stringify(i)),e===qt.PICKERSTYLES.calendar){var s=function(t){return"font-family:".concat(zt,";font-size:").concat(t,"pt;")};[{prefix:"nav",fontStyle:s(Vt),color:this.DefaultColors.NAV_TEXT,backgroundColor:this.DefaultColors.NAV,useFill:!0,display:1,hiliteColor:this.DefaultColors.NAV_HILITE},{prefix:"head",fontStyle:s(Ut),display:1,fontWeight:0,color:this.DefaultColors.HEADING_TEXT,backgroundColor:this.DefaultColors.HEADING},{prefix:"day",fontStyle:s($t),color:this.DefaultColors.MONTH_TEXT,backgroundColor:this.DefaultColors.DAY},{prefix:"currday",color:this.DefaultColors.CURRENT_DAY_TEXT,backgroundColor:this.DefaultColors.CURRENT_DAY},{prefix:"other",color:this.DefaultColors.OTHER_DAY_TEXT,backgroundColor:this.DefaultColors.OTHER_DAY},{prefix:"today",color:this.DefaultColors.TODAY_TEXT,backgroundColor:this.DefaultColors.TODAY,fontWeight:1}].forEach((function(e){!function(e){var i="data-"+e.prefix;function s(e,s){t.setAttribute("".concat(i).concat(e),s)}e.fontStyle&&s("fontstyle",e.fontStyle),e.fontWeight&&s("bold",e.fontWeight),e.backgroundColor&&s("facecolor",e.backgroundColor),e.hiliteColor&&s("facehilitecolor",e.hiliteColor),e.color&&s("textcolor",e.color),e.display&&s("show",e.display)}(e)}))}else t.style.fontFamily=zt,t.style.fontSize="".concat(Wt,"pt"),t.setAttribute("data-facealpha","255"),t.setAttribute("data-facecolor",this.DefaultColors.DATE_FACE),t.setAttribute("data-seltextcolor",this.DefaultColors.SELECTED_TEXT)},t.sizeChanged=function(){this.mModalPopup&&this.pickerOpen&&r.call(this),this.parentClass.sizeChanged.call(this)},t.setModalSize=function(){var t=e.call(this,this.mPickerStyle,!0);this.elem.style.height=this.clientElem.style.height=t.height+"px",this.elem.style.width=this.clientElem.style.width=t.width?t.width+"px":""},t.addPickerImage=function(t,e,i){if(t){var s=document.createElement("img");if(s.tabIndex=0,s.setAttribute("role","button"),s.setAttribute("aria-label",jGetOmnisString(this.form.inst,"ctl_date_"+(e?"time":"calendar")+"_button")),s.src="images/"+(e?"clock":"calendar")+this.form.inst.resSuffix+".png",s.alt="",s.className="datetimepopup-button",s.width=s.height=16,this.mCentreIcon&&(s.style.position="absolute",s.style.top="50%",s.style.marginTop="-8px"),s.onclick=this.mEventFunction,i)Object.keys(i).forEach((function(t){s.style[t]=i[t]}));t.appendChild(s),this.mCalendarSelectImage=s}},t.show=function(){this.mBeforeShowFunction&&this.mBeforeShowFunction(),this.pickerOpen||jOmnis.showModalDialog(),this.mModalPopup&&r.call(this),this.setProperty(eBaseProperties.visible,!0),this.selectedDate=new Date(+this.clientElem.getAttribute("data-value")),this.update(),this.mAfterShowFunction&&this.mAfterShowFunction(),this.pickerOpen=!0},t.hide=function(){this.mModalPopup&&a.call(this),this.setProperty(eBaseProperties.visible,!1),this.pickerOpen&&jOmnis.hideModalDialog(),this.pickerOpen=!1},t.onDocumentClick=function(t){if("none"!==this.elem.style.display){for(var e=this.getClientElem(),i=t.target;i&&i!==e&&i!==this.mCalendarSelectImage;)i=i.parentNode;i||this.close()}},t.close=function(){this.hide(),this.mOnCloseFunction&&this.mOnCloseFunction(),removeDialogMask.call(this)},t.handleEvent=function(t){var e=this.omnisObject||this,i=e.clientElem,s=t.target,r=i.id+"_ok",n=i.id+"_cancel";switch(t.type){case"pick":case"change":var o=i.getAttribute("data-value");return e.setCurrentDate(o)&&e.mPickerStyle===qt.PICKERSTYLES.calendar&&(e.mSelectFunction(e.mCurrDate),e.close()),!0;case"click":if(s===this.mCalendarSelectImage)return this.pickerOpen?this.hide():this.show();switch(s.id){case r:return e.submit();case n:return e.cancel()}break;case"keydown":switch(OmnisKeyboardHandler.getNormalizedEventKey(t)){case"Enter":return e.mPickerStyle===qt.PICKERSTYLES.calendar?void 0:e.submit();case"Escape":return e.cancel()}}return e.parentClass.handleEvent.call(e,t)},t.submit=function(){if(!this.mCurrDate){var t=this.clientElem.getAttribute("data-value");if(!t||!this.setCurrentDate(t))return!1}this.mSelectFunction(this.mCurrDate),this.close()},t.cancel=function(){this.mPickerStyle!==qt.PICKERSTYLES.calendar&&this.selectedDate&&this.mPicker.setDate(this.selectedDate),this.close()},t.setLocaleMaxStringWidths=function(){for(var t=0,e=0;e<7;e++)(t=Date.abbDayNames[e].length)>Kt.ABB_DAY_CHAR_WIDTH&&(Kt.ABB_DAY_CHAR_WIDTH=t)},t.setPosition=function(t,e,i){if(!this.mModalPopup){i||(i={top:0,left:0});var s=e.offsetHeight,r=i.top+s,n=i.left,o=window.scrollY,a=document.body.clientHeight+o,l=parseInt(this.clientElem.style.height);r+l>a&&(r=i.top-l>o?i.top-l:0);for(var h=this.form.mPositionInfo.getLayoutNames(),c=0;c<h.length;c++)this.cachedPositionInfo.updateLayoutInfo(h[c],"top",r),this.cachedPositionInfo.updateLayoutInfo(h[c],"left",n);this.elem.style.top=r+"px",this.elem.style.left=n+"px"}},t}(),Kt.ABB_DAY_CHAR_WIDTH=0,qt.DEFAULT_BACK_COLOR="rgb(236, 236, 236)",qt.DEFAULT_FACE_COLOR="rgb(255, 255, 255)",qt.DATEPICKERMODE={auto:0,calendar:1,picker:2},qt.DATEPICKERPOPUPSTYLE={auto:0,inline:1,modal:2};i(1817),i(2165),i(6992),i(1249),i(4603),i(8783),i(3948);var Gt=i(6213),Yt=i.n(Gt);function Xt(t){return Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xt(t)}function Jt(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var Qt=function(){function t(e,i,s,r){var n,o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.maskArray=t.parseOmnisMask(e),this.guide=s,this.maskedInputController=Yt()({inputElement:i,mask:function(e){if(r){var i=r(e);if("string"==typeof i){if(!(i.length>0))return o.maskArray=[],!1;o.maskArray=t.parseOmnisMask(i)}}return o.maskArray},guide:this.guide,showMask:!0});var a,l=i.value;function h(){a=i.selectionStart}function c(){requestAnimationFrame((function(){i.value===l&&i.selectionStart===a&&function(){var t="ctrl_invalid";i.classList.add(t),n&&(clearTimeout(n),n=null);n=setTimeout((function(){i.classList.remove(t)}),200)}(),l=i.value}))}h(),i.addEventListener("keydown",h),i.addEventListener("click",h),i.addEventListener("input",c),this.removeEventListeners=function(){i.removeEventListener("keydown",h),i.removeEventListener("click",h),i.removeEventListener("input",c)}}var e,i,s;return e=t,s=[{key:"parseOmnisMask",value:function(t){for(var e=[],i=0,s=!1;!s;)if(t[i])if('"'===t[i]){var r=t.indexOf('"',i+1);if(-1===r)throw new Error("$inputmask is invalid.");var n=t.substring(i+1,r);e.push("[".concat(n,"]")),i=r+1}else"\\"===t[i]?(e.push("\\"+t[i+1]),i+=2):(e.push(t[i]),i++);else s=!0;return e.map((function(t){switch(t){case"#":return/\d/;case"@":return/./;case"a":return/[A-Za-z]/;case"A":return/[A-Z]/;case"n":return/[0-9A-Za-z]/;case"N":return/[0-9A-Z]/;default:return 1===t.length?t:2===t.length&&"\\"===t[0]?t[1]:new RegExp(t)}}))}}],(i=[{key:"unmask",value:function(t){for(var e="",i=0;i<t.length;i++){if(this.guide&&"_"===t[i])return e;"object"!==Xt(this.maskArray[i])&&void 0!==this.maskArray[i]||(e+=t[i])}return e}},{key:"isValid",value:function(t){return this.guide?!t.includes("_"):t.length===this.maskArray.length}}])&&Jt(e.prototype,i),s&&Jt(e,s),t}();function Zt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function te(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Zt(Object(i),!0).forEach((function(e){ee(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Zt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function ee(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var ie="$::contenttip",se="$ispassword",re="$issingleline",ne="$systemkeys",oe="$keyeventdelay",ae="$linkedobject",le="$inputtype",he="$inputtypetouchonly",ce="$datepickermode",ue="$datepickerpopupstyle",de="$inputmaskguide",pe="$maskvaluevalid",me="$inputborderstyle",fe={evKeyPress:100},ge=["text","number","tel","email","url","date"],ve=0;ye.prototype=new a.U2;var be=te(te({},a.Mr),{},{FOCUS_BORDER:"FOCUS_BORDER"});function ye(){this.init_class_inst()}ye.prototype.DefaultColors=te(te({},a.U2.prototype.DefaultColors),{},ee({},be.FOCUS_BORDER,o.l1.primary)),ye.prototype.mAlwaysUseFocusBorder=!0;var Ce={UNDERLINED:"omnis-input--underlined",OUTLINED:"omnis-input--outlined",NOT_ACTIVE:"omnis-input--notactive",NOT_ENABLED:"omnis-input--notenabled"},_e=1,Ee=2;ye.ICONPADDING=26,ye.prototype.init_class_inst=function(){this.superclass=a.U2.prototype,this.superclass.init_class_inst.call(this),this.mCustomEvents=fe,this.baseClassName="omnis-input",this.mCanHaveDesignBorder=0!=jOmnis.mDesign,this.showDesignName=!0,this.mFocusStyle=eBaseFocusStyle.eNone},ye.prototype.init_ctrl_inst=function(t,e,i,s){this.mUsesInputBorderStyle=!0,this.mAutoDragData=!0,this.mHasDisplayFormat=!0,this.mHasDefaultDisableAppearanceProperty=!0,this.superclass.init_ctrl_inst.call(this,t,e,i,s),this.mHandleNumbers=!0,this.mValidateNumbers=!0,this.mHasSetInputType=!1,this.mHasAlign=!0;var r=this.getClientElem(),n=r.getAttribute("data-na");this.negAllowed=null==n||1*n!=0;var o=r.getAttribute("data-uc");this.upperCase=null!=o&&1*o!=0,this.upperCase&&(r.style.textTransform="uppercase");var l=r.getAttribute("data-ze");this.zeroEmpty=null!=l&&1*l!=0;var h=r.getAttribute("data-inputtype");this.mInputType=null==h?0:parseInt(h),this.mInputTypeTouchOnly="1"===r.getAttribute("data-ittouchonly"),this.mDatePickerMode=+r.getAttribute("data-datemode"),this.mDatePickerPopupStyle=+r.getAttribute("data-popupstyle"),ye.setBorderStyle.call(this),this.setProperty(a.W9.autocorrect,"1"===r.getAttribute("data-autocorrect")),this.setProperty(a.W9.autocapitalize,r.getAttribute("data-autocaps")),this.setProperty(a.W9.autocomplete,r.getAttribute("data-autocomplete"));var c=this.mEventFunction;if(new OmnisKeyboardHandler(this).addKeyListener(r,this.keyEvent),r.onblur=c,r.onchange=c,jOmnis.touchDevice&&(r.ontouchstart=c),r.onmouseup=c,r.onmousedown=c,this.mHasBlur=!0,jOmnis.inIE11OrLater()&&(this.mSendChangeOnOkCancel=!0),!this.isSingleLine()){if(!ve)if(jOmnis.inFirefox())ve=2;else{var u=document.createElement("TEXTAREA");u.style.borderWidth="",u.style.borderStyle="",u.style.webkitAppearance="textfield",document.body.appendChild(u),ve=(u.offsetHeight-u.clientHeight)/2,document.body.removeChild(u)}r.style.webkitAppearance="textfield",r.style.resize="none",this.getProperty(a.W9.horzscroll)?(r.style.whiteSpace="pre",r.style.wordWrap="normal",r.style.overflowWrap="normal"):(r.style.whiteSpace="pre-wrap",r.style.wordWrap="inherit",r.style.overflowWrap="break-word"),this.mAcceptsReturn=!0}if(this.applyPadding(),r.style.margin="0px",r.style.position="absolute",this.activeChanged(),!jOmnis.mDesign){var d=r.getAttribute("data-ctip");d&&(r.placeholder=d)}this.isSingleLine()&&(this.maskPattern=r.getAttribute("data-inputmask"),this.maskGuide="1"===r.getAttribute("data-imguide"),this.maskPattern&&(this.mValidateNumbers=!1,this.initMask())),this.form.requestScriptAvailNotify(this),s||this.update();var p=r.getAttribute("data-lo");p&&(this.linkedCtrlName=p,t.registerForFormBuilt(this));var m=e.getAttribute("data-css");return m&&jOmnis.addClass(e,m),r.style.setProperty("--input-text-color",r.style.color),!1},ye.prototype.delete_class_inst=function(){var t=this.getClientElem();jOmnisVal.removeObject(t),this.superclass.delete_class_inst.call(this)},ye.prototype.formBuilt=function(){jOmnis.mDesign||(this.rowCtrl?this.linkedCtrl=this.rowCtrl.getNamedControlFromRow(this.linkedCtrlName,this.rowNumber):this.linkedCtrl=this.form.findChildByName(this.linkedCtrlName),this.linkedCtrl&&!this.linkedCtrl.owner&&(this.setLinkedCtrlVisibility(!1,!0),this.linkedCtrl.owner=this)),this.superclass.formBuilt.call(this)},ye.prototype.setLinkedCtrlVisibility=function(t,e){var i=!1;this.linkedCtrl&&((!!(1*this.linkedCtrl.elem.getAttribute("data-visible"))!==t||e)&&(this.linkedCtrl.elem.setAttribute("data-visible",t?"1":"0"),this.linkedCtrl.visibilityChanged(),t&&(i=!0)));return i},ye.prototype.newLinkedLine=function(t,e){var i=this.getClientElem();i.value=this.linkedCtrl.getColumnData(t),this.doSetData(i.value),e&&this.closeLinkedCtrl()},ye.prototype.closeLinkedCtrl=function(t){if(this.setLinkedCtrlVisibility(!1),!t){var e=this;setTimeout((function(){e.getClientElem().focus()}),0)}},ye.prototype.sizeChanged=function(){this.superclass.sizeChanged.call(this),this.applyPadding();var t=this.getClientElem(),e=this.elem.style.height;t.style.height=parseInt(e.substr(0,e.indexOf("px")))+"px"},ye.prototype.applyPadding=function(){var t=this.getClientElem(),e=this.mHorizontalPadding,i=this.mVerticalPadding;t.style.paddingLeft=e+"px",t.style.paddingRight=this.mDatePicker?ye.ICONPADDING+e+"px":e+"px",this.isSingleLine()||(t.style.paddingTop=t.style.paddingBottom="".concat(i,"px"))},ye.prototype.updateCtrl=function(){this.doneUpdate=!0,-1===this.dataIndex&&(this.dataIndex=this.form.getDataIndex(this.dataName,this),this.newDataIndex(),this.setInputMode()),this.mDataIsFormatted=document.activeElement!==this.clientElem;var t=this.getDisplayFormat();if(!jOmnis.mDesign)var e=this.getData(null,null,null,null,this.zeroEmpty||jOmnis.mDesign?"sz":"s",this.mDataIsFormatted||!this.isNumber?t:null);null==e&&(e=""),e&&this.removeDesignName(this.elem),this.isNumber&&(this.zeroEmpty&&""===e||(e=jOmnis.numberToLocaleAndDps(e,this.mDataIsFormatted&&null!=t&&0!==t.length?null:this.numberDps)));var i=this.getClientElem();if(i.maxLength=gCliMaxcharlen,!t||!t.length){var s=this.form.getDefn(this.dataIndex);s&&eOmnisDataTypes.fftCharacter===s[1]&&(i.maxLength=s[3])}jOmnisVal.mDisableValidation=!0,i.value!==e&&(this.inputMask?this.updateMask(e):i.value=e),jOmnisVal.mDisableValidation=!1,jOmnisVal.setCurrentValue(i),this.mSendChangeOnOkCancel&&(this.mLastValue=i.value+"")},ye.prototype.setInputMode=function(){var t=this.form.getDefn(this.dataIndex);if(t){var e="";switch(t[1]){case eOmnisDataTypes.fftInteger:this.negAllowed||(e="numeric");break;case eOmnisDataTypes.fftNumber:this.negAllowed||(e="decimal");break;case eOmnisDataTypes.fftCharacter:switch(ge[this.mInputType]){case"email":e="email";break;case"url":e="url";break;case"tel":e="tel";break;default:e="text"}break;default:e="text"}this.clientElem.setAttribute("inputmode",e)}},ye.prototype.getNotEnabledElem=function(){return this.elem},ye.prototype.handleEvent=function(t){var e,i=this;switch(t.type){case"change":this.valueChanged(t);break;case"blur":if(jOmnisEffects.removeFocusClass(this.elem),!this.isEnabled())break;if(this.mDatePicker&&this.handleDatePickerEvent(t),e=this.getClientElem(),jOmnis.savedFocus===e)break;if(this.mHasSetInputType=!1,this.isSingleLine()&&"password"!==e.type&&(e.type="text",e.pattern="[^]*"),jOmnis.overlay&&jOmnis.overlayForm===this.form&&this===this.form.alwaysEnabledObject)return!0;if(this.mTempAlwaysEnabled&&this.form.clearTempAlwaysEnabled(this),this.linkedCtrl){var s=jOmnis.getNextBlurElem(t);(s&&s.omnisObject===this.linkedCtrl||jOmnis.savedFocus===this.getClientElem())&&(this.mKeepLinkedCtrlVis=!0),this.mKeepLinkedCtrlVis?this.mKeepLinkedCtrlVis=!1:this.setLinkedCtrlVisibility(!1)}return this.superclass.handleEvent.call(this,t);case"focus":if(this.inputMask&&this.maskGuide&&this.isClicked&&setTimeout((function(){i.clientElem.setSelectionRange(0,0)})),jOmnisEffects.addFocusClass(this.elem),!this.isEnabled())break;this.mHasSetInputType||this.applyInputType();break;case"touchstart":this.isActive()&&this.applyInputType();break;case"mousedown":this.isClicked=!0;break;case"mouseup":this.isClicked=!1}return this.superclass.handleEvent.call(this,t)},ye.prototype.handleDatePickerEvent=function(t){var e=this instanceof ye?this:this.parentCtrl;switch(t.type){case"blur":var i=t.relatedTarget||t.explicitOriginalTarget||document.activeElement;if(i)for(;i&&i.parentNode;){if(i===e.elem||e.mDatePicker&&i===e.mDatePicker.clientElem)return;i=i.parentNode}e.mDatePicker&&e.mDatePicker.destroy();break;case"keyup":var s=OmnisKeyboardHandler.getNormalizedEventKey(t);"Enter"!==s&&" "!==s||(t.preventDefault(),e.mDatePicker.show())}},ye.prototype.usesDatePicker=function(){return!!this.mDatePicker},ye.prototype.applyInputType=function(){this.mHasSetInputType=!0;var t=this.getClientElem();if((!this.mInputTypeTouchOnly||jOmnis.touchDevice)&&"password"!==t.type){var e=ge[this.mInputType];if("date"===e){if(!this.mDatePicker){var i=this.form.getDefn(this.dataIndex);if(!i)return void console.log("Edit control error: $dataname must be set when $inputtype = kJSInputTypeDate ("+this.objName+")");var s=i[1],r=i[2],n=this,o=this.getData();o&&(o instanceof omnis_date?o=o.toJavaScriptDate():"string"==typeof o&&(o=new Date(Date.parse(o))));var a=this.getDisplayFormat(null,!0);this.mDatePicker=new Kt(this.form,this.clientElem,{disableSystemFocus:n.mDisableSystemFocus,omnisSubtype:r,dateFormat:a,dateFormatType:n.mDateFormatType,initialPickerValue:o,addToFrame:!0,centreIcon:!0,customImgStyleProps:{right:"5px",tabIndex:0},forcePickerMode:n.mDatePickerMode,popupStyle:n.mDatePickerPopupStyle,onSelect:function(t){var e=s===eOmnisDataTypes.fftDate;e&&(t.dateComps=n.form.getDateComponents(n.dataIndex,null)),t=new omnis_date(t),n.setData(e?t:t.toString(),null,null,null,e?null:"s",a,!0),n.canSendEvent(eBaseEvent.evAfter)&&n.sendEvent(eBaseEvent.evAfter)},beforeShow:function(){n.calendarOpen=!0;var t=n.getData();t&&(t instanceof omnis_date?t=t.toJavaScriptDate():"string"==typeof t&&(t=new Date(Date.parse(t)))),n.mDatePicker.setCurrentDate(t),n.mDatePicker.updatePickerCurrentDate();var e=n.elem.getBoundingClientRect(),i=e.top+window.pageYOffset,s=e.right-parseInt(this.elem.style.width)+window.pageXOffset;s<0&&(s=0),this.setPosition(n,n.elem,{top:i,left:s})},afterShow:function(){this.mDisableSystemFocus=!0;var t=this.mPickerStyle===qt.PICKERSTYLES.calendar?this.clientElem.querySelector("tbody [tabindex='0']"):this.clientElem.querySelector("[tabindex='0']");t&&t.focus()},onClose:function(){n.calendarOpen=!1,jOmnis.mobileDevice||n.clientElem.focus()}}),this.mDatePicker.destroy=function(){this.mCalendarSelectImage.removeEventListener("blur",this.parentCtrl.handleDatePickerEvent),this.mCalendarSelectImage.removeEventListener("keyup",this.parentCtrl.handleDatePickerEvent),this.delete_class_inst(),this.parentCtrl.mDatePicker=null,this.parentCtrl.sizeChanged()}}return this.sizeChanged(),this.mDatePicker.parentCtrl=this.mDatePicker.mCalendarSelectImage.parentCtrl=this,this.mDatePicker.mCalendarSelectImage.addEventListener("blur",this.handleDatePickerEvent),void this.mDatePicker.mCalendarSelectImage.addEventListener("keyup",this.handleDatePickerEvent)}"number"===e&&((i=this.form.getDefn(this.dataIndex))&&i[1]===eOmnisDataTypes.fftInteger&&(t.pattern=this.negAllowed?"^-?[0-9]*":"[0-9]*"),jOmnis.inFirefox()&&(e="text")),!this.inputMask||"number"!==e&&"email"!==e||(e="text");try{t.type=e}catch(t){}}},ye.prototype.valueChanged=function(t){var e=jOmnis.getEventCurrentTarget(t).value;if(this.mSendChangeOnOkCancel){if(null!=this.mLastValue&&e===this.mLastValue)return;this.mLastValue=e+""}this.doSetData(e),this.canSendEvent(eBaseEvent.evAfter)&&this.sendEvent(eBaseEvent.evAfter)},ye.prototype.keyEvent=function(t){if(this.canSendEvent(fe.evKeyPress,!0)){this.mKeys||(this.mKeys=[]),this.mTempAlwaysEnabled||this.form.setTempAlwaysEnabled(this);var e=this.getClientElem();if(t.char||t.systemKey||t.changesValue){t.systemKey===OmnisKeyboardHandler.eOmnisKeyCodes.ESCAPE&&this.linkedCtrl&&this.closeLinkedCtrl();var i=t.systemKey===OmnisKeyboardHandler.eOmnisKeyCodes.DOWN_ARROW||t.systemKey===OmnisKeyboardHandler.eOmnisKeyCodes.UP_ARROW;if(this.linkedCtrl&&(t.changesValue||i)){var s=this.linkedCtrl.firstLine(),r=this.setLinkedCtrlVisibility(!0,!1,i&&s);if(i){this.mKeepLinkedCtrlVis=!0;var n=this.linkedCtrl.getData("#L");0===n&&(n=s)&&(this.linkedCtrl.setData(n,"#L"),this.linkedCtrl.update(null,null,null,!0));var o=this;if(setTimeout((function(){o.linkedCtrl.getClientElem().focus()}),0),e.value=this.linkedCtrl.getColumnData(n),this.doSetData(e.value),!r&&(t.systemKey===OmnisKeyboardHandler.eOmnisKeyCodes.UP_ARROW||t.systemKey===OmnisKeyboardHandler.eOmnisKeyCodes.DOWN_ARROW))return}}if(t.systemKey!==OmnisKeyboardHandler.eOmnisKeyCodes.ENTER||this.isSingleLine()||(t.changesValue=!0),(!t.systemKey||t.changesValue||"1"===e.getAttribute("data-sk"))&&(this.mKeys.push([t.systemKey,t.char,t.modifiers]),!this.mKeyEventTimer)){var a=e.getAttribute("data-ked");a=a?1*a:0,o=this,this.mKeyEventTimer=setTimeout((function(){o.doSetData(e.value,!0);var t=new omnis_raw_list(!1,o.form);t.lstDef=[].concat([["systemKey",eOmnisDataTypes.fftInteger,0,0,1,0],["key",eOmnisDataTypes.fftCharacter,0,255,2,0],["modifiers",eOmnisDataTypes.fftInteger,0,0,3,0]]),t.lstData=[].concat(o.mKeys),o.eventParamsAdd("pKeyList",t),o.sendEvent("evKeyPress"),o.mKeyEventTimer=null,o.mKeys.length=0}),a)}}}},ye.prototype.doSetData=function(t,e){this.isNumber?t=this.inputMask?this.inputMask.unmask(t):jOmnis.numberFromLocale(t,this.getClientElem()):this.upperCase&&(t=t.toUpperCase()),this.doneUpdate=!1,this.setData(t,null,null,null,"s",this.getDisplayFormat(),!e),this.doneUpdate||!this.isNumber||e||this.update()},ye.prototype.isSingleLine=function(){return"TEXTAREA"!==this.clientElem.tagName},ye.prototype.getProperty=function(t){var e=this.getClientElem();switch(t){case ie:return e.placeholder;case se:return"password"===e.type;case re:return this.isSingleLine();case a.W9.backalpha:return this.alphaFromCssColor(e.style.backgroundColor);case a.W9.negallowed:return this.negAllowed;case a.W9.uppercase:return this.upperCase;case a.W9.zeroempty:return this.zeroEmpty;case ne:return"1"===e.getAttribute("data-sk");case oe:var i=e.getAttribute("data-ked");return i?1*i:0;case ae:var s=e.getAttribute("data-lo");return s||"";case le:return this.mInputType;case he:return this.mInputTypeTouchOnly;case ce:return this.mDatePickerMode;case ue:return this.mDatePickerPopupStyle;case a.W9.autocomplete:return this.mAutoComplete;case a.W9.autocorrect:return this.mAutoCorrect;case a.W9.autocapitalize:return this.mAutoCapitalize;case a.W9.inputmask:return this.maskPattern||"";case de:return!!this.maskGuide;case pe:return!!this.inputMask&&this.inputMask.isValid(e.value);case me:return this.mBorderStyle}return this.superclass.getProperty.call(this,t)},ye.prototype.getCanAssign=function(t){switch(t){case ie:case se:case a.W9.negallowed:case a.W9.uppercase:case a.W9.zeroempty:case ne:case oe:case a.W9.autocomplete:case a.W9.autocorrect:case a.W9.autocapitalize:case a.W9.horzPadding:case ce:case ue:case me:return!0;case a.W9.inputmask:return this.isSingleLine();case de:return!!this.maskPattern;case re:case ae:case pe:return!1;case le:case he:return"password"!==this.getClientElem().type;case a.W9.vertPadding:return!this.isSingleLine()}return this.superclass.getCanAssign.call(this,t)},ye.prototype.setProperty=function(t,e){if(!this.getCanAssign(t))return!1;var i,s;switch(t){case ie:return jOmnis.mDesign||("string"!=typeof e&&(e=""),this.clientElem.placeholder=e),!0;case se:return(s=this.getClientElem()).type=1*e!=0?"password":"text",!0;case a.W9.negallowed:return s=this.getClientElem(),this.negAllowed=1*e!=0,jOmnisVal.setNegAllowed(s,this.negAllowed),this.setInputMode(),!0;case a.W9.uppercase:return s=this.getClientElem(),this.upperCase=1*e!=0,s.style.textTransform=this.upperCase?"uppercase":"none",!0;case a.W9.zeroempty:return this.zeroEmpty=1*e!=0,this.update(),!0;case ne:return this.getClientElem().setAttribute("data-sk",1*e!=0?"1":"0"),!0;case oe:var r=1*e;return r<0?r=0:r>2e3&&(r=2e3),this.getClientElem().setAttribute("data-ked",r),!0;case ae:return alert("$linkedobject cannot be set at runtime"),!0;case le:return this.mInputType=e,!0;case he:return this.mInputTypeTouchOnly=e,!0;case ce:return this.mDatePickerMode=+e,!0;case ue:return this.mDatePickerPopupStyle=+e,!0;case a.W9.autocorrect:return this.mAutoCorrect=e,this.clientElem.setAttribute("autocorrect",e?"on":"off"),!0;case a.W9.autocomplete:return this.mAutoComplete=e,e?this.clientElem.setAttribute("autocomplete",this.mAutoComplete):this.clientElem.removeAttribute("autocomplete"),!0;case a.W9.autocapitalize:return this.mAutoCapitalize=e||0,this.clientElem.setAttribute("autocapitalize",this.AUTO_CAPITALIZE_VALUES[this.mAutoCapitalize]),!0;case a.W9.inputmask:if(this.maskPattern="string"==typeof e?e:"",""===this.maskPattern){if(this.inputMask){this.mValidateNumbers=!0;var n=this.form.getDefn(this.dataIndex);n&&jOmnisVal.addObject(this.clientElem,n[1],n[2],this.negAllowed),this.unbindMask()}}else this.inputMask?this.inputMask.maskArray=Qt.parseOmnisMask(this.maskPattern):(this.mValidateNumbers=!1,jOmnisVal.removeObject(this.clientElem),this.initMask());return!0;case de:return this.maskGuide=!!e,this.unbindMask(),this.initMask(),!0;case me:return this.mBorderStyle=+e||_e,ye.setBorderStyle.call(this),this.setBorderRadius(this.clientElem,this.getProperty(a.W9.borderradius)),!0;case a.W9.defaultDisabledAppearance:return i=this.superclass.setProperty.call(this,t,e),this.setDisabledAppearance(),i;case a.W9.backcolor:case a.W9.textcolor:return i=this.superclass.setProperty.call(this,t,e),this.clientElem.style.setProperty("--input-text-color",this.clientElem.style.color),i;default:i=this.superclass.setProperty.call(this,t,e)}return i},ye.prototype.horzPaddingChanged=function(){this.sizeChanged()},ye.prototype.vertPaddingChanged=function(){this.sizeChanged()},ye.setBorderStyle=function(){this.mBorderStyle===_e?jOmnis.addClass(this.elem,Ce.OUTLINED):jOmnis.removeClass(this.elem,Ce.OUTLINED);var t=this.mBorderStyle===_e;jOmnis.addClass(this.elem,t?Ce.OUTLINED:Ce.UNDERLINED),jOmnis.removeClass(this.elem,t?Ce.UNDERLINED:Ce.OUTLINED)},ye.prototype.getFocusBorderColor=function(){return this.getTheme().getColorString(this.mDisableSystemFocus?this.DefaultColors.FOCUS_BORDER:this.DefaultColors.SYSTEM_FOCUS)},ye.removeInputFocusBorderElem=function(){this.focusBorder&&this.focusBorder.remove(),this.focusBorder=null},ye.getBorderRadiusString=function(t,e){if(t===Ee){var i="0",s=e.split("-");switch(s.length){case 0:break;case 1:s.push(s[0],i,i);break;case 2:s.push(i,i);break;case 3:s.pop(),s.push(i,i);break;case 4:s.pop(),s.pop(),s.push(i,i)}e=s.join("-")}return e},ye.prototype.setBorderRadius=function(t,e){void 0===this.mBorderStyle&&(this.mBorderStyle=+this.clientElem.getAttribute("data-borderstyle")||_e),e=ye.getBorderRadiusString(this.mBorderStyle,e),this.superclass.setBorderRadius(t,e)},ye.prototype.activeChanged=function(){var t=this.getClientElem(),e=this.isActive();t.readOnly=e&&!this.isEnabled(),t.disabled=!e,this.setDisabledAppearance(),this.superclass.activeChanged.call(this)},ye.prototype.setDisabledAppearance=function(){var t=this.clientElem;function e(){jOmnis.removeClass(t,[Ce.NOT_ACTIVE,Ce.NOT_ENABLED])}!this.mHasDefaultDisableAppearanceProperty||this.mDefaultDisabledAppearance?this.isActive()?this.isEnabled()?e():(jOmnis.addClass(t,Ce.NOT_ENABLED),jOmnis.removeClass(t,Ce.NOT_ACTIVE)):jOmnis.addClass(t,[Ce.NOT_ACTIVE,Ce.NOT_ENABLED]):e()},ye.prototype.enabledChanged=function(){this.getClientElem().readOnly=this.isActive()&&!this.isEnabled(),this.setDisabledAppearance(),this.superclass.enabledChanged.call(this)},ye.prototype.updateOnFocusChange=function(t){var e=this.getClientElem();if(t&&this.isSingleLine())var i=e.selectionStart,s=0===i&&e.selectionEnd===e.value.length;this.update();try{s?e.select():void 0!==i&&(e.selectionStart=e.selectionEnd=i)}catch(t){}},ye.prototype.getDragValue=function(){var t=this.getClientElem(),e=t.selectionStart,i=t.selectionEnd;return"number"==typeof e&&"number"==typeof i?t.value.substring(e,i):""},ye.prototype.getAriaDisabledElem=function(){return null},ye.prototype.$setselection=function(t,e){var i=this.getClientElem();if(void 0===e&&(e=i.maxLength),(t=+t-1)<0&&(t=0),(e=+e-1)<0&&(e=0),t>e){var s=t;t=e,e=s}return i.focus(),i.setSelectionRange(t,e),i.value.substring(t,e)},ye.prototype.getDisplayFormat=function(t,e){var i=this.superclass.getDisplayFormat.call(this,t);return!e&&i&&(i=i.replace(/([()])+/g,"")),i},ye.prototype.initMask=function(){var t=this;if(!jOmnis.mDesign){var e=this,i=this.clientElem;this.inputMask=new Qt(this.maskPattern,i,this.maskGuide,(function(t){return e.processMaskFunc?e.processMaskFunc(t):null})),this.inputMask.maskedInputController.destroy(),this.maskInputListener=function(e){t.updateMask(e.target.value)},i.addEventListener("input",this.maskInputListener)}},ye.prototype.unbindMask=function(){jOmnis.mDesign||(this.inputMask.maskedInputController.destroy(),this.inputMask.removeEventListeners(),this.inputMask=null,this.clientElem.removeEventListener("input",this.maskInputListener))},ye.prototype.scriptAvail=function(){var t=jOmnis.getMethod(this,"$processmask",-1);if(t){var e=this;this.processMaskFunc=function(i){return e[t](i)}}},ye.prototype.updateMask=function(t){this.upperCase&&(t=t.toUpperCase()),this.inputMask.maskedInputController.textMaskInputElement.update(t)},ye.prototype.focus=function(){try{this.clientElem.focus(),this.clientElem.select()}catch(t){}},ye.prototype.resetAppearance=function(){this.elem&&jOmnisEffects.removeFocusClass(this.elem)};var we,ke=ye;function Te(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function Se(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Te(Object(i),!0).forEach((function(e){xe(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Te(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function xe(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var De="$defaultline",Oe="$defaulttext",Ae="$listcolumn",Pe="$::listheight",Ie="$selectedlinecolor",Le="$selectedlinetextcolor",je="$seldataname",Ne="$extraspace",Be="$inputborderstyle";Ce.BUTTON_OPEN="ctrl-drop-button-open",Ce.SELECTED_LINE="selected-line",Me.prototype=new a.U2,Me.prototype.mAlwaysUseFocusBorder=!0,Me.prototype.setFillColor=!0,Me.prototype.preventDroplistOverlay=!1;var Re=Se(Se({},a.Mr),{},{BORDER:"BORDER",SELECTED_LINE:"SELECTED_LINE",SELECTED_LINE_TEXT:"SELECTED_LINE_TEXT",FOCUS_BORDER:"FOCUS_BORDER"});function Me(){this.init_class_inst()}Me.prototype.DefaultColors=Se(Se({},a.U2.prototype.DefaultColors),{},(xe(we={},Re.BORDER,o.l1.border),xe(we,Re.SELECTED_LINE,o.l1.primary),xe(we,Re.SELECTED_LINE_TEXT,o.l1.primaryText),xe(we,Re.FOCUS_BORDER,o.l1.primary),we)),Me.prototype.init_class_inst=function(){this.superclass=a.U2.prototype,this.superclass.init_class_inst.call(this),this.useDefault=!1,this.defaultText=[],this.defaultLine=1,this.mListColumn=1,this.listHeight=5,this.selectedLine=0,this.lastMousePos={x:0,y:0},this.lastMouseOverLine=0,this.componentNeedsFocus=!1,this.clientHasFocus=!1,this.dropListTextWidth=0,this.dropList=null,this.usesTouchScroll=!1,this.baseClassName="omnis-droplist",this.activeReplacesEnabled=!0,this.showDesignName=!0,this.mFocusStyle=eBaseFocusStyle.eNone},Me.prototype.delete_class_inst=function(){null!=this.iscroll&&this.iscroll.destroy(),this.documentClick&&(document.removeEventListener("mousedown",this.documentClick,!1),jOmnis.touchDevice&&document.removeEventListener("touchstart",this.documentClick,!1)),null!=this.dropList&&(jOmnis.touchDevice?this.form.inst.elem.removeChild(this.dropList):document.body.removeChild(this.dropList)),this.superclass.delete_class_inst.call(this)},Me.prototype.init_ctrl_inst=function(t,e,i,s){this.mDefaultDisabledAppearance=!0,this.mUsesInputBorderStyle=!0,this.mHasDisplayFormat=!0,this instanceof ctrl_combobox||(this.mHandleNumberColumn=!0),this.superclass.init_ctrl_inst.call(this,t,e,i,s);var r=this.getClientElem(),n=r.getAttribute("data-defaulttext");this.mListColumn=r.getAttribute("data-listcolumn"),this.listHeight=r.getAttribute("data-listheight"),this.defaultText=n.split(","),this.defaultLine=parseInt(r.getAttribute("data-defaultline")),this.selectedLineColor=+r.getAttribute("data-selectedlinecolor"),this.selectedLineTextColor=+r.getAttribute("data-selectedlinetextcolor"),this.selDataName=r.getAttribute("data-seldataname"),this.mExtraSpace=+r.getAttribute("data-es"),ke.setBorderStyle.call(this),r.setAttribute("unselectable","on"),r.setAttribute("aria-expanded","false"),this.mUserCss=e.getAttribute("data-css"),null==this.mUserCss&&(this.mUserCss="");var o=this.mEventFunction;return r.onkeydown=o,r.onkeyup=o,r.onclick=o,this.documentClick=this.makeFunction("onDocumentClick",1),document.addEventListener("mousedown",this.documentClick,!1),jOmnis.touchDevice&&document.addEventListener("touchstart",this.documentClick,!1),this instanceof ctrl_combobox||this.getData(),this.doInitialLayout(),this.updateData(),this.showDropList(!1),jOmnis.mobileDevice||this.isCombo||(r.onkeypress=o),this.activeChanged(),!1},Me.prototype.updateData=function(){if(!jOmnis.mDesign){this.listName=this.getListName(),this.setListData();var t=this.getEditValue(this.mInUpdateListSelection||this.isCombo&&this.isDroplistOpen());this.updateSelDataNameValue(t);var e=this.edit;this.isCombo?(e.value=jOmnis.stripStyles(t),jOmnisVal.setCurrentValue(e)):e.innerHTML=jOmnis.escapeHTML(t,!0)}},Me.prototype.showDropList=function(t,e){var i=this.getClientElem(),s=this.dropList;if(s){if(s.style.display=t?"block":"none",this.setClientCss(t),this.mAcceptsEscape=t,this.mAcceptsReturn=t,t){var r=this.getLineCount();if(r>0){var n,o=s.firstChild;if(r<=this.listHeight){var a=o.children[r-1];s.style.overflow="hidden",n=a?a.offsetTop+a.offsetHeight:0,s.style.height=n+"px"}else{s.style.overflow="hidden";var l=o.children[0].clientHeight*this.listHeight,h=o.children[0],c=o.children[this.listHeight-1],u=c.offsetTop+c.offsetHeight-h.offsetTop;l<u&&(l=u),n=l,s.style.height=l+"px",this.iscroll||(s.style.overflow="auto")}var d=jOmnis.touchDevice?this.form.inst.elem:null,p=jOmnis.getElemPosRelativeToAncestor(i,d);this.mDroppedUp=!1,jStyles.setElem(i);var m=jStyles.getInt("border-top-width"),f=p.y-n-m,g=p.y+p.h;g-document.body.scrollTop+n+m>document.documentElement.clientHeight&&f>=document.body.scrollTop&&(this.mDroppedUp=!0,g=f),jStyles.done(),s.style.top=g+"px";var v=s.offsetWidth;if(v+p.x-document.body.scrollLeft>document.documentElement.clientWidth){var b=p.x+p.w-v;b<0&&(b=v>=document.documentElement.clientWidth?0:document.documentElement.clientWidth-v),s.style.left=b+"px"}i.setAttribute("aria-expanded","true")}}t||(this.showHideOverlay(!1),this.setLineSelected(this.getLineNumber()),i.setAttribute("aria-expanded","false")),this.openCloseButton(t)}},Me.prototype.openCloseButton=function(t){t?jOmnis.addClass(this.button,Ce.BUTTON_OPEN):jOmnis.removeClass(this.button,Ce.BUTTON_OPEN)},Me.prototype.isDroplistOpen=function(){return this.dropList&&"block"==jOmnis.getStyle(this.dropList,"display",!1)},Me.prototype.setClientCss=function(t){var e=this.getClientElem();t||this.mDisableSystemFocus?(jOmnis.removeClass(e,"autoFocus"),jOmnis.addClass(e,"noFocus")):(jOmnis.removeClass(e,"noFocus"),jOmnis.addClass(e,"autoFocus"))},Me.prototype.updateCtrl=function(){this.updateData(),this.updateLayout(),this.dropList&&(this.layoutDropList(),this.isDroplistOpen()||this.showDropList(!1))},Me.prototype.handleEvent=function(t){var e,i=t.target,s=this.getClientElem();function r(){for(var t;i&&i!=s&&!jOmnis.hasClass(i,"ctrl-drop-list")&&!(t=i.getAttribute("value"));)i=i.parentNode;return t}var n=this;switch(t.type){case"click":case"tap":if(!this.isEnabled())return;if(function(){var t=i;if(n.isCombo&&!n.isButtonClick(t))return!1;for(;t&&t!=n.elem;){if(t==s)return!0;t=t.parentNode}return!1}())return this.handleDownEvent(i),!0;if("SELECT"==i.tagName)e=i.selectedIndex+1,this.setLineNumber(e);else{var o=r();o&&(e=parseInt(o),this.updateListSelection(e,!1,!0),this.showDropList(!1,!0),this.isCombo?this.focusEdit():this.focusClient())}break;case"mouseover":var a=this.getEventMousePosition(t);(o=r())&&(this.lastMouseOverLine=parseInt(o),this.lastMousePos.x==a.x&&this.lastMousePos.y==a.y||(this.selectedLine!=this.lastMouseOverLine&&this.lineIsVisible(this.lastMouseOverLine)&&this.setLineSelected(this.lastMouseOverLine),this.lastMousePos=a));break;case"keydown":this.handleKey(t,!1);break;case"keyup":this.handleKey(t,!0);break;case"keypress":var l=OmnisKeyboardHandler.getNormalizedEventKey(t);"Tab"!==l&&(this.continueKeySearch(l),jOmnis.stopEventNow(t));break;case"blur":return this.ignoreBlur||jOmnisEffects.removeFocusClass(this.elem),this.ignoreBlur=!1,this.clientHasFocus=!1,this.superclass.handleEvent.call(this,t);case"mousedown":this.dropList&&this.dropList.contains(i)?t.preventDefault():this.isCombo&&i!==this.edit||(this.ignoreBlur=!0);break;case"mouseup":this.ignoreBlur=!1;break;case"focusin":jOmnisEffects.addFocusClass(this.elem);break;case"focus":jOmnisEffects.addFocusClass(this.elem),this.componentNeedsFocus=!1,this.clientHasFocus=!0;default:return this.superclass.handleEvent.call(this,t)}return!0},Me.prototype.isButtonClick=function(t){return t.closest(".ctrl-drop-button")===this.button},Me.prototype.getProperty=function(t){switch(t){case De:return this.defaultLine;case Oe:return this.defaultText.join(",");case Ae:return this.mListColumn;case Pe:return this.listHeight;case Ie:return null==this.selectedLineColor?-1:this.selectedLineColor;case Le:return null==this.selectedLineTextColor?-1:this.selectedLineTextColor;case je:return this.selDataName;case Ne:return this.mExtraSpace;case Be:return this.mBorderStyle}return this.superclass.getProperty.call(this,t)},Me.prototype.getCanAssign=function(t){switch(t){case De:case Oe:case Ae:case Pe:case Ie:case Le:case eBaseProperties.horzPadding:case je:case Ne:case Be:return!0}return this.superclass.getCanAssign.call(this,t)},Me.prototype.setProperty=function(t,e){var i=!0;switch(t){case De:if(this.defaultLine=e,!this.useDefault)return!0;break;case Oe:if(this.defaultText=e.split(","),!this.useDefault)return!0;break;case Ae:this.mListColumn=e,-1!=this.dataIndex&&this.newDataIndex();break;case Pe:this.listHeight=e;break;case Ie:var s=1*e;this.selectedLineColor=-1==s?null:s;break;case Le:s=1*e,this.selectedLineTextColor=-1==s?null:s;break;case eBaseProperties.cssclassname:return this.superclass.setProperty.call(this,t,e),this.mUserCss=this.elem.getAttribute("data-css"),this.setClientCss(!!this.dropList&&"block"==this.dropList.style.display),this.update(),!0;case je:this.selDataName=e,this.selDataIndex=null;break;case Ne:var r=this.mExtraSpace;this.mExtraSpace=parseInt(e),this.mExtraSpace<0&&(this.mExtraSpace=0),i=!1,r!==this.mExtraSpace&&this.dropList&&this.isDroplistOpen()&&(this.drawDropList(),this.layoutDropList(),this.showDropList(!0,!1));break;case Be:return this.mBorderStyle=+e||_e,ke.setBorderStyle.call(this),ke.removeInputFocusBorderElem.call(this),this.setBorderRadius(this.clientElem,this.getProperty(eBaseProperties.borderradius)),!0;case eBaseProperties.backcolor:var n=this.superclass.setProperty.call(this,t,e);return this.updateIconColor(),n;case eBaseProperties.textcolor:var o=this.superclass.setProperty.call(this,t,e);return this.updateIconColor(),o;default:i=!1}return i?(this.update(),!0):this.superclass.setProperty.call(this,t,e)},Me.prototype.horzPaddingChanged=function(){this.update()},Me.prototype.updateIconColor=function(){o.Q2.SetThemedIconColor(this.button.buttonSVG,this.clientElem.style.color)},Me.prototype.sizeChanged=function(){this.superclass.sizeChanged.call(this),this.updateLayout(),this.layoutDropList()},Me.prototype.fontChanged=function(){this.superclass.fontChanged.call(this),this.mFirst||(this.showDropList(!1),this.updateLayout(),this.layoutDropList())},Me.prototype.activeChanged=function(){this.superclass.activeChanged.call(this);var t=this.getClientElem(),e=this.button,i=this.isActive();ke.prototype.setDisabledAppearance.call(this),e.disabled===i&&(i?t.tabIndex=0:(this.closeDropList(),t.tabIndex=-1))},Me.prototype.enabledChanged=function(){ke.prototype.setDisabledAppearance.call(this),this.superclass.enabledChanged.call(this)},Me.prototype.touchCanStartScroll=function(t){return this.superclass.touchCanStartScroll(t)},Me.prototype.visibilityChanged=function(){var t=this.superclass.visibilityChanged.call(this);return this.getTrueVisibility()&&this.update(),t},Me.prototype.setTabIndex=function(t){return this.getClientElem().tabIndex=-1!=t&&this.isActive()?0:-1,t},Me.prototype.doInitialLayout=function(){var t=this.getClientElem();this.isCombo=this instanceof ctrl_combobox;var e=document.createElement(this.isCombo?"input":"div");e.id=t.id+"_edit",jOmnis.addClass(e,"ctrl-drop-edit"),e.style.boxSizing="border-box",e.tabIndex=-1,e.style.background="transparent",this.isCombo||(e.readOnly=!0),t.setAttribute("role",this.isCombo?"combobox":"listbox");var i=document.createElement("div");jOmnis.addClass(i,"ctrl-drop-button"),i.buttonSVG=jIcons.replaceOrAddToElem(i,"images/keyboard_arrow_down.svg?",null,{width:24,height:24,viewBox:"0 0 24 24"}),this.button=i,this.updateIconColor();var s=this.mEventFunction;if(t.onblur=s,t.addEventListener("focusin",s),t.addEventListener("focusout",s),e.onmousedown=s,e.onmouseup=s,t.appendChild(e),t.appendChild(i),this.edit=e,this.isCombo){e.onfocus=s,e.addEventListener("blur",(function(){t.tabIndex=0}));var r=t.id.lastIndexOf("client");e.id=t.id.substr(0,r)+"edit",e.omnisObject=this,(jOmnis.inFirefox()||jOmnis.inOpera())&&(i.onfocus=s)}this.mNeedFontHeight=!0,this.mFirst=!0,this.fontChanged(),this.mFirst=!1},Me.prototype.updateLayout=function(){var t=this.getClientElem(),e=this.button,i=jOmnis.getTotalWidth(e),s=t.clientWidth,r=t.clientHeight,n=s-i;e.style.left=n+"px";var o=this.edit,a=n;o.style.width=a-2*this.mHorizontalPadding+"px",this.positionEditVert();var l=r;e.style.height=l+"px";var h=e.buttonSVG.height.baseVal.value;e.buttonSVG.style.top=(l-h)/2+"px",o.style.marginLeft=this.mHorizontalPadding+"px",o.style.marginRight=this.mHorizontalPadding+"px"},Me.prototype.showHideOverlay=function(t){this.preventDroplistOverlay||(t?this.overlay||(this.overlay=jOmnis.overlayManager.addOverlay(this.form.inst.elem,this.form,"menu_overlay",OmnisOverlayManager.MENU_OVERLAY_CLASS,!0)):(jOmnis.overlayManager.removeOverlay("menu_overlay",this.form,!0),this.overlay=null))},Me.prototype.drawDropList=function(){this.showHideOverlay(!0);var t=this.getClientElem(),e=this.getLineNumber(),i=this.getLineCount(),s="dropList_"+this.objNumber,r=this.mHorizontalPadding,n='<div id="'+s+'" style="width:100%">';this.selectedLine=0;var a="";this.lastMouseOverLine=0;for(var l=this.mFontHeight+this.mExtraSpace,h=0;h<i;h++){var c=h+1,u=this.getColumnData(h+1,this.mListColumn);u=null==u||""==u||(u+"").match(/^[ ]+$/)?"&nbsp;":jOmnis.escapeHTML(u,!0);var d=s+"-"+(h+1);n+='<div role="option" ',n+='id="'+d+'" class="unselectable needsclick'+this.mUserCss,a+=d+" ",e==c?(n=n+'" style="'+this.getSelectedLineStyle(),this.selectedLine=c):n+='" aria-selected="false" style="',n="".concat(n," line-height:").concat(l,"px; padding:0 ").concat(r,'px;" unselectable="on" value="').concat(c,'">').concat(u),n+="</div>"}n+="</div>";var p=this.dropList;p&&(jOmnis.touchDevice?this.form.inst.elem.removeChild(p):document.body.removeChild(p),null!=this.iscroll&&(this.iscroll.destroy(),this.iscroll=null));var m=document.createElement("div");m.className="ctrl-drop-list ".concat(this.getTheme().getCSSClass()),m.setAttribute("role","listbox"),this.mUserCss&&jOmnis.addClass(m,this.mUserCss.split(" ")[0]+"-dropped-list"),m.innerHTML=n,m.style.position="absolute",m.onclick=this.mEventFunction,jOmnis.mobileDevice||(m.onmouseover=this.mEventFunction),m.onmousedown=this.mEventFunction,m.style.fontFamily=t.style.fontFamily,m.style.fontSize=t.style.fontSize,m.style.fontWeight=t.style.fontWeight,m.style.textDecoration=t.style.textDecoration,m.style.fontStyle=t.style.fontStyle;var f=t.style.color;m.style.color=f,o.Q2.SetThemedIconColor(m,f),m.style.textAlign=t.style.textAlign,jOmnis.touchDevice?this.form.inst.elem.appendChild(m):document.body.appendChild(m),this.dropList=m,a&&m.setAttribute("aria-owns",a),this.dropListTextWidth=m.offsetWidth+1,this.dropList.style.zIndex=jOmnis.getPopupZIndex(this.form)},Me.prototype.getSelectedLineColor=function(){return this.getTheme().getColorString(this.selectedLineColor,this.DefaultColors.SELECTED_LINE)},Me.prototype.getSelectedLineTextColor=function(){return this.getTheme().getTextColorString(this.selectedLineTextColor,this.selectedLineColor,this.DefaultColors.SELECTED_LINE_TEXT)},Me.prototype.getSelectedLineStyle=function(){var t="";if(this.selectedLineColor&&(t+="background-color: "+this.getSelectedLineColor()+";"),this.selectedLineTextColor){var e=this.getSelectedLineTextColor();t+="color: ".concat(e,"; --om-tint-color: ").concat(e,";")}return t},Me.prototype.setLineStyle=function(t,e){t.style.backgroundColor=e?this.getSelectedLineColor():"";var i=e?this.getSelectedLineTextColor():"";t.style.color=i,o.Q2.SetThemedIconColor(t,i),e?jOmnis.addClass(t,Ce.SELECTED_LINE):jOmnis.removeClass(t,Ce.SELECTED_LINE)},Me.prototype.layoutDropList=function(){var t=this.getClientElem(),e=this.dropList;if(null!=e&&null!=e.firstChild.firstChild){if(null!=e.firstChild.firstChild){var i,s=this.getLineCount(),r=!1,n=this.mFontHeight+this.mExtraSpace;s<=this.listHeight?i=s:(i=this.listHeight,s,jOmnis.mobileDevice||(r=!0)),e.style.height=n*i+"px";var o=jOmnis.touchDevice?this.form.inst.elem:null,a=jOmnis.getElemPosRelativeToAncestor(t,o);e.style.top=a.h+a.y+"px",e.style.left=a.x+"px",jStyles.setElem(t),e.style.backgroundColor=this.clientElem.style.backgroundColor;var l=jStyles.getInt("width");jStyles.done();var h=this.dropListTextWidth;r&&(h+=20),h>l&&(l=h),e.style.width=l+"px"}if(jOmnis.useiScroll){if(null==this.iscroll){var c={};c.omnisObject=this,c.preventDefault=!0,c.tap=!0,c.mouseWheel=!0,c.scrollbars=!0,Function.prototype.bind&&(c.fadeScrollbars=!0),c.momentum=!0,c.bounce=!0,this.iscroll=this.attachIScroll(e,c)}this.iscroll.refresh()}}},Me.prototype.updateListSelection=function(t,e,i){this.mInUpdateListSelection=!0,this.setLineNumber(t),this.setLineSelected(t),i&&(this.editUsesList=!0,this.updateEditBoxValue(),!e&&this.canSendEvent(eBaseEvent.evClick)&&(this.eventParamsAdd("pLineNumber",t),this.sendEvent(eBaseEvent.evClick))),this.mInUpdateListSelection=!1},Me.prototype.updateEditBoxValue=function(){var t=this.getEditValue(this.isCombo&&this.isDroplistOpen());this.updateSelDataNameValue(t);var e=this.edit;this.isCombo?(t=jOmnis.stripStyles(t),e.maxLength!=gCliMaxcharlen&&t&&t.length>e.maxLength&&(t=t.substr(0,e.maxLength)),jOmnis.mDesign||(e.value=t),jOmnisVal.setCurrentValue(e)):this.edit.innerHTML=jOmnis.escapeHTML(t,!0),this.positionEditVert()},Me.prototype.positionEditVert=function(){var t=this.getClientElem(),e=this.edit,i=e.offsetHeight;if(0==i&&(i=this.mFontHeight),i>t.clientHeight)e.style.top=0;else{var s=t.clientHeight-i;jOmnis.inFirefox()||s%2!=1||--s,e.style.top=s/2+"px"}},Me.prototype.setLineSelected=function(t){if(!(t<=0)&&this.dropList){var e=this.getClientElem(),i=this.dropList,s=this.getLineElement(this.selectedLine);s&&(s.className="unselectable",jStyles.setElem(e),this.setLineStyle(s,!1),s.setAttribute("aria-selected","false"),jStyles.done());var r=this.getLineElement(t);if(r)if(r.className="unselectable",this.setLineStyle(r,!0),r.setAttribute("aria-selected","true"),this.setAriaActiveDescendant(r.id),this.selectedLine=t,this.iscroll)this.iscroll.revealElement(r);else{var n=function(t){return parseInt(t)||0},o=r.offsetTop+r.offsetHeight,a=i.scrollTop+i.clientHeight-n(i.style.borderBottomWidth)-n(i.style.borderTopWidth),l=this.getLineElement(1).offsetTop;o>a?i.scrollTop=i.scrollTop+(o-a)-l:r.offsetTop<i.scrollTop&&(i.scrollTop=i.scrollTop-(i.scrollTop-r.offsetTop)-l)}else i.scrollTop=0}},Me.prototype.getLineElement=function(t){var e=this.dropList.firstChild,i=null;return t>=1&&t<=e.childNodes.length&&(i=e.childNodes[t-1]),i},Me.prototype.lineIsVisible=function(t){if(!(t<=0)){var e=!1,i=this.dropList,s=this.getLineElement(t),r=s.offsetTop+s.offsetHeight,n=parseInt(this.mDroppedUp?i.style.borderTopWidth:i.style.borderBottomWidth),o=i.scrollTop+i.offsetHeight-(isNaN(n)?0:n);return(r<=o&&r>i.scrollTop||s.offsetTop>=i.scrollTop&&s.offsetTop<o)&&(e=!0),e}},Me.prototype.setBorderRadius=function(t,e){void 0===this.mBorderStyle&&(this.mBorderStyle=+this.clientElem.getAttribute("data-borderstyle")||_e),e=ke.getBorderRadiusString(this.mBorderStyle,e),this.superclass.setBorderRadius(t,e),this.mFocusBorderElem&&this.superclass.setBorderRadius(this.mFocusBorderElem,e)},Me.prototype.getFocusBorderColor=function(){return this.getTheme().getColorString(this.mDisableSystemFocus?this.DefaultColors.FOCUS_BORDER:this.DefaultColors.SYSTEM_FOCUS)},Me.prototype.onDocumentClick=function(t){var e=this.getClientElem(),i=this.dropList,s=this.button,r=t.target;if(this.isDroplistOpen()){for(;null!=r&&r!=i&&r.parentNode!=i&&r!=this.edit&&r!=s&&r!==e;)r=r.parentNode;null==r&&(this.preventDroplistOverlay||t.preventDefault(),this.showDropList(!1,!0))}else if(r==s||r==this.edit){var n=document.activeElement;n!=s&&n!=this.edit||(jOmnis.mDisableBeforeID=this.uniqueID)}},Me.prototype.handleDownEvent=function(t,e){var i;this.dropList&&this.isDroplistOpen()?this.isButtonClick(t)||t===this.edit||t===this.clientElem&&!e||t===this.focusElem?this.showDropList(!1,!0):"DIV"==t.tagName&&this.selectedLine<this.getLineCount()&&this.updateListSelection(this.selectedLine+1,null,!this.isCombo):(this.isCombo&&this.setLineNumber(0),this.drawDropList(),this.layoutDropList(),this.showDropList(!0,!1),this.iscroll&&this.iscroll.refresh(),i=!0,this.selectLineFromComboEditValue(!0)),i&&(this.getLineNumber()?this.setLineSelected(this.getLineNumber()):this.updateListSelection(1,!1,!this.isCombo)),this.isCombo||this.focusClient()},Me.prototype.handleUpHomeEndEvents=function(t,e){var i=jOmnis.getEventCurrentTarget(t);this.dropList;if(e||(e=OmnisKeyboardHandler.getNormalizedEventKey(t)),!this.isDroplistOpen()){if("ArrowUp"!==e)return;this.handleDownEvent(i),e="End"}var s=!1;switch(e){case"ArrowUp":if(this.selectedLine>1)var r=this.selectedLine-1;else s=!0;break;case"Home":this.selectedLine>1?r=1:s=!0;break;case"End":this.selectedLine<this.getLineCount()?r=this.getLineCount():s=!0}"DIV"!=i.tagName||s||this.updateListSelection(r,null,!this.isCombo),this.isCombo||this.focusClient()},Me.prototype.closeDropList=function(){this.isDroplistOpen()&&this.showDropList(!1,!0)},Me.prototype.handleReturnEvent=function(t,e){var i=t.target;("DIV"==i.tagName||this.isCombo&&("INPUT"==i.tagName||"BUTTON"==i.tagName))&&this.isDroplistOpen()&&this.selectedLine>0&&(this.updateListSelection(this.selectedLine,!1,!0),this.showDropList(!1,!0),e||(jOmnis.stopEventNow(t),this.isCombo?this.focusEdit():this.focusClient()))},Me.prototype.handleKey=function(t,e){var i=OmnisKeyboardHandler.getNormalizedEventKey(t),s=!1;switch(i){case"Tab":if(!e){this.handleReturnEvent(t,!0);var r=this.form.getNextPrevTabObject(this,t.shiftKey);if(r==this){var n=this.form.subFormObj;n&&(r=n.form.getNextPrevTabObject(n,t.shiftKey))}null!=r&&(this.tabbedOut=!0)}break;case"Enter":return this.isDroplistOpen()?(this.handleReturnEvent(t),jOmnis.stopEventNow(t)):e&&this.handleReturnEvent(t),!0;case"Escape":if(e)this.dropList&&(this.isDroplistOpen()&&jOmnis.stopEventNow(t),this.showDropList(!1,!0),this.isCombo&&this.handleEvent(jOmnis.createDOMEvent("focusin")));return!0;case"End":case"Home":case"ArrowUp":e||(this.handleUpHomeEndEvents(t,i),t.preventDefault());break;case"ArrowDown":e||(this.handleDownEvent(jOmnis.getEventCurrentTarget(t),!0),t.preventDefault());break;default:s=!0}return e||s||this.cancelKeySearch(),!0},Me.prototype.searchList=function(t,e,i){if(t&&t.length)for(var s=this.getLineCount(),r=0;r<s;r++){var n=r+1,o=jOmnis.stripStyles(this.getColumnData(n,this.mListColumn,this.isCombo&&this.isNumber));if(null!=o&&0==o.toUpperCase().indexOf(t))return void(this.getLineNumber()!=n&&this.updateListSelection(n,i,!this.isCombo))}e&&this.updateListSelection(1,null,!this.isCombo)},Me.prototype.selectLineFromComboEditValue=function(t){this.isCombo&&(this.noEditBoxSetData=!0,this.searchList(this.edit.value.toUpperCase(),t,!0),this.noEditBoxSetData=!1)},Me.prototype.getLineCount=function(){if(this.useDefault)return this.defaultText.length;if(this.rowCtrl){var t=new Rt.Z(this),e=this.form.getData(this.listData,"#LCNT");return t.restoreOldRow(),e}return this.form.getData(this.listData,"#LCNT")},Me.prototype.getLineNumber=function(){if(this.useDefault)return this.defaultLine;if(this.rowCtrl){var t=new Rt.Z(this),e=this.form.getData(this.listData,"#L");return t.restoreOldRow(),e}return this.form.getData(this.listData,"#L")},Me.prototype.setLineNumber=function(t){if(this.useDefault)return this.defaultLine=t,!0;var e;if(this.mDisableUpdate=!0,this.rowCtrl){var i=new Rt.Z(this);e=this.form.setData(this.listData,t,"#L"),i.restoreOldRow()}else e=this.form.setData(this.listData,t,"#L");return this.mDisableUpdate=!1,e},Me.prototype.getColumnData=function(t,e,i){if(this.useDefault)return this.defaultText[t-1];var s,r=i||!this.mDataIsFormatted&&this.isNumber&&this.isCombo?null:this.getDisplayFormat();if(this.rowCtrl){var n=new Rt.Z(this);s=this.form.getData(this.listData,"#COL",t,e,"s",r),n.restoreOldRow()}else s=this.form.getData(this.listData,"#COL",t,e,"s",r);return this.isNumber&&(s=jOmnis.numberToLocaleAndDps(s,this.numberDps)),s},Me.prototype.getEditValue=function(t){var e,i=this.getLineNumber();return i>0&&(e=this.getColumnData(i,this.mListColumn,t)),e||(e=""),""==e&&(e=String.fromCharCode(160)),e},Me.prototype.getListName=function(){return this.dataName},Me.prototype.setListData=function(){this.listName&&this.listName.length>0?this.listData=this.form.getDataIndex(this.listName,this):this.listData=0,this.useDefault=!(this.listData||!this.defaultText||!this.defaultText.length)},Me.prototype.focusEdit=function(){this.edit&&(jOmnis.mDisableBeforeID=this.uniqueID,this.edit.focus(),jOmnis.mDisableBeforeID=0,this.isCombo&&this.handleEvent(jOmnis.createDOMEvent("focusin")))},Me.prototype.focusClient=function(){var t=this.getClientElem();document.activeElement==t||this.clientHasFocus||(this.componentNeedsFocus=!0,t.focus())},Me.prototype.getEventMousePosition=function(t){var e=0,i=0;return t&&(t.pageX||t.pageY?(e=t.pageX,i=t.pageY):(t.clientX||t.clientY)&&(e=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,i=t.clientY+document.body.scrollTop+document.documentElement.scrollTop)),{x:e,y:i}},Me.prototype.handleEventResult=function(t,e){if(this.superclass.handleEventResult.call(this,t,e),this.tabbedOut)this.tabbedOut=!1;else try{this.focusClient()}catch(t){}},Me.prototype.updateSelDataNameValue=function(t){this.selDataIndex||(this.selDataIndex=this.form.getDataIndex(this.selDataName)),this.form.getData(this.selDataIndex)!==t&&this.form.setData(this.selDataIndex,t)},Me.prototype.getLabelForElem=function(){return this.isCombo?this.getClientElem().querySelector("input").id:this.getClientElem().id},Me.prototype.getNotEnabledElem=function(){return this.elem};var Fe=Me,He="$::listname",ze="$::contenttip";function We(){this.init_class_inst()}We.prototype=new Fe,We.prototype.init_class_inst=function(){this.ctrl_droplist_class=Fe.prototype,this.ctrl_droplist_class.init_class_inst.call(this),this.combobox=!0,this.editUsesList=!1,this.needsUpdateEditBox=!1,this.usesTouchScroll=!1,this.baseClassName="omnis-combo",this.activeReplacesEnabled=!1},We.prototype.init_ctrl_inst=function(t,e,i,s){this.mAutoDragData=!0,this.mHandleNumbers=!0,this.mValidateNumbers=!0,this.mHasDefaultDisableAppearanceProperty=!0,this.ctrl_droplist_class.init_ctrl_inst.call(this,t,e,i,s),this.setMaxLength();var r=this.getClientElem();if(!jOmnis.mDesign){var n=r.getAttribute("data-ctip");n&&(this.edit.placeholder=n)}this.edit.oninput=this.mEventFunction;var o=r.getAttribute("data-na");return this.negAllowed=null==o||1*o!=0,jOmnisVal.setNegAllowed(this.edit,this.negAllowed),this.setProperty(a.W9.autocorrect,"1"==r.getAttribute("data-autocorrect")),this.setProperty(a.W9.autocapitalize,r.getAttribute("data-autocaps")),this.edit.setAttribute("autocomplete","off"),r.style.setProperty("--input-text-color",r.style.color),!1},We.prototype.delete_class_inst=function(){jOmnisVal.removeObject(this.edit),this.ctrl_droplist_class.delete_class_inst.call(this)},We.prototype.updateCtrl=function(){if(this.setMaxLength(),this.doneUpdate=!0,this.needsUpdateEditBox)return this.updateEditBoxValue(),void(this.needsUpdateEditBox=!1);this.ctrl_droplist_class.updateCtrl.call(this)},We.prototype.updateEditBoxValue=function(){if(this.ctrl_droplist_class.updateEditBoxValue.call(this),!this.noEditBoxSetData){var t=this.getEditValue(!0);this.isNumber&&(t=jOmnis.numberFromLocale(t,this.edit)),t=jOmnis.stripStyles(t),this.setData(t,null,null,null,"s",this.getDisplayFormat()),this.editUsesList=!1}},We.prototype.handleEvent=function(t){var e=jOmnis.getEventCurrentTarget(t);switch(t.type){case"change":var i=this.edit.value;return this.isNumber&&(i=jOmnis.numberFromLocale(i,this.edit)),this.doneUpdate=!1,this.setData(i,null,null,null,"s",this.getDisplayFormat()),!this.doneUpdate&&this.isNumber&&this.update(),this.editUsesList=!1,this.canSendEvent(eBaseEvent.evAfter,!0)&&this.sendEvent(eBaseEvent.evAfter),!0;case"input":if(this.isDroplistOpen()){var s=jOmnis.stripStyles(this.getColumnData(this.getLineNumber(),this.mListColumn,this.isNumber));s&&0!==s.toUpperCase().indexOf((this.edit.value+"").toUpperCase())&&this.searchList((this.edit.value+"").toUpperCase(),!1,!0)}break;case"focus":var r=!0;if(e==this.edit&&this.mUpdateOnFocusChange&&this.updateOnFocusChange(),this.clientHasFocus=!1,this.componentNeedsFocus||e==this.edit)this.clientHasFocus=!0;else{this.ctrl_droplist_class.handleEvent.call(this,t);var n=this;setTimeout((function(){n.focusEdit()}),0),jOmnis.mDisableBeforeID=this.uniqueID,r=!1}this.componentNeedsFocus=!1,jOmnis.mDisableBeforeID==this.uniqueID?jOmnis.mDisableBeforeID=0:r&&this.canSendEvent(eBaseEvent.evBefore,!0)&&this.sendEvent(eBaseEvent.evBefore),this.clientElem.tabIndex=-1;break;case"focusout":jOmnisEffects.removeFocusClass(this.elem);break;default:return this.ctrl_droplist_class.handleEvent.call(this,t)}return!0},We.prototype.getProperty=function(t){switch(t){case He:return this.getListName();case ze:return this.edit.placeholder;case a.W9.negallowed:return this.negAllowed;case a.W9.autocorrect:return this.mAutoCorrect;case a.W9.autocapitalize:return this.mAutoCapitalize}return this.ctrl_droplist_class.getProperty.call(this,t)},We.prototype.getCanAssign=function(t){switch(t){case He:case ze:case a.W9.negallowed:case a.W9.autocorrect:case a.W9.autocapitalize:return!0}return this.ctrl_droplist_class.getCanAssign.call(this,t)},We.prototype.setProperty=function(t,e){var i=!0;switch(t){case He:this.setListName(e),this.editUsesList=!1;break;case a.W9.dataname:this.needsUpdateEditBox=!0,this.editUsesList=!1,i=!1;break;case ze:return jOmnis.mDesign||("string"!=typeof e&&(e=""),this.edit.placeholder=e),!0;case a.W9.negallowed:return this.negAllowed=1*e!=0,jOmnisVal.setNegAllowed(this.edit,this.negAllowed),!0;case a.W9.autocorrect:return this.mAutoCorrect=e,this.edit.setAttribute("autocorrect",e?"on":"off"),!0;case a.W9.autocapitalize:return this.mAutoCapitalize=e||0,this.edit.setAttribute("autocapitalize",this.AUTO_CAPITALIZE_VALUES[this.mAutoCapitalize]),!0;case a.W9.defaultDisabledAppearance:var s=this.superclass.setProperty.call(this,t,e);return ke.prototype.setDisabledAppearance.call(this),s;case a.W9.backcolor:case a.W9.textcolor:var r=this.ctrl_droplist_class.setProperty.call(this,t,e);return this.clientElem.style.setProperty("--input-text-color",this.clientElem.style.color),r;default:i=!1}if(i)return this.update(),!0;this.ctrl_droplist_class.setProperty.call(this,t,e)},We.prototype.activeChanged=function(){var t=this.isActive();this.edit.disabled===t&&(this.edit.disabled=!t,this.ctrl_droplist_class.activeChanged.call(this))},We.prototype.enabledChanged=function(){this.ctrl_droplist_class.enabledChanged.call(this),this.updateReadOnly()},We.prototype.updateReadOnly=function(){!this.isEnabled()&&this.isActive()?this.edit.setAttribute("readonly","readonly"):this.edit.removeAttribute("readonly")},We.prototype.doInitialLayout=function(){this.ctrl_droplist_class.doInitialLayout.call(this),this.updateReadOnly(),this.isActive()||this.activeChanged(),this.edit.onclick=null,this.edit.style.cursor="text",this.edit.onchange=this.mEventFunction},We.prototype.getListName=function(){return this.getClientElem().getAttribute("data-listname")},We.prototype.setListName=function(t){return this.getClientElem().setAttribute("data-listname",t)},We.prototype.getEditValue=function(t){var e,i=this.getClientElem().getElementsByTagName("button")[0];this.mDataIsFormatted=!t&&document.activeElement!=this.edit&&document.activeElement!=i;var s=this.getDisplayFormat();return this.editUsesList?(e=jOmnis.stripStyles(this.ctrl_droplist_class.getEditValue.call(this,t)),this.edit.maxLength!=gCliMaxcharlen&&e&&e.length>this.edit.maxLength&&(e=e.substr(0,this.edit.maxLength))):e=this.getData(null,null,null,null,"s",this.mDataIsFormatted||!this.isNumber?s:null),null==e&&(e=""),this.isNumber&&(e=jOmnis.numberToLocaleAndDps(e,this.mDataIsFormatted&&null!=s&&0!=s.length?null:this.numberDps)),e},We.prototype.updateOnFocusChange=function(){this.needsUpdateEditBox=!0,this.noEditBoxSetData=!0,this.update(),this.needsUpdateEditBox=!1,this.noEditBoxSetData=!1},We.prototype.setMaxLength=function(){this.edit.maxLength=gCliMaxcharlen;var t=this.getDisplayFormat();if(!t||!t.length){var e=this.form.getDefn(this.dataIndex);e&&eOmnisDataTypes.fftCharacter==e[1]&&(this.edit.maxLength=e[3])}},We.prototype.getDragValue=function(){var t=this.edit.selectionStart,e=this.edit.selectionEnd;return"number"==typeof t&&"number"==typeof e?this.edit.value.substring(t,e):""};var $e,Ue=We;i(9826),i(1038),i(5827),i(2707),i(2479),i(189),i(6755),i(8921),i(6248),i(3599),i(1477),i(4362),i(5389),i(401),i(5164),i(1238),i(4837),i(7485),i(465),i(6651),i(1437),i(5285),i(9865),i(1962),i(7042),i(5212),i(4765),i(3210),i(6035);function Ve(t){return Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ve(t)}
/*! jQuery UI - v1.13.1 - 2022-01-21
* http://jqueryui.com
* Includes: widget.js, position.js, data.js, disable-selection.js, focusable.js, form-reset-mixin.js, jquery-patch.js, keycode.js, labels.js, scroll-parent.js, tabbable.js, unique-id.js, widgets/draggable.js, widgets/droppable.js, widgets/resizable.js, widgets/selectable.js, widgets/sortable.js, widgets/accordion.js, widgets/autocomplete.js, widgets/button.js, widgets/checkboxradio.js, widgets/controlgroup.js, widgets/datepicker.js, widgets/dialog.js, widgets/menu.js, widgets/mouse.js, widgets/progressbar.js, widgets/slider.js, widgets/spinner.js, widgets/tabs.js, widgets/tooltip.js, effect.js, effects/effect-blind.js, effects/effect-bounce.js, effects/effect-clip.js, effects/effect-drop.js, effects/effect-explode.js, effects/effect-fade.js, effects/effect-fold.js, effects/effect-highlight.js, effects/effect-puff.js, effects/effect-pulsate.js, effects/effect-scale.js, effects/effect-shake.js, effects/effect-size.js, effects/effect-slide.js, effects/effect-transfer.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */$e=function(t){t.ui=t.ui||{},t.ui.version="1.13.1";var e,i,s,r,n,o,a,l,h,c,u,d,p,m=0,f=Array.prototype.hasOwnProperty,g=Array.prototype.slice;function v(t,e,i){return[parseFloat(t[0])*(h.test(t[0])?e/100:1),parseFloat(t[1])*(h.test(t[1])?i/100:1)]}function b(e,i){return parseInt(t.css(e,i),10)||0}function y(t){return null!=t&&t===t.window}t.cleanData=(e=t.cleanData,function(i){for(var s,r,n=0;null!=(r=i[n]);n++)(s=t._data(r,"events"))&&s.remove&&t(r).triggerHandler("remove");e(i)}),t.widget=function(e,i,s){var r,n,o,a={},l=e.split(".")[0],h=l+"-"+(e=e.split(".")[1]);return s||(s=i,i=t.Widget),Array.isArray(s)&&(s=t.extend.apply(null,[{}].concat(s))),t.expr.pseudos[h.toLowerCase()]=function(e){return!!t.data(e,h)},t[l]=t[l]||{},r=t[l][e],n=t[l][e]=function(t,e){if(!this||!this._createWidget)return new n(t,e);arguments.length&&this._createWidget(t,e)},t.extend(n,r,{version:s.version,_proto:t.extend({},s),_childConstructors:[]}),(o=new i).options=t.widget.extend({},o.options),t.each(s,(function(t,e){function s(){return i.prototype[t].apply(this,arguments)}function r(e){return i.prototype[t].apply(this,e)}a[t]="function"==typeof e?function(){var t,i=this._super,n=this._superApply;return this._super=s,this._superApply=r,t=e.apply(this,arguments),this._super=i,this._superApply=n,t}:e})),n.prototype=t.widget.extend(o,{widgetEventPrefix:r&&o.widgetEventPrefix||e},a,{constructor:n,namespace:l,widgetName:e,widgetFullName:h}),r?(t.each(r._childConstructors,(function(e,i){var s=i.prototype;t.widget(s.namespace+"."+s.widgetName,n,i._proto)})),delete r._childConstructors):i._childConstructors.push(n),t.widget.bridge(e,n),n},t.widget.extend=function(e){for(var i,s,r=g.call(arguments,1),n=0,o=r.length;n<o;n++)for(i in r[n])s=r[n][i],f.call(r[n],i)&&void 0!==s&&(t.isPlainObject(s)?e[i]=t.isPlainObject(e[i])?t.widget.extend({},e[i],s):t.widget.extend({},s):e[i]=s);return e},t.widget.bridge=function(e,i){var s=i.prototype.widgetFullName||e;t.fn[e]=function(r){var n="string"==typeof r,o=g.call(arguments,1),a=this;return n?this.length||"instance"!==r?this.each((function(){var i,n=t.data(this,s);return"instance"===r?(a=n,!1):n?"function"!=typeof n[r]||"_"===r.charAt(0)?t.error("no such method '"+r+"' for "+e+" widget instance"):(i=n[r].apply(n,o))!==n&&void 0!==i?(a=i&&i.jquery?a.pushStack(i.get()):i,!1):void 0:t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+r+"'")})):a=void 0:(o.length&&(r=t.widget.extend.apply(null,[r].concat(o))),this.each((function(){var e=t.data(this,s);e?(e.option(r||{}),e._init&&e._init()):t.data(this,s,new i(r,this))}))),a}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=m++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,(function(t,i){e._removeClass(i,t)})),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var s,r,n,o=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(o={},e=(s=e.split(".")).shift(),s.length){for(r=o[e]=t.widget.extend({},this.options[e]),n=0;n<s.length-1;n++)r[s[n]]=r[s[n]]||{},r=r[s[n]];if(e=s.pop(),1===arguments.length)return void 0===r[e]?null:r[e];r[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];o[e]=i}return this._setOptions(o),this},_setOptions:function(t){for(var e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var i,s,r;for(i in e)r=this.classesElementLookup[i],e[i]!==this.options.classes[i]&&r&&r.length&&(s=t(r.get()),this._removeClass(r,i),s.addClass(this._classes({element:s,keys:i,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){var i=[],s=this;function r(r,n){for(var o,a=0;a<r.length;a++)o=s.classesElementLookup[r[a]]||t(),o=e.add?(function(){var i=[];e.element.each((function(e,r){t.map(s.classesElementLookup,(function(t){return t})).some((function(t){return t.is(r)}))||i.push(r)})),s._on(t(i),{remove:"_untrackClassesElement"})}(),t(t.uniqueSort(o.get().concat(e.element.get())))):t(o.not(e.element).get()),s.classesElementLookup[r[a]]=o,i.push(r[a]),n&&e.classes[r[a]]&&i.push(e.classes[r[a]])}return(e=t.extend({element:this.element,classes:this.options.classes||{}},e)).keys&&r(e.keys.match(/\S+/g)||[],!0),e.extra&&r(e.extra.match(/\S+/g)||[]),i.join(" ")},_untrackClassesElement:function(e){var i=this;t.each(i.classesElementLookup,(function(s,r){-1!==t.inArray(e.target,r)&&(i.classesElementLookup[s]=t(r.not(e.target).get()))})),this._off(t(e.target))},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,s){var r="string"==typeof t||null===t;return(i={extra:r?e:i,keys:r?t:e,element:r?this.element:t,add:s="boolean"==typeof s?s:i}).element.toggleClass(this._classes(i),s),this},_on:function(e,i,s){var r,n=this;"boolean"!=typeof e&&(s=i,i=e,e=!1),s?(i=r=t(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,r=this.widget()),t.each(s,(function(s,o){function a(){if(e||!0!==n.options.disabled&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof o?n[o]:o).apply(n,arguments)}var l;"string"!=typeof o&&(a.guid=o.guid=o.guid||a.guid||t.guid++),s=(l=s.match(/^([\w:-]*)\s*(.*)$/))[1]+n.eventNamespace,(l=l[2])?r.on(s,l,a):i.on(s,a)}))},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){var i=this;return setTimeout((function(){return("string"==typeof t?i[t]:t).apply(i,arguments)}),e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,i,s){var r,n,o=this.options[e];if(s=s||{},(i=t.Event(i)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],n=i.originalEvent)for(r in n)r in i||(i[r]=n[r]);return this.element.trigger(i,s),!("function"==typeof o&&!1===o.apply(this.element[0],[i].concat(s))||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},(function(e,i){t.Widget.prototype["_"+e]=function(s,r,n){var o,a=(r="string"==typeof r?{effect:r}:r)?!0!==r&&"number"!=typeof r&&r.effect||i:e;"number"==typeof(r=r||{})?r={duration:r}:!0===r&&(r={}),o=!t.isEmptyObject(r),r.complete=n,r.delay&&s.delay(r.delay),o&&t.effects&&t.effects.effect[a]?s[e](r):a!==e&&s[a]?s[a](r.duration,r.easing,n):s.queue((function(i){t(this)[e](),n&&n.call(s[0]),i()}))}})),t.widget,s=Math.max,r=Math.abs,n=/left|center|right/,o=/top|center|bottom/,a=/[\+\-]\d+(\.[\d]+)?%?/,l=/^\w+/,h=/%$/,c=t.fn.position,t.position={scrollbarWidth:function(){if(void 0!==i)return i;var e,s=t("<div style='display:block;position:absolute;width:200px;height:200px;overflow:hidden;'><div style='height:300px;width:auto;'></div></div>"),r=s.children()[0];return t("body").append(s),e=r.offsetWidth,s.css("overflow","scroll"),e===(r=r.offsetWidth)&&(r=s[0].clientWidth),s.remove(),i=e-r},getScrollInfo:function(e){var i=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),s=e.isWindow||e.isDocument?"":e.element.css("overflow-y");return i="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,{width:"scroll"===s||"auto"===s&&e.height<e.element[0].scrollHeight?t.position.scrollbarWidth():0,height:i?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),s=y(i[0]),r=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:s,isDocument:r,offset:s||r?{left:0,top:0}:t(e).offset(),scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:i.outerWidth(),height:i.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return c.apply(this,arguments);var i,h,u,d,p,m,f="string"==typeof(e=t.extend({},e)).of?t(document).find(e.of):t(e.of),g=t.position.getWithinInfo(e.within),C=t.position.getScrollInfo(g),_=(e.collision||"flip").split(" "),E={},w=9===(m=(w=f)[0]).nodeType?{width:w.width(),height:w.height(),offset:{top:0,left:0}}:y(m)?{width:w.width(),height:w.height(),offset:{top:w.scrollTop(),left:w.scrollLeft()}}:m.preventDefault?{width:0,height:0,offset:{top:m.pageY,left:m.pageX}}:{width:w.outerWidth(),height:w.outerHeight(),offset:w.offset()};return f[0].preventDefault&&(e.at="left top"),h=w.width,u=w.height,p=t.extend({},d=w.offset),t.each(["my","at"],(function(){var t,i,s=(e[this]||"").split(" ");(s=1===s.length?n.test(s[0])?s.concat(["center"]):o.test(s[0])?["center"].concat(s):["center","center"]:s)[0]=n.test(s[0])?s[0]:"center",s[1]=o.test(s[1])?s[1]:"center",t=a.exec(s[0]),i=a.exec(s[1]),E[this]=[t?t[0]:0,i?i[0]:0],e[this]=[l.exec(s[0])[0],l.exec(s[1])[0]]})),1===_.length&&(_[1]=_[0]),"right"===e.at[0]?p.left+=h:"center"===e.at[0]&&(p.left+=h/2),"bottom"===e.at[1]?p.top+=u:"center"===e.at[1]&&(p.top+=u/2),i=v(E.at,h,u),p.left+=i[0],p.top+=i[1],this.each((function(){var n,o,a=t(this),l=a.outerWidth(),c=a.outerHeight(),m=b(this,"marginLeft"),y=b(this,"marginTop"),w=l+m+b(this,"marginRight")+C.width,k=c+y+b(this,"marginBottom")+C.height,T=t.extend({},p),S=v(E.my,a.outerWidth(),a.outerHeight());"right"===e.my[0]?T.left-=l:"center"===e.my[0]&&(T.left-=l/2),"bottom"===e.my[1]?T.top-=c:"center"===e.my[1]&&(T.top-=c/2),T.left+=S[0],T.top+=S[1],n={marginLeft:m,marginTop:y},t.each(["left","top"],(function(s,r){t.ui.position[_[s]]&&t.ui.position[_[s]][r](T,{targetWidth:h,targetHeight:u,elemWidth:l,elemHeight:c,collisionPosition:n,collisionWidth:w,collisionHeight:k,offset:[i[0]+S[0],i[1]+S[1]],my:e.my,at:e.at,within:g,elem:a})})),e.using&&(o=function(t){var i=d.left-T.left,n=i+h-l,o=d.top-T.top,p=o+u-c,m={target:{element:f,left:d.left,top:d.top,width:h,height:u},element:{element:a,left:T.left,top:T.top,width:l,height:c},horizontal:n<0?"left":0<i?"right":"center",vertical:p<0?"top":0<o?"bottom":"middle"};h<l&&r(i+n)<h&&(m.horizontal="center"),u<c&&r(o+p)<u&&(m.vertical="middle"),s(r(i),r(n))>s(r(o),r(p))?m.important="horizontal":m.important="vertical",e.using.call(this,t,m)}),a.offset(t.extend(T,{using:o}))}))},t.ui.position={fit:{left:function(t,e){var i=e.within,r=i.isWindow?i.scrollLeft:i.offset.left,n=i.width,o=t.left-e.collisionPosition.marginLeft,a=r-o,l=o+e.collisionWidth-n-r;e.collisionWidth>n?0<a&&l<=0?(i=t.left+a+e.collisionWidth-n-r,t.left+=a-i):t.left=!(0<l&&a<=0)&&l<a?r+n-e.collisionWidth:r:0<a?t.left+=a:0<l?t.left-=l:t.left=s(t.left-o,t.left)},top:function(t,e){var i=e.within,r=i.isWindow?i.scrollTop:i.offset.top,n=e.within.height,o=t.top-e.collisionPosition.marginTop,a=r-o,l=o+e.collisionHeight-n-r;e.collisionHeight>n?0<a&&l<=0?(i=t.top+a+e.collisionHeight-n-r,t.top+=a-i):t.top=!(0<l&&a<=0)&&l<a?r+n-e.collisionHeight:r:0<a?t.top+=a:0<l?t.top-=l:t.top=s(t.top-o,t.top)}},flip:{left:function(t,e){var i=(h=e.within).offset.left+h.scrollLeft,s=h.width,n=h.isWindow?h.scrollLeft:h.offset.left,o=(c=t.left-e.collisionPosition.marginLeft)-n,a=c+e.collisionWidth-s-n,l="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,h="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,c=-2*e.offset[0];o<0?((i=t.left+l+h+c+e.collisionWidth-s-i)<0||i<r(o))&&(t.left+=l+h+c):0<a&&(0<(n=t.left-e.collisionPosition.marginLeft+l+h+c-n)||r(n)<a)&&(t.left+=l+h+c)},top:function(t,e){var i=(h=e.within).offset.top+h.scrollTop,s=h.height,n=h.isWindow?h.scrollTop:h.offset.top,o=(c=t.top-e.collisionPosition.marginTop)-n,a=c+e.collisionHeight-s-n,l="top"===e.my[1]?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,h="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,c=-2*e.offset[1];o<0?((i=t.top+l+h+c+e.collisionHeight-s-i)<0||i<r(o))&&(t.top+=l+h+c):0<a&&(0<(n=t.top-e.collisionPosition.marginTop+l+h+c-n)||r(n)<a)&&(t.top+=l+h+c)}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},t.ui.position,t.extend(t.expr.pseudos,{data:t.expr.createPseudo?t.expr.createPseudo((function(e){return function(i){return!!t.data(i,e)}})):function(e,i,s){return!!t.data(e,s[3])}}),t.fn.extend({disableSelection:(u="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(u+".ui-disableSelection",(function(t){t.preventDefault()}))}),enableSelection:function(){return this.off(".ui-disableSelection")}}),t.ui.focusable=function(e,i){var s,r,n,o,a=e.nodeName.toLowerCase();return"area"===a?(r=(s=e.parentNode).name,!(!e.href||!r||"map"!==s.nodeName.toLowerCase())&&0<(r=t("img[usemap='#"+r+"']")).length&&r.is(":visible")):(/^(input|select|textarea|button|object)$/.test(a)?(n=!e.disabled)&&(o=t(e).closest("fieldset")[0])&&(n=!o.disabled):n="a"===a&&e.href||i,n&&t(e).is(":visible")&&function(t){for(var e=t.css("visibility");"inherit"===e;)e=(t=t.parent()).css("visibility");return"visible"===e}(t(e)))},t.extend(t.expr.pseudos,{focusable:function(e){return t.ui.focusable(e,null!=t.attr(e,"tabindex"))}}),t.ui.focusable,t.fn._form=function(){return"string"==typeof this[0].form?this.closest("form"):t(this[0].form)},t.ui.formResetMixin={_formResetHandler:function(){var e=t(this);setTimeout((function(){var i=e.data("ui-form-reset-instances");t.each(i,(function(){this.refresh()}))}))},_bindFormResetHandler:function(){var t;this.form=this.element._form(),this.form.length&&((t=this.form.data("ui-form-reset-instances")||[]).length||this.form.on("reset.ui-form-reset",this._formResetHandler),t.push(this),this.form.data("ui-form-reset-instances",t))},_unbindFormResetHandler:function(){var e;this.form.length&&((e=this.form.data("ui-form-reset-instances")).splice(t.inArray(this,e),1),e.length?this.form.data("ui-form-reset-instances",e):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset"))}},t.expr.pseudos||(t.expr.pseudos=t.expr[":"]),t.uniqueSort||(t.uniqueSort=t.unique),t.escapeSelector||(d=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,p=function(t,e){return e?"\0"===t?"":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},t.escapeSelector=function(t){return(t+"").replace(d,p)}),t.fn.even&&t.fn.odd||t.fn.extend({even:function(){return this.filter((function(t){return t%2==0}))},odd:function(){return this.filter((function(t){return t%2==1}))}}),t.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},t.fn.labels=function(){var e,i,s;return this.length?this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(i=this.eq(0).parents("label"),(e=this.attr("id"))&&(s=(s=this.eq(0).parents().last()).add((s.length?s:this).siblings()),e="label[for='"+t.escapeSelector(e)+"']",i=i.add(s.find(e).addBack(e))),this.pushStack(i)):this.pushStack([])},t.fn.scrollParent=function(e){var i=this.css("position"),s="absolute"===i,r=e?/(auto|scroll|hidden)/:/(auto|scroll)/;return e=this.parents().filter((function(){var e=t(this);return(!s||"static"!==e.css("position"))&&r.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))})).eq(0),"fixed"!==i&&e.length?e:t(this[0].ownerDocument||document)},t.extend(t.expr.pseudos,{tabbable:function(e){var i=t.attr(e,"tabindex"),s=null!=i;return(!s||0<=i)&&t.ui.focusable(e,s)}}),t.fn.extend({uniqueId:(C=0,function(){return this.each((function(){this.id||(this.id="ui-id-"+ ++C)}))}),removeUniqueId:function(){return this.each((function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")}))}}),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var C,_=!1;function E(t,e,i){return e<=t&&t<e+i}t(document).on("mouseup",(function(){_=!1})),t.widget("ui.mouse",{version:"1.13.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,(function(t){return e._mouseDown(t)})).on("click."+this.widgetName,(function(i){if(!0===t.data(i.target,e.widgetName+".preventClickEvent"))return t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!_){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,s=1===e.which,r=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&t(e.target).closest(this.options.cancel).length;return!(s&&!r&&this._mouseCapture(e))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){i.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),_=!0))}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,_=!1,e.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),t.ui.plugin={add:function(e,i,s){var r,n=t.ui[e].prototype;for(r in s)n.plugins[r]=n.plugins[r]||[],n.plugins[r].push([i,s[r]])},call:function(t,e,i,s){var r,n=t.plugins[e];if(n&&(s||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(r=0;r<n.length;r++)t.options[n[r][0]]&&n[r][1].apply(t.element,i)}},t.ui.safeActiveElement=function(t){var e;try{e=t.activeElement}catch(i){e=t.body}return(e=e||t.body).nodeName?e:t.body},t.ui.safeBlur=function(e){e&&"body"!==e.nodeName.toLowerCase()&&t(e).trigger("blur")},t.widget("ui.draggable",t.ui.mouse,{version:"1.13.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(e){var i=this.options;return!(this.helper||i.disabled||0<t(e.target).closest(".ui-resizable-handle").length||(this.handle=this._getHandle(e),!this.handle||(this._blurActiveElement(e),this._blockFrames(!0===i.iframeFix?"iframe":i.iframeFix),0)))},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map((function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]}))},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var i=t.ui.safeActiveElement(this.document[0]);t(e.target).closest(i).length||t.ui.safeBlur(i)},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=0<this.helper.parents().filter((function(){return"fixed"===t(this).css("position")})).length,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){if(i=this._uiHash(),!1===this._trigger("drag",e,i))return this._mouseUp(new t.Event("mouseup",e)),!1;this.position=i.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,s=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(s=t.ui.ddmanager.drop(this,e)),this.dropped&&(s=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||!0===this.options.revert||"function"==typeof this.options.revert&&this.options.revert.call(this.element,s)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),(function(){!1!==i._trigger("stop",e)&&i._clear()})):!1!==this._trigger("stop",e)&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.trigger("focus"),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new t.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!t(e.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var i=this.options,s="function"==typeof i.helper;return(e=s?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element).parents("body").length||e.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s&&e[0]===this.element[0]&&this._setPositionRelative(),e[0]===this.element[0]||/(fixed|absolute)/.test(e.css("position"))||e.css("position","absolute"),e},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),"left"in(t=Array.isArray(t)?{left:+t[0],top:+t[1]||0}:t)&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),{top:(e=this._isRootNode(this.offsetParent[0])?{top:0,left:0}:e).top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,r=this.options,n=this.document[0];this.relativeContainer=null,r.containment?"window"!==r.containment?"document"!==r.containment?r.containment.constructor!==Array?("parent"===r.containment&&(r.containment=this.helper[0].parentNode),(s=(i=t(r.containment))[0])&&(e=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i)):this.containment=r.containment:this.containment=[0,0,t(n).width()-this.helperProportions.width-this.margins.left,(t(n).height()||n.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||n.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(t,e){e=e||this.position;var i="absolute"===t?1:-1;return t=this._isRootNode(this.scrollParent[0]),{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:t?0:this.offset.scroll.top)*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:t?0:this.offset.scroll.left)*i}},_generatePosition:function(t,e){var i,s=this.options,r=this._isRootNode(this.scrollParent[0]),n=t.pageX,o=t.pageY;return r&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(i=this.relativeContainer?(i=this.relativeContainer.offset(),[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):this.containment,t.pageX-this.offset.click.left<i[0]&&(n=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(o=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(n=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(o=i[3]+this.offset.click.top)),s.grid&&(t=s.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,o=!i||t-this.offset.click.top>=i[1]||t-this.offset.click.top>i[3]?t:t-this.offset.click.top>=i[1]?t-s.grid[1]:t+s.grid[1],t=s.grid[0]?this.originalPageX+Math.round((n-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,n=!i||t-this.offset.click.left>=i[0]||t-this.offset.click.left>i[2]?t:t-this.offset.click.left>=i[0]?t-s.grid[0]:t+s.grid[0]),"y"===s.axis&&(n=this.originalPageX),"x"===s.axis&&(o=this.originalPageY)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top),left:n-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,i,s){return s=s||this._uiHash(),t.ui.plugin.call(this,e,[i,s,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),s.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i,s){var r=t.extend({},i,{item:s.element});s.sortables=[],t(s.options.connectToSortable).each((function(){var i=t(this).sortable("instance");i&&!i.options.disabled&&(s.sortables.push(i),i.refreshPositions(),i._trigger("activate",e,r))}))},stop:function(e,i,s){var r=t.extend({},i,{item:s.element});s.cancelHelperRemoval=!1,t.each(s.sortables,(function(){var t=this;t.isOver?(t.isOver=0,s.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,r))}))},drag:function(e,i,s){t.each(s.sortables,(function(){var r=!1,n=this;n.positionAbs=s.positionAbs,n.helperProportions=s.helperProportions,n.offset.click=s.offset.click,n._intersectsWith(n.containerCache)&&(r=!0,t.each(s.sortables,(function(){return this.positionAbs=s.positionAbs,this.helperProportions=s.helperProportions,this.offset.click=s.offset.click,r=(this===n||!this._intersectsWith(this.containerCache)||!t.contains(n.element[0],this.element[0]))&&r}))),r?(n.isOver||(n.isOver=1,s._parent=i.helper.parent(),n.currentItem=i.helper.appendTo(n.element).data("ui-sortable-item",!0),n.options._helper=n.options.helper,n.options.helper=function(){return i.helper[0]},e.target=n.currentItem[0],n._mouseCapture(e,!0),n._mouseStart(e,!0,!0),n.offset.click.top=s.offset.click.top,n.offset.click.left=s.offset.click.left,n.offset.parent.left-=s.offset.parent.left-n.offset.parent.left,n.offset.parent.top-=s.offset.parent.top-n.offset.parent.top,s._trigger("toSortable",e),s.dropped=n.element,t.each(s.sortables,(function(){this.refreshPositions()})),s.currentItem=s.element,n.fromOutside=s),n.currentItem&&(n._mouseDrag(e),i.position=n.position)):n.isOver&&(n.isOver=0,n.cancelHelperRemoval=!0,n.options._revert=n.options.revert,n.options.revert=!1,n._trigger("out",e,n._uiHash(n)),n._mouseStop(e,!0),n.options.revert=n.options._revert,n.options.helper=n.options._helper,n.placeholder&&n.placeholder.remove(),i.helper.appendTo(s._parent),s._refreshOffsets(e),i.position=s._generatePosition(e,!0),s._trigger("fromSortable",e),s.dropped=!1,t.each(s.sortables,(function(){this.refreshPositions()})))}))}}),t.ui.plugin.add("draggable","cursor",{start:function(e,i,s){var r=t("body");s=s.options,r.css("cursor")&&(s._cursor=r.css("cursor")),r.css("cursor",s.cursor)},stop:function(e,i,s){(s=s.options)._cursor&&t("body").css("cursor",s._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i,s){i=t(i.helper),s=s.options,i.css("opacity")&&(s._opacity=i.css("opacity")),i.css("opacity",s.opacity)},stop:function(e,i,s){(s=s.options)._opacity&&t(i.helper).css("opacity",s._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(e,i,s){var r=s.options,n=!1,o=s.scrollParentNotHidden[0],a=s.document[0];o!==a&&"HTML"!==o.tagName?(r.axis&&"x"===r.axis||(s.overflowOffset.top+o.offsetHeight-e.pageY<r.scrollSensitivity?o.scrollTop=n=o.scrollTop+r.scrollSpeed:e.pageY-s.overflowOffset.top<r.scrollSensitivity&&(o.scrollTop=n=o.scrollTop-r.scrollSpeed)),r.axis&&"y"===r.axis||(s.overflowOffset.left+o.offsetWidth-e.pageX<r.scrollSensitivity?o.scrollLeft=n=o.scrollLeft+r.scrollSpeed:e.pageX-s.overflowOffset.left<r.scrollSensitivity&&(o.scrollLeft=n=o.scrollLeft-r.scrollSpeed))):(r.axis&&"x"===r.axis||(e.pageY-t(a).scrollTop()<r.scrollSensitivity?n=t(a).scrollTop(t(a).scrollTop()-r.scrollSpeed):t(window).height()-(e.pageY-t(a).scrollTop())<r.scrollSensitivity&&(n=t(a).scrollTop(t(a).scrollTop()+r.scrollSpeed))),r.axis&&"y"===r.axis||(e.pageX-t(a).scrollLeft()<r.scrollSensitivity?n=t(a).scrollLeft(t(a).scrollLeft()-r.scrollSpeed):t(window).width()-(e.pageX-t(a).scrollLeft())<r.scrollSensitivity&&(n=t(a).scrollLeft(t(a).scrollLeft()+r.scrollSpeed)))),!1!==n&&t.ui.ddmanager&&!r.dropBehaviour&&t.ui.ddmanager.prepareOffsets(s,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,i,s){var r=s.options;s.snapElements=[],t(r.snap.constructor!==String?r.snap.items||":data(ui-draggable)":r.snap).each((function(){var e=t(this),i=e.offset();this!==s.element[0]&&s.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:i.top,left:i.left})}))},drag:function(e,i,s){for(var r,n,o,a,l,h,c,u,d,p=s.options,m=p.snapTolerance,f=i.offset.left,g=f+s.helperProportions.width,v=i.offset.top,b=v+s.helperProportions.height,y=s.snapElements.length-1;0<=y;y--)h=(l=s.snapElements[y].left-s.margins.left)+s.snapElements[y].width,u=(c=s.snapElements[y].top-s.margins.top)+s.snapElements[y].height,g<l-m||h+m<f||b<c-m||u+m<v||!t.contains(s.snapElements[y].item.ownerDocument,s.snapElements[y].item)?(s.snapElements[y].snapping&&s.options.snap.release&&s.options.snap.release.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[y].item})),s.snapElements[y].snapping=!1):("inner"!==p.snapMode&&(r=Math.abs(c-b)<=m,n=Math.abs(u-v)<=m,o=Math.abs(l-g)<=m,a=Math.abs(h-f)<=m,r&&(i.position.top=s._convertPositionTo("relative",{top:c-s.helperProportions.height,left:0}).top),n&&(i.position.top=s._convertPositionTo("relative",{top:u,left:0}).top),o&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l-s.helperProportions.width}).left),a&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h}).left)),d=r||n||o||a,"outer"!==p.snapMode&&(r=Math.abs(c-v)<=m,n=Math.abs(u-b)<=m,o=Math.abs(l-f)<=m,a=Math.abs(h-g)<=m,r&&(i.position.top=s._convertPositionTo("relative",{top:c,left:0}).top),n&&(i.position.top=s._convertPositionTo("relative",{top:u-s.helperProportions.height,left:0}).top),o&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l}).left),a&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h-s.helperProportions.width}).left)),!s.snapElements[y].snapping&&(r||n||o||a||d)&&s.options.snap.snap&&s.options.snap.snap.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[y].item})),s.snapElements[y].snapping=r||n||o||a||d)}}),t.ui.plugin.add("draggable","stack",{start:function(e,i,s){var r;s=s.options,s=t.makeArray(t(s.stack)).sort((function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)})),s.length&&(r=parseInt(t(s[0]).css("zIndex"),10)||0,t(s).each((function(e){t(this).css("zIndex",r+e)})),this.css("zIndex",r+s.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i,s){i=t(i.helper),s=s.options,i.css("zIndex")&&(s._zIndex=i.css("zIndex")),i.css("zIndex",s.zIndex)},stop:function(e,i,s){(s=s.options)._zIndex&&t(i.helper).css("zIndex",s._zIndex)}}),t.ui.draggable,t.widget("ui.droppable",{version:"1.13.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,e=this.options,i=e.accept;this.isover=!1,this.isout=!0,this.accept="function"==typeof i?i:function(t){return t.is(i)},this.proportions=function(){if(!arguments.length)return t=t||{width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};t=arguments[0]},this._addToManager(e.scope),e.addClasses&&this._addClass("ui-droppable")},_addToManager:function(e){t.ui.ddmanager.droppables[e]=t.ui.ddmanager.droppables[e]||[],t.ui.ddmanager.droppables[e].push(this)},_splice:function(t){for(var e=0;e<t.length;e++)t[e]===this&&t.splice(e,1)},_destroy:function(){var e=t.ui.ddmanager.droppables[this.options.scope];this._splice(e)},_setOption:function(e,i){var s;"accept"===e?this.accept="function"==typeof i?i:function(t){return t.is(i)}:"scope"===e&&(s=t.ui.ddmanager.droppables[this.options.scope],this._splice(s),this._addToManager(i)),this._super(e,i)},_activate:function(e){var i=t.ui.ddmanager.current;this._addActiveClass(),i&&this._trigger("activate",e,this.ui(i))},_deactivate:function(e){var i=t.ui.ddmanager.current;this._removeActiveClass(),i&&this._trigger("deactivate",e,this.ui(i))},_over:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._addHoverClass(),this._trigger("over",e,this.ui(i)))},_out:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._removeHoverClass(),this._trigger("out",e,this.ui(i)))},_drop:function(e,i){var s=i||t.ui.ddmanager.current,r=!1;return!(!s||(s.currentItem||s.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each((function(){var i=t(this).droppable("instance");if(i.options.greedy&&!i.options.disabled&&i.options.scope===s.options.scope&&i.accept.call(i.element[0],s.currentItem||s.element)&&t.ui.intersect(s,t.extend(i,{offset:i.element.offset()}),i.options.tolerance,e))return!(r=!0)})),!r&&!!this.accept.call(this.element[0],s.currentItem||s.element)&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",e,this.ui(s)),this.element))},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}}),t.ui.intersect=function(t,e,i,s){if(!e.offset)return!1;var r=(t.positionAbs||t.position.absolute).left+t.margins.left,n=(t.positionAbs||t.position.absolute).top+t.margins.top,o=r+t.helperProportions.width,a=n+t.helperProportions.height,l=e.offset.left,h=e.offset.top,c=l+e.proportions().width,u=h+e.proportions().height;switch(i){case"fit":return l<=r&&o<=c&&h<=n&&a<=u;case"intersect":return l<r+t.helperProportions.width/2&&o-t.helperProportions.width/2<c&&h<n+t.helperProportions.height/2&&a-t.helperProportions.height/2<u;case"pointer":return E(s.pageY,h,e.proportions().height)&&E(s.pageX,l,e.proportions().width);case"touch":return(h<=n&&n<=u||h<=a&&a<=u||n<h&&u<a)&&(l<=r&&r<=c||l<=o&&o<=c||r<l&&c<o);default:return!1}},!(t.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(e,i){var s,r,n=t.ui.ddmanager.droppables[e.options.scope]||[],o=i?i.type:null,a=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(s=0;s<n.length;s++)if(!(n[s].options.disabled||e&&!n[s].accept.call(n[s].element[0],e.currentItem||e.element))){for(r=0;r<a.length;r++)if(a[r]===n[s].element[0]){n[s].proportions().height=0;continue t}n[s].visible="none"!==n[s].element.css("display"),n[s].visible&&("mousedown"===o&&n[s]._activate.call(n[s],i),n[s].offset=n[s].element.offset(),n[s].proportions({width:n[s].element[0].offsetWidth,height:n[s].element[0].offsetHeight}))}},drop:function(e,i){var s=!1;return t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),(function(){this.options&&(!this.options.disabled&&this.visible&&t.ui.intersect(e,this,this.options.tolerance,i)&&(s=this._drop.call(this,i)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))})),s},dragStart:function(e,i){e.element.parentsUntil("body").on("scroll.droppable",(function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)}))},drag:function(e,i){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,i),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],(function(){var s,r,n,o;this.options.disabled||this.greedyChild||!this.visible||(o=!(n=t.ui.intersect(e,this,this.options.tolerance,i))&&this.isover?"isout":n&&!this.isover?"isover":null)&&(this.options.greedy&&(r=this.options.scope,(n=this.element.parents(":data(ui-droppable)").filter((function(){return t(this).droppable("instance").options.scope===r}))).length&&((s=t(n[0]).droppable("instance")).greedyChild="isover"===o)),s&&"isover"===o&&(s.isover=!1,s.isout=!0,s._out.call(s,i)),this[o]=!0,this["isout"===o?"isover":"isout"]=!1,this["isover"===o?"_over":"_out"].call(this,i),s&&"isout"===o&&(s.isout=!1,s.isover=!0,s._over.call(s,i)))}))},dragStop:function(e,i){e.element.parentsUntil("body").off("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)}})!==t.uiBackCompat&&t.widget("ui.droppable",t.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}}),t.ui.droppable,t.widget("ui.resizable",t.ui.mouse,{version:"1.13.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseFloat(t)||0},_isNumber:function(t){return!isNaN(parseFloat(t))},_hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop";if(i=!1,0<e[s])return!0;try{e[s]=1,i=0<e[s],e[s]=0}catch(e){}return i},_create:function(){var e,i=this.options,s=this;this._addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(t("<div class='ui-wrapper'></div>").css({overflow:"hidden",position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,e={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(e),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(e),this._proportionallyResize()),this._setupHandles(),i.autoHide&&t(this.element).on("mouseenter",(function(){i.disabled||(s._removeClass("ui-resizable-autohide"),s._handles.show())})).on("mouseleave",(function(){i.disabled||s.resizing||(s._addClass("ui-resizable-autohide"),s._handles.hide())})),this._mouseInit()},_destroy:function(){function e(e){t(e).removeData("resizable").removeData("ui-resizable").off(".resizable")}var i;return this._mouseDestroy(),this._addedHandles.remove(),this.elementIsWrapper&&(e(this.element),i=this.element,this.originalElement.css({position:i.css("position"),width:i.outerWidth(),height:i.outerHeight(),top:i.css("top"),left:i.css("left")}).insertAfter(i),i.remove()),this.originalElement.css("resize",this.originalResizeStyle),e(this.originalElement),this},_setOption:function(t,e){switch(this._super(t,e),t){case"handles":this._removeHandles(),this._setupHandles();break;case"aspectRatio":this._aspectRatio=!!e}},_setupHandles:function(){var e,i,s,r,n,o=this.options,a=this;if(this.handles=o.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=t(),this._addedHandles=t(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),s=this.handles.split(","),this.handles={},i=0;i<s.length;i++)r="ui-resizable-"+(e=String.prototype.trim.call(s[i])),n=t("<div>"),this._addClass(n,"ui-resizable-handle "+r),n.css({zIndex:o.zIndex}),this.handles[e]=".ui-resizable-"+e,this.element.children(this.handles[e]).length||(this.element.append(n),this._addedHandles=this._addedHandles.add(n));this._renderAxis=function(e){var i,s,r;for(i in e=e||this.element,this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=t(this.handles[i]),this._on(this.handles[i],{mousedown:a._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(s=t(this.handles[i],this.element),r=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),s=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),e.css(s,r),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",(function(){a.resizing||(this.className&&(n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=n&&n[1]?n[1]:"se")})),o.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._addedHandles.remove()},_mouseCapture:function(e){var i,s,r=!1;for(i in this.handles)(s=t(this.handles[i])[0])!==e.target&&!t.contains(s,e.target)||(r=!0);return!this.options.disabled&&r},_mouseStart:function(e){var i,s,r=this.options,n=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),s=this._num(this.helper.css("top")),r.containment&&(i+=t(r.containment).scrollLeft()||0,s+=t(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:s},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:n.width(),height:n.height()},this.originalSize=this._helper?{width:n.outerWidth(),height:n.outerHeight()}:{width:n.width(),height:n.height()},this.sizeDiff={width:n.outerWidth()-n.width(),height:n.outerHeight()-n.height()},this.originalPosition={left:i,top:s},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof r.aspectRatio?r.aspectRatio:this.originalSize.width/this.originalSize.height||1,r=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===r?this.axis+"-resize":r),this._addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var i=this.originalMousePosition,s=this.axis,r=e.pageX-i.left||0;return i=e.pageY-i.top||0,s=this._change[s],this._updatePrevProperties(),s&&(i=s.apply(this,[e,r,i]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),i=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(i)||(this._updatePrevProperties(),this._trigger("resize",e,this.ui()),this._applyChanges())),!1},_mouseStop:function(e){this.resizing=!1;var i,s,r,n=this.options,o=this;return this._helper&&(r=(i=(s=this._proportionallyResizeElements).length&&/textarea/i.test(s[0].nodeName))&&this._hasScroll(s[0],"left")?0:o.sizeDiff.height,s=i?0:o.sizeDiff.width,i={width:o.helper.width()-s,height:o.helper.height()-r},s=parseFloat(o.element.css("left"))+(o.position.left-o.originalPosition.left)||null,r=parseFloat(o.element.css("top"))+(o.position.top-o.originalPosition.top)||null,n.animate||this.element.css(t.extend(i,{top:r,left:s})),o.helper.height(o.size.height),o.helper.width(o.size.width),this._helper&&!n.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var e,i,s=this.options,r={minWidth:this._isNumber(s.minWidth)?s.minWidth:0,maxWidth:this._isNumber(s.maxWidth)?s.maxWidth:1/0,minHeight:this._isNumber(s.minHeight)?s.minHeight:0,maxHeight:this._isNumber(s.maxHeight)?s.maxHeight:1/0};(this._aspectRatio||t)&&(e=r.minHeight*this.aspectRatio,i=r.minWidth/this.aspectRatio,s=r.maxHeight*this.aspectRatio,t=r.maxWidth/this.aspectRatio,e>r.minWidth&&(r.minWidth=e),i>r.minHeight&&(r.minHeight=i),s<r.maxWidth&&(r.maxWidth=s),t<r.maxHeight&&(r.maxHeight=t)),this._vBoundaries=r},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,s=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===s&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===s&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,s=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,r=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,n=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,o=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,a=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,h=/sw|nw|w/.test(i);return i=/nw|ne|n/.test(i),n&&(t.width=e.minWidth),o&&(t.height=e.minHeight),s&&(t.width=e.maxWidth),r&&(t.height=e.maxHeight),n&&h&&(t.left=a-e.minWidth),s&&h&&(t.left=a-e.maxWidth),o&&i&&(t.top=l-e.minHeight),r&&i&&(t.top=l-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,i=[],s=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],r=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];e<4;e++)i[e]=parseFloat(s[e])||0,i[e]+=parseFloat(r[e])||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,i=this.helper||this.element;e<this._proportionallyResizeElements.length;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div></div>").css({overflow:"hidden"}),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize;return{left:this.originalPosition.left+e,width:i.width-e}},n:function(t,e,i){var s=this.originalSize;return{top:this.originalPosition.top+i,height:s.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},sw:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,s]))},ne:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},nw:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,s]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).resizable("instance"),s=i.options,r=i._proportionallyResizeElements,n=(a=r.length&&/textarea/i.test(r[0].nodeName))&&i._hasScroll(r[0],"left")?0:i.sizeDiff.height,o=a?0:i.sizeDiff.width,a={width:i.size.width-o,height:i.size.height-n};o=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,n=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null,i.element.animate(t.extend(a,n&&o?{top:n,left:o}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};r&&r.length&&t(r[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var e,i,s=t(this).resizable("instance"),r=s.options,n=s.element,o=r.containment,a=o instanceof t?o.get(0):/parent/.test(o)?n.parent().get(0):o;a&&(s.containerElement=t(a),/document/.test(o)||o===document?(s.containerOffset={left:0,top:0},s.containerPosition={left:0,top:0},s.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(a),i=[],t(["Top","Right","Left","Bottom"]).each((function(t,r){i[t]=s._num(e.css("padding"+r))})),s.containerOffset=e.offset(),s.containerPosition=e.position(),s.containerSize={height:e.innerHeight()-i[3],width:e.innerWidth()-i[1]},r=s.containerOffset,n=s.containerSize.height,o=s.containerSize.width,o=s._hasScroll(a,"left")?a.scrollWidth:o,n=s._hasScroll(a)?a.scrollHeight:n,s.parentData={element:a,left:r.left,top:r.top,width:o,height:n}))},resize:function(e){var i=t(this).resizable("instance"),s=i.options,r=i.containerOffset,n=i.position,o=i._aspectRatio||e.shiftKey,a={top:0,left:0},l=i.containerElement;e=!0,l[0]!==document&&/static/.test(l.css("position"))&&(a=r),n.left<(i._helper?r.left:0)&&(i.size.width=i.size.width+(i._helper?i.position.left-r.left:i.position.left-a.left),o&&(i.size.height=i.size.width/i.aspectRatio,e=!1),i.position.left=s.helper?r.left:0),n.top<(i._helper?r.top:0)&&(i.size.height=i.size.height+(i._helper?i.position.top-r.top:i.position.top),o&&(i.size.width=i.size.height*i.aspectRatio,e=!1),i.position.top=i._helper?r.top:0),s=i.containerElement.get(0)===i.element.parent().get(0),n=/relative|absolute/.test(i.containerElement.css("position")),s&&n?(i.offset.left=i.parentData.left+i.position.left,i.offset.top=i.parentData.top+i.position.top):(i.offset.left=i.element.offset().left,i.offset.top=i.element.offset().top),n=Math.abs(i.sizeDiff.width+(i._helper?i.offset.left-a.left:i.offset.left-r.left)),r=Math.abs(i.sizeDiff.height+(i._helper?i.offset.top-a.top:i.offset.top-r.top)),n+i.size.width>=i.parentData.width&&(i.size.width=i.parentData.width-n,o&&(i.size.height=i.size.width/i.aspectRatio,e=!1)),r+i.size.height>=i.parentData.height&&(i.size.height=i.parentData.height-r,o&&(i.size.width=i.size.height*i.aspectRatio,e=!1)),e||(i.position.left=i.prevPosition.left,i.position.top=i.prevPosition.top,i.size.width=i.prevSize.width,i.size.height=i.prevSize.height)},stop:function(){var e=t(this).resizable("instance"),i=e.options,s=e.containerOffset,r=e.containerPosition,n=e.containerElement,o=(l=t(e.helper)).offset(),a=l.outerWidth()-e.sizeDiff.width,l=l.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(n.css("position"))&&t(this).css({left:o.left-r.left-s.left,width:a,height:l}),e._helper&&!i.animate&&/static/.test(n.css("position"))&&t(this).css({left:o.left-r.left-s.left,width:a,height:l})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).resizable("instance").options;t(e.alsoResize).each((function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseFloat(e.width()),height:parseFloat(e.height()),left:parseFloat(e.css("left")),top:parseFloat(e.css("top"))})}))},resize:function(e,i){var s=t(this).resizable("instance"),r=s.options,n=s.originalSize,o=s.originalPosition,a={height:s.size.height-n.height||0,width:s.size.width-n.width||0,top:s.position.top-o.top||0,left:s.position.left-o.left||0};t(r.alsoResize).each((function(){var e=t(this),s=t(this).data("ui-resizable-alsoresize"),r={},n=e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(n,(function(t,e){var i=(s[e]||0)+(a[e]||0);i&&0<=i&&(r[e]=i||null)})),e.css(r)}))},stop:function(){t(this).removeData("ui-resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).resizable("instance"),i=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}),e._addClass(e.ghost,"ui-resizable-ghost"),!1!==t.uiBackCompat&&"string"==typeof e.options.ghost&&e.ghost.addClass(this.options.ghost),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).resizable("instance");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).resizable("instance");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e,i=t(this).resizable("instance"),s=i.options,r=i.size,n=i.originalSize,o=i.originalPosition,a=i.axis,l="number"==typeof s.grid?[s.grid,s.grid]:s.grid,h=l[0]||1,c=l[1]||1,u=Math.round((r.width-n.width)/h)*h,d=Math.round((r.height-n.height)/c)*c,p=n.width+u,m=n.height+d,f=s.maxWidth&&s.maxWidth<p,g=s.maxHeight&&s.maxHeight<m,v=s.minWidth&&s.minWidth>p;r=s.minHeight&&s.minHeight>m,s.grid=l,v&&(p+=h),r&&(m+=c),f&&(p-=h),g&&(m-=c),/^(se|s|e)$/.test(a)?(i.size.width=p,i.size.height=m):/^(ne)$/.test(a)?(i.size.width=p,i.size.height=m,i.position.top=o.top-d):/^(sw)$/.test(a)?(i.size.width=p,i.size.height=m,i.position.left=o.left-u):((m-c<=0||p-h<=0)&&(e=i._getPaddingPlusBorderDimensions(this)),0<m-c?(i.size.height=m,i.position.top=o.top-d):(m=c-e.height,i.size.height=m,i.position.top=o.top+n.height-m),0<p-h?(i.size.width=p,i.position.left=o.left-u):(p=h-e.width,i.size.width=p,i.position.left=o.left+n.width-p))}}),t.ui.resizable,t.widget("ui.selectable",t.ui.mouse,{version:"1.13.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var e=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){e.elementPos=t(e.element[0]).offset(),e.selectees=t(e.options.filter,e.element[0]),e._addClass(e.selectees,"ui-selectee"),e.selectees.each((function(){var i=t(this),s={left:(s=i.offset()).left-e.elementPos.left,top:s.top-e.elementPos.top};t.data(this,"selectable-item",{element:this,$element:i,left:s.left,top:s.top,right:s.left+i.outerWidth(),bottom:s.top+i.outerHeight(),startselected:!1,selected:i.hasClass("ui-selected"),selecting:i.hasClass("ui-selecting"),unselecting:i.hasClass("ui-unselecting")})}))},this.refresh(),this._mouseInit(),this.helper=t("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(e){var i=this,s=this.options;this.opos=[e.pageX,e.pageY],this.elementPos=t(this.element[0]).offset(),this.options.disabled||(this.selectees=t(s.filter,this.element[0]),this._trigger("start",e),t(s.appendTo).append(this.helper),this.helper.css({left:e.pageX,top:e.pageY,width:0,height:0}),s.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each((function(){var s=t.data(this,"selectable-item");s.startselected=!0,e.metaKey||e.ctrlKey||(i._removeClass(s.$element,"ui-selected"),s.selected=!1,i._addClass(s.$element,"ui-unselecting"),s.unselecting=!0,i._trigger("unselecting",e,{unselecting:s.element}))})),t(e.target).parents().addBack().each((function(){var s,r=t.data(this,"selectable-item");if(r)return s=!e.metaKey&&!e.ctrlKey||!r.$element.hasClass("ui-selected"),i._removeClass(r.$element,s?"ui-unselecting":"ui-selected")._addClass(r.$element,s?"ui-selecting":"ui-unselecting"),r.unselecting=!s,r.selecting=s,(r.selected=s)?i._trigger("selecting",e,{selecting:r.element}):i._trigger("unselecting",e,{unselecting:r.element}),!1})))},_mouseDrag:function(e){if(this.dragged=!0,!this.options.disabled){var i,s=this,r=this.options,n=this.opos[0],o=this.opos[1],a=e.pageX,l=e.pageY;return a<n&&(i=a,a=n,n=i),l<o&&(i=l,l=o,o=i),this.helper.css({left:n,top:o,width:a-n,height:l-o}),this.selectees.each((function(){var i=t.data(this,"selectable-item"),h=!1,c={};i&&i.element!==s.element[0]&&(c.left=i.left+s.elementPos.left,c.right=i.right+s.elementPos.left,c.top=i.top+s.elementPos.top,c.bottom=i.bottom+s.elementPos.top,"touch"===r.tolerance?h=!(c.left>a||c.right<n||c.top>l||c.bottom<o):"fit"===r.tolerance&&(h=c.left>n&&c.right<a&&c.top>o&&c.bottom<l),h?(i.selected&&(s._removeClass(i.$element,"ui-selected"),i.selected=!1),i.unselecting&&(s._removeClass(i.$element,"ui-unselecting"),i.unselecting=!1),i.selecting||(s._addClass(i.$element,"ui-selecting"),i.selecting=!0,s._trigger("selecting",e,{selecting:i.element}))):(i.selecting&&((e.metaKey||e.ctrlKey)&&i.startselected?(s._removeClass(i.$element,"ui-selecting"),i.selecting=!1,s._addClass(i.$element,"ui-selected"),i.selected=!0):(s._removeClass(i.$element,"ui-selecting"),i.selecting=!1,i.startselected&&(s._addClass(i.$element,"ui-unselecting"),i.unselecting=!0),s._trigger("unselecting",e,{unselecting:i.element}))),i.selected&&(e.metaKey||e.ctrlKey||i.startselected||(s._removeClass(i.$element,"ui-selected"),i.selected=!1,s._addClass(i.$element,"ui-unselecting"),i.unselecting=!0,s._trigger("unselecting",e,{unselecting:i.element})))))})),!1}},_mouseStop:function(e){var i=this;return this.dragged=!1,t(".ui-unselecting",this.element[0]).each((function(){var s=t.data(this,"selectable-item");i._removeClass(s.$element,"ui-unselecting"),s.unselecting=!1,s.startselected=!1,i._trigger("unselected",e,{unselected:s.element})})),t(".ui-selecting",this.element[0]).each((function(){var s=t.data(this,"selectable-item");i._removeClass(s.$element,"ui-selecting")._addClass(s.$element,"ui-selected"),s.selecting=!1,s.selected=!0,s.startselected=!0,i._trigger("selected",e,{selected:s.element})})),this._trigger("stop",e),this.helper.remove(),!1}}),t.widget("ui.sortable",t.ui.mouse,{version:"1.13.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,i){return e<=t&&t<e+i},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){var e=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),t.each(this.items,(function(){e._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")}))},_destroy:function(){this._mouseDestroy();for(var t=this.items.length-1;0<=t;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(e,i){var s=null,r=!1,n=this;return!(this.reverting||this.options.disabled||"static"===this.options.type||(this._refreshItems(e),t(e.target).parents().each((function(){if(t.data(this,n.widgetName+"-item")===n)return s=t(this),!1})),!(s=t.data(e.target,n.widgetName+"-item")===n?t(e.target):s)||this.options.handle&&!i&&(t(this.options.handle,s).find("*").addBack().each((function(){this===e.target&&(r=!0)})),!r)||(this.currentItem=s,this._removeCurrentsFromItems(),0)))},_mouseStart:function(e,i,s){var r,n,o=this.options;if((this.currentContainer=this).refreshPositions(),this.appendTo=t("parent"!==o.appendTo?o.appendTo:this.currentItem.parent()),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),this.scrollParent=this.placeholder.scrollParent(),t.extend(this.offset,{parent:this._getParentOffset()}),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(n=this.document.find("body"),this.storedCursor=n.css("cursor"),n.css("cursor",o.cursor),this.storedStylesheet=t("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(n)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(r=this.containers.length-1;0<=r;r--)this.containers[r]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!o.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this.helper.parent().is(this.appendTo)||(this.helper.detach().appendTo(this.appendTo),this.offset.parent=this._getParentOffset()),this.position=this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,this.lastPositionAbs=this.positionAbs=this._convertPositionTo("absolute"),this._mouseDrag(e),!0},_scroll:function(t){var e=this.options,i=!1;return this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<e.scrollSensitivity?this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop+e.scrollSpeed:t.pageY-this.overflowOffset.top<e.scrollSensitivity&&(this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop-e.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<e.scrollSensitivity?this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft+e.scrollSpeed:t.pageX-this.overflowOffset.left<e.scrollSensitivity&&(this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft-e.scrollSpeed)):(t.pageY-this.document.scrollTop()<e.scrollSensitivity?i=this.document.scrollTop(this.document.scrollTop()-e.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<e.scrollSensitivity&&(i=this.document.scrollTop(this.document.scrollTop()+e.scrollSpeed)),t.pageX-this.document.scrollLeft()<e.scrollSensitivity?i=this.document.scrollLeft(this.document.scrollLeft()-e.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<e.scrollSensitivity&&(i=this.document.scrollLeft(this.document.scrollLeft()+e.scrollSpeed))),i},_mouseDrag:function(e){var i,s,r,n,o=this.options;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),o.scroll&&!1!==this._scroll(e)&&(this._refreshItemPositions(!0),t.ui.ddmanager&&!o.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.dragDirection={vertical:this._getDragVerticalDirection(),horizontal:this._getDragHorizontalDirection()},i=this.items.length-1;0<=i;i--)if(r=(s=this.items[i]).item[0],(n=this._intersectsWithPointer(s))&&s.instance===this.currentContainer&&!(r===this.currentItem[0]||this.placeholder[1===n?"next":"prev"]()[0]===r||t.contains(this.placeholder[0],r)||"semi-dynamic"===this.options.type&&t.contains(this.element[0],r))){if(this.direction=1===n?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(e,s),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){var s,r,n,o;if(e)return t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert?(r=(s=this).placeholder.offset(),o={},(n=this.options.axis)&&"x"!==n||(o.left=r.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),n&&"y"!==n||(o.top=r.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(o,parseInt(this.options.revert,10)||500,(function(){s._clear(e)}))):this._clear(e,i),!1},cancel:function(){if(this.dragging){this._mouseUp(new t.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var e=this.containers.length-1;0<=e;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},t(i).each((function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);i&&s.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))})),!s.length&&e.key&&s.push(e.key+"="),s.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},i.each((function(){s.push(t(e.item||this).attr(e.attribute||"id")||"")})),s},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,s=this.positionAbs.top,r=s+this.helperProportions.height,n=t.left,o=n+t.width,a=t.top,l=a+t.height,h=this.offset.click.top,c=this.offset.click.left;return h="x"===this.options.axis||a<s+h&&s+h<l,c="y"===this.options.axis||n<e+c&&e+c<o,"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?h&&c:n<e+this.helperProportions.width/2&&i-this.helperProportions.width/2<o&&a<s+this.helperProportions.height/2&&r-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var e="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height);return t="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),!(!e||!t)&&(e=this.dragDirection.vertical,t=this.dragDirection.horizontal,this.floating?"right"===t||"down"===e?2:1:e&&("down"===e?2:1))},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),s=this.dragDirection.vertical;return t=this.dragDirection.horizontal,this.floating&&t?"right"===t&&i||"left"===t&&!i:s&&("down"===s&&e||"up"===s&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!=t&&(0<t?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!=t&&(0<t?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){var i,s,r,n,o=[],a=[],l=this._connectWith();if(l&&e)for(i=l.length-1;0<=i;i--)for(s=(r=t(l[i],this.document[0])).length-1;0<=s;s--)(n=t.data(r[s],this.widgetFullName))&&n!==this&&!n.options.disabled&&a.push(["function"==typeof n.options.items?n.options.items.call(n.element):t(n.options.items,n.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),n]);function h(){o.push(this)}for(a.push(["function"==typeof this.options.items?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=a.length-1;0<=i;i--)a[i][0].each(h);return t(o)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,(function(t){for(var i=0;i<e.length;i++)if(e[i]===t.item[0])return!1;return!0}))},_refreshItems:function(e){this.items=[],this.containers=[this];var i,s,r,n,o,a,l,h,c=this.items,u=[["function"==typeof this.options.items?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(i=d.length-1;0<=i;i--)for(s=(r=t(d[i],this.document[0])).length-1;0<=s;s--)(n=t.data(r[s],this.widgetFullName))&&n!==this&&!n.options.disabled&&(u.push(["function"==typeof n.options.items?n.options.items.call(n.element[0],e,{item:this.currentItem}):t(n.options.items,n.element),n]),this.containers.push(n));for(i=u.length-1;0<=i;i--)for(o=u[i][1],h=(a=u[i][s=0]).length;s<h;s++)(l=t(a[s])).data(this.widgetName+"-item",o),c.push({item:l,instance:o,width:0,height:0,left:0,top:0})},_refreshItemPositions:function(e){for(var i,s,r=this.items.length-1;0<=r;r--)i=this.items[r],this.currentContainer&&i.instance!==this.currentContainer&&i.item[0]!==this.currentItem[0]||(s=this.options.toleranceElement?t(this.options.toleranceElement,i.item):i.item,e||(i.width=s.outerWidth(),i.height=s.outerHeight()),s=s.offset(),i.left=s.left,i.top=s.top)},refreshPositions:function(t){var e,i;if(this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),this._refreshItemPositions(t),this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(e=this.containers.length-1;0<=e;e--)i=this.containers[e].element.offset(),this.containers[e].containerCache.left=i.left,this.containers[e].containerCache.top=i.top,this.containers[e].containerCache.width=this.containers[e].element.outerWidth(),this.containers[e].containerCache.height=this.containers[e].element.outerHeight();return this},_createPlaceholder:function(e){var i,s,r=(e=e||this).options;r.placeholder&&r.placeholder.constructor!==String||(i=r.placeholder,s=e.currentItem[0].nodeName.toLowerCase(),r.placeholder={element:function(){var r=t("<"+s+">",e.document[0]);return e._addClass(r,"ui-sortable-placeholder",i||e.currentItem[0].className)._removeClass(r,"ui-sortable-helper"),"tbody"===s?e._createTrPlaceholder(e.currentItem.find("tr").eq(0),t("<tr>",e.document[0]).appendTo(r)):"tr"===s?e._createTrPlaceholder(e.currentItem,r):"img"===s&&r.attr("src",e.currentItem.attr("src")),i||r.css("visibility","hidden"),r},update:function(t,n){i&&!r.forcePlaceholderSize||(n.height()&&(!r.forcePlaceholderSize||"tbody"!==s&&"tr"!==s)||n.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(r.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),r.placeholder.update(e,e.placeholder)},_createTrPlaceholder:function(e,i){var s=this;e.children().each((function(){t("<td>&#160;</td>",s.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(i)}))},_contactContainers:function(e){for(var i,s,r,n,o,a,l,h,c,u=null,d=null,p=this.containers.length-1;0<=p;p--)t.contains(this.currentItem[0],this.containers[p].element[0])||(this._intersectsWith(this.containers[p].containerCache)?u&&t.contains(this.containers[p].element[0],u.element[0])||(u=this.containers[p],d=p):this.containers[p].containerCache.over&&(this.containers[p]._trigger("out",e,this._uiHash(this)),this.containers[p].containerCache.over=0));if(u)if(1===this.containers.length)this.containers[d].containerCache.over||(this.containers[d]._trigger("over",e,this._uiHash(this)),this.containers[d].containerCache.over=1);else{for(s=1e4,r=null,n=(h=u.floating||this._isFloating(this.currentItem))?"left":"top",o=h?"width":"height",c=h?"pageX":"pageY",i=this.items.length-1;0<=i;i--)t.contains(this.containers[d].element[0],this.items[i].item[0])&&this.items[i].item[0]!==this.currentItem[0]&&(a=this.items[i].item.offset()[n],l=!1,e[c]-a>this.items[i][o]/2&&(l=!0),Math.abs(e[c]-a)<s&&(s=Math.abs(e[c]-a),r=this.items[i],this.direction=l?"up":"down"));(r||this.options.dropOnEmpty)&&(this.currentContainer!==this.containers[d]?(r?this._rearrange(e,r,null,!0):this._rearrange(e,null,this.containers[d].element,!0),this._trigger("change",e,this._uiHash()),this.containers[d]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[d],this.options.placeholder.update(this.currentContainer,this.placeholder),this.scrollParent=this.placeholder.scrollParent(),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this.containers[d]._trigger("over",e,this._uiHash(this)),this.containers[d].containerCache.over=1):this.currentContainer.containerCache.over||(this.containers[d]._trigger("over",e,this._uiHash()),this.currentContainer.containerCache.over=1))}},_createHelper:function(e){var i=this.options;return(e="function"==typeof i.helper?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem).parents("body").length||this.appendTo[0].appendChild(e[0]),e[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),e[0].style.width&&!i.forceHelperSize||e.width(this.currentItem.width()),e[0].style.height&&!i.forceHelperSize||e.height(this.currentItem.height()),e},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),"left"in(t=Array.isArray(t)?{left:+t[0],top:+t[1]||0}:t)&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),{top:(e=this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie?{top:0,left:0}:e).top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s=this.options;"parent"===s.containment&&(s.containment=this.helper[0].parentNode),"document"!==s.containment&&"window"!==s.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===s.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===s.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(s.containment)||(e=t(s.containment)[0],i=t(s.containment).offset(),s="hidden"!==t(e).css("overflow"),this.containment=[i.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,i){i=i||this.position;var s="absolute"===e?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return e=/(html|body)/i.test(r[0].tagName),{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():e?0:r.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():e?0:r.scrollLeft())*s}},_generatePosition:function(e){var i=this.options,s=e.pageX,r=e.pageY,n="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(n[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(r=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(r=this.containment[3]+this.offset.click.top)),i.grid&&(e=this.originalPageY+Math.round((r-this.originalPageY)/i.grid[1])*i.grid[1],r=!this.containment||e-this.offset.click.top>=this.containment[1]&&e-this.offset.click.top<=this.containment[3]?e:e-this.offset.click.top>=this.containment[1]?e-i.grid[1]:e+i.grid[1],e=this.originalPageX+Math.round((s-this.originalPageX)/i.grid[0])*i.grid[0],s=!this.containment||e-this.offset.click.left>=this.containment[0]&&e-this.offset.click.left<=this.containment[2]?e:e-this.offset.click.left>=this.containment[0]?e-i.grid[0]:e+i.grid[0])),{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:n.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:n.scrollLeft())}},_rearrange:function(t,e,i,s){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay((function(){r===this.counter&&this.refreshPositions(!s)}))},_clear:function(t,e){this.reverting=!1;var i,s=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)"auto"!==this._storedCSS[i]&&"static"!==this._storedCSS[i]||(this._storedCSS[i]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();function r(t,e,i){return function(s){i._trigger(t,s,e._uiHash(e))}}for(this.fromOutside&&!e&&s.push((function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))})),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||s.push((function(t){this._trigger("update",t,this._uiHash())})),this!==this.currentContainer&&(e||(s.push((function(t){this._trigger("remove",t,this._uiHash())})),s.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),s.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;0<=i;i--)e||s.push(r("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(s.push(r("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(i=0;i<s.length;i++)s[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===t.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}}),t.widget("ui.accordion",{version:"1.13.1",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",header:function(t){return t.find("> li > :first-child").add(t.find("> :not(li)").even())},heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var e=this.options;this.prevShow=this.prevHide=t(),this._addClass("ui-accordion","ui-widget ui-helper-reset"),this.element.attr("role","tablist"),e.collapsible||!1!==e.active&&null!=e.active||(e.active=0),this._processPanels(),e.active<0&&(e.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():t()}},_createIcons:function(){var e,i=this.options.icons;i&&(e=t("<span>"),this._addClass(e,"ui-accordion-header-icon","ui-icon "+i.header),e.prependTo(this.headers),e=this.active.children(".ui-accordion-header-icon"),this._removeClass(e,i.header)._addClass(e,null,i.activeHeader)._addClass(this.headers,"ui-accordion-icons"))},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons"),this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var t;this.element.removeAttr("role"),this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId(),this._destroyIcons(),t=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&t.css("height","")},_setOption:function(t,e){"active"!==t?("event"===t&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(e)),this._super(t,e),"collapsible"!==t||e||!1!==this.options.active||this._activate(0),"icons"===t&&(this._destroyIcons(),e&&this._createIcons())):this._activate(e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",t),this._toggleClass(null,"ui-state-disabled",!!t),this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!t)},_keydown:function(e){if(!e.altKey&&!e.ctrlKey){var i=t.ui.keyCode,s=this.headers.length,r=this.headers.index(e.target),n=!1;switch(e.keyCode){case i.RIGHT:case i.DOWN:n=this.headers[(r+1)%s];break;case i.LEFT:case i.UP:n=this.headers[(r-1+s)%s];break;case i.SPACE:case i.ENTER:this._eventHandler(e);break;case i.HOME:n=this.headers[0];break;case i.END:n=this.headers[s-1]}n&&(t(e.target).attr("tabIndex",-1),t(n).attr("tabIndex",0),t(n).trigger("focus"),e.preventDefault())}},_panelKeyDown:function(e){e.keyCode===t.ui.keyCode.UP&&e.ctrlKey&&t(e.currentTarget).prev().trigger("focus")},refresh:function(){var e=this.options;this._processPanels(),!1===e.active&&!0===e.collapsible||!this.headers.length?(e.active=!1,this.active=t()):!1===e.active?this._activate(0):this.active.length&&!t.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(e.active=!1,this.active=t()):this._activate(Math.max(0,e.active-1)):e.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var t=this.headers,e=this.panels;"function"==typeof this.options.header?this.headers=this.options.header(this.element):this.headers=this.element.find(this.options.header),this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default"),this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide(),this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content"),e&&(this._off(t.not(this.headers)),this._off(e.not(this.panels)))},_refresh:function(){var e,i=this.options,s=i.heightStyle,r=this.element.parent();this.active=this._findActive(i.active),this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed"),this._addClass(this.active.next(),"ui-accordion-content-active"),this.active.next().show(),this.headers.attr("role","tab").each((function(){var e=t(this),i=e.uniqueId().attr("id"),s=e.next(),r=s.uniqueId().attr("id");e.attr("aria-controls",r),s.attr("aria-labelledby",i)})).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(i.event),"fill"===s?(e=r.height(),this.element.siblings(":visible").each((function(){var i=t(this),s=i.css("position");"absolute"!==s&&"fixed"!==s&&(e-=i.outerHeight(!0))})),this.headers.each((function(){e-=t(this).outerHeight(!0)})),this.headers.next().each((function(){t(this).height(Math.max(0,e-t(this).innerHeight()+t(this).height()))})).css("overflow","auto")):"auto"===s&&(e=0,this.headers.next().each((function(){var i=t(this).is(":visible");i||t(this).show(),e=Math.max(e,t(this).css("height","").height()),i||t(this).hide()})).height(e))},_activate:function(e){(e=this._findActive(e)[0])!==this.active[0]&&(e=e||this.active[0],this._eventHandler({target:e,currentTarget:e,preventDefault:t.noop}))},_findActive:function(e){return"number"==typeof e?this.headers.eq(e):t()},_setupEvents:function(e){var i={keydown:"_keydown"};e&&t.each(e.split(" "),(function(t,e){i[e]="_eventHandler"})),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(e){var i=this.options,s=this.active,r=t(e.currentTarget),n=r[0]===s[0],o=n&&i.collapsible,a=o?t():r.next(),l=s.next();a={oldHeader:s,oldPanel:l,newHeader:o?t():r,newPanel:a},e.preventDefault(),n&&!i.collapsible||!1===this._trigger("beforeActivate",e,a)||(i.active=!o&&this.headers.index(r),this.active=n?t():r,this._toggle(a),this._removeClass(s,"ui-accordion-header-active","ui-state-active"),i.icons&&(s=s.children(".ui-accordion-header-icon"),this._removeClass(s,null,i.icons.activeHeader)._addClass(s,null,i.icons.header)),n||(this._removeClass(r,"ui-accordion-header-collapsed")._addClass(r,"ui-accordion-header-active","ui-state-active"),i.icons&&(n=r.children(".ui-accordion-header-icon"),this._removeClass(n,null,i.icons.header)._addClass(n,null,i.icons.activeHeader)),this._addClass(r.next(),"ui-accordion-content-active")))},_toggle:function(e){var i=e.newPanel,s=this.prevShow.length?this.prevShow:e.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=s,this.options.animate?this._animate(i,s,e):(s.hide(),i.show(),this._toggleComplete(e)),s.attr({"aria-hidden":"true"}),s.prev().attr({"aria-selected":"false","aria-expanded":"false"}),i.length&&s.length?s.prev().attr({tabIndex:-1,"aria-expanded":"false"}):i.length&&this.headers.filter((function(){return 0===parseInt(t(this).attr("tabIndex"),10)})).attr("tabIndex",-1),i.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(t,e,i){var s,r,n,o=this,a=0,l=t.css("box-sizing"),h=t.length&&(!e.length||t.index()<e.index()),c=this.options.animate||{},u=h&&c.down||c;return h=function(){o._toggleComplete(i)},r=(r="string"==typeof u?u:r)||u.easing||c.easing,n=(n="number"==typeof u?u:n)||u.duration||c.duration,e.length?t.length?(s=t.show().outerHeight(),e.animate(this.hideProps,{duration:n,easing:r,step:function(t,e){e.now=Math.round(t)}}),void t.hide().animate(this.showProps,{duration:n,easing:r,complete:h,step:function(t,i){i.now=Math.round(t),"height"!==i.prop?"content-box"===l&&(a+=i.now):"content"!==o.options.heightStyle&&(i.now=Math.round(s-e.outerHeight()-a),a=0)}})):e.animate(this.hideProps,n,r,h):t.animate(this.showProps,n,r,h)},_toggleComplete:function(t){var e=t.oldPanel,i=e.prev();this._removeClass(e,"ui-accordion-content-active"),this._removeClass(i,"ui-accordion-header-active")._addClass(i,"ui-accordion-header-collapsed"),e.length&&(e.parent()[0].className=e.parent()[0].className),this._trigger("activate",null,t)}}),t.widget("ui.menu",{version:"1.13.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.lastMousePosition={x:null,y:null},this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(t){t.preventDefault(),this._activateItem(t)},"click .ui-menu-item":function(e){var i=t(e.target),s=t(t.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(e),e.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(e):!this.element.is(":focus")&&s.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":"_activateItem","mousemove .ui-menu-item":"_activateItem",mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var i=this.active||this._menuItems().first();e||this.focus(t,i)},blur:function(e){this._delay((function(){t.contains(this.element[0],t.ui.safeActiveElement(this.document[0]))||this.collapseAll(e)}))},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){this._closeOnDocumentClick(t)&&this.collapseAll(t,!0),this.mouseHandled=!1}})},_activateItem:function(e){var i,s;this.previousFilter||e.clientX===this.lastMousePosition.x&&e.clientY===this.lastMousePosition.y||(this.lastMousePosition={x:e.clientX,y:e.clientY},i=t(e.target).closest(".ui-menu-item"),s=t(e.currentTarget),i[0]===s[0]&&(s.is(".ui-state-active")||(this._removeClass(s.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(e,s))))},_destroy:function(){var e=this.element.find(".ui-menu-item").removeAttr("role aria-disabled").children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),e.children().each((function(){var e=t(this);e.data("ui-menu-submenu-caret")&&e.remove()}))},_keydown:function(e){var i,s,r,n=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:i=this.previousFilter||"",r=n=!1,s=96<=e.keyCode&&e.keyCode<=105?(e.keyCode-96).toString():String.fromCharCode(e.keyCode),clearTimeout(this.filterTimer),s===i?r=!0:s=i+s,i=this._filterMenuItems(s),(i=r&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i).length||(s=String.fromCharCode(e.keyCode),i=this._filterMenuItems(s)),i.length?(this.focus(e,i),this.previousFilter=s,this.filterTimer=this._delay((function(){delete this.previousFilter}),1e3)):delete this.previousFilter}n&&e.preventDefault()},_activate:function(t){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var e,i,s=this,r=this.options.icons.submenu,n=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),i=n.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each((function(){var e=t(this),i=e.prev(),n=t("<span>").data("ui-menu-submenu-caret",!0);s._addClass(n,"ui-menu-icon","ui-icon "+r),i.attr("aria-haspopup","true").prepend(n),e.attr("aria-labelledby",i.attr("id"))})),this._addClass(i,"ui-menu","ui-widget ui-widget-content ui-front"),(e=n.add(this.element).find(this.options.items)).not(".ui-menu-item").each((function(){var e=t(this);s._isDivider(e)&&s._addClass(e,"ui-menu-divider","ui-widget-content")})),n=(i=e.not(".ui-menu-item, .ui-menu-divider")).children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(i,"ui-menu-item")._addClass(n,"ui-menu-item-wrapper"),e.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){var i;"icons"===t&&(i=this.element.find(".ui-menu-icon"),this._removeClass(i,null,this.options.icons.submenu)._addClass(i,null,e.submenu)),this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",String(t)),this._toggleClass(null,"ui-state-disabled",!!t)},focus:function(t,e){var i;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),i=this.active.children(".ui-menu-item-wrapper"),this._addClass(i,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),i=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(i,null,"ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay((function(){this._close()}),this.delay),(i=e.children(".ui-menu")).length&&t&&/^mouse/.test(t.type)&&this._startOpening(i),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var i,s,r;this._hasScroll()&&(s=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,r=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,i=e.offset().top-this.activeMenu.offset().top-s-r,s=this.activeMenu.scrollTop(),r=this.activeMenu.height(),e=e.outerHeight(),i<0?this.activeMenu.scrollTop(s+i):r<i+e&&this.activeMenu.scrollTop(s+i-r+e))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",t,{item:this.active}),this.active=null)},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay((function(){this._close(),this._open(t)}),this.delay))},_open:function(e){var i=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(e,i){clearTimeout(this.timer),this.timer=this._delay((function(){var s=i?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));s.length||(s=this.element),this._close(s),this.blur(e),this._removeClass(s.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=s}),i?0:this.delay)},_close:function(t){(t=t||(this.active?this.active.parent():this.element)).find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(e){return!t(e.target).closest(".ui-menu").length},_isDivider:function(t){return!/[^\-\u2014\u2013\s]/.test(t.text())},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this._menuItems(this.active.children(".ui-menu")).first();e&&e.length&&(this._open(e.parent()),this._delay((function(){this.focus(t,e)})))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_menuItems:function(t){return(t||this.element).find(this.options.items).filter(".ui-menu-item")},_move:function(t,e,i){var s;(s=this.active?"first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").last():this.active[t+"All"](".ui-menu-item").first():s)&&s.length&&this.active||(s=this._menuItems(this.activeMenu)[e]()),this.focus(i,s)},nextPage:function(e){var i,s,r;this.active?this.isLastItem()||(this._hasScroll()?(s=this.active.offset().top,r=this.element.innerHeight(),0===t.fn.jquery.indexOf("3.2.")&&(r+=this.element[0].offsetHeight-this.element.outerHeight()),this.active.nextAll(".ui-menu-item").each((function(){return(i=t(this)).offset().top-s-r<0})),this.focus(e,i)):this.focus(e,this._menuItems(this.activeMenu)[this.active?"last":"first"]())):this.next(e)},previousPage:function(e){var i,s,r;this.active?this.isFirstItem()||(this._hasScroll()?(s=this.active.offset().top,r=this.element.innerHeight(),0===t.fn.jquery.indexOf("3.2.")&&(r+=this.element[0].offsetHeight-this.element.outerHeight()),this.active.prevAll(".ui-menu-item").each((function(){return 0<(i=t(this)).offset().top-s+r})),this.focus(e,i)):this.focus(e,this._menuItems(this.activeMenu).first())):this.next(e)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,i)},_filterMenuItems:function(e){e=e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");var i=new RegExp("^"+e,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter((function(){return i.test(String.prototype.trim.call(t(this).children(".ui-menu-item-wrapper").text()))}))}}),t.widget("ui.autocomplete",{version:"1.13.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,liveRegionTimer:null,_create:function(){var e,i,s,r="textarea"===(n=this.element[0].nodeName.toLowerCase()),n="input"===n;this.isMultiLine=r||!n&&this._isContentEditable(this.element),this.valueMethod=this.element[r||n?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(r){if(this.element.prop("readOnly"))i=s=e=!0;else{i=s=e=!1;var n=t.ui.keyCode;switch(r.keyCode){case n.PAGE_UP:e=!0,this._move("previousPage",r);break;case n.PAGE_DOWN:e=!0,this._move("nextPage",r);break;case n.UP:e=!0,this._keyEvent("previous",r);break;case n.DOWN:e=!0,this._keyEvent("next",r);break;case n.ENTER:this.menu.active&&(e=!0,r.preventDefault(),this.menu.select(r));break;case n.TAB:this.menu.active&&this.menu.select(r);break;case n.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(r),r.preventDefault());break;default:i=!0,this._searchTimeout(r)}}},keypress:function(s){if(e)return e=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||s.preventDefault());if(!i){var r=t.ui.keyCode;switch(s.keyCode){case r.PAGE_UP:this._move("previousPage",s);break;case r.PAGE_DOWN:this._move("nextPage",s);break;case r.UP:this._keyEvent("previous",s);break;case r.DOWN:this._keyEvent("next",s)}}},input:function(t){if(s)return s=!1,void t.preventDefault();this._searchTimeout(t)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){clearTimeout(this.searching),this.close(t),this._change(t)}}),this._initSource(),this.menu=t("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().attr({unselectable:"on"}).menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault()},menufocus:function(e,i){var s,r;if(this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",(function(){t(e.target).trigger(e.originalEvent)}));r=i.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",e,{item:r})&&e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(r.value),(s=i.item.attr("aria-label")||r.value)&&String.prototype.trim.call(s).length&&(clearTimeout(this.liveRegionTimer),this.liveRegionTimer=this._delay((function(){this.liveRegion.html(t("<div>").text(s))}),100))},menuselect:function(e,i){var s=i.item.data("ui-autocomplete-item"),r=this.previous;this.element[0]!==t.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=r,this._delay((function(){this.previous=r,this.selectedItem=s}))),!1!==this._trigger("select",e,{item:s})&&this._value(s.value),this.term=this._value(),this.close(e),this.selectedItem=s}}),this.liveRegion=t("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(e){var i=this.menu.element[0];return e.target===this.element[0]||e.target===i||t.contains(i,e.target)},_closeOnClickOutside:function(t){this._isEventTargetInWidget(t)||this.close()},_appendTo:function(){var e=this.options.appendTo;return(e=(e=e&&(e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)))&&e[0]?e:this.element.closest(".ui-front, dialog")).length?e:this.document[0].body},_initSource:function(){var e,i,s=this;Array.isArray(this.options.source)?(e=this.options.source,this.source=function(i,s){s(t.ui.autocomplete.filter(e,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(e,r){s.xhr&&s.xhr.abort(),s.xhr=t.ajax({url:i,data:e,dataType:"json",success:function(t){r(t)},error:function(){r([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay((function(){var e=this.term===this._value(),i=this.menu.element.is(":visible"),s=t.altKey||t.ctrlKey||t.metaKey||t.shiftKey;e&&(i||s)||(this.selectedItem=null,this.search(null,t))}),this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):!1!==this._trigger("search",e)?this._search(t):void 0},_search:function(t){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var t=++this.requestIndex;return function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")}.bind(this)},__response:function(t){t=t&&this._normalize(t),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,(function(e){return"string"==typeof e?{label:e,value:e}:t.extend({},e,{label:e.label||e.value,value:e.value||e.label})}))},_suggest:function(e){var i=this.menu.element.empty();this._renderMenu(i,e),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,i){var s=this;t.each(i,(function(t,i){s._renderItemData(e,i)}))},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(e,i){return t("<li>").append(t("<div>").text(i.label)).appendTo(e)},_move:function(t,e){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[t](e);this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(t,e),e.preventDefault())},_isContentEditable:function(t){if(!t.length)return!1;var e=t.prop("contentEditable");return"inherit"===e?this._isContentEditable(t.parent()):"true"===e}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,i){var s=new RegExp(t.ui.autocomplete.escapeRegex(i),"i");return t.grep(e,(function(t){return s.test(t.label||t.value||t)}))}}),t.widget("ui.autocomplete",t.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(1<t?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var i;this._superApply(arguments),this.options.disabled||this.cancelSearch||(i=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,clearTimeout(this.liveRegionTimer),this.liveRegionTimer=this._delay((function(){this.liveRegion.html(t("<div>").text(i))}),100))}}),t.ui.autocomplete;var w,k,T,S=/ui-corner-([a-z]){2,6}/g;function x(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:"",selectMonthLabel:"Select month",selectYearLabel:"Select year"},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,onUpdateDatepicker:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.regional.en=t.extend(!0,{},this.regional[""]),this.regional["en-US"]=t.extend(!0,{},this.regional.en),this.dpDiv=D(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function D(e){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.on("mouseout",i,(function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")})).on("mouseover",i,O)}function O(){t.datepicker._isDisabledDatepicker((k.inline?k.dpDiv.parent():k.input)[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))}function A(e,i){for(var s in t.extend(e,i),i)null==i[s]&&(e[s]=i[s]);return e}function P(t){return function(){var e=this.element.val();t.apply(this,arguments),this._refresh(),e!==this.element.val()&&this._trigger("change")}}t.widget("ui.controlgroup",{version:"1.13.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var e=this,i=[];t.each(this.options.items,(function(s,r){var n,o={};if(r)return"controlgroupLabel"===s?((n=e.element.find(r)).each((function(){var e=t(this);e.children(".ui-controlgroup-label-contents").length||e.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")})),e._addClass(n,null,"ui-widget ui-widget-content ui-state-default"),void(i=i.concat(n.get()))):void(t.fn[s]&&(o=e["_"+s+"Options"]?e["_"+s+"Options"]("middle"):{classes:{}},e.element.find(r).each((function(){var r=t(this),n=r[s]("instance"),a=t.widget.extend({},o);"button"===s&&r.parent(".ui-spinner").length||((n=n||r[s]()[s]("instance"))&&(a.classes=e._resolveClassesValues(a.classes,n)),r[s](a),a=r[s]("widget"),t.data(a[0],"ui-controlgroup-data",n||r[s]("instance")),i.push(a[0]))}))))})),this.childWidgets=t(t.uniqueSort(i)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(e){this.childWidgets.each((function(){var i=t(this).data("ui-controlgroup-data");i&&i[e]&&i[e]()}))},_updateCornerClass:function(t,e){e=this._buildSimpleOptions(e,"label").classes.label,this._removeClass(t,null,"ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all"),this._addClass(t,null,e)},_buildSimpleOptions:function(t,e){var i="vertical"===this.options.direction,s={classes:{}};return s.classes[e]={middle:"",first:"ui-corner-"+(i?"top":"left"),last:"ui-corner-"+(i?"bottom":"right"),only:"ui-corner-all"}[t],s},_spinnerOptions:function(t){return(t=this._buildSimpleOptions(t,"ui-spinner")).classes["ui-spinner-up"]="",t.classes["ui-spinner-down"]="",t},_buttonOptions:function(t){return this._buildSimpleOptions(t,"ui-button")},_checkboxradioOptions:function(t){return this._buildSimpleOptions(t,"ui-checkboxradio-label")},_selectmenuOptions:function(t){var e="vertical"===this.options.direction;return{width:e&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(e?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(e?"top":"left")},last:{"ui-selectmenu-button-open":e?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(e?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[t]}},_resolveClassesValues:function(e,i){var s={};return t.each(e,(function(t){var r=i.options.classes[t]||"";r=String.prototype.trim.call(r.replace(S,"")),s[t]=(r+" "+e[t]).replace(/\s+/g," ")})),s},_setOption:function(t,e){"direction"===t&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(t,e),"disabled"!==t?this.refresh():this._callChildMethod(e?"disable":"enable")},refresh:function(){var e,i=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),e=this.childWidgets,(e=this.options.onlyVisible?e.filter(":visible"):e).length&&(t.each(["first","last"],(function(t,s){var r,n=e[s]().data("ui-controlgroup-data");n&&i["_"+n.widgetName+"Options"]?((r=i["_"+n.widgetName+"Options"](1===e.length?"only":s)).classes=i._resolveClassesValues(r.classes,n),n.element[n.widgetName](r)):i._updateCornerClass(e[s](),s)})),this._callChildMethod("refresh"))}}),t.widget("ui.checkboxradio",[t.ui.formResetMixin,{version:"1.13.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var e,i=this,s=this._super()||{};return this._readType(),e=this.element.labels(),this.label=t(e[e.length-1]),this.label.length||t.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each((function(){i.originalLabel+=3===this.nodeType?t(this).text():this.outerHTML})),this.originalLabel&&(s.label=this.originalLabel),null!=(e=this.element[0].disabled)&&(s.disabled=e),s},_create:function(){var t=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),t&&this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var e=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,"input"===e&&/radio|checkbox/.test(this.type)||t.error("Can't create checkboxradio on element.nodeName="+e+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var e=this.element[0].name,i="input[name='"+t.escapeSelector(e)+"']";return e?(this.form.length?t(this.form[0].elements).filter(i):t(i).filter((function(){return 0===t(this)._form().length}))).not(this.element):t([])},_toggleClasses:function(){var e=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",e),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",e)._toggleClass(this.icon,null,"ui-icon-blank",!e),"radio"===this.type&&this._getRadioGroup().each((function(){var e=t(this).checkboxradio("instance");e&&e._removeClass(e.label,"ui-checkboxradio-checked","ui-state-active")}))},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(t,e){if("label"!==t||e){if(this._super(t,e),"disabled"===t)return this._toggleClass(this.label,null,"ui-state-disabled",e),void(this.element[0].disabled=e);this.refresh()}},_updateIcon:function(e){var i="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=t("<span>"),this.iconSpace=t("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(i+=e?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,e?"ui-icon-blank":"ui-icon-check")):i+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",i),e||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var t=this.label.contents().not(this.element[0]);this.icon&&(t=t.not(this.icon[0])),(t=this.iconSpace?t.not(this.iconSpace[0]):t).remove(),this.label.append(this.options.label)},refresh:function(){var t=this.element[0].checked,e=this.element[0].disabled;this._updateIcon(t),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t),null!==this.options.label&&this._updateLabel(),e!==this.options.disabled&&this._setOptions({disabled:e})}}]),t.ui.checkboxradio,t.widget("ui.button",{version:"1.13.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var t,e=this._super()||{};return this.isInput=this.element.is("input"),null!=(t=this.element[0].disabled)&&(e.disabled=t),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(e.label=this.originalLabel),e},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(e){e.keyCode===t.ui.keyCode.SPACE&&(e.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(e,i){var s="iconPosition"!==e,r=s?this.options.iconPosition:i;e="top"===r||"bottom"===r,this.icon?s&&this._removeClass(this.icon,null,this.options.icon):(this.icon=t("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),s&&this._addClass(this.icon,null,i),this._attachIcon(r),e?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=t("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(r))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(t){this.icon[/^(?:end|bottom)/.test(t)?"before":"after"](this.iconSpace)},_attachIcon:function(t){this.element[/^(?:end|bottom)/.test(t)?"append":"prepend"](this.icon)},_setOptions:function(t){var e=(void 0===t.showLabel?this.options:t).showLabel,i=(void 0===t.icon?this.options:t).icon;e||i||(t.showLabel=!0),this._super(t)},_setOption:function(t,e){"icon"===t&&(e?this._updateIcon(t,e):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===t&&this._updateIcon(t,e),"showLabel"===t&&(this._toggleClass("ui-button-icon-only",null,!e),this._updateTooltip()),"label"===t&&(this.isInput?this.element.val(e):(this.element.html(e),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(t,e),"disabled"===t&&(this._toggleClass(null,"ui-state-disabled",e),(this.element[0].disabled=e)&&this.element.trigger("blur"))},refresh:function(){var t=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOptions({disabled:t}),this._updateTooltip()}}),!1!==t.uiBackCompat&&(t.widget("ui.button",t.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(t,e){"text"!==t?("showLabel"===t&&(this.options.text=e),"icon"===t&&(this.options.icons.primary=e),"icons"===t&&(e.primary?(this._super("icon",e.primary),this._super("iconPosition","beginning")):e.secondary&&(this._super("icon",e.secondary),this._super("iconPosition","end"))),this._superApply(arguments)):this._super("showLabel",e)}}),t.fn.button=(w=t.fn.button,function(e){var i="string"==typeof e,s=Array.prototype.slice.call(arguments,1),r=this;return i?this.length||"instance"!==e?this.each((function(){var i=t(this).attr("type"),n=t.data(this,"ui-"+("checkbox"!==i&&"radio"!==i?"button":"checkboxradio"));return"instance"===e?(r=n,!1):n?"function"!=typeof n[e]||"_"===e.charAt(0)?t.error("no such method '"+e+"' for button widget instance"):(i=n[e].apply(n,s))!==n&&void 0!==i?(r=i&&i.jquery?r.pushStack(i.get()):i,!1):void 0:t.error("cannot call methods on button prior to initialization; attempted to call method '"+e+"'")})):r=void 0:(s.length&&(e=t.widget.extend.apply(null,[e].concat(s))),this.each((function(){var i,s="checkbox"!==(i=t(this).attr("type"))&&"radio"!==i?"button":"checkboxradio";(i=t.data(this,"ui-"+s))?(i.option(e||{}),i._init&&i._init()):"button"!=s?t(this).checkboxradio(t.extend({icon:!1},e)):w.call(t(this),e)}))),r}),t.fn.buttonset=function(){return t.ui.controlgroup||t.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==Ve(arguments[0])&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),t.ui.button,t.extend(t.ui,{datepicker:{version:"1.13.1"}}),t.extend(x.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return A(this._defaults,t||{}),this},_attachDatepicker:function(e,i){var s,r=e.nodeName.toLowerCase(),n="div"===r||"span"===r;e.id||(this.uuid+=1,e.id="dp"+this.uuid),(s=this._newInst(t(e),n)).settings=t.extend({},i||{}),"input"===r?this._connectDatepicker(e,s):n&&this._inlineDatepicker(e,s)},_newInst:function(e,i){return{id:e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?D(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,i){var s=t(e);i.append=t([]),i.trigger=t([]),s.hasClass(this.markerClassName)||(this._attachments(s,i),s.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(i),t.data(e,"datepicker",i),i.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,i){var s,r=this._get(i,"appendText"),n=this._get(i,"isRTL");i.append&&i.append.remove(),r&&(i.append=t("<span>").addClass(this._appendClass).text(r),e[n?"before":"after"](i.append)),e.off("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),"focus"!==(s=this._get(i,"showOn"))&&"both"!==s||e.on("focus",this._showDatepicker),"button"!==s&&"both"!==s||(r=this._get(i,"buttonText"),s=this._get(i,"buttonImage"),this._get(i,"buttonImageOnly")?i.trigger=t("<img>").addClass(this._triggerClass).attr({src:s,alt:r,title:r}):(i.trigger=t("<button type='button'>").addClass(this._triggerClass),s?i.trigger.html(t("<img>").attr({src:s,alt:r,title:r})):i.trigger.text(r)),e[n?"before":"after"](i.trigger),i.trigger.on("click",(function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():(t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]&&t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])),!1})))},_autoSize:function(t){var e,i,s,r,n,o;this._get(t,"autoSize")&&!t.inline&&(n=new Date(2009,11,20),(o=this._get(t,"dateFormat")).match(/[DM]/)&&(e=function(t){for(r=s=i=0;r<t.length;r++)t[r].length>i&&(i=t[r].length,s=r);return s},n.setMonth(e(this._get(t,o.match(/MM/)?"monthNames":"monthNamesShort"))),n.setDate(e(this._get(t,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-n.getDay())),t.input.attr("size",this._formatDate(t,n).length))},_inlineDatepicker:function(e,i){var s=t(e);s.hasClass(this.markerClassName)||(s.addClass(this.markerClassName).append(i.dpDiv),t.data(e,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(e),i.dpDiv.css("display","block"))},_dialogDatepicker:function(e,i,s,r,n){var o,a=this._dialogInst;return a||(this.uuid+=1,o="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+o+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),t("body").append(this._dialogInput),(a=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},t.data(this._dialogInput[0],"datepicker",a)),A(a.settings,r||{}),i=i&&i.constructor===Date?this._formatDate(a,i):i,this._dialogInput.val(i),this._pos=n?n.length?n:[n.pageX,n.pageY]:null,this._pos||(o=document.documentElement.clientWidth,r=document.documentElement.clientHeight,i=document.documentElement.scrollLeft||document.body.scrollLeft,n=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[o/2-100+i,r/2-150+n]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),a.settings.onSelect=s,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],"datepicker",a),this},_destroyDatepicker:function(e){var i,s=t(e),r=t.data(e,"datepicker");s.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),t.removeData(e,"datepicker"),"input"===i?(r.append.remove(),r.trigger.remove(),s.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):"div"!==i&&"span"!==i||s.removeClass(this.markerClassName).empty(),k===r&&(k=null,this._curInst=null))},_enableDatepicker:function(e){var i,s=t(e),r=t.data(e,"datepicker");s.hasClass(this.markerClassName)&&("input"===(i=e.nodeName.toLowerCase())?(e.disabled=!1,r.trigger.filter("button").each((function(){this.disabled=!1})).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==i&&"span"!==i||((s=s.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,(function(t){return t===e?null:t})))},_disableDatepicker:function(e){var i,s=t(e),r=t.data(e,"datepicker");s.hasClass(this.markerClassName)&&("input"===(i=e.nodeName.toLowerCase())?(e.disabled=!0,r.trigger.filter("button").each((function(){this.disabled=!0})).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==i&&"span"!==i||((s=s.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,(function(t){return t===e?null:t})),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;e<this._disabledInputs.length;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,"datepicker")}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,i,s){var r,n,o=this._getInst(e);if(2===arguments.length&&"string"==typeof i)return"defaults"===i?t.extend({},t.datepicker._defaults):o?"all"===i?t.extend({},o.settings):this._get(o,i):null;r=i||{},"string"==typeof i&&((r={})[i]=s),o&&(this._curInst===o&&this._hideDatepicker(),n=this._getDateDatepicker(e,!0),i=this._getMinMaxDate(o,"min"),s=this._getMinMaxDate(o,"max"),A(o.settings,r),null!==i&&void 0!==r.dateFormat&&void 0===r.minDate&&(o.settings.minDate=this._formatDate(o,i)),null!==s&&void 0!==r.dateFormat&&void 0===r.maxDate&&(o.settings.maxDate=this._formatDate(o,s)),"disabled"in r&&(r.disabled?this._disableDatepicker(e):this._enableDatepicker(e)),this._attachments(t(e),o),this._autoSize(o),this._setDate(o,n),this._updateAlternate(o),this._updateDatepicker(o))},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){(t=this._getInst(t))&&this._updateDatepicker(t)},_setDateDatepicker:function(t,e){(t=this._getInst(t))&&(this._setDate(t,e),this._updateDatepicker(t),this._updateAlternate(t))},_getDateDatepicker:function(t,e){return(t=this._getInst(t))&&!t.inline&&this._setDateFromField(t,e),t?this._getDate(t):null},_doKeyDown:function(e){var i,s,r=t.datepicker._getInst(e.target),n=!0,o=r.dpDiv.is(".ui-datepicker-rtl");if(r._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),n=!1;break;case 13:return(s=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",r.dpDiv))[0]&&t.datepicker._selectDay(e.target,r.selectedMonth,r.selectedYear,s[0]),(i=t.datepicker._get(r,"onSelect"))?(s=t.datepicker._formatDate(r),i.apply(r.input?r.input[0]:null,[s,r])):t.datepicker._hideDatepicker(),!1;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(r,"stepBigMonths"):-t.datepicker._get(r,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(r,"stepBigMonths"):+t.datepicker._get(r,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),n=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),n=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,o?1:-1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(r,"stepBigMonths"):-t.datepicker._get(r,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),n=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,o?-1:1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(r,"stepBigMonths"):+t.datepicker._get(r,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),n=e.ctrlKey||e.metaKey;break;default:n=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):n=!1;n&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var i,s=t.datepicker._getInst(e.target);if(t.datepicker._get(s,"constrainInput"))return i=t.datepicker._possibleChars(t.datepicker._get(s,"dateFormat")),s=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||s<" "||!i||-1<i.indexOf(s)},_doKeyUp:function(e){if((e=t.datepicker._getInst(e.target)).input.val()!==e.lastVal)try{t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),e.input?e.input.val():null,t.datepicker._getFormatConfig(e))&&(t.datepicker._setDateFromField(e),t.datepicker._updateAlternate(e),t.datepicker._updateDatepicker(e))}catch(e){}return!0},_showDatepicker:function(e){var i,s,r,n;"input"!==(e=e.target||e).nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),t.datepicker._isDisabledDatepicker(e)||t.datepicker._lastInput===e||(n=t.datepicker._getInst(e),t.datepicker._curInst&&t.datepicker._curInst!==n&&(t.datepicker._curInst.dpDiv.stop(!0,!0),n&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),!1!==(s=(r=t.datepicker._get(n,"beforeShow"))?r.apply(e,[e,n]):{})&&(A(n.settings,s),n.lastVal=null,t.datepicker._lastInput=e,t.datepicker._setDateFromField(n),t.datepicker._inDialog&&(e.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(e),t.datepicker._pos[1]+=e.offsetHeight),i=!1,t(e).parents().each((function(){return!(i|="fixed"===t(this).css("position"))})),r={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,n.dpDiv.empty(),n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(n),r=t.datepicker._checkOffset(n,r,i),n.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":i?"fixed":"absolute",display:"none",left:r.left+"px",top:r.top+"px"}),n.inline||(s=t.datepicker._get(n,"showAnim"),r=t.datepicker._get(n,"duration"),n.dpDiv.css("z-index",function(t){for(var e,i;t.length&&t[0]!==document;){if(("absolute"===(e=t.css("position"))||"relative"===e||"fixed"===e)&&(i=parseInt(t.css("zIndex"),10),!isNaN(i)&&0!==i))return i;t=t.parent()}return 0}(t(e))+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[s]?n.dpDiv.show(s,t.datepicker._get(n,"showOptions"),r):n.dpDiv[s||"show"](s?r:null),t.datepicker._shouldFocusInput(n)&&n.input.trigger("focus"),t.datepicker._curInst=n)))},_updateDatepicker:function(e){this.maxRows=4,(k=e).dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var i,s=this._getNumberOfMonths(e),r=s[1],n=e.dpDiv.find("."+this._dayOverClass+" a"),o=t.datepicker._get(e,"onUpdateDatepicker");0<n.length&&O.apply(n.get(0)),e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),1<r&&e.dpDiv.addClass("ui-datepicker-multi-"+r).css("width",17*r+"em"),e.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(e)&&e.input.trigger("focus"),e.yearshtml&&(i=e.yearshtml,setTimeout((function(){i===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year").first().replaceWith(e.yearshtml),i=e.yearshtml=null}),0)),o&&o.apply(e.input?e.input[0]:null,[e])},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,i,s){var r=e.dpDiv.outerWidth(),n=e.dpDiv.outerHeight(),o=e.input?e.input.outerWidth():0,a=e.input?e.input.outerHeight():0,l=document.documentElement.clientWidth+(s?0:t(document).scrollLeft()),h=document.documentElement.clientHeight+(s?0:t(document).scrollTop());return i.left-=this._get(e,"isRTL")?r-o:0,i.left-=s&&i.left===e.input.offset().left?t(document).scrollLeft():0,i.top-=s&&i.top===e.input.offset().top+a?t(document).scrollTop():0,i.left-=Math.min(i.left,i.left+r>l&&r<l?Math.abs(i.left+r-l):0),i.top-=Math.min(i.top,i.top+n>h&&n<h?Math.abs(n+a):0),i},_findPos:function(e){for(var i=this._getInst(e),s=this._get(i,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.pseudos.hidden(e));)e=e[s?"previousSibling":"nextSibling"];return[(i=t(e).offset()).left,i.top]},_hideDatepicker:function(e){var i,s,r=this._curInst;!r||e&&r!==t.data(e,"datepicker")||this._datepickerShowing&&(i=this._get(r,"showAnim"),s=this._get(r,"duration"),e=function(){t.datepicker._tidyDialog(r)},t.effects&&(t.effects.effect[i]||t.effects[i])?r.dpDiv.hide(i,t.datepicker._get(r,"showOptions"),s,e):r.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?s:null,e),i||e(),this._datepickerShowing=!1,(e=this._get(r,"onClose"))&&e.apply(r.input?r.input[0]:null,[r.input?r.input.val():"",r]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(e){var i;t.datepicker._curInst&&(i=t(e.target),e=t.datepicker._getInst(i[0]),(i[0].id===t.datepicker._mainDivId||0!==i.parents("#"+t.datepicker._mainDivId).length||i.hasClass(t.datepicker.markerClassName)||i.closest("."+t.datepicker._triggerClass).length||!t.datepicker._datepickerShowing||t.datepicker._inDialog&&t.blockUI)&&(!i.hasClass(t.datepicker.markerClassName)||t.datepicker._curInst===e)||t.datepicker._hideDatepicker())},_adjustDate:function(e,i,s){var r=t(e);e=this._getInst(r[0]),this._isDisabledDatepicker(r[0])||(this._adjustInstDate(e,i,s),this._updateDatepicker(e))},_gotoToday:function(e){var i=t(e),s=this._getInst(i[0]);this._get(s,"gotoCurrent")&&s.currentDay?(s.selectedDay=s.currentDay,s.drawMonth=s.selectedMonth=s.currentMonth,s.drawYear=s.selectedYear=s.currentYear):(e=new Date,s.selectedDay=e.getDate(),s.drawMonth=s.selectedMonth=e.getMonth(),s.drawYear=s.selectedYear=e.getFullYear()),this._notifyChange(s),this._adjustDate(i)},_selectMonthYear:function(e,i,s){var r=t(e);(e=this._getInst(r[0]))["selected"+("M"===s?"Month":"Year")]=e["draw"+("M"===s?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(e),this._adjustDate(r)},_selectDay:function(e,i,s,r){var n=t(e);t(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(n[0])||((n=this._getInst(n[0])).selectedDay=n.currentDay=parseInt(t("a",r).attr("data-date")),n.selectedMonth=n.currentMonth=i,n.selectedYear=n.currentYear=s,this._selectDate(e,this._formatDate(n,n.currentDay,n.currentMonth,n.currentYear)))},_clearDate:function(e){e=t(e),this._selectDate(e,"")},_selectDate:function(e,i){var s=t(e);e=this._getInst(s[0]),i=null!=i?i:this._formatDate(e),e.input&&e.input.val(i),this._updateAlternate(e),(s=this._get(e,"onSelect"))?s.apply(e.input?e.input[0]:null,[i,e]):e.input&&e.input.trigger("change"),e.inline?this._updateDatepicker(e):(this._hideDatepicker(),this._lastInput=e.input[0],"object"!=Ve(e.input[0])&&e.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(e){var i,s,r=this._get(e,"altField");r&&(i=this._get(e,"altFormat")||this._get(e,"dateFormat"),s=this._getDate(e),e=this.formatDate(i,s,this._getFormatConfig(e)),t(document).find(r).val(e))},noWeekends:function(t){return[0<(t=t.getDay())&&t<6,""]},iso8601Week:function(t){var e=new Date(t.getTime());return e.setDate(e.getDate()+4-(e.getDay()||7)),t=e.getTime(),e.setMonth(0),e.setDate(1),Math.floor(Math.round((t-e)/864e5)/7)+1},parseDate:function(e,i,s){if(null==e||null==i)throw"Invalid arguments";if(""===(i="object"==Ve(i)?i.toString():i+""))return null;for(var r,n,o,a=0,l="string"!=typeof(l=(s?s.shortYearCutoff:null)||this._defaults.shortYearCutoff)?l:(new Date).getFullYear()%100+parseInt(l,10),h=(s?s.dayNamesShort:null)||this._defaults.dayNamesShort,c=(s?s.dayNames:null)||this._defaults.dayNames,u=(s?s.monthNamesShort:null)||this._defaults.monthNamesShort,d=(s?s.monthNames:null)||this._defaults.monthNames,p=-1,m=-1,f=-1,g=-1,v=!1,b=function(t){return(t=E+1<e.length&&e.charAt(E+1)===t)&&E++,t},y=function(t){var e=b(t);if(e="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,e=new RegExp("^\\d{"+("y"===t?e:1)+","+e+"}"),!(e=i.substring(a).match(e)))throw"Missing number at position "+a;return a+=e[0].length,parseInt(e[0],10)},C=function(e,s,r){var n=-1;if(s=t.map(b(e)?r:s,(function(t,e){return[[e,t]]})).sort((function(t,e){return-(t[1].length-e[1].length)})),t.each(s,(function(t,e){var s=e[1];if(i.substr(a,s.length).toLowerCase()===s.toLowerCase())return n=e[0],a+=s.length,!1})),-1!==n)return n+1;throw"Unknown name at position "+a},_=function(){if(i.charAt(a)!==e.charAt(E))throw"Unexpected literal at position "+a;a++},E=0;E<e.length;E++)if(v)"'"!==e.charAt(E)||b("'")?_():v=!1;else switch(e.charAt(E)){case"d":f=y("d");break;case"D":C("D",h,c);break;case"o":g=y("o");break;case"m":m=y("m");break;case"M":m=C("M",u,d);break;case"y":p=y("y");break;case"@":p=(o=new Date(y("@"))).getFullYear(),m=o.getMonth()+1,f=o.getDate();break;case"!":p=(o=new Date((y("!")-this._ticksTo1970)/1e4)).getFullYear(),m=o.getMonth()+1,f=o.getDate();break;case"'":b("'")?_():v=!0;break;default:_()}if(a<i.length&&(n=i.substr(a),!/^\s+/.test(n)))throw"Extra/unparsed characters found in date: "+n;if(-1===p?p=(new Date).getFullYear():p<100&&(p+=(new Date).getFullYear()-(new Date).getFullYear()%100+(p<=l?0:-100)),-1<g)for(m=1,f=g;!(f<=(r=this._getDaysInMonth(p,m-1)));)m++,f-=r;if((o=this._daylightSavingAdjust(new Date(p,m-1,f))).getFullYear()!==p||o.getMonth()+1!==m||o.getDate()!==f)throw"Invalid date";return o},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(t,e,i){if(!e)return"";function s(t,e,i){var s=""+e;if(c(t))for(;s.length<i;)s="0"+s;return s}function r(t,e,i,s){return(c(t)?s:i)[e]}var n,o=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,a=(i?i.dayNames:null)||this._defaults.dayNames,l=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,h=(i?i.monthNames:null)||this._defaults.monthNames,c=function(e){return(e=n+1<t.length&&t.charAt(n+1)===e)&&n++,e},u="",d=!1;if(e)for(n=0;n<t.length;n++)if(d)"'"!==t.charAt(n)||c("'")?u+=t.charAt(n):d=!1;else switch(t.charAt(n)){case"d":u+=s("d",e.getDate(),2);break;case"D":u+=r("D",e.getDay(),o,a);break;case"o":u+=s("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=s("m",e.getMonth()+1,2);break;case"M":u+=r("M",e.getMonth(),l,h);break;case"y":u+=c("y")?e.getFullYear():(e.getFullYear()%100<10?"0":"")+e.getFullYear()%100;break;case"@":u+=e.getTime();break;case"!":u+=1e4*e.getTime()+this._ticksTo1970;break;case"'":c("'")?u+="'":d=!0;break;default:u+=t.charAt(n)}return u},_possibleChars:function(t){for(var e="",i=!1,s=function(e){return(e=r+1<t.length&&t.charAt(r+1)===e)&&r++,e},r=0;r<t.length;r++)if(i)"'"!==t.charAt(r)||s("'")?e+=t.charAt(r):i=!1;else switch(t.charAt(r)){case"d":case"m":case"y":case"@":e+="0123456789";break;case"D":case"M":return null;case"'":s("'")?e+="'":i=!0;break;default:e+=t.charAt(r)}return e},_get:function(t,e){return(void 0!==t.settings[e]?t.settings:this._defaults)[e]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var i=this._get(t,"dateFormat"),s=t.lastVal=t.input?t.input.val():null,r=this._getDefaultDate(t),n=r,o=this._getFormatConfig(t);try{n=this.parseDate(i,s,o)||r}catch(t){s=e?"":s}t.selectedDay=n.getDate(),t.drawMonth=t.selectedMonth=n.getMonth(),t.drawYear=t.selectedYear=n.getFullYear(),t.currentDay=s?n.getDate():0,t.currentMonth=s?n.getMonth():0,t.currentYear=s?n.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,i,s){var r,n;return i=null==i||""===i?s:"string"==typeof i?function(i){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),i,t.datepicker._getFormatConfig(e))}catch(i){}for(var s=(i.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,r=s.getFullYear(),n=s.getMonth(),o=s.getDate(),a=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=a.exec(i);l;){switch(l[2]||"d"){case"d":case"D":o+=parseInt(l[1],10);break;case"w":case"W":o+=7*parseInt(l[1],10);break;case"m":case"M":n+=parseInt(l[1],10),o=Math.min(o,t.datepicker._getDaysInMonth(r,n));break;case"y":case"Y":r+=parseInt(l[1],10),o=Math.min(o,t.datepicker._getDaysInMonth(r,n))}l=a.exec(i)}return new Date(r,n,o)}(i):"number"==typeof i?isNaN(i)?s:(r=i,(n=new Date).setDate(n.getDate()+r),n):new Date(i.getTime()),(i=i&&"Invalid Date"===i.toString()?s:i)&&(i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0)),this._daylightSavingAdjust(i)},_daylightSavingAdjust:function(t){return t?(t.setHours(12<t.getHours()?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var s=!e,r=t.selectedMonth,n=t.selectedYear;e=this._restrictMinMax(t,this._determineDate(t,e,new Date)),t.selectedDay=t.currentDay=e.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=e.getMonth(),t.drawYear=t.selectedYear=t.currentYear=e.getFullYear(),r===t.selectedMonth&&n===t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(s?"":this._formatDate(t))},_getDate:function(t){return!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay))},_attachHandlers:function(e){var i=this._get(e,"stepMonths"),s="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map((function(){var e={prev:function(){t.datepicker._adjustDate(s,-i,"M")},next:function(){t.datepicker._adjustDate(s,+i,"M")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(s)},selectDay:function(){return t.datepicker._selectDay(s,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return t.datepicker._selectMonthYear(s,this,"M"),!1},selectYear:function(){return t.datepicker._selectMonthYear(s,this,"Y"),!1}};t(this).on(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])}))},_generateHTML:function(e){var i,s,r,n,o,a,l,h,c,u,d,p,m,f,g,v,b,y,C,_,E,w,k,T,S,x,D,O,A,P,I,L,j=new Date,N=this._daylightSavingAdjust(new Date(j.getFullYear(),j.getMonth(),j.getDate())),B=this._get(e,"isRTL"),R=this._get(e,"showButtonPanel"),M=this._get(e,"hideIfNoPrevNext"),F=this._get(e,"navigationAsDateFormat"),H=this._getNumberOfMonths(e),z=this._get(e,"showCurrentAtPos"),W=(j=this._get(e,"stepMonths"),1!==H[0]||1!==H[1]),$=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),U=this._getMinMaxDate(e,"min"),V=this._getMinMaxDate(e,"max"),q=e.drawMonth-z,K=e.drawYear;if(q<0&&(q+=12,K--),V)for(i=this._daylightSavingAdjust(new Date(V.getFullYear(),V.getMonth()-H[0]*H[1]+1,V.getDate())),i=U&&i<U?U:i;this._daylightSavingAdjust(new Date(K,q,1))>i;)--q<0&&(q=11,K--);for(e.drawMonth=q,e.drawYear=K,z=this._get(e,"prevText"),z=F?this.formatDate(z,this._daylightSavingAdjust(new Date(K,q-j,1)),this._getFormatConfig(e)):z,s=this._canAdjustMonth(e,-1,K,q)?t("<a>").attr({class:"ui-datepicker-prev ui-corner-all","data-handler":"prev","data-event":"click",title:z}).append(t("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(B?"e":"w")).text(z))[0].outerHTML:M?"":t("<a>").attr({class:"ui-datepicker-prev ui-corner-all ui-state-disabled",title:z}).append(t("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(B?"e":"w")).text(z))[0].outerHTML,z=this._get(e,"nextText"),z=F?this.formatDate(z,this._daylightSavingAdjust(new Date(K,q+j,1)),this._getFormatConfig(e)):z,r=this._canAdjustMonth(e,1,K,q)?t("<a>").attr({class:"ui-datepicker-next ui-corner-all","data-handler":"next","data-event":"click",title:z}).append(t("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(B?"w":"e")).text(z))[0].outerHTML:M?"":t("<a>").attr({class:"ui-datepicker-next ui-corner-all ui-state-disabled",title:z}).append(t("<span>").attr("class","ui-icon ui-icon-circle-triangle-"+(B?"w":"e")).text(z))[0].outerHTML,j=this._get(e,"currentText"),M=this._get(e,"gotoCurrent")&&e.currentDay?$:N,j=F?this.formatDate(j,M,this._getFormatConfig(e)):j,z="",e.inline||(z=t("<button>").attr({type:"button",class:"ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all","data-handler":"hide","data-event":"click"}).text(this._get(e,"closeText"))[0].outerHTML),F="",R&&(F=t("<div class='ui-datepicker-buttonpane ui-widget-content'>").append(B?z:"").append(this._isInRange(e,M)?t("<button>").attr({type:"button",class:"ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all","data-handler":"today","data-event":"click"}).text(j):"").append(B?"":z)[0].outerHTML),n=parseInt(this._get(e,"firstDay"),10),n=isNaN(n)?0:n,o=this._get(e,"showWeek"),a=this._get(e,"dayNames"),l=this._get(e,"dayNamesMin"),h=this._get(e,"monthNames"),c=this._get(e,"monthNamesShort"),u=this._get(e,"beforeShowDay"),d=this._get(e,"showOtherMonths"),p=this._get(e,"selectOtherMonths"),m=this._getDefaultDate(e),f="",v=0;v<H[0];v++){for(b="",this.maxRows=4,y=0;y<H[1];y++){if(C=this._daylightSavingAdjust(new Date(K,q,e.selectedDay)),_=" ui-corner-all",E="",W){if(E+="<div class='ui-datepicker-group",1<H[1])switch(y){case 0:E+=" ui-datepicker-group-first",_=" ui-corner-"+(B?"right":"left");break;case H[1]-1:E+=" ui-datepicker-group-last",_=" ui-corner-"+(B?"left":"right");break;default:E+=" ui-datepicker-group-middle",_=""}E+="'>"}for(E+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+_+"'>"+(/all|left/.test(_)&&0===v?B?r:s:"")+(/all|right/.test(_)&&0===v?B?s:r:"")+this._generateMonthYearHeader(e,q,K,U,V,0<v||0<y,h,c)+"</div><table class='ui-datepicker-calendar'><thead><tr>",w=o?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",g=0;g<7;g++)w+="<th scope='col'"+(5<=(g+n+6)%7?" class='ui-datepicker-week-end'":"")+"><span title='"+a[k=(g+n)%7]+"'>"+l[k]+"</span></th>";for(E+=w+"</tr></thead><tbody>",S=this._getDaysInMonth(K,q),K===e.selectedYear&&q===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,S)),T=(this._getFirstDayOfMonth(K,q)-n+7)%7,S=Math.ceil((T+S)/7),x=W&&this.maxRows>S?this.maxRows:S,this.maxRows=x,D=this._daylightSavingAdjust(new Date(K,q,1-T)),O=0;O<x;O++){for(E+="<tr>",A=o?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(D)+"</td>":"",g=0;g<7;g++)P=u?u.apply(e.input?e.input[0]:null,[D]):[!0,""],L=(I=D.getMonth()!==q)&&!p||!P[0]||U&&D<U||V&&V<D,A+="<td class='"+(5<=(g+n+6)%7?" ui-datepicker-week-end":"")+(I?" ui-datepicker-other-month":"")+(D.getTime()===C.getTime()&&q===e.selectedMonth&&e._keyEvent||m.getTime()===D.getTime()&&m.getTime()===C.getTime()?" "+this._dayOverClass:"")+(L?" "+this._unselectableClass+" ui-state-disabled":"")+(I&&!d?"":" "+P[1]+(D.getTime()===$.getTime()?" "+this._currentClass:"")+(D.getTime()===N.getTime()?" ui-datepicker-today":""))+"'"+(I&&!d||!P[2]?"":" title='"+P[2].replace(/'/g,"&#39;")+"'")+(L?"":" data-handler='selectDay' data-event='click' data-month='"+D.getMonth()+"' data-year='"+D.getFullYear()+"'")+">"+(I&&!d?"&#xa0;":L?"<span class='ui-state-default'>"+D.getDate()+"</span>":"<a class='ui-state-default"+(D.getTime()===N.getTime()?" ui-state-highlight":"")+(D.getTime()===$.getTime()?" ui-state-active":"")+(I?" ui-priority-secondary":"")+"' href='#' aria-current='"+(D.getTime()===$.getTime()?"true":"false")+"' data-date='"+D.getDate()+"'>"+D.getDate()+"</a>")+"</td>",D.setDate(D.getDate()+1),D=this._daylightSavingAdjust(D);E+=A+"</tr>"}11<++q&&(q=0,K++),b+=E+="</tbody></table>"+(W?"</div>"+(0<H[0]&&y===H[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}f+=b}return f+=F,e._keyEvent=!1,f},_generateMonthYearHeader:function(t,e,i,s,r,n,o,a){var l,h,c,u,d,p,m=this._get(t,"changeMonth"),f=this._get(t,"changeYear"),g=this._get(t,"showMonthAfterYear"),v=this._get(t,"selectMonthLabel"),b=this._get(t,"selectYearLabel"),y="<div class='ui-datepicker-title'>",C="";if(n||!m)C+="<span class='ui-datepicker-month'>"+o[e]+"</span>";else{for(l=s&&s.getFullYear()===i,h=r&&r.getFullYear()===i,C+="<select class='ui-datepicker-month' aria-label='"+v+"' data-handler='selectMonth' data-event='change'>",c=0;c<12;c++)(!l||c>=s.getMonth())&&(!h||c<=r.getMonth())&&(C+="<option value='"+c+"'"+(c===e?" selected='selected'":"")+">"+a[c]+"</option>");C+="</select>"}if(g||(y+=C+(!n&&m&&f?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",n||!f)y+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(o=this._get(t,"yearRange").split(":"),u=(new Date).getFullYear(),d=(v=function(t){return t=t.match(/c[+\-].*/)?i+parseInt(t.substring(1),10):t.match(/[+\-].*/)?u+parseInt(t,10):parseInt(t,10),isNaN(t)?u:t})(o[0]),p=Math.max(d,v(o[1]||"")),d=s?Math.max(d,s.getFullYear()):d,p=r?Math.min(p,r.getFullYear()):p,t.yearshtml+="<select class='ui-datepicker-year' aria-label='"+b+"' data-handler='selectYear' data-event='change'>";d<=p;d++)t.yearshtml+="<option value='"+d+"'"+(d===i?" selected='selected'":"")+">"+d+"</option>";t.yearshtml+="</select>",y+=t.yearshtml,t.yearshtml=null}return y+=this._get(t,"yearSuffix"),g&&(y+=(!n&&m&&f?"":"&#xa0;")+C),y+"</div>"},_adjustInstDate:function(t,e,i){var s=t.selectedYear+("Y"===i?e:0),r=t.selectedMonth+("M"===i?e:0);e=Math.min(t.selectedDay,this._getDaysInMonth(s,r))+("D"===i?e:0),e=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(s,r,e))),t.selectedDay=e.getDate(),t.drawMonth=t.selectedMonth=e.getMonth(),t.drawYear=t.selectedYear=e.getFullYear(),"M"!==i&&"Y"!==i||this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min");return e=i&&e<i?i:e,(t=this._getMinMaxDate(t,"max"))&&t<e?t:e},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){return null==(t=this._get(t,"numberOfMonths"))?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,s){var r=this._getNumberOfMonths(t);return r=this._daylightSavingAdjust(new Date(i,s+(e<0?e:r[0]*r[1]),1)),e<0&&r.setDate(this._getDaysInMonth(r.getFullYear(),r.getMonth())),this._isInRange(t,r)},_isInRange:function(t,e){var i=this._getMinMaxDate(t,"min"),s=this._getMinMaxDate(t,"max"),r=null,n=null,o=this._get(t,"yearRange");return o&&(t=o.split(":"),o=(new Date).getFullYear(),r=parseInt(t[0],10),n=parseInt(t[1],10),t[0].match(/[+\-].*/)&&(r+=o),t[1].match(/[+\-].*/)&&(n+=o)),(!i||e.getTime()>=i.getTime())&&(!s||e.getTime()<=s.getTime())&&(!r||e.getFullYear()>=r)&&(!n||e.getFullYear()<=n)},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return{shortYearCutoff:e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,s){return e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear),e=e?"object"==Ve(e)?e:this._daylightSavingAdjust(new Date(s,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay)),this.formatDate(this._get(t,"dateFormat"),e,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).on("mousedown",t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"==typeof e&&("isDisabled"===e||"getDate"===e||"widget"===e)||"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i)):this.each((function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(i)):t.datepicker._attachDatepicker(this,e)}))},t.datepicker=new x,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.13.1",t.datepicker,t.widget("ui.dialog",{version:"1.13.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var i=t(this).css(e).offset().top;i<0&&t(this).css("top",e.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&t.fn.draggable&&this._makeDraggable(),this.options.resizable&&t.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?t(e):this.document.find(e||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(t=e.parent.children().eq(e.index)).length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:t.noop,enable:t.noop,close:function(e){var i=this;this._isOpen&&!1!==this._trigger("beforeClose",e)&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||t.ui.safeBlur(t.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,(function(){i._trigger("close",e)})))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,i){var s=!1,r=this.uiDialog.siblings(".ui-front:visible").map((function(){return+t(this).css("z-index")})).get();return(r=Math.max.apply(null,r))>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",r+1),s=!0),s&&!i&&this._trigger("focus",e),s},open:function(){var e=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=t(t.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,(function(){e._focusTabbable(),e._trigger("focus")})),this._makeFocusTarget(),this._trigger("open"))},_focusTabbable:function(){var t=this._focusedElement;(t=(t=(t=(t=(t=t||this.element.find("[autofocus]")).length?t:this.element.find(":tabbable")).length?t:this.uiDialogButtonPane.find(":tabbable")).length?t:this.uiDialogTitlebarClose.filter(":tabbable")).length?t:this.uiDialog).eq(0).trigger("focus")},_restoreTabbableFocus:function(){var e=t.ui.safeActiveElement(this.document[0]);this.uiDialog[0]===e||t.contains(this.uiDialog[0],e)||this._focusTabbable()},_keepFocus:function(t){t.preventDefault(),this._restoreTabbableFocus(),this._delay(this._restoreTabbableFocus)},_createWrapper:function(){this.uiDialog=t("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE)return e.preventDefault(),void this.close(e);var i,s,r;e.keyCode!==t.ui.keyCode.TAB||e.isDefaultPrevented()||(i=this.uiDialog.find(":tabbable"),s=i.first(),r=i.last(),e.target!==r[0]&&e.target!==this.uiDialog[0]||e.shiftKey?e.target!==s[0]&&e.target!==this.uiDialog[0]||!e.shiftKey||(this._delay((function(){r.trigger("focus")})),e.preventDefault()):(this._delay((function(){s.trigger("focus")})),e.preventDefault()))},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=t("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(e){t(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=t("<button type='button'></button>").button({label:t("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),e=t("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(e,"ui-dialog-title"),this._title(e),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(t){this.options.title?t.text(this.options.title):t.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=t("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=t("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var e=this,i=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),t.isEmptyObject(i)||Array.isArray(i)&&!i.length?this._removeClass(this.uiDialog,"ui-dialog-buttons"):(t.each(i,(function(i,s){var r;s=t.extend({type:"button"},s="function"==typeof s?{click:s,text:i}:s),r=s.click,i={icon:s.icon,iconPosition:s.iconPosition,showLabel:s.showLabel,icons:s.icons,text:s.text},delete s.click,delete s.icon,delete s.iconPosition,delete s.showLabel,delete s.icons,"boolean"==typeof s.text&&delete s.text,t("<button></button>",s).button(i).appendTo(e.uiButtonSet).on("click",(function(){r.apply(e.element[0],arguments)}))})),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){var e=this,i=this.options;function s(t){return{position:t.position,offset:t.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(i,r){e._addClass(t(this),"ui-dialog-dragging"),e._blockFrames(),e._trigger("dragStart",i,s(r))},drag:function(t,i){e._trigger("drag",t,s(i))},stop:function(r,n){var o=n.offset.left-e.document.scrollLeft(),a=n.offset.top-e.document.scrollTop();i.position={my:"left top",at:"left"+(0<=o?"+":"")+o+" top"+(0<=a?"+":"")+a,of:e.window},e._removeClass(t(this),"ui-dialog-dragging"),e._unblockFrames(),e._trigger("dragStop",r,s(n))}})},_makeResizable:function(){var e=this,i=this.options,s=i.resizable,r=this.uiDialog.css("position");function n(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}s="string"==typeof s?s:"n,e,s,w,se,sw,ne,nw",this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:this._minHeight(),handles:s,start:function(i,s){e._addClass(t(this),"ui-dialog-resizing"),e._blockFrames(),e._trigger("resizeStart",i,n(s))},resize:function(t,i){e._trigger("resize",t,n(i))},stop:function(s,r){var o=(a=e.uiDialog.offset()).left-e.document.scrollLeft(),a=a.top-e.document.scrollTop();i.height=e.uiDialog.height(),i.width=e.uiDialog.width(),i.position={my:"left top",at:"left"+(0<=o?"+":"")+o+" top"+(0<=a?"+":"")+a,of:e.window},e._removeClass(t(this),"ui-dialog-resizing"),e._unblockFrames(),e._trigger("resizeStop",s,n(r))}}).css("position",r)},_trackFocus:function(){this._on(this.widget(),{focusin:function(e){this._makeFocusTarget(),this._focusedElement=t(e.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var e=this._trackingInstances(),i=t.inArray(this,e);-1!==i&&e.splice(i,1)},_trackingInstances:function(){var t=this.document.data("ui-dialog-instances");return t||this.document.data("ui-dialog-instances",t=[]),t},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(e){var i=this,s=!1,r={};t.each(e,(function(t,e){i._setOption(t,e),t in i.sizeRelatedOptions&&(s=!0),t in i.resizableRelatedOptions&&(r[t]=e)})),s&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",r)},_setOption:function(e,i){var s,r=this.uiDialog;"disabled"!==e&&(this._super(e,i),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:t("<a>").text(""+this.options.closeText).html()}),"draggable"===e&&((s=r.is(":data(ui-draggable)"))&&!i&&r.draggable("destroy"),!s&&i&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&((s=r.is(":data(ui-resizable)"))&&!i&&r.resizable("destroy"),s&&"string"==typeof i&&r.resizable("option","handles",i),s||!1===i||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,i,s=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),s.minWidth>s.width&&(s.width=s.minWidth),t=this.uiDialog.css({height:"auto",width:s.width}).outerHeight(),e=Math.max(0,s.minHeight-t),i="number"==typeof s.maxHeight?Math.max(0,s.maxHeight-t):"none","auto"===s.height?this.element.css({minHeight:e,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,s.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map((function(){var e=t(this);return t("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]}))},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(e){return!!t(e.target).closest(".ui-dialog").length||!!t(e.target).closest(".ui-datepicker").length},_createOverlay:function(){var e,i;this.options.modal&&(e=t.fn.jquery.substring(0,4),i=!0,this._delay((function(){i=!1})),this.document.data("ui-dialog-overlays")||this.document.on("focusin.ui-dialog",function(t){var s;i||(s=this._trackingInstances()[0])._allowInteraction(t)||(t.preventDefault(),s._focusTabbable(),"3.4."!==e&&"3.5."!==e||s._delay(s._restoreTabbableFocus))}.bind(this)),this.overlay=t("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1))},_destroyOverlay:function(){var t;this.options.modal&&this.overlay&&((t=this.document.data("ui-dialog-overlays")-1)?this.document.data("ui-dialog-overlays",t):(this.document.off("focusin.ui-dialog"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null)}}),!1!==t.uiBackCompat&&t.widget("ui.dialog",t.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(t,e){"dialogClass"===t&&this.uiDialog.removeClass(this.options.dialogClass).addClass(e),this._superApply(arguments)}}),t.ui.dialog,t.widget("ui.progressbar",{version:"1.13.1",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.attr({role:"progressbar","aria-valuemin":this.min}),this._addClass("ui-progressbar","ui-widget ui-widget-content"),this.valueDiv=t("<div>").appendTo(this.element),this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header"),this._refreshValue()},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow"),this.valueDiv.remove()},value:function(t){if(void 0===t)return this.options.value;this.options.value=this._constrainedValue(t),this._refreshValue()},_constrainedValue:function(t){return void 0===t&&(t=this.options.value),this.indeterminate=!1===t,"number"!=typeof t&&(t=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,t))},_setOptions:function(t){var e=t.value;delete t.value,this._super(t),this.options.value=this._constrainedValue(e),this._refreshValue()},_setOption:function(t,e){"max"===t&&(e=Math.max(this.min,e)),this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",t),this._toggleClass(null,"ui-state-disabled",!!t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var e=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||e>this.min).width(i.toFixed(0)+"%"),this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,e===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=t("<div>").appendTo(this.valueDiv),this._addClass(this.overlayDiv,"ui-progressbar-overlay"))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":e}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),e===this.options.max&&this._trigger("complete")}}),t.widget("ui.slider",t.ui.mouse,{version:"1.13.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,i=this.options,s=this.element.find(".ui-slider-handle"),r=[],n=i.values&&i.values.length||1;for(s.length>n&&(s.slice(n).remove(),s=s.slice(0,n)),e=s.length;e<n;e++)r.push("<span tabindex='0'></span>");this.handles=s.add(t(r.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each((function(e){t(this).data("ui-slider-handle-index",e).attr("tabIndex",0)}))},_createRange:function(){var e=this.options;e.range?(!0===e.range&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:Array.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=t("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),"min"!==e.range&&"max"!==e.range||this._addClass(this.range,"ui-slider-range-"+e.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(e){var i,s,r,n,o,a,l=this,h=this.options;return!h.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),a={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(a),s=this._valueMax()-this._valueMin()+1,this.handles.each((function(e){var o=Math.abs(i-l.values(e));(o<s||s===o&&(e===l._lastChangedValue||l.values(e)===h.min))&&(s=o,r=t(this),n=e)})),!1!==this._start(e,n)&&(this._mouseSliding=!0,this._handleIndex=n,this._addClass(r,null,"ui-state-active"),r.trigger("focus"),o=r.offset(),a=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=a?{left:0,top:0}:{left:e.pageX-o.left-r.width()/2,top:e.pageY-o.top-r.height()/2-(parseInt(r.css("borderTopWidth"),10)||0)-(parseInt(r.css("borderBottomWidth"),10)||0)+(parseInt(r.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,n,i),this._animateOff=!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY};return e=this._normValueFromMouse(e),this._slide(t,this._handleIndex,e),!1},_mouseStop:function(t){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e;return(t=1<(t=(t="horizontal"===this.orientation?(e=this.elementSize.width,t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)))/e)?1:t)<0&&(t=0),"vertical"===this.orientation&&(t=1-t),e=this._valueMax()-this._valueMin(),e=this._valueMin()+t*e,this._trimAlignValue(e)},_uiHash:function(t,e,i){var s={handle:this.handles[t],handleIndex:t,value:void 0!==e?e:this.value()};return this._hasMultipleValues()&&(s.value=void 0!==e?e:this.values(t),s.values=i||this.values()),s},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(t,e){return this._trigger("start",t,this._uiHash(e))},_slide:function(t,e,i){var s,r=this.value(),n=this.values();this._hasMultipleValues()&&(s=this.values(e?0:1),r=this.values(e),2===this.options.values.length&&!0===this.options.range&&(i=0===e?Math.min(s,i):Math.max(s,i)),n[e]=i),i!==r&&!1!==this._trigger("slide",t,this._uiHash(e,i,n))&&(this._hasMultipleValues()?this.values(e,i):this.value(i))},_stop:function(t,e){this._trigger("stop",t,this._uiHash(e))},_change:function(t,e){this._keySliding||this._mouseSliding||(this._lastChangedValue=e,this._trigger("change",t,this._uiHash(e)))},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,e){var i,s,r;if(1<arguments.length)return this.options.values[t]=this._trimAlignValue(e),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!Array.isArray(t))return this._hasMultipleValues()?this._values(t):this.value();for(i=this.options.values,s=t,r=0;r<i.length;r+=1)i[r]=this._trimAlignValue(s[r]),this._change(null,r);this._refreshValue()},_setOption:function(t,e){var i,s=0;switch("range"===t&&!0===this.options.range&&("min"===e?(this.options.value=this._values(0),this.options.values=null):"max"===e&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),Array.isArray(this.options.values)&&(s=this.options.values.length),this._super(t,e),t){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(e),this.handles.css("horizontal"===e?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=s-1;0<=i;i--)this._change(null,i);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(t){this._super(t),this._toggleClass(null,"ui-state-disabled",!!t)},_value:function(){var t=this.options.value;return this._trimAlignValue(t)},_values:function(t){var e,i;if(arguments.length)return t=this.options.values[t],this._trimAlignValue(t);if(this._hasMultipleValues()){for(e=this.options.values.slice(),i=0;i<e.length;i+=1)e[i]=this._trimAlignValue(e[i]);return e}return[]},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=0<this.options.step?this.options.step:1,i=(t-this._valueMin())%e;return t-=i,2*Math.abs(i)>=e&&(t+=0<i?e:-e),parseFloat(t.toFixed(5))},_calculateNewMax:function(){var t=this.options.max,e=this._valueMin(),i=this.options.step;(t=Math.round((t-e)/i)*i+e)>this.options.max&&(t-=i),this.max=parseFloat(t.toFixed(this._precision()))},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min?Math.max(t,this._precisionOf(this.options.min)):t},_precisionOf:function(t){var e=t.toString();return-1===(t=e.indexOf("."))?0:e.length-t-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(t){"vertical"===t&&this.range.css({width:"",left:""}),"horizontal"===t&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var e,i,s,r,n,o=this.options.range,a=this.options,l=this,h=!this._animateOff&&a.animate,c={};this._hasMultipleValues()?this.handles.each((function(s){i=(l.values(s)-l._valueMin())/(l._valueMax()-l._valueMin())*100,c["horizontal"===l.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[h?"animate":"css"](c,a.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===s&&l.range.stop(1,1)[h?"animate":"css"]({left:i+"%"},a.animate),1===s&&l.range[h?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:a.animate})):(0===s&&l.range.stop(1,1)[h?"animate":"css"]({bottom:i+"%"},a.animate),1===s&&l.range[h?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:a.animate}))),e=i})):(s=this.value(),r=this._valueMin(),n=this._valueMax(),i=n!==r?(s-r)/(n-r)*100:0,c["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[h?"animate":"css"](c,a.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({width:i+"%"},a.animate),"max"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({width:100-i+"%"},a.animate),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({height:i+"%"},a.animate),"max"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({height:100-i+"%"},a.animate))},_handleEvents:{keydown:function(e){var i,s,r,n=t(e.target).data("ui-slider-handle-index");switch(e.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(t(e.target),null,"ui-state-active"),!1===this._start(e,n)))return}switch(r=this.options.step,i=s=this._hasMultipleValues()?this.values(n):this.value(),e.keyCode){case t.ui.keyCode.HOME:s=this._valueMin();break;case t.ui.keyCode.END:s=this._valueMax();break;case t.ui.keyCode.PAGE_UP:s=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.PAGE_DOWN:s=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(i===this._valueMax())return;s=this._trimAlignValue(i+r);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(i===this._valueMin())return;s=this._trimAlignValue(i-r)}this._slide(e,n,s)},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),this._removeClass(t(e.target),null,"ui-state-active"))}}}),t.widget("ui.spinner",{version:"1.13.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var e=this._super(),i=this.element;return t.each(["min","max","step"],(function(t,s){var r=i.attr(s);null!=r&&r.length&&(e[s]=r)})),e},_events:{keydown:function(t){this._start(t)&&this._keydown(t)&&t.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(t){this.cancelBlur?delete this.cancelBlur:(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",t))},mousewheel:function(e,i){var s=t.ui.safeActiveElement(this.document[0]);if(this.element[0]===s&&i){if(!this.spinning&&!this._start(e))return!1;this._spin((0<i?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay((function(){this.spinning&&this._stop(e)}),100),e.preventDefault()}},"mousedown .ui-spinner-button":function(e){var i;function s(){this.element[0]===t.ui.safeActiveElement(this.document[0])||(this.element.trigger("focus"),this.previous=i,this._delay((function(){this.previous=i})))}i=this.element[0]===t.ui.safeActiveElement(this.document[0])?this.previous:this.element.val(),e.preventDefault(),s.call(this),this.cancelBlur=!0,this._delay((function(){delete this.cancelBlur,s.call(this)})),!1!==this._start(e)&&this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(e){if(t(e.currentTarget).hasClass("ui-state-active"))return!1!==this._start(e)&&void this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function(){this._enhance(),this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content"),this._addClass("ui-spinner-input"),this.element.attr("role","spinbutton"),this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",!0).button({classes:{"ui-button":""}}),this._removeClass(this.buttons,"ui-corner-all"),this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up"),this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down"),this.buttons.first().button({icon:this.options.icons.up,showLabel:!1}),this.buttons.last().button({icon:this.options.icons.down,showLabel:!1}),this.buttons.height()>Math.ceil(.5*this.uiSpinner.height())&&0<this.uiSpinner.height()&&this.uiSpinner.height(this.uiSpinner.height())},_keydown:function(e){var i=this.options,s=t.ui.keyCode;switch(e.keyCode){case s.UP:return this._repeat(null,1,e),!0;case s.DOWN:return this._repeat(null,-1,e),!0;case s.PAGE_UP:return this._repeat(null,i.page,e),!0;case s.PAGE_DOWN:return this._repeat(null,-i.page,e),!0}return!1},_start:function(t){return!(!this.spinning&&!1===this._trigger("start",t))&&(this.counter||(this.counter=1),this.spinning=!0)},_repeat:function(t,e,i){t=t||500,clearTimeout(this.timer),this.timer=this._delay((function(){this._repeat(40,e,i)}),t),this._spin(e*this.options.step,i)},_spin:function(t,e){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+t*this._increment(this.counter)),this.spinning&&!1===this._trigger("spin",e,{value:i})||(this._value(i),this.counter++)},_increment:function(t){var e=this.options.incremental;return e?"function"==typeof e?e(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min?Math.max(t,this._precisionOf(this.options.min)):t},_precisionOf:function(t){var e=t.toString();return-1===(t=e.indexOf("."))?0:e.length-t-1},_adjustValue:function(t){var e=this.options,i=null!==e.min?e.min:0,s=t-i;return t=i+Math.round(s/e.step)*e.step,t=parseFloat(t.toFixed(this._precision())),null!==e.max&&t>e.max?e.max:null!==e.min&&t<e.min?e.min:t},_stop:function(t){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",t))},_setOption:function(t,e){var i;if("culture"===t||"numberFormat"===t)return i=this._parse(this.element.val()),this.options[t]=e,void this.element.val(this._format(i));"max"!==t&&"min"!==t&&"step"!==t||"string"==typeof e&&(e=this._parse(e)),"icons"===t&&(i=this.buttons.first().find(".ui-icon"),this._removeClass(i,null,this.options.icons.up),this._addClass(i,null,e.up),i=this.buttons.last().find(".ui-icon"),this._removeClass(i,null,this.options.icons.down),this._addClass(i,null,e.down)),this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!t),this.element.prop("disabled",!!t),this.buttons.button(t?"disable":"enable")},_setOptions:P((function(t){this._super(t)})),_parse:function(t){return""===(t="string"==typeof t&&""!==t?window.Globalize&&this.options.numberFormat?Globalize.parseFloat(t,10,this.options.culture):+t:t)||isNaN(t)?null:t},_format:function(t){return""===t?"":window.Globalize&&this.options.numberFormat?Globalize.format(t,this.options.numberFormat,this.options.culture):t},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var t=this.value();return null!==t&&t===this._adjustValue(t)},_value:function(t,e){var i;""!==t&&null!==(i=this._parse(t))&&(e||(i=this._adjustValue(i)),t=this._format(i)),this.element.val(t),this._refresh()},_destroy:function(){this.element.prop("disabled",!1).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:P((function(t){this._stepUp(t)})),_stepUp:function(t){this._start()&&(this._spin((t||1)*this.options.step),this._stop())},stepDown:P((function(t){this._stepDown(t)})),_stepDown:function(t){this._start()&&(this._spin((t||1)*-this.options.step),this._stop())},pageUp:P((function(t){this._stepUp((t||1)*this.options.page)})),pageDown:P((function(t){this._stepDown((t||1)*this.options.page)})),value:function(t){if(!arguments.length)return this._parse(this.element.val());P(this._value).call(this,t)},widget:function(){return this.uiSpinner}}),!1!==t.uiBackCompat&&t.widget("ui.spinner",t.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a></a><a></a>"}}),t.ui.spinner,t.widget("ui.tabs",{version:"1.13.1",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:(T=/#.*$/,function(t){var e=t.href.replace(T,""),i=location.href.replace(T,"");try{e=decodeURIComponent(e)}catch(t){}try{i=decodeURIComponent(i)}catch(t){}return 1<t.hash.length&&e===i}),_create:function(){var e=this,i=this.options;this.running=!1,this._addClass("ui-tabs","ui-widget ui-widget-content"),this._toggleClass("ui-tabs-collapsible",null,i.collapsible),this._processTabs(),i.active=this._initialActive(),Array.isArray(i.disabled)&&(i.disabled=t.uniqueSort(i.disabled.concat(t.map(this.tabs.filter(".ui-state-disabled"),(function(t){return e.tabs.index(t)})))).sort()),!1!==this.options.active&&this.anchors.length?this.active=this._findActive(i.active):this.active=t(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var e=this.options.active,i=this.options.collapsible,s=location.hash.substring(1);return null===e&&(s&&this.tabs.each((function(i,r){if(t(r).attr("aria-controls")===s)return e=i,!1})),null!==(e=null===e?this.tabs.index(this.tabs.filter(".ui-tabs-active")):e)&&-1!==e||(e=!!this.tabs.length&&0)),!1!==e&&-1===(e=this.tabs.index(this.tabs.eq(e)))&&(e=!i&&0),e=!i&&!1===e&&this.anchors.length?0:e},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):t()}},_tabKeydown:function(e){var i=t(t.ui.safeActiveElement(this.document[0])).closest("li"),s=this.tabs.index(i),r=!0;if(!this._handlePageNav(e)){switch(e.keyCode){case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:s++;break;case t.ui.keyCode.UP:case t.ui.keyCode.LEFT:r=!1,s--;break;case t.ui.keyCode.END:s=this.anchors.length-1;break;case t.ui.keyCode.HOME:s=0;break;case t.ui.keyCode.SPACE:return e.preventDefault(),clearTimeout(this.activating),void this._activate(s);case t.ui.keyCode.ENTER:return e.preventDefault(),clearTimeout(this.activating),void this._activate(s!==this.options.active&&s);default:return}e.preventDefault(),clearTimeout(this.activating),s=this._focusNextTab(s,r),e.ctrlKey||e.metaKey||(i.attr("aria-selected","false"),this.tabs.eq(s).attr("aria-selected","true"),this.activating=this._delay((function(){this.option("active",s)}),this.delay))}},_panelKeydown:function(e){this._handlePageNav(e)||e.ctrlKey&&e.keyCode===t.ui.keyCode.UP&&(e.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(e){return e.altKey&&e.keyCode===t.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):e.altKey&&e.keyCode===t.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(e,i){for(var s=this.tabs.length-1;-1!==t.inArray(e=(e=s<e?0:e)<0?s:e,this.options.disabled);)e=i?e+1:e-1;return e},_focusNextTab:function(t,e){return t=this._findNextTab(t,e),this.tabs.eq(t).trigger("focus"),t},_setOption:function(t,e){"active"!==t?(this._super(t,e),"collapsible"===t&&(this._toggleClass("ui-tabs-collapsible",null,e),e||!1!==this.options.active||this._activate(0)),"event"===t&&this._setupEvents(e),"heightStyle"===t&&this._setupHeightStyle(e)):this._activate(e)},_sanitizeSelector:function(t){return t?t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var e=this.options,i=this.tablist.children(":has(a[href])");e.disabled=t.map(i.filter(".ui-state-disabled"),(function(t){return i.index(t)})),this._processTabs(),!1!==e.active&&this.anchors.length?this.active.length&&!t.contains(this.tablist[0],this.active[0])?this.tabs.length===e.disabled.length?(e.active=!1,this.active=t()):this._activate(this._findNextTab(Math.max(0,e.active-1),!1)):e.active=this.tabs.index(this.active):(e.active=!1,this.active=t()),this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var e=this,i=this.tabs,s=this.anchors,r=this.panels;this.tablist=this._getList().attr("role","tablist"),this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header"),this.tablist.on("mousedown"+this.eventNamespace,"> li",(function(e){t(this).is(".ui-state-disabled")&&e.preventDefault()})).on("focus"+this.eventNamespace,".ui-tabs-anchor",(function(){t(this).closest("li").is(".ui-state-disabled")&&this.blur()})),this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1}),this._addClass(this.tabs,"ui-tabs-tab","ui-state-default"),this.anchors=this.tabs.map((function(){return t("a",this)[0]})).attr({tabIndex:-1}),this._addClass(this.anchors,"ui-tabs-anchor"),this.panels=t(),this.anchors.each((function(i,s){var r,n,o,a=t(s).uniqueId().attr("id"),l=t(s).closest("li"),h=l.attr("aria-controls");e._isLocal(s)?(o=(r=s.hash).substring(1),n=e.element.find(e._sanitizeSelector(r))):(o=l.attr("aria-controls")||t({}).uniqueId()[0].id,(n=e.element.find(r="#"+o)).length||(n=e._createPanel(o)).insertAfter(e.panels[i-1]||e.tablist),n.attr("aria-live","polite")),n.length&&(e.panels=e.panels.add(n)),h&&l.data("ui-tabs-aria-controls",h),l.attr({"aria-controls":o,"aria-labelledby":a}),n.attr("aria-labelledby",a)})),this.panels.attr("role","tabpanel"),this._addClass(this.panels,"ui-tabs-panel","ui-widget-content"),i&&(this._off(i.not(this.tabs)),this._off(s.not(this.anchors)),this._off(r.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(e){return t("<div>").attr("id",e).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(e){var i,s;for(Array.isArray(e)&&(e.length?e.length===this.anchors.length&&(e=!0):e=!1),s=0;i=this.tabs[s];s++)i=t(i),!0===e||-1!==t.inArray(s,e)?(i.attr("aria-disabled","true"),this._addClass(i,null,"ui-state-disabled")):(i.removeAttr("aria-disabled"),this._removeClass(i,null,"ui-state-disabled"));this.options.disabled=e,this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!0===e)},_setupEvents:function(e){var i={};e&&t.each(e.split(" "),(function(t,e){i[e]="_eventHandler"})),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(t){t.preventDefault()}}),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(e){var i,s=this.element.parent();"fill"===e?(i=s.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each((function(){var e=t(this),s=e.css("position");"absolute"!==s&&"fixed"!==s&&(i-=e.outerHeight(!0))})),this.element.children().not(this.panels).each((function(){i-=t(this).outerHeight(!0)})),this.panels.each((function(){t(this).height(Math.max(0,i-t(this).innerHeight()+t(this).height()))})).css("overflow","auto")):"auto"===e&&(i=0,this.panels.each((function(){i=Math.max(i,t(this).height("").height())})).height(i))},_eventHandler:function(e){var i=this.options,s=this.active,r=t(e.currentTarget).closest("li"),n=r[0]===s[0],o=n&&i.collapsible,a=o?t():this._getPanelForTab(r),l=s.length?this._getPanelForTab(s):t();s={oldTab:s,oldPanel:l,newTab:o?t():r,newPanel:a},e.preventDefault(),r.hasClass("ui-state-disabled")||r.hasClass("ui-tabs-loading")||this.running||n&&!i.collapsible||!1===this._trigger("beforeActivate",e,s)||(i.active=!o&&this.tabs.index(r),this.active=n?t():r,this.xhr&&this.xhr.abort(),l.length||a.length||t.error("jQuery UI Tabs: Mismatching fragment identifier."),a.length&&this.load(this.tabs.index(r),e),this._toggle(e,s))},_toggle:function(e,i){var s=this,r=i.newPanel,n=i.oldPanel;function o(){s.running=!1,s._trigger("activate",e,i)}function a(){s._addClass(i.newTab.closest("li"),"ui-tabs-active","ui-state-active"),r.length&&s.options.show?s._show(r,s.options.show,o):(r.show(),o())}this.running=!0,n.length&&this.options.hide?this._hide(n,this.options.hide,(function(){s._removeClass(i.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),a()})):(this._removeClass(i.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),n.hide(),a()),n.attr("aria-hidden","true"),i.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),r.length&&n.length?i.oldTab.attr("tabIndex",-1):r.length&&this.tabs.filter((function(){return 0===t(this).attr("tabIndex")})).attr("tabIndex",-1),r.attr("aria-hidden","false"),i.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(e){(e=this._findActive(e))[0]!==this.active[0]&&(e=(e=e.length?e:this.active).find(".ui-tabs-anchor")[0],this._eventHandler({target:e,currentTarget:e,preventDefault:t.noop}))},_findActive:function(e){return!1===e?t():this.tabs.eq(e)},_getIndex:function(e){return"string"==typeof e?this.anchors.index(this.anchors.filter("[href$='"+t.escapeSelector(e)+"']")):e},_destroy:function(){this.xhr&&this.xhr.abort(),this.tablist.removeAttr("role").off(this.eventNamespace),this.anchors.removeAttr("role tabIndex").removeUniqueId(),this.tabs.add(this.panels).each((function(){t.data(this,"ui-tabs-destroy")?t(this).remove():t(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")})),this.tabs.each((function(){var e=t(this),i=e.data("ui-tabs-aria-controls");i?e.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):e.removeAttr("aria-controls")})),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(e){var i=this.options.disabled;!1!==i&&(i=void 0!==e&&(e=this._getIndex(e),Array.isArray(i)?t.map(i,(function(t){return t!==e?t:null})):t.map(this.tabs,(function(t,i){return i!==e?i:null}))),this._setOptionDisabled(i))},disable:function(e){var i=this.options.disabled;if(!0!==i){if(void 0===e)i=!0;else{if(e=this._getIndex(e),-1!==t.inArray(e,i))return;i=Array.isArray(i)?t.merge([e],i).sort():[e]}this._setOptionDisabled(i)}},load:function(e,i){function s(t,e){"abort"===e&&r.panels.stop(!1,!0),r._removeClass(n,"ui-tabs-loading"),o.removeAttr("aria-busy"),t===r.xhr&&delete r.xhr}e=this._getIndex(e);var r=this,n=this.tabs.eq(e),o=(e=n.find(".ui-tabs-anchor"),this._getPanelForTab(n)),a={tab:n,panel:o};this._isLocal(e[0])||(this.xhr=t.ajax(this._ajaxSettings(e,i,a)),this.xhr&&"canceled"!==this.xhr.statusText&&(this._addClass(n,"ui-tabs-loading"),o.attr("aria-busy","true"),this.xhr.done((function(t,e,n){setTimeout((function(){o.html(t),r._trigger("load",i,a),s(n,e)}),1)})).fail((function(t,e){setTimeout((function(){s(t,e)}),1)}))))},_ajaxSettings:function(e,i,s){var r=this;return{url:e.attr("href").replace(/#.*$/,""),beforeSend:function(e,n){return r._trigger("beforeLoad",i,t.extend({jqXHR:e,ajaxSettings:n},s))}}},_getPanelForTab:function(e){return e=t(e).attr("aria-controls"),this.element.find(this._sanitizeSelector("#"+e))}}),!1!==t.uiBackCompat&&t.widget("ui.tabs",t.ui.tabs,{_processTabs:function(){this._superApply(arguments),this._addClass(this.tabs,"ui-tab")}}),t.ui.tabs,t.widget("ui.tooltip",{version:"1.13.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var e=t(this).attr("title");return t("<a>").text(e).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(t,e){var i=(t.attr("aria-describedby")||"").split(/\s+/);i.push(e),t.data("ui-tooltip-id",e).attr("aria-describedby",String.prototype.trim.call(i.join(" ")))},_removeDescribedBy:function(e){var i=e.data("ui-tooltip-id"),s=(e.attr("aria-describedby")||"").split(/\s+/);-1!==(i=t.inArray(i,s))&&s.splice(i,1),e.removeData("ui-tooltip-id"),(s=String.prototype.trim.call(s.join(" ")))?e.attr("aria-describedby",s):e.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.liveRegion=t("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this.disabledTitles=t([])},_setOption:function(e,i){var s=this;this._super(e,i),"content"===e&&t.each(this.tooltips,(function(t,e){s._updateContent(e.element)}))},_setOptionDisabled:function(t){this[t?"_disable":"_enable"]()},_disable:function(){var e=this;t.each(this.tooltips,(function(i,s){var r=t.Event("blur");r.target=r.currentTarget=s.element[0],e.close(r,!0)})),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter((function(){var e=t(this);if(e.is("[title]"))return e.data("ui-tooltip-title",e.attr("title")).removeAttr("title")})))},_enable:function(){this.disabledTitles.each((function(){var e=t(this);e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title"))})),this.disabledTitles=t([])},open:function(e){var i=this,s=t(e?e.target:this.element).closest(this.options.items);s.length&&!s.data("ui-tooltip-id")&&(s.attr("title")&&s.data("ui-tooltip-title",s.attr("title")),s.data("ui-tooltip-open",!0),e&&"mouseover"===e.type&&s.parents().each((function(){var e,s=t(this);s.data("ui-tooltip-open")&&((e=t.Event("blur")).target=e.currentTarget=this,i.close(e,!0)),s.attr("title")&&(s.uniqueId(),i.parents[this.id]={element:this,title:s.attr("title")},s.attr("title",""))})),this._registerCloseHandlers(e,s),this._updateContent(s,e))},_updateContent:function(t,e){var i=this.options.content,s=this,r=e?e.type:null;if("string"==typeof i||i.nodeType||i.jquery)return this._open(e,t,i);(i=i.call(t[0],(function(i){s._delay((function(){t.data("ui-tooltip-open")&&(e&&(e.type=r),this._open(e,t,i))}))})))&&this._open(e,t,i)},_open:function(e,i,s){var r,n,o,a=t.extend({},this.options.position);function l(t){a.of=t,n.is(":hidden")||n.position(a)}s&&((r=this._find(i))?r.tooltip.find(".ui-tooltip-content").html(s):(i.is("[title]")&&(e&&"mouseover"===e.type?i.attr("title",""):i.removeAttr("title")),r=this._tooltip(i),n=r.tooltip,this._addDescribedBy(i,n.attr("id")),n.find(".ui-tooltip-content").html(s),this.liveRegion.children().hide(),(s=t("<div>").html(n.find(".ui-tooltip-content").html())).removeAttr("name").find("[name]").removeAttr("name"),s.removeAttr("id").find("[id]").removeAttr("id"),s.appendTo(this.liveRegion),this.options.track&&e&&/^mouse/.test(e.type)?(this._on(this.document,{mousemove:l}),l(e)):n.position(t.extend({of:i},this.options.position)),n.hide(),this._show(n,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(o=this.delayedShow=setInterval((function(){n.is(":visible")&&(l(a.of),clearInterval(o))}),13)),this._trigger("open",e,{tooltip:n})))},_registerCloseHandlers:function(e,i){var s={keyup:function(e){e.keyCode===t.ui.keyCode.ESCAPE&&((e=t.Event(e)).currentTarget=i[0],this.close(e,!0))}};i[0]!==this.element[0]&&(s.remove=function(){var t=this._find(i);t&&this._removeTooltip(t.tooltip)}),e&&"mouseover"!==e.type||(s.mouseleave="close"),e&&"focusin"!==e.type||(s.focusout="close"),this._on(!0,i,s)},close:function(e){var i,s=this,r=t(e?e.currentTarget:this.element),n=this._find(r);n?(i=n.tooltip,n.closing||(clearInterval(this.delayedShow),r.data("ui-tooltip-title")&&!r.attr("title")&&r.attr("title",r.data("ui-tooltip-title")),this._removeDescribedBy(r),n.hiding=!0,i.stop(!0),this._hide(i,this.options.hide,(function(){s._removeTooltip(t(this))})),r.removeData("ui-tooltip-open"),this._off(r,"mouseleave focusout keyup"),r[0]!==this.element[0]&&this._off(r,"remove"),this._off(this.document,"mousemove"),e&&"mouseleave"===e.type&&t.each(this.parents,(function(e,i){t(i.element).attr("title",i.title),delete s.parents[e]})),n.closing=!0,this._trigger("close",e,{tooltip:i}),n.hiding||(n.closing=!1))):r.removeData("ui-tooltip-open")},_tooltip:function(e){var i=t("<div>").attr("role","tooltip"),s=t("<div>").appendTo(i),r=i.uniqueId().attr("id");return this._addClass(s,"ui-tooltip-content"),this._addClass(i,"ui-tooltip","ui-widget ui-widget-content"),i.appendTo(this._appendTo(e)),this.tooltips[r]={element:e,tooltip:i}},_find:function(t){return(t=t.data("ui-tooltip-id"))?this.tooltips[t]:null},_removeTooltip:function(t){clearInterval(this.delayedShow),t.remove(),delete this.tooltips[t.attr("id")]},_appendTo:function(t){return(t=t.closest(".ui-front, dialog")).length?t:this.document[0].body},_destroy:function(){var e=this;t.each(this.tooltips,(function(i,s){var r=t.Event("blur");s=s.element,r.target=r.currentTarget=s[0],e.close(r,!0),t("#"+i).remove(),s.data("ui-tooltip-title")&&(s.attr("title")||s.attr("title",s.data("ui-tooltip-title")),s.removeData("ui-tooltip-title"))})),this.liveRegion.remove()}}),!1!==t.uiBackCompat&&t.widget("ui.tooltip",t.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var t=this._superApply(arguments);return this.options.tooltipClass&&t.tooltip.addClass(this.options.tooltipClass),t}}),t.ui.tooltip;var I=t,L={},j=L.toString,N=/^([\-+])=\s*(\d+\.?\d*)/,B=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})?/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),t[4]?(parseInt(t[4],16)/255).toFixed(2):1]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])?/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16),t[4]?(parseInt(t[4]+t[4],16)/255).toFixed(2):1]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],R=I.Color=function(t,e,i,s){return new I.Color.fn.parse(t,e,i,s)},M={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},F={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},H=R.support={},z=I("<p>")[0],W=I.each;function $(t){return null==t?t+"":"object"==Ve(t)?L[j.call(t)]||"object":Ve(t)}function U(t,e,i){var s=F[e.type]||{};return null==t?i||!e.def?null:e.def:(t=s.floor?~~t:parseFloat(t),isNaN(t)?e.def:s.mod?(t+s.mod)%s.mod:Math.min(s.max,Math.max(0,t)))}function V(t){var e=R(),i=e._rgba=[];return t=t.toLowerCase(),W(B,(function(s,r){var n=(n=r.re.exec(t))&&r.parse(n);if(r=r.space||"rgba",n)return n=e[r](n),e[M[r].cache]=n[M[r].cache],i=e._rgba=n._rgba,!1})),i.length?("0,0,0,0"===i.join()&&I.extend(i,st.transparent),e):st[t]}function q(t,e,i){return 6*(i=(i+1)%1)<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}z.style.cssText="background-color:rgba(1,1,1,.5)",H.rgba=-1<z.style.backgroundColor.indexOf("rgba"),W(M,(function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}})),I.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){L["[object "+e+"]"]=e.toLowerCase()})),(R.fn=I.extend(R.prototype,{parse:function(t,e,i,s){if(void 0===t)return this._rgba=[null,null,null,null],this;(t.jquery||t.nodeType)&&(t=I(t).css(e),e=void 0);var r=this,n=$(t),o=this._rgba=[];return void 0!==e&&(t=[t,e,i,s],n="array"),"string"===n?this.parse(V(t)||st._default):"array"===n?(W(M.rgba.props,(function(e,i){o[i.idx]=U(t[i.idx],i)})),this):"object"===n?(W(M,t instanceof R?function(e,i){t[i.cache]&&(r[i.cache]=t[i.cache].slice())}:function(e,i){var s=i.cache;W(i.props,(function(e,n){if(!r[s]&&i.to){if("alpha"===e||null==t[e])return;r[s]=i.to(r._rgba)}r[s][n.idx]=U(t[e],n,!0)})),r[s]&&I.inArray(null,r[s].slice(0,3))<0&&(null==r[s][3]&&(r[s][3]=1),i.from&&(r._rgba=i.from(r[s])))}),this):void 0},is:function(t){var e=R(t),i=!0,s=this;return W(M,(function(t,r){var n,o=e[r.cache];return o&&(n=s[r.cache]||r.to&&r.to(s._rgba)||[],W(r.props,(function(t,e){if(null!=o[e.idx])return i=o[e.idx]===n[e.idx]}))),i})),i},_space:function(){var t=[],e=this;return W(M,(function(i,s){e[s.cache]&&t.push(i)})),t.pop()},transition:function(t,e){var i=(o=R(t))._space(),s=M[i],r=(t=0===this.alpha()?R("transparent"):this)[s.cache]||s.to(t._rgba),n=r.slice(),o=o[s.cache];return W(s.props,(function(t,i){var s=i.idx,a=r[s],l=o[s],h=F[i.type]||{};null!==l&&(null===a?n[s]=l:(h.mod&&(l-a>h.mod/2?a+=h.mod:a-l>h.mod/2&&(a-=h.mod)),n[s]=U((l-a)*e+a,i)))})),this[i](n)},blend:function(t){if(1===this._rgba[3])return this;var e=this._rgba.slice(),i=e.pop(),s=R(t)._rgba;return R(I.map(e,(function(t,e){return(1-i)*s[e]+i*t})))},toRgbaString:function(){var t="rgba(",e=I.map(this._rgba,(function(t,e){return null!=t?t:2<e?1:0}));return 1===e[3]&&(e.pop(),t="rgb("),t+e.join()+")"},toHslaString:function(){var t="hsla(",e=I.map(this.hsla(),(function(t,e){return null==t&&(t=2<e?1:0),e&&e<3?Math.round(100*t)+"%":t}));return 1===e[3]&&(e.pop(),t="hsl("),t+e.join()+")"},toHexString:function(t){var e=this._rgba.slice(),i=e.pop();return t&&e.push(~~(255*i)),"#"+I.map(e,(function(t){return 1===(t=(t||0).toString(16)).length?"0"+t:t})).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}})).parse.prototype=R.fn,M.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/255,i=t[1]/255,s=t[2]/255,r=t[3],n=Math.max(e,i,s),o=Math.min(e,i,s),a=n-o,l=(t=.5*(l=n+o),i=o===n?0:e===n?60*(i-s)/a+360:i===n?60*(s-e)/a+120:60*(e-i)/a+240,0==a?0:t<=.5?a/l:a/(2-l));return[Math.round(i)%360,l,t,null==r?1:r]},M.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],s=t[2];return t=t[3],s=2*s-(i=s<=.5?s*(1+i):s+i-s*i),[Math.round(255*q(s,i,e+1/3)),Math.round(255*q(s,i,e)),Math.round(255*q(s,i,e-1/3)),t]},W(M,(function(t,e){var i=e.props,s=e.cache,r=e.to,n=e.from;R.fn[t]=function(t){if(r&&!this[s]&&(this[s]=r(this._rgba)),void 0===t)return this[s].slice();var e=$(t),o="array"===e||"object"===e?t:arguments,a=this[s].slice();return W(i,(function(t,i){null==(t=o["object"===e?t:i.idx])&&(t=a[i.idx]),a[i.idx]=U(t,i)})),n?((t=R(n(a)))[s]=a,t):R(a)},W(i,(function(e,i){R.fn[e]||(R.fn[e]=function(s){var r,n=$(s),o="alpha"===e?this._hsla?"hsla":"rgba":t,a=this[o](),l=a[i.idx];return"undefined"===n?l:("function"===n&&(n=$(s=s.call(this,l))),null==s&&i.empty?this:("string"===n&&(r=N.exec(s))&&(s=l+parseFloat(r[2])*("+"===r[1]?1:-1)),a[i.idx]=s,this[o](a)))})}))})),(R.hook=function(t){t=t.split(" "),W(t,(function(t,e){I.cssHooks[e]={set:function(t,i){var s,r,n="";if("transparent"!==i&&("string"!==$(i)||(s=V(i)))){if(i=R(s||i),!H.rgba&&1!==i._rgba[3]){for(r="backgroundColor"===e?t.parentNode:t;(""===n||"transparent"===n)&&r&&r.style;)try{n=I.css(r,"backgroundColor"),r=r.parentNode}catch(t){}i=i.blend(n&&"transparent"!==n?n:"_default")}i=i.toRgbaString()}try{t.style[e]=i}catch(t){}}},I.fx.step[e]=function(t){t.colorInit||(t.start=R(t.elem,e),t.end=R(t.end),t.colorInit=!0),I.cssHooks[e].set(t.elem,t.start.transition(t.end,t.pos))}}))})("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),I.cssHooks.borderColor={expand:function(t){var e={};return W(["Top","Right","Bottom","Left"],(function(i,s){e["border"+s+"Color"]=t})),e}};var K,G,Y,X,J,Q,Z,tt,et,it,st=I.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"},rt="ui-effects-",nt="ui-effects-style",ot="ui-effects-animated";function at(t){var e,i,s=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,r={};if(s&&s.length&&s[0]&&s[s[0]])for(i=s.length;i--;)"string"==typeof s[e=s[i]]&&(r[e.replace(/-([\da-z])/gi,(function(t,e){return e.toUpperCase()}))]=s[e]);else for(e in s)"string"==typeof s[e]&&(r[e]=s[e]);return r}function lt(e,i,s,r){return e={effect:e=t.isPlainObject(e)?(i=e).effect:e},"function"==typeof(i=null==i?{}:i)&&(r=i,s=null,i={}),"number"!=typeof i&&!t.fx.speeds[i]||(r=s,s=i,i={}),"function"==typeof s&&(r=s,s=null),i&&t.extend(e,i),s=s||i.duration,e.duration=t.fx.off?0:"number"==typeof s?s:s in t.fx.speeds?t.fx.speeds[s]:t.fx.speeds._default,e.complete=r||i.complete,e}function ht(e){return!e||"number"==typeof e||t.fx.speeds[e]||"string"==typeof e&&!t.effects.effect[e]||"function"==typeof e||"object"==Ve(e)&&!e.effect}function ct(t,e){var i=e.outerWidth();return e=e.outerHeight(),t=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/.exec(t)||["",0,i,e,0],{top:parseFloat(t[1])||0,right:"auto"===t[2]?i:parseFloat(t[2]),bottom:"auto"===t[3]?e:parseFloat(t[3]),left:parseFloat(t[4])||0}}t.effects={effect:{}},X=["add","remove","toggle"],J={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1},t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],(function(e,i){t.fx.step[i]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(I.style(t.elem,i,t.end),t.setAttr=!0)}})),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(e,i,s,r){var n=t.speed(i,s,r);return this.queue((function(){var i=t(this),s=i.attr("class")||"",r=(r=n.children?i.find("*").addBack():i).map((function(){return{el:t(this),start:at(this)}})),o=function(){t.each(X,(function(t,s){e[s]&&i[s+"Class"](e[s])}))};o(),r=r.map((function(){return this.end=at(this.el[0]),this.diff=function(e,i){var s,r,n={};for(s in i)r=i[s],e[s]!==r&&(J[s]||!t.fx.step[s]&&isNaN(parseFloat(r))||(n[s]=r));return n}(this.start,this.end),this})),i.attr("class",s),r=r.map((function(){var e=this,i=t.Deferred(),s=t.extend({},n,{queue:!1,complete:function(){i.resolve(e)}});return this.el.animate(this.diff,s),i.promise()})),t.when.apply(t,r.get()).done((function(){o(),t.each(arguments,(function(){var e=this.el;t.each(this.diff,(function(t){e.css(t,"")}))})),n.complete.call(i[0])}))}))},t.fn.extend({addClass:(Y=t.fn.addClass,function(e,i,s,r){return i?t.effects.animateClass.call(this,{add:e},i,s,r):Y.apply(this,arguments)}),removeClass:(G=t.fn.removeClass,function(e,i,s,r){return 1<arguments.length?t.effects.animateClass.call(this,{remove:e},i,s,r):G.apply(this,arguments)}),toggleClass:(K=t.fn.toggleClass,function(e,i,s,r,n){return"boolean"==typeof i||void 0===i?s?t.effects.animateClass.call(this,i?{add:e}:{remove:e},s,r,n):K.apply(this,arguments):t.effects.animateClass.call(this,{toggle:e},i,s,r)}),switchClass:function(e,i,s,r,n){return t.effects.animateClass.call(this,{add:i,remove:e},s,r,n)}}),t.expr&&t.expr.pseudos&&t.expr.pseudos.animated&&(t.expr.pseudos.animated=(Q=t.expr.pseudos.animated,function(e){return!!t(e).data(ot)||Q(e)})),!1!==t.uiBackCompat&&t.extend(t.effects,{save:function(t,e){for(var i=0,s=e.length;i<s;i++)null!==e[i]&&t.data(rt+e[i],t[0].style[e[i]])},restore:function(t,e){for(var i,s=0,r=e.length;s<r;s++)null!==e[s]&&(i=t.data(rt+e[s]),t.css(e[s],i))},setMode:function(t,e){return"toggle"===e?t.is(":hidden")?"show":"hide":e},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),float:e.css("float")},s=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),r={width:e.width(),height:e.height()},n=document.activeElement;try{n.id}catch(s){n=document.body}return e.wrap(s),e[0]!==n&&!t.contains(e[0],n)||t(n).trigger("focus"),s=e.parent(),"static"===e.css("position")?(s.css({position:"relative"}),e.css({position:"relative"})):(t.extend(i,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],(function(t,s){i[s]=e.css(s),isNaN(parseInt(i[s],10))&&(i[s]="auto")})),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(r),s.css(i).show()},removeWrapper:function(e){var i=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),e[0]!==i&&!t.contains(e[0],i)||t(i).trigger("focus")),e}}),t.extend(t.effects,{version:"1.13.1",define:function(e,i,s){return s||(s=i,i="effect"),t.effects.effect[e]=s,t.effects.effect[e].mode=i,s},scaledDimensions:function(t,e,i){if(0===e)return{height:0,width:0,outerHeight:0,outerWidth:0};var s="horizontal"!==i?(e||100)/100:1;return e="vertical"!==i?(e||100)/100:1,{height:t.height()*e,width:t.width()*s,outerHeight:t.outerHeight()*e,outerWidth:t.outerWidth()*s}},clipToBox:function(t){return{width:t.clip.right-t.clip.left,height:t.clip.bottom-t.clip.top,left:t.clip.left,top:t.clip.top}},unshift:function(t,e,i){var s=t.queue();1<e&&s.splice.apply(s,[1,0].concat(s.splice(e,i))),t.dequeue()},saveStyle:function(t){t.data(nt,t[0].style.cssText)},restoreStyle:function(t){t[0].style.cssText=t.data(nt)||"",t.removeData(nt)},mode:function(t,e){return t=t.is(":hidden"),"toggle"===e&&(e=t?"show":"hide"),(t?"hide"===e:"show"===e)?"none":e},getBaseline:function(t,e){var i,s;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":s=0;break;case"center":s=.5;break;case"right":s=1;break;default:s=t[1]/e.width}return{x:s,y:i}},createPlaceholder:function(e){var i,s=e.css("position"),r=e.position();return e.css({marginTop:e.css("marginTop"),marginBottom:e.css("marginBottom"),marginLeft:e.css("marginLeft"),marginRight:e.css("marginRight")}).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()),/^(static|relative)/.test(s)&&(s="absolute",i=t("<"+e[0].nodeName+">").insertAfter(e).css({display:/^(inline|ruby)/.test(e.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:e.css("marginTop"),marginBottom:e.css("marginBottom"),marginLeft:e.css("marginLeft"),marginRight:e.css("marginRight"),float:e.css("float")}).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).addClass("ui-effects-placeholder"),e.data(rt+"placeholder",i)),e.css({position:s,left:r.left,top:r.top}),i},removePlaceholder:function(t){var e=rt+"placeholder",i=t.data(e);i&&(i.remove(),t.removeData(e))},cleanUp:function(e){t.effects.restoreStyle(e),t.effects.removePlaceholder(e)},setTransition:function(e,i,s,r){return r=r||{},t.each(i,(function(t,i){var n=e.cssUnit(i);0<n[0]&&(r[i]=n[0]*s+n[1])})),r}}),t.fn.extend({effect:function(){function e(e){var i=t(this),s=t.effects.mode(i,l)||r;i.data(ot,!0),h.push(s),r&&("show"===s||s===r&&"hide"===s)&&i.show(),r&&"none"===s||t.effects.saveStyle(i),"function"==typeof e&&e()}var i=lt.apply(this,arguments),s=t.effects.effect[i.effect],r=s.mode,n=i.queue,o=n||"fx",a=i.complete,l=i.mode,h=[];return t.fx.off||!s?l?this[l](i.duration,a):this.each((function(){a&&a.call(this)})):!1===n?this.each(e).each(c):this.queue(o,e).queue(o,c);function c(e){var n=t(this);function o(){"function"==typeof a&&a.call(n[0]),"function"==typeof e&&e()}i.mode=h.shift(),!1===t.uiBackCompat||r?"none"===i.mode?(n[l](),o()):s.call(n[0],i,(function(){n.removeData(ot),t.effects.cleanUp(n),"hide"===i.mode&&n.hide(),o()})):(n.is(":hidden")?"hide"===l:"show"===l)?(n[l](),o()):s.call(n[0],i,o)}},show:(et=t.fn.show,function(t){return ht(t)?et.apply(this,arguments):((t=lt.apply(this,arguments)).mode="show",this.effect.call(this,t))}),hide:(tt=t.fn.hide,function(t){return ht(t)?tt.apply(this,arguments):((t=lt.apply(this,arguments)).mode="hide",this.effect.call(this,t))}),toggle:(Z=t.fn.toggle,function(t){return ht(t)||"boolean"==typeof t?Z.apply(this,arguments):((t=lt.apply(this,arguments)).mode="toggle",this.effect.call(this,t))}),cssUnit:function(e){var i=this.css(e),s=[];return t.each(["em","px","%","pt"],(function(t,e){0<i.indexOf(e)&&(s=[parseFloat(i),e])})),s},cssClip:function(t){return t?this.css("clip","rect("+t.top+"px "+t.right+"px "+t.bottom+"px "+t.left+"px)"):ct(this.css("clip"),this)},transfer:function(e,i){var s=t(this),r="fixed"===(l=t(e.to)).css("position"),n=t("body"),o=r?n.scrollTop():0,a=r?n.scrollLeft():0,l=(n={top:(n=l.offset()).top-o,left:n.left-a,height:l.innerHeight(),width:l.innerWidth()},s.offset()),h=t("<div class='ui-effects-transfer'></div>");h.appendTo("body").addClass(e.className).css({top:l.top-o,left:l.left-a,height:s.innerHeight(),width:s.innerWidth(),position:r?"fixed":"absolute"}).animate(n,e.duration,e.easing,(function(){h.remove(),"function"==typeof i&&i()}))}}),t.fx.step.clip=function(e){e.clipInit||(e.start=t(e.elem).cssClip(),"string"==typeof e.end&&(e.end=ct(e.end,e.elem)),e.clipInit=!0),t(e.elem).cssClip({top:e.pos*(e.end.top-e.start.top)+e.start.top,right:e.pos*(e.end.right-e.start.right)+e.start.right,bottom:e.pos*(e.end.bottom-e.start.bottom)+e.start.bottom,left:e.pos*(e.end.left-e.start.left)+e.start.left})},it={},t.each(["Quad","Cubic","Quart","Quint","Expo"],(function(t,e){it[e]=function(e){return Math.pow(e,t+2)}})),t.extend(it,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;t<((e=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(it,(function(e,i){t.easing["easeIn"+e]=i,t.easing["easeOut"+e]=function(t){return 1-i(1-t)},t.easing["easeInOut"+e]=function(t){return t<.5?i(2*t)/2:1-i(-2*t+2)/2}})),z=t.effects,t.effects.define("blind","hide",(function(e,i){var s={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},r=t(this),n=e.direction||"up",o=r.cssClip(),a={clip:t.extend({},o)},l=t.effects.createPlaceholder(r);a.clip[s[n][0]]=a.clip[s[n][1]],"show"===e.mode&&(r.cssClip(a.clip),l&&l.css(t.effects.clipToBox(a)),a.clip=o),l&&l.animate(t.effects.clipToBox(a),e.duration,e.easing),r.animate(a,{queue:!1,duration:e.duration,easing:e.easing,complete:i})})),t.effects.define("bounce",(function(e,i){var s,r,n=t(this),o="hide"===(u=e.mode),a="show"===u,l=e.direction||"up",h=e.distance,c=e.times||5,u=2*c+(a||o?1:0),d=e.duration/u,p=e.easing,m="up"===l||"down"===l?"top":"left",f="up"===l||"left"===l,g=0;for(e=n.queue().length,t.effects.createPlaceholder(n),l=n.css(m),h=h||n["top"==m?"outerHeight":"outerWidth"]()/3,a&&((r={opacity:1})[m]=l,n.css("opacity",0).css(m,f?2*-h:2*h).animate(r,d,p)),o&&(h/=Math.pow(2,c-1)),(r={})[m]=l;g<c;g++)(s={})[m]=(f?"-=":"+=")+h,n.animate(s,d,p).animate(r,d,p),h=o?2*h:h/2;o&&((s={opacity:0})[m]=(f?"-=":"+=")+h,n.animate(s,d,p)),n.queue(i),t.effects.unshift(n,e,1+u)})),t.effects.define("clip","hide",(function(e,i){var s={},r=t(this),n=(o="both"===(a=e.direction||"vertical"))||"horizontal"===a,o=o||"vertical"===a,a=r.cssClip();s.clip={top:o?(a.bottom-a.top)/2:a.top,right:n?(a.right-a.left)/2:a.right,bottom:o?(a.bottom-a.top)/2:a.bottom,left:n?(a.right-a.left)/2:a.left},t.effects.createPlaceholder(r),"show"===e.mode&&(r.cssClip(s.clip),s.clip=a),r.animate(s,{queue:!1,duration:e.duration,easing:e.easing,complete:i})})),t.effects.define("drop","hide",(function(e,i){var s=t(this),r="show"===e.mode,n=e.direction||"left",o="up"===n||"down"===n?"top":"left",a="up"===n||"left"===n?"-=":"+=",l="+="==a?"-=":"+=",h={opacity:0};t.effects.createPlaceholder(s),n=e.distance||s["top"==o?"outerHeight":"outerWidth"](!0)/2,h[o]=a+n,r&&(s.css(h),h[o]=l+n,h.opacity=1),s.animate(h,{queue:!1,duration:e.duration,easing:e.easing,complete:i})})),t.effects.define("explode","hide",(function(e,i){var s,r,n,o,a,l,h=e.pieces?Math.round(Math.sqrt(e.pieces)):3,c=h,u=t(this),d="show"===e.mode,p=u.show().css("visibility","hidden").offset(),m=Math.ceil(u.outerWidth()/c),f=Math.ceil(u.outerHeight()/h),g=[];function v(){g.push(this),g.length===h*c&&(u.css({visibility:"visible"}),t(g).remove(),i())}for(s=0;s<h;s++)for(o=p.top+s*f,l=s-(h-1)/2,r=0;r<c;r++)n=p.left+r*m,a=r-(c-1)/2,u.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-r*m,top:-s*f}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:m,height:f,left:n+(d?a*m:0),top:o+(d?l*f:0),opacity:d?0:1}).animate({left:n+(d?0:a*m),top:o+(d?0:l*f),opacity:d?1:0},e.duration||500,e.easing,v)})),t.effects.define("fade","toggle",(function(e,i){var s="show"===e.mode;t(this).css("opacity",s?0:1).animate({opacity:s?1:0},{queue:!1,duration:e.duration,easing:e.easing,complete:i})})),t.effects.define("fold","hide",(function(e,i){var s=t(this),r="show"===(f=e.mode),n="hide"===f,o=e.size||15,a=/([0-9]+)%/.exec(o),l=e.horizFirst?["right","bottom"]:["bottom","right"],h=e.duration/2,c=t.effects.createPlaceholder(s),u=s.cssClip(),d={clip:t.extend({},u)},p={clip:t.extend({},u)},m=[u[l[0]],u[l[1]]],f=s.queue().length;a&&(o=parseInt(a[1],10)/100*m[n?0:1]),d.clip[l[0]]=o,p.clip[l[0]]=o,p.clip[l[1]]=0,r&&(s.cssClip(p.clip),c&&c.css(t.effects.clipToBox(p)),p.clip=u),s.queue((function(i){c&&c.animate(t.effects.clipToBox(d),h,e.easing).animate(t.effects.clipToBox(p),h,e.easing),i()})).animate(d,h,e.easing).animate(p,h,e.easing).queue(i),t.effects.unshift(s,f,4)})),t.effects.define("highlight","show",(function(e,i){var s=t(this),r={backgroundColor:s.css("backgroundColor")};"hide"===e.mode&&(r.opacity=0),t.effects.saveStyle(s),s.css({backgroundImage:"none",backgroundColor:e.color||"#ffff99"}).animate(r,{queue:!1,duration:e.duration,easing:e.easing,complete:i})})),t.effects.define("size",(function(e,i){var s,r=t(this),n=["fontSize"],o=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],a=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],l=e.mode,h="effect"!==l,c=e.scale||"both",u=e.origin||["middle","center"],d=r.css("position"),p=r.position(),m=t.effects.scaledDimensions(r),f=e.from||m,g=e.to||t.effects.scaledDimensions(r,0);t.effects.createPlaceholder(r),"show"===l&&(l=f,f=g,g=l),s={from:{y:f.height/m.height,x:f.width/m.width},to:{y:g.height/m.height,x:g.width/m.width}},"box"!==c&&"both"!==c||(s.from.y!==s.to.y&&(f=t.effects.setTransition(r,o,s.from.y,f),g=t.effects.setTransition(r,o,s.to.y,g)),s.from.x!==s.to.x&&(f=t.effects.setTransition(r,a,s.from.x,f),g=t.effects.setTransition(r,a,s.to.x,g))),"content"!==c&&"both"!==c||s.from.y!==s.to.y&&(f=t.effects.setTransition(r,n,s.from.y,f),g=t.effects.setTransition(r,n,s.to.y,g)),u&&(u=t.effects.getBaseline(u,m),f.top=(m.outerHeight-f.outerHeight)*u.y+p.top,f.left=(m.outerWidth-f.outerWidth)*u.x+p.left,g.top=(m.outerHeight-g.outerHeight)*u.y+p.top,g.left=(m.outerWidth-g.outerWidth)*u.x+p.left),delete f.outerHeight,delete f.outerWidth,r.css(f),"content"!==c&&"both"!==c||(o=o.concat(["marginTop","marginBottom"]).concat(n),a=a.concat(["marginLeft","marginRight"]),r.find("*[width]").each((function(){var i=t(this),r={height:(n=t.effects.scaledDimensions(i)).height*s.from.y,width:n.width*s.from.x,outerHeight:n.outerHeight*s.from.y,outerWidth:n.outerWidth*s.from.x},n={height:n.height*s.to.y,width:n.width*s.to.x,outerHeight:n.height*s.to.y,outerWidth:n.width*s.to.x};s.from.y!==s.to.y&&(r=t.effects.setTransition(i,o,s.from.y,r),n=t.effects.setTransition(i,o,s.to.y,n)),s.from.x!==s.to.x&&(r=t.effects.setTransition(i,a,s.from.x,r),n=t.effects.setTransition(i,a,s.to.x,n)),h&&t.effects.saveStyle(i),i.css(r),i.animate(n,e.duration,e.easing,(function(){h&&t.effects.restoreStyle(i)}))}))),r.animate(g,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){var e=r.offset();0===g.opacity&&r.css("opacity",f.opacity),h||(r.css("position","static"===d?"relative":d).offset(e),t.effects.saveStyle(r)),i()}})})),t.effects.define("scale",(function(e,i){var s=t(this),r=e.mode;r=parseInt(e.percent,10)||(0===parseInt(e.percent,10)||"effect"!==r?0:100),r=t.extend(!0,{from:t.effects.scaledDimensions(s),to:t.effects.scaledDimensions(s,r,e.direction||"both"),origin:e.origin||["middle","center"]},e),e.fade&&(r.from.opacity=1,r.to.opacity=0),t.effects.effect.size.call(this,r,i)})),t.effects.define("puff","hide",(function(e,i){e=t.extend(!0,{},e,{fade:!0,percent:parseInt(e.percent,10)||150}),t.effects.effect.scale.call(this,e,i)})),t.effects.define("pulsate","show",(function(e,i){var s=t(this),r="show"===(h=e.mode),n=2*(e.times||5)+(r||"hide"===h?1:0),o=e.duration/n,a=0,l=1,h=s.queue().length;for(!r&&s.is(":visible")||(s.css("opacity",0).show(),a=1);l<n;l++)s.animate({opacity:a},o,e.easing),a=1-a;s.animate({opacity:a},o,e.easing),s.queue(i),t.effects.unshift(s,h,1+n)})),t.effects.define("shake",(function(e,i){var s=1,r=t(this),n=e.direction||"left",o=e.distance||20,a=e.times||3,l=2*a+1,h=Math.round(e.duration/l),c="up"===n||"down"===n?"top":"left",u="up"===n||"left"===n,d={},p={},m={};for(n=r.queue().length,t.effects.createPlaceholder(r),d[c]=(u?"-=":"+=")+o,p[c]=(u?"+=":"-=")+2*o,m[c]=(u?"-=":"+=")+2*o,r.animate(d,h,e.easing);s<a;s++)r.animate(p,h,e.easing).animate(m,h,e.easing);r.animate(p,h,e.easing).animate(d,h/2,e.easing).queue(i),t.effects.unshift(r,n,1+l)})),t.effects.define("slide","show",(function(e,i){var s,r,n=t(this),o={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},a=e.mode,l=e.direction||"left",h="up"===l||"down"===l?"top":"left",c="up"===l||"left"===l,u=e.distance||n["top"==h?"outerHeight":"outerWidth"](!0),d={};t.effects.createPlaceholder(n),s=n.cssClip(),r=n.position()[h],d[h]=(c?-1:1)*u+r,d.clip=n.cssClip(),d.clip[o[l][1]]=d.clip[o[l][0]],"show"===a&&(n.cssClip(d.clip),n.css(h,d[h]),d.clip=s,d[h]=r),n.animate(d,{queue:!1,duration:e.duration,easing:e.easing,complete:i})})),!1!==t.uiBackCompat&&t.effects.define("transfer",(function(e,i){t(this).transfer(e,i)}))},"function"==typeof define&&i.amdO?define(["jquery"],$e):$e(jQuery),
/*!
 * jQuery Migrate - v1.2.1 - 2013-05-08
 * https://github.com/jquery/jquery-migrate
 * Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors; Licensed MIT
 */
function(t,e,i){var s={};function r(i){var r=e.console;s[i]||(s[i]=!0,t.migrateWarnings.push(i),r&&r.warn&&!t.migrateMute&&(r.warn("JQMIGRATE: "+i),t.migrateTrace&&r.trace&&r.trace()))}function n(e,i,s,n){if(Object.defineProperty)try{return void Object.defineProperty(e,i,{configurable:!0,enumerable:!0,get:function(){return r(n),s},set:function(t){r(n),s=t}})}catch(t){}t._definePropertyBroken=!0,e[i]=s}t.migrateWarnings=[],t.migrateMute=!0,!t.migrateMute&&e.console&&e.console.log&&e.console.log("JQMIGRATE: Logging is active"),t.migrateTrace===i&&(t.migrateTrace=!0),t.migrateReset=function(){s={},t.migrateWarnings.length=0},"BackCompat"===document.compatMode&&r("jQuery is not compatible with Quirks Mode");var o=t("<input/>",{size:1}).attr("size")&&t.attrFn,a=t.attr,l=t.attrHooks.value&&t.attrHooks.value.get||function(){return null},h=t.attrHooks.value&&t.attrHooks.value.set||function(){return i},c=/^(?:input|button)$/i,u=/^[238]$/,d=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,p=/^(?:checked|selected)$/i;n(t,"attrFn",o||{},"jQuery.attrFn is deprecated"),t.attr=function(e,s,n,l){var h=s.toLowerCase(),m=e&&e.nodeType;return l&&(a.length<4&&r("jQuery.fn.attr( props, pass ) is deprecated"),e&&!u.test(m)&&(o?s in o:t.isFunction(t.fn[s])))?t(e)[s](n):("type"===s&&n!==i&&c.test(e.nodeName)&&e.parentNode&&r("Can't change the 'type' of an input or button in IE 6/7/8"),!t.attrHooks[h]&&d.test(h)&&(t.attrHooks[h]={get:function(e,s){var r,n=t.prop(e,s);return!0===n||"boolean"!=typeof n&&(r=e.getAttributeNode(s))&&!1!==r.nodeValue?s.toLowerCase():i},set:function(e,i,s){var r;return!1===i?t.removeAttr(e,s):((r=t.propFix[s]||s)in e&&(e[r]=!0),e.setAttribute(s,s.toLowerCase())),s}},p.test(h)&&r("jQuery.fn.attr('"+h+"') may use property instead of attribute")),a.call(t,e,s,n))},t.attrHooks.value={get:function(t,e){var i=(t.nodeName||"").toLowerCase();return"button"===i?l.apply(this,arguments):("input"!==i&&"option"!==i&&r("jQuery.fn.attr('value') no longer gets properties"),e in t?t.value:null)},set:function(t,e){var i=(t.nodeName||"").toLowerCase();if("button"===i)return h.apply(this,arguments);"input"!==i&&"option"!==i&&r("jQuery.fn.attr('value', val) no longer sets properties"),t.value=e}};var m,f,g=t.fn.init,v=t.parseJSON,b=/^([^<]*)(<[\w\W]+>)([^>]*)$/;t.fn.init=function(e,i,s){var n;return e&&"string"==typeof e&&!t.isPlainObject(i)&&(n=b.exec(t.trim(e)))&&n[0]&&("<"!==e.charAt(0)&&r("$(html) HTML strings must start with '<' character"),n[3]&&r("$(html) HTML text after last tag is ignored"),"#"===n[0].charAt(0)&&(r("HTML string cannot start with a '#' character"),t.error("JQMIGRATE: Invalid selector string (XSS)")),i&&i.context&&(i=i.context),t.parseHTML)?g.call(this,t.parseHTML(n[2],i,!0),i,s):g.apply(this,arguments)},t.fn.init.prototype=t.fn,t.parseJSON=function(t){return t||null===t?v.apply(this,arguments):(r("jQuery.parseJSON requires a valid JSON string"),null)},t.uaMatch=function(t){t=t.toLowerCase();var e=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:e[1]||"",version:e[2]||"0"}},t.browser||(f={},(m=t.uaMatch(navigator.userAgent)).browser&&(f[m.browser]=!0,f.version=m.version),f.chrome?f.webkit=!0:f.webkit&&(f.safari=!0),t.browser=f),n(t,"browser",t.browser,"jQuery.browser is deprecated"),t.sub=function(){function e(t,i){return new e.fn.init(t,i)}t.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(s,r){return r&&r instanceof t&&!(r instanceof e)&&(r=e(r)),t.fn.init.call(this,s,r,i)},e.fn.init.prototype=e.fn;var i=e(document);return r("jQuery.sub() is deprecated"),e},t.ajaxSetup({converters:{"text json":t.parseJSON}});var y=t.fn.data;t.fn.data=function(e){var s,n,o=this[0];return!o||"events"!==e||1!==arguments.length||(s=t.data(o,e),n=t._data(o,e),s!==i&&s!==n||n===i)?y.apply(this,arguments):(r("Use of jQuery.fn.data('events') is deprecated"),n)};var C=/\/(java|ecma)script/i,_=t.fn.andSelf||t.fn.addBack;t.fn.andSelf=function(){return r("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),_.apply(this,arguments)},t.clean||(t.clean=function(e,i,s,n){i=(i=!(i=i||document).nodeType&&i[0]||i).ownerDocument||i,r("jQuery.clean() is deprecated");var o,a,l,h,c=[];if(t.merge(c,t.buildFragment(e,i).childNodes),s)for(l=function(t){if(!t.type||C.test(t.type))return n?n.push(t.parentNode?t.parentNode.removeChild(t):t):s.appendChild(t)},o=0;null!=(a=c[o]);o++)t.nodeName(a,"script")&&l(a)||(s.appendChild(a),void 0!==a.getElementsByTagName&&(h=t.grep(t.merge([],a.getElementsByTagName("script")),l),c.splice.apply(c,[o+1,0].concat(h)),o+=h.length));return c});var E=t.event.add,w=t.event.remove,k=t.event.trigger,T=t.fn.toggle,S=t.fn.live,x=t.fn.die,D="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",O=new RegExp("\\b(?:"+D+")\\b"),A=/(?:^|\s)hover(\.\S+|)\b/,P=function(e){return"string"!=typeof e||t.event.special.hover?e:(A.test(e)&&r("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),e&&e.replace(A,"mouseenter$1 mouseleave$1"))};t.event.props&&"attrChange"!==t.event.props[0]&&t.event.props.unshift("attrChange","attrName","relatedNode","srcElement"),t.event.dispatch&&n(t.event,"handle",t.event.dispatch,"jQuery.event.handle is undocumented and deprecated"),t.event.add=function(t,e,i,s,n){t!==document&&O.test(e)&&r("AJAX events should be attached to document: "+e),E.call(this,t,P(e||""),i,s,n)},t.event.remove=function(t,e,i,s,r){w.call(this,t,P(e)||"",i,s,r)},t.fn.error=function(){var t=Array.prototype.slice.call(arguments,0);return r("jQuery.fn.error() is deprecated"),t.splice(0,0,"error"),arguments.length?this.bind.apply(this,t):(this.triggerHandler.apply(this,t),this)},t.fn.toggle=function(e,i){if(!t.isFunction(e)||!t.isFunction(i))return T.apply(this,arguments);r("jQuery.fn.toggle(handler, handler...) is deprecated");var s=arguments,n=e.guid||t.guid++,o=0,a=function(i){var r=(t._data(this,"lastToggle"+e.guid)||0)%o;return t._data(this,"lastToggle"+e.guid,r+1),i.preventDefault(),s[r].apply(this,arguments)||!1};for(a.guid=n;o<s.length;)s[o++].guid=n;return this.click(a)},t.fn.live=function(e,i,s){return r("jQuery.fn.live() is deprecated"),S?S.apply(this,arguments):(t(this.context).on(e,this.selector,i,s),this)},t.fn.die=function(e,i){return r("jQuery.fn.die() is deprecated"),x?x.apply(this,arguments):(t(this.context).off(e,this.selector||"**",i),this)},t.event.trigger=function(t,e,i,s){return i||O.test(t)||r("Global events are undocumented and deprecated"),k.call(this,t,e,i||document,s)},t.each(D.split("|"),(function(e,i){t.event.special[i]={setup:function(){var e=this;return e!==document&&(t.event.add(document,i+"."+t.guid,(function(){t.event.trigger(i,null,e,!0)})),t._data(this,i,t.guid++)),!1},teardown:function(){return this!==document&&t.event.remove(document,i+"."+t._data(this,i)),!1}}}))}(jQuery,window);var qe;i(3593);function Ke(t){return Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ke(t)}
/*!
 * jQuery Migrate - v3.3.2 - 2020-11-17T23:22Z
 * Copyright OpenJS Foundation and other contributors
 */qe=function(t,e){function i(e){return function(t,e){var i,s=/^(\d+)\.(\d+)\.(\d+)/,r=s.exec(t)||[],n=s.exec(e)||[];for(i=1;i<=3;i++){if(+r[i]>+n[i])return 1;if(+r[i]<+n[i])return-1}return 0}(t.fn.jquery,e)>=0}t.migrateVersion="3.3.2",e.console&&e.console.log&&(t&&i("3.0.0")||e.console.log("JQMIGRATE: jQuery 3.0.0+ REQUIRED"),t.migrateWarnings);var s={};function r(i){var r=e.console;t.migrateDeduplicateWarnings&&s[i]||(s[i]=!0,t.migrateWarnings.push(i),r&&r.warn&&!t.migrateMute&&(r.warn("JQMIGRATE: "+i),t.migrateTrace&&r.trace&&r.trace()))}function n(t,e,i,s){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return r(s),i},set:function(t){r(s),i=t}})}function o(t,e,i,s){t[e]=function(){return r(s),i.apply(this,arguments)}}t.migrateDeduplicateWarnings=!0,t.migrateWarnings=[],void 0===t.migrateTrace&&(t.migrateTrace=!0),t.migrateReset=function(){s={},t.migrateWarnings.length=0},"BackCompat"===e.document.compatMode&&r("jQuery is not compatible with Quirks Mode");var a,l={},h=t.fn.init,c=t.find,u=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/,d=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/g,p=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;for(a in t.fn.init=function(t){var e=Array.prototype.slice.call(arguments);return"string"==typeof t&&"#"===t&&(r("jQuery( '#' ) is not a valid selector"),e[0]=[]),h.apply(this,e)},t.fn.init.prototype=t.fn,t.find=function(t){var i=Array.prototype.slice.call(arguments);if("string"==typeof t&&u.test(t))try{e.document.querySelector(t)}catch(s){t=t.replace(d,(function(t,e,i,s){return"["+e+i+'"'+s+'"]'}));try{e.document.querySelector(t),r("Attribute selector with '#' must be quoted: "+i[0]),i[0]=t}catch(t){r("Attribute selector with '#' was not fixed: "+i[0])}}return c.apply(this,i)},c)Object.prototype.hasOwnProperty.call(c,a)&&(t.find[a]=c[a]);if(o(t.fn,"size",(function(){return this.length}),"jQuery.fn.size() is deprecated and removed; use the .length property"),o(t,"parseJSON",(function(){return JSON.parse.apply(null,arguments)}),"jQuery.parseJSON is deprecated; use JSON.parse"),o(t,"holdReady",t.holdReady,"jQuery.holdReady is deprecated"),o(t,"unique",t.uniqueSort,"jQuery.unique is deprecated; use jQuery.uniqueSort"),n(t.expr,"filters",t.expr.pseudos,"jQuery.expr.filters is deprecated; use jQuery.expr.pseudos"),n(t.expr,":",t.expr.pseudos,"jQuery.expr[':'] is deprecated; use jQuery.expr.pseudos"),i("3.1.1")&&o(t,"trim",(function(t){return null==t?"":(t+"").replace(p,"")}),"jQuery.trim is deprecated; use String.prototype.trim"),i("3.2.0")&&(o(t,"nodeName",(function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}),"jQuery.nodeName is deprecated"),o(t,"isArray",Array.isArray,"jQuery.isArray is deprecated; use Array.isArray")),i("3.3.0")&&(o(t,"isNumeric",(function(t){var e=Ke(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))}),"jQuery.isNumeric() is deprecated"),t.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){l["[object "+e+"]"]=e.toLowerCase()})),o(t,"type",(function(t){return null==t?t+"":"object"===Ke(t)||"function"==typeof t?l[Object.prototype.toString.call(t)]||"object":Ke(t)}),"jQuery.type is deprecated"),o(t,"isFunction",(function(t){return"function"==typeof t}),"jQuery.isFunction() is deprecated"),o(t,"isWindow",(function(t){return null!=t&&t===t.window}),"jQuery.isWindow() is deprecated")),t.ajax){var m=t.ajax,f=/(=)\?(?=&|$)|\?\?/;t.ajax=function(){var t=m.apply(this,arguments);return t.promise&&(o(t,"success",t.done,"jQXHR.success is deprecated and removed"),o(t,"error",t.fail,"jQXHR.error is deprecated and removed"),o(t,"complete",t.always,"jQXHR.complete is deprecated and removed")),t},i("4.0.0")||t.ajaxPrefilter("+json",(function(t){!1!==t.jsonp&&(f.test(t.url)||"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&f.test(t.data))&&r("JSON-to-JSONP auto-promotion is deprecated")}))}var g=t.fn.removeAttr,v=t.fn.toggleClass,b=/\S+/g;function y(t){return t.replace(/-([a-z])/g,(function(t,e){return e.toUpperCase()}))}t.fn.removeAttr=function(e){var i=this;return t.each(e.match(b),(function(e,s){t.expr.match.bool.test(s)&&(r("jQuery.fn.removeAttr no longer sets boolean properties: "+s),i.prop(s,!1))})),g.apply(this,arguments)},t.fn.toggleClass=function(e){return void 0!==e&&"boolean"!=typeof e?v.apply(this,arguments):(r("jQuery.fn.toggleClass( boolean ) is deprecated"),this.each((function(){var i=this.getAttribute&&this.getAttribute("class")||"";i&&t.data(this,"__className__",i),this.setAttribute&&this.setAttribute("class",i||!1===e?"":t.data(this,"__className__")||"")})))};var C,_=!1,E=/^[a-z]/,w=/^(?:Border(?:Top|Right|Bottom|Left)?(?:Width|)|(?:Margin|Padding)?(?:Top|Right|Bottom|Left)?|(?:Min|Max)?(?:Width|Height))$/;function k(t){return E.test(t)&&w.test(t[0].toUpperCase()+t.slice(1))}t.swap&&t.each(["height","width","reliableMarginRight"],(function(e,i){var s=t.cssHooks[i]&&t.cssHooks[i].get;s&&(t.cssHooks[i].get=function(){var t;return _=!0,t=s.apply(this,arguments),_=!1,t})})),t.swap=function(t,e,i,s){var n,o,a={};for(o in _||r("jQuery.swap() is undocumented and deprecated"),e)a[o]=t.style[o],t.style[o]=e[o];for(o in n=i.apply(t,s||[]),e)t.style[o]=a[o];return n},i("3.4.0")&&"undefined"!=typeof Proxy&&(t.cssProps=new Proxy(t.cssProps||{},{set:function(){return r("JQMIGRATE: jQuery.cssProps is deprecated"),Reflect.set.apply(this,arguments)}})),t.cssNumber||(t.cssNumber={}),C=t.fn.css,t.fn.css=function(e,i){var s,n=this;return e&&"object"===Ke(e)&&!Array.isArray(e)?(t.each(e,(function(e,i){t.fn.css.call(n,e,i)})),this):("number"==typeof i&&(k(s=y(e))||t.cssNumber[s]||r('Number-typed values are deprecated for jQuery.fn.css( "'+e+'", value )')),C.apply(this,arguments))};var T=t.data;if(t.data=function(e,i,s){var n,o,a;if(i&&"object"===Ke(i)&&2===arguments.length){for(a in n=t.hasData(e)&&T.call(this,e),o={},i)a!==y(a)?(r("jQuery.data() always sets/gets camelCased names: "+a),n[a]=i[a]):o[a]=i[a];return T.call(this,e,o),i}return i&&"string"==typeof i&&i!==y(i)&&(n=t.hasData(e)&&T.call(this,e))&&i in n?(r("jQuery.data() always sets/gets camelCased names: "+i),arguments.length>2&&(n[i]=s),n[i]):T.apply(this,arguments)},t.fx){var S,x,D=t.Tween.prototype.run,O=function(t){return t};t.Tween.prototype.run=function(){t.easing[this.easing].length>1&&(r("'jQuery.easing."+this.easing.toString()+"' should use only one argument"),t.easing[this.easing]=O),D.apply(this,arguments)},S=t.fx.interval||13,x="jQuery.fx.interval is deprecated",e.requestAnimationFrame&&Object.defineProperty(t.fx,"interval",{configurable:!0,enumerable:!0,get:function(){return e.document.hidden||r(x),S},set:function(t){r(x),S=t}})}var A=t.fn.load,P=t.event.add,I=t.event.fix;t.event.props=[],t.event.fixHooks={},n(t.event.props,"concat",t.event.props.concat,"jQuery.event.props.concat() is deprecated and removed"),t.event.fix=function(e){var i,s=e.type,n=this.fixHooks[s],o=t.event.props;if(o.length)for(r("jQuery.event.props are deprecated and removed: "+o.join());o.length;)t.event.addProp(o.pop());if(n&&!n._migrated_&&(n._migrated_=!0,r("jQuery.event.fixHooks are deprecated and removed: "+s),(o=n.props)&&o.length))for(;o.length;)t.event.addProp(o.pop());return i=I.call(this,e),n&&n.filter?n.filter(i,e):i},t.event.add=function(t,i){return t===e&&"load"===i&&"complete"===e.document.readyState&&r("jQuery(window).on('load'...) called after load event occurred"),P.apply(this,arguments)},t.each(["load","unload","error"],(function(e,i){t.fn[i]=function(){var t=Array.prototype.slice.call(arguments,0);return"load"===i&&"string"==typeof t[0]?A.apply(this,t):(r("jQuery.fn."+i+"() is deprecated"),t.splice(0,0,i),arguments.length?this.on.apply(this,t):(this.triggerHandler.apply(this,t),this))}})),t.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,i){t.fn[i]=function(t,e){return r("jQuery.fn."+i+"() event shorthand is deprecated"),arguments.length>0?this.on(i,null,t,e):this.trigger(i)}})),t((function(){t(e.document).triggerHandler("ready")})),t.event.special.ready={setup:function(){this===e.document&&r("'ready' event is deprecated")}},t.fn.extend({bind:function(t,e,i){return r("jQuery.fn.bind() is deprecated"),this.on(t,null,e,i)},unbind:function(t,e){return r("jQuery.fn.unbind() is deprecated"),this.off(t,null,e)},delegate:function(t,e,i,s){return r("jQuery.fn.delegate() is deprecated"),this.on(e,t,i,s)},undelegate:function(t,e,i){return r("jQuery.fn.undelegate() is deprecated"),1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)},hover:function(t,e){return r("jQuery.fn.hover() is deprecated"),this.on("mouseenter",t).on("mouseleave",e||t)}});var L=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,j=t.htmlPrefilter,N=function(t){var i=e.document.implementation.createHTMLDocument("");return i.body.innerHTML=t,i.body&&i.body.innerHTML},B=function(t){var e=t.replace(L,"<$1></$2>");e!==t&&N(t)!==N(e)&&r("HTML tags must be properly nested and closed: "+t)};t.UNSAFE_restoreLegacyHtmlPrefilter=function(){t.htmlPrefilter=function(t){return B(t),t.replace(L,"<$1></$2>")}},t.htmlPrefilter=function(t){return B(t),j(t)};var R=t.fn.offset;if(t.fn.offset=function(){var t=this[0];return!t||t.nodeType&&t.getBoundingClientRect?R.apply(this,arguments):(r("jQuery.fn.offset() requires a valid DOM element"),arguments.length?this:void 0)},t.ajax){var M=t.param;t.param=function(e,i){var s=t.ajaxSettings&&t.ajaxSettings.traditional;return void 0===i&&s&&(r("jQuery.param() no longer uses jQuery.ajaxSettings.traditional"),i=s),M.call(this,e,i)}}var F=t.fn.andSelf||t.fn.addBack;if(t.fn.andSelf=function(){return r("jQuery.fn.andSelf() is deprecated and removed, use jQuery.fn.addBack()"),F.apply(this,arguments)},t.Deferred){var H=t.Deferred,z=[["resolve","done",t.Callbacks("once memory"),t.Callbacks("once memory"),"resolved"],["reject","fail",t.Callbacks("once memory"),t.Callbacks("once memory"),"rejected"],["notify","progress",t.Callbacks("memory"),t.Callbacks("memory")]];t.Deferred=function(e){var i=H(),s=i.promise();return i.pipe=s.pipe=function(){var e=arguments;return r("deferred.pipe() is deprecated"),t.Deferred((function(r){t.each(z,(function(t,n){var o="function"==typeof e[t]&&e[t];i[n[1]]((function(){var t=o&&o.apply(this,arguments);t&&"function"==typeof t.promise?t.promise().done(r.resolve).fail(r.reject).progress(r.notify):r[n[0]+"With"](this===s?r.promise():this,o?[t]:arguments)}))})),e=null})).promise()},e&&e.call(i,i),i},t.Deferred.exceptionHook=H.exceptionHook}return t},"function"==typeof define&&i.amdO?define(["jquery"],(function(t){return qe(t,window)})):qe(jQuery,window);i(5788),i(244),i(6618),i(4139);!function(t){t.extend(!0,window,{Slick:{Controls:{ColumnPicker:function(e,i,s){var r,n={fadeSpeed:250};function o(n){r.empty();i.getColumns();for(var o,a,l=0;l<e.length;l++)o=t("<li />").appendTo(r),a=t("<input type='checkbox' />").attr("id","columnpicker_"+l).data("id",e[l].id).appendTo(o),null!=i.getColumnIndex(e[l].id)&&a.attr("checked","checked"),t("<label for='columnpicker_"+l+"' />").text(e[l].name).appendTo(o);t("<hr/>").appendTo(r),o=t("<li />").appendTo(r),a=t("<input type='checkbox' id='autoresize' />").appendTo(o),t("<label for='autoresize'>Force Fit Columns</label>").appendTo(o),i.getOptions().forceFitColumns&&a.attr("checked","checked"),o=t("<li />").appendTo(r),a=t("<input type='checkbox' id='syncresize' />").appendTo(o),t("<label for='syncresize'>Synchronous Resizing</label>").appendTo(o),i.getOptions().syncColumnCellResize&&a.attr("checked","checked"),r.css("top",n.pageY-10).css("left",n.pageX-10).fadeIn(s.fadeSpeed)}function a(s){if("autoresize"!=s.target.id)if("syncresize"!=s.target.id){if(t(s.target).is(":checkbox")){if(0==r.find(":checkbox:checked").length)return void t(s.target).attr("checked","checked");var n=[];r.find(":checkbox[id^=columnpicker]").each((function(i,s){t(this).is(":checked")&&n.push(e[i])})),i.setColumns(n)}}else s.target.checked?i.setOptions({syncColumnCellResize:!0}):i.setOptions({syncColumnCellResize:!1});else s.target.checked?(i.setOptions({forceFitColumns:!0}),i.autosizeColumns()):i.setOptions({forceFitColumns:!1})}i.onHeaderContextMenu=o,s=t.extend({},n,s),(r=t("<span class='slick-columnpicker' style='display:none;position:absolute;z-index:20;' />").appendTo(document.body)).bind("mouseleave",(function(e){t(this).fadeOut(s.fadeSpeed)})),r.bind("click",a),t.extend(this,{destroy:function(){r.remove()}})}}}})}(jQuery);i(5069);function Ge(){return this.handlers=[],this.subscribe=function(t){this.handlers.push(t)},this.notify=function(t){for(var e=0;e<this.handlers.length;e++)this.handlers[e].call(this,t)},this}jQuery.extend(!0,window,{Slick:{Data:{DataView:function(){var t=ri,e=[],i=[],s={},r=null,n=null,o=null,a=!1,l=!0,h=null,c=null,u=0,d=0,p=0,m=new Ge,f=new Ge,g=new Ge;function v(){s={};for(var i=0,r=e.length;i<r;i++){var n=e[i][t];if(null==n||null!=s[n])throw"Each data element must implement a unique 'id' property";s[n]=i}}function b(){return{pageSize:u,pageNum:d,totalRows:p}}function y(t,i){l=i,h=t,c=null,!1===i&&e.reverse(),e.sort(t),!1===i&&e.reverse(),v(),E()}function C(t,i){l=i,c=t,h=null;var s=Object.prototype.toString;Object.prototype.toString="function"==typeof t?t:function(){return this[t]},!1===i&&e.reverse(),e.sort(),Object.prototype.toString=s,!1===i&&e.reverse(),v(),E()}function _(e,i,s,n){var o=[],a=e,l=i,h=s,c=n;r=null;for(var m,f,g=l.length,v=0,b=0,y=0,C=a.length;y<C;++y)m=a[y],h&&!h(m)||(f=m[t],(!u||v>=u*d&&v<u*(d+1))&&((b>=g||f!=l[b][t]||c&&c[f])&&(o[o.length]=b,l[b]=m),b++),v++);return g>b&&l.splice(b,g-b),p=v,o}function E(){if(!a){var t=i.length,s=p,r=_(e,i,n,o);u&&p<d*u&&(d=Math.floor(p/u),r=_(e,i,n,o)),o=null,s!=p&&g.notify(b()),t!=i.length&&m.notify({previous:t,current:i.length}),r.length>0&&f.notify(r)}}return{rows:i,beginUpdate:function(){a=!0},endUpdate:function(){a=!1,E()},setPagingOptions:function(t){null!=t.pageSize&&(u=t.pageSize),null!=t.pageNum&&(d=Math.min(t.pageNum,Math.ceil(p/u))),g.notify(b()),E()},getPagingInfo:b,getItems:function(){return e},setItems:function(i,s){void 0!==s&&(t=s),e=i,v(),E()},setFilter:function(t){n=t,E()},sort:y,fastSort:C,reSort:function(){h?y(h,l):c&&C(c,l)},getIdxById:function(t){return s[t]},getRowById:function(e){if(!r){r={};for(var s=0,n=i.length;s<n;++s)r[i[s][t]]=s}return r[e]},getItemById:function(t){return e[s[t]]},getItemByIdx:function(t){return e[t]},refresh:E,updateItem:function(i,r){if(void 0===s[i]||i!==r[t])throw"Invalid or non-matching id";e[s[i]]=r,o||(o={}),o[i]=!0,E()},insertItem:function(t,i){e.splice(t,0,i),v(),E()},addItem:function(t){e.push(t),v(),E()},deleteItem:function(t){if(void 0===s[t])throw"Invalid id";e.splice(s[t],1),v(),E()},refreshIdxById:v,onRowCountChanged:m,onRowsChanged:f,onPagingInfoChanged:g}}}}}),function(t){t.extend(!0,window,{Slick:{Controls:{Pager:function(e,i,s){var r;function n(){var t=!Slick.GlobalEditorLock.commitCurrentEdit(),i=e.getPagingInfo(),s=Math.floor(i.totalRows/i.pageSize);return{canGotoFirst:!t&&0!=i.pageSize&&i.pageNum>0,canGotoLast:!t&&0!=i.pageSize&&i.pageNum!=s,canGotoPrev:!t&&0!=i.pageSize&&i.pageNum>0,canGotoNext:!t&&0!=i.pageSize&&i.pageNum<s,pagingInfo:i,lastPage:s}}function o(t){e.setPagingOptions({pageSize:t})}function a(){n().canGotoFirst&&e.setPagingOptions({pageNum:0})}function l(){var t=n();t.canGotoLast&&e.setPagingOptions({pageNum:t.lastPage})}function h(){var t=n();t.canGotoPrev&&e.setPagingOptions({pageNum:t.pagingInfo.pageNum-1})}function c(){var t=n();t.canGotoNext&&e.setPagingOptions({pageNum:t.pagingInfo.pageNum+1})}function u(t){var e=n();s.find(".slick-pager-nav span").removeClass("ui-state-disabled"),e.canGotoFirst||s.find(".ui-icon-seek-first").addClass("ui-state-disabled"),e.canGotoLast||s.find(".ui-icon-seek-end").addClass("ui-state-disabled"),e.canGotoNext||s.find(".ui-icon-seek-next").addClass("ui-state-disabled"),e.canGotoPrev||s.find(".ui-icon-seek-prev").addClass("ui-state-disabled"),0==t.pageSize?r.text("Showing all "+t.totalRows+" rows"):r.text("Showing page "+(t.pageNum+1)+" of "+(Math.floor(t.totalRows/t.pageSize)+1))}e.onPagingInfoChanged.subscribe((function(t){u(t)})),function(){s.empty(),r=t("<span class='slick-pager-status' />").appendTo(s);var e=t("<span class='slick-pager-nav' />").appendTo(s),n=t("<span class='slick-pager-settings' />").appendTo(s);n.append("<span class='slick-pager-settings-expanded' style='display:none'>Show: <a data=0>All</a><a data='-1'>Auto</a><a data=25>25</a><a data=50>50</a><a data=100>100</a></span>"),n.find("a[data]").click((function(e){var s=t(e.target).attr("data");if(null!=s)if(-1==s){var r=i.getViewport();o(r.bottom-r.top)}else o(parseInt(s))}));var u="<span class='ui-state-default ui-corner-all ui-icon-container'><span class='ui-icon ",d="' /></span>";t(u+"ui-icon-lightbulb"+d).click((function(){t(".slick-pager-settings-expanded").toggle()})).appendTo(n),t(u+"ui-icon-seek-first"+d).click(a).appendTo(e),t(u+"ui-icon-seek-prev"+d).click(h).appendTo(e),t(u+"ui-icon-seek-next"+d).click(c).appendTo(e),t(u+"ui-icon-seek-end"+d).click(l).appendTo(e),s.find(".ui-icon-container").hover((function(){t(this).toggleClass("ui-state-hover")})),s.children().wrapAll("<div class='slick-pager' />")}(),u(e.getPagingInfo())}}}})}(jQuery);i(4864);var Ye,Xe=i(5441);function Je(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function Qe(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Je(Object(i),!0).forEach((function(e){Ze(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Je(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Ze(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var ti,ei,ii={autoedit:"$autoedit",boldheader:"$::boldheader",candragdisplayorder:"$::candragdisplayorder",canresizecolumns:-267,cansortcolumns:"$cansortcolumns",columnbackalpha:"$columnbackalpha",columnbackcolor:"$columnbackcolor",columncanresize:"$columncanresize",columncansort:"$columncansort",columndatacol:-1006,columnenabled:-1001,columnfontstyle:"$columnfontstyle",columnjst:-998,columnminwidth:"$columnminwidth",columnmode:"$columnmode",columnname:-1179,columnnames:-366,columnpicklist:-1e3,columnpopuptext:"$columnpopuptext",columntextcolor:-1003,columnwidth:-1004,columnwidths:"$::columnwidths",currentcolumn:-1005,designcols:-758,enterable:-474,extendable:-475,evenrowcolor:"$evenrowcolor",filterareaheight:"$filterareaheight",filtercol:"$filtercol",filterlabel:"$filterlabel",filtervalue:"$filtervalue",gridlinescolor:"$gridlinescolor",gridlinesdotted:"$gridlinesdotted",gridlinesvisible:"$gridlinesvisible",hasheader:"$hasheader",hasfilterarea:"$hasfilterarea",hcell:"$hcell",headerheight:"$::headerheight",headertext:"$headertext",hideselection:"$hideselection",rowheight:"$::rowheight",selectedlinecolor:"$selectedlinecolor",selectedlinetextcolor:"$selectedlinetextcolor",sortcol:"$sortcol",sortascending:"$sortascending",vcell:"$vcell",displayorder:"$::displayorder",columnstyledtext:"$columnstyledtext",hidecolumnheader:"$hidecolumnheader",columndateformat:"$columndateformat",columndateformatcustom:"$columndateformatcustom",columnnumberformat:"$columnnumberformat",setlineheight:"$setlineheight",columnwidthsarepercentage:"$columnwidthsarepercentage",columnhidden:"$columnhidden",columnzeroshownempty:"$columnzeroshownempty",colorpickercanceltext:"$colorpickercanceltext",colorpickeroktext:"$colorpickeroktext",multifilters:"$multifilters",headerjst:"$headerjst",columnheadersjst:"$columnheadersjst",columnheaderjst:"$columnheaderjst",rowcsscol:"$rowcsscol",hilitefocusedcell:"$hilitefocusedcell",cellhilitecolor:"$cellhilitecolor",editdatetext:"$editdatetext",columneditdatetext:"$columneditdatetext",datePickerMode:"$datepickermode",datePickerPopupStyle:"$datepickerpopupstyle",columnDatePickerMode:"$columndatepickermode",columnDatePickerPopupStyle:"$columndatepickerpopupstyle",tabThroughCells:"$tabthroughcells",userdefined:-997,movecolumn:-1180,columnHeaderHeight:"$columnheaderheight",checkboxColor:"$checkboxcolor",frozencolumns:"$frozencolumns",hasFooter:"$hasfooter",footerHeight:"$footerheight",footerType:"$footertype",footerLabel:"$footerlabel",footerNumberFormat:"$footernumberformat",footerDateFormat:"$footerdateformat",footerDateFormatCustom:"$footerdateformatcustom",footerZeroShownEmpty:"$footerzeroshownempty",footerBackColor:"$footerbackcolor",footerBackAlpha:"$footerbackalpha",footerTextColor:"$footertextcolor",footerFontStyle:"$footerfontstyle",footerJst:"$footerjst",footerColumnType:"$footercolumntype",footerColumnLabel:"$footercolumnlabel",footerColumnValue:"$footercolumnvalue",footerColumnNumberFormat:"$footercolumnnumberformat",footerColumnDateFormat:"$footercolumndateformat",footerColumnDateFormatCustom:"$footercolumndateformatcustom",footerColumnZeroShownEmpty:"$footercolumnzeroshownempty",footerColumnBackColor:"$footercolumnbackcolor",footerColumnBackAlpha:"$footercolumnbackalpha",footerColumnTextColor:"$footercolumntextcolor",footerColumnFontStyle:"$footercolumnfontstyle",footerColumnJst:"$footercolumnjst",columnAllowNullDateInput:"$columnallownulldateinput",filters:"$::filters"},si={evColumnsResized:100,evCellValueChanged:101,evFooterClick:102,evFooterUpdated:103,evFilterChanged:104},ri="_i";!function(t){var e={SelectorCellFormatter:function(t,e,i,s,r){return r?t:""},TextCellFormatter:function(t,e,i,s,r){return jOmnis.escapeHTML(i,s.styledText,null,"dg-plaintext")},CustomCellFormatter:function(t,e,i,s,r){return s.omnisObject.cellFmtMethodName||(s.omnisObject.cellFmtMethodName=jOmnis.getMethod(s.omnisObject,"$formatcell",-1)),s.omnisObject.cellFmtMethodName?s.omnisObject[s.omnisObject.cellFmtMethodName](s.omnisObject.getRealListRow(t)+1,s.omnisGridColumn,s.omnisListColumn+1,s.omnisObject.getDataColumnName(s.omnisGridColumn)):""},ColorCellFormatter:function(t,e,i,s,r){if(i){return"<div class='color_picker_cell' style='width:100%; height:100%; background-color:"+("rgba("+(255&i)+","+(i>>8&255)+","+(i>>16&255)+",255)")+"'></div>"}return"<div class='color_picker_cell' style='width:100%; height:100%; background-color:rgb(0,0,0)'></div>"},BoolCellFormatter:function(t,e,i,s,r){var n=jGetOmnisString(s.omnisObject.form.inst,i?"ctl_dgrd_bool_checked":"ctl_dgrd_bool_notchecked"),o=s.omnisObject.enterable&&s.omnisObject.options.autoEdit;return s.omnisObject.getCheckbox(i,n,!o,t,e).outerHTML},DropListPickerFormatter:function(t,e,i,s,r){return i>=1&&i<=s.dropListOptions.length?s.dropListOptions[i-1]:""},DateCellFormatter:function(t,e,i,s,r){return Ai(i,s.omnisObject.getDateFormat(s),omnis_date.getHasTime(r._olr[s.omnisListColumn]))},NumberCellFormatter:function(t,e,i,s,r){return s.zeroshownempty&&0==i?"":Oi(i,s.omnisObject.getNumberFormat(s),s.omnisSubtype)},TextCellEditor:function(e){var i,s;this.init=function(){var s=e.grid.omn_ctrl,r=s.mInFocus;e.grid.omn_ctrl.mInFocus=!0;var n='autocomplete="off"'+(void 0!==s.mAutoCapitalize?'autocapitalize="'+s.AUTO_CAPITALIZE_VALUES[s.mAutoCapitalize]+'"':"")+(void 0!==s.mAutoCorrect?' autocorrect="'+(s.mAutoCorrect?"on":"off")+'"':""),o=' aria-label="'.concat(e.column.name,'"');i=t("<INPUT type=text class='editor-text "+e.column.cssClass+"' "+n+o+" />").appendTo(e.container).bind("keydown.nav",(function(e){e.keyCode!==t.ui.keyCode.LEFT&&e.keyCode!==t.ui.keyCode.RIGHT||e.stopImmediatePropagation()})).focus().select(),e.column.omnisType==eOmnisDataTypes.fftCharacter&&e.column.omnisSublen&&(i[0].maxLength=e.column.omnisSublen),e.grid.omn_ctrl.mInFocus=r},this.destroy=function(){i.remove()},this.focus=function(){i.focus()},this.loadValue=function(t){s=t[e.column.field]||"",i.val(s),i[0].defaultValue=s,i.select()},this.serializeValue=function(){return i.val()},this.applyValue=function(t,i){t[e.column.field]=i},this.isValueChanged=function(){return!(""==i.val()&&null==s)&&i.val()!=s},this.validate=function(){if(e.column.validator){var t=e.column.validator(i.val());if(!t.valid)return t}return{valid:!0,msg:null}},this.init()},IntegerCellEditor:function(e){var i,s;this.init=function(){var s=e.grid.omn_ctrl.mInFocus;e.grid.omn_ctrl.mInFocus=!0;var r='aria-label="'.concat(e.column.name,'"');(i=t("<INPUT type=text class='editor-text "+e.column.cssClass+"' "+r+"/>")).bind("keydown.nav",(function(e){e.keyCode!==t.ui.keyCode.LEFT&&e.keyCode!==t.ui.keyCode.RIGHT||e.stopImmediatePropagation()})),i.appendTo(e.container),i[0].id=e.grid.omn_ctrl.childIdBase+"inted",jOmnisVal.addObject(i[0],eOmnisDataTypes.fftInteger,e.column.omnisSubtype),i.focus().select(),e.grid.omn_ctrl.mInFocus=s},this.destroy=function(){jOmnisVal.removeObject(i[0]),i.remove()},this.focus=function(){i.focus()},this.loadValue=function(t){s=t[e.column.field],i.val(s),i[0].defaultValue=s,jOmnisVal.setCurrentValue(i[0]),i.select()},this.serializeValue=function(){if("-"==i.val())return 0;var t=parseInt(i.val(),10)||0;return jOmnisVal.adjustValue(i[0],t)},this.applyValue=function(t,i){t[e.column.field]=i},this.isValueChanged=function(){return!(""==i.val()&&null==s)&&i.val()!=s},this.validate=function(){return"-"!=i.val()&&isNaN(i.val())?{valid:!1,msg:"Please enter a valid integer"}:{valid:!0,msg:null}},this.init()},NumberCellEditor:function(e){var i,s;this.init=function(){var s=e.grid.omn_ctrl.mInFocus;e.grid.omn_ctrl.mInFocus=!0;var r='aria-label="'.concat(e.column.name,'"');(i=t("<INPUT type=text class='editor-text "+e.column.cssClass+"'"+r+"/>")).bind("keydown.nav",(function(e){e.keyCode!==t.ui.keyCode.LEFT&&e.keyCode!==t.ui.keyCode.RIGHT||e.stopImmediatePropagation()})),i.appendTo(e.container),i[0].id=e.grid.omn_ctrl.childIdBase+"numed",jOmnisVal.addObject(i[0],eOmnisDataTypes.fftNumber,e.column.omnisSubtype),i.focus().select(),e.grid.omn_ctrl.mInFocus=s},this.destroy=function(){jOmnisVal.removeObject(i[0]),i.remove()},this.focus=function(){i.focus()},this.loadValue=function(t){s=jOmnis.numberToLocaleAndDps(t[e.column.field]+"",24!=e.column.omnisSubtype?31&e.column.omnisSubtype:null),i.val(s),i[0].defaultValue=s,jOmnisVal.setCurrentValue(i[0]),i.select()},this.serializeValue=function(){var t=i.val();if("-"==t||t==jOmnis.dpChar)return 0;"."!=jOmnis.dpChar&&(t=t.replace(jOmnis.dpChar,"."));var e=parseFloat(t)||0;return jOmnisVal.adjustValue(i[0],e,t)},this.applyValue=function(t,i){t[e.column.field]=i},this.isValueChanged=function(){return!(""==i.val()&&null==s)&&i.val()!=s},this.validate=function(){var t=i.val();return"."!=jOmnis.dpChar&&(t=t.replace(jOmnis.dpChar,".")),"-"!=t&&"."!=t&&isNaN(t)?{valid:!1,msg:"Please enter a valid number"}:{valid:!0,msg:null}},this.init()},DropListPickerEditor:function(e){var i,s,r,n=e.column.dropListOptions;this.init=function(){var s=e.grid.omn_ctrl.mInFocus;e.grid.omn_ctrl.mInFocus=!0;var o='aria-label="'.concat(e.column.name,'"');(i=t("<select class='editor-text "+e.column.cssClass+"' style='width:100%;height:100%;border:none;'"+o+"></select>").bind("change",(function(t){r=i[0].selectedIndex})).bind("keydown",(function(t){var e=OmnisKeyboardHandler.getNormalizedEventKey(t);"ArrowUp"!==e&&"ArrowDown"!==e||t.stopImmediatePropagation()}))).appendTo(e.container);var a=t("<option> </option>");a.appendTo(i);for(var l=0;l<n.length;++l)(a=t("<option>"+n[l]+"</option>")).appendTo(i);i.focus(),e.grid.omn_ctrl.mInFocus=s},this.destroy=function(){i.remove()},this.focus=function(){i.focus()},this.loadValue=function(r){s=r[e.column.field],i.empty();var o=t("<option> </option>");o.appendTo(i);for(var a=0;a<n.length;++a)(o=t("<option"+(s-1==a?" selected='selected'":"")+">"+n[a]+"</option>")).appendTo(i)},this.serializeValue=function(){return null!=r?r:s},this.applyValue=function(t,i){t[e.column.field]=this.serializeValue()},this.isValueChanged=function(){return null!=r&&r!=s},this.validate=function(){return{valid:!0,msg:null}},this.init()},DateCellEditor:function(e){var i,s,r=this;this.calendarOpen=!1,this.isDateCellEditor=!0;var n=null,o=e.column.omnisObject.userDefined?e.column.colEditDateText:e.column.omnisObject.editDateText;this.init=function(){var a=e.grid.omn_ctrl.mInFocus;e.grid.omn_ctrl.mInFocus=!0;var l='aria-label="'.concat(e.column.name,'"');(i=t("<INPUT type=text autocomplete='off' style='vertical-align:top' class='editor-text "+e.column.cssClass+"' "+l+" />")).appendTo(e.container).bind("keydown.nav",(function(s){r.calendarOpen||s.keyCode!==t.ui.keyCode.LEFT&&s.keyCode!==t.ui.keyCode.RIGHT?s.keyCode!==t.ui.keyCode.BACKSPACE&&s.keyCode!==t.ui.keyCode.DELETE||o||(s.preventDefault(),e.column.colAllowNullDateInput&&i.val(null)):s.stopImmediatePropagation()})).bind("keypress",(function(t){o||t.preventDefault()})).bind("focus",(function(t){t.stopImmediatePropagation()})),i.focus().select(),r.calendarOpen=!1;var h=e.item[e.column.field];null!=h&&h instanceof omnis_date&&(h=h.toJavaScriptDate()),i.jsdatepicker=new Kt(e.grid.omn_form,e.container,{dateFormat:e.grid.omn_ctrl.getDateFormat(e.column,!0),dateFormatType:e.grid.omn_ctrl.userDefined?e.column.colDateFormatType:e.grid.omn_ctrl.mDateFormatType,omnisSubtype:e.column.omnisSubtype,initialPickerValue:h,centreIcon:e.grid.omn_ctrl.mSetLineHeight,disableSystemFocus:e.grid.omn_ctrl.mDisableSystemFocus,forcePickerMode:e.grid.omn_ctrl.userDefined?e.column.colDatePickerMode:e.grid.omn_ctrl.mDatePickerMode,popupStyle:e.grid.omn_ctrl.userDefined?e.column.colDatePickerPopupStyle:e.grid.omn_ctrl.mDatePickerPopupStyle,beforeShow:function(){r.calendarOpen=!0;var t=null!=n?n:s;i.jsdatepicker.setDate(t)},afterShow:function(){i.jsdatepicker.sizeChanged(),i.jsdatepicker.mDisableSystemFocus=!0;var t=i.jsdatepicker.mPickerStyle===qt.PICKERSTYLES.calendar?i.jsdatepicker.clientElem.querySelector("tbody [tabindex='0']"):i.jsdatepicker.clientElem.querySelector("[tabindex='0']");t&&t.focus()},onClose:function(){r.calendarOpen=!1,jOmnis.mobileDevice||i.focus().select()},onSelect:function(t){n=t;var s=e.grid.omn_ctrl.getDateFormat(e.column),r=!1;null!=e.item._olr&&(r=omnis_date.getHasTime(e.item._olr[e.column.omnisListColumn])),i.val(n.dateFormat(s,null,r))}}),jOmnis.addClass(i.jsdatepicker.clientElem,"noFocus"),i.jsdatepicker.elem.firstChild.tabIndex=-1,i.bind("keydown.nav",(function(e){if(e.keyCode!==t.ui.keyCode.TAB||e.shiftKey)if(e.keyCode===t.ui.keyCode.DOWN&&e.altKey)e.stopImmediatePropagation(),i.jsdatepicker.show();else{var s=t.ui.keyCode;[s.TAB,s.ENTER,s.DOWN,s.UP,s.ESCAPE,s.HOME,s.END,s.PAGE_UP,s.PAGE_DOWN].includes(e.keyCode)||e.stopImmediatePropagation()}else i.jsdatepicker.mCalendarSelectImage.focus(),e.stopImmediatePropagation(),e.preventDefault()})),i.bind("keyup.nav",(function(e){o||e.keyCode!=t.ui.keyCode.SPACE?e.keyCode!=t.ui.keyCode.TAB&&e.stopImmediatePropagation():i.jsdatepicker.show()})),i.width(i.width()-18);var c=getComputedStyle(i[0].parentElement);i.jsdatepicker.mCalendarSelectImage.style.left="".concat(i.width()+parseInt(c.paddingLeft),"px"),e.grid.omn_ctrl.mInFocus=a,t(i.jsdatepicker.mCalendarSelectImage).bind("keydown",(function(e){e.keyCode===t.ui.keyCode.TAB&&e.shiftKey?(i.focus().select(),e.stopImmediatePropagation(),e.preventDefault()):e.keyCode===t.ui.keyCode.ENTER?(i.jsdatepicker.show(),e.stopImmediatePropagation(),e.preventDefault()):e.keyCode===t.ui.keyCode.SPACE&&e.preventDefault()})).bind("keyup",(function(e){e.keyCode===t.ui.keyCode.SPACE&&(i.jsdatepicker.show(),e.preventDefault())}))},this.destroy=function(){i.jsdatepicker.delete_class_inst(),i.jsdatepicker=null,i.remove()},this.show=function(){r.calendarOpen&&i.jsdatepicker.show()},this.hide=function(){r.calendarOpen&&i.jsdatepicker.hide()},this.position=function(t){var s=e.grid.omn_ctrl,r=i.parent()[0];t.left=t.right-parseInt(i.jsdatepicker.elem.style.width)+window.pageXOffset,t.left<0&&(t.left=0),i.jsdatepicker.setPosition(s,r,t)},this.focus=function(){i.focus()},this.loadValue=function(t){if(null!=(s=t[e.column.field])){var r=e.grid.omn_ctrl.getDateFormat(e.column);s instanceof omnis_date&&(s=s.toJavaScriptDate()),i.val(null!=s&&s.dateFormat?s.dateFormat(r,null,omnis_date.getHasTime(e.item._olr[e.column.omnisListColumn])):s)}i.select()},this.serializeValue=function(){return i.val()},this.applyValue=function(t,i){if(o&&i){var s=e.grid.omn_ctrl.getDateFormat(e.column);i=Date.parseDate(i,s),n=i||null}(e.column.colAllowNullDateInput||null!=n)&&(t[e.column.field]=n)},this.isValueChanged=function(){var t=e.grid.omn_ctrl.getDateFormat(e.column),r=null!=s&&s.dateFormat?s.dateFormat(t,null,omnis_date.getHasTime(e.item._olr[e.column.omnisListColumn])):s;return!(""==i.val()&&null==s)&&i.val()!=r},this.validate=function(){return{valid:!0,msg:null}},this.init()},ColorCellEditor:function(e){var i,s,r,n,o,a=this;this.isColorCellEditor=!0,this.init=function(){var s=e.grid.omn_ctrl.mInFocus;e.grid.omn_ctrl.mInFocus=!0,(i=t("<input type='color'/>")).appendTo(e.container);var r=e.container.getBoundingClientRect(),l=e.grid.omn_ctrl.getTheme().getCSSClass();(n=t("<div role='dialog' class='omnis-datagrid-colorpicker "+l+"' style=position:relative;top:"+r.bottom+"px;left:"+r.left+"px;>")).appendTo(document.body);var h=e.grid.omn_ctrl.mColorPickerText[0],c=e.grid.omn_ctrl.mColorPickerText[1];i.spectrum({replacerClassName:"omnis-grid-color-picker",showAlpha:!1,cancelText:h,chooseText:c,clickoutFiresChange:!1,omnisDataGridColorPicker:!0,appendTo:n,preferredFormat:"hex",showInput:!0});var u=e.grid.omn_ctrl.getClientElem();if(u){var d=document.querySelector(".sp-input"),p=document.querySelector(".sp-cancel");(o=document.createElement("div")).id=u.id+"_color_input_desc",o.className="sr-only",document.body.appendChild(o),o.innerText=jGetOmnisString(u.omnisObject.form.inst,"ctl_dgrd_color_input_desc"),d.setAttribute("aria-label",jGetOmnisString(u.omnisObject.form.inst,"ctl_dgrd_color_input")),d.setAttribute("aria-describedBy",o.id),p.setAttribute("role","button"),jOmnis.showModalDialog(),d.focus()}a.select=i,e.grid.omn_ctrl.mInFocus=s},this.destroy=function(){jOmnis.hideModalDialog(),i.remove(),n.remove(),o&&document.body.removeChild(o)},this.focus=function(){i.focus()},this.loadValue=function(t){void 0===(s=t[e.column.field])&&(s=255);var r="rgba("+(255&s)+","+(s>>8&255)+","+(s>>16&255)+",255)";i.spectrum("set",r)},this.serializeValue=function(){return s},this.applyValue=function(t,i){t[e.column.field]=r},this.save=function(){},this.cancel=function(){},this.isValueChanged=function(){var t=i.spectrum("get").toRgb();return(r=t.r|t.g<<8|t.b<<16)!=s},this.validate=function(){return{valid:!0,msg:null}},this.init()},YesNoCheckboxCellEditor:function(e){var i,s,r;this.init=function(){var s=e.grid.omn_ctrl.mInFocus;e.grid.omn_ctrl.mInFocus=!0;var n=!!e.item&&e.item[e.column.field],o=jGetOmnisString(e.grid.omn_ctrl.form.inst,n?"ctl_dgrd_bool_checked":"ctl_dgrd_bool_notchecked");(r=e.grid.omn_ctrl.getCheckbox(n,o)).addEventListener("click",this.handleClick),r.addEventListener("keypress",this.handleClick),(i=t(r)).appendTo(e.container),i[0].firstElementChild.focus(),e.grid.omn_ctrl.mInFocus=s},this.handleClick=function(t){if("keypress"!==t.type||" "===OmnisKeyboardHandler.getNormalizedEventKey(t)){var s=Lt.getValue(i[0]);Lt.setValue(i[0],!s),e.grid.omn_ctrl.options.autoEdit&&("click"===t.type&&(this.supressAutoEditCheckbox=!0),e.grid.commitEditAndSetFocus(!0))}},this.destroy=function(){r.removeEventListener("click",this.handleClick),r.removeEventListener("keypress",this.handleClick),i.remove()},this.focus=function(){i.focus()},this.loadValue=function(t,r){s=!!t[e.column.field];var n=r?!s:s;Lt.setValue(i[0],n)},this.serializeValue=function(){return Lt.getValue(i[0])},this.applyValue=function(t,i){e.column.reallyInt?t[e.column.field]=i?1:0:t[e.column.field]=i},this.isValueChanged=function(){return this.serializeValue()!==s},this.validate=function(){return{valid:!0,msg:null}},this.init()},LongTextCellEditor:function(e){var i,s,r,n=this;this.init=function(){var r=e.grid.omn_ctrl.mInFocus;e.grid.omn_ctrl.mInFocus=!0;var o=t("body");jOmnis.showModalDialog();var a=jOmnis.getPopupZIndex(e.grid.omn_form,1),l=e.grid.omn_ctrl,h=l.getProperty(eBaseProperties.fontname),c=l.getTheme(),u=c.getCSSClass();s=t("<DIV class='omnis-slick-ltc "+u+"' style='z-index:"+a+";font-family:"+h+";'/>").appendTo(o),(i=t("<TEXTAREA class='omnis-slick-popuptext' hidefocus rows=5 style='background:white;width:250px;height:80px;border:0;outline:0;font-family:"+h+"'>").appendTo(s)).attr("aria-label",e.column.name);var d={ok:{background:l.DefaultColors.OK_BUTTON,text:l.DefaultColors.OK_BUTTON_TEXT,tint:ctrl_pushbutton.getFlatButtonFocusColor(l.form.inst,l.DefaultColors.OK_BUTTON,l.DefaultColors.OK_BUTTON_TEXT)},cancel:{background:l.DefaultColors.CANCEL_BUTTON,text:l.DefaultColors.CANCEL_BUTTON_TEXT,tint:ctrl_pushbutton.getFlatButtonFocusColor(l.form.inst,l.DefaultColors.CANCEL_BUTTON,l.DefaultColors.CANCEL_BUTTON_TEXT)}};function p(t){for(;t&&t.parentElement&&t!==s[0];){if("BUTTON"===t.tagName)return t;t=t.parentElement}}function m(t){var e=p(t.target);e&&(e.style.backgroundColor=c.getColorString(d[e.getAttribute("data-btype")].tint))}function f(t){var e=p(t.target);e&&(e.style.backgroundColor=ctrl_pushbutton.getFlatButtonColor(l.getTheme(),d[e.getAttribute("data-btype")].background))}function g(t,e,i){t.on({click:e,mouseenter:m,focus:m,mouseleave:f,blur:f}),jOmnisEffects.addRippleToElem(t[0],c,!0,i,At._j)}t("<DIV style='text-align:right'><BUTTON class='omnis-button dlg-butt' data-btype='ok' style='color:"+c.getColorString(d.ok.text)+";'>"+jOmnis.okString+"</BUTTON><BUTTON class='omnis-button dlg-butt' data-btype='cancel' style='color:"+c.getColorString(d.cancel.text)+";'>"+jOmnis.cancelString+"</BUTTON></DIV>").appendTo(s),g(s.find("button:first"),this.save,d.ok.tint),g(s.find("button:last"),this.cancel,d.cancel.tint),s.bind("keydown",this.handleKeyDown),n.position(e.position),i.focus().select(),e.grid.omn_ctrl.mInFocus=r},this.handleKeyDown=function(e){var i=OmnisKeyboardHandler.getNormalizedEventKey(e);if("Enter"===i&&e.ctrlKey)n.save();else if("Escape"===i)e.preventDefault(),n.cancel();else if("Tab"===i){var r=t("textarea, button",s);jOmnis.tabFocusTrap(r[0],r[r.length-1],e)}},this.save=function(){e.commitChanges()},this.cancel=function(){i.val(r),e.cancelChanges()},this.hide=function(){s.hide()},this.show=function(){s.show()},this.position=function(e){e.top+s.height()+10>t(window).height()&&(e.top=t(window).height()-s.height()-10),e.left+s.width()+10>document.body.clientWidth&&(e.left=document.body.clientWidth-s.width()-10),s.css("top",e.top-5).css("left",e.left-5)},this.destroy=function(){s.remove(),jOmnis.hideModalDialog()},this.focus=function(){i.focus()},this.loadValue=function(t){i.val(r=t[e.column.field]),i.select()},this.serializeValue=function(){return i.val()},this.applyValue=function(t,i){t[e.column.field]=i},this.isValueChanged=function(){return!(""==i.val()&&null==r)&&i.val()!=r},this.validate=function(){return{valid:!0,msg:null}},this.init()}};t.extend(window,e)}(jQuery);var ni=1;function oi(t,e){return t[ti]==e[ti]?0:!t[ti]&&e[ti]?-1:1}function ai(t,e){return t[ti]==e[ti]?0:t[ti]<e[ti]?-1:1}function li(t,e){return(t=jOmnis.stripStyles(t._olr[ei]))==(e=jOmnis.stripStyles(e._olr[ei]))?0:t<e?-1:1}yi.prototype=new ctrl_base,yi.prototype.doubleClickTime=600,yi.prototype.preventClickOnDoubleClick=!1,yi.prototype.discardQueuedClicksDuringDoubleClickWaitTime=!1,yi.prototype.lockDuringDoubleClickWaitTime=!1,yi.prototype.defaultAriaElem=!1,yi.prototype.setFillColor=!0,yi.prototype.resizeFrozenColumnsStopPixels=100,yi.prototype.justify={left:0,right:1,center:2,default:3};var hi=Qe(Qe({},a.Mr),{},{GRID_LINES:"GRID_LINES",COLUMN_BACKGROUND:"COLUMN_BACKGROUND",EVEN_ROW:"EVEN_ROW",SELECTED_LINE:"SELECTED_LINE",SELECTED_LINE_TEXT:"SELECTED_LINE_TEXT",CELL_HILITE:"CELL_HILITE",OK_BUTTON:"OK_BUTTON",OK_BUTTON_TEXT:"OK_BUTTON_TEXT",CANCEL_BUTTON:"CANCEL_BUTTON",CANCEL_BUTTON_TEXT:"CANCEL_BUTTON_TEXT",POPUP_SURFACE:"POPUP_SURFACE",POPUP_SURFACE_TEXT:"POPUP_SURFACE_TEXT"});yi.prototype.DefaultColors=Qe(Qe({},ctrl_base.prototype.DefaultColors),{},(Ze(Ye={},hi.GRID_LINES,o.l1.border),Ze(Ye,hi.COLUMN_BACKGROUND,o.l1.transparent),Ze(Ye,hi.EVEN_ROW,o.l1.none),Ze(Ye,hi.SELECTED_LINE,o.l1.primary),Ze(Ye,hi.SELECTED_LINE_TEXT,o.l1.primaryText),Ze(Ye,hi.CELL_HILITE,o.l1.secondary),Ze(Ye,hi.OK_BUTTON,o.l1.default),Ze(Ye,hi.OK_BUTTON_TEXT,o.l1.primary),Ze(Ye,hi.CANCEL_BUTTON,o.l1.default),Ze(Ye,hi.CANCEL_BUTTON_TEXT,o.l1.surfaceText),Ze(Ye,hi.POPUP_SURFACE,o.l1.surface),Ze(Ye,hi.POPUP_SURFACE_TEXT,o.l1.surfaceText),Ye));var ci="justify-content:left;text-align:left;",ui="justify-content:center;text-align:center;",di="justify-content:flex-end;text-align:right;",pi=0,mi=1,fi=2,gi=3,vi=4,bi=5;function yi(){this.init_class_inst()}function Ci(t){0!=t.filterdata&&(t.mDisableUpdate=!0,t.form.setData(t.filterdata,t.mFilterInput[0].value),t.mDisableUpdate=!1,t.dataView.refresh(),t.mFilterInput.focus(),t.sendFilterEvent()),t.updateAllFooters()}yi.prototype.init_class_inst=function(){this.superclass=ctrl_base.prototype,this.superclass.init_class_inst.call(this),this.mCustomEvents=si,this.currentColumnNumber=-1,this.mFocusStyle=eBaseFocusStyle.eWithin,this.usesNotActiveOverlay=!0,jOmnis.mDesign&&(this.mCanHaveDesignBorder=!0,this.baseClassName="omnis-datagrid-design",this.showDesignName=this.showDesignNameBackground=!0)},yi.prototype.baseClassName="omnis-datagrid",yi.prototype.init_ctrl_inst=function(t,e,i,s){this.mHasDisplayFormat=!0,this.mHasDefaultDisableAppearanceProperty=!0,this.superclass.init_ctrl_inst.call(this,t,e,i,s),jOmnis.mDesign&&(this.dataName=jOmnis.mDesignTempList),this.cssHeader="",this.cssColumnHeaderRow="",this.cssHeaderSecondary="",this.mDisplayOrder=[],this.mAppliedDisplayOrder="",this.searchCol=1,this.mColorPickerText=[],this.mFilterAreaEx=[],this.mSupportsMultiFilter=1,this.listDefn=null,this.activeChanged();var r=this.getClientElem();return this.makeChildIdBase(r),this.mFilterButton=$("#"+this.childIdBase+"span",this.elem),this.mGridElem=$("#"+this.childIdBase+"grid",this.elem),this.mFilterArea=$("#"+this.childIdBase+"ifp",this.elem),this.mFilterInput=$("#"+this.childIdBase+"if",this.elem),this.mLabelElem=$("#"+this.childIdBase+"label",this.elem),this.mGridClientElem=$("#"+this.childIdBase+"client",this.elem),this.mHeaderElem=$("#"+this.childIdBase+"header",this.elem),this.mGridElem[0].style.boxSizing="border-box",jOmnis.addClass(this.mFilterArea[0],"filter-area"),jOmnis.addClass(this.mFilterArea[0].children[0],["omnis-input-frame","outlined"]),this.mFilterArea[0].style.background="",this.mFilterArea[0].style.padding="",this.mFilterArea[0].children[0].style.color="",this.mFilterArea[0].children[0].style.fontFamily="",t.registerForFormBuilt(this),this.buildInitialGridPart1(),this.doneAlert=!1,this.lastChangedHCell=-1,this.lastChangedVCell=-1,this.onCellChangedEnabled=!0,this.newCellWidthColumns={},this.canUpdateListSelection=!0,this.savedCurrentCell=null,this.form.inst.registerPropertyObject(this),this.hasCustomFormat=1==r.getAttribute("data-hcf"),this.form.requestScriptAvailNotify(this),this.mHiliteLine="1"==r.getAttribute("data-hiliteline"),this.setProperty(eBaseProperties.autocorrect,"1"==r.getAttribute("data-autocorrect")),this.setProperty(eBaseProperties.autocapitalize,r.getAttribute("data-autocaps")),jOmnis.mDesign&&(this.currentColumnNumber=jOmnis.getAttribute(r,"data-cc",-1)),!1},yi.prototype.destroyGrid=function(){this.gridViewPort=null,this.mStyleSheet&&(jOmnis.removeStyleSheet(this.mStyleSheet),this.mStyleSheet=null),this.maxColumnHeaderTextWidthStyle&&(jOmnis.removeStyleSheet(this.maxColumnHeaderTextWidthStyle),this.maxColumnHeaderTextWidthStyle=null),this.mMultiFilterCSS&&(jOmnis.removeStyleSheet(this.mMultiFilterCSS),this.mMultiFilterCSS=null),this.mousedownFunction&&($(document).unbind("mousedown",this.mousedownFunction),jOmnis.touchDevice&&$(document).unbind("touchstart",this.mousedownFunction),this.mousedownFunction=null);try{this.columnpicker&&(this.columnpicker.destroy&&this.columnpicker.destroy(),this.columnpicker=null),null!=this.iscroll&&this.iscroll.destroy(),null!=this.grid&&this.grid.destroy(),this.mFilterButton.off("click mouseout focus blur keyup"),this.grid=null,this.dataView=null}catch(t){}},yi.prototype.delete_class_inst=function(){this.destroyGrid(),this.superclass.delete_class_inst.call(this)},yi.prototype.formBuilt=function(){this.formBuiltCalled=!0,this.buildInitialGridPart2(),this.superclass.formBuilt.call(this)},yi.prototype.setPropertyValuesFromHTMLAttributes=function(){var t=this.clientElem;this.mColWidthsArePercentage="1"==t.getAttribute("data-cwp"),this.headerText=t.getAttribute("data-headertext"),this.options.autoEdit="1"==t.getAttribute("data-autoedit"),this.enterable="1"==t.getAttribute("data-enterable"),this.extendable="1"==t.getAttribute("data-extendable"),this.options.enableColumnReorder="1"==t.getAttribute("data-candragdisplayorder"),this.multisel="1"==t.getAttribute("data-multisel"),this.mSetLineHeight="1"==t.getAttribute("data-slh"),this.rowHeight=parseInt(t.getAttribute("data-rowheight")),this.mSupportsMultiFilter="1"==t.getAttribute("data-multifilters"),this.mDatePickerMode=+t.getAttribute("data-datemode"),this.mDatePickerPopupStyle=+t.getAttribute("data-popupstyle"),this.frozenColumns=parseInt(t.getAttribute("data-frozencolumns")),this.mColorPickerText[0]=t.getAttribute("data-colorpickercanceltext"),this.mColorPickerText[1]=t.getAttribute("data-colorpickeroktext"),this.hasSecondaryHeader="1"==t.getAttribute("data-filterarea"),this.secondaryHeaderRowHeight=parseInt(t.getAttribute("data-filterareaheight")),this.headerVisible="1"==t.getAttribute("data-header"),this.boldHeader="1"==t.getAttribute("data-boldheader"),this.gridCellBordersColor=+t.getAttribute("data-linecolor"),this.gridCellBordersVisible="1"==t.getAttribute("data-cellborders"),this.gridCellBordersDotted="1"==t.getAttribute("data-dotted"),this.selectedLineColorValue=+t.getAttribute("data-selectedlinecolor"),this.selectedLineTextColorValue=+t.getAttribute("data-selectedlinetextcolor"),this.hideSelection="1"==t.getAttribute("data-hideselection"),this.evenRowColorValue=+t.getAttribute("data-evenrowcolor"),this.cssColHdr=".ui-state-default {font-weight:inherit}\n",this.columnHeadersJst=+t.getAttribute("data-headersjst"),this.columnHeaderHeight=+t.getAttribute("data-colheaderheight"),this.userDefined="1"==t.getAttribute("data-userdefined"),this.editDateText=1==+t.getAttribute("data-editdatetext"),this.filtercol=parseInt(t.getAttribute("data-filtercol")),this.filterDataName=t.getAttribute("data-filtervalue"),this.headerHeight=parseInt(t.getAttribute("data-headerheight")),this.headerJst=+t.getAttribute("data-headerjst"),this.keyboardChangesCurrentLine="1"===t.getAttribute("data-changeline"),this.options.tabThroughCells="1"===t.getAttribute("data-tabthroughcells"),this.rowCssCol=+t.getAttribute("data-rowcsscol"),this.hiliteFocusedCell="1"===t.getAttribute("data-hilitefocusedcell"),this.cellHiliteColor=+t.getAttribute("data-cellhilitecolor"),this.checkboxColor=+t.getAttribute("data-checkboxcolor");var e=t.getAttribute("data-hch");this.mHideColumnHeader=null!=e&&1*e!=0,this.hasFooter=!!t.getAttribute("data-hasfooter"),this.footerHeight=+t.getAttribute("data-footerheight"),this.footerType=+t.getAttribute("data-footertype"),this.footerLabel=t.getAttribute("data-footerlabel"),this.footerNumberFormat=t.getAttribute("data-footernumfmt"),this.footerDateFormat=+t.getAttribute("data-footerdatfmt"),this.footerDateFormatCustom=t.getAttribute("data-footerdatfmtc"),this.footerZeroShownEmpty=!!t.getAttribute("data-footerzeroempty"),this.footerBackColor=+t.getAttribute("data-footerbackcolor"),this.footerBackAlpha=+t.getAttribute("data-footerbackalpha"),this.footerTextColor=+t.getAttribute("data-footertextcolor"),this.footerFontStyle=+t.getAttribute("data-footerfontstyle"),this.footerJst=+t.getAttribute("data-footerjst")},yi.prototype.buildInitialGridPart1=function(t){t||(this.options={},this.setPropertyValuesFromHTMLAttributes()),this.setHeaderText(this.headerText);var e=this;this.canSetOptions=!1,this.mAcceptsReturn=this.enterable,this.mAcceptsEscape=this.enterable,this.options.editable=this.enterable&&this.isEnabled(),this.options.enableAddRow=this.options.editable&&this.extendable,this.options.multiSelect=this.multisel,this.options.enableCellRangeSelection=!1,this.options.enableCellNavigation=!0,this.options.asyncEditorLoading=!1,this.options.forceFitColumns=!1,this.options.syncColumnCellResize=!0,this.options.rowHeight=this.rowHeight;this.mFilterArea[0].style.lineHeight=(this.rowHeight/2>=26?this.rowHeight/2:26)+"px",this.options.showFooterRow=this.hasFooter,this.options.footerRowHeight=this.footerHeight,this.mNeedFontHeight=!0,this.fontChanged(),this.options.frozenColumn=this.frozenColumns<0?-1:this.frozenColumns-1,this.mColorPickerText[0]||(this.mColorPickerText[0]=jOmnis.cancelString),this.mColorPickerText[1]||(this.mColorPickerText[1]=jOmnis.okString),this.setCellCss(!0),this.setHeaderCss(!0),this.setFilterAreaOptions(),this.setRowCss(!0),this.setFooterCss(!0);var i=this.getData(),s=null!=i&&null!=i.lstDef?i.lstDef:[];this.buildColumnDefinitions(s,!t),this.setHeaderAlignment(),this.setFilterAndHeaderProperties(),this.options.keyboardChangesLine=this.keyboardChangesCurrentLine,this.rowCssCol>0&&(this.options.rowCssClasses=this.getRowCssClasses.bind(this)),Lt.setColor(this.checkboxColor,this);jIcons.replaceOrAddToElem(this.mFilterButton[0],"images/search.svg?",null,{width:16,height:16,viewBox:[0,0,24,24].join(" ")});var r=this.getTheme(),n=this;this.mFilterButton.addClass("").removeClass("ui-icon ui-icon-search").attr("role","button").attr("tabindex",this.isActive()?"0":"-1").attr("aria-label",jGetOmnisString(this.form.inst,"ctl_dgrd_filter")).css("left","2px").css("border-radius","4px").mouseover((function(t){n.mFilterButton[0].style.backgroundColor=r.getColorString(ctrl_pushbutton.getFlatButtonFocusColor(n.form.inst,n.getProperty(eBaseProperties.backcolor),n.getProperty(eBaseProperties.textcolor)))})).mouseout((function(t){n.mFilterButton[0].style.backgroundColor=""})).focus((function(t){n.mFilterButton[0].style.backgroundColor=r.getColorString(ctrl_pushbutton.getFlatButtonFocusColor(n.form.inst,n.getProperty(eBaseProperties.backcolor),n.getProperty(eBaseProperties.textcolor)))})).blur((function(t){n.mFilterButton[0].style.backgroundColor=""})).keyup((function(t){var i=OmnisKeyboardHandler.getNormalizedEventKey(t);"Enter"!==i&&" "!==i||e.toggleFilterRow()})).click((function(t){e.toggleFilterRow()}));var o=this.getTheme().getTextColorString(this.themeableData.color,this.resolveDefaultColor(this.themeableData.backgroundColor,hi.BACKGROUND),this.DefaultColors.TEXT);Theme.SetThemedIconColor(this.mFilterButton[0],o),this.dataView=new Slick.Data.DataView,this.grid=new Slick.Grid(this.mGridElem,this.dataView.rows,this.columnDefnArray,this.options),this.grid.omn_form=this.form,this.grid.omn_ctrl=this,this.pagerHeight=0,this.mGridCanvasElem=$("#"+this.childIdBase+"grid .grid-canvas",this.elem),this.mViewportElem=$("#"+this.childIdBase+"grid .slick-viewport",this.elem),jOmnis.mDesign&&(this.userDefined||this.showDisabledDesignScrollbars(this.mViewportElem[0]),this.mViewportElem[0].style.overflowY="hidden",this.frozenColumns?(this.mViewportElem[1].style.overflowX="scroll",this.mViewportElem[1].style.overflowY="hidden"):this.mViewportElem[0].style.overflowX="scroll"),this.setAriaElement(this.mGridElem[0]),!this.mAriaLabelledby&&!this.mAriaLabel&&this.headerVisible&&this.mLabelElem[0].innerText&&this.mGridElem[0].setAttribute("aria-labelledby",this.mLabelElem[0].id),this.mGridCanvasElem[0].onfocus=function(){e.focusGridCell(!0)}},yi.prototype.buildInitialGridPart2=function(){var t=this.getClientElem();this.columnpicker=new Slick.Controls.ColumnPicker(this.columnDefnArray,this.grid,this.options),this.mHideColumnHeader&&this.showColumnHeaders(!1),this.canSetOptions=!0,this.sizeChanged(),this.canSetOptions=!1;var e=this.grid.getSecondaryHeaderRow(),i=this.grid.getSecondaryHeaderRowEx();this.mFilterArea.appendTo(this.grid.getSecondaryHeaderRow()).show(),this.mFilterArea[0].firstElementChild.setAttribute("aria-labelledby",this.mFilterArea[0].id);var s=document.createElement("DIV");s.style.display="none",s.id=e.id+"_filter",e.appendChild(s),this.mFilterAreaEx[0]=$(s),i&&((s=document.createElement("DIV")).style.display="none",s.id=i.id+"_filter",i.appendChild(s),this.mFilterAreaEx[1]=$(s)),this.grid.onCellChange=this.makeFunction("onCellChange",3),this.grid.onAddNewRow=this.makeFunction("addItem",2),this.grid.onKeyDown=this.makeFunction("onKeyDown",1),this.grid.onSelectedRowsChanged=this.makeFunction("onSelectedRowsChanged",0),this.grid.onSort=this.makeFunction("onSort",2);var r=this;this.grid.onBeforeEditCell=function(){return!r.mWillSort},jOmnis.mDesign||(this.mousedownFunction=this.makeFunction("onDocumentClick",1),$(document).bind("mousedown",this.mousedownFunction),jOmnis.touchDevice&&$(document).bind("touchstart",this.mousedownFunction),jOmnis.mobileDevice||(t.onkeypress=this.mEventFunction));var n=this.grid;if(this.dataView.onRowCountChanged.subscribe((function(t){n.updateRowCount(),r.iscroll&&r.refreshIscroll(),n.render()})),this.dataView.onRowsChanged.subscribe((function(t){if(n.removeRows(t),n.render(),!r.mUpdate1Col){for(var e=[],i=0;i<r.selectedRowIds.length;i++){var s=r.dataView.getRowById(r.selectedRowIds[i]);null!=s&&e.push(s)}n.setSelectedRows(e)}})),this.mFilterInput.keyup((function(t){Slick.GlobalEditorLock.cancelCurrentEdit(),"Escape"===OmnisKeyboardHandler.getNormalizedEventKey(t)&&(this.value=""),Ci(r)})),this.mFilterInput.attr("tabindex",this.isActive()?"0":"-1"),this.grid.onHeaderClick=this.canSendEvent(eBaseEvent.evHeaderClick)?this.makeFunction("onHeaderClick",2):null,this.needClickEvent=this.canSendEvent(eBaseEvent.evClick),this.generateClick=!1,this.ignoreSetSelectedRows=!1,this.mGridCanvasElem.bind("click keydown tap",(function(t){r.generateClickEvent(t)})),this.grid.onDblClick=this.canSendEvent(eBaseEvent.evDoubleClick)?this.makeFunction("onDblClick",3):null,this.grid.onContextMenu=this.makeFunction("onContextMenu",3),jOmnis.touchDevice&&this.canSendEvent(eBaseEvent.evDoubleClick)){var o=this.mGridCanvasElem;o.Touchable().bind("doubleTap",(function(t,e){var i=r.grid.getCellFromPoint(e.startTouch.x-o.offset().left,e.startTouch.y-o.offset().top);r.onDblClick(t,i.row,i.cell)}))}if(this.grid.onCurrentCellChanged=this.canSendEvent(eBaseEvent.evCellChanged)?this.makeFunction("onCurrentCellChanged",1):null,this.grid.onColumnsReordered=this.makeFunction("onColumnsReordered",0),this.grid.onColumnsResized=this.makeFunction("onColumnsResized",0),this.grid.onHeaderContextMenu=function(t,e){r.headerContextClicked=!0,r.handleContextMenuClick(t,r,0,e?e.omnisGridColumn:0)},this.updateStyleSheet(),this.hasCustomFormat&&!this.scriptOk||this.doUpdate(!0),this.updateAllFooters(),this.needsIScroll()&&null==this.iscroll){!0,this.scrollId=this.childIdBase+"scroll",this.mGridCanvasElem.attr("id",this.scrollId);var a={tap:!0,scrollX:!0,probeType:2,omnisDisableWebkit:!0,bounce:!1,momentum:!1};Function.prototype.bind&&(a.scrollbars=!0,a.fadeScrollbars=!0),a.preventDefault=!0,this.iscroll=this.attachIScroll(this.mGridCanvasElem[0].parentNode,a,!0),this.grid.setUsingIScroll(!0)}this.canSetOptions=!0,this.options.disableScrollToView=!0,this.grid.setOptions(this.options),jOmnis.mDesign&&this.userDefined&&this.doHiliteSelectedItem(this.currentColumnNumber,!0)},yi.prototype.sendFilterEvent=function(){this.canSendEvent(si.evFilterChanged)&&(this.eventParamsAdd("pFilters",this.getCurrentFilters()),this.sendEvent("evFilterChanged"))},yi.prototype.getCurrentFilters=function(){var t=this;function e(t,e,s,r){var n=omnis_list.convertJavaScriptObjectToOmnisRow({colNumber:t,colName:e,filterType:s,value:r}),o=i.addRow(0);i.setData(1,o,n,!0)}var i=new omnis_list(null);this.mSupportsMultiFilter?this.columnDefnArray.forEach((function(i){var s,r=t.convertFilterData(i).filterdata;r instanceof Date&&(r=new omnis_date(r)),e(i.omnisListColumn+1,i.field,i.filterex_type,null!==(s=r)&&void 0!==s?s:null)})):e(this.filtercol,this.getDataColumnName(this.filtercol),wi.FILTER_CONTAINS,this.form.getData(this.filterdata));var s=new omnis_raw_list(i.list,this.form);return s.lstDef=[].concat([["filterData",eOmnisDataTypes.fftList,1,0,0,0]]),s.lstData.sort(),s},yi.prototype.setCurrentFilters=function(t){var e=this,i=t.lstData,s=!1;i&&(i.forEach((function(t){var i,r,n,o,a=t[0],l=a.lstData;a.lstDef.forEach((function(t,e){switch(t[0].toLowerCase()){case"colname":i=l[e];break;case"colnumber":r=l[e];break;case"filtertype":n=l[e];break;case"value":o=l[e]}}));var h=i?e.findColumnByName(i,e.columnDefnArray):e.findColumnByNumber(r,e.columnDefnArray);if(h)if(e.mSupportsMultiFilter){if(o==h.filterex_data&&h.filterex_type===n)return;s=!0,h.filterex_data=o,h.filterex_type=n;var c,u=e.convertFilterData(h).filterdata;if(h.col_filter_button_text.text(e.getFilterTypeStr(h.field)),n!==wi.FILTER_NONE)switch(e.mSupportsMultiFilter&&h.col_filter_control.show(),h.omnisType){case eOmnisDataTypes.fftBoolean:h.col_filter_control.find("input")[0].checked=u;break;case eOmnisDataTypes.fftDate:h.col_filter_control[0].value=u?Ai(u,e.getDateFormat(h),u.__hasTimeComponent):"",h.col_filter_control_img.show();break;default:h.col_filter_control[0].value=u}else h.col_filter_control.hide(),null===(c=h.col_filter_control_img)||void 0===c||c.hide()}else{if(e.filtercol!==h.omnisListColumn+1||e.mFilterInput[0].value==o)return;e.mFilterInput[0].value=o,s=!0}})),s&&(this.mSupportsMultiFilter?this.filternow(this):Ci(this)))},yi.prototype.findColumnByName=function(t,e){return e.find((function(e){return e.field===t}))},yi.prototype.findColumnByNumber=function(t,e){return e.find((function(e){return e.omnisListColumn+1===t}))},yi.prototype.updateCtrl=function(t,e,i,s){if((!this.hasCustomFormat||this.scriptOk)&&this.getTrueVisibility()){var r=this.saveFocus(),n=this.getData(),o=null!=n?n.lstDef:null;o&&o.toString()!=this.listDefn&&(this.doUpdateCtrl(o),t=null);var a=this.ignoreSetSelectedRows;this.ignoreSetSelectedRows=!0,this.doUpdate(!1,t,e,i),this.ignoreSetSelectedRows=a,this.generateClick=!1,this.reapplyColumnWidthPercentage(),r&&this.restoreFocus(),this.updateAllFooters()}},yi.prototype.doUpdateCtrl=function(t){this.onCellChangedEnabled=!1,this.buildColumnDefinitions(t,!1),this.grid.setColumns(this.columnDefnArray),this.onCellChangedEnabled=!0,this.updateStyleSheet(),jOmnis.mDesign&&this.userDefined&&this.doHiliteSelectedItem(this.currentColumnNumber,!0)},yi.prototype.doUpdate=function(t,e,i,s){if(this.formBuiltCalled){var r,n,o=this.getClientElem();if(!t){if("#L"==e){if(!this.multisel){(!(w=this.getData("#L"))||this.savedCurrentCell&&w-1!=this.savedCurrentCell.row)&&(this.savedCurrentCell=null),w&&-1!==w?this.grid.setSelectedRows([w-1]):(this.grid.setSelectedRows([]),this.savedScrollTop=this.savedScrollLeft=0,this.restoreAfterMadeVisible());var a=this.grid.getCurrentCell(),l=w&&-1!==w?w-1:0;null==a?a={row:l,cell:0}:a.row=l,this.isEnabled()&&this.doCurrentCellChanged(a),this.grid.gotoCell(a.row,a.cell,!1,!0),this.initialCell=null}return}if("#LSEL_ALL"==e){if(this.multisel){for(var h=this.getData("#LSEL_ALL"),c=[],u=0;u<h.length;++u)h[u]&&c.push(u);this.grid.setSelectedRows(c)}return}if("#1COL"==e){var d=this.dataView.rows[i-1];if(d){var p=this.getColumnFromListColNumber(this.columnDefnArray,s-1);if(p)return d[p.field]=this.getData("#1COL",i,p.omnisListColumn+1),this.mUpdate1Col=!0,this.dataView.updateItem(d[ri],d),void(this.mUpdate1Col=!1)}}this.grid.renderNow(!0),(x=this.getViewport())&&(r=x[x.length-1].scrollTop,n=x[x.length-1].scrollLeft);var m=!1;if(!t&&this.grid.getOptions().editorLock.isActive()){var f=document.querySelector(".editable");if(f)jOmnis.getContainerControl(f)===this&&(m=!0)}if(this.dataView.beginUpdate(),this.dataView.setItems([]),this.dataView.endUpdate(),x)try{x.scroll()}catch(t){}}this.selectedRowIds=[];var g=[],v=this.getData();if(null==v||!(v instanceof omnis_raw_list)||v.lstRow)return this.listDefn=null,this.dataView&&(this.dataView.beginUpdate(),this.dataView.setItems([]),this.dataView.endUpdate()),void this.grid.renderNow(!1);this.lineCount=null!=v.lstData?v.lstData.length:0;for(var b=0;b<this.lineCount;++b){var y=g[b]={};y[ri]="id_"+b;for(var C=0;C<this.columnDefnArray.length;++C){var _=this.columnDefnArray[C];if(_.field==ri)throw jGetOmnisException(this.form.inst,"ctl_dgrd_id",ri);if(_.omnisType==eOmnisDataTypes.fftDate){var E=v.lstData[b][_.omnisListColumn];E&&E instanceof omnis_date?y[_.field]=E.toJavaScriptDate():y[_.field]=null}else _.omnisType,eOmnisDataTypes.fftCharacter,y[_.field]=v.lstData[b][_.omnisListColumn];this.columnDefnArray[C].hidden&&!jOmnis.mDesign&&this.queueSetColumns()}y._olr=v.lstData[b],this.multisel&&null!=v.lstLSEL[b]&&0!=v.lstLSEL[b]&&(this.selectedRowIds[this.selectedRowIds.length]=y[ri])}var w=this.getData("#L");!this.multisel&&null!=v&&w>0&&w<=g.length&&(this.selectedRowIds[0]=g[w-1][ri]);var k=!1;!this.multisel&&(0==this.selectedRowIds.length||this.savedCurrentCell&&w-1!=this.savedCurrentCell.row)&&(this.savedCurrentCell=null,0==this.selectedRowIds.length&&(k=!0));var T=0,S=0;if(t&&(T=parseInt(o.getAttribute("data-vcell")),w&&!T&&(T=w,o.setAttribute("data-vcell",T+"")),T<=0||T>this.lineCount?T=0:((S=parseInt(o.getAttribute("data-hcell")))<=0||S>this.columnDefnArray.length)&&(S=1)),this.dataView.beginUpdate(),this.dataView.setItems(g),(t||jOmnis.mDesign)&&this.dataView.setFilter(this.makeFunction("filter",1)),this.dataView.endUpdate(),t)this.hasCustomFormat&&this.reapplyColumnWidthPercentage(!1),this.applySortProperties(),this.initialCell=null,this.initialCell=0!=T?{row:T-1,cell:S-1}:{row:0,cell:0};else if(k&&null==this.savedScrollTop)this.savedScrollTop=this.savedScrollLeft=0,this.restoreAfterMadeVisible();else if(r||n){var x=this.getViewport();r&&(x[x.length-1].scrollTop=r),n&&(x[x.length-1].scrollLeft=n);try{x.scroll()}catch(t){}this.setiScrollPosition(n?-n:0,r?-r:0)}this.grid.renderNow(!1),m&&this.grid.editCurrentCell()}},yi.prototype.setAriaRowCount=function(t){this.mGridElem[0].setAttribute("aria-rowcount",t+"")},yi.prototype.setAriaColCount=function(t){this.mGridElem[0].setAttribute("aria-colcount",t+"")},yi.prototype.setiScrollPosition=function(t,e){this.iscroll&&(this.settingPosition=!0,this.iscroll.scrollTo(t,e,0),this.settingPosition=!1)},yi.prototype.updateSelection=function(){this.getClientElem();this.selectedRowIds=[];var t=[],e=this.getData();if(this.multisel)for(var i=0;i<this.lineCount;++i)null!=e.lstLSEL[i]&&0!=e.lstLSEL[i]&&(this.selectedRowIds[this.selectedRowIds.length]="id_"+i,t.push(i));else 0!=e.lstL&&(this.selectedRowIds[0]="id_"+e.lstL-1,t.push(e.lstL-1));this.grid.setSelectedRows(t)},yi.prototype.handleEvent=function(t){switch(t.type){case"focusin":var e=t.target,i=e.firstElementChild;jOmnis.hasClass(e,"slick-cell")&&i&&"color"===i.getAttribute("type")&&(this.commitColorEdit?(this.grid.getEditController().commitCurrentEdit(),this.commitColorEdit=!1):this.grid.getEditController().cancelCurrentEdit());break;case"keypress":var s=this.grid.getOptions().editorLock;if(!(this.enterable&&(this.options.autoEdit||s&&s.isActive()))){var r=this.mFilterInput,n=jOmnis.hasClass(t.target,"xdropdown_input_box");if((null==r||t.target!=r[0])&&!n){var o=OmnisKeyboardHandler.getNormalizedEventKey(t);t.metaKey||t.ctrlKey||t.altOrOptionKey||"Tab"===o||(this.continueKeySearch(o),jOmnis.stopEventNow(t))}}return!0;case"contextmenu":if(this.headerContextClicked)return this.headerContextClicked=!1,!0;if("grid-canvas"==t.target.className){if(jOmnisMenuHandler.isContextMenuOpen()&&t.originalEvent)return jOmnis.handleEventPreventDefault(t.originalEvent);var a=this.grid.getCellFromPoint(t.offsetX,0).cell+1;return this.handleContextMenuClick(t,this,0,a)}break;case"copy":var l=this.grid.getSelectedRows();l.sort((function(t,e){return t-e}));for(var h=this.getData("").lstData,c=[],u=0;u<l.length;u++){for(var d=[],p=h[l[u]],m=0;m<this.columnDefnArray.length;m++)if(!this.columnDefnArray[m].hidden){var f=this.columnDefnArray[m].omnisListColumn;d.push(p[f])}c.push(d.join("\t"))}var g=c.join("\n");return t.clipboardData.setData("text/plain",g),!0}return"focus"!=t.type||this.mInFocus?"click"==t.type||this.superclass.handleEvent.call(this,t):(t.relatedTarget&&jOmnis.getContainerControl(t.relatedTarget)===this||(null==this.grid.getCurrentCell()&&null==this.initialCell&&(this.initialCell={row:0,cell:0}),this.mInFocus=!0,this.focus(),this.mInFocus=!1),!0)},yi.prototype.getProperty=function(t){switch(t){case ii.hcell:return null==(e=this.grid.getCurrentCell())?0:e.cell+1;case ii.vcell:var e;return null==(e=this.grid.getCurrentCell())?0:e.row+1;case ii.multifilters:return this.mSupportsMultiFilter;case ii.frozencolumns:return this.frozenColumns;case ii.columnnames:for(var i="",s=0;s<this.columnDefnArray.length;++s){s>0&&(i+=",");var r=this.getOmnisColumn(this.columnDefnArray,s+1);i+=jOmnis.unescapeHTML(r.name)}for(;i.length>0&&i.lastIndexOf(",")==i.length-1;)i=i.substr(0,i.length-1);return i;case ii.columnwidths:var n="";for(s=0;s<this.columnDefnArray.length;++s){s>0&&(n+=","),n+=(r=this.getOmnisColumn(this.columnDefnArray,s+1)).omnisWidth}return n;case ii.designcols:var o=this.getClientElem();return parseInt(o.getAttribute("data-cols"));case ii.filterareaheight:return this.secondaryHeaderRowHeight;case ii.filtercol:return this.filtercol;case ii.colorpickercanceltext:return this.mColorPickerText[0];case ii.colorpickeroktext:return this.mColorPickerText[1];case ii.filterlabel:return this.mFilterArea[0].firstChild.data;case ii.filtervalue:return this.filterDataName;case ii.gridlinescolor:return this.gridCellBordersColor;case ii.gridlinesdotted:return this.gridCellBordersDotted;case ii.gridlinesvisible:return this.gridCellBordersVisible;case ii.hasheader:return this.headerVisible;case ii.hasfilterarea:return this.hasSecondaryHeader;case ii.rowheight:return this.rowHeight;case ii.headerheight:return this.headerHeight;case ii.headertext:return this.headerText;case ii.hideselection:return this.hideSelection;case ii.selectedlinecolor:return this.selectedLineColorValue;case ii.selectedlinetextcolor:return this.selectedLineTextColorValue;case ii.sortcol:o=this.getClientElem();return parseInt(o.getAttribute("data-sortcol"));case ii.sortascending:return"1"==(o=this.getClientElem()).getAttribute("data-sortascending");case ii.boldheader:return this.boldHeader;case ii.evenrowcolor:return this.evenRowColorValue;case ii.autoedit:return this.options.autoEdit;case ii.candragdisplayorder:return this.options.enableColumnReorder;case ii.canresizecolumns:return this.canResizeColumns;case ii.cansortcolumns:return this.canSortColumns;case ii.enterable:return this.enterable;case ii.extendable:return this.extendable;case eBaseProperties.multipleselect:return this.multisel;case ii.displayorder:return this.mDisplayOrder.join(",");case ii.hidecolumnheader:return this.mHideColumnHeader;case ii.setlineheight:return this.mSetLineHeight;case ii.columnwidthsarepercentage:return this.mColWidthsArePercentage;case eBaseProperties.hscroll:case eBaseProperties.vscroll:return null;case eBaseProperties.autocorrect:return this.mAutoCorrect;case eBaseProperties.autocapitalize:return this.mAutoCapitalize;case eBaseProperties.keyboardchangesline:return this.keyboardChangesCurrentLine;case ii.headerjst:return this.headerJst;case ii.columnheadersjst:return this.columnHeadersJst;case ii.rowcsscol:return this.rowCssCol;case ii.hilitefocusedcell:return this.hiliteFocusedCell;case ii.cellhilitecolor:return this.cellHiliteColor;case ii.editdatetext:return this.editDateText;case ii.datePickerMode:return this.mDatePickerMode;case ii.datePickerPopupStyle:return this.mDatePickerPopupStyle;case ii.tabThroughCells:return this.options.tabThroughCells;case ii.userdefined:return this.userDefined;case ii.movecolumn:return 0;case ii.columnHeaderHeight:return this.columnHeaderHeight;case ii.checkboxColor:return this.checkboxColor;case ii.hasFooter:return this.hasFooter;case ii.footerHeight:return this.footerHeight;case ii.footerType:return this.footerType;case ii.footerLabel:return this.footerLabel;case ii.footerNumberFormat:return this.footerNumberFormat;case ii.footerDateFormat:return this.footerDateFormat;case ii.footerDateFormatCustom:return this.footerDateFormatCustom;case ii.footerZeroShownEmpty:return this.footerZeroShownEmpty;case ii.footerBackColor:return this.footerBackColor;case ii.footerBackAlpha:return this.footerBackAlpha;case ii.footerTextColor:return this.footerTextColor;case ii.footerFontStyle:return this.footerFontStyle;case ii.footerJst:return this.footerJst;case ii.filters:return this.getCurrentFilters()}this.mDoneColumnProperty=!1;var a=this.getColumnProperty(t);return this.mDoneColumnProperty?a:this.superclass.getProperty.call(this,t)},yi.prototype.getColumnProperty=function(t){if(t!=ii.currentcolumn&&(this.currentColumnNumber<=0||this.currentColumnNumber>this.columnDefnArray.length))return null;var e=t!=ii.currentcolumn?this.getOmnisColumn(this.columnDefnArray,this.currentColumnNumber):null;switch(this.mDoneColumnProperty=!0,t){case ii.currentcolumn:return this.currentColumnNumber;case ii.columnbackalpha:return null!=e.omnisBackColorValue.backAlpha?e.omnisBackColorValue.backAlpha:e.omnisBackColorValue>>24&255;case ii.columnbackcolor:return null!=e.omnisBackColorValue.backColor?e.omnisBackColorValue.backColor:16777215&e.omnisBackColorValue;case ii.columncanresize:return e.omnisResizable;case ii.columncansort:return e.omnisSortable;case ii.columndatacol:return e.omnisListColumn+1;case ii.columnenabled:return e.omnisEditable;case ii.columnfontstyle:return e.omnisFontStyle;case ii.columnjst:return e.textAlign===di?a.NE.right:e.textAlign===ui?a.NE.center:a.NE.left;case ii.columnminwidth:return e.omnisMinWidth;case ii.columnmode:return e.hasCustomFormat?3:e.omnisHasDropListPicker?1:e.hasColumnFormat?2:e.hasColorPicker?4:0;case ii.columnname:return jOmnis.unescapeHTML(e.name);case ii.columnpicklist:return e.omnisPickerName;case ii.columnpopuptext:return e.omnisPopupTextEditor;case ii.columntextcolor:return e.omnisTextColorValue;case ii.columnwidth:return e.omnisWidth;case ii.columnstyledtext:return e.styledText;case ii.columnhidden:return e.hidden;case ii.zeroshownempty:return e.zeroshownempty;case ii.columnheaderjst:return e.colHeaderJst;case ii.columneditdatetext:return e.colEditDateText;case ii.columnDatePickerMode:return e.colDatePickerMode;case ii.columnDatePickerPopupStyle:return e.colDatePickerPopupStyle;case ii.footerColumnType:return e.footerType;case ii.footerColumnLabel:return e.footerLabel;case ii.footerColumnValue:return e.footerValue;case ii.footerColumnNumberFormat:return e.footerNumberFormat;case ii.footerColumnDateFormat:return e.footerDateFormat;case ii.footerColumnDateFormatCustom:return e.footerDateFormatCustom;case ii.footerColumnZeroShownEmpty:return e.footerZeroShownEmpty;case ii.footerColumnBackColor:return e.footerBackColor;case ii.footerColumnBackAlpha:return e.footerBackAlpha;case ii.footerColumnTextColor:return e.footerTextColor;case ii.footerColumnFontStyle:return e.fontStyle;case ii.footerColumnJst:return e.footerJst;case ii.columnAllowNullDateInput:return e.colAllowNullDateInput;default:this.mDoneColumnProperty=!1}return null},yi.prototype.getCanAssign=function(t){switch(t){case ii.hcell:case ii.vcell:case ii.columnnames:case ii.columnwidths:case ii.designcols:case ii.filterareaheight:case ii.filtercol:case ii.filterlabel:case ii.filtervalue:case ii.gridlinescolor:case ii.gridlinesdotted:case ii.gridlinesvisible:case ii.hasheader:case ii.hasfilterarea:case ii.rowheight:case ii.headerheight:case ii.headertext:case ii.hideselection:case ii.selectedlinecolor:case ii.selectedlinetextcolor:case ii.sortcol:case ii.sortascending:case ii.boldheader:case ii.evenrowcolor:case ii.autoedit:case ii.canresizecolumns:case ii.cansortcolumns:case ii.enterable:case ii.extendable:case eBaseProperties.multipleselect:case ii.displayorder:case ii.hidecolumnheader:case ii.setlineheight:case ii.columnwidthsarepercentage:case eBaseProperties.hscroll:case eBaseProperties.vscroll:case eBaseProperties.keyboardchangesline:case ii.rowcsscol:case ii.hilitefocusedcell:case ii.cellhilitecolor:case ii.editdatetext:case ii.datePickerMode:case ii.datePickerPopupStyle:case ii.tabThroughCells:case ii.userdefined:case ii.columnHeaderHeight:case ii.checkboxColor:case ii.hasFooter:case ii.footerHeight:case ii.footerType:case ii.footerLabel:case ii.footerNumberFormat:case ii.footerDateFormat:case ii.footerDateFormatCustom:case ii.footerZeroShownEmpty:case ii.footerBackColor:case ii.footerBackAlpha:case ii.footerTextColor:case ii.footerFontStyle:case ii.footerJst:return!0;case ii.candragdisplayorder:return!1;case ii.movecolumn:return 0!=jOmnis.mDesign;case ii.currentcolumn:case ii.columnbackalpha:case ii.columnbackcolor:case ii.columncanresize:case ii.columncansort:case ii.columndatacol:case ii.columnenabled:case ii.columnfontstyle:case ii.columnjst:case ii.columnminwidth:case ii.columnmode:case ii.columnname:case ii.columnpicklist:case ii.columnpopuptext:case ii.columntextcolor:case ii.columnwidth:case ii.columnstyledtext:case eBaseProperties.autocorrect:case eBaseProperties.autocapitalize:case ii.columnhidden:case ii.zeroshownempty:case ii.colorpickercanceltext:case ii.colorpickeroktext:case ii.columnheaderjst:case ii.columneditdatetext:case ii.columnDatePickerMode:case ii.columnDatePickerPopupStyle:case ii.footerColumnType:case ii.footerColumnLabel:case ii.footerColumnValue:case ii.footerColumnNumberFormat:case ii.footerColumnDateFormat:case ii.footerColumnDateFormatCustom:case ii.footerColumnZeroShownEmpty:case ii.footerColumnBackColor:case ii.footerColumnBackAlpha:case ii.footerColumnTextColor:case ii.footerColumnFontStyle:case ii.footerColumnJst:case ii.columnAllowNullDateInput:return!0}return this.superclass.getCanAssign.call(this,t)},yi.prototype.setProperty=function(t,e){var i=this;function s(){var t=i.getData();return t&&t.lstDef||[]}function r(){this.setHeaderCss(!0),this.setCellCss(!0),this.setRowCss(!0),n.call(this,!0),this.updateStyleSheet()}function n(t){for(b=0;b<this.columnDefnArray.length;b++)this.makeColumnHeaderCss(this.columnDefnArray[b],t)}function o(){i.mUpdateAllFooters=!0,i.form.inst.registerPropertyObject(i)}function l(){i.mUpdateFooterCss=!0,i.form.inst.registerPropertyObject(i)}var h=this.getClientElem();switch(t){case ii.hcell:return this.mSetInitialCell||(this.initialCell=this.grid.getCurrentCell()),null==this.initialCell?this.initialCell={row:0,cell:e-1}:this.initialCell.cell=e-1,this.mSetInitialCell=!0,this.form.inst.registerPropertyObject(this),!0;case ii.vcell:return this.mSetInitialCell||(this.initialCell=this.grid.getCurrentCell()),null==this.initialCell?this.initialCell={row:e-1,cell:0}:this.initialCell.row=e-1,this.mSetInitialCell=!0,this.form.inst.registerPropertyObject(this),!0;case ii.frozencolumns:if(this.frozenColumns=Math.max(0,+e),this.options.frozenColumn===this.frozenColumns-1)return!0;var c=i.getViewport(),u=c[c.length-1];return this.newHscroll=u.scrollLeft,this.newVscroll=u.scrollTop,this.updateFrozenColumns=!0,this.queueUpdate(),!0;case ii.columnnames:return this.setColumnNames(e),!0;case ii.columnwidths:return this.setColumnWidths(e),!0;case ii.columnwidthsarepercentage:var d=1*e!=0;if(this.mColWidthsArePercentage!=d){var p=this.getProperty(ii.columnwidths);this.mColWidthsArePercentage=d,this.setProperty(ii.columnwidths,p)}return!0;case ii.designcols:this.mDesignColsChanged=!0,this.form.inst.registerPropertyObject(this);var m=+e;if(parseInt(h.getAttribute("data-cols"))==m)return!0;h.setAttribute("data-cols",e),this.onCellChangedEnabled=!1;var f=s();return this.mDisplayOrder=[],this.mAppliedDisplayOrder="",this.mSetColsQueued&&this.grid.setColumns(this.columnDefnArray),this.buildColumnDefinitions(f,!1),this.updateStyleSheet(),this.grid.setColumns(this.columnDefnArray),this.onCellChangedEnabled=!0,this.queueUpdate(),this.userDefined&&this.currentColumnNumber>m&&(this.currentColumnNumber=m,jOmnis.mDesign&&this.doHiliteSelectedItem(this.currentColumnNumber,!0)),!0;case ii.filterareaheight:return this.secondaryHeaderRowHeight=1*e,this.setFilterAreaOptions(),this.grid.setOptions(this.options),this.setColumns(),!0;case ii.filtercol:return this.filtercol=1*e,this.mDataViewRefreshQueued=!0,this.queueUpdate(),!0;case ii.filterlabel:return this.mFilterArea[0].firstChild.data=e,!0;case ii.colorpickercanceltext:return this.mColorPickerText[0]=e;case ii.colorpickeroktext:return this.mColorPickerText[1]=e;case ii.filtervalue:return this.filterDataName=e,this.setFilterAndHeaderProperties(),this.setFilterInputValue(),this.mDataViewRefreshQueued=!0,this.queueUpdate(),!0;case ii.gridlinescolor:return this.gridCellBordersColor=+e,r.call(this),!0;case ii.gridlinesdotted:return this.gridCellBordersDotted=1*e!=0,r.call(this),!0;case ii.gridlinesvisible:return this.gridCellBordersVisible=1*e!=0,r.call(this),!0;case ii.hasheader:case ii.hasfilterarea:case ii.rowheight:return t==ii.hasheader?(this.headerVisible=1*e!=0,this.setProperty(eBaseProperties.arialabelledby,this.mAriaLabelledby),this.setHeaderAlignment()):t==ii.rowheight?(this.rowHeight=1*e<0?0:1*e,this.options.rowHeight=this.rowHeight,this.fontChanged()):this.hasSecondaryHeader=1*e!=0,this.setFilterAreaOptions(),this.setFilterAndHeaderProperties(),this.setFilterInputValue(),this.dataView.refresh(),this.sizeChanged(),this.grid.setOptions(this.options),this.setColumns(),r.call(this),!0;case ii.multifilters:return this.mSupportsMultiFilter=1*e!=0,this.setFilterAreaOptions(),this.setFilterAndHeaderProperties(),this.setFilterInputValue(),this.dataView.refresh(),this.sizeChanged(),this.grid.setOptions(this.options),this.setColumns(),!0;case ii.headerheight:return this.headerHeight=1*e<0?0:1*e,this.setFilterAndHeaderProperties(),this.sizeChanged(),!0;case ii.headertext:return this.headerText=e,this.setHeaderText(e),this.setProperty(eBaseProperties.arialabelledby,this.mAriaLabelledby),!0;case ii.hideselection:return this.hideSelection=1*e!=0,this.setRowCss(),!0;case ii.selectedlinecolor:return this.selectedLineColorValue=1*e,this.setRowCss(),!0;case ii.selectedlinetextcolor:return this.selectedLineTextColorValue=1*e,this.setRowCss(),!0;case ii.sortcol:case ii.sortascending:return t==ii.sortcol?h.setAttribute("data-sortcol",e+""):h.setAttribute("data-sortascending",1*e!=0?"1":"0"),this.applySortProperties(),!0;case ii.boldheader:return this.boldHeader=1*e!=0,this.setHeaderCss(),!0;case eBaseProperties.backcolor:case eBaseProperties.backalpha:return this.superclass.setProperty.call(this,t,e),this.setRowCss(),!0;case ii.evenrowcolor:return this.evenRowColorValue=1*e,this.setRowCss(),!0;case ii.autoedit:return this.options.autoEdit=1*e!=0,this.grid.setOptions(this.options),!0;case ii.candragdisplayorder:return alert("Cannot assign $::candragdisplayorder at runtime"),!0;case ii.canresizecolumns:case ii.cansortcolumns:return t==ii.cansortcolumns?this.canSortColumns=1*e!=0:this.canResizeColumns=1*e!=0,this.updateSizeAndSortForColumns(),!0;case ii.enterable:return this.enterable=1*e!=0,this.mAcceptsReturn=this.enterable,this.mAcceptsEscape=this.enterable,this.activeChanged(),!0;case ii.extendable:return this.extendable=1*e!=0,this.activeChanged(),!0;case eBaseProperties.multipleselect:return this.multisel=1*e!=0,this.savedCurrentCell=null,this.options.multiSelect=this.multisel,this.grid.setOptions(this.options),this.updateSelection(),!0;case ii.displayorder:return this.setDisplayOrder(e+""),this.applyDisplayOrder(!0),!0;case ii.hidecolumnheader:return this.mHideColumnHeader=1*e!=0,this.showColumnHeaders(!this.mHideColumnHeader),this.grid.resizeCanvas(),!0;case ii.setlineheight:return this.mSetLineHeight=1*e!=0,this.updateStyleSheet(),!0;case eBaseProperties.width:if(e===this.getProperty(eBaseProperties.width))return!0;var g=this.superclass.setProperty.call(this,t,e);if(this.mColWidthsArePercentage){p=this.getProperty(ii.columnwidths);this.setProperty(ii.columnwidths,p)}return g;case eBaseProperties.autocorrect:return this.mAutoCorrect=e,!0;case eBaseProperties.autocapitalize:return this.mAutoCapitalize=e||0,!0;case eBaseProperties.hscroll:case eBaseProperties.vscroll:if((e*=1)<=0)return!0;if(t==eBaseProperties.hscroll){this.newHscroll=0;var v=this.grid.getColumns();if(v)for(var b=0;b<v.length&&v[b].omnisGridColumn!=e;++b)this.newHscroll+=v[b].width}else this.newVscroll=this.options.rowHeight*(e-1);return this.setScrollChangeTimer(),!0;case eBaseProperties.arialabelledby:return e?this.superclass.setProperty.call(this,t,e):(this.mAriaLabelledby=null,this.headerVisible&&this.mLabelElem[0].innerText?this.mGridElem[0].setAttribute("aria-labelledby",this.mLabelElem[0].id):this.mGridElem[0].removeAttribute("aria-labelledby"),!0);case eBaseProperties.keyboardchangesline:return this.keyboardChangesCurrentLine=!!e,this.options.keyboardChangesLine=this.keyboardChangesCurrentLine,this.grid.setOptions(this.options),!0;case ii.headerjst:return this.headerJst=+e,this.setHeaderAlignment(),!0;case ii.columnheadersjst:for(this.columnHeadersJst=+e,b=0;b<this.columnDefnArray.length;b++)this.makeColumnHeaderCss(this.columnDefnArray[b],!0);return this.updateStyleSheet(),!0;case ii.rowcsscol:return this.rowCssCol=+e<0?0:+e,this.rowCssCol>0?this.options.rowCssClasses=this.getRowCssClasses.bind(this):this.options.rowCssClasses=null,this.grid.setOptions(this.options),this.queueUpdate(),!0;case ii.hilitefocusedcell:return this.hiliteFocusedCell=!!e,this.updateStyleSheet(),!0;case ii.cellhilitecolor:return this.cellHiliteColor=+e,this.updateStyleSheet(),!0;case ii.editdatetext:var y=this.editDateText;return this.editDateText=0!=+e,y!==this.editDateText&&this.buildColumnDefinitions(s(),!0),!0;case ii.tabThroughCells:return this.options.tabThroughCells=!!e,this.grid.setOptions(this.options),!0;case ii.userdefined:return this.setUserDefined(0!=+e),!0;case ii.movecolumn:return this.moveColumn(+e),!0;case ii.columnHeaderHeight:return this.columnHeaderHeight=+e,n.call(this,!0),this.setHeaderCss(!1),this.grid.resizeCanvas(),!0;case ii.checkboxColor:return this.checkboxColor=+e,Lt.setColor(this.checkboxColor,this),!0;case eBaseProperties.textcolor:e=+e;var C=this.getTheme().getTextColorString(e,this.resolveDefaultColor(this.themeableData.backgroundColor,a.Mr.BACKGROUND),this.DefaultColors.text);Theme.SetThemedIconColor(this.mFilterButton[0],C);break;case ii.hasFooter:return this.hasFooter=!!e,this.hasFooter!==this.grid.getOptions().showFooterRow&&this.grid.setFooterRowVisibility(this.hasFooter,!1),this.hasFooter&&o(),!0;case ii.footerHeight:return this.footerHeight=+e,this.footerHeight!==this.grid.getOptions().footerRowHeight&&(this.options.footerRowHeight=this.footerHeight,this.fontChanged(),this.grid.setOptions(this.options),this.setColumns()),!0;case ii.footerType:return+e!==this.footerType&&(this.footerType=+e,o()),!0;case ii.footerLabel:var _=e;return _!==this.footerLabel&&(this.footerLabel=_,o()),!0;case ii.footerNumberFormat:var E=+e;return E!==this.footerNumberFormat&&(this.footerNumberFormat=E,o()),!0;case ii.footerDateFormat:var w=+e;return w!==this.footerDateFormat&&(this.footerDateFormat=w,o()),!0;case ii.footerDateFormatCustom:var k=+e;return k!==this.footerDateFormatCustom&&(this.footerDateFormatCustom=k,o()),!0;case ii.footerZeroShownEmpty:var T=!!e;return T!==this.footerZeroShownEmpty&&(this.footerZeroShownEmpty=T,o()),!0;case ii.footerBackColor:var S=+e;return S!==this.footerBackColor&&(this.footerBackColor=S,l()),!0;case ii.footerBackAlpha:var x=+e;return x!==this.footerBackAlpha&&(this.footerBackAlpha=x,l()),!0;case ii.footerTextColor:var D=+e;return D!==this.footerTextColor&&(this.footerTextColor=D,l()),!0;case ii.footerFontStyle:var O=+e;return O!==this.footerFontStyle&&(this.footerFontStyle=O,l()),!0;case ii.footerJst:var A=+e;return A!==this.footerJst&&(this.footerJst=A,l()),!0;case ii.filters:return this.setCurrentFilters(e),!0}return!!this.setColumnProperty(t,e)||this.superclass.setProperty.call(this,t,e)},yi.prototype.showColumnHeaders=function(t){var e=t?"":"none",i=this.clientElem.querySelectorAll(".slick-header.ui-state-default");i&&i.length&&i.forEach((function(t){t.style.display=e}))},yi.prototype.setScrollChangeTimer=function(){if(null==this.scrollTimer){var t=this;this.scrollTimer=setTimeout((function(){t.scrollTimer=null;var e=t.getViewport(),i=e[e.length-1];t.newHscroll=null==t.newHscroll?i.scrollLeft:t.newHscroll,t.newVscroll=null==t.newVscroll?i.scrollTop:t.newVscroll,i.scrollLeft=t.newHscroll,i.scrollTop=t.newVscroll;try{i.scroll()}catch(t){}t.setiScrollPosition(-t.newHscroll,-t.newVscroll),t.newHscroll=t.newVscroll=null}),0)}},yi.prototype.applyColumnPropertyChanges=function(){if(this.columnPropertiesSetBeforeDefn){var t=this.columnPropertiesSetBeforeDefn,e=this,i=this.currentColumnNumber;Object.keys(t).forEach((function(i){e.setProperty(ii.currentcolumn,i),e.getOmnisColumn(e.columnDefnArray,e.currentColumnNumber)&&(t[i].forEach((function(t){e.setProperty(t.propNumber,t.propValue)})),delete t[i])})),this.currentColumnNumber=i}},yi.prototype.registerMissingColumnProperty=function(t,e,i){this.columnPropertiesSetBeforeDefn||(this.columnPropertiesSetBeforeDefn={}),this.columnPropertiesSetBeforeDefn[t]||(this.columnPropertiesSetBeforeDefn[t]=[]),this.columnPropertiesSetBeforeDefn[t].push({propNumber:e,propValue:i})},yi.prototype.setColumnProperty=function(t,e){if(t!=ii.currentcolumn&&this.currentColumnNumber<=0)return!1;var i=t!=ii.currentcolumn?this.getOmnisColumn(this.columnDefnArray,this.currentColumnNumber):null;if(t===ii.currentcolumn||i){var s=this;switch(t){case ii.currentcolumn:return e*=1,this.currentColumnNumber=e,this.userDefined&&jOmnis.mDesign&&this.doHiliteSelectedItem(e),!0;case ii.columnbackalpha:if(i.omnisBackColorValue.backAlpha!==+e){var r=i.omnisBackColorValue.backColor;i.omnisBackColorValue={backAlpha:+e,backColor:r},this.setColumnBackColor(i),this.makeColumnCss(i.omnisGridColumn,i)}return!0;case ii.columnbackcolor:if(i.omnisBackColorValue.backColor!==+e){var n=i.omnisBackColorValue.backAlpha;i.omnisBackColorValue={backAlpha:n,backColor:+e},this.setColumnBackColor(i),this.makeColumnCss(i.omnisGridColumn,i)}return!0;case ii.columncanresize:var l=i.omnisResizable;return i.omnisResizable=1*e!=0,l!=i.omnisResizable&&this.updateSizeAndSortForColumns(),!0;case ii.columncansort:l=i.omnisSortable;return i.omnisSortable=1*e!=0,l!=i.omnisSortable&&this.updateSizeAndSortForColumns(),!0;case ii.columndatacol:var h=this.getData(),c=h&&h.lstDef||[],u=this.findDataCol(e,c)-1;if(u>=0&&u<c.length)if(i.omnisListColumn!=u||this.mDesignColsChanged){i.omnisListColumn=u;var d=this.getColumnNameFromDefn(c,u);i.id=d,i.field=d,this.setupColumnEditingAndFormatting(i,null),this.queueUpdate()}return!0;case ii.columnenabled:l=i.omnisEditable;return i.omnisEditable=1*e!=0,l!=i.omnisEditable&&(i.omnisEditable&&i.styledText&&(i.styledText=!1,this.queueUpdate()),this.setupColumnEditingAndFormatting(i,null)),!0;case ii.columnfontstyle:return this.setFontStyle(i,1*e)!=i.fontStyle&&this.makeColumnCss(i.omnisGridColumn,i),!0;case ii.columnjst:return this.setColumnAlign(i,1*e,a.NE.left)!=i.textAlign&&this.makeColumnCss(i.omnisGridColumn,i),!0;case ii.columnminwidth:l=i.omnisMinWidth;return i.omnisMinWidth=e,l!=i.omnisMinWidth&&this.queueSetColumns(),!0;case ii.columnmode:var p=i.omnisHasDropListPicker,m=i.hasColumnFormat,f=i.hasCustomFormat;return i.omnisHasDropListPicker=1*e==1,i.hasColumnFormat=1*e==2,i.hasCustomFormat=1*e==3,i.hasColorPicker=1*e==4,p==i.omnisHasDropListPicker&&m==i.hasColumnFormat&&f==i.hasCustomFormat||(i.hasCustomFormat&&(this.hasCustomFormat=!0),this.setupColumnEditingAndFormatting(i,null)),!0;case ii.columnname:l=i.name;return i.toolTip=e,i.name=jOmnis.escapeHTML(e),(l!=i.name||this.hdrFmtMethodName)&&this.queueSetColumns(),!0;case ii.columnpicklist:return i.omnisPickerName=e,this.setupColumnEditingAndFormatting(i,null),!0;case ii.columnpopuptext:l=i.omnisPopupTextEditor;return i.omnisPopupTextEditor=1*e!=0,l!=i.omnisPopupTextEditor&&this.setupColumnEditingAndFormatting(i,null),!0;case ii.columntextcolor:return i.omnisTextColorValue=+e,i.textColor=null,i.omnisTextColorValue!==o.JT&&(i.textColor=this.getTheme().getTextColorString(i.omnisTextColorValue,i.omnisBackColorValue.backColor,this.DefaultColors.text)),this.makeColumnCss(i.omnisGridColumn,i),!0;case ii.columnwidth:l=i.omnisWidth;return i.omnisWidth=1*e,l!=i.omnisWidth&&(i.width=this.convertToPixels(i.omnisWidth),this.newCellWidthColumns[i.omnisGridColumn+""]=!0,this.queueSetColumns()),!0;case ii.columnstyledtext:l=i.styledText;return i.styledText=1*e!=0,l!=i.styledText&&(i.styledText&&i.omnisEditable&&(i.omnisEditable=!1,this.setupColumnEditingAndFormatting(i,null)),this.queueUpdate()),!0;case ii.columndateformat:l=i.colDateFormatType;return i.colDateFormatType=1*e,l!=i.colDateFormatType&&this.setupColumnEditingAndFormatting(i,null),this.queueUpdate(),!0;case ii.columndateformatcustom:l=i.colDateFormatCustom;return i.colDateFormatCustom=e,l!=i.colDateFormatCustom&&this.setupColumnEditingAndFormatting(i,null),this.queueUpdate(),!0;case ii.columnnumberformat:l=i.colNumberFormat;return i.colNumberFormat=e,l!=i.colNumberFormat&&this.setupColumnEditingAndFormatting(i,null),this.queueUpdate(),!0;case ii.columnhidden:return i.hidden=!!e,jOmnis.mDesign||this.queueSetColumns(),!0;case ii.zeroshownempty:return i.zeroshownempty=!!e,this.queueSetColumns(),!0;case ii.columnheaderjst:return i.colHeaderJst=+e,this.makeColumnHeaderCss(i),!0;case ii.columneditdatetext:return l=i.colEditDateText,i.colEditDateText=0!=+e,l!==i.colEditDateText&&this.setupColumnEditingAndFormatting(i,null),!0;case ii.columnDatePickerMode:return i.colDatePickerMode=+e,!0;case ii.columnDatePickerPopupStyle:return i.colDatePickerPopupStyle=+e,!0;case ii.footerColumnType:var g=+e;return i.footerType!==g&&(i.footerType=+e,i.valueRequiresUpdate=!0,k(i)),!0;case ii.footerColumnLabel:return i.footerLabel!==e&&(i.footerLabel=e,i.valueRequiresUpdate=!0,k(i)),!0;case ii.footerColumnValue:return Si(i.footerType,this.footerType)===vi&&i.footerValue!==e&&(i.footerValue=e,i.valueRequiresUpdate=!0,i.sendFooterUpdatedEvent=!0,k(i)),!0;case ii.footerColumnNumberFormat:return i.footerNumberFormat!==e&&(i.footerNumberFormat=e,i.valueRequiresUpdate=!0,k(i)),!0;case ii.footerColumnDateFormat:var v=+e;return i.footerDateFormat!==v&&(i.footerDateFormat=v,i.valueRequiresUpdate=!0,k(i)),!0;case ii.footerColumnDateFormatCustom:return i.footerDateFormatCustom!==e&&(i.footerDateFormatCustom=e,i.valueRequiresUpdate=!0,k(i)),!0;case ii.footerColumnZeroShownEmpty:var b=!!e;return i.footerZeroShownEmpty!==b&&(i.footerZeroShownEmpty=b,i.valueRequiresUpdate=!0,k(i)),!0;case ii.footerColumnBackColor:var y=+e;return i.footerBackColor!==y&&(i.footerBackColor=y,i.cssRequiresUpdate=!0,k(i)),!0;case ii.footerColumnBackAlpha:var C=+e;return i.footerBackAlpha!==C&&(i.footerBackAlpha=C,i.cssRequiresUpdate=!0,k(i)),!0;case ii.footerColumnTextColor:var _=+e;return i.footerTextColor!==_&&(i.footerTextColor=_,i.cssRequiresUpdate=!0,k(i)),!0;case ii.footerColumnFontStyle:var E=+e;return i.footerFontStyle!==E&&(i.footerFontStyle=E,i.cssRequiresUpdate=!0,k(i)),!0;case ii.footerColumnJst:var w=+e;return i.footerJst!==w&&(i.footerJst=w,i.cssRequiresUpdate=!0,k(i)),!0;case ii.columnAllowNullDateInput:return i.colAllowNullDateInput=!!e,!0}return!1}function k(t){s.mUpdateOneFooterCellQueue||(s.mUpdateOneFooterCellQueue=new Set),s.mUpdateOneFooterCellQueue.add(t),s.form.inst.registerPropertyObject(s)}this.registerMissingColumnProperty(this.currentColumnNumber,t,e)},yi.prototype.queueSetColumns=function(){this.mSetColsQueued=!0,this.form.inst.registerPropertyObject(this)},yi.prototype.queueUpdate=function(){this.mUpdateQueued=!0,this.form.inst.registerPropertyObject(this)},yi.prototype.fieldStyleChanged=function(t){this.superclass.fieldStyleChanged.call(this,t),this.setFilterAreaOptions(),this.setFilterAndHeaderProperties(),this.setFilterInputValue(),this.dataView.refresh(),this.sizeChanged(),this.grid.setOptions(this.options),this.setColumns(),this.setHeaderCss(!0),this.setCellCss(!0),this.setRowCss(!0);for(var e=0;e<this.columnDefnArray.length;e++)this.makeColumnHeaderCss(this.columnDefnArray[e],!0);this.updateStyleSheet()},yi.prototype.activeChanged=function(){this.activeOrEnabledChanged(),!this.isActive()&&this.isFilterRowVisible()?(this.toggleFilterRow(),this.openFilterRowOnActive=!0):this.openFilterRowOnActive&&(this.mFilterButton&&this.mFilterButton.is(":visible")&&this.toggleFilterRow(!0),this.openFilterRowOnActive=!1),this.superclass.activeChanged.call(this)},yi.prototype.enabledChanged=function(){this.activeOrEnabledChanged(),this.superclass.enabledChanged.call(this)},yi.prototype.activeOrEnabledChanged=function(){var t=null,e=this.isActive(),i=this.isEnabled();if(!e&&this.grid&&(t=this.grid.getCurrentCell())&&(!this.multisel&&this.getData("#L")&&(this.savedCurrentCell=t),this.grid.resetCurrentCell()),null!=this.options){this.options.editable=this.enterable&&i,this.options.enableAddRow=this.options.editable&&this.extendable;var s,r=this.getData();s=null!=r&&null!=r.lstDef?r.lstDef:this.dummyListDefn?this.dummyListDefn:[];for(var n=0;n<this.columnDefnArray.length;++n)this.setupColumnEditingAndFormatting(this.columnDefnArray[n],s);this.grid.setOptions(this.options),this.setColumns()}if(e&&this.savedCurrentCell){var o=this;setTimeout((function(){try{o.multisel||o.getData("#L")!=o.savedCurrentCell.row+1||null==o.grid.getCurrentCell()||o.grid.gotoCell(o.savedCurrentCell.row,o.savedCurrentCell.cell,!1)}catch(t){}o.savedCurrentCell=null}),50)}this.mFilterButton&&(this.mFilterButton[0].tabIndex=e?0:-1),this.mFilterInput&&(this.mFilterInput[0].tabIndex=e?0:-1)},yi.prototype.sizeChanged=function(){if(this.superclass.sizeChanged.call(this),this.canSetOptions)if(this.getTrueVisibility()){var t=this.borderWidth||0,e=this.mGridClientElem.css("height"),i=parseInt(e.substr(0,e.indexOf("px")));i-=(this.headerVisible?this.getHeaderHeight():0)+this.pagerHeight+2*t;var s=parseInt(this.mGridElem.css("height"));this.mGridElem.css("height",i);var r=$(this.elem).css("width"),n=parseInt(r.substr(0,r.indexOf("px"))),o=parseInt(this.mViewportElem.css("width"));this.mViewportElem.css("width",n-2*t),s!==i&&o!==n&&(this.gridWidthAndHeightChanged=!0),this.reapplyColumnWidthPercentage(),jOmnis.deferredFocus&&jOmnis.deferFocusUntilAnimationComplete?jOmnis.deferredFocus.push(this):this.deferredFocus()}else this.mNeedSizeChanged=!0},yi.prototype.deferredFocus=function(){this.grid.resizeCanvas(),null!=this.iscroll&&this.refreshIscroll()},yi.prototype.fontChanged=function(){this.superclass.fontChanged.call(this);var t,e=this;function i(){var t=e.clientElem.style.fontSize,i=parseInt((96*t.substr(0,t.indexOf("pt"))+36)/72);return Math.ceil(i+i/2)}0==this.rowHeight&&(t=i(),this.options.rowHeight=t||25,this.setFilterAreaOptions(),this.canSetOptions&&this.grid.setOptions(this.options),this.setFilterAndHeaderProperties()),0===this.footerHeight&&(void 0===t&&(t=i()),this.options.footerRowHeight=t||25)},yi.prototype.visibilityChanged=function(){var t=this.getTrueVisibility(null);t||(this.mNeedSizeChanged=!0);var e=this.superclass.visibilityChanged.call(this);return e&&this.mNeedSizeChanged&&t&&(this.mNeedSizeChanged=!1,this.sizeChanged(),this.update(),jOmnis.mDesign&&this.userDefined&&this.doHiliteSelectedItem(this.currentColumnNumber,!0)),e},yi.prototype.touchCanStartScroll=function(t){return(!this.grid||!this.grid.getCellEditor())&&(this.touchScrolled=!1,this.superclass.touchCanStartScroll(t))},yi.prototype.touchChangedPosition=function(t){this.settingPosition||(this.touchScrolled=!0,this.options.disableClick=!0,this.grid.setOptions(this.options))},yi.prototype.touchScrollEnded=function(){if(this.touchScrolled){this.touchScrolled=!1;var t=this;setTimeout((function(){t.options.disableClick=!1,t.grid.setOptions(t.options)}),0)}},yi.prototype.refreshIscroll=function(){this.settingPosition=!0,this.iscroll.refresh(),this.settingPosition=!1},yi.prototype.focusGridCell=function(t){var e,i;if(null!=this.initialCell)e=this.initialCell,this.initialCell=null,-1==this.lastChangedHCell&&-1==this.lastChangedVCell&&(this.lastChangedHCell=this.mapColumnToOriginalColumn(e.cell)+1,this.lastChangedVCell=e.row+1);else{null==(e=this.grid.getCurrentCell())&&(e={row:0,cell:0});var s=this.getData("#L");s&&-1!==s&&(e.row=s-1)}this.canUpdateListSelection=!1,this.multisel&&(i=this.grid.getSelectedRows());try{this.grid.gotoCell(e.row,e.cell,!1,!0),!this.options.autoEdit||t&&!this.options.tabThroughCells||this.grid.editCurrentCell(),this.generateClick=!1}catch(t){}this.multisel&&i&&i.length&&this.grid.setSelectedRows(i),this.canUpdateListSelection=!0},yi.prototype.focus=function(){this.canFocus()&&(this.headerVisible&&this.hasSecondaryHeader&&this.mFilterButton[0]?this.mFilterButton[0].focus():this.focusGridCell())},yi.prototype.tabOutOfGrid=function(t){if(t)if(this.headerVisible&&this.hasSecondaryHeader){var e=this.isFilterRowVisible()?this.mFilterInput[0]:this.mFilterButton[0];if(e)return e.focus(),!0}else{var i=this.mGridCanvasElem[0];i.tabIndex=-1,setTimeout((function(){i.tabIndex=0}),50)}return!1},yi.prototype.setTabIndex=function(t){return this.clientElem.tabIndex=-1,this.mGridCanvasElem&&(this.mGridCanvasElem[0].tabIndex=-1!=t&&this.isActive()?0:-1),t},yi.prototype.setInitialCell=function(){this.onCellChangedEnabled=!1,this.ignoreSetSelectedRows=!0,this.canFocus()&&this.focusGridCell(),this.ignoreSetSelectedRows=!1,this.onCellChangedEnabled=!0},yi.prototype.updatefilterOptions=function(){for(var t=1;t<=this.columnDefnArray.length;t++){var e=this.columnDefnArray[t-1],i=this.callMethodEx("$multifiltermenu",eDoMethodFlags.clientOnly|eDoMethodFlags.noLog,e.omnisGridColumn);if(null==i)e.filtermask=0;else{var s=Number(i);e.filtermask=s,s==wi.FILTER_HIDDEN&&e.col_filter_mainbuton&&e.col_filter_mainbuton.hide()}}},yi.prototype.convertFilterData=function(t,e){var i,s=(null!=e?e:"").toString(),r=!0,n=t.omnisType,o=t.filterex_data;if(null!=o)switch(n){case eOmnisDataTypes.fftCharacter:i=o;break;case eOmnisDataTypes.fftInteger:case eOmnisDataTypes.fftSequence:case eOmnisDataTypes.fftNumber:i=Number(o),s=Number(s),r=!1;break;case eOmnisDataTypes.fftBoolean:i=Boolean(o),s=Boolean(e),r=!1;break;case eOmnisDataTypes.fftDate:var a=this.getDateFormat(t);if(o.length<1)break;try{i=o instanceof omnis_date?o.toJavaScriptDate():Date.parseDate(o,a)}catch(t){}s=null!=e?e:"",r=!1}return{filterdata:i,coldata:s,isText:r,omnisType:n}},yi.prototype.filter=function(t){if(jOmnis.mDesign)return!0;if(this.mSupportsMultiFilter){for(var e=1;e<=this.columnDefnArray.length;e++){var i=this.columnDefnArray[e-1];if(i.filterex_type!=wi.FILTER_NONE){var s=t[i.field],r=this.convertFilterData(i,s),n=r.filterdata,o=r.coldata,a=r.isText,l=r.omnisType;if(i.filterex_type!=wi.FILTER_EMPTY&&i.filterex_type!=wi.FILTER_NOT_EMPTY&&null==n)return!0;switch(i.filterex_type){case wi.FILTER_EQUALS:if(l===eOmnisDataTypes.fftDate){if(o.toString()!==n.toString())return!1}else if(a&&(o=o.toLowerCase(),n=n.toLowerCase()),o!=n)return!1;break;case wi.FILTER_NOT_EQUALS:if(l===eOmnisDataTypes.fftDate){if(o.toString()===n.toString())return!1}else if(a&&(o=o.toLowerCase(),n=n.toLowerCase()),o==n)return!1;break;case wi.FILTER_CONTAINS:if(l===eOmnisDataTypes.fftDate)return!1;if(a&&(o=o.toLowerCase(),n=n.toLowerCase()),-1!=o.toString().indexOf(n.toString()))break;return!1;case wi.FILTER_NOT_CONTAINS:if(l===eOmnisDataTypes.fftDate)return!1;if(a&&(o=o.toLowerCase(),n=n.toLowerCase()),-1==o.toString().indexOf(n.toString()))break;return!1;case wi.FILTER_LESSTHAN:if(o<n)break;return!1;case wi.FILTER_MORETHAN:if(o>n)break;return!1;case wi.FILTER_LESSTHAN_EQUAL:if(o<=n)break;return!1;case wi.FILTER_MORETHAN_EQUAL:if(o>=n)break;return!1;case wi.FILTER_EMPTY:if(o.length<=0)break;return!1;case wi.FILTER_NOT_EMPTY:if(o.length>0)break;return!1}}}return!0}if(this.filtercol>0&&0!=this.filterdata&&this.filtercol<=this.columnDefnArray.length){var h,c,u,d=this.columnDefnArray[this.filtercol-1],p=this.form.getData(this.filterdata);if(d.omnisType==eOmnisDataTypes.fftDate&&"DateCellFormatter"==d.formatter.name){var m,f,g=this.getDateFormat(d),v=t[d.field];v instanceof omnis_date&&(v=v.toJavaScriptDate()),u=null!==(m=null===(f=v)||void 0===f?void 0:f.dateFormat(g,null,omnis_date.getHasTime(t._olr[d.omnisListColumn])))&&void 0!==m?m:""}else u=null!==(h=null===(c=t[d.field])||void 0===c?void 0:c.toString())&&void 0!==h?h:"";if(this.scriptOk){var b=this.callMethodEx("$filtergrid",eDoMethodFlags.clientOnly|eDoMethodFlags.noLog|(this.form.inst.inRequest||jOmnis.overlay?eDoMethodFlags.noOverlay:0),u,p);if(null!=b)return b}if(p&&(p=p.toLowerCase(),-1==u.toLowerCase().indexOf(p)))return!1}return!0};var _i=null,Ei=null;yi.prototype.nextMultiFilterFocus=function(t,e){if(!this.multiFilterTabs)return this.focusGridCell(),1;var i=this.multiFilterTabs.indexOf(t);if(-1!=i){var s=null;if(e)for(;i>0;){if(i--,(r=this.multiFilterTabs[i])&&r.is(":visible")){s=r;break}}else for(;i<this.multiFilterTabCnt;){var r;if(i++,(r=this.multiFilterTabs[i])&&r.is(":visible")){s=r;break}}return s?(s.focus(),1):e?0:(this.focusGridCell(),1)}},yi.prototype.addFilterObject=function(t,e){e?(this.multiFilterTabCnt=1,this.multiFilterTabs=[],this.mFilterInput[0]=t):this.multiFilterTabCnt++,this.multiFilterTabs[this.multiFilterTabCnt-1]=t},yi.prototype.setupInputObject=function(t,e,i,s,r){var n=this.colIndexFromID(s.id),o=this.columnDefnArray[n],a=o.omnisType,l=o.omnisSubtype,h="colfilter_"+e+o.id,c="colfiltertext_"+e+o.id,u="colfilteredit_"+e+o.id,d="colfilterbox_"+e+o.id,p="colfilterbox_inner_"+e+o.id,m="colfilterbox_img_"+e+o.id,f="colfilterbox_focus_"+e+o.id,g=this.getFilterTypeStr(o.id),v=null!=o.filterex_data?o.filterex_data:"",b="";if((a!=eOmnisDataTypes.fftNumber||!o.hasColorPicker)&&o.filtermask!=wi.FILTER_HIDDEN){var y=this.mDisableSystemFocus?"disable-sys-focus":"",C=this.clientElem.style.backgroundColor,_=this.clientElem.style.color,E=this.getBorderColor(this.clientElem),w='style="background:'.concat(C,";color:").concat(_,";border-color:").concat(E,'"');if(a==eOmnisDataTypes.fftCharacter||a==eOmnisDataTypes.fftNumber||a==eOmnisDataTypes.fftSequence)b="<input autocomplete='off' ".concat(w," class='xdropdown_base xdropdown_input_box xdropdown_input omnis-input-frame outlined ").concat(y,"' type='text' style='color:inherit;font-family:inherit;' id='").concat(u,"' aria-labelledby='' tabindex='0'>");else if(a==eOmnisDataTypes.fftInteger)b=o.omnisHasDropListPicker?"<select id='"+u+"' class='xdropdown_base xdropdown_input_box xdropdown_select ' style=';border:none;'></select>":"<input autocomplete='off' ".concat(w," class='xdropdown_base xdropdown_input_box xdropdown_input omnis-input-frame outlined ").concat(y,"' type='number' style='color:inherit;font-family:inherit;' id='").concat(u,"' aria-labelledby='' tabindex='0'>");else if(a==eOmnisDataTypes.fftDate){var k="images/"+(l===eOmnisDataSubTypes.time?"clock":"calendar")+this.form.inst.resSuffix+".png";b="<input autocomplete='off' ".concat(w," class='xdropdown_base xdropdown_input_box xdropdown_date omnis-input-frame outlined ").concat(y,"' type='text' style='color:inherit;font-family:inherit;' id='").concat(u,"' aria-labelledby='' tabindex='0'><img tabindex='0' class='xdropdown_date_img' src='").concat(k,"' id='").concat(m,"'>")}else a==eOmnisDataTypes.fftBoolean&&(b="<div id='".concat(p,"' ").concat(w," class='xdropdown_base xdropdown_input xdropdown-checkbox'><label class='container'><input id='").concat(u,"' type='checkbox' checked=''><span id='").concat(f,"' tabindex='0' class='checkmark'></span></label></div>"));i.append("<div id='".concat(d,"' ").concat(w," class='slick-columnfilterex'><div id='").concat(h,"' ").concat(w," class='xdropdown'><div ").concat(w," class='xdropdown_button omnis-button' tabindex='0' id='").concat(c,"'>").concat(g,"</div>").concat(b,"</div></div>"));var T=$("#"+h),S=$("#"+d),x=$("#"+c),D=this,O=null,A=null;r?D.addFilterObject(x,!0):D.addFilterObject(x,!1);var P=this.getTheme().getColorString(ctrl_pushbutton.getFlatButtonFocusColor(this.form.inst,this.getProperty(eBaseProperties.backcolor),this.getProperty(eBaseProperties.textcolor)));x.attr("role","button").mouseover((function(t){t.target.style.background=P})).mouseout((function(t){t.target.style.background=C})).focus((function(t){t.target.style.background=P})).blur((function(t){t.target.style.background=C})).keyup((function(t){})).keydown({colindex:o.id,filter_butt:x},(function(t){var e=!1,i=OmnisKeyboardHandler.getNormalizedEventKey(t);"Enter"===i||" "===i?D.clickedFilterEx(t):"Tab"===i&&(D.nextMultiFilterFocus(x,t.shiftKey)&&(e=!0),e&&(t.stopPropagation(),t.preventDefault()))})).click({colindex:o.id,filter_butt:x},(function(t){D.clickedFilterEx(t),t.stopPropagation()})),S.click({colindex:o.id,filter_butt:x},(function(t){t.stopPropagation()})),T.click({colindex:o.id,filter_butt:x},(function(t){t.stopPropagation()}));var I=null;if(a==eOmnisDataTypes.fftInteger&&o.omnisHasDropListPicker){I=O=$("#"+u);var L=$("<option> </option>");L.appendTo(O);for(var j=0;j<o.dropListOptions.length;++j)(L=$("<option>"+o.dropListOptions[j]+"</option>")).appendTo(O);v&&(O[0].selectedIndex=v),O.change({colindex:o.id,filter_butt:x},(function(t){D.filterselectobj(s.id,O),t.stopPropagation()})),D.addFilterObject(O,!1),O.keydown({colindex:o.id,filter_butt:O},(function(t){var e=!1;"Tab"===OmnisKeyboardHandler.getNormalizedEventKey(t)&&(D.nextMultiFilterFocus(O,t.shiftKey)&&(e=!0),e&&(t.stopPropagation(),t.preventDefault()))}))}else if(a==eOmnisDataTypes.fftCharacter||a==eOmnisDataTypes.fftNumber||a==eOmnisDataTypes.fftSequence||a==eOmnisDataTypes.fftInteger)I=O=$("#"+u),O&&O.click({colindex:o.id,filter_butt:x},(function(t){D.closeFilterMenu(),t.stopPropagation()})),O&&O.keyup({colindex:o.id,filter_butt:x},(function(t){D.filterExKeyUp(t)})),O&&O.val(v),O&&O.keydown({colindex:o.id,filter_butt:O},(function(t){var e=!1;"Tab"===OmnisKeyboardHandler.getNormalizedEventKey(t)&&(D.nextMultiFilterFocus(O,t.shiftKey)&&(e=!0),e&&(t.stopPropagation(),t.preventDefault()))})),D.addFilterObject(O,!1);else if(a==eOmnisDataTypes.fftBoolean){(O=$("#"+u)).attr("checked",v).click((function(t){t.stopPropagation()})),s.filterex_data=null;var N=$("#"+p);N&&N.change({inputctrl:O[0],colindex:o.id,filter_butt:x},(function(t){D.closeFilterMenu(),t.target=t.data.inputctrl,D.filtercheckBox(t),t.stopPropagation()})),O=$("#"+p),I=$("#"+f),O.keydown({colindex:o.id,filter_butt:x},(function(t){var e=OmnisKeyboardHandler.getNormalizedEventKey(t);if("Enter"===e||" "===e){var i=$("#"+u);i.attr("checked")?i.attr("checked",!1):i.attr("checked",!0),t.target=i[0],D.filtercheckBox(t)}})),D.addFilterObject(I,!1)}else if(a==eOmnisDataTypes.fftDate){I=O=$("#"+u),A=$("#"+m);var B,R=this,M=null,F=function(e){D.closeFilterMenu();var i=new Kt(D.form,O[0],{dateFormat:D.getDateFormat(s),dateFormatType:D.userDefined?s.colDateFormatType:D.mDateFormatType,omnisSubtype:l,initialPickerValue:new Date,disableSystemFocus:D.mDisableSystemFocus,beforeShow:function(){R.calendarOpen=!0;var e=O.val(),r=t.omn_ctrl.getDateFormat(s);null!=r&&e.length&&(M=Date.parseDate(e,r)),M&&M instanceof Date&&!isNaN(M.getTime())?i.setDate(M):(null==B&&(B=t.omn_ctrl.emptyGridRow[o.field]),i.setDate(B))},afterShow:function(){i.sizeChanged();var t=i.mPickerStyle===qt.PICKERSTYLES.calendar?i.clientElem.querySelector("tbody [tabindex='0']"):i.clientElem.querySelector("[tabindex='0']");t&&t.focus()},onClose:function(){R.calendarOpen=!1,i.hide(),i.delete_class_inst(),O.focus()},onSelect:function(e){M=e;var i=t.omn_ctrl.getDateFormat(s),r=r=omnis_date.getHasTime(M);O.val(M.dateFormat(i,null,r)),o.filterex_data=O.val(),R.filternow(o.omnisObject)}});i.elem.style.zIndex=jOmnis.getPopupZIndex(D.form,1),jOmnis.addClass(i.clientElem,"noFocus"),i.elem.firstChild.tabIndex=-1;var r=O[0].getBoundingClientRect();i.elem.style.top=r.top+r.height+"px",i.elem.style.left=r.left+"px",i.show()};if(A&&A.keydown((function(t){"Tab"===OmnisKeyboardHandler.getNormalizedEventKey(t)&&D.nextMultiFilterFocus(A,t.shiftKey)&&(t.stopPropagation(),t.preventDefault())})).keyup((function(t){var e=OmnisKeyboardHandler.getNormalizedEventKey(t);"Enter"!==e&&" "!==e||(t.stopPropagation(),t.preventDefault(),F())})),A&&A.click((function(t){F()})),v){var H=t.omn_ctrl.getDateFormat(o);v instanceof Date?O.val(v.dateFormat(H,null,!1)):O.val(v)}O&&O.keyup({colindex:o.id,filter_butt:x},(function(t){D.filterExKeyUp(t)})),D.addFilterObject(O,!1),A&&D.addFilterObject(A,!1)}o.col_filter_mainbuton=T,o.col_filter_control=O,o.col_filter_control_img=A,o.col_filter_control_focus=I,o.col_filter_button_text=x,o.mask==wi.FILTER_HIDDEN&&T&&T.hide(),o.filterex_type==wi.FILTER_NONE||o.filterex_type==wi.FILTER_EMPTY||o.filterex_type==wi.FILTER_NOT_EMPTY?(O&&O.hide(),A&&A.hide()):(O&&O.show(),A&&A.show())}},yi.prototype.closeFilterMenu=function(t){_i&&(Ei&&document.body.removeChild(Ei),document.body.removeChild(_i),_i=Ei=null)};var wi={FILTER_NONE:0,FILTER_EQUALS:1,FILTER_NOT_EQUALS:2,FILTER_CONTAINS:4,FILTER_NOT_CONTAINS:8,FILTER_LESSTHAN:16,FILTER_MORETHAN:32,FILTER_LESSTHAN_EQUAL:64,FILTER_MORETHAN_EQUAL:128,FILTER_EMPTY:256,FILTER_NOT_EMPTY:512,FILTER_HIDDEN:2147483648},ki=[{type:wi.FILTER_NONE,desc:"ctl_dgrd_filter_none"},{type:wi.FILTER_EQUALS,desc:"ctl_dgrd_filter_equals"},{type:wi.FILTER_NOT_EQUALS,desc:"ctl_dgrd_filter_notequals"},{type:wi.FILTER_CONTAINS,desc:"ctl_dgrd_filter_contains"},{type:wi.FILTER_NOT_CONTAINS,desc:"ctl_dgrd_filter_notcontains"},{type:wi.FILTER_LESSTHAN,desc:"ctl_dgrd_filter_lessthan"},{type:wi.FILTER_MORETHAN,desc:"ctl_dgrd_filter_morethan"},{type:wi.FILTER_LESSTHAN_EQUAL,desc:"ctl_dgrd_filter_lessthanequal"},{type:wi.FILTER_MORETHAN_EQUAL,desc:"ctl_dgrd_filter_morethanequal"},{type:wi.FILTER_EMPTY,desc:"ctl_dgrd_filter_empty"},{type:wi.FILTER_NOT_EMPTY,desc:"ctl_dgrd_filter_notempty"}];function Ti(t,e){switch(t){case a.NE.center:return ui;case a.NE.right:return di;case a.NE.left:return ci;default:return null!=e&&Object.values(a.NE).indexOf(e)>-1?Ti(e):""}}function Si(t,e){return null==t||t===pi?e:t}function xi(){var t,e=this.omnisObject,i=e&&e.userDefined?this:e,s=i.footerType,r=i.footerLabel,n=i.footerNumberFormat,o=i.footerDateFormat,a=i.footerDateFormatCustom,l=i.footerZeroShownEmpty,h=this.footerValue;if(!h&&l||null==h)return"";if(h instanceof omnis_date){var c=omnis_date.getHasTime(h),u=o||e.footerDateFormat||this.colDateFormatType||e.mDateFormatType,d=a||e.footerDateFormatCustom||this.colDateFormatCustom||e.mDateFormatCustom;t=Ai(h,jOmnis.getDateFormat(u,d),c)}else if("number"==typeof h){t=Oi(h,n||e.footerNumberFormat||this.colNumberFormat||e.mNumberFormat,this.omnisSubtype)}else t=h;return!r||s===bi&&"string"==typeof h?t:r.indexOf("%1")>-1?r.replace("%1",t):"".concat(r," ").concat(t)}function Di(t){return t&&t.length?t.reduce((function(t,e){return t+e})):null}function Oi(t,e,i){var s,r;if(e&&e.length){s=!0;try{r=(0,Xe.Z)(e,t)}catch(e){r=t+""}}else r=24!==i?jOmnis.round(t+"",31&i)+"":t+"";return jOmnis.numberToLocaleAndDps(r,24==i||s?null:31&i)}function Ai(t,e,i){return t?(t instanceof omnis_date&&(t=t.toJavaScriptDate()),t.dateFormat(e,null,i)):""}yi.prototype.getLocFilterStr=function(t,e){var i=jGetOmnisString(this.form.inst,ki[t].desc).split(":");return e?i[0]:i[1]},yi.prototype.colIndexFromID=function(t){for(var e=1;e<=this.columnDefnArray.length;e++)if(this.columnDefnArray[e-1].id==t)return e-1;return 0},yi.prototype.filternow=function(t){t.mDisableUpdate=!0,t.mDisableUpdate=!1,t.dataView.refresh(),t.sendFilterEvent(),t.updateAllFooters()},yi.prototype.setFilterDataForCol=function(t,e){this.grid.getColumns();var i=this.colIndexFromID(t),s=this.columnDefnArray[i];s.filterex_data=e,0!=s.filterex_type&&this.filternow(s.omnisObject)},yi.prototype.filterselectobj=function(t,e){Slick.GlobalEditorLock.cancelCurrentEdit(),this.closeFilterMenu(),this.setFilterDataForCol(t,e[0].selectedIndex)},yi.prototype.filtercheckBox=function(t){Slick.GlobalEditorLock.cancelCurrentEdit();$(t.target);"Escape"===OmnisKeyboardHandler.getNormalizedEventKey(t)&&(t.target.value=""),this.closeFilterMenu(),this.setFilterDataForCol(t.data.colindex,t.target.checked)},yi.prototype.filterExKeyUp=function(t){Slick.GlobalEditorLock.cancelCurrentEdit();var e=$(t.target);"Escape"===OmnisKeyboardHandler.getNormalizedEventKey(t)&&(t.target.value=""),this.closeFilterMenu(),this.setFilterDataForCol(t.data.colindex,t.target.value),e.focus()},yi.prototype.buildFilterMenu=function(t,e,i){var s=this.colIndexFromID(e),r=this.columnDefnArray[s],n=r.omnisType,o=r.filtermask,a=r.filterex_type,l=wi.FILTER_NONE;if(o!=wi.FILTER_HIDDEN){if(n==eOmnisDataTypes.fftInteger&&r.omnisHasDropListPicker)var h=wi.FILTER_EQUALS|wi.FILTER_NOT_EQUALS;else h=n==eOmnisDataTypes.fftInteger||n==eOmnisDataTypes.fftSequence||n==eOmnisDataTypes.fftNumber?wi.FILTER_EQUALS|wi.FILTER_NOT_EQUALS|wi.FILTER_LESSTHAN|wi.FILTER_MORETHAN|wi.FILTER_LESSTHAN_EQUAL|wi.FILTER_MORETHAN_EQUAL:n==eOmnisDataTypes.fftBoolean?wi.FILTER_EQUALS|wi.FILTER_NOT_EQUALS:n==eOmnisDataTypes.fftDate?wi.FILTER_EQUALS|wi.FILTER_NOT_EQUALS|wi.FILTER_LESSTHAN|wi.FILTER_MORETHAN|wi.FILTER_LESSTHAN_EQUAL|wi.FILTER_MORETHAN_EQUAL:wi.FILTER_EQUALS|wi.FILTER_NOT_EQUALS|wi.FILTER_CONTAINS|wi.FILTER_NOT_CONTAINS|wi.FILTER_EMPTY|wi.FILTER_NOT_EMPTY;if(0==o)l=wi.FILTER_NONE|h;else{var c=h&o;l=wi.FILTER_NONE|c}for(var u=this,d=ki.length,p=null,m=0,f=(m=null,0),g=0;g<d;g++){var v=a==ki[g].type?"":"";(ki[g].type==wi.FILTER_NONE||l&ki[g].type)&&(f=g)}for(g=0;g<d;g++){v=a==ki[g].type?"":"";if(ki[g].type==wi.FILTER_NONE||l&ki[g].type){var b="dropdown-menuitem-filter-"+ki[g].type,y=this.getLocFilterStr(g,!0);t.append("<div id = '"+b+"' tabindex='0' class='dropdown-menuitem'><div class='filter-col-1'>"+v+"</div><div class='filter-col-2'>"+this.getLocFilterStr(g,!1)+"</div><div class='filter-col-3'>"+y+"</div>");var C=$("#"+b);0==g&&(p=C),g==f&&(m=C);var _=function(t,i,s){var r=null;i.omnisObject.mDisableUpdate=!0,i.filterex_type=s,i.filterex_type==wi.FILTER_NONE&&null!=i.col_filter_control&&(i.filterex_data="",null!=i.col_filter_control&&i.col_filter_control.val("")),i.filterex_type==wi.FILTER_NONE||i.filterex_type==wi.FILTER_EMPTY||i.filterex_type==wi.FILTER_NOT_EMPTY?(i.col_filter_control.hide(),i.col_filter_control_img&&i.col_filter_control_img.hide()):(i.col_filter_control.show(),r=i.col_filter_control_focus,i.col_filter_control_img&&i.col_filter_control_img.show()),t.text(u.getFilterTypeStr(e)),u.closeFilterMenu(),i.omnisType===eOmnisDataTypes.fftBoolean&&(i.filterex_data=Boolean(i.col_filter_control.find("input")[0])),i.omnisObject.mDisableUpdate=!1,i.omnisObject.dataView.refresh(),i.omnisObject.sendFilterEvent(),r?(Slick.GlobalEditorLock.cancelCurrentEdit(),r.focus()):t.focus()};C.focus((function(t){$(t.target).addClass("ui-state-hover")})),C.keydown({button:i,grid:this,col:r,filter:ki[g].type},(function(e){var s=OmnisKeyboardHandler.getNormalizedEventKey(e),n=e.shiftKey&&!e.altKey&&!e.ctrlKey;if("Enter"===s||" "===s)_(i,r,e.data.filter);else if("Escape"===s)u.closeFilterMenu(),e.stopPropagation(),e.preventDefault(),i.focus();else if("ArrowUp"===s||"ArrowDown"===s){var o=t.find($(this));if(o){var a=null;a="ArrowUp"===s?o.prev():o.next(),jQuery.isEmptyObject(a)?(u.closeFilterMenu(),e.stopPropagation(),e.preventDefault(),i.focus()):a&&a.focus()}}else"Tab"===s&&(n&&this==p[0]||!n&&this==m[0])&&(u.closeFilterMenu(),e.stopPropagation(),e.preventDefault(),i.focus())})),C.blur((function(t){$(t.target).removeClass("ui-state-hover"),g==d-1&&u.closeFilterMenu()})),C.on("click",{button:i,grid:this,col:r,filter:ki[g].type},(function(t){_(i,r,t.data.filter)}))}}p&&p.focus()}},yi.prototype.getFilterDataStr=function(t){var e=this.colIndexFromID(t),i=this.columnDefnArray[e];return null!=i.filterex_data?i.filterex_data:""},yi.prototype.getFilterTypeStr=function(t){for(var e=this.colIndexFromID(t),i=this.columnDefnArray[e],s=ki.length,r=0;r<s;r++)if(ki[r].type==i.filterex_type)return this.getLocFilterStr(r,!1);return""},yi.prototype.clickedFilterEx=function(t){this.closeFilterMenu();var e=this.getTheme();_i=t.target.cloneNode(!1);var i=jOmnis.getElemPosRelativeToAncestor(t.target);_i.className="dropdown-content "+e.getCSSClass(),_i.style.left=i.x+"px",_i.style.width="80px";var s=t.target.clientHeight;_i.style.top=i.y+s+"px",_i.style.zIndex=jOmnis.getPopupZIndex(this.form,2),_i.onmousedown=null,_i.onmouseover=null,_i.onclick=null,_i.id="filter-dropdown-menu",_i.style.background=e.getColorString(this.DefaultColors.POPUP_SURFACE),_i.style.color=e.getTextColorString(this.DefaultColors.POPUP_SURFACE_TEXT,this.DefaultColors.POPUP_SURFACE,this.DefaultColors.POPUP_SURFACE_TEXT),document.body.appendChild(_i);var r=$("#filter-dropdown-menu");this.buildFilterMenu(r,t.data.colindex,t.data.filter_butt),jOmnis.touchDevice,_i.style.display="block",(Ei=document.createElement("DIV")).style.position="absolute",Ei.style.top="0px",Ei.style.left="0px",Ei.style.height="100%",Ei.style.width="100%",Ei.style.backgroundColor="clearColor",Ei.style.zIndex=jOmnis.getPopupZIndex(this.form,1),document.body.appendChild(Ei);var n=this;Ei.onclick=function(){n.closeFilterMenu()},t.stopPropagation(),t.preventDefault()},yi.prototype.restoreFilterRow=function(){this.mSupportsMultiFilter&&this.multifilter_on&&(this.multifilter_on=0,this.toggleFilterRow())},yi.prototype.toggleFilterRow=function(t){if(this.mSupportsMultiFilter){this.multifilter_on?this.multifilter_on=0:this.multifilter_on=1,0==this.multifilter_on&&this.closeFilterMenu();for(var e=0;e<this.columnDefnArray.length;e++)this.makeColumnHeaderCss(this.columnDefnArray[e],!0);this.updateStyleSheet();var i="#".concat(this.childIdBase,"grid"),s=$("".concat(i," .slick-header-column.ui-state-default")).height();if(this.multifilter_on){$("".concat(i," .slick-columnfilterex")).show(),$("".concat(i," .slick-header-column.ui-state-default")).height(s+22);var r="".concat(i," .slick-header-column.ui-state-default .slick-column-name div {\n\t\t\t\t\t\t\t\t\t\ttransform: translateY(calc(-50% - ").concat(11,"px));\n\t\t\t\t\t\t\t\t}");this.mMultiFilterCSS=jOmnis.addStyleSheet(r)}else $("".concat(i," .slick-columnfilterex")).hide(),$("".concat(i," .slick-header-column.ui-state-default")).height(s-22),jOmnis.removeStyleSheet(this.mMultiFilterCSS),this.mMultiFilterCSS=null}else if(this.isFilterRowVisible())this.grid.hideSecondaryHeaderRow();else{var n=this.grid.getsecondaryHeaderScroller();if(this.mSupportsMultiFilter?(n[0].style.zIndex="0",this.mFilterArea.hide(),this.mFilterAreaEx[0].show(),this.mFilterAreaEx[1]&&this.mFilterAreaEx[1].show()):(n[0].style.zIndex="2",this.mFilterArea.show(),this.mFilterAreaEx[0].hide(),this.mFilterAreaEx[1]&&this.mFilterAreaEx[1].hide()),this.grid.showSecondaryHeaderRow(),this.setFilterInputValue(),!t)this.mFilterInput.focus()}},yi.prototype.isFilterRowVisible=function(){return this.mSupportsMultiFilter?!!this.multifilter_on:$(this.grid.getSecondaryHeaderRow()).is(":visible")},yi.prototype.setFilterInputValue=function(){var t=this.mFilterInput;0!=this.filterdata&&t.val(this.form.getData(this.filterdata))},yi.prototype.addItem=function(t,e){var i={};if($.extend(i,this.emptyGridRow),i[ri]="id_"+this.lineCount,i._olr=[],$.extend(i,t),jOmnis.getMethod(this,"$initextendrow",-1)){var s=this.callMethodEx("$initextendrow",eDoMethodFlags.clientOnly);if(s&&s.lstData)for(var r=0;r<this.columnDefnArray.length;++r){var n=this.columnDefnArray[r],o=n.omnisListColumn;o!==e.omnisListColumn&&o<s.lstData.length&&(i[n.id]=s.lstData[o])}}for(this.dataView.addItem(i),r=0;r<this.columnDefnArray.length;++r){var a=this.columnDefnArray[r];this.setData(i[a.field],"#1COL",this.lineCount+1,a.omnisListColumn+1)}this.lineCount++,this.updateAllFooters();var l=this;this.canSendEvent(si.evCellValueChanged,!0)&&setTimeout((function(){l.eventParamsAdd("pHorzCell",l.mapColumnToOriginalColumn(e.omnisGridColumn-1)+1),l.eventParamsAdd("pVertCell",l.lineCount),l.sendEvent("evCellValueChanged")}),0)},yi.prototype.onCellChange=function(t,e,i){var s=this.getRealListRow(t)+1,r=this.getColumnDefnFromDisplayedColumnNumber(e),n=r.omnisListColumn+1;if(this.hasValidateMethod){var o=this.getData("#1COL",s,n);this.setData(i[r.field],"#1COL",s,n),this.callMethod("$validate",s,n,this.getData("#1COL",s,n))||this.setData(o,"#1COL",s,n)}else this.setData(i[r.field],"#1COL",s,n);i[r.field]=this.getData("#1COL",s,n),this.dataView.updateItem(i[ri],i),this.updateOneFooterCell(r),this.grid.setSelectedRows([t]),this.onSelectedRowsChanged();var a=this;setTimeout((function(){if(a.canSendEvent(si.evCellValueChanged,!0)){var t=e+1;a.eventParamsAdd("pHorzCell",t),a.eventParamsAdd("pVertCell",s),a.eventParamsAdd("pDataColumnName",a.getDataColumnName(t)),a.sendEvent("evCellValueChanged")}}),0)},yi.prototype.onKeyDown=function(t){if("a"!==OmnisKeyboardHandler.getNormalizedEventKey(t)||(jOmnis.clientPlatform===eClientPlatforms.macOS?!t.metaKey:!t.ctrlKey)||!this.multisel)return!1;if(!this.isEnabled())return!0;var e=[];this.selectedRowIds=[];var i=this.dataView.rows.length;if(!(this.grid.getSelectedRows().length===i))for(var s=0;s<i;s++)e.push(s),this.selectedRowIds.push(this.dataView.rows[s][ri]);return this.grid.setSelectedRows(e),this.updateListSelection(this.grid.getSelectedRows()),this.canSendEvent(eBaseEvent.evClick)&&this.sendClickEvent(0,0),!0},yi.prototype.onSelectedRowsChanged=function(){if(!this.ignoreSetSelectedRows){this.selectedRowIds=[];for(var t=this.grid.getSelectedRows(),e=0,i=t.length;e<i;e++){var s=this.dataView.rows[t[e]];s&&this.selectedRowIds.push(s[ri])}this.updateListSelection(this.grid.getSelectedRows()),this.generateClick=!0}},yi.prototype.generateClickEvent=function(t,e){function i(t,e){return s.gotoCell(t,s.getCurrentCell().cell),s.selectRange(t,e)}var s=this.grid,r=null,n=null==e?s.getCellFromEvent(t):null,o=!0,a=!1;if(this.isEnabled()&&"keydown"===t.type){var l=OmnisKeyboardHandler.getNormalizedEventKey(t),h=t.shiftKey&&!t.altKey&&!t.ctrlKey,c=!t.shiftKey&&!t.altKey&&!t.ctrlKey,u=s.getCurrentCell();if("ArrowUp"===l||"ArrowDown"===l){if(!h&&!c)return;if(h&&!this.multisel)return;if(r=s.getSelectedRows(),h){if(!s.getCellEditor()){var d="ArrowDown"===l?u.row+1:u.row-1;d>=0&&d<this.dataView.rows.length&&(r=i(d,s.getSelectedRows()),n.row=d,this.generateClick=!0,a=!0)}}else this.generateClick=this.keyboardChangesCurrentLine&&n&&n.row!==u.row,o=!1,n=u,a=!0}else if(" "===l){if(s.getCellEditor())return;if(this.multisel&&h){var p=$.grep(s.getSelectedRows(),(function(t){return t!==u.row}));r=i(u.row,p),n.row=u.row}else h||(n=u);this.generateClick=!0}else if("Enter"===l)n=u,this.generateClick=!0;else if(this.multisel&&t.ctrlKey&&t.shiftKey&&("Home"===l||"End"===l)){var m="Home"===l?0:this.dataView.rows.length-1;r=i(m,s.getSelectedRows()),n.row=m,this.generateClick=!0,a=!0,t.preventDefault()}else{if("PageUp"!==l&&"PageDown"!==l&&(!t.ctrlKey||"Home"!==l&&"End"!==l))return;this.generateClick=this.keyboardChangesCurrentLine&&n&&n.row!==u.row,o=!1,n=u,a=!0}}if("click"===t.type||"tap"===t.type){if("SELECT"===t.target.tagName)return;if("INPUT"===t.target.tagName)return}if(this.generateClick){this.generateClick=!1,null==r&&(r=s.getSelectedRows()),this.ignoreSetSelectedRows=!0,o&&null!=n&&!s.getCellEditor()&&(s.gotoCell(n.row,n.cell,!1,this.autoClickedCheckbox),this.autoClickedCheckbox=!1),s.setSelectedRows(r),this.ignoreSetSelectedRows=!1;var f=e;null==f&&(f=this.getRealListRow(null!=n?n.row:-1));var g=f+1;if(this.setData(g,"#L"),this.updateListSelection(r),"hidden"===this.form.serverElem.style.overflowY&&(this.form.serverElem.scrollTop=0),this.canSendEvent(eBaseEvent.evClick)){var v="keydown"===t.type||null==n?0:this.mapColumnToOriginalColumn(n.cell)+1;u&&"keydown"===t.type&&(v=this.mapColumnToOriginalColumn(u.cell)+1),this.pager&&(g=this.pager.pagedRowToAbsoluteRow(g)),this.processClickEvent(v,g,a)}}},yi.prototype.canAllowClickOnNewCell=function(){return!this.lockDuringDoubleClickWaitTime||!this.clickTimer},yi.prototype.processClickEvent=function(t,e,i){if(this.canSendEvent(eBaseEvent.evDoubleClick)&&!i){this.doubleClicked=!1;var s=t!==this.lastClickedHCell||e!==this.lastClickedVCell;this.clickTimer&&(clearTimeout(this.clickTimer),this.clickTimer=null,s&&!this.discardQueuedClicksDuringDoubleClickWaitTime&&this.sendClickEvent(this.lastClickedHCell,this.lastClickedVCell)),this.lastClickedHCell=t,this.lastClickedVCell=e;var r=this;this.clickTimer=setTimeout((function(){r.doubleClicked||r.sendClickEvent(t,e),r.clickTimer=null}),this.doubleClickTime)}else this.sendClickEvent(t,e)},yi.prototype.sendClickEvent=function(t,e){this.eventParamsAdd("pHorzCell",t+""),this.eventParamsAdd("pVertCell",e+""),this.eventParamsAdd("pDataColumnName",this.getDataColumnName(t)),this.sendEvent(eBaseEvent.evClick)},yi.prototype.getDataColumnName=function(t){var e=this.getOmnisColumn(this.columnDefnArray,t);if(!e)return"";var i=e.id,s=e.omnisListColumn;return null!=i?i.startsWith("___C")?"C"+(s+1):i:""},yi.prototype.getRealListRow=function(t){if(null!=t&&t>=0&&t<this.dataView.rows.length){var e=this.dataView.rows[t];return parseInt(e[ri].substr(3))}return-1},yi.prototype.updateListSelection=function(t){if(this.canUpdateListSelection)if(this.multisel){for(var e=[],i=0;i<this.lineCount;++i)e[i]=0;for(i=0;i<t.length;++i)e[this.getRealListRow(t[i])]=1;this.setData(e,"#LSEL_ALL")}else{var s=0;t.length&&(s=this.getRealListRow(t[0])+1),this.setData(s,"#L")}},yi.prototype.onSort=function(t,e){var i,s;this.clientElem.setAttribute("data-sortcol",t.omnisGridColumn+""),this.clientElem.setAttribute("data-sortascending",e?"1":"0"),this.mWillSort=!0;var r=this.getViewport();if(r&&(i=r[0].scrollTop,s=r[0].scrollLeft),this.getClientElem().focus(),r){null!=i&&(r[0].scrollTop=i),null!=s&&(r[0].scrollLeft=s);try{r.scroll()}catch(t){}this.iscroll&&this.iscroll.refresh()}if(this.mWillSort=!1,null==this.callMethodEx("$sortgrid",eDoMethodFlags.clientOnly|eDoMethodFlags.noLog,t.omnisGridColumn,!e)){var n=this.getData("",null,null,null,null,null,!0);if(null!=n){var o=n.lstDef;if(!(null==o||t.omnisListColumn<0||t.omnisListColumn>=o.length)){var a=!1;this.pager&&this.pager.isAttached&&(this.pager.detach(),a=!0);var l=this.dataView.getItems();if(this.multisel)for(var h=n.lstLSEL,c=0;c<this.lineCount;++c)l[c].sel=0!=h[c];else{for(c=0;c<this.lineCount;++c)l[c].sel=!1;0!=n.lstL&&l[n.lstL-1]&&(l[n.lstL-1].sel=!0)}var u=null;switch(o[t.omnisListColumn][1]){case eOmnisDataTypes.fftBoolean:u=oi;break;case eOmnisDataTypes.fftInteger:case eOmnisDataTypes.fftSequence:case eOmnisDataTypes.fftNumber:case eOmnisDataTypes.fftDate:u=ai;break;case eOmnisDataTypes.fftCharacter:t.styledText&&(ei=t.omnisListColumn,u=li)}null==u?this.dataView.fastSort(t.field,e):(ti=t.id,this.dataView.sort(u,e));var d=this.dataView.getItems(),p=[],m=[],f=0;for(c=0;c<this.lineCount;++c){var g=d[c];this.multisel?m[m.length]=g.sel:g.sel&&(f=c+1);var v=g._olr;g[ri]="id_"+c;for(var b=0;b<this.columnDefnArray.length;++b){var y=g[this.columnDefnArray[b].field];this.columnDefnArray[b].omnisType==eOmnisDataTypes.fftDate?v[this.columnDefnArray[b].omnisListColumn]=null!=y?new omnis_date(y):"":this.columnDefnArray[b].styledText||(v[this.columnDefnArray[b].omnisListColumn]=y)}p[p.length]=v}n.lstData=p,this.dataView.refreshIdxById(),this.multisel?n.lstLSEL=m:n.lstL=f;var C=this.form.disableAutomaticUpdates;this.form.disableAutomaticUpdates=!0,this.setData(null),this.form.disableAutomaticUpdates=C,this.deleteChangeRecords(),this.setData(n),this.updateSelection(),this.pager&&a&&this.pager.attach()}}}},yi.prototype.onHeaderClick=function(t,e){var i=this.grid.getEditController();return null!=i&&i.commitCurrentEdit(),"slick-resizable-handle"!==t.target.className&&this.canSendEvent(eBaseEvent.evHeaderClick)&&this.isEnabled()&&(this.eventParamsAdd("pHorzCell",e.omnisGridColumn),this.sendEvent(eBaseEvent.evHeaderClick)),this.iscroll&&this.iscroll.refresh(),!0},yi.prototype.onClick=function(t,e,i){return this.canSendEvent(eBaseEvent.evClick,!0)&&(i=this.mapColumnToOriginalColumn(i),e=this.getRealListRow(e),this.sendClickEvent(i+1,e+1)),!1},yi.prototype.onDblClick=function(t,e,i){if(this.canSendEvent(eBaseEvent.evDoubleClick)&&this.isEnabled()){var s=this.mapColumnToOriginalColumn(i)+1,r=this.getRealListRow(e)+1;if(this.canSendEvent(eBaseEvent.evClick)&&(r!==this.lastClickedVCell||s!==this.lastClickedHCell))return!1;this.doubleClicked=!0,this.clickTimer&&(clearTimeout(this.clickTimer),this.clickTimer=null),this.canSendEvent(eBaseEvent.evClick)&&!this.preventClickOnDoubleClick&&this.sendClickEvent(s,r),this.eventParamsAdd("pHorzCell",s),this.eventParamsAdd("pVertCell",r),this.eventParamsAdd("pDataColumnName",this.getDataColumnName(s)),this.sendEvent(eBaseEvent.evDoubleClick)}return!1},yi.prototype.onContextMenu=function(t,e,i){e=this.getRealListRow(e)+1,i=this.mapColumnToOriginalColumn(i)+1;var s=jOmnis.handleEventPreventDefault(t.originalEvent,!0);return jOmnisMenuHandler.isContextMenuOpen()?s:this.handleContextMenuClick(t,this,e,i)},yi.prototype.doCurrentCellChanged=function(t){var e=this.mapColumnToOriginalColumn(t.cell)+1,i=this.getRealListRow(t.row)+1;this.lastChangedHCell==e&&this.lastChangedVCell==i||(this.lastChangedHCell=e,this.lastChangedVCell=i,this.eventParamsAdd("pHorzCell",e),this.eventParamsAdd("pVertCell",i),this.eventParamsAdd("pDataColumnName",this.getDataColumnName(e)),this.sendEvent(eBaseEvent.evCellChanged))},yi.prototype.onCurrentCellChanged=function(t){if(this.canSendEvent(eBaseEvent.evCellChanged)&&this.onCellChangedEnabled&&this.isEnabled())if(null!=this.mCccCellObject)this.mCccCellObject=t;else{this.mCccCellObject=t;var e=this;setTimeout((function(){t=e.mCccCellObject,e.mCccCellObject=null,e.doCurrentCellChanged(t)}),0)}return!0},yi.prototype.onColumnsReordered=function(){this.rowNumber&&this.rowCtrl.setPropertyChildControls(this.objNumber,ii.displayorder,this.mDisplayOrder.join(","),0,!0);for(var t=this.getData(),e=null!=t?t.lstDef:null,i=this.grid.getColumns(),s=[],r=[],n=0;n<this.columnDefnArray.length;++n)this.columnDefnArray[n].hidden&&r.push(this.columnDefnArray[n].omnisGridColumn);for(n=0;n<i.length;++n)null!=e&&i[n].omnisListColumn>=e.length||s.push(i[n].omnisGridColumn);for(n=0;n<r.length;++n){var o=r[n]-1;if(this.mDisplayOrder)for(var a=0;a<this.mDisplayOrder.length;++a)this.mDisplayOrder[a]===r[n]&&(o=a);s.splice(o,0,r[n])}var l=s.join(",");this.mDisplayOrder=s,this.mAppliedDisplayOrder=l,this.applyDisplayOrder(!1,!0),this.rowNumber&&this.rowCtrl.setPropertyChildControls(this.objNumber,ii.displayorder,this.mDisplayOrder.join(","),this.rowNumber,!0),this.canSendEvent(eBaseEvent.evHeadedListDisplayOrderChanged)&&this.isEnabled()&&(this.eventParamsAdd("pDisplayOrder",l),this.sendEvent(eBaseEvent.evHeadedListDisplayOrderChanged))},yi.prototype.onColumnsResized=function(){for(var t=this.grid.getColumns(),e="",i=1;i<=t.length;++i){""!=e&&(e+=",");for(var s=0;s<t.length;++s)if(t[s].omnisGridColumn==i){if(this.convertToPixels(t[s].omnisWidth)!=t[s].width){var r=this.convertFromPixels(t[s].width);this.mColWidthsArePercentage&&(this.columnDefnArray[s].omnisWidth=r),e+=r}else e+=t[s].omnisWidth;break}}this.rowNumber&&this.rowCtrl.setPropertyChildControls(this.objNumber,ii.columnwidths,e,this.rowNumber,!0),this.canSendEvent(si.evColumnsResized)&&this.isEnabled()&&(this.eventParamsAdd("pColumnWidths",e),this.sendEvent("evColumnsResized"))},yi.prototype.mapColumnToOriginalColumn=function(t){var e=this.grid.getColumns();return e.length>t?e[t].omnisGridColumn-1:-1},yi.prototype.getColumnDefnFromDisplayedColumnNumber=function(t){var e=this.grid.getColumns();if(e.length>t)return this.getOmnisColumn(this.columnDefnArray,e[t].omnisGridColumn)},yi.prototype.onColorEditorClick=function(t,e){if("sp-choose"===t.className)return!0;if("sp-cancel"===t.className)return e.cancelCurrentEdit(),!1;for(;t&&t.parentElement;){if(t.classList&&t.classList.contains("omnis-datagrid-colorpicker"))return!1;t=t.parentElement}e.cancelCurrentEdit()},yi.prototype.onDocumentClick=function(t){var e=this.grid.getEditController();if(null!=e){var i=t.target,s=this.getClientElem(),r=this.grid.getCellEditor();if(r&&r.isColorCellEditor&&r.select.spectrum("isOpen")&&!this.onColorEditorClick(i,e))return;for(;!(null==i||i==s||i.classList&&i.classList.contains("omnis-slick-ltc"));)i=i.parentNode;if(null==i){var n=!1;if(null!=r&&r.isDateCellEditor&&r.calendarOpen){for(i=t.target;null!=i&&(null==i.id||"ui-datepicker-div"!=i.id&&"datepicker"!=i.id.substring(0,10));)i=i.parentNode;n=null!=i}null==r||null!=r.isDateCellEditor&&n||setTimeout((function(){e.commitCurrentEdit()}),0)}}},yi.prototype.onScrollEnd=function(){var t=this.getViewport();t.attr("scrollTop",-this.iscroll.y),t.attr("scrollLeft",-this.iscroll.x)},yi.prototype.makeColumnCss=function(t,e,i,s){var r=s||this.childIdBase+"grid_"+t+"colclass";e.cssCol="."+r+"{",e.cssCol+=null!=e.backColor?"background-color:"+e.backColor+";":"",e.cssCol+=(null!=e.textColor?"color: ".concat(e.textColor,"; --om-tint-color: ").concat(e.textColor,";"):"")+e.textAlign+e.fontStyle+"}\n",e.cssCol+=".selected .".concat(r,", .ctrl-dgrd-row-focused .").concat(r,"{"),e.cssCol+="background-color: transparent; color: inherit;}\n";var n=this.getTheme(),o=n.getColorString(this.DefaultColors.POPUP_SURFACE),a=n.getTextColorString(this.DefaultColors.POPUP_SURFACE_TEXT,this.DefaultColors.POPUP_SURFACE,this.DefaultColors.POPUP_SURFACE_TEXT);e.cssCol+=".".concat(r," option, .").concat(r," option{"),e.cssCol+="background-color:".concat(o,"; color: ").concat(a,";}\n"),e.textAlign!==ui&&e.textAlign!==di||(e.cssCol+="."+r+" > .omnis-checkbox {",e.textAlign===ui?e.cssCol+="justify-content: center;":e.cssCol+="justify-content: flex-end;",e.cssCol+="}\n"),e.cssClass=r+" "+this.cellClassName,i||this.updateStyleSheet()},yi.prototype.makeColumnHeaderCss=function(t,e){var i=this.getColumnHeaderCssClass(t);if(this.columnHeadersJst===this.justify.default)var s=t.colHeaderJst;else s=this.columnHeadersJst;var r="."+i+".slick-header-column.ui-state-default{height: "+(this.getColumnHeaderHeight()-8)+"px;"+this.getCellBorderCSS("right")+"}\n";t.cssColHeader="."+i+"{text-align:"+["left","right","center"][s]+";}\n"+r,e||this.updateStyleSheet()},yi.prototype.getColumnHeaderCssClass=function(t){return this.childIdBase+"grid_"+t.omnisGridColumn+"colheaderclass"},yi.prototype.setHeaderAlignment=function(){var t=this.mLabelElem[0];if(this.headerVisible&&t){var e=t.style;switch(e.textAlign=e.width=e.left=e.right="",this.headerJst){case this.justify.left:e.left=this.hasSecondaryHeader&&0!=this.filterdata?"26px":"6px";break;case this.justify.right:e.right="6px";break;case this.justify.center:e.width="100%",e.textAlign="center"}}},yi.prototype.$addcolorcss=function(t,e,i){var s={};return s.omnisBackColorValue=e+(i<<24),this.setColumnBackColor(s),s.textAlign="",s.fontStyle="",this.makeColumnCss(0,s,!0,t),this.customClasses?this.customClasses+=s.cssCol:this.customClasses=s.cssCol,this.updateStyleSheet(),!0},yi.prototype.$openfilter=function(t){if((t=jOmnis.defaultParameter(t,!0),this.mFilterButton&&this.mFilterButton.is(":visible")&&this.isActive())&&t!==this.isFilterRowVisible())return this.toggleFilterRow(!0),!0;return!1},yi.prototype.buildColumnDefinitions=function(t,e){if(jOmnis.mDesign){var i=this.getClientElem(),s=parseInt(i.getAttribute("data-cols"));t=[];for(var r=["",eOmnisDataTypes.fftCharacter,0,gCliMaxcharlen,0,0],n=1;n<=s;++n)t.push(Array.from(r))}if(e){i=this.getClientElem();this.canResizeColumns="1"==i.getAttribute("data-canresizecolumns"),this.canSortColumns="1"==i.getAttribute("data-cansortcolumns")}this.colCount=0,this.columnDefnArray=[],this.emptyGridRow={},this.sortColumns=0;var o="transparent";this.userDefined?this.buildUserDefinedColumns(t,o):this.buildColumnDefinitionsFromList(t,o),this.mAppliedDisplayOrder="",this.applyDisplayOrder(!1),this.applySortProperties(),this.listDefn=t.toString(),this.applyColumnPropertyChanges()},yi.prototype.findDataCol=function(t,e){var i=null;if(jOmnis.isInteger(t))i=parseInt(t);else for(var s=0;s<e.length;++s)if(t==e[s][0]){i=s+1;break}return i},yi.prototype.getPrevColumns=function(){return this.grid&&(this.prevColumns=this.grid.getColumns()),this.prevColumns},yi.prototype.buildUserDefinedColumns=function(t,e){for(var i,s,r,n=this.getClientElem(),l=parseInt(n.getAttribute("data-cols")),h=this.getPrevColumns(),c=1;c<=l;++c){var u=this.getOmnisColumn(h,c);if(u||(null==(s=n.getAttribute("data-col"+c))?((u={}).omnisListColumn=c-1,u.name=jOmnis.mDesign?"":"col"+c,u.omnisWidth=this.mColWidthsArePercentage?25:100,u.width=this.convertToPixels(u.omnisWidth),u.omnisResizable=this.canResizeColumns,u.resizable=u.omnisResizable,u.minWidth=0,u.omnisMinWidth=0,u.textAlign="",u.fontStyle="",u.omnisFontStyle=0,u.omnisFontSize=this.getProperty(eBaseProperties.fontsize),u.backColor="transparent",u.omnisBackColorValue={backColor:o.JT,backAlpha:255},u.omnisEditable=this.options.editable,u.omnisHasDropListPicker=!1,u.hasColorPicker=!1,u.omnisPopupTextEditor=!1,u.styledText=!1,u.hasColumnFormat=!1,u.colDateFormatType=0,u.colDateFormatCustom="",u.colNumberFormat="",u.omnisSortable=this.canSortColumns,u.sortable=this.canSortColumns,u.hasCustomFormat=!1,u.colAllowNullDateInput=!1,u.hidden=!1,u.zeroshownempty=0,u.filterex_type=0,u.col_filter_control=null,u.col_filter_control_img=null,u.filtermask=0,u.colHeaderJst=yi.prototype.justify.left,u.colEditDateText=!1,u.colDatePickerMode=0,u.colDatePickerPopupStyle=0,u.footerType=0,u.footerLabel="",u.footerNumberFormat=null,u.footerDateFormat=0,u.footerDateFormatCustom=null,u.footerZeroShownEmpty=!1,u.footerBackColor=o.JT,u.footerBackAlpha=255,u.footerTextColor=o.JT,u.footerFontStyle=0,u.footerJst=3):r=s.split(",")),++this.colCount,u)i=u.omnisListColumn;else{var d=r[0];if((i=jOmnis.mDesign?c:this.findDataCol(d,t))<1||i>t.length){this.doneAlert||(jOmnis.inAppWrapper()||(jOmnis.log("Warning: Control "+this.objName+": data does not have data column for grid column "+c),this.missingDataCols||(this.missingDataCols=[]),this.missingDataCols.push(c)),this.doneAlert=!0);continue}--i}var p={};p.omnisListColumn=i,p.omnisGridColumn=c;var m=this.getColumnNameFromDefn(t,i);if(p.id=m,u)p.toolTip=u.toolTip,p.name=u.name,p.omnisWidth=u.omnisWidth,p.width=u.width,p.omnisResizable=u.omnisResizable;else{var f=this.form.stringTable?this.form.stringTable.translateText(r[1]):r[1];p.toolTip=f,p.name=jOmnis.escapeHTML(f),p.omnisWidth=parseInt(r[2]),p.width=this.convertToPixels(p.omnisWidth),p.omnisResizable=1==parseInt(r[3])}if(p.field=m,this.canResizeColumns&&p.omnisResizable?u?(p.omnisMinWidth=u.omnisMinWidth,p.minWidth=u.minWidth):(p.omnisMinWidth=parseInt(r[4]),p.minWidth=this.convertToPixels(parseInt(p.omnisMinWidth))):p.resizable=!1,u){p.textColor=u.textColor,p.omnisTextColorValue=u.omnisTextColorValue,p.textAlign=u.textAlign,p.fontStyle=u.fontStyle,p.omnisFontStyle=u.omnisFontStyle,p.omnisFontSize=u.omnisFontSize,p.backColor=u.backColor;var g=u.omnisBackColorValue,v=g.backColor,b=g.backAlpha;p.omnisBackColorValue={backColor:v,backAlpha:b},p.filterex_type=u.filterex_type,p.col_filter_control=u.col_filter_control,p.col_filter_control_img=u.col_filter_control_img,p.filtermask=u.filtermask}else{p.filterex_type=0,p.col_filter_control=null,p.col_filter_control_img=null,p.filtermask=0,p.textColor=null,p.textAlign="",p.fontStyle="",p.omnisFontSize=this.getProperty(eBaseProperties.fontsize),p.backColor=e;var y=r[8].split(";");if(p.omnisBackColorValue={backColor:+y[0],backAlpha:+y[1]},this.setColumnBackColor(p),p.omnisTextColorValue=+r[9],p.omnisTextColorValue!==o.JT&&(p.textColor=this.getTheme().getTextColorString(p.omnisTextColorValue,p.omnisBackColorValue.backColor,this.DefaultColors.text)),null!=r[10]&&0!=r[10]&&this.setColumnAlign(p,+r[10],a.NE.left),null!=r[11]&&0!=r[11]){var C=r[11];this.setFontStyle(p,C)}}this.makeColumnCss(c,p,!0),u?(p.omnisEditable=u.omnisEditable,p.hasColorPicker=u.hasColorPicker,p.omnisHasDropListPicker=u.omnisHasDropListPicker,p.omnisPickerName=u.omnisPickerName,p.omnisPopupTextEditor=u.omnisPopupTextEditor,p.styledText=u.styledText,p.hasColumnFormat=u.hasColumnFormat,p.colDateFormatType=u.colDateFormatType,p.colDateFormatCustom=u.colDateFormatCustom,p.colNumberFormat=u.colNumberFormat,p.hasCustomFormat=u.hasCustomFormat,p.colAllowNullDateInput=u.colAllowNullDateInput,p.hidden=u.hidden,p.zeroshownempty=u.zeroshownempty,p.filterex_type=u.filterex_type,p.col_filter_control=u.col_filter_control,p.col_filter_control_img=u.col_filter_control_img,p.filtermask=u.filtermask,p.colHeaderJst=u.colHeaderJst,p.colEditDateText=u.colEditDateText,p.colDatePickerMode=u.colDatePickerMode,p.colDatePickerPopupStyle=u.colDatePickerPopupStyle,p.footerType=u.footerType,p.footerLabel=u.footerLabel,p.footerNumberFormat=u.footerNumberFormat,p.footerDateFormat=u.footerDateFormat,p.footerDateFormatCustom=u.footerDateFormatCustom,p.footerZeroShownEmpty=u.footerZeroShownEmpty,p.footerBackColor=u.footerBackColor,p.footerBackAlpha=u.footerBackAlpha,p.footerTextColor=u.footerTextColor,p.footerFontStyle=u.footerFontStyle,p.footerJst=u.footerJst):(p.omnisEditable=1==r[5],p.hasColorPicker=null!=r[12]&&4==r[12],p.omnisHasDropListPicker=null!=r[12]&&1==r[12],p.hasCustomFormat=null!=r[12]&&3==r[12],p.omnisPickerName=null!=r[13]&&r[13].length>0?r[13]:null,p.omnisPopupTextEditor=1==r[6],p.styledText=null!=r[14]&&1==r[14],p.hasColumnFormat=null!=r[15]&&1==r[15],p.colDateFormatType=null!=r[16]?1*r[16]:0,p.colDateFormatCustom=r[17],p.colNumberFormat=r[18],p.colAllowNullDateInput="1"===r[19],p.hidden="1"===r[20],p.zeroshownempty="1"===r[21],p.filterex_type=0,p.col_filter_control=null,p.col_filter_control_img=null,p.filtermask=0,p.colHeaderJst=null!=r[22]?+r[22]:0,p.colEditDateText=1==+r[23],p.colDatePickerMode=+r[24],p.colDatePickerPopupStyle=+r[25],p.footerType=+r[26],p.footerLabel=r[27],p.footerNumberFormat=r[28],p.footerDateFormat=+r[29],p.footerDateFormatCustom=r[30],p.footerZeroShownEmpty=!!+r[31],p.footerBackColor=+r[32],p.footerBackAlpha=+r[33],p.footerTextColor=+r[34],p.footerFontStyle=+r[35],p.footerJst=+r[36]),this.setupColumnEditingAndFormatting(p,t),this.makeColumnHeaderCss(p,!0),this.makeColumnFooterCss(p,!0),p.omnisSortable=u?u.omnisSortable:1==parseInt(r[7]),p.sortable=this.canSortColumns&&p.omnisSortable,p.sortable&&this.sortColumns++,p.getFooterText=xi,this.columnDefnArray[this.columnDefnArray.length]=p}},yi.prototype.buildColumnDefinitionsFromList=function(t,e){for(var i=this.getClientElem(),s=i.getAttribute("data-coltitles").split(","),r=i.getAttribute("data-colwidths").split(","),n=parseInt(i.getAttribute("data-cols")),a=this.grid?this.grid.getColumns():null,l=1;l<=n;++l){++this.colCount;var h={},c=l-1,u=this.getOmnisColumn(a,l);h.textColor=null,h.textAlign="",h.fontStyle="",h.omnisFontSize=this.getProperty(eBaseProperties.fontsize),h.backColor=e,h.omnisBackColorValue={backColor:o.JT,backAlpha:255},h.omnisListColumn=c,h.omnisGridColumn=l;var d=this.getColumnNameFromDefn(t,c);h.id=d,h.toolTip=u?u.toolTip:c<s.length?s[c]:t.length>c?t[c][0]:null,h.name=u?u.name:jOmnis.escapeHTML(h.toolTip),h.field=d,u?(h.omnisWidth=u.omnisWidth,h.width=u.width):c<r.length?(h.omnisWidth=parseInt(r[c]),h.width=this.convertToPixels(h.omnisWidth)):(h.omnisWidth=this.mColWidthsArePercentage?25:100,h.width=this.convertToPixels(h.omnisWidth)),h.omnisResizable=!0,h.resizable=this.canResizeColumns,h.omnisMinWidth=0,h.minWidth=0,h.omnisEditable=!0,h.omnisHasDropListPicker=!1,h.hasColorPicker=!1,h.omnisPickerName=null,h.omnisPopupTextEditor=!1,h.styledText=!1,h.hasCustomFormat=!1,this.setupColumnEditingAndFormatting(h,t),h.omnisSortable=!0,h.sortable=this.canSortColumns,h.sortable&&this.sortColumns++,this.makeColumnCss(l,h,!0),h.colHeaderJst=this.justify.left,this.makeColumnHeaderCss(h,!0),h.cssColFooter="",h.colEditDateText=!1,h.colDatePickerMode=0,h.colDatePickerPopupStyle=0,h.hidden=!!this.hiddenColumns&&this.hiddenColumns[l+""],h.getFooterText=xi,this.columnDefnArray[this.columnDefnArray.length]=h}},yi.prototype.setColumnBackColor=function(t){t.omnisBackColorValue&&t.omnisBackColorValue.backColor?t.backColor=this.getTheme().getColorString(t.omnisBackColorValue.backColor,this.DefaultColors.COLUMN_BACKGROUND,t.omnisBackColorValue.backAlpha/255):(t.backColor=this.getTheme().getColorString(16777215&t.omnisBackColorValue),0!=(4278190080&t.omnisBackColorValue)&&(t.backColor=t.backColor.replace("rgb","rgba"),t.backColor=t.backColor.replace(")",","+(t.omnisBackColorValue>>24&255)/255+")")))},yi.prototype.setFontStyle=function(t,e){t.omnisFontStyle=e;var i=t.fontStyle;return 0==e?(t.fontStyle="",i):(e&a.g.bold&&(t.fontStyle="font-weight:bold;"),e&a.g.italic&&(t.fontStyle+="font-style:italic;"),e&(a.g.underline|a.g.linethrough)&&(t.fontStyle+="text-decoration:",t.fontStyle+=jOmnis.fontStyleToTextDecoration(e),t.fontStyle+=";"),i)},yi.prototype.setColumnAlign=function(t,e,i){var s=t.textAlign;return t.textAlign=Ti(e,i),s},yi.prototype.setupColumnEditingAndFormatting=function(t,e){var i=t.omnisListColumn,s=!1;null==e&&(e=this.getData().lstDef,s=!0);var r=this.setColumnEditable(t);if(t.omnisType=eOmnisDataTypes.fftNone,t.omnisSubtype=0,t.omnisSublen=0,t.editor=null,t.formatter=null,t.reallyInt=!1,i<e.length)switch("bool"==t.colNumberFormat&&e[i][1]==eOmnisDataTypes.fftInteger?(t.omnisType=eOmnisDataTypes.fftBoolean,t.omnisSubtype=0,t.omnisSublen=0,t.reallyInt=!0):(t.omnisType=e[i][1],t.omnisSubtype=e[i][2],t.omnisSublen=e[i][3]),t.omnisObject=this,t.omnisType){case eOmnisDataTypes.fftBoolean:r&&(t.editor=YesNoCheckboxCellEditor),t.formatter=t.hasCustomFormat&&this.scriptOk?CustomCellFormatter:BoolCellFormatter,this.emptyGridRow[t.field]=!1;break;case eOmnisDataTypes.fftInteger:case eOmnisDataTypes.fftSequence:if(t.dropListOptions=null,t.formatter=t.hasCustomFormat&&this.scriptOk?CustomCellFormatter:NumberCellFormatter,t.omnisHasDropListPicker&&null!=t.omnisPickerName){t.dropListOptions=[];var n=this.form.getDataIndex(t.omnisPickerName,this,!1);if(n)for(var o=this.form.getData(n),a=o.lstData.length,l=1;l<=a;++l)t.dropListOptions.push(o.lstData[l-1][0]);t.formatter=DropListPickerFormatter}t.hasColorPicker&&(t.formatter=ColorCellFormatter),r&&(t.hasColorPicker?t.editor=ColorCellEditor:null!=t.dropListOptions?t.editor=DropListPickerEditor:t.editor=IntegerCellEditor),this.emptyGridRow[t.field]=0;break;case eOmnisDataTypes.fftNumber:r&&(t.editor=NumberCellEditor),this.emptyGridRow[t.field]=0,t.formatter=t.hasCustomFormat&&this.scriptOk?CustomCellFormatter:NumberCellFormatter,t.hasColorPicker&&(t.editor=ColorCellEditor,t.formatter=ColorCellFormatter);break;case eOmnisDataTypes.fftDate:r&&(t.editor=DateCellEditor),t.formatter=t.hasCustomFormat&&this.scriptOk?CustomCellFormatter:DateCellFormatter,this.emptyGridRow[t.field]=t.colAllowNullDateInput?null:new Date;break;default:r&&(t.editor=t.omnisPopupTextEditor?LongTextCellEditor:TextCellEditor),this.emptyGridRow[t.field]="",t.hasCustomFormat&&this.scriptOk?t.formatter=CustomCellFormatter:t.formatter=TextCellFormatter}s&&this.queueSetColumns()},yi.prototype.updateSizeAndSortForColumns=function(){this.sortColumns=0;for(var t=0;t<this.columnDefnArray.length;++t)this.columnDefnArray[t].resizable=this.canResizeColumns&&this.columnDefnArray[t].omnisResizable,this.columnDefnArray[t].sortable=this.canSortColumns&&this.columnDefnArray[t].omnisSortable,this.columnDefnArray[t].sortable&&this.sortColumns++;this.queueSetColumns()},yi.prototype.setColumnEditable=function(t){t.unselectable=!1,t.cannotTriggerInsert=!1,t.behavior=null;var e=this.options.editable&&t.omnisEditable;return this.isActive()?e||(t.cannotTriggerInsert=!0,t.behavior="select"):t.unselectable=!0,e},yi.prototype.setColumns=function(t){t=jOmnis.defaultParameter(t,!1),this.onCellChangedEnabled=!1;for(var e=this.grid.getColumns(),i=0;i<e.length;++i){if(!t&&!this.newCellWidthColumns[this.columnDefnArray[i].omnisGridColumn+""]){var s=this.getOmnisColumn(this.columnDefnArray,e[i].omnisGridColumn);s.width=e[i].width,s.omnisWidth=e[i].omnisWidth}this.columnDefnArray[i].currentWidth=0}this.hiddenColumns={};for(var r=0;r<this.columnDefnArray.length;r++){var n=this.columnDefnArray[r];this.hiddenColumns[n.omnisGridColumn+""]=!!n.hidden}this.newCellWidthColumns={};var o=this.saveFocus();this.grid.setColumns(this.columnDefnArray),o&&this.restoreFocus(),this.onCellChangedEnabled=!0,jOmnis.mDesign&&this.userDefined&&this.doHiliteSelectedItem(this.currentColumnNumber,!0)},yi.prototype.setColumnNames=function(t){for(var e=null!==t?t.split(","):[],i=0;i<this.columnDefnArray.length;++i){var s=this.getOmnisColumn(this.columnDefnArray,i+1);null!=s&&(s.toolTip=i<e.length?e[i]:"",s.name=jOmnis.escapeHTML(s.toolTip))}this.queueSetColumns()},yi.prototype.setColumnWidths=function(t){for(var e=t.split(","),i=0;i<this.columnDefnArray.length;++i)if(i<e.length){var s=this.getOmnisColumn(this.columnDefnArray,i+1);s&&(s.omnisWidth=parseInt(e[i]),s.width=this.convertToPixels(s.omnisWidth))}this.setColumns(!0)},yi.prototype.setHeaderText=function(t){this.mLabelElem[0].innerHTML=jOmnis.escapeHTML(t)},yi.prototype.setCellCss=function(t){this.cellClassName=this.childIdBase+"grid_cellclass";var e=".".concat(this.getFooterCellCssClass(),".slick-footerrow-column.ui-state-default"),i=this.getCellBorderCSS("right"),s="".concat(e," { ").concat(i,"}\n");this.cssCell="."+this.cellClassName+"{"+i+this.getCellBorderCSS("bottom")+"}\n"+this.allChildSelector()+".slick-header-column-sorted{font-style:normal;}\n"+s,t||this.updateStyleSheet()},yi.prototype.setFooterCss=function(t){var e=this.getTheme(),i=this.footerBackColor===o.JT?this.themeableData.backgroundColor:this.footerBackColor,s="background-color:".concat(e.getColorString(i,this.DefaultColors.BACKGROUND,this.footerBackAlpha/255),";"),r=this.footerTextColor===o.JT?this.themeableData.color:this.footerTextColor,n="color:".concat(e.getTextColorString(r,this.resolveDefaultColor(i,hi.BACKGROUND),this.DefaultColors[hi.TEXT]),";"),l=jOmnis.getCssFontStyle(this.footerFontStyle),h=Ti(this.footerJst,a.NE.left);this.cssFooter=".".concat(this.getFooterCellCssClass()," {").concat(s).concat(n).concat(l).concat(h,"}"),t||this.updateStyleSheet()},yi.prototype.makeColumnFooterCss=function(t,e){var i=this.getTheme(),s=null==t.footerBackColor||t.footerBackColor===o.JT?"":"background-color: ".concat(i.getColorString(t.footerBackColor,null,t.footerBackAlpha/255),";");if(!s&&this.footerBackAlpha!==t.footerBackAlpha){var r=this.footerBackColor===o.JT?this.themeableData.backgroundColor:this.footerBackColor;s="background-color:".concat(i.getColorString(r,this.DefaultColors.BACKGROUND,t.footerBackAlpha/255),";")}var n=t.footerBackColor===o.JT?this.footerBackColor===o.JT?this.themeableData.backgroundColor:this.footerBackColor:t.footerBackColor,a=null==t.footerTextColor||t.footerTextColor===o.JT&&t.footerBackColor===o.JT?"":"color: ".concat(i.getTextColorString(t.footerTextColor,this.resolveDefaultColor(n,hi.BACKGROUND),this.DefaultColors[hi.TEXT]),";"),l=jOmnis.getCssFontStyle(t.footerFontStyle),h=Ti(t.footerJst);t.cssColFooter=".".concat(this.getFooterCellCssClass(),".c").concat(t.omnisListColumn," {\n\t\t").concat(s,"\n\t\t").concat(a,";\n\t\t").concat(l,"\n\t\t").concat(h,"\n\t\t}"),e||this.updateStyleSheet()},yi.prototype.getFooterCellCssClass=function(){return this.childIdBase+"grid_footercellclass"},yi.prototype.getCellBorderCSS=function(t){t=t?t+"-":"";var e=this.gridCellBordersVisible?this.getTheme().getColorString(this.gridCellBordersColor,this.DefaultColors.GRID_LINES):"transparent",i=this.gridCellBordersDotted?"dotted":"solid";return"border-".concat(t,"color: ").concat(e,";border-").concat(t,"style: ").concat(i,";")},yi.prototype.setRowCss=function(t){var e=this.getTheme(),i=this.allChildSelector()+".odd {background:"+e.getColorString(this.evenRowColorValue,this.DefaultColors.EVEN_ROW)+";}\n",s="",r="",n=e.getTextColorString(this.selectedLineTextColorValue,this.selectedLineColorValue,this.DefaultColors.SELECTED_LINE_TEXT),o=e.getColorString(this.selectedLineColorValue,this.DefaultColors.SELECTED_LINE),a="background:".concat(o,";color:").concat(n,";--om-tint-color:").concat(n,";");this.hideSelection?r=".slick-row.selected {z-index:auto;}\n":s=this.allChildSelector()+".slick-row.selected{"+a+"}\n",this.cssRow=s+i+r,this.cssFilterMenuSelection=".dropdown-content .dropdown-menuitem:hover, .dropdown-content .dropdown-menuitem:focus{".concat(a,"}\n"),t||this.updateStyleSheet()},yi.prototype.setHeaderCss=function(t){var e=this.allChildSelector(),i="".concat(e,".ctrl-dgrd-header"),s=this.getCellBorderCSS("bottom"),r="min-height:".concat(this.getColumnHeaderHeight(),"px;");this.cssHeader="".concat(i," {").concat(s,"}\n ").concat(i," label {font-weight:").concat(this.boldHeader?"bold":"normal",";}\n"),this.cssHeaderSecondary="".concat(e,".slick-header-secondary.ui-state-default {").concat(s,"}\n"),this.cssColumnHeaderRow="".concat(e,".slick-header.ui-state-default{").concat(s,"}\n ").concat(e,".slick-header.ui-state-default .slick-header-columns{").concat(r,"}\n"),t||this.updateStyleSheet()},yi.prototype.allChildSelector=function(){return"#"+this.getClientElem().id+" *"},yi.prototype.setFilterAndHeaderProperties=function(){if(this.filterDataName&&this.filterDataName.length>0?this.filterdata=this.form.getDataIndex(this.filterDataName,this,!1):this.filterdata=0,this.headerVisible){var t=this.getHeaderHeight();this.mHeaderElem.css("height",t).css("display",""),this.mFilterButton.css("display",this.hasSecondaryHeader&&0!=this.filterdata?"":"none"),this.mLabelElem.css("position","absolute").css("height",t).css("top",t>this.mFontHeight?(t-this.mFontHeight)/2:0),this.headerJst===this.justify.left&&this.mLabelElem.css("left",this.hasSecondaryHeader&&0!=this.filterdata?26:16),this.mFilterButton.css("position","absolute").css("width",t>16?16:t).css("height",t>16?16:t).css("top",t>16?(t-16)/2:0).css("margin",0)}else this.mHeaderElem.css("display","none");if(this.mGridElem){var e=this.getProperty(eBaseProperties.fontsize);this.mGridElem[0].querySelectorAll(".slick-sort-indicator").forEach((function(t){jIcons.replaceOrAddToElem(t.parentElement,"images/south.svg?",null,{width:e,height:e,viewBox:"0 0 24 24"})}));var i=e+3,s="#".concat(this.childIdBase,"grid .slick-header-column-sorted.ui-state-default .slick-column-name div {\n\t\t\t\t\t\t\t\twidth: calc(100% - ").concat(i,"px);\n\t\t\t\t\t\t\t\t}");this.maxColumnHeaderTextWidthStyle&&jOmnis.removeStyleSheet(this.maxColumnHeaderTextWidthStyle),this.maxColumnHeaderTextWidthStyle=jOmnis.addStyleSheet(s)}},yi.prototype.getHeaderHeight=function(){return 0==this.headerHeight?this.options.rowHeight:this.headerHeight},yi.prototype.setFilterAreaOptions=function(){this.options.secondaryHeaderRowHeight=0,this.hasSecondaryHeader&&this.headerVisible&&(this.options.secondaryHeaderRowHeight=this.secondaryHeaderRowHeight,0==this.options.secondaryHeaderRowHeight&&(this.options.secondaryHeaderRowHeight=null))},yi.prototype.applySortProperties=function(){if(null!=this.grid){var t=this.getClientElem(),e=parseInt(t.getAttribute("data-sortcol"));e>0&&e<=this.columnDefnArray.length&&this.columnDefnArray[e-1].sortable&&this.grid.setSortColumn(this.columnDefnArray[e-1].id,"1"==t.getAttribute("data-sortascending"))}},yi.prototype.getColumnNameFromDefn=function(t,e){if(e>=t.length)return"";var i=t[e][0];return null!=i&&""!=i||(i="___C"+e+"_"+ni++),i},yi.prototype.updateStyleSheet=function(){this.mStyleSheet&&jOmnis.removeStyleSheet(this.mStyleSheet);var t=this.cssColHdr+this.cssCell+this.cssRow+this.cssHeader+this.cssColumnHeaderRow+this.cssHeaderSecondary+this.cssFilterMenuSelection+this.cssFooter;this.customClasses&&(t+=this.customClasses);for(var e=0;e<this.columnDefnArray.length;++e)t+=this.columnDefnArray[e].cssCol+this.columnDefnArray[e].cssColHeader+this.columnDefnArray[e].cssColFooter;if(this.mSetLineHeight){var i="#".concat(this.getClientElem().id);t+=i+" .slick-cell {align-items:center;}",t+=i+" .slick-cell > .omnis-checkbox {align-items:center}",t+="".concat(i," .").concat(this.getFooterCellCssClass()," {align-items:center;}")}var s=this.getTheme();this.mHiliteLine&&(t=this.addHiliteLineStyle(t,s.getColorString(this.selectedLineColorValue,this.DefaultColors.SELECTED_LINE))),this.hiliteFocusedCell&&this.cellHiliteColor&&(t+="#"+this.getClientElem().id+" .slick-cell:focus {border:"+s.getColorString(this.cellHiliteColor,this.DefaultColors.CELL_HILITE)+" 1px solid}"),this.mStyleSheet=jOmnis.addStyleSheet(t),this.setStylesChanged(!0)},yi.prototype.styleSheetsUpdated=function(){this.getStylesChanged()&&this.grid&&this.grid.resizeCanvas(),this.setStylesChanged(!1)},yi.prototype.setStylesChanged=function(t){this.stylesChanged=t,this.registeredForStyleUpdates||(jOmnis.registerStyleSheetObject(this),this.registeredForStyleUpdates=!0)},yi.prototype.getStylesChanged=function(){return this.stylesChanged},yi.prototype.getColumnHeaderHeight=function(){return this.columnHeaderHeight||this.rowHeight||25},yi.prototype.complexGridRerendered=function(){this.updateStyleSheet()},yi.prototype.setDisplayOrder=function(t){if(null!=t&&0!=t.length){var e=t.split(","),i=!1;if(e.length==this.colCount){for(var s=0,r=1;r<=this.colCount;++r)for(var n=0;n<this.colCount;++n)if(e[n]==r){s++;break}i=s==this.colCount}if(i){i=!1;for(var o=1;o<=e.length;++o)if(e[o-1]!=o){i=!0;break}}this.mDisplayOrder=i?e:[]}else this.mDisplayOrder=[]},yi.prototype.applyDisplayOrder=function(t,e){if((e=jOmnis.defaultParameter(e,!1))||""!=this.mAppliedDisplayOrder||0!=this.mDisplayOrder.length){var i=this.mDisplayOrder;if(0==this.mDisplayOrder.length)for(var s=1;s<=this.colCount;++s)i.push(s);var r=i.join(",");if(e||r!=this.mAppliedDisplayOrder){var n=[];for(s=0;s<this.mDisplayOrder.length;++s)for(var o=0;o<this.columnDefnArray.length;++o)if(this.columnDefnArray[o].omnisGridColumn==this.mDisplayOrder[s]){n.push(this.columnDefnArray[o]);break}this.columnDefnArray=n,t&&(this.onCellChangedEnabled=!1,this.grid.setColumns(this.columnDefnArray),this.onCellChangedEnabled=!0),this.mAppliedDisplayOrder=r}}},yi.prototype.getOmnisColumn=function(t,e){if(t&&t.length)for(var i=0;i<t.length;++i)if(t[i].omnisGridColumn==e)return t[i];return null},yi.prototype.getColumnFromListColNumber=function(t,e){if(t&&t.length)for(var i=0;i<t.length;++i)if(t[i].omnisListColumn==e)return t[i];return null},yi.prototype.applyPropertyChanges=function(){if(this.updateFrozenColumns){this.updateFrozenColumns=!1,this.prevColumns=this.grid.getColumns(),this.destroyGrid(),this.buildInitialGridPart1(!0),this.buildInitialGridPart2();try{this.setColumns()}catch(t){throw new Error("$frozencolumns exceeds number of displayed columns")}this.setScrollChangeTimer()}else{this.mDesignColsChanged=!1;var t=this.getData();if(!(this.columnDefnArray.length||t&&t.lstDef)){for(var e=this.getClientElem(),i=parseInt(e.getAttribute("data-cols")),s=[],r=1;r<=i;++r)s.push(["C"+r,eOmnisDataTypes.fftCharacter,0,1e8,r,0]);this.doUpdateCtrl(s),this.dummyListDefn=s}var n=this;this.mSetInitialCell&&(this.mSetInitialCell=!1,setTimeout((function(){n.setInitialCell()}),0)),this.mDataViewRefreshQueued&&(this.mDataViewRefreshQueued=!1,this.dataView.refresh()),this.mSetColsQueued&&(this.setColumns(),this.mSetColsQueued=!1),this.mUpdateQueued&&(this.doUpdate(!1),this.mUpdateQueued=!1),this.mUpdateFooterCss&&(this.setFooterCss(!1),this.mUpdateFooterCss=!1),this.mUpdateAllFooters?(this.updateAllFooters(),this.mUpdateAllFooters=!1):this.mUpdateOneFooterCellQueue&&this.mUpdateOneFooterCellQueue.size>0&&(this.mUpdateOneFooterCellQueue.forEach((function(t){t.valueRequiresUpdate&&(n.updateOneFooterCell(t,!0,t.sendFooterUpdatedEvent),t.valueRequiresUpdate=!1,t.sendFooterUpdatedEvent=!1),t.cssRequiresUpdate&&(n.makeColumnFooterCss(t,!1),t.cssRequiresUpdate=!1)})),this.mUpdateOneFooterCellQueue.clear(),this.sendFooterUpdate()),jOmnis.mDesign&&this.userDefined&&this.doHiliteSelectedItem(this.currentColumnNumber,!0)}},yi.prototype.resolveBuiltInPropertyName=function(t){var e=ii[t];return e||this.superclass.resolveBuiltInPropertyName.call(this,t)},yi.prototype.searchList=function(t){if(this.isEnabled()){for(var e=this.getData(),i=0,s=1;s<=this.lineCount;s++){var r=jOmnis.stripStyles(e.lstData[s-1][this.searchCol-1]);if(null!=r&&0==r.toUpperCase().indexOf(t)){var n=this.grid.getSelectedRows();if(null==n||1!=n.length||n[0]!=s-1){var o=[s-1];this.grid.setSelectedRows(o),this.onSelectedRowsChanged(),this.generateClick=!1,i=s;var a=this.grid.getCurrentCell();a&&this.grid.gotoCell(s-1,a.cell,!1)}break}}i&&this.canSendEvent(eBaseEvent.evClick)&&this.sendClickEvent(0,s)}},yi.prototype.getViewport=function(){if(!this.gridViewPort){var t=this.mViewportElem;t&&t[0]&&(this.gridViewPort=t)}return this.gridViewPort},yi.prototype.getDateFormat=function(t,e){if(t.hasColumnFormat){var i=this.mDateFormatType;this.mDateFormatType=t.colDateFormatType;var s=this.mDateFormatCustom;this.mDateFormatCustom=t.colDateFormatCustom,r=this.getDisplayFormat(),this.mDateFormatType=i,this.mDateFormatCustom=s}else var r=this.getDisplayFormat();return!e&&r&&(r=r.replace(/(\(|\))+/g,"")),r},yi.prototype.getNumberFormat=function(t){return t.hasColumnFormat?t.colNumberFormat:this.getDisplayFormat(!0)},yi.prototype.saveBeforeMadeInvisible=function(){if(null==this.savedScrollTop){var t=this.getViewport();t&&(this.savedScrollTop=t[0].scrollTop,this.savedScrollLeft=t[0].scrollLeft)}},yi.prototype.restoreAfterMadeVisible=function(){if(null!=this.savedScrollTop){var t=this.getViewport();if(t){var e=this.savedScrollTop,i=this.savedScrollLeft,s=this;setTimeout((function(){if(s.getTrueVisibility()){t[0].scrollTop=e,t[0].scrollLeft=i;try{t.scroll()}catch(t){}s.setiScrollPosition(-i,-e),s.savedScrollTop=null,s.savedScrollLeft=null}}),0)}}},yi.prototype.scriptAvail=function(){var t,e;if(this.scriptOk=!0,this.hdrFmtMethodName=jOmnis.getMethod(this,"$formatheader",-1),this.hdrFmtMethodName||this.hasCustomFormat){var i=this.getData(),s=null!=i?i.lstDef:null;s&&this.doUpdateCtrl(s)}this.hasCustomFormat?(this.doUpdate(!0),this.updateAllFooters()):this.hdrFmtMethodName&&this.doUpdate(),this.hasMultiFilterMenus=!!jOmnis.getMethod(this,"$multifiltermenu",this.form.curInhLevel),this.hasValidateMethod=!!jOmnis.getMethod(this,"$validate",this.form.curInhLevel),this.mSupportsMultiFilter&&this.updatefilterOptions();var r=this;this.initialUpdateFooterRow&&(this.initialUpdateFooterRow.forEach((function(t,e){r.updateOneFooterCell(r.getColumnFromListColNumber(r.columnDefnArray,t),e!==r.initialUpdateFooterRow.length-1)})),this.initialUpdateFooterRow=null),(null===(t=this.updatedFooterColumnsList)||void 0===t||null===(e=t.list)||void 0===e?void 0:e.lstData.length)>0&&this.sendFooterUpdate()},yi.prototype.formatHeader=function(t){return this.hasFormatHeaderMethod()?this[this.hdrFmtMethodName](t.name,t.omnisGridColumn):t.name},yi.prototype.hasFormatHeaderMethod=function(){return!!this.hdrFmtMethodName},yi.prototype.needsIScroll=function(){var t=getWebkitVersion(),e=getAndroidVersion();return jOmnis.useiScroll&&e>0&&e<4.1&&t>0&&t<537.36},yi.prototype.convertFromPixels=function(t){if(!this.mColWidthsArePercentage)return t;var e=this.getGridWidth();return Math.floor(t/e*100)},yi.prototype.convertToPixels=function(t,e){return this.mColWidthsArePercentage?(e=e||this.getGridWidth(),Math.floor(t/100*e)):t},yi.prototype.reapplyColumnWidthPercentage=function(){if(this.mColWidthsArePercentage){this.gridWidthAndHeightChanged&&this.setColumns(!0);var t=this.columnDefnArray,e=0;t.forEach((function(t){e+=t.omnisWidth}));for(var i=this.getGridWidth(e>100),s=0,r=0;r<t.length;++r){var n=this.convertToPixels(t[r].omnisWidth,i);if(t[r].width=n,e+=t[r].omnisWidth,s+=n,r===t.length-1&&100===e){var o=this.getGridWidth()-s;o>0&&(t[r].width+=o)}}this.setColumns(!0),this.gridWidthAndHeightChanged=!1}},yi.prototype.getGridWidth=function(){var t,e=this.getViewport();return e&&(t=e[0].clientWidth),t||(t=this.getCoordProperty(eBaseProperties.width)),t},yi.prototype.prepForComplexGridUpdate=function(){this.grid.resetCurrentCell()},yi.prototype.isItemProperty=function(t){switch(t){case ii.columnbackalpha:case ii.columnbackcolor:case ii.columncanresize:case ii.columncansort:case ii.columndatacol:case ii.columnenabled:case ii.columnfontstyle:case ii.columnjst:case ii.columnminwidth:case ii.columnmode:case ii.columnname:case ii.columnpicklist:case ii.columnpopuptext:case ii.columntextcolor:case ii.columnwidth:case ii.columnstyledtext:return!0}return!1},yi.prototype.currentItemProperty=function(){return ii.currentcolumn},yi.prototype.sendDragStartEvent=function(t){var e=t.target;if(jOmnis.hasClass(e,"slick-row"))if(this.doDragClick(t)){var i,s,r,n,o=this.mGridCanvasElem[0];if(o.children.length){var a=o.children[o.children.length-1],l=a.offsetTop+a.offsetHeight;l<o.clientHeight&&((i=document.createElement("DIV")).style.position="absolute",i.style.top=l+"px",i.style.height=o.parentNode.clientHeight-l+"px",i.style.width=o.offsetWidth+"px",i.style.backgroundColor=this.clientElem.style.backgroundColor,i.style.zIndex=9999,o.appendChild(i))}var h=this.grid.getSelectedRows();if(h.length>=2){r=e.style.height;var c=e.offsetHeight;n=e.style.zIndex,e.style.height=2*e.offsetHeight+"px",e.style.zIndex=9998,(s=document.createElement("DIV")).style.position="absolute",s.style.top=c+"px",s.style.left=0,h.length>2?s.textContent=jGetOmnisString(this.form.inst,"ctl_dgrd_others",null,h.length-1):2===h.length&&(s.textContent=jGetOmnisString(this.form.inst,"ctl_dgrd_other")),e.appendChild(s)}var u=e.style.opacity;jOmnis.inEdge()&&(e.style.opacity=.5),setTimeout((function(){i&&i.parentNode.removeChild(i),s&&(s.parentNode.style.height=r,s.parentNode.style.zIndex=n,s.parentNode.removeChild(s)),e.style.opacity=u}),0),this.superclass.sendDragStartEvent.call(this,t)}else jOmnis.stopEventNow(t);else jOmnis.stopEventNow(t)},yi.prototype.doDragClick=function(t){var e=this.grid.getSelectedRows(),i=1*t.target.getAttribute("row"),s=e.indexOf(i);return-1!=s||(t.ctrlKey||t.shiftKey||t.metaKey?this.multisel&&(-1===s&&(t.ctrlKey||t.metaKey)?e.push(i):-1!==s&&(t.ctrlKey||t.metaKey)?e=$.grep(e,(function(t,e){return t!==i})):e.length&&t.shiftKey&&(e=this.grid.selectRange(i,e))):e=[i],this.grid.resetCurrentCell(),this.grid.setSelectedRows(e),this.onSelectedRowsChanged(),this.form.inst.mNoOverlay=!0,this.generateClickEvent(t,i),this.form.inst.mNoOverlay=!1,-1!=(s=e.indexOf(i)))},yi.prototype.getDragValue=function(){var t=this.getData();if(t&&t instanceof omnis_raw_list)if(this.multisel)(t=jOmnis.copyValue(t)).$remove(kListKeepSelected),t.lstL=0;else{var e=new omnis_raw_list(!1,this.form);e.lstDef=[].concat(t.lstDef),t.lstL&&(e.lstData=[t.lstData[t.lstL-1]],e.lstLSEL=[0],e.lstL=0),t=e}return t},yi.prototype.getDropTarget=function(t){if(this.mDropId=null,this.mHiliteLine){for(;t&&t!=this.clientElem;){if(jOmnis.hasClass(t,"slick-row"))return this.mDropId=1+1*t.getAttribute("row"),t;t=t.parentNode}return null}return this.superclass.getDropTarget.call(this,t)},yi.prototype.hiliteLineChanged=function(){this.updateStyleSheet()},yi.prototype.getDragDropScrollElem=function(){var t=this.getViewport();return t?t[0]:null},yi.prototype.saveFocus=function(){if(jOmnis.savedFocus)return!1;this.savedFocus=jOmnis.modalDialogOpen?null:document.activeElement;for(var t=this.savedFocus;null!=t;){if(t==this.elem){this.savedFocus=null;break}t=t.parentNode}return jOmnis.savedFocus=this.savedFocus,!0},yi.prototype.restoreFocus=function(){null!=this.savedFocus&&(jOmnis.savedFocus=null,jOmnis.restoreFocus(this.savedFocus),this.savedFocus=null)},yi.prototype.getRowCssClasses=function(t){return t&&t._olr[this.rowCssCol-1]||""},yi.prototype.getCheckbox=function(t,e,i,s,r){var n=document.createElement("div");n.style.position="absolute",n.style.fontSize=this.clientElem.style.fontSize,n.style.overflow="visible",n.style.whiteSpace="nowrap",n.style.border="0px none",n.style.userSelect="none",n.style.display="flex",n.style.width="100%",n.style.height="100%",n.style.left="-1px",n.style.top="0";var o=["omnis-checkbox","noFocus"];i&&o.push("dg-notclickable"),jOmnis.addClass(n,o),document.body.appendChild(n),Lt.addToElem(n,t,"",!1,!0),n.firstElementChild.setAttribute("aria-label",e);var a=Math.min(Lt.DEFAULT_BUTTON_SIZE,this.options.rowHeight-5);if(Lt.updateDimensions(n,!0,!1,a),document.body.removeChild(n),null!=s||null!=r){var l="".concat(s,",").concat(r);n.setAttribute("data-cell",l);for(var h=0;h<n.children.length;h++)n.children[h].setAttribute("data-cell",l)}return n},yi.prototype.setDesignScrollInfo=function(t,e){this.frozenColumns?this.mViewportElem[1].scrollLeft=e:this.mViewportElem[0].scrollLeft=e},yi.prototype.doSetItemProperty=function(t,e,i){var s=this.currentColumnNumber;this.currentColumnNumber=t,this.doSetProperty(e,i),this.currentColumnNumber=s},yi.prototype.setUserDefined=function(t){if(this.userDefined!=t){var e=this.getClientElem(),i=parseInt(e.getAttribute("data-cols")),s=this.getData(),r=null!=s&&null!=s.lstDef?s.lstDef:[];if(t)jOmnis.mDesign||"1"==e.getAttribute("data-userdefined")||e.removeAttribute("data-col1"),this.grid.setColumns(this.mSavedUserDefinedCols?this.mSavedUserDefinedCols:[]);else{this.hiliteSelectedItem(0),this.mSavedUserDefinedCols=Array.from(this.columnDefnArray);var n=this.mSavedUserDefinedCols.length;n>i&&(n=i);for(var o="",a="",l=0;l<n;++l)l&&(o+=",",a+=","),o+=this.mSavedUserDefinedCols[l].omnisWidth,a+=this.mSavedUserDefinedCols[l].name;e.setAttribute("data-coltitles",a),e.setAttribute("data-colwidths",o)}this.userDefined=t,this.buildColumnDefinitions(r,!1),this.doUpdateCtrl(jOmnis.mDesign?null:r),jOmnis.mDesign&&(this.userDefined?this.removeDisabledDesignScrollbars(this.mViewportElem[0]):this.showDisabledDesignScrollbars(this.mViewportElem[0]),this.mViewportElem[0].scrollLeft=0)}},yi.prototype.moveColumn=function(t){if(jOmnis.mDesign&&t>0&&t<=this.columnDefnArray.length&&t!=this.currentColumnNumber){var e=this.columnDefnArray.splice(this.currentColumnNumber-1,1);this.columnDefnArray.splice(t-1,0,e[0]);for(var i=0;i<this.columnDefnArray.length;++i)this.columnDefnArray[i].omnisGridColumn=i+1;this.currentColumnNumber=t,this.grid.setColumns(this.columnDefnArray),this.doUpdateCtrl()}},yi.prototype.doHiliteSelectedItem=function(t,e){if(!this.form.isSubform&&this.columnDefnArray[t-1]){this.hiliteSelectedItem(t,this.mViewportElem[0],e);var i=this.mSelectedItemHiliteElem.style;i.height="10000px",i.position="absolute",i.top="0",i.width=this.convertToPixels(this.columnDefnArray[t-1].omnisWidth)-1+"px";for(var s=0,r=0;r<t-1;++r)s+=this.convertToPixels(this.columnDefnArray[r].omnisWidth);i.left=s+"px",i.zIndex="2"}},yi.prototype.getFrozenColumnStopPixels=function(){return this.resizeFrozenColumnsStopPixels},yi.prototype.updateOneFooterCell=function(t,e,i){this.hasFooter&&(this.setFooterValue(t,!e,i),this.grid.updateFooterRowOneCell(t))},yi.prototype.updateAllFooters=function(){this.hasFooter&&(this.setAllFooterValues(),this.grid.updateFooterRowAllCells())},yi.prototype.setFooterValue=function(t,e,i){var s,r,n=function(t,e){var i=[];return t.forEach((function(t){i.push(t[e])})),i}(this.dataView.rows,t.field),o=(s=t.omnisType)===eOmnisDataTypes.fftNumber||s===eOmnisDataTypes.fftInteger,a=Si(t.footerType,this.footerType),l=t.footerValue,h=!1;switch(a){case mi:l!==(r=o?Di(n):null)&&(h=!0);break;case fi:r=o?function(t){return t&&t.length?Di(t)/t.length:null}(n):null,l!==r&&(h=!0);break;case gi:r=o?function(t){t.sort();var e=t.length;return e%2==0?(t[e/2-1]+t[e/2])/2:t[(e-1)/2]}(n):null,l!==r&&(h=!0);break;case vi:i&&(h=!0),r=t.footerValue;break;case bi:l!==(r=this.callUpdateFooterRow(t,!0))&&(h=!0);break;default:r=null}t.footerValue=r,h&&this.addToFooterUpdatedList(t),e&&this.sendFooterUpdate()},yi.prototype.callUpdateFooterRow=function(t,e){if(this.scriptOk){var i=this.callMethodEx("$updatefooterrow",eDoMethodFlags.clientOnly|eDoMethodFlags.noLog|(this.form.inst.inRequest?eDoMethodFlags.noOverlay:0),t.omnisListColumn+1,this.getDataColumnName(t.omnisGridColumn));if(e)return i}else this.initialUpdateFooterRow||(this.initialUpdateFooterRow=[]),this.initialUpdateFooterRow.push(t.omnisListColumn)},yi.prototype.setAllFooterValues=function(){var t=this;this.columnDefnArray.forEach((function(e,i){t.setFooterValue(e,i===t.columnDefnArray.length-1)}))},yi.prototype.sendFooterClick=function(t){this.canSendEvent(si.evFooterClick,!0)&&(this.eventParamsAdd("pHorzCell",this.mapColumnToOriginalColumn(t-1)+1),this.eventParamsAdd("pDataColumnName",this.getDataColumnName(t)),this.sendEvent("evFooterClick"))},yi.prototype.sendFooterUpdate=function(){if(this.scriptOk&&this.canSendEvent(si.evFooterUpdated,!0)&&this.updatedFooterColumnsList){var t=new omnis_raw_list(this.updatedFooterColumnsList.list,this.form);t.lstDef=[].concat([["columnNumber",eOmnisDataTypes.fftInteger,0,0,1,0]]),t.lstData.sort(),this.eventParamsAdd("pUpdatedColumns",t),this.sendEvent("evFooterUpdated"),this.updatedFooterColumnsList=null}},yi.prototype.addToFooterUpdatedList=function(t){if(!this.canSendEvent(si.evFooterUpdated,!0))return!1;this.updatedFooterColumnsList||(this.updatedFooterColumnsList=new omnis_list(null));var e=this.updatedFooterColumnsList.addRow(0);this.updatedFooterColumnsList.setData(1,e,t.omnisListColumn+1,!0)};var Pi={action:"$action",contactdisplayname:"$contactdisplayname",contactname:"$contactname",contactnickname:"$contactnickname",contactphonenumbers:"$contactphonenumbers",contactemails:"$contactemails",contactaddresses:"$contactaddresses",contactims:"$contactims",contactorganizations:"$contactorganizations",contactbirthday:"$contactbirthday",contactnotes:"$contactnotes",contactphotos:"$contactphotos",contacturls:"$contacturls",contactcategories:"$contactcategories",communicationaddress:"$communicationaddress",communicationdata:"$communicationdata",communicationsubject:"$communicationsubject",imagesizemenu:"$imagesizemenu",imagejpeglevel:"$imagejpeglevel",imagemegapixel:"$imagemegapixel",imageaspect:"$imageaspect",soundname:"$soundname",deviceimage:"$deviceimage",cameraimage:"$::cameraimage",uniqueid:"$uniqueid"},Ii={evDeviceGpsReturned:100,evDeviceContactsReturned:101,evDevicePhotoReturned:102,evDeviceImageReturned:103,evDeviceContactsFailed:104,evDevicePhotoFailed:105,evDeviceImagefailed:106,evDeviceBarcodeReturned:107,evDeviceBarcodeFailed:108,evDeviceUniqueIDReturned:109},Li=2,ji=3,Ni=4,Bi=5,Ri=6,Mi=7,Fi=8,Hi=9,zi=10,Wi=11,$i=12;function Ui(){this.init_class_inst()}Ui.prototype=new ctrl_base,Ui.prototype.init_class_inst=function(){this.superclass=ctrl_base.prototype,this.superclass.init_class_inst.call(this),this.mCustomEvents=Ii,this.usesTouchScroll=!1,this.mCanHaveDesignBorder=0!=jOmnis.mDesign,this.showDesignName=!0},Ui.prototype.init_ctrl_inst=function(t,e,i,s){this.superclass.init_ctrl_inst.call(this,t,e,i,s);var r=this.getClientElem();return this.mAcceptsEscape=!0,this.update(),this.deviceImageDataName=r.getAttribute("data-deviceimage"),this.deviceDataName=r.getAttribute("data-dataname"),this.imageAspectRatio=+r.getAttribute("data-aspect")||0,!1},Ui.prototype.getProperty=function(t){var e=this.getClientElem();switch(t){case Pi.action:case Pi.communicationaddress:case Pi.communicationdata:case Pi.communicationsubject:case Pi.soundname:return null;case Pi.contactdisplayname:return e.getAttribute("data-contactdisplayname");case Pi.contactname:return e.getAttribute("data-contactname");case Pi.contactnickname:return e.getAttribute("data-contactnickname");case Pi.contactphonenumbers:return e.getAttribute("data-contactphonenumbers");case Pi.contactemails:return e.getAttribute("data-contactemails");case Pi.contactaddresses:return e.getAttribute("data-contactaddresses");case Pi.contactims:return e.getAttribute("data-contactims");case Pi.contactorganizations:return e.getAttribute("data-contactorganizations");case Pi.contactbirthday:return e.getAttribute("data-contactbirthday");case Pi.contactnotes:return e.getAttribute("data-contactnotes");case Pi.contactphotos:return e.getAttribute("data-contactphotos");case Pi.contactcategories:return e.getAttribute("data-contactcategories");case Pi.contacturls:return e.getAttribute("data-contacturls");case Pi.imagesizemenu:return e.getAttribute("data-imagesizemenu");case Pi.imagejpeglevel:return e.getAttribute("data-imagejpeglevel");case Pi.imagemegapixel:return e.getAttribute("data-imagemegapixel");case Pi.imageaspect:return this.imageAspectRatio;case Pi.deviceimage:return this.deviceImageDataName;case Pi.camerimage:return this.getCameraImage()}return this.superclass.getProperty.call(this,t)},Ui.prototype.getCanAssign=function(t){switch(t){case Pi.action:case Pi.contactdisplayname:case Pi.contactname:case Pi.contactnickname:case Pi.contactphonenumbers:case Pi.contactemails:case Pi.contactaddresses:case Pi.contactims:case Pi.contactorganizations:case Pi.contactbirthday:case Pi.contactnotes:case Pi.contactphotos:case Pi.contactcategories:case Pi.contacturls:case Pi.imagesizemenu:case Pi.imagejpeglevel:case Pi.cameraimage:case Pi.deviceimage:case Pi.communicationaddress:case Pi.communicationdata:case Pi.communicationsubject:case Pi.soundname:case Pi.uniqueid:return!0}return this.superclass.getCanAssign.call(this,t)},Ui.prototype.setProperty=function(t,e){switch(t){case Pi.action:return(e*=1)==Li?this.deviceGetLocation():e==ji?this.deviceBeep():e==Ni?this.deviceVibrate():e==Bi?this.deviceTakePhoto():e==Ri?this.deviceGetImage():e==Mi?this.deviceGetContacts():e==Fi?this.deviceMakeCall():e==Hi?this.deviceSendSms():e==zi?this.deviceSendEmail():e==Wi?this.deviceGetBarcode():e==$i&&this.deviceGetUniqueID(),!0;case Pi.deviceimage:return this.deviceImageDataName=e,!0;case Pi.cameraimage:this.setCameraImage(e);break;case Pi.contactdisplayname:return this.setTranslatableString("data-contactdisplayname",e?"1":"0"),!0;case Pi.contactname:return this.setTranslatableString("data-contactname",e?"1":"0"),!0;case Pi.contactnickname:return this.setTranslatableString("data-contactnickname",e?"1":"0"),!0;case Pi.contactphonenumbers:return this.setTranslatableString("data-contactphonenumbers",e?"1":"0"),!0;case Pi.contactemails:return this.setTranslatableString("data-contactemails",e?"1":"0"),!0;case Pi.contactaddresses:return this.setTranslatableString("data-contactaddresses",e?"1":"0"),!0;case Pi.contactims:return this.setTranslatableString("data-contactims",e?"1":"0"),!0;case Pi.contactorganizations:return this.setTranslatableString("data-contactorganizations",e?"1":"0"),!0;case Pi.contactbirthday:return this.setTranslatableString("data-contactbirthday",e?"1":"0"),!0;case Pi.contactnotes:return this.setTranslatableString("data-contactnotes",e?"1":"0"),!0;case Pi.contactphotos:return this.setTranslatableString("data-contactphotos",e?"1":"0"),!0;case Pi.contactcategories:return this.setTranslatableString("data-contactcategories",e?"1":"0"),!0;case Pi.contacturls:return this.setTranslatableString("data-contacturls",e?"1":"0"),!0;case Pi.imagesizemenu:return this.setTranslatableString("data-imagesizemenu",e?"1":"0"),!0;case Pi.imagejpeglevel:return this.setTranslatableString("data-imagejpeglevel",e.toString()),!0;case Pi.imagemegapixel:return this.setTranslatableString("data-imagemegapixel",e.toString()),!0;case Pi.imageaspect:return this.imageAspectRatio=+e,!0;case Pi.communicationaddress:return this.mCommunicationAddress=e,!0;case Pi.communicationdata:return this.mCommunicationData=e,!0;case Pi.communicationsubject:return this.mCommunicationSubject=e,!0;case Pi.soundname:return this.mSoundName=e,!0;case eBaseProperties.dataname:return this.superclass.setProperty.call(this,t,e),this.update(),!0}return this.superclass.setProperty.call(this,t,e)},Ui.prototype.handleEvent=function(t){switch(t.type){case"click":return this.elem.disabled&&jOmnis.stopEventNow(t),!0;case"change":return!0;default:return this.superclass.handleEvent.call(this,t)}},Ui.prototype.getCameraImage=function(){return this.getClientElem().getAttribute("data-cameraimage")},Ui.prototype.setCameraImage=function(t){return this.getClientElem().setAttribute("data-cameraimage",t)},Ui.prototype.sendDeviceRequest=function(t,e,i){var s;s=0==e?"":"var obj = jOmnis.getOmnisFormControl(jOmnis.instIndexFromIdent("+this.form.ident+"), jOmnis.formIndexFromIdent("+this.form.ident+"),"+this.uniqueID+");return (obj == null) ? null : obj."+e+"(arg1);",sendDeviceRequest(t,s,i)},Ui.prototype.deviceGetLocation=function(){if(jOmnis.inAppWrapper())this.sendDeviceRequest("getGps","deviceSetLocation",0);else if("geolocation"in navigator){var t=this;navigator.geolocation.getCurrentPosition((function(e){e&&"coords"in e&&t.deviceSetLocation(e.coords.latitude+":"+e.coords.longitude)}),(function(e){t.deviceSetLocation("FAIL")}))}else this.deviceSetLocation("FAIL")},Ui.prototype.deviceSetLocation=function(t){this.canSendEvent(Ii.evDeviceGpsReturned)&&(this.eventParamsAdd("pDeviceGps",t),this.sendEvent("evGpsReturned"))},Ui.prototype.deviceGetContacts=function(){if(jOmnis.inAppWrapper()){var t=0;t|=this.getProperty(Pi.contactdisplayname),t|=this.getProperty(Pi.contactname)<<1,t|=this.getProperty(Pi.contactnickname)<<2,t|=this.getProperty(Pi.contactphonenumbers)<<3,t|=this.getProperty(Pi.contactemails)<<4,t|=this.getProperty(Pi.contactaddresses)<<5,t|=this.getProperty(Pi.contactims)<<6,t|=this.getProperty(Pi.contactorganizations)<<7,t|=this.getProperty(Pi.contactbirthday)<<8,t|=this.getProperty(Pi.contactnotes)<<9,t|=this.getProperty(Pi.contactphotos)<<10,t|=this.getProperty(Pi.contactcategories)<<11,t|=this.getProperty(Pi.contacturls)<<12,this.sendDeviceRequest("getCont","deviceSetContacts",""+t)}};Ui.prototype.deviceSetContacts=function(t){if("FAIL"==t.toString())this.sendEvent("evContactsFailed");else{this.setDataName(this.deviceDataName),this.update();var e,i=this.form,s=new omnis_raw_list(!1,i),r=new omnis_raw_list(!1,i),n=new omnis_raw_list(!1,i),o=new omnis_raw_list(!1,i),a=new omnis_raw_list(!1,i),l=new omnis_raw_list(!1,i),h=new omnis_raw_list(!1,i),c=new omnis_raw_list(!1,i),u=new omnis_raw_list(!1,i);i.mPassToNextHandler=!1,s.$cols().$add("formatted",eOmnisDataTypes.fftCharacter,0,32),s.$cols().$add("familyName",eOmnisDataTypes.fftCharacter,0,32),s.$cols().$add("givenName",eOmnisDataTypes.fftCharacter,0,32),s.$cols().$add("middleName",eOmnisDataTypes.fftCharacter,0,32),s.$cols().$add("honorificPrefix",eOmnisDataTypes.fftCharacter,0,32),s.$cols().$add("honorificSuffix",eOmnisDataTypes.fftCharacter,0,32),r.$cols().$add("type",eOmnisDataTypes.fftCharacter,0,16),r.$cols().$add("value",eOmnisDataTypes.fftCharacter,0,32),r.$cols().$add("pref",eOmnisDataTypes.fftBoolean),n.$cols().$add("type",eOmnisDataTypes.fftCharacter,0,16),n.$cols().$add("value",eOmnisDataTypes.fftCharacter,0,64),n.$cols().$add("pref",eOmnisDataTypes.fftBoolean),o.$cols().$add("pref",eOmnisDataTypes.fftBoolean),o.$cols().$add("type",eOmnisDataTypes.fftCharacter,0,16),o.$cols().$add("formatted",eOmnisDataTypes.fftCharacter,0,128),o.$cols().$add("streetAddress",eOmnisDataTypes.fftCharacter,0,128),o.$cols().$add("locality",eOmnisDataTypes.fftCharacter,0,32),o.$cols().$add("region",eOmnisDataTypes.fftCharacter,0,32),o.$cols().$add("postalCode",eOmnisDataTypes.fftCharacter,0,16),o.$cols().$add("country",eOmnisDataTypes.fftCharacter,0,16),a.$cols().$add("type",eOmnisDataTypes.fftCharacter,0,16),a.$cols().$add("value",eOmnisDataTypes.fftCharacter,0,32),a.$cols().$add("pref",eOmnisDataTypes.fftBoolean),l.$cols().$add("pref",eOmnisDataTypes.fftBoolean),l.$cols().$add("type",eOmnisDataTypes.fftCharacter,0,32),l.$cols().$add("name",eOmnisDataTypes.fftCharacter,0,32),l.$cols().$add("department",eOmnisDataTypes.fftCharacter,0,32),l.$cols().$add("title",eOmnisDataTypes.fftCharacter,0,32),h.$cols().$add("type",eOmnisDataTypes.fftCharacter,0,16),h.$cols().$add("value",eOmnisDataTypes.fftBinary,0,0),h.$cols().$add("pref",eOmnisDataTypes.fftBoolean),c.$cols().$add("type",eOmnisDataTypes.fftCharacter,0,16),c.$cols().$add("value",eOmnisDataTypes.fftCharacter,0,32),c.$cols().$add("pref",eOmnisDataTypes.fftBoolean),u.$cols().$add("type",eOmnisDataTypes.fftCharacter,0,16),u.$cols().$add("value",eOmnisDataTypes.fftCharacter,0,32),u.$cols().$add("pref",eOmnisDataTypes.fftBoolean);var d=this.getData();d.$define();var p=d.$cols();p.$add("displayName",eOmnisDataTypes.fftCharacter,0,32),p.$add("name",eOmnisDataTypes.fftList,0,0),p.$add("nickName",eOmnisDataTypes.fftCharacter,0,32),p.$add("phoneNumbers",eOmnisDataTypes.fftList,0,0),p.$add("emails",eOmnisDataTypes.fftList,0,0),p.$add("addresses",eOmnisDataTypes.fftList,0,0),p.$add("ims",eOmnisDataTypes.fftList,0,0),p.$add("organizations",eOmnisDataTypes.fftList,0,0),p.$add("birthday",eOmnisDataTypes.fftDate,0,0),p.$add("note",eOmnisDataTypes.fftCharacter,0,256),p.$add("photos",eOmnisDataTypes.fftList,0,0),p.$add("categories",eOmnisDataTypes.fftList,0,0),p.$add("urls",eOmnisDataTypes.fftList,0,0);for(var m=JSON.parse(t),f=0;f<m.length;f++){var g;for(g in s.$clear(),r.$clear(),n.$clear(),o.$clear(),a.$clear(),l.$clear(),h.$clear(),c.$clear(),u.$clear(),e=null,m[f]){if(g.search(/name/)>-1){var v,b="",y="",C="",_="",E="",w="";for(v in m[f].name)v.search(/formatted/)>-1&&(b=m[f].name.formatted),v.search(/familyName/)>-1&&(y=m[f].name.familyName),v.search(/givenName/)>-1&&(C=m[f].name.givenName),v.search(/middleName/)>-1&&(_=m[f].name.middleName),v.search(/honorificPrefix/)>-1&&(w=m[f].name.honorificPrefix),v.search(/honorificSuffix/)>-1&&(E=m[f].name.honorificSuffix);b&&(b=b.replace(/["]/g,"'")),y&&(y=y.replace(/["]/g,"'")),C&&(C=C.replace(/["]/g,"'")),_&&(_=_.replace(/["]/g,"'")),s.$add(b,y,C,_,w,E)}var k;if(g.search(/phoneNumbers/)>-1)try{for(k=0;k<m[f].phoneNumbers.length;k++)r.$add(m[f].phoneNumbers[k].type,m[f].phoneNumbers[k].value,m[f].phoneNumbers[k].pref)}catch(t){}if(g.search(/emails/)>-1)try{for(k=0;k<m[f].emails.length;k++)n.$add(m[f].emails[k].type,m[f].emails[k].value,m[f].emails[k].pref)}catch(t){}if(g.search(/addresses/)>-1)try{for(k=0;k<m[f].addresses.length;k++)o.$add(m[f].addresses[k].pref,m[f].addresses[k].type,m[f].addresses[k].formatted,m[f].addresses[k].streetAddress,m[f].addresses[k].locality,m[f].addresses[k].region,m[f].addresses[k].postalCode,m[f].addresses[k].country)}catch(t){}if(g.search(/ims/)>-1)try{for(k=0;k<m[f].ims.length;k++)a.$add(m[f].ims[k].type,m[f].ims[k].value,m[f].ims[k].pref)}catch(t){}if(g.search(/organizations/)>-1)try{for(k=0;k<m[f].organizations.length;k++)l.$add(m[f].organizations[k].pref,m[f].organizations[k].type,m[f].organizations[k].name,m[f].organizations[k].department,m[f].organizations[k].title)}catch(t){}if(g.search(/photos/)>-1)if(jOmnis.iOS)try{h.$add(0,m[f].photos,0)}catch(t){}else try{h.$add(0,m[f].photos[0].value,0)}catch(t){}if(g.search(/categories/)>-1)try{for(k=0;k<m[f].categories.length;k++)c.$add(m[f].categories[k].type,m[f].categories[k].value,m[f].categories[k].pref)}catch(t){}if(g.search(/urls/)>-1)try{for(k=0;k<m[f].urls.length;k++)u.$add(m[f].urls[k].type,m[f].urls[k].value,m[f].urls[k].pref)}catch(t){}}if(m[f].birthday)try{var T=new Date(m[f].birthday);e=new omnis_date(T)}catch(t){}d.$add(m[f].displayName,s,m[f].nickName,r,n,o,a,l,e,m[f].note,h,c,u)}this.setData(d),this.sendEvent("evContactsReturned")}},Ui.prototype.deviceMakeCall=function(){var t={NUMBER:this.mCommunicationAddress||""};t.NUMBER&&(t.NUMBER=t.NUMBER.replace(/[\s()]/g,"")),jOmnis.inAppWrapper()?this.sendDeviceRequest("makeCall",0,t):window.location="tel:"+t.NUMBER},Ui.prototype.deviceSendSms=function(){var t={NUMBER:this.mCommunicationAddress||"",TEXT:this.mCommunicationData||""};t.NUMBER&&(t.NUMBER=t.NUMBER.replace(/[\s()]/g,"")),jOmnis.inAppWrapper()?this.sendDeviceRequest("sendSms",0,t):jOmnis.iOS||jOmnis.clientPlatform===eClientPlatforms.macOS?window.location="sms:/open?addresses="+t.NUMBER:window.location="sms:"+t.NUMBER},Ui.prototype.deviceSendEmail=function(){var t={NUMBER:this.mCommunicationAddress||"",TEXT:this.mCommunicationData||"",SUBJECT:this.mCommunicationSubject||""};jOmnis.inAppWrapper()?this.sendDeviceRequest("sendEmail",0,t):(t.TEXT&&(t.TEXT=t.TEXT.replace(/[\\\r]/g,"%0A")),window.location="mailto:"+t.NUMBER+"?subject="+t.SUBJECT+"&body="+t.TEXT)},Ui.prototype.deviceBeep=function(){var t={NAME:this.mSoundName};jOmnis.inAppWrapper()&&this.sendDeviceRequest("beep",0,t)},Ui.prototype.deviceVibrate=function(){jOmnis.inAppWrapper()?this.sendDeviceRequest("vibrate",0,0):"vibrate"in navigator&&navigator.vibrate(300)},Ui.prototype.deviceTakePhoto=function(){this.$takephoto(0,0)},Ui.prototype.deviceSetPhoto=function(t){var e=this;if("FAIL"==t.toString())e.sendEvent("evPhotoFailed");else if(e.canSendEvent(Ii.evDevicePhotoReturned)){var i=this.form.getDataIndex(this.deviceImageDataName,this,!1);this.form.setData(i,t),e.sendEvent("evPhotoReturned")}},Ui.prototype.deviceGetImage=function(){jOmnis.inAppWrapper()&&this.sendDeviceRequest("getImage","deviceSetImage",{MENU:this.getProperty(Pi.imagesizemenu),JPEGLEVEL:this.getProperty(Pi.imagejpeglevel),MEGAPIXEL:this.getProperty(Pi.imagemegapixel)})},Ui.prototype.deviceSetImage=function(t){if("FAIL"==t.toString())this.sendEvent("evImageFailed");else if(this.canSendEvent(Ii.evDeviceImageReturned)){var e=this.form.getDataIndex(this.deviceImageDataName,this,!1);this.form.setData(e,t),this.sendEvent("evImageReturned")}},Ui.prototype.deviceGetBarcode=function(){jOmnis.inAppWrapper()&&this.sendDeviceRequest("getBarcode","deviceSetBarcode",{includeErrorInfo:!0})},Ui.prototype.deviceSetBarcode=function(t){var e=JSON.parse(t);e.errorText?this.canSendEvent(Ii.evDeviceBarcodeFailed)&&(this.eventParamsAdd("pDeviceErrorText",e.errorText),this.eventParamsAdd("pDeviceErrorCode",e.errorCode),this.sendEvent("evBarcodeFailed")):this.canSendEvent(Ii.evDeviceBarcodeReturned)&&(this.eventParamsAdd("pDeviceBarcode",e.TEXT),this.sendEvent("evBarcodeReturned"))},Ui.prototype.deviceGetUniqueID=function(){var t=this.getProperty(Pi.uniqueid);jOmnis.inAppWrapper()&&window.wrapperInterface.wrapperFeatures[eWrapperFeature.DEVICE_ID]&&this.sendDeviceRequest("getID","deviceSetUniqueID",t)},Ui.prototype.deviceSetUniqueID=function(t){this.canSendEvent(Ii.evDeviceUniqueIDReturned)&&(this.eventParamsAdd("pDeviceUniqueID",t),this.sendEvent("evUniqueIDReturned"))},Ui.prototype.$takephoto=function(t,e){if(jOmnis.inAppWrapper()){if(t&&e)var i=t/e,s=t*e/1e6;else i=this.imageAspectRatio,s=this.getProperty(Pi.imagemegapixel);this.sendDeviceRequest("takePhoto","deviceSetPhoto",{MENU:this.getProperty(Pi.imagesizemenu),JPEGLEVEL:this.getProperty(Pi.imagejpeglevel),MEGAPIXEL:s+"",ASPECT:i})}else console.error("Photo support only works inside a native Omnis 'wrapper' app")};var Vi,qi,Ki=i(1341);function Gi(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function Yi(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Gi(Object(i),!0).forEach((function(e){Xi(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Gi(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Xi(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Ji="$action",Qi="$maxfileuploadsize",Zi="$uploadtitle",ts="$uploadbuttontext",es="$stopuploadbuttontext",is="$maxfileuploadsizeerrortext",ss="$uploaderrortext",rs="$uploadstoppedtext",ns="$uploadprogresstext",os="$downloaderrortext",as="$hyperlinktext",ls="$hyperlinkurl",hs="$uploadtypes",cs="$allowmultiple",us="$maxbatchuploadsize",ds="$maxbatchuploadsizeerrortext",ps="$uploadprogresstextbatch",ms="$autoclose",fs="$choosefilesbuttontext",gs={evFileUploaded:100,evFileUploadDialogClosed:101,evDownloadSent:102},vs=0,bs=1,ys=2,Cs=1e3,_s=!1,Es=!1,ws=(Xi(Vi={},cs,"data-allowmultiple"),Xi(Vi,ms,"data-autoclose"),Xi(Vi,hs,"data-uploadtypes"),Xi(Vi,Zi,"data-uploadtitle"),Xi(Vi,ts,"data-uploadbuttontext"),Xi(Vi,es,"data-stopuploadbuttontext"),Xi(Vi,Qi,"data-maxfileuploadsize"),Xi(Vi,is,"data-maxfileuploadsizeerrortext"),Xi(Vi,ss,"data-uploaderrortext"),Xi(Vi,rs,"data-uploadstoppedtext"),Xi(Vi,ns,"data-uploadprogresstext"),Xi(Vi,os,"data-downloaderrortext"),Xi(Vi,as,"data-hyperlinktext"),Xi(Vi,ls,"data-hyperlinkurl"),Xi(Vi,us,"data-maxbatchuploadsize"),Xi(Vi,ds,"data-maxbatchuploadsizeerrortext"),Xi(Vi,ps,"data-batchuploadprogresstext"),Xi(Vi,fs,"data-choosefilestext"),Vi);Ki.ZF.upload="cloud_upload",Ts.prototype=new a.U2,Ts.prototype.MAX_FILENAME_LENGTH=32,Ts.prototype.AUTOCLOSE_TIMEOUT=0,Ts.prototype.fileUnits=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],Ts.prototype.CLEAR_FILE_SELECTION=!0;var ks=Yi(Yi({},a.Mr),{},{FILE_BUTTON_BACKGROUND:"FILE_BUTTON_BACKGROUND",FILE_BUTTON_TEXT:"FILE_BUTTON_TEXT",UPLOAD_BUTTON_BACKGROUND:"UPLOAD_BUTTON_BACKGROUND",UPLOAD_BUTTON_TEXT:"UPLOAD_BUTTON_TEXT",UPLOAD_STOP_BUTTON_BACKGROUND:"UPLOAD_STOP_BUTTON_BACKGROUND",UPLOAD_STOP_BUTTON_TEXT:"UPLOAD_STOP_BUTTON_TEXT"});function Ts(){this.init_class_inst()}function Ss(t){var e=[],i=this,s=null,r=function(){this.iframeElement.src="about:blank"};this.addDownload=function(t){e.push(t),this.running?s||(s=setInterval((function(){i.running||(e.length?n.call(i):(clearInterval(s),s=null))}),100)):n.call(this)};var n=function(){this.running=!0;var t=e.shift();o.call(this,t)},o=function(e){var i=Ts.getNextAvailableCookieID(),s=Ts.COOKIE_PREFIX+i;if(Ts.cookieHasValue(s,"1"))throw new Error("Cookie for downloadId '"+s+"' already set");document.cookie=s+"=0;path=/;";var n=e.length>=4?e[3]:"",o="file_downloadiframe"+i,a=document.createElement("form");a.target=o,a.id="file_downloadform"+i,a.style.position="absolute",a.style.top="0px",a.style.left="0px",a.action=t.form.inst.url,a.method="get",a.innerHTML='<input type="hidden" name="OmnisServer" value="'+t.form.inst.omnisserverandport+'"><input type="hidden" name="__OmnisCmd" value="download,'+t.form.inst.connIndex+","+t.form.inst.connID+","+t.form.inst.creationTime+","+t.form.inst.mSessionID+","+t.form.number+","+s+","+e.slice(0,3).join(",")+'">',a.style.display="none",document.body.appendChild(a),this.iframeElement=document.createElement("iframe"),this.iframeElement.name=o,this.iframeElement.id=o,this.iframeElement.style.display="none",r.call(this),document.body.appendChild(this.iframeElement);var l=this;this.iframeElement.onload=function(){l.downloadCheckInterval&&(clearInterval(l.downloadCheckInterval),l.downloadCheckInterval=0),document.body.removeChild(l.iframeElement),l.iframeElement=null,document.body.removeChild(a),jOmnis.mDisableKeyboard=!1,jOmnis.okMessage("",t.getTranslatableString(this.getAttributeName(os),jGetOmnisString(t.form.inst,"ctl_file_downloaderror"))),t.canSendEvent(gs.evDownloadSent)&&(t.eventParamsAdd("pSuccess",!1),t.eventParamsAdd("pIdentifier",n||""),t.sendEvent("evDownloadSent")),Ts.deleteCookiesWithName(s,!1),l.running=!1},this.downloadCheckInterval=setInterval((function(){if(Ts.cookieHasValue(s,"1")){clearInterval(l.downloadCheckInterval);var e=l.iframeElement.id;l.iframeElement=null,setTimeout((function(){var t=document.getElementById(e);t&&document.body.removeChild(t),document.body.removeChild(a),Ts.deleteCookiesWithName(s,!1)}),5e3),jOmnis.mDisableKeyboard=!1,t.canSendEvent(gs.evDownloadSent)&&(t.eventParamsAdd("pSuccess",!0),t.eventParamsAdd("pIdentifier",n||""),t.sendEvent("evDownloadSent")),l.running=!1}}),100),jOmnis.mDisableKeyboard=!0,a.submit()}}Ts.prototype.DefaultColors=Yi(Yi({},a.U2.prototype.DefaultColors),{},(Xi(qi={},ks.FILE_BUTTON_BACKGROUND,o.l1.primary),Xi(qi,ks.FILE_BUTTON_TEXT,o.l1.default),Xi(qi,ks.UPLOAD_BUTTON_BACKGROUND,o.l1.default),Xi(qi,ks.UPLOAD_BUTTON_TEXT,o.l1.primary),Xi(qi,ks.UPLOAD_STOP_BUTTON_BACKGROUND,o.l1.default),Xi(qi,ks.UPLOAD_STOP_BUTTON_TEXT,o.l1.error),qi)),Ts.COOKIE_PREFIX="omnis_dl",Ts.prototype.init_class_inst=function(){if(this.superclass=a.U2.prototype,this.superclass.init_class_inst.call(this),this.mCustomEvents=gs,this.usesTouchScroll=!1,!Es){try{new FormData;_s=!0}catch(t){}Es=!0}this.mFocusStyle=eBaseFocusStyle.eNone,this.activeReplacesEnabled=!0,this.mCanHaveDesignBorder=0!=jOmnis.mDesign,this.showDesignName=!0},Ts.prototype.baseClassName="omnis-file",Ts.prototype.init_ctrl_inst=function(t,e,i,s){this.superclass.init_ctrl_inst.call(this,t,e,i,s);var r=this.getClientElem();return this.mMaxFileUploadSize=parseInt(r.getAttribute(this.getAttributeName(Qi))),this.mMaxBatchUploadSize=parseInt(r.getAttribute(this.getAttributeName(us))),this.mAutoCloseAfterUpload=parseInt(r.getAttribute(this.getAttributeName(ms))),this.mAcceptsEscape=!0,this.mHasAlign=!0,this.mUploadTypes=r.getAttribute(this.getAttributeName(hs))||"",this.buttonColors={file:{background:this.DefaultColors.FILE_BUTTON_BACKGROUND,text:this.DefaultColors.FILE_BUTTON_TEXT},upload:{background:this.DefaultColors.UPLOAD_BUTTON_BACKGROUND,text:this.DefaultColors.UPLOAD_BUTTON_TEXT},stopUpload:{background:this.DefaultColors.UPLOAD_STOP_BUTTON_BACKGROUND,text:this.DefaultColors.UPLOAD_STOP_BUTTON_TEXT}},this.mMultipleFileUpload=!!_s&&"1"===r.getAttribute(this.getAttributeName(cs)),this.update(),!1},Ts.prototype.delete_class_inst=function(){var t=document.getElementById("dialogfile_uploadform");t&&t.remove(),this.superclass.delete_class_inst.call(this)},Ts.prototype.updateCtrl=function(){var t=this.getClientElem();this.hyperlinkElem&&t.removeChild(this.hyperlinkElem),this.hyperlinkElem=document.createElement("a"),this.hyperlinkElem.target="_blank";var e=t.getAttribute(this.getAttributeName(ls));null!=e&&e.length>0&&(this.hyperlinkElem.href=this.hyperlinkElem.savedHref=jOmnis.escapeHTML(e));var i=t.getAttribute(this.getAttributeName(as));null!=i&&(this.hyperlinkElem.innerText=jOmnis.escapeHTML(i)),t.appendChild(this.hyperlinkElem),t.onclick=this.mEventFunction,this.activeChanged()},Ts.prototype.getProperty=function(t){var e=this.getClientElem();switch(t){case Ji:return null;case Qi:return this.mMaxFileUploadSize;case Zi:return e.getAttribute(this.getAttributeName(Zi));case ts:return e.getAttribute(this.getAttributeName(ts));case es:return e.getAttribute(this.getAttributeName(es));case is:return e.getAttribute(this.getAttributeName(is));case ss:return e.getAttribute(this.getAttributeName(ss));case rs:return e.getAttribute(this.getAttributeName(rs));case ns:return e.getAttribute(this.getAttributeName(ns));case os:return e.getAttribute(this.getAttributeName(os));case as:return e.getAttribute(this.getAttributeName(as));case ls:return e.getAttribute(this.getAttributeName(ls));case hs:return this.mUploadTypes;case cs:return this.mMultipleFileUpload;case us:return+e.getAttribute(this.getAttributeName(us));case ds:return e.getAttribute(this.getAttributeName(ds));case ps:return e.getAttribute(this.getAttributeName(ps));case ms:return this.mAutoCloseAfterUpload;case fs:return e.getAttribute(this.getAttributeName(fs))}return this.superclass.getProperty.call(this,t)},Ts.prototype.getCanAssign=function(t){switch(t){case Ji:case Qi:case Zi:case ts:case es:case is:case ss:case rs:case ns:case os:case as:case ls:case hs:case cs:case us:case ds:case ps:case ms:case fs:return!0}return this.superclass.getCanAssign.call(this,t)},Ts.prototype.setProperty=function(t,e){switch(t){case Ji:return(e*=1)==vs?this.openFileUploadDialog():e==bs?this.downloadFile():e==ys&&this.closeUploadDialog(),!0;case Qi:var i=1*e;return i<0&&(i=0),this.mMaxFileUploadSize=i,!0;case Zi:case ts:case es:return this.setPropertyAttribute(t,e,!0,!0),!0;case is:case ss:case rs:case ns:case os:case ds:case ps:return this.setPropertyAttribute(t,e,!1,!0),!0;case as:case ls:return this.setPropertyAttribute(t,e,!1,!0),this.update(),!0;case hs:return this.mUploadTypes=e+"",this.fileInputElem=document.getElementById("dialogfile_button"),this.fileInputElem&&(this.fileInputElem.accept=this.mUploadTypes),!0;case eBaseProperties.dataname:return this.superclass.setProperty.call(this,t,e),this.update(),!0;case cs:return this.mMultipleFileUpload=!!_s&&!!e,this.invalidateDialog(),!0;case us:return this.setPropertyAttribute(t,e,!1,!1),!0;case ms:return this.mAutoCloseAfterUpload=+e,!0;case fs:return this.setPropertyAttribute(t,e,!0,!0),!0}return this.superclass.setProperty.call(this,t,e)},Ts.prototype.handleEvent=function(t){var e=t.target;switch(t.type){case"focus":case"mouseenter":var i=e.getAttribute("data-btype");i&&("dialogfile_button"===e.id&&("focus"===t.type&&(jOmnis.lastModalDialogFocus=this.fileInputElem),e=document.getElementById("dialogfile_pseudobutton")),e.style.backgroundColor=ctrl_pushbutton.getFlatButtonColor(this.getTheme(),ctrl_pushbutton.getFlatButtonFocusColor(this.form.inst,this.buttonColors[i].background,this.buttonColors[i].text)));break;case"blur":case"mouseleave":var s=e.getAttribute("data-btype");s&&"dialogfile_button"===e.id&&(e=document.getElementById("dialogfile_pseudobutton")),e.style.backgroundColor=ctrl_pushbutton.getFlatButtonColor(this.getTheme(),this.buttonColors[s].background);break;case"click":return this.elem.disabled&&jOmnis.stopEventNow(t),!0;case"change":return!0;case"keydown":if(9===t.keyCode||9===t.which){var r=document.querySelectorAll("#dialogfile_uploadform .isactive");jOmnis.tabFocusTrap(r[0],r[r.length-1],t)}break;default:return this.superclass.handleEvent.call(this,t)}},Ts.prototype.invalidateDialog=function(){this.fileDialogValid=!1},Ts.prototype.isDialogValid=function(){return!!this.fileDialogValid},Ts.prototype.setDialogAsValid=function(){this.fileDialogValid=!0},Ts.prototype.setPropertyAttribute=function(t,e,i,s){this.getProperty(t)!==e&&(s?this.setTranslatableString(ws[t],e):this.clientElem.setAttribute(ws[t],e+""),i&&this.invalidateDialog())},Ts.prototype.getAttributeName=function(t){return ws[t]},Ts.prototype.downloadFile=function(){this.mDownloadTask||(this.mDownloadTask=new Ss(this));var t=this.getData();if(t&&t.lstData)if(t.lstRow)this.mDownloadTask.addDownload(t.lstData);else for(var e=0;e<t.lstData.length;e++)this.mDownloadTask.addDownload(t.lstData[e])},Ts.prototype.getFileButtonLabelText=function(){return this.getTranslatableString(this.getAttributeName(fs),jGetOmnisString(this.form.inst,"ctl_file_choosefile".concat(this.mMultipleFileUpload?"s":"")))},Ts.prototype.openFileUploadDialog=function(){this.previousActiveElement=document.activeElement;var t=this,e=this.form.inst.url+"?";if(this.form.inst.omnisserverandport.length>0&&(e+="OmnisServer="+this.form.inst.omnisserverandport+"&"),e+="__OmnisCmd=upload,"+this.form.inst.connIndex+","+this.form.inst.connID+","+this.form.inst.creationTime+","+this.form.inst.mSessionID+","+this.form.number+","+this.dataName,"undefined"!=typeof omnisandroid){if("function"==typeof omnisandroid.selectFileToUploadEx)return void omnisandroid.selectFileToUploadEx(e,t.mMaxFileUploadSize,[t.form.inst.index,t.form.index,t.uniqueID,t.rowNumber],JSON.stringify({uploadTypes:this.mUploadTypes}));if("function"==typeof omnisandroid.selectFileToUpload)return void omnisandroid.selectFileToUpload(e,t.mMaxFileUploadSize,[t.form.inst.index,t.form.index,t.uniqueID,t.rowNumber])}var i=document.getElementById("dialogfile_uploadform"),s=!1;if(this.isDialogValid()&&i)document.body.removeChild(i),this.mAutoCloseAfterUpload&&this.enableElements(!1,!1,this.CLEAR_FILE_SELECTION);else{var r=this.getTheme();i&&document.body.removeChild(i),s=!0,this.fileButtonLabelText=this.getFileButtonLabelText();var n="";t.mMultipleFileUpload&&(n=" multiple ");var o=jGetOmnisString(this.form.inst,"ctl_file_closedialog"),a=jIcons.getHtml("".concat(Ki.OT).concat(Ki.ZF.close).concat(Ki.np,"?"),null,null,null,{width:Ki.ZG.notAutoLayout,height:Ki.ZG.notAutoLayout,viewBox:"0 0 24 24"},null),l=_s?"block":"none",h='<div id="dialogfile_upload" role="dialog" aria-modal="true" aria-labelledby="dialogboxtitle" style="width:auto;height:auto;opacity:1;visibility:visible" class="omnis-wf omnis-wf-borders omnis-wf-shadow omnis-wf-radii omnis-wf-active">';h+='<div class="omnis-wf-title omnis-wf-title-active" >';h+='<div style="cursor:default"><button tabindex="0" id="dialogfile_close" type="button" style="border:0;" value="" class="isactive noFocus omnis-wf-butt omnis-wf-close" aria-label="'+o+'">'+a+'</button><div id="dialogboxtitle" style="position:absolute; overflow: hidden; display: inline; text-overflow: ellipsis; white-space: nowrap; cursor: default; outline: none; width: calc(100% - 40px)">',h+=this.getTranslatableString(this.getAttributeName(Zi),jGetOmnisString(this.form.inst,t.mMultipleFileUpload?"ctl_file_uploadmultipletitle":"ctl_file_uploadtitle")).replace(/ /g,"&nbsp;"),h+="</div>",h+="</div>",h+='</div><div id="dialogfile_body" class="messagebody" style="background:white;">',h+='<div style="overflow-x:auto;overflow-y:auto;height:auto;text-align:center">',h+='<input aria-label="'+this.fileButtonLabelText+'" data-btype="file" tabindex="0" type="file" class="isactive" id="dialogfile_button" name="filedata"'+n+'accept="'+jOmnis.escapeHTML(this.mUploadTypes)+'"/>';var c=r.getTextColorString(this.buttonColors.file.text,this.resolveDefaultColor(this.buttonColors.file.background,ks.FILE_BUTTON_BACKGROUND),this.DefaultColors.UPLOAD_BUTTON_TEXT),u=jIcons.getHtml("".concat(Ki.OT).concat(Ki.ZF.upload).concat(Ki.np,"?"),"0 4px",null,null,{width:Ki.ZG.notAutoLayout,height:Ki.ZG.notAutoLayout,viewBox:"0 0 24 24"},null);h+='<label id="dialogfile_pseudobutton" for="dialogfile_button" data-btype="file" class="omnis-button file-butt file-choose-butt" style="margin:10px 0;background-color:'+r.getColorString(this.buttonColors.file.background,this.DefaultColors.FILE_BUTTON_BACKGROUND)+";color:"+c+";--om-tint-color:"+c+';">'+u+'<div id="dialogfile_button_label">'+this.fileButtonLabelText+"</div></label>",h+='</div><div style="display:block;text-align:left;border-bottom:0;border-left:0;border-right:0;">',h+='<button tabindex="0" type="button" id="dialogfile_submit" class="omnis-button file-butt" data-btype="upload" style="margin:10px;color:'+r.getTextColorString(this.buttonColors.upload.text,this.themeableData.backgroundColor,this.DefaultColors.UPLOAD_BUTTON_TEXT)+';">'+this.getTranslatableString(this.getAttributeName(ts),jGetOmnisString(this.form.inst,"ctl_file_uploadbutton"))+"</button>",_s||(h+='<button id="dialogfile_uploadstop" type="button" style="margin:0 10px 10px 10px;width:auto">'+this.getTranslatableString(this.getAttributeName(es),jGetOmnisString(this.form.inst,"ctl_file_stopbutton")).replace(/ /g,"&nbsp;")+"</button>",h+='<img id ="dialogfile_activitygif" src="images/ajax-loader-small.gif" style="display:none">'),h+="</div>",h+='<div id="dialogfile_progressdiv" style="display:'+l+';border-bottom:0;border-left:0;border-right:0;margin: 10px auto auto auto;">',h+='<div style="margin:0 10px 0 10px;padding:0;">',h+='<div id="dialogfile_progresscurrentfile" style="float:left;width:75%;overflow:hidden;">Current File</div>',h+='<div id="dialogfile_progresspercent" style="display:'+l+';text-align: right;overflow:hidden;"></div>',h+="</div>",h+='<progress id="dialogfile_progress" style="margin:0 10px 0 10px;width:300px"></progress>',h+="</div>",h+='<div id="dialogfile_progresstext" style="display:'+l+';margin:0 10px 10px 20px;">&nbsp;</div>',t.mMultipleFileUpload&&(h+='<div id="dialogfile_progressdivtotal" style="display:'+l+';border-bottom:0;border-left:0;border-right:0;margin: 10px auto auto auto;">',h+='<section style="margin:0 10px 0 10px;padding:0;">',h+='<div id="dialogfile_progressbatchfiles" style="float:left;width:75%;">Total Files</div>',h+='<div id="dialogfile_progresspercentbatch" style="display:'+l+';text-align: right;overflow:hidden;"></div>',h+="</section>",h+='<progress id="dialogfile_progressbatch" style="margin:0 10px 0 10px;width:300px"></progress>',h+="</div>",h+='<div id="dialogfile_progresstextbatch" style="display:'+l+';margin:0 10px 10px 20px;">&nbsp;</div>'),_s&&(h+='<button tabindex="0" id="dialogfile_uploadstop" type="button" data-btype="stopUpload" class="omnis-button file-butt" style="margin:10px 10px 10px 10px;width:auto;color:'+r.getTextColorString(this.buttonColors.stopUpload.text,this.themeableData.backgroundColor,this.DefaultColors.UPLOAD_STOP_BUTTON_TEXT)+';">'+this.getTranslatableString(this.getAttributeName(es),jGetOmnisString(this.form.inst,"ctl_file_stopbutton",null)).replace(/ /g,"&nbsp;")+"</button>"),h+="</div></div>",(i=document.createElement("form")).id="dialogfile_uploadform",i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.enctype="multipart/form-data",i.encoding="multipart/form-data",i.acceptCharset="UTF-8",jOmnis.addClass(i,["".concat(this.baseClassName.split(" ")[0],"-dialog"),this.getTheme().getCSSClass()]),i.method="post",i.innerHTML=h,jOmnis.touchDevice?i.children[0].ontouchstart=omnisDFMouseDown:i.children[0].onmousedown=omnisDFMouseDown,this.setDialogAsValid()}if(i.action=e,this.showOverlay(),i.style.zIndex=+this.dialogMask.style.zIndex+1,this.mSetDisplayNone=!1,i.style.opacity=0,i.style.display="none",document.body.appendChild(i),document.addEventListener("keydown",this.mEventFunction,!0),this.closeButton=document.getElementById("dialogfile_close"),i.onkeydown=function(e){27!=(e.keyCode||e.which)||t.closeButton.disabled||t.closeUploadDialog(i)},s){var d=document.getElementById("dialogfile_progress");if(null==d||null==d.max){d&&d.parentNode&&d.parentNode.removeChild(d);var p=document.getElementById("dialogfile_progressdiv");p.innerHTML='<div style="border-style:solid;border-width:1px;margin:8px;width:300px;height:16px;border-color:gray;"></div>',p.firstChild.innerHTML='<div id="dialogfile_progress" style="width:0;height:100%;background-color:blue;">&nbsp;</div>'}}this.progressElement=document.getElementById("dialogfile_progress"),this.progressTextElement=document.getElementById("dialogfile_progresstext"),this.progressPercentElement=document.getElementById("dialogfile_progresspercent"),this.progressCurrentFileElement=document.getElementById("dialogfile_progresscurrentfile"),this.mMultipleFileUpload&&(this.progressElementBatch=document.getElementById("dialogfile_progressbatch"),this.progressTextElementBatch=document.getElementById("dialogfile_progresstextbatch"),this.progressPercentBatchElement=document.getElementById("dialogfile_progresspercentbatch"),this.progressBatchFilesElement=document.getElementById("dialogfile_progressbatchfiles")),this.resetAllProgressElements(),this.stopUpload=document.getElementById("dialogfile_uploadstop"),_s||(this.activityGif=document.getElementById("dialogfile_activitygif")),i.style.display="block";var m=jOmnis.getWindowClientSize();if(i.style.left=(m.width-i.offsetWidth)/2+"px",i.style.top=(m.height-i.offsetHeight)/2+"px",this.upload=document.getElementById("dialogfile_submit"),this.fileInputLabel=document.getElementById("dialogfile_button_label"),this.fileInputElem=document.getElementById("dialogfile_button"),this.fileInputElem.onchange=function(e){var i=document.getElementById("dialogfile_button_label");if(""!=t.fileInputElem.value){var s="";s=this.files&&this.files.length>1?"".concat(this.files.length," files selected"):e.target.value.split("\\").pop(),i.innerHTML=s,t.upload.disabled=!1,jOmnis.addClass(t.upload,"isactive"),t.resetAllProgressElements(),t.upload.focus()}else i.innerHTML=t.getFileButtonLabelText(),t.upload.disabled=!0,jOmnis.removeClass(t.upload,"isactive"),t.resetAllProgressElements(),t.fileInputElem.focus()},this.closeButton.onclick=function(){t.closeUploadDialog(i)},this.setProgressTextOnAbort=!0,this.upload.disabled=""==this.fileInputElem.value,this.upload.disabled?jOmnis.removeClass(this.upload,"isactive"):jOmnis.addClass(this.upload,"isactive"),this.lastPosition=0,this.lastTotalSize=0,this.upload.onfocus=function(){jOmnis.lastModalDialogFocus=t.upload},this.upload.onclick=function(){t.batchTotalSize=0,t.batchPosition=0,t.firstPassOfProgressEvent=!0,t.lastPosition=0,_s&&(t.lastFileNumber=t.fileInputElem.files.length-1),t.batchFileSizeHasBeenCorrected=-1,t.uploadFiles(t,i)},this.stopUpload.disabled=!0,jOmnis.removeClass(this.stopUpload,"isactive"),this.stopUpload.onfocus=function(){jOmnis.lastModalDialogFocus=t.stopUpload},this.stopUpload.onclick=function(){return _s?t.xhr&&(t.mStopping=!0,t.xhr.abort(),t.mStopping=!1,t.uploadAborted()):(t.setiFrameSrc(),t.uploadAborted()),!1},s){var f=function(e,i,s){e.onmouseenter=e.onmouseleave=e.onfocus=e.onblur=t.mEventFunction,jOmnisEffects.addRippleToElem(e,t.getTheme(),!0,i,At._j,s)},g=document.getElementById("dialogfile_button");g.onfocus=g.onblur=t.mEventFunction,f(document.getElementById("dialogfile_pseudobutton"),ctrl_pushbutton.getFlatButtonFocusColor(this.form.inst,this.buttonColors.file.background,this.buttonColors.file.text),g),f(this.upload,ctrl_pushbutton.getFlatButtonFocusColor(this.form.inst,this.buttonColors.upload.background,this.buttonColors.upload.text)),f(this.stopUpload,ctrl_pushbutton.getFlatButtonFocusColor(this.form.inst,this.buttonColors.stopUpload.background,this.buttonColors.stopUpload.text))}this.fileInputElem.focus(),jOmnis.setOpacity(i,0),i.style[jOmnis.transitionProperty]="opacity",i.style[jOmnis.transitionDurationProperty]="1000ms",i.style.opacity=1},Ts.prototype.uploadFiles=function(t,e){t.fileNumber||(t.fileNumber=0);var i=this.convertFileSizeAndUnits(t.mMaxFileUploadSize),s=this.convertFileSizeAndUnits(t.mMaxBatchUploadSize);if(0===t.fileNumber&&_s){for(var r="",n=!1,o="",a=0;a<t.fileInputElem.files.length;a++)t.batchTotalSize+=t.fileInputElem.files[a].size,t.mMaxFileUploadSize&&"undefined"!=typeof FileReader&&t.fileInputElem.files[a].size>t.mMaxFileUploadSize&&(o+=t.fileInputElem.files[a].name+" \n ",n=!0);if(t.mMaxBatchUploadSize&&"undefined"!=typeof FileReader&&t.batchTotalSize>t.mMaxBatchUploadSize){var l=t.getTranslatableString(this.getAttributeName(ds),jGetOmnisString(this.form.inst,"ctl_file_batchsizeerror",null,s));l=l.replace("%1",s+""),n=!0}if(n)return""!==o?(r=(r=(r=t.getTranslatableString(this.getAttributeName(is),jGetOmnisString(this.form.inst,"ctl_file_filesizeerror",null,i,o))).replace("%1",i+"")).replace("%2"," \n "+o),l&&(r+=l)):l&&(r=l),r=jOmnis.cToChar(r).replace(/\n/g,"//"),jOmnis.okMessage(jGetOmnisString(this.form.inst,"error"),r),delete t.fileNumber,!1}if(_s){t.uploadStarting(),t.xhr=new XMLHttpRequest;var h=new FormData;h.append("file",t.fileInputElem.files[t.fileNumber]),t.xhr.upload.addEventListener("progress",(function(e){var i=e.totalSize,s=e.position;if(null==i&&(i=e.total,s=e.loaded),t.mMultipleFileUpload&&(t.batchPosition+=s-t.lastPosition,t.batchFileSizeHasBeenCorrected<t.fileNumber&&(t.batchFileSizeHasBeenCorrected=t.fileNumber,t.batchTotalSize=t.batchTotalSize-t.fileInputElem.files[t.fileNumber].size+i)),t.mMaxFileUploadSize&&"undefined"==typeof FileReader&&i>t.mMaxFileUploadSize){var r=t.getTranslatableString(this.getAttributeName(is),jGetOmnisString(t.form.inst,"ctl_file_filesizeerror",null,t.mMaxFileUploadSize));return r=r.replace("%1",t.mMaxFileUploadSize),jOmnis.okMessage(jGetOmnisString(t.form.inst,"error"),r),t.setProgressTextOnAbort=!1,void t.xhr.abort()}i>0&&("DIV"==t.progressElement.tagName?t.progressElement.style.width=s/i*100+"%":(t.progressElement.max=i,t.progressElement.value=s),t.progressElement.hasAttribute("aria-valuemin")||(t.progressElement.setAttribute("aria-valuemin","0"),t.progressElement.setAttribute("aria-valuemax","100")),t.progressElement.setAttribute("aria-valuenow",s/i*100),t.mMultipleFileUpload&&("DIV"==t.progressElementBatch.tagName?t.progressElementBatch.style.width=t.batchPosition/t.batchTotalSize*100+"%":(t.progressElementBatch.max=t.batchTotalSize,t.progressElementBatch.value=t.batchPosition),t.progressElementBatch.hasAttribute("aria-valuemin")||(t.progressElementBatch.setAttribute("aria-valuemin","0"),t.progressElementBatch.setAttribute("aria-valuemax","100")),t.progressElementBatch.setAttribute("aria-valuenow",s/i*100))),t.setProgressText(s,i,t.batchPosition,t.batchTotalSize),t.lastPosition=s,t.lastTotalSize=i,t.firstPassOfProgressEvent=!1}),!1),t.xhr.onreadystatechange=function(){if(4==t.xhr.readyState&&!t.mStopping){if(200!=t.xhr.status)return null!=t.xhr.responseText&&t.xhr.responseText.length>0&&jOmnis.okMessage("",t.xhr.responseText,t.fileInputElem),void t.uploadError();if("undefined"!=typeof FileReader&&(t.lastPosition<t.lastTotalSize||0==t.lastTotalSize)){"DIV"==t.progressElement.tagName?t.progressElement.style.width="100%":(t.progressElement.max=100,t.progressElement.value=100);var i=t.fileInputElem.files[0].size;i<t.lastTotalSize&&(i=t.lastTotalSize),t.setProgressText(i,i)}var s=t.fileInputElem.files.length;t.fileNumber>=s-1&&t.enableElements(!0,t.mAutoCloseAfterUpload,t.CLEAR_FILE_SELECTION&&!t.mAutoCloseAfterUpload),t.canSendEvent(gs.evFileUploaded)&&t.sendEvent("evFileUploaded"),t.firstPassOfProgressEvent=!0,t.lastPosition=0,t.formElement=e}},t.xhr.upload.addEventListener("error",(function(e){t.uploadError()}),!1),t.xhr.upload.addEventListener("abort",(function(e){t.uploadAborted()}),!1),t.xhr.open("POST",e.action),t.xhr.send(h)}else{var c="dialogfile_iframe_"+t.clientElem.id;e.target=c,null==t.iframeElement&&(t.iframeElement=document.createElement("iframe"),t.iframeElement.name=c,t.iframeElement.id=c,t.iframeElement.style.display="none",t.setiFrameSrc(),document.body.appendChild(t.iframeElement),t.iframeElement.onload=function(){t.doUploadStopped()}),t.formElement=e,e.submit(),t.uploadStarting()}return!1},Ts.prototype.handleEventResult=function(t,e){if(this.superclass.handleEventResult.call(this,t,e),this.mMultipleFileUpload){if(this.fileNumber<this.lastFileNumber)return this.fileNumber++,void this.uploadFiles(this,this.formElement);delete this.fileNumber}if(this.mAutoCloseAfterUpload){var i=this;setTimeout((function(){i.closeUploadDialog()}),this.AUTOCLOSE_TIMEOUT)}},Ts.prototype.doUploadStopped=function(){this.enableElements(!0,this.mAutoCloseAfterUpload),this.canSendEvent(gs.evFileUploaded)&&this.sendEvent("evFileUploaded")},Ts.prototype.uploadStarting=function(){this.stopUpload.disabled=!1,jOmnis.addClass(this.stopUpload,"isactive"),this.upload.disabled=!0,jOmnis.removeClass(this.upload,"isactive"),this.closeButton.disabled=!0,jOmnis.removeClass(this.closeButton,"isactive"),this.fileInputElem.disabled=!0,jOmnis.removeClass(this.fileInputElem,"isactive"),this.stopUpload.focus(),_s||(this.activityGif.style.display="inline")},Ts.prototype.enableElements=function(t,e,i){if(this.stopUpload.disabled=!0,jOmnis.removeClass(this.stopUpload,"isactive"),i){this.fileInputElem.value=null;var s=this.fileInputLabel;s&&(s.innerText=this.fileButtonLabelText)}e||(i||(this.upload.disabled=!1,jOmnis.addClass(this.upload,"isactive")),this.closeButton.disabled=!1,jOmnis.addClass(this.closeButton,"isactive"),this.fileInputElem.disabled=!1,jOmnis.addClass(this.fileInputElem,"isactive"),_s||(this.activityGif.style.display="none"),this.xhr&&(delete this.xhr,this.xhr=null),t?this.closeButton.focus():this.fileInputElem.focus())},Ts.prototype.convertFileSizeAndUnits=function(t){for(var e=0;t>1e3&&e<8;)t=Math.round(t/1e3*100)/100,e++;return t+this.fileUnits[e]},Ts.prototype.setProgressText=function(t,e,i,s){var r=Math.round(t/e*100);t=this.convertFileSizeAndUnits(t),e=this.convertFileSizeAndUnits(e);var n=this.getTranslatableString(this.getAttributeName(ns),jGetOmnisString(this.form.inst,"ctl_file_filesizetext",null,t,e));n=(n=n.replace("%1",t+"")).replace("%2",e+""),this.progressTextElement.innerHTML=n;var o=this.getTranslatableString("data-progresscurrentfile","%1");(o=o.replace("%1",this.fileInputElem.files[this.fileNumber].name+"")).length>this.MAX_FILENAME_LENGTH&&(o=o.slice(0,this.MAX_FILENAME_LENGTH/2-1)+"..."+o.slice(-(this.MAX_FILENAME_LENGTH/2-1))),this.progressCurrentFileElement.innerHTML=o;var a=this.getTranslatableString("dialogfile_progresspercent","%1%");if(a=a.replace("%1",r),this.progressPercentElement.innerHTML=a,this.mMultipleFileUpload){var l=Math.round(i/s*100);100===l&&this.fileNumber+1<this.fileInputElem.files.length&&(l=99),i=this.convertFileSizeAndUnits(i),s=this.convertFileSizeAndUnits(s);var h=this.getTranslatableString(this.getAttributeName(ps),jGetOmnisString(this.form.inst,"ctl_file_batchsizetext",null,i,s));h=(h=h.replace("%1",i+"")).replace("%2",s+""),this.progressTextElementBatch.innerHTML=h;var c=this.getTranslatableString("data-progressfilesuploaded",jGetOmnisString(this.form.inst,"ctl_file_filesuploaded",null,+this.fileNumber+1,this.fileInputElem.files.length));c=(c=c.replace("%1",+this.fileNumber+1+"")).replace("%2",this.fileInputElem.files.length),this.progressBatchFilesElement.innerHTML=c;var u=this.getTranslatableString("dialogfile_progresspercentbatch","%1%");u=u.replace("%1",l),this.progressPercentBatchElement.innerHTML=u}},Ts.prototype.setiFrameSrc=function(){this.iframeElement.src="about:blank"},Ts.prototype.resetAllProgressElements=function(){this.progressTextElement.innerHTML="&nbsp;",_s&&(this.progressPercentElement.innerHTML="&nbsp;",this.progressCurrentFileElement.innerHTML="&nbsp;"),this.mMultipleFileUpload&&(this.progressTextElementBatch.innerHTML="&nbsp;",this.progressPercentBatchElement.innerHTML="&nbsp;",this.progressBatchFilesElement.innerHTML="&nbsp;"),this.resetProgressElement()},Ts.prototype.resetProgressElement=function(){"DIV"==this.progressElement.tagName?this.progressElement.style.width=0:this.progressElement.value=0,this.mMultipleFileUpload&&("DIV"==this.progressElementBatch.tagName?this.progressElementBatch.style.width=0:this.progressElementBatch.value=0)},Ts.prototype.closeUploadDialog=function(t){var e=!0;if(null==t){if(!(t=document.getElementById("dialogfile_uploadform"))||"none"==t.style.display||this.mSetDisplayNone)return;e=!1}this.hideOverlay(),t.style[jOmnis.transitionProperty]="opacity",t.style[jOmnis.transitionDurationProperty]="1000ms",t.style.opacity=0;var i=this;this.mSetDisplayNone=!0,setTimeout((function(){i.mSetDisplayNone&&(t.style.display="none",i.mSetDisplayNone=!1)}),Cs),e&&this.canSendEvent(gs.evFileUploadDialogClosed)&&this.sendEvent("evFileUploadDialogClosed"),this.previousActiveElement.focus()},Ts.prototype.showOverlay=function(t){showDialogMask.call(this,!0,!0,"omnis-file-mask"),jOmnis.showModalDialog()},Ts.prototype.hideOverlay=function(){jOmnis.hideModalDialog(!1),removeDialogMask.call(this)},Ts.prototype.uploadError=function(){this.progressTextElement.innerHTML=this.getTranslatableString(this.getAttributeName(ss),jGetOmnisString(this.form.inst,"ctl_file_uploaderror")),this.resetProgressElement(),this.enableElements(!1,!1)},Ts.prototype.uploadAborted=function(){this.setProgressTextOnAbort&&(this.mMultipleFileUpload?this.progressTextElementBatch.innerHTML=this.getTranslatableString(this.getAttributeName(rs),jGetOmnisString(this.form.inst,"ctl_file_uploadstopped")):this.progressTextElement.innerHTML=this.getTranslatableString(this.getAttributeName(rs),jGetOmnisString(this.form.inst,"ctl_file_uploadstopped"))),this.resetProgressElement(),this.enableElements(!0,!1)},Ts.cookieHasValue=function(t,e){for(var i=document.cookie.split(";"),s=0;s<i.length;++s)if(i[s]=jOmnis.trim(i[s]),0==i[s].indexOf(t+"=")&&unescape(i[s].substr(t.length+1))==e)return!0;return!1},Ts.deleteCookiesWithName=function(t,e){for(var i=document.cookie.split(";"),s=0;s<i.length;++s){i[s]=i[s].trim();var r=i[s].split("=")[0];(e&&0===r.indexOf(t)||!e&&r===t)&&(document.cookie=r+"=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT;")}},Ts.getNextAvailableCookieID=function(){for(var t=document.cookie.replace(/ /g,"").split(";"),e=0,i=0;i<t.length;++i){var s=t[i].split("=")[0];if(0===s.indexOf(Ts.COOKIE_PREFIX)){var r=+s.substring(Ts.COOKIE_PREFIX.length);r&&(e=r>e?r:e)}}return e+1},Ts.prototype.getAriaDisabledElem=function(){return null},Ts.prototype.setTabIndex=function(t){return this.hyperlinkElem&&(-1===t||this.elem.disabled?this.hyperlinkElem.removeAttribute("tabindex"):this.hyperlinkElem.tabIndex=0),t},Ts.prototype.activeChanged=function(){this.hyperlinkElem&&this.hyperlinkElem.savedHref&&(this.isActive()?this.hyperlinkElem.href=this.hyperlinkElem.savedHref:this.hyperlinkElem.removeAttribute("href")),this.superclass.activeChanged.call(this)},Ts.deleteCookiesWithName(Ts.COOKIE_PREFIX,!0);var xs=Ts,Ds="$html",Os="$keepproperties",As="$wraptext",Ps="$showruntimepreview";function Is(){this.init_class_inst()}Is.prototype=new ctrl_base,Is.prototype.init_class_inst=function(){this.superclass=ctrl_base.prototype,this.superclass.init_class_inst.call(this),this.mFocusStyle=eBaseFocusStyle.eNone,this.usesNotActiveOverlay=!0,this.mCanHaveDesignBorder=0!=jOmnis.mDesign},Is.prototype.baseClassName="omnis-html",Is.prototype.init_ctrl_inst=function(t,e,i,s){this.superclass.init_ctrl_inst.call(this,t,e,i,s),this.mKeepProperties=!0,this.mHasAlign=!0;var r,n,o,a=this.getClientElem();return this.showRuntimePreview=!!jOmnis.mDesign&&0!=+a.getAttribute("data-rtp"),this.html=(r=atob(a.getAttribute("data-html")),n=this.elem.id,o=n.replace("_frame","_client"),r.replace(/ id=\"[^ \"]+\"/,' id="'.concat(o,'"'))),a.setAttribute("data-html",""),jOmnis.mDesign&&!this.showRuntimePreview&&(this.showRuntimePreview=!0,this.setHtml(),this.showRuntimePreview=!1),(a=this.setHtml()).onchange=this.mEventFunction,this.activeChanged(),this.usesTouchScroll=this.isScrollable(),this.wrapText="1"===a.getAttribute("data-wraptext"),a.style.whiteSpace=this.wrapText||jOmnis.mDesign?"normal":"nowrap",!1},Is.prototype.getProperty=function(t){switch(t){case Os:return this.mKeepProperties;case Ds:return jOmnis.mDesign?"":this.elem.innerHTML;case As:return this.wrapText;case Ps:return this.showRuntimePreview}return this.superclass.getProperty.call(this,t)},Is.prototype.getCanAssign=function(t){switch(t){case Os:case Ds:case As:return!0;case Ps:return 0!=jOmnis.mDesign}return this.superclass.getCanAssign.call(this,t)},Is.prototype.setProperty=function(t,e){if(jOmnis.mDesign)switch(t){case eBaseProperties.font:case eBaseProperties.fontsize:case eBaseProperties.fontstyle:case eBaseProperties.align:case eBaseProperties.textcolor:case eBaseProperties.effect:case eBaseProperties.vertscroll:case eBaseProperties.horzscroll:case eBaseProperties.width:case eBaseProperties.height:case eBaseProperties.backcolor:case eBaseProperties.backalpha:case eBaseProperties.disablesystemfocus:this.form.inst.registerPropertyObject(this)}switch(t){case Os:return this.mKeepProperties=1*e!=0,!0;case Ds:e+="";var i=this.getClientElem();if(jOmnis.mDesign)return 0==e.indexOf("$$base64")&&(this.html=atob(e.substr(8)),this.setHtml(),this.activeChanged()),!0;var s,r,n,o,a,l,h,c,u,d,p,m,f,g,v,b,y,C=i.id,_=i.onfocus,E=i.onchange,w=i.onclick,k=i.ondblclick;i.style&&(s=i.style.position,r=i.style.width,n=i.style.height,this.mKeepProperties&&(o=i.style.overflowX,a=i.style.overflowY,d=i.style.fontFamily,p=i.style.fontSize,m=i.style.fontWeight,f=i.style.fontStyle,g=i.style.textDecoration,v=i.style.color,b=i.style.textAlign,y=i.style.backgroundColor)),this.mKeepProperties&&(l=i.getAttribute("data-effect"),c=i.getAttribute("data-linestyle"),u=i.getAttribute("data-bordercolor"),h=i.getAttribute("data-borderradius"));var T=e.length>4;if(T)T="<div"==e.substr(0,4).toLowerCase();T||(e="<div>"+e+"</div>"),this.elem.innerHTML=e,this.clientElem=this.elem.firstChild,null==this.clientElem&&(this.elem.innerHTML="<div/>",this.clientElem=this.elem.firstChild),this.clientElem.id=C,this.clientElem.onfocus=_,this.clientElem.onchange=E,this.clientElem.onclick=w,this.clientElem.ondblclick=k,jOmnis.addClass(this.clientElem,this.baseClassName);var S=this.getProperty(eBaseProperties.cssclassname);return S&&jOmnis.addClass(this.clientElem,S),this.savedClasses&&jOmnis.addClass(this.clientElem,this.savedClasses),this.clientElem.style&&(null!=s&&(this.clientElem.style.position=s),null!=r&&(this.clientElem.style.width=r),null!=n&&(this.clientElem.style.height=n),this.mKeepProperties&&(null!=o&&(this.clientElem.style.overflowX=o),null!=a&&(this.clientElem.style.overflowY=a),null!=d&&(this.clientElem.style.fontFamily=d),null!=p&&(this.clientElem.style.fontSize=p),null!=m&&(this.clientElem.style.fontWeight=m),null!=f&&(this.clientElem.style.fontStyle=f),null!=g&&(this.clientElem.style.textDecoration=g),null!=v&&(this.clientElem.style.color=v),null!=b&&(this.clientElem.style.textAlign=b),null!=y&&(this.clientElem.style.backgroundColor=y))),this.mKeepProperties&&(null!=l&&this.clientElem.setAttribute("data-effect",l),null!=c&&this.clientElem.setAttribute("data-linestyle",c),null!=u&&this.clientElem.setAttribute("data-bordercolor",u),null!=h&&this.clientElem.setAttribute("data-borderradius",h),null!=l&&this.setBorderFromOmnisDefinition(this.clientElem)),this.setProperty.call(this,As,this.wrapText),this.pdf=!1,!0;case As:return this.wrapText=!!e,this.clientElem.style.whiteSpace=this.wrapText||jOmnis.mDesign?"normal":"nowrap",!0;case Ps:return jOmnis.mDesign&&(this.showRuntimePreview=!!e,this.setHtml()),!0;case eBaseProperties.autoscroll:case eBaseProperties.horzscroll:case eBaseProperties.vertscroll:var x=this.superclass.setProperty.call(this,t,e);return this.usesTouchScroll=this.isScrollable(),x}return this.superclass.setProperty.call(this,t,e)},Is.prototype.applyPropertyChanges=function(){jOmnis.sendDesignMessage({messageType:eDesignMessageTypes.cIDMrefreshHtml,context:this.getDesignContext()})},Is.prototype.handleEvent=function(t){return"change"===t.type?(this.canSendEvent(eBaseEvent.evAfter)&&this.sendEvent(eBaseEvent.evAfter),!0):this.superclass.handleEvent.call(this,t)},Is.prototype.activeChanged=function(){var t=this.getClientElem();if(this.elem.disabled)t.onclick=null,t.ondblclick=null;else{var e=this.mEventFunction;t.onclick=e,t.ondblclick=e}this.superclass.activeChanged.call(this),t.classList,this.savedClasses="";for(var i=0;i<t.classList.length;i++)-1===this.baseClassName.indexOf(t.classList[i])&&(this.savedClasses=this.savedClasses?this.savedClasses+" "+t.classList[i]:t.classList[i])},Is.prototype.setHtml=function(){this.designBorderDiv&&(this.designBorderDiv.parentNode&&this.designBorderDiv.parentNode.removeChild(this.designBorderDiv),this.designBorderDiv=null);var t=this.getClientElem(),e=t.id;if(jOmnis.mDesign)if(this.showRuntimePreview)try{this.elem.innerHTML=this.html}catch(t){this.elem.innerHTML="",this.elem.appendChild(document.createElement("div")),this.elem.firstChild.id=e,this.elem.firstChild.textContent=""+t}else t.textContent=this.html,t.style.overflow="hidden",t.style.backgroundColor=this.getTheme().getColorString(o.JT,this.DefaultColors.background,1),t.style.color=this.getTheme().getTextColorString(o.JT,this.DefaultColors.background,this.DefaultColors.text),t.style.whiteSpace=this.wrapText||jOmnis.mDesign?"normal":"nowrap",t.style.width="100%",t.style.height="100%";else this.elem.innerHTML=this.html;this.clientElem=null,(t=this.getClientElem()).style.boxSizing="border-box",jOmnis.addClass(t,this.baseClassName);var i=this.getProperty(eBaseProperties.cssclassname);if(i&&jOmnis.addClass(t,i),jOmnis.mDesign&&(this.setBorderFromOmnisDefinition(t),this.showRuntimePreview&&jOmnis.setBackgroundFromOmnisDefinition(t),this.form.isResponsive&&this.currentLayout)){var s=this.cachedPositionInfo.getLayoutInfo(this.currentLayout);this.setFilterForVisibleInBreakpoint(s.hiddenInBreakpoint)}return t};var Ls,js=Is;function Ns(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function Bs(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ns(Object(i),!0).forEach((function(e){Rs(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ns(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Rs(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Ms="$isvertical",Fs="$shouldunderline",Hs="$selectedtextcolor",zs="$hottextcolor",Ws="$hotbackcolor",$s="$autoclose",Us="$listcolumn",Vs="$extraspace";Ks.prototype=new ctrl_base,Ks.prototype.setFillColor=!0;var qs=Bs(Bs({},a.Mr),{},{HOT_TEXT:"hotText"});function Ks(){this.init_class_inst()}Ks.prototype.DefaultColors=Bs(Bs({},ctrl_base.prototype.DefaultColors),{},(Rs(Ls={},qs.BACKGROUND,o.l1[o._l.background]),Rs(Ls,qs.HOT_TEXT,o.l1[o._l.primary]),Ls)),Ks.prototype.mAcceptsReturn=!0,Ks.prototype.mAcceptsEscape=!0,Ks.prototype.init_class_inst=function(){this.superclass=ctrl_base.prototype,this.superclass.init_class_inst.call(this),this.isvertical=!1,this.selectedtextcol="black",this.shouldunderline=!0,this.baseClassName="omnis-hyper",this.activeReplacesEnabled=!0,this.mFocusStyle=eBaseFocusStyle.eWithin,this.mCanHaveDesignBorder=0!=jOmnis.mDesign,this.showDesignName=!0},Ks.prototype.init_ctrl_inst=function(t,e,i,s){this.mHandleNumberColumn=!0,this.mHasDisplayFormat=!0,this.mHasAlign=!0,this.superclass.init_ctrl_inst.call(this,t,e,i,s);var r=this.getClientElem();s&&((e=this.getCtrlElem("_scroll"))&&(e.id=e.id+s),(e=this.getCtrlElem("_content"))&&(e.id=e.id+s));this.isvertical=1*r.getAttribute("data-isvertical")!=0,this.selectedtextcol=+r.getAttribute("data-selectedtextcolor"),this.shouldunderline=1*r.getAttribute("data-shouldunderline")!=0;var n=r.getAttribute("data-autoclose");this.mAutoClose=null!=n&&1*n!=0,this.mHotBackColor=+r.getAttribute("data-hotbackcolor");var o=r.getAttribute("data-es");return this.mExtraSpace=null==o?0:1*o,o=r.getAttribute("data-lc"),this.mListColumn=null==o?1:1*o,this.mFirst=!0,this.mNeedFontHeight=!0,this.fontChanged(),this.mFirst=!1,this.popupSectionIdPrefix=r.id+"_hypsec_",this.update(),r.onfocus=this.mEventFunction,r.onblur=this.mEventFunction,r.onkeydown=this.mEventFunction,r.setAttribute("role","menu"),(e=this.getCtrlElem("_scroll"))&&e.setAttribute("role","presentation"),(e=this.getCtrlElem("_content"))&&e.setAttribute("role","presentation"),this.horzPaddingChanged(),!1},Ks.prototype.getHtmlForBasicDisplay=function(t,e,i){var s=this.getClientElem(),r=s.style.color,n="color:"+r+(";font-family:"+s.style.fontFamily)+(";font-size:"+s.style.fontSize)+";overflow:hidden;text-overflow:ellipsis;background-color:"+s.style.backgroundColor+";--om-tint-color:".concat(r);this.shouldunderline&&(n+=";text-decoration:underline;"),this.mExtraSpace&&(n+=";height:"+(this.mExtraSpace+this.mFontHeight)+"px;line-height:"+(this.mExtraSpace+this.mFontHeight)+"px;");var o=this.popupSectionIdPrefix+t;if(s.className&&s.className.length)var a=' class="'+s.className;else a="";var l="";return jOmnis.touchDevice?(l='" name="'+t+'" role="menuitem',a+=" hyper-row"):l='" aria-hidden="true',i?'<div id="'+o+'"'+a+l+'" style="'+n+'">'+jOmnis.escapeHTML(e,!0)+"</div>":'<div id="'+o+'"'+a+l+'" style="'+n+'">'+e+"</div>"},Ks.prototype.delete_class_inst=function(){this.closePopup(),this.superclass.delete_class_inst.call(this)},Ks.prototype.updateCtrl=function(){var t=this.getClientElem(),e=this.rowNumber?this.getCtrlElem("_content"+this.rowNumber):this.getCtrlElem("_content");t.style.cursor="default";for(var i=this.getLineCount(),s="",r=0;r<i;r++){var n=r+1,o=this.getColumnData(n);s+="-"===o?this.getHtmlForBasicDisplay(n,"<br>",!1):this.getHtmlForBasicDisplay(n,o,!0)}e.innerHTML=s,jOmnis.useiScroll?t.onclick=this.mEventFunction:(this.currentLine=this.selectedLine=this.getCurrentLine(),this.getRowFromLineNumber(this.selectedLine)&&this.setAriaActiveDescendant(this.getRowFromLineNumber(this.selectedLine).id),this.updatePopUp(),jOmnis.touchDevice||(t.onmouseover=this.mEventFunction))},Ks.prototype.closePopup=function(){if(this.ctrl_hyperlink_popup_dlg_close){if(this.mDisableSystemFocus||jOmnis.removeClass(this.clientElem,"noFocus"),jOmnis.touchDevice)return this.form.inst.elem.removeChild(this.ctrl_hyperlink_popup_dlg_close),void(this.ctrl_hyperlink_popup_dlg_close=null);this.ctrl_hyperlink_popup_dlg_close.style.visibility="hidden",this.ctrl_hyperlink_popup_dlg_close.style.zIndex=0,this.selectedLine=this.currentLine}},Ks.prototype.openPopup=function(){if(!jOmnis.touchDevice){var t=this.getClientElem(),e=this.elem;if(this.hypsecContentContainer=this.getCtrlElem("_content"),!this.ctrl_hyperlink_popup_dlg_close){this.ctrl_hyperlink_popup_dlg_close=document.createElement("div"),this.closeId=t.id+"_hyperlink_dlg_close",this.ctrl_hyperlink_popup_dlg_close.id=this.closeId;var i=this.mEventFunction;this.ctrl_hyperlink_popup_dlg_close.onmouseover=i,this.ctrl_hyperlink_popup_dlg_close.onclick=i,this.ctrl_hyperlink_popup_dlg_close.style.top=0,this.ctrl_hyperlink_popup_dlg_close.style.position="absolute",this.ctrl_hyperlink_popup_dlg_close.style.left=0,this.ctrl_hyperlink_popup_dlg=document.createElement("div"),this.ctrl_hyperlink_popup_dlg.id=t.id+"_hyperlink_popup",this.ctrl_hyperlink_popup_dlg.className=this.getTheme().getCSSClass(),this.ctrl_hyperlink_popup_dlg_close.appendChild(this.ctrl_hyperlink_popup_dlg),this.ctrl_hyperlink_popup_dlg.style.fontFamily=t.style.fontFamily,this.ctrl_hyperlink_popup_dlg.style.fontSize=t.style.fontSize,this.ctrl_hyperlink_popup_dlg.style.fontWeight=t.style.fontWeight,this.ctrl_hyperlink_popup_dlg.style.fontStyle=t.style.fontStyle,this.ctrl_hyperlink_popup_dlg.style.textDecoration=t.style.textDecoration,this.ctrl_hyperlink_popup_dlg.style.color=t.style.color,this.ctrl_hyperlink_popup_dlg.style.textAlign=t.style.textAlign,this.mTextWidthDiv=this.getTextWidthDiv(),this.mTextWidthDiv.style.padding=t.style.padding,this.mMaxTextWidth=t.clientWidth;var s=this.hypsecContentContainer.cloneNode(!0);s.id=s.id.replace("content","rows"),s.children.forEach((function(e){e.style.padding=t.style.padding}));for(var r=this.getTheme(),n=r.getColorString(this.selectedtextcol,this.DefaultColors[qs.HOT_TEXT]),a=r.getColorString(this.mHotBackColor),l=0;l<s.children.length;l++){var h=s.children[l];h.id=h.id.replace("hypsec","row"),h.setAttribute("name",l+1),h.setAttribute("role","menuitem"),h.removeAttribute("aria-hidden"),h.tabIndex=-1,jOmnis.addClass(h,"hyper-row"),l+1===this.selectedLine&&(h.style.color=n,this.mHotBackColor!==o.JT&&(h.style.backgroundColor=a)),this.mTextWidthDiv.innerHTML=h.innerHTML,this.mTextWidthDiv.clientWidth>this.mMaxTextWidth&&(this.mMaxTextWidth=this.mTextWidthDiv.clientWidth)}this.ctrl_hyperlink_popup_dlg.appendChild(s),this.removeTextWidthDiv(this.mTextWidthDiv),this.mTextWidthDiv=null,this.ctrl_hyperlink_popup_dlg.style.cursor="pointer",this.ctrl_hyperlink_popup_dlg.style.width=this.mMaxTextWidth+"px",this.ctrl_hyperlink_popup_dlg.style.backgroundColor=t.style.backgroundColor,this.ctrl_hyperlink_popup_dlg.style.position="absolute",this.ctrl_hyperlink_popup_dlg.style.height=this.clientElem.clientHeight+"px",this.ctrl_hyperlink_popup_dlg.style.overflow="visible",this.ctrl_hyperlink_popup_dlg.style.whiteSpace="nowrap",this.ctrl_hyperlink_popup_dlg.onmouseout=i,jOmnis.touchDevice?this.form.inst.elem.appendChild(this.ctrl_hyperlink_popup_dlg_close):document.body.appendChild(this.ctrl_hyperlink_popup_dlg_close)}var c=jOmnis.getElemPosRelativeToAncestor(t);this.ctrl_hyperlink_popup_dlg.style.top=c.y+"px",this.ctrl_hyperlink_popup_dlg.style.left=c.x+"px";var u=jOmnis.getWindowClientSize();this.ctrl_hyperlink_popup_dlg_close.style.width=this.mAutoClose?0:u.width+"px",this.ctrl_hyperlink_popup_dlg_close.style.height=this.mAutoClose?0:u.height+"px",this.ctrl_hyperlink_popup_dlg_close.style.visibility="hidden";var d=this.ctrl_hyperlink_popup_dlg.clientHeight,p=c.y+e.offsetHeight;if(this.isvertical&&d>e.offsetHeight?this.ctrl_hyperlink_popup_dlg.style.top=p-d+"px":this.ctrl_hyperlink_popup_dlg.style.top=c.y+"px",this.ctrl_hyperlink_popup_dlg_close.style.visibility="visible",this.ctrl_hyperlink_popup_dlg_close.style.zIndex=jOmnis.getPopupZIndex(this.form,1),s||(s=this.getCtrlElem("_row")),s){var m="";for(l=0;l<s.children.length;l++)h=s.children[l],m=m?m+" "+h.id:h.id;t.setAttribute("aria-owns",m)}this.updateSystemFocus()}},Ks.prototype.updateSystemFocus=function(){if(!this.mDisableSystemFocus){var t=this.clientElem,e=this.getCtrlElem("_rows");e&&e.clientHeight>t.clientHeight&&(jOmnis.addClass(t,"noFocus"),e&&(e.className="showFocusDiv"))}},Ks.prototype.sizeChanged=function(){this.updateSystemFocus(),this.superclass.sizeChanged.call()},Ks.prototype.handleEvent=function(t){switch(t.type){case"keydown":var e=!(jOmnis.touchDevice||this.ctrl_hyperlink_popup_dlg_close&&"visible"===this.ctrl_hyperlink_popup_dlg_close.style.visibility),i=this.getLineCount();switch(OmnisKeyboardHandler.getNormalizedEventKey(t)){case"Escape":e?this.sendNextCancel():this.closePopup();break;case"Enter":e?this.openPopup():this.canSendEvent(eBaseEvent.evClick)?(a=this.getRowFromLineNumber(this.selectedLine),this.clickFromKeyboard=!0,jOmnis.sendDOMEvent(a,"click",!0),this.clickFromKeyboard=!1):this.sendNextOk();break;case"ArrowDown":e&&this.openPopup();for(var s=this.selectedLine<i?this.selectedLine+1:1,r=this.getRowFromLineNumber(s);"BR"===r.firstChild.tagName;)s=s<i?s+1:1,r=this.getRowFromLineNumber(s);var n=!0;break;case"ArrowUp":for(e&&this.openPopup(),s=this.selectedLine>1?this.selectedLine-1:i,r=this.getRowFromLineNumber(s);"BR"===r.firstChild.tagName;)s=s>1?s-1:i,r=this.getRowFromLineNumber(s);n=!0}return n&&r&&(t.preventDefault(),this.destTarget=r,jOmnis.sendDOMEvent(r,"mouseover",!0),this.selectedLine=s,this.getRowFromLineNumber(this.selectedLine)&&this.setAriaActiveDescendant(this.getRowFromLineNumber(this.selectedLine).id),this.destTarget=null),!0;case"focus":this.currentLine=this.getCurrentLine(),this.selectedLine=this.currentLine||1,n=!0;break;case"mouseover":if(this.elem.disabled)return!0;f=this.getClientElem();var a=t.target;if(a.id==this.closeId&&this.mAutoClose&&document.activeElement!==f)return this.closePopup(),!0;if((0==a.id.indexOf(this.popupSectionIdPrefix)||"focus"===t.type&&a===this.clientElem)&&this.openPopup(),a.getAttribute("name")||n){"hidden"===this.ctrl_hyperlink_popup_dlg_close.visibility&&this.openPopup();var l=this.getRowFromLineNumber(this.selectedLine);l&&this.setAriaActiveDescendant(l.id),a===f&&(a=l),a!==l&&(this.selectedLine=parseInt(a.attributes.name.value),this.getRowFromLineNumber(this.selectedLine)&&this.setAriaActiveDescendant(this.getRowFromLineNumber(this.selectedLine).id));for(var h=f.style.color,c=this.ctrl_hyperlink_popup_dlg.querySelectorAll(".hyper-row"),u=0;u<c.length;u++)a.attributes.name.value!==c[u].attributes.name.value&&(c[u].style.color=h,Theme.SetThemedIconColor(c[u],h),this.mHotBackColor!==o.JT&&(c[u].style.backgroundColor=f.style.backgroundColor));var d=this.getTheme(),p=d.getColorString(this.selectedtextcol,this.DefaultColors[qs.HOT_TEXT]);a.style.color=p,Theme.SetThemedIconColor(a,p),this.mHotBackColor!==o.JT&&(a.style.backgroundColor=d.getColorString(this.mHotBackColor))}return!0;case"blur":var m=!0;case"mouseout":if(!this.isActive())return!0;a=t.target;var f=this.getClientElem();a.style.color=f.style.color,this.mHotBackColor!==o.JT&&(a.style.backgroundColor=f.style.backgroundColor);var g=t.relatedTarget||t.toElement;return g&&g.getAttribute("name")||!this.mAutoClose&&!m||document.activeElement===this.clientElem||this.closePopup(),!0;case"click":if(!this.isActive())return!0;if(a=t.target,f=this.getClientElem(),jOmnis.touchDevice&&a!==f){var v=this.getTheme();a.style.color=v.getColorString(this.selectedtextcol,this.DefaultColors[qs.HOT_TEXT]),this.mHotBackColor!==o.JT&&(a.style.backgroundColor=v.getColorString(this.mHotBackColor));var b=this;setTimeout((function(){a.style.color=f.style.color,b.mHotBackColor!==o.JT&&(a.style.backgroundColor=f.style.backgroundColor)}),250)}if(a.id==this.closeId)return this.closePopup(),!0;var y=a.getAttribute("name");return y&&this.canSendEvent(eBaseEvent.evClick)?(this.setData(y,"#L"),this.eventParamsAdd("pLineNumber",y),this.sendEvent(eBaseEvent.evClick)):(jOmnis.showOverlay(!1),setTimeout((function(){jOmnis.hideOverlay(!1)}),0)),this.clickFromKeyboard||this.closePopup(),!0;default:return this.superclass.handleEvent.call(this,t)}},Ks.prototype.getRowFromLineNumber=function(t){if(jOmnis.touchDevice)var e=this.clientElem.querySelectorAll(".hyper-row");else e=this.ctrl_hyperlink_popup_dlg?this.ctrl_hyperlink_popup_dlg.querySelectorAll(".hyper-row"):null;if(e)for(var i=0;i<e.length;i++)if(parseInt(e[i].attributes.name.value)===t)return e[i]},Ks.prototype.fontChanged=function(){this.superclass.fontChanged.call(this),this.mFirst||(this.updatePopUp(),this.update())},Ks.prototype.sizeChanged=function(){this.superclass.sizeChanged.call(this),this.updatePopUp()},Ks.prototype.visibilityChanged=function(){var t=this.superclass.visibilityChanged.call(this);return this.closePopup(),t},Ks.prototype.getProperty=function(t){switch(t){case Ms:return this.isvertical;case Fs:return this.shouldunderline;case Hs:case zs:return this.selectedtextcol;case Ws:return this.mHotBackColor;case $s:return this.mAutoClose;case Us:return this.mListColumn;case Vs:return this.mExtraSpace}return this.superclass.getProperty.call(this,t)},Ks.prototype.getCanAssign=function(t){switch(t){case Ms:case Fs:case Hs:case zs:case Ws:case $s:case Us:case Vs:case eBaseProperties.horzPadding:return!0}return this.superclass.getCanAssign.call(this,t)},Ks.prototype.setProperty=function(t,e){switch(t){case Ms:return this.isvertical=1*e!=0,!0;case Fs:return this.shouldunderline=1*e!=0,this.update(),!0;case Hs:case zs:return this.selectedtextcol=+e,!0;case Ws:return this.mHotBackColor=+e,!0;case $s:return this.mAutoClose=1*e!=0,!0;case Us:var i=this.mListColumn;return this.mListColumn=1*e,this.mListColumn<=0&&(this.mListColumn=1),this.mListColumn==i?!0:(-1!=this.dataIndex&&this.newDataIndex(),this.update(),!0);case Vs:return i=this.mExtraSpace,this.mExtraSpace=1*e,this.mExtraSpace<0&&(this.mExtraSpace=0),this.mExtraSpace==i||this.update(),!0;case eBaseProperties.textcolor:case eBaseProperties.align:return this.superclass.setProperty.call(this,t,e),this.updatePopUp(),this.update(),!0;case eBaseProperties.cssclassname:return this.superclass.setProperty.call(this,t,e),this.update(),!0}return this.superclass.setProperty.call(this,t,e)},Ks.prototype.horzPaddingChanged=function(){this.superclass.horzPaddingChanged.call(this),this.updatePopUp()},Ks.prototype.updatePopUp=function(){if(this.ctrl_hyperlink_popup_dlg_close){var t="visible"==this.ctrl_hyperlink_popup_dlg_close.style.visibility;jOmnis.touchDevice?this.form.inst.elem.removeChild(this.ctrl_hyperlink_popup_dlg_close):document.body.removeChild(this.ctrl_hyperlink_popup_dlg_close),this.ctrl_hyperlink_popup_dlg_close=null,t&&this.openPopup()}},Ks.prototype.getLineCount=function(){return this.getData("#LCNT")},Ks.prototype.getColumnData=function(t){var e=this.getData("#COL",t,this.mListColumn,null,"s",this.getDisplayFormat());return this.isNumber&&(e=jOmnis.numberToLocaleAndDps(e,this.numberDps)),e},Ks.prototype.getCurrentLine=function(){return parseInt(this.getData("#L"))||1};var Gs=Ks;function Ys(){this.init_class_inst()}Ys.prototype=new ctrl_base,Ys.eLabelTagType={0:"label",1:"h1",2:"h2",3:"h3",4:"h4",5:"h5",6:"h6",7:"p"},Ys.prototype.mAcceptsReturn=!0,Ys.prototype.setFillColor=!0,Ys.prototype.init_class_inst=function(){this.superclass=ctrl_base.prototype,this.superclass.init_class_inst.call(this),this.usesTouchScroll=!1,this.mPreStyledText=null,this.mFocusStyle=eBaseFocusStyle.eClient},Ys.prototype.baseClassName="omnis-label text-selectable",Ys.prototype.init_ctrl_inst=function(t,e,i,s){this.superclass.init_ctrl_inst.call(this,t,e,i,s),this.mHasAlign=!0;var r=this.getClientElem();r.style.whiteSpace="normal",r.style.display="flex",r.style.overflow="hidden";var n=r.getAttribute("data-html");this.mTextIsHtml="1"==n,this.mNeedFontHeight=!0;var o=Ys.eLabelTagType[r.getAttribute("data-tagtype")];this.labelElem=document.createElement(o),this.labelElem.style.position="absolute",this.labelElem.style.font="inherit";var a=r.getAttribute("data-textcolor");a&&(r.style.color=this.getTheme().getColorString(a)),this.labelElem.style.textDecoration="inherit",this.labelElem.style.margin="0",this.labelElem.style.width="100%",this.labelElem.style.boxSizing="border-box",this.isResponsive||this.setProperty(eBaseProperties.align,eBaseAlignment[this.clientElem.style.textAlign]),this.clientElem.style.textAlign="";var l=r.innerHTML;l&&(this.labelElem.innerHTML=l,r.innerHTML="",this.mPreStyledText=l),r.getAttribute("data-labelfor")&&this.form.registerForFormBuilt(this),r.appendChild(this.labelElem);var h=r.getAttribute("data-vct"),c=h&&"1"==h;return this.setProperty(eBaseProperties.vertcentertext,c),this.fontChanged(),this.activeChanged(),this.horzPaddingChanged(),this.vertPaddingChanged(),this.canSendEvent(eBaseEvent.evClick,!0)&&(r.onclick=this.mEventFunction),r.addEventListener("keydown",this.handleEvent,!0),this.dataName&&this.dataName.length&&this.update(),!1},Ys.prototype.formBuilt=function(){var t=this.getClientElem(),e=this.form.findChildByName(t.getAttribute("data-labelfor"));if(e){var i=e.getLabelForElem(t);i&&this.labelElem.setAttribute("for",i)}},Ys.prototype.updateCtrl=function(t,e,i,s){var r;jOmnis.mDesign?this.dataName&&this.dataName.length&&(r="["+this.dataName+"]"):r=this.getData("",null,null,null,"s",null),null!=r&&this.setProperty(eBaseProperties.text,r+"")},Ys.prototype.handleEvent=function(t){if("keydown"!==t.type)return this.superclass.handleEvent.call(this,t);var e=this.omnisObject,i=OmnisKeyboardHandler.getNormalizedEventKey(t);"Enter"!==i&&" "!==i||(jOmnis.sendDOMEvent(e.clientElem,"click",!0),jOmnis.stopEventNow(t),"Enter"!==i||e.canSendEvent(eBaseEvent.evClick,!0)||e.sendNextOk())},Ys.prototype.getProperty=function(t){switch(t){case eBaseProperties.text:return this.mTextIsHtml?this.labelElem.innerHTML:this.mPreStyledText;case eBaseProperties.vertcentertext:return this.mVertCenterText;case eBaseProperties.textishtml:return this.mTextIsHtml;case eBaseProperties.align:return this.mTextAlign}return this.superclass.getProperty.call(this,t)},Ys.prototype.getCanAssign=function(t){switch(t){case eBaseProperties.text:case eBaseProperties.vertcentertext:case eBaseProperties.textishtml:case eBaseProperties.horzPadding:case eBaseProperties.vertPadding:return!0}return this.superclass.getCanAssign.call(this,t)},Ys.prototype.setProperty=function(t,e){switch(t){case eBaseProperties.text:return this.mTextIsHtml?this.labelElem.innerHTML=e:(this.mPreStyledText=e,this.labelElem.innerHTML=jOmnis.escapeHTML(e,!0)),this.sizeChanged(),!0;case eBaseProperties.vertcentertext:var i=1*e!=0;return this.mVertCenterText!=i&&(this.mVertCenterText=i,this.getClientElem().style.alignItems=this.mVertCenterText?"center":"start"),!0;case eBaseProperties.textishtml:var s=1*e!=0;if(s!=this.mTextIsHtml){var r=this.getProperty(eBaseProperties.text);this.mTextIsHtml=s,this.setProperty(eBaseProperties.text,r)}return!0;case eBaseProperties.align:switch(this.mTextAlign=e,e){case eBaseAlignment.left:this.labelElem.style.textAlign="left";break;case eBaseAlignment.right:this.labelElem.style.textAlign="right";break;case eBaseAlignment.center:this.labelElem.style.textAlign="center"}return this.isResponsive&&this.cachedPositionInfo.updateLayoutInfo(this.form.curScreenSize,"align",e),this.horzPaddingChanged(),!0}return this.superclass.setProperty.call(this,t,e)},Ys.prototype.getPaddingElement=function(){return this.labelElem},Ys.prototype.fontChanged=function(){this.superclass.fontChanged.call(this),this.mVertCenterText&&this.sizeChanged()},Ys.prototype.enabledChanged=function(){var t=this.getClientElem();t.onclick=null,this.canSendEvent(eBaseEvent.evClick,!0)&&(t.onclick=this.mEventFunction),this.superclass.enabledChanged.call(this)},Ys.prototype.setTabIndex=function(t){var e=this.getClientElem();return-1!=t&&this.isActive()?e.tabIndex=0:e.removeAttribute("tabIndex"),t};var Xs,Js=Ys;function Qs(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function Zs(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Qs(Object(i),!0).forEach((function(e){tr(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Qs(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function tr(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var er="$selectedlinecolor",ir="$selectedlinetextcolor",sr="$evenrowcolor",rr="$ischecklist",nr="$listcolumn",or="$extraspace",ar="$selectedlinesonly",lr="$checkboxcolor";cr.prototype=new a.U2,cr.prototype.setFillColor=!0,cr.prototype.IGNOREDKEYS=["ArrowLeft","ArrowRight","PageUp","PageDown","Home","End","Tab"],cr.prototype.NUMBEROFLINESTOPAGE=5,cr.prototype.mAcceptsReturn=!0;var hr=Zs(Zs({},a.Mr),{},{BORDER:"BORDER",SELECTED_LINE:"SELECTED_LINE",SELECTED_LINE_TEXT:"SELECTED_LINE_TEXT",EVEN_ROW:"EVEN_ROW"});function cr(){this.init_class_inst()}cr.prototype.DefaultColors=Zs(Zs({},a.U2.prototype.DefaultColors),{},(tr(Xs={},hr.BORDER,o.l1.border),tr(Xs,hr.SELECTED_LINE,o.l1.primary),tr(Xs,hr.SELECTED_LINE_TEXT,o.l1.primaryText),tr(Xs,hr.EVEN_ROW,o.l1.none),Xs)),cr.prototype.init_class_inst=function(){this.superclass=a.U2.prototype,this.superclass.init_class_inst.call(this),this.useDefault=!1,this.defaultText=[],this.defaultLine=0,this.isCheckList=!1,this.normalimage="",this.checkedimage="",this.baseClassName=jOmnis.mDesign?"omnis-list omnis-list-design":"omnis-list",this.usesNotActiveOverlay=!0,this.mCanHaveDesignBorder=0!=jOmnis.mDesign,this.showDesignName=this.showDesignNameBackground=!0,this.mFocusStyle=eBaseFocusStyle.eWithin},cr.prototype.init_ctrl_inst=function(t,e,i,s){this.mHandleNumberColumn=!0,this.mHasDisplayFormat=!0,this.mHasDefaultDisableAppearanceProperty=!0,this.superclass.init_ctrl_inst.call(this,t,e,i,s),jOmnis.mDesign&&(this.dataName=jOmnis.mDesignTempList),this.mMaxTextWidth=0;var r=this.getClientElem(),n=r.getAttribute("defaulttext");n&&n.length&&(this.useDefault=!0,this.defaultText=n.split(","),this.defaultLine=r.getAttribute("defaultline"));var o=r.getAttribute("data-icon");o&&o.length?(this.normalimage=this.setupIcon(o),this.checkedimage=jIcons.getCheckedImage(this.normalimage)):this.setDefaultImages(),this.evenrowcolor=+r.getAttribute("data-evenrowcolor"),r.style.cursor="default",this.selectedLineColor=+r.getAttribute("data-selectedrowcolor");var a=r.getAttribute("data-es");this.mExtraSpace=null==a?0:1*a,a=r.getAttribute("data-lc"),this.mListColumn=null==a?1:1*a,this.mListColumnToUse=jOmnis.mDesign?1:this.mListColumn,a=r.getAttribute("data-slo"),this.mSelLinesOnly=null!=a&&1*a!=0,this.mHiliteLine="1"==r.getAttribute("data-hiliteline"),this.selectedLineTextColor=+r.getAttribute("data-selectedrowtextcolor"),this.buildCSSStyles(),this.setProperty(eBaseProperties.keyboardchangesline,r.getAttribute("data-changeline"));var l=this.mEventFunction;return jOmnis.mobileDevice||("webkitUserSelect"in r.style||jOmnis.inIE11OrLater()||jOmnis.inOpera()?r.onkeydown=l:this.mArrowOnKeyPress=!0,r.onkeypress=l),r.onclick=l,r.ondblclick=l,r.onblur=l,r.addEventListener("focusin",l,!0),this.mHasBlur=!0,this.isCheckList="1"==r.getAttribute("data-checklist"),this.checkboxColor=+r.getAttribute("data-checkboxcolor"),Lt.setColor(this.checkboxColor,this),this.mFirst=!0,this.mNeedFontHeight=!0,this.imageSize=0,this.fontChanged(),this.mFirst=!1,r.setAttribute("role","listbox"),this.activeChanged(),this.enabledChanged(),jOmnis.mDesign&&this.showDisabledDesignScrollbars(r),!1},cr.prototype.buildCSSStyles=function(){var t=this.getTheme();this.mListStyleSheet&&(jOmnis.removeStyleSheet(this.mListStyleSheet),this.mListStyleSheet=null);var e=t.getTextColorString(this.selectedLineTextColor,this.resolveDefaultColor(this.selectedLineColor,hr.SELECTED_LINE),this.DefaultColors.SELECTED_LINE_TEXT),i="#"+this.clientElem.id+" .ctrl-list-selected {";i+="background:"+t.getColorString(this.selectedLineColor,this.DefaultColors.SELECTED_LINE)+";",i+="color: ".concat(e,"; --om-tint-color: ").concat(e),i+="} ";var s=t.getColorString(this.evenrowcolor,this.DefaultColors.EVEN_ROW);s&&(i+="#"+this.clientElem.id+" .ctrl-list-even {",i+="background:"+s+";",i+="}"),this.mHiliteLine&&(i=this.addHiliteLineStyle(i,this.selectedLineColor)),i.length>0&&(this.mListStyleSheet=jOmnis.addStyleSheet(i))},cr.prototype.complexGridRerendered=function(){this.buildCSSStyles()},cr.prototype.getProperty=function(t){switch(t){case eBaseProperties.iconid:return null==this.normalimage?"":this.normalimage;case er:return this.selectedLineColor;case ir:return this.selectedLineTextColor;case sr:return this.evenrowcolor;case rr:return this.isCheckList;case nr:return this.mListColumn;case or:return this.mExtraSpace;case eBaseProperties.hscroll:case eBaseProperties.vscroll:return null;case ar:return this.mSelLinesOnly;case eBaseProperties.keyboardchangesline:return this.keyboardChangesCurrentLine;case lr:return this.checkboxColor}return this.superclass.getProperty.call(this,t)},cr.prototype.getCanAssign=function(t){switch(t){case eBaseProperties.iconid:case er:case ir:case sr:case rr:case nr:case or:case eBaseProperties.hscroll:case eBaseProperties.vscroll:case ar:case eBaseProperties.keyboardchangesline:case lr:return!0}return this.superclass.getCanAssign.call(this,t)},cr.prototype.setProperty=function(t,e){var i=!0,s=!1;switch(t){case eBaseProperties.iconid:if(e==this.normalimage)return!0;0==e||""==e?this.setDefaultImages():(this.normalimage=e,this.checkedimage=jIcons.getCheckedImage(this.normalimage)),this.mDoUpdate=!0;break;case er:this.selectedLineColor=+e,this.mBuildStyles=!0;break;case ir:this.selectedLineTextColor=+e,this.mBuildStyles=!0;break;case sr:this.evenrowcolor=+e,this.mBuildStyles=!0;break;case rr:var r=this.isCheckList;if(this.isCheckList=1*e!=0,this.isCheckList==r)return!0;this.mDoUpdate=!0;break;case nr:if(r=this.mListColumn,this.mListColumn=1*e,this.mListColumn<=0&&(this.mListColumn=1),this.mListColumn==r)return!0;jOmnis.mDesign||(this.mListColumnToUse=this.mListColumn),this.mDoUpdate=!0,-1!=this.dataIndex&&this.newDataIndex();break;case or:if(r=this.mExtraSpace,this.mExtraSpace=1*e,this.mExtraSpace<0&&(this.mExtraSpace=0),this.mExtraSpace==r)return!0;this.mDoUpdate=!0;break;case eBaseProperties.hscroll:this.newHscroll=1*e;break;case eBaseProperties.vscroll:this.newVscroll=1*e;break;case ar:if(r=this.mSelLinesOnly,this.mSelLinesOnly=1*e!=0,this.mSelLinesOnly==r)return!0;this.mDoUpdate=!0;break;case eBaseProperties.keyboardchangesline:this.keyboardChangesCurrentLine=1*e!=0;break;case lr:return this.checkboxColor=+e,Lt.setColor(this.checkboxColor,this),!0;default:s=!0,i=!1}return i&&this.form.inst.registerPropertyObject(this),!s||this.superclass.setProperty.call(this,t,e)},cr.prototype.applyPropertyChanges=function(){this.mBuildStyles&&(this.buildCSSStyles(),this.mBuildStyles=!1),this.mDoUpdate&&(this.mMustUpdate=!0,this.update(),this.mDoUpdate=!1),null==this.newHscroll&&null==this.newVscroll||this.update()},cr.prototype.getHtmlForRow=function(t,e,i,s){var r=this.getClientElem(),n=e;e=jOmnis.escapeHTML(e,!0);var o="";if(this.isCheckList){var a=this.mFontHeight+this.mExtraSpace;if(this.normalimage){var l;l=s?this.checkedimage:this.normalimage;var h=16,c=jIcons.getIconSize(l);c.height&&(h=c.height),a<16&&(h=a,c.width==c.height?c.width=c.height=h:(c.width*=h/c.height,c.height=h)),o=jIcons.getHtml(l,null,'role="presentation" data-ci="1"',null,c)+"&nbsp;"}else{var u=document.createElement("div");u.setAttribute("role","presentation"),u.setAttribute("alt",""),u.setAttribute("data-ci","1"),u.className="omnis-checkbox",this.clientElem.appendChild(u),Lt.addToElem(u,s,"",!1,!0),u.firstElementChild.setAttribute("aria-label",e);var d=Math.min(Lt.DEFAULT_BUTTON_SIZE,a);u.style.height=d+"px",Lt.updateDimensions(u,!0,!1,d),this.clientElem.removeChild(u);var p=u.querySelector("."+Lt.CLASS_NAMES.boxOutline),m=u.querySelector("."+Lt.CLASS_NAMES.tickOutline);p.style.left=m.style.left="0",o=u.outerHTML}0==this.imageSize&&(this.mTextWidthDiv.innerHTML="&nbsp;",this.imageSize=h+this.mTextWidthDiv.clientWidth)}var f,g="",v="text-align:left;";"hidden"==r.style.overflowX&&(v+="text-overflow:ellipsis;overflow:hidden;width:"+r.clientWidth+"px;"),this.mTextWidthDiv.innerHTML=e,""!=v&&this.mTextWidthDiv.clientWidth+(this.isCheckList?this.imageSize:0)>r.clientWidth&&(g=' title="'+jOmnis.stripStyles(n)+'"'),this.mTextWidthDiv.clientWidth+this.imageSize>this.mMaxTextWidth&&(this.mMaxTextWidth=this.mTextWidthDiv.clientWidth+this.imageSize),this.mSelLinesOnly&&!this.isCheckList?s?f=1&++this.curVisRow:v+="display:none;":f=1&t;var b=f?' data-odd="1"':"";this.mExtraSpace&&(v+="height:"+(this.mExtraSpace+this.mFontHeight)+"px;line-height:"+(this.mExtraSpace+this.mFontHeight)+"px;"),""==e&&(e="&nbsp;"),i&&this.owner&&this.mSelLinesOnly&&!s&&(this.currentLine=0,i=!1,this.setData(0,"#L"));var y=this.pager&&this.pager.isAttached?this.pager.pagedRowToAbsoluteRow(t):t;this.mDragEnabled&&(y+='" draggable="true');var C=this.isEnabled(),_=' id="'+this.getLineNumberID(t)+'"',E=this.isCheckList?' aria-checked="'+!!s+'"':"",w=!this.isCheckList&&i?' aria-selected="'+!!i+'"':"",k=' name="'+y+'"',T="ctrl-list-row";return this.currentLine===t?T+=" ctrl-list-selected":f||(T+=" ctrl-list-even"),!i||this.keyboardChangesCurrentLine&&C||jOmnis.mDesign||(T+=" ctrl-list-hovered"),"<div"+_+' role="option"'+E+w+b+k+g+(T='class="'+T+'"')+(' style="'+v+'"')+">"+o+e+"</div>"},cr.prototype.delete_class_inst=function(){null!=this.iscroll&&this.iscroll.destroy(),this.mListStyleSheet&&jOmnis.removeStyleSheet(this.mListStyleSheet),this.superclass.delete_class_inst.call(this)},cr.prototype.updateCtrl=function(t,e,i,s){var r=this.getClientElem(),n=this.getCtrlElem("_content");if(this.getTrueVisibility()){if(s||this.mMustUpdate){this.mMustUpdate=!1;var o=this.getLineNumber(),a=this.getLineCount();if(o!=this.currentLine){var l=this.currentLine;this.currentLine=o;var h=!0}if("#L"!=t){if(this.isCheckList){if("#LSEL"==t){var c=this.getColumnData(e),u=this.getLineSelection(e);return void this.updateOneRow(e,c,this.getLineNumber()==e,u)}if("#LSEL_ALL"==t){for(var d=this.getData("#LSEL_ALL"),p=0;p<a;++p){var m=n.children[p].children[0];this.normalimage?m.src=d[p]?this.checkedimage:this.normalimage:Lt.setValue(m,!!d[p])}return}}else if("#LSEL_ALL"==t&&!this.mSelLinesOnly)return;var f="";for(this.mTextWidthDiv=this.getTextWidthDiv(),this.mMaxTextWidth=0,this.curVisRow=0,p=0;p<a;p++){var g=p+1,v=this.getColumnData(g),b=this.getLineSelection(g);f+=this.getHtmlForRow(g,v,g==o,b)}this.removeTextWidthDiv(this.mTextWidthDiv),this.mTextWidthDiv=null,n.innerHTML=f,this.setNewListLine(l,o,!1,!1,!0);var y=this.mMaxTextWidth;if(y<r.clientWidth&&(y=r.clientWidth),n.style.width=jOmnis.mDesign?"100%":y+"px",jOmnis.useiScroll){if(r.style.overflow="hidden",r.firstChild.style.width="100%",r.firstChild.style.height="100%",null==this.iscroll){var C={};C.omnisObject=this,C.preventDefault=!0,C.mouseWheel=!0,C.tap=!0,C.scrollX=!0,C.scrollY=!0,C.omnisKeyEvents=!0,C.scrollbars=!0,Function.prototype.bind&&(C.fadeScrollbars=!0),C.momentum=!0,C.bounce=!0,C.removeFocus=jOmnis.touchDevice,this.iscroll=this.attachIScroll(n.parentNode,C),this.autoscroll||this.horzscroll&&this.vertscroll||this.updateIScrollOptions(this.iscroll,{scrollX:this.autoscroll||this.horzscroll,scrollY:this.autoscroll||this.vertscroll})}this.iscroll.refresh()}if(null!=this.newHscroll||null!=this.newVscroll){var _=r.scrollLeft,E=r.scrollTop;if(null!=this.newVscroll){var w=1*this.newVscroll;if(this.newVscroll=null,w>0){var k=n.children[w-1];k&&(E=k.offsetTop)}}if(null!=this.newHscroll){var T=1*this.newHscroll;this.newHscroll=null,T>=0&&T<n.clientWidth&&(_=T)}this.iscroll?this.iscroll.scrollTo(-_,-E,0):(r.scrollLeft=_,r.scrollTop=E)}}else h&&this.setNewListLine(l,o,!1,!1,!0)}}else s&&(this.mMustUpdate=!0)},cr.prototype.touchCanStartScroll=function(t){return this.superclass.touchCanStartScroll(t)},cr.prototype.areAllLinesChecked=function(){for(var t=0;t<this.getLineCount();t++)if(!this.getLineSelection(t+1))return!1;return!0},cr.prototype.setAllCheckboxes=function(t,e){for(var i=0;i<this.getLineCount();i++){var s=i+1,r=this.getColumnData(s);this.setLineSelection(s,t),this.updateOneRow(s,r,s===e,t)}},cr.prototype.handleEvent=function(t){var e=this;function i(t){return e.normalimage?jIcons.isIcon(t):jOmnis.hasClass(t,"omnis-checkbox")}function s(){for(var s=t.target,r=e.getCtrlElem("_content");s&&s.parentNode&&s.parentNode!=r&&!(e.isCheckList&&i(s)&&s.getAttribute("data-ci"));)s=s.parentNode;return s}var r=this.isEnabled(),n=r&&this.keyboardChangesCurrentLine;switch(t.type){case"focusin":return void(document.activeElement&&"INPUT"===document.activeElement.tagName&&(jOmnis.stopEventNow(t),this.clientElem.focus()));case"focus":if(!n){this.setFocusedLineNumber(this.getLineNumber()||1);var o=this.getCtrlElem("_content").children[this.focusedLineNumber-1];o&&jOmnis.addClass(o,"ctrl-list-hovered")}this.mDisableSystemFocus||jOmnis.addClass(this.getFocusBorderElemParent(),"is-focused");break;case"keydown":case"keypress":if(!this.isActive())return!0;if(null!=jOmnis.overlay)return jOmnisMenuHandler.isContextMenuOpen()||jOmnis.stopEventNow(t),!0;var a,l="keydown"==t.type||this.mArrowOnKeyPress,h=OmnisKeyboardHandler.getNormalizedEventKey(t),c=n?1*this.getLineNumber():this.focusedLineNumber,u=!1;switch(h){case"ArrowUp":if(l){if(a=c-1,this.mSelLinesOnly&&!this.isCheckList)for(;a>=1&&!this.getLineSelection(a);)--a;jOmnis.stopEventNow(t),u=n}break;case"ArrowDown":if(l){if(a=c+1,this.mSelLinesOnly&&!this.isCheckList)for(var d=this.getLineCount();a<=d&&!this.getLineSelection(a);)++a;jOmnis.stopEventNow(t),u=n}break;case"Enter":case" ":if(!r||c<=0)return void("Enter"===h&&this.sendNextOk());if(l&&!this.mKeyTimer){if(this.isCheckList){var p=this.getLineSelection(c);p=!p,this.setLineSelection(c,p)}if(a=c,c=this.currentLine,u=!0,this.sendDoubleClick=this.canSendEvent(eBaseEvent.evDoubleClick),"Enter"===h){var m=this.isCheckList||a!==this.getData("#L");this.canSendEvent(eBaseEvent.evClick)||this.sendDoubleClick||m||this.sendNextOk()}jOmnis.stopEventNow(t)}else if("keypress"==t.type)return this.continueKeySearch(" "),jOmnis.stopEventNow(t),!0;break;case"End":a=this.getLineCount(),jOmnis.stopEventNow(t),u=n;break;case"Home":a=1,jOmnis.stopEventNow(t),u=n;break;case"PageDown":(a=c+this.NUMBEROFLINESTOPAGE)>this.getLineCount()&&(a=this.getLineCount()),jOmnis.stopEventNow(t),u=n;break;case"PageUp":(a=c-this.NUMBEROFLINESTOPAGE)<1&&(a=1),jOmnis.stopEventNow(t),u=n;break;case"A":case"a":if(!r)return;(t.ctrlKey||t.metaKey)&&this.isCheckList&&(this.setAllCheckboxes(!this.areAllLinesChecked(),c),t.preventDefault(),u=!0,jOmnis.stopEventNow(t));break;case"Tab":jOmnis.stopEventNow(t),this.form.getNextPrevTabObject(this,t.shiftKey).focus();break;default:if("keypress"==t.type&&this.IGNOREDKEYS.indexOf(h)<0)return this.continueKeySearch(h),jOmnis.stopEventNow(t),!0}return!this.owner||"Tab"!==h&&"Enter"!==h&&"Escape"!==h||this.owner.closeLinkedCtrl(),"keypress"==t.type&&this.cancelKeySearch(),this.setNewListLine(c,a,u),!0;case"click":case"tap":if(this.focus(),!this.isActive())return!0;c=this.getLineNumber();var f,g=s();if(null==g||null==g.parentNode)return!0;if(this.isCheckList&&r&&i(g)){var v=g.parentNode.getAttribute("name");null!=v&&(v*=1),this.pager&&this.pager.isAttached&&(v=this.pager.absoluteRowToPagedRow(v)),p=this.getLineSelection(v),f=this.getColumnData(v),p=!p,this.setLineSelection(v,p),this.updateOneRow(v,f,c==v,p),this.canSendEvent(eBaseEvent.evClick,!0)&&this.doSendEvent(eBaseEvent.evClick,v)}else if(a=g.getAttribute("name"),this.pager&&this.pager.isAttached&&(a=this.pager.absoluteRowToPagedRow(a)),a){a*=1;var b=this.focusedLineNumber;b&&b!==a&&b!==this.currentLine&&(f=this.getColumnData(b),p=this.getLineSelection(b),this.updateOneRow(b,f,!1,p)),this.setLineNumber(a,!0),c>0&&(f=this.getColumnData(c),p=this.getLineSelection(c),this.updateOneRow(c,f,!1,p)),c=a,f=this.getColumnData(c),p=this.getLineSelection(c),this.updateOneRow(c,f,!0,p),this.canSendEvent(eBaseEvent.evClick,!0)&&this.doSendEvent(eBaseEvent.evClick,c)}return!0;case"dblclick":return g=s(),this.isCheckList&&null!=g&&jIcons.isIcon(g)||this.doSendEvent(eBaseEvent.evDoubleClick,this.getLineNumber()),!0;case"blur":if((!r||!this.keyboardChangesCurrentLine)&&this.focusedLineNumber){c=this.focusedLineNumber,f=this.getColumnData(c);var y=this.getLineSelection(c);this.updateOneRow(c,f,!1,y)}if(this.focusedLineNumber=0,this.owner){var C=jOmnis.getNextBlurElem(t);C&&C.omnisObject==this.owner||jOmnis.savedFocus==this.getClientElem()||this.owner.closeLinkedCtrl(!0)}return this.superclass.handleEvent.call(this,t);case"contextmenu":var _;return t.buttons&&((g=s())&&g.parentNode&&this.isCheckList&&jIcons.isIcon(g)&&(g=g.parentNode),g&&g.parentNode&&(_=g.getAttribute("name"))),jOmnisMenuHandler.isContextMenuOpen()?jOmnis.handleEventPreventDefault(t):this.handleContextMenuClick(t,this,_);case"copy":var E=this.getLineNumber();return E>0&&(t.clipboardData.setData("text/plain",this.getColumnData(E)),!0);default:return this.superclass.handleEvent.call(this,t)}},cr.prototype.setAriaDisabled=function(t){for(var e=this.getCtrlElem("_content")?this.getCtrlElem("_content").querySelectorAll("div"):[],i=0;i<e.length;i++)this.isEnabled()?t||e[i].removeAttribute("aria-disabled"):e[i].setAttribute("aria-disabled","true");this.superclass.setAriaDisabled.call(this)},cr.prototype.doSendEvent=function(t,e){this.canSendEvent(t,!0)&&(this.pager&&this.pager.isAttached&&(e=this.pager.pagedRowToAbsoluteRow(e)),this.eventParamsAdd("pLineNumber",e),this.sendEvent(t))},cr.prototype.fontChanged=function(){this.superclass.fontChanged.call(this),this.imageSize=0,this.mFirst||(this.mMustUpdate=!0,this.update())},cr.prototype.sizeChanged=function(){this.superclass.sizeChanged.call(this),this.mMustUpdate=!0,this.update()},cr.prototype.visibilityChanged=function(){var t=this.superclass.visibilityChanged.call(this);if(this.getTrueVisibility(null)){var e=this.getClientElem(),i=this.mMaxTextWidth;i<e.clientWidth&&(i=e.clientWidth),this.getCtrlElem("_content").style.width=i+"px",this.update()}return t},cr.prototype.fillChanged=function(){this.superclass.fillChanged.call(this),this.mMustUpdate=!0,this.update()},cr.prototype.getLineCount=function(){return this.useDefault?this.defaultText.length:this.getData("#LCNT")},cr.prototype.getLineSelection=function(t){return!this.useDefault&&this.getData("#LSEL",t)},cr.prototype.setLineSelection=function(t,e){return this.useDefault?(this.defaultLine=t,!0):this.setData(e,"#LSEL",t)},cr.prototype.firstLine=function(){var t=this.getLineCount();if(!this.mSelLinesOnly||this.isCheckList)return t?1:0;for(var e=1;e<=t;++e)if(this.getLineSelection(e))return e;return 0},cr.prototype.getLineNumber=function(){return this.useDefault?this.defaultLine:this.getData("#L")},cr.prototype.setFocusedLineNumber=function(t){this.focusedLineNumber=t,this.setAriaActiveDescendant(this.getLineNumberID(t))},cr.prototype.getFocusedLineNumber=function(){return this.focusedLineNumber||this.setFocusedLineNumber(1),this.focusedLineNumber},cr.prototype.setLineNumber=function(t,e){this.isEnabled()&&(this.currentLine=t,this.useDefault?this.defaultLine=t:(this.setData(t,"#L"),this.owner&&this.owner.newLinkedLine(t,e))),e&&(this.focusedLineNumber=t),this.setAriaActiveDescendant(this.getLineNumberID(t))},cr.prototype.getColumnData=function(t){if(this.useDefault)return this.defaultText[t];if(this.mSelLinesOnly&&!this.isCheckList&&!this.getLineSelection(t))return null;var e=this.getData("#COL",t,this.mListColumnToUse,null,"s",this.getDisplayFormat());return this.isNumber&&(e=jOmnis.numberToLocaleAndDps(e,this.numberDps)),e},cr.prototype.resetAllRowClasses=function(t){if(t)for(var e=0;e<t.length;e++)t[e].attributes.name&&parseInt(t[e].attributes.name.value)!==this.currentLine?jOmnis.removeClass(t[e],"ctrl-list-selected ctrl-list-hovered"):jOmnis.removeClass(t[e],"ctrl-list-hovered")},cr.prototype.updateOneRow=function(t,e,i,s){this.getClientElem();var r=this.getCtrlElem("_content"),n=r.children[t-1];if(!n)return null;this.resetAllRowClasses(r.children);var o=document.createElement("div");this.mTextWidthDiv=this.getTextWidthDiv(),o.innerHTML=this.getHtmlForRow(t,e,i,s),this.removeTextWidthDiv(this.mTextWidthDiv),this.mTextWidthDiv=null;var a=o.children[0];return n.title=a.title,n.className=a.className,a.style&&a.style.cssText?n.style.cssText=a.style.cssText:n.style=a.style,n.innerHTML=a.innerHTML,this.isEnabled()&&(a.hasAttribute("aria-selected")?n.setAttribute("aria-selected",a.getAttribute("aria-selected")):a.hasAttribute("aria-checked")?n.setAttribute("aria-checked",a.getAttribute("aria-checked")):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected")),n},cr.prototype.searchList=function(t){for(var e=this.getLineCount(),i=this.getLineNumber(),s=0;s<e;s++){var r=s+1,n=jOmnis.stripStyles(this.getColumnData(r));if(null!=n&&0==n.toUpperCase().indexOf(t))return void(i!=r&&this.setNewListLine(i,r,!0))}},cr.prototype.getLineNumberID=function(t){if(t)return this.clientElem.id+"_row_"+t},cr.prototype.setNewListLine=function(t,e,i,s,r){var n,o;if(null!=e)if(e>=1&&e<=this.getLineCount()||r&&!e||this.pager&&-1==e)if(this.isEnabled()&&i?this.setLineNumber(e):this.setFocusedLineNumber(e),t&&(this.keyboardChangesCurrentLine||t!==this.currentLine)&&(n=this.getColumnData(t),o=this.getLineSelection(t),this.updateOneRow(t,n,!1,o)),e>0){n=this.getColumnData(e),o=this.getLineSelection(e);var a=this.updateOneRow(e,n,!0,o);if(!s)if(this.iscroll)this.iscroll.revealElement(a);else{var l=this.getClientElem(),h=!0,c=a.offsetTop;c>=l.scrollTop&&c+a.clientHeight-1<l.scrollTop+l.clientHeight&&(h=!1),h&&(l.scrollTop=c)}}else-1==e&&(this.currentLine=0);else i=!1;var u=this.sendDoubleClick?eBaseEvent.evDoubleClick:eBaseEvent.evClick;i&&this.canSendEvent(u,!0)&&(null==e&&(e=this.getLineNumber()),this.eventParamsAdd("pLineNumber",e),this.sendEvent(u)),this.sendDoubleClick=!1},cr.prototype.setDefaultImages=function(){this.normalimage=!1,this.checkedimage=!1},cr.prototype.saveBeforeMadeInvisible=function(){if(null==this.savedScrollTop){var t=this.getClientElem();this.savedScrollTop=t.scrollTop,this.savedScrollLeft=t.scrollLeft}},cr.prototype.restoreAfterMadeVisible=function(){if(null!=this.savedScrollTop){var t=this.getClientElem();t.scrollTop=this.savedScrollTop,t.scrollLeft=this.savedScrollLeft,this.savedScrollTop=null,this.savedScrollLeft=null}},cr.prototype.getDragValue=function(){var t=this.getData();if(t&&t instanceof omnis_raw_list){var e=new omnis_raw_list(!1,this.form);e.lstDef=[].concat(t.lstDef),t.lstL&&(e.lstData=[t.lstData[t.lstL-1]],e.lstLSEL=[0],e.lstL=1),t=e}return t},cr.prototype.getDropTarget=function(t){if(this.mDropId=null,this.mHiliteLine){for(var e=this.getCtrlElem("_content");t;){if(t.parentNode==e)return this.mDropId=1*t.getAttribute("name"),t;t=t.parentNode}return null}return this.superclass.getDropTarget.call(this,t)},cr.prototype.hiliteLineChanged=function(){this.mBuildStyles=!0,this.form.inst.registerPropertyObject(this)},cr.prototype.sendDragStartEvent=function(t){var e=t.target.getAttribute("name");if(e){this.pager&&this.pager.isAttached&&(e=this.pager.absoluteRowToPagedRow(e));var i=this.getLineNumber();if(e&&e!=i&&(this.form.inst.mNoOverlay=!0,this.setNewListLine(i,e,!0,!0,!1),this.form.inst.mNoOverlay=!1),jOmnis.inEdge()){var s=t.target.style.opacity;t.target.style.opacity=.5,setTimeout((function(){t.target.style.opacity=s}),0)}this.superclass.sendDragStartEvent.call(this,t)}else jOmnis.stopEventNow(t)},cr.prototype.getNotActiveElem=function(){return this.elem};var ur=cr,dr={evMapClicked:6e3,evMapMoved:6001,evMapZoomed:6002,evMarkerClicked:6003,evPolygonClicked:6004};function pr(){this.init_class_inst()}pr.prototype=new ctrl_base,pr.prototype.defaultAriaElem=!1,pr.prototype.init_class_inst=function(){this.superclass=ctrl_base.prototype,this.superclass.init_class_inst.call(this),this.mCustomEvents=dr,this.mFocusStyle=eBaseFocusStyle.eWithin,this.baseClassName="omnis-map",this.usesNotActiveOverlay=!0,this.showDesignName=!0},pr.prototype.init_ctrl_inst=function(t,e,i,s){this.mHasDefaultDisableAppearanceProperty=!0,this.superclass.init_ctrl_inst.call(this,t,e,i,s);var r=this.getClientElem();return r.style.outline="none",r.onclick=this.mEventFunction,r.addEventListener("focus",this.handleEvent,!0),r.tabIndex=-1,this.map=null,this.maptype=parseInt(r.getAttribute("data-maptype")),this.latlong=r.getAttribute("data-latlong"),0===this.latlong.length&&(this.latlong="51.31:-0.60"),this.zoom=parseInt(r.getAttribute("data-zoom")),this.panControl=0!==parseInt(r.getAttribute("data-pancontrol")),this.zoomControl=parseInt(r.getAttribute("data-zoomcontrol")),this.scaleControl=0!==parseInt(r.getAttribute("data-scalecontrol")),this.streetViewControl=0!==parseInt(r.getAttribute("data-streetviewcontrol")),this.mapTypeControl=0!==parseInt(r.getAttribute("data-maptypecontrol")),this.fullscreenControl="1"===r.getAttribute("data-fscontrol"),this.mapMarkers=r.getAttribute("data-mapmarkers"),this.mapPolys=r.getAttribute("data-mappolys"),this.mapAPIKEY=r.getAttribute("data-apikey"),this.mAriaLabel||this.mAriaLabelledby||(this.mAriaLabel=jGetOmnisString(this.form.inst,"ctl_map_defaultlabel")),jOmnis.mDesign&&jOmnis.addClass(r,"omnis-design-border-none"),this.update(),!1};var mr=0;pr.prototype.getGoogleMapType=function(){return 0==this.maptype?google.maps.MapTypeId.ROADMAP:1==this.maptype?google.maps.MapTypeId.SATELLITE:2==this.maptype?google.maps.MapTypeId.HYBRID:3==this.maptype?google.maps.MapTypeId.TERRAIN:google.maps.MapTypeId.ROADMAP},pr.prototype.makeLatLong=function(){var t=this.latlong.split(":",2);return new google.maps.LatLng(t[0],t[1])},pr.prototype.resetMarkers=function(){var t,e;if(0!=this.mapMarkers&&null!=this.mapMarkers&&0!=this.mapMarkers.count){if(this.mapMarkers&&(e=this.form.getDataIndex(this.mapMarkers,this),t=new omnis_list(this.getData(null,null,null,e))),t&&t.getRowCount())for(var i=1;i<=t.getRowCount();i++){var s=t.getData(1,i),r=t.getData(2,i),n=t.getData(3,i),o=t.getData(4,i),a=this.isEnabled()?"pointer":"default",l=s.split(":",2),h=new google.maps.LatLng(l[0],l[1]),c=new google.maps.Marker({map:this.map,animation:google.maps.Animation.DROP,title:r,position:h,cursor:a}),u=t.getData(6,i);if(u&&u.length){for(var d=u.split("|"),p={},m=0;m<d.length;m++){var f=d[m].split(":");switch(f[0]=f[0].trim(),f[1]=f[1].trim(),f[0]){case"path":"google.maps.SymbolPath.CIRCLE"==f[1]?p.path=google.maps.SymbolPath.CIRCLE:"google.maps.SymbolPath.BACKWARD_CLOSED_ARROW"==f[1]?p.path=google.maps.SymbolPath.BACKWARD_CLOSED_ARROW:"google.maps.SymbolPath.FORWARD_CLOSED_ARROW"==f[1]?p.path=google.maps.SymbolPath.FORWARD_CLOSED_ARROW:"google.maps.SymbolPath.BACKWARD_OPEN_ARROW"==f[1]?p.path=google.maps.SymbolPath.BACKWARD_OPEN_ARROW:"google.maps.SymbolPath.FORWARD_OPEN_ARROW"==f[1]?p.path=google.maps.SymbolPath.FORWARD_OPEN_ARROW:p.path=f[1];break;case"fillColor":p.fillColor=f[1];break;case"fillOpacity":p.fillOpacity=parseFloat(f[1]);break;case"scale":p.scale=parseFloat(f[1]);break;case"strokeColor":p.strokeColor=f[1];break;case"strokeWeight":p.strokeWeight=parseFloat(f[1]);break;case"anchor":var g=f[1].split(",");p.anchor=new google.maps.Point(parseFloat(g[0]),parseFloat(g[1]))}}c.setIcon(p)}else{var v=t.getData(5,i);if(v&&v.length){var b=jIcons.getIconSize(v),y={url:jIcons.selectIcon(v),scaledSize:new google.maps.Size(b.width,b.height),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(b.height/2,b.height)};c.setIcon(y)}else if(DetectBlackBerry10()){p={path:"M 0,0 18,0 9,35 z",fillColor:"red",fillOpacity:.8,scale:1,strokeColor:"black",anchor:new google.maps.Point(9,35)};c.setIcon(p)}}this.markersArray.push(c),this.setMarkerPop(c,o,this,n)}}else this.deleteOverlays()},pr.prototype.setMarkerPop=function(t,e,i,s){if(e&&e.length){var r=new google.maps.InfoWindow({content:e});google.maps.event.addListener(t,"click",(function(e){i.isEnabled()&&(r.open(this.map,t),i.canSendEvent(dr.evMarkerClicked)&&(i.eventParamsAdd("pMarker",s),i.sendEvent("evMarkerClicked")))}))}else google.maps.event.addListener(t,"click",(function(t){i.isEnabled()&&i.canSendEvent(dr.evMarkerClicked)&&(i.eventParamsAdd("pMarker",s),i.sendEvent("evMarkerClicked"))}))},pr.prototype.fitMapToMarkers=function(){if(null!=this.map){var t=this.markersArray;if(null!=t){for(var e=new google.maps.LatLngBounds,i=0;i<t.length;i++)e.extend(t[i].getPosition());this.map.fitBounds(e)}}},pr.prototype.deletePolygonOvlerlays=function(){if(this.polyArray){for(var t=0;t<this.polyArray.length;++t){var e=this.polyArray[t];e&&e.setMap(null)}this.polyArray=[]}},pr.prototype.makeCoordFromString=function(t){for(var e=[],i=t.split("|"),s=0;s<i.length;s++){var r=i[s].split(","),n={lat:parseFloat(r[0]),lng:parseFloat(r[1])};e.push(n)}return e},pr.prototype.resetPolys=function(){var t,e;if(0!=this.mapPolys&&null!=this.mapPolys&&0!=this.mapPolys.count){if(this.mapPolys&&(e=this.form.getDataIndex(this.mapPolys,this),t=new omnis_list(this.getData(null,null,null,e))),t&&t.getRowCount())for(var i=this,s=this.isEnabled()?"pointer":"default",r=1;r<=t.getRowCount();r++)!function(){var e=t.getData(1,r),n=i.makeCoordFromString(e),o=t.getData(2,r),a=parseFloat(t.getData(3,r)),l=parseFloat(t.getData(4,r)),h=t.getData(5,r),c=parseFloat(t.getData(6,r)),u=t.getData(7,r),d=new google.maps.Polygon({paths:n,strokeColor:o,strokeOpacity:a,strokeWeight:l,fillColor:h,fillOpacity:c,cursor:s});i.polyArray.push(d),google.maps.event.addListener(d,"click",(function(t){i.isEnabled()&&i.canSendEvent(dr.evPolygonClicked)&&(i.eventParamsAdd("pPoly",u),i.sendEvent("evPolygonClicked"))})),d.setMap(i.map)}()}else this.deletePolygonOvlerlays()},pr.prototype.deleteOverlays=function(){if(this.markersArray){for(var t=0;t<this.markersArray.length;++t){var e=this.markersArray[t];e&&e.setMap(null)}this.markersArray=[]}},pr.prototype.setMap=function(){if(this.getTrueVisibility(null))if(mr<2){if(!this.mWaitingForScripts){this.mWaitingForScripts=!0;var t=this,e=setInterval((function(){2==mr&&(clearInterval(e),t.setMap(),t.mWaitingForScripts=!1,t.setCachedProperties())}),10)}}else{var i=this.getClientElem(),s=google.maps.ZoomControlStyle.DEFAULT;if(2==this.zoomControl?s=google.maps.ZoomControlStyle.SMALL:3==this.zoomControl&&(s=google.maps.ZoomControlStyle.LARGE),null==this.map){var r={zoom:this.zoom,center:this.makeLatLong(),mapTypeId:this.getGoogleMapType(),panControl:this.panControl,zoomControl:this.zoomControl>=1,scaleControl:this.scaleControl,streetViewControl:this.streetViewControl,mapTypeControl:this.mapTypeControl,fullscreenControl:this.fullscreenControl,zoomControlOptions:{style:s}};this.updateMapOptions(r),this.markersArray=[],this.polyArray=[],this.map=new google.maps.Map(i,r),jOmnis.iOS&&this.map.getStreetView().setOptions({zoomControl:!1}),this.resetMarkers(),this.resetPolys(),this.setMapEvents(this.map,this)}else{var n={mapTypeId:this.getGoogleMapType(),panControl:this.panControl,zoomControl:this.zoomControl>=1,scaleControl:this.scaleControl,streetViewControl:this.streetViewControl,mapTypeControl:this.mapTypeControl,fullscreenControl:this.fullscreenControl,zoomControlOptions:{style:s}};this.updateMapOptions(n),this.map.setOptions(n)}}},pr.prototype.setMapEvents=function(t,e){google.maps.event.addListener(t,"dragend",(function(i){var s=t.getCenter();e.latlong=s.lat()+":"+s.lng(),e.canSendEvent(dr.evMapMoved,!0)&&!e.supressevent&&(e.eventParamsAdd("pNewCenter",s.lat()+":"+s.lng()),e.sendEvent("evMapMoved"))})),google.maps.event.addListener(t,"zoom_changed",(function(i){e.zoom=t.getZoom(),e.canSendEvent(dr.evMapZoomed,!0)&&!e.supressevent&&(e.eventParamsAdd("pNewZoom",e.zoom),e.sendEvent("evMapZoomed"))})),google.maps.event.addListener(t,"click",(function(t){if(e.canSendEvent(dr.evMapClicked,!0)&&!e.supressevent){var i=t.latLng;e.eventParamsAdd("pLatlong",i.lat()+":"+i.lng()),e.sendEvent("evMapClicked")}})),google.maps.event.addListenerOnce(t,"tilesloaded",(function(t){try{var i=e.clientElem.querySelector(".gm-style").firstElementChild;e.setAriaElement(i),i.setAttribute("role","application")}catch(t){console.log("Unable to set map accessibility features")}}))},pr.prototype.loadScript=function(){if(this.mapAPIKEY.length&&!mr){mr=1,this;var t=document.createElement("script");t.type="text/javascript",t.src=("http:"===window.location.protocol?"http:":"https:")+"//maps.googleapis.com/maps/api/js?key="+this.mapAPIKEY+"&callback=initializeMap",document.body.appendChild(t)}},pr.prototype.updateCtrl=function(t,e,i,s){mr||this.loadScript(),this.mapAPIKEY.length>0&&this.setMap();var r=this.clientElem.querySelector("iframe");r&&(r.tabIndex=-1)};var fr="$maptype",gr="$latlong",vr="$::zoom",br="$pancontrol",yr="$zoomcontrol",Cr="$scalecontrol",_r="$streetviewcontrol",Er="$maptypecontrol",wr="$mapmarkers",kr="$apikey",Tr="$mappolys",Sr="$fitmaptomarkers",xr="$fullscreencontrol";pr.prototype.getProperty=function(t){switch(t){case fr:return this.maptype;case gr:return this.latlong;case vr:return this.zoom;case br:return this.panControl;case yr:return this.zoomControl;case Cr:return this.scaleControl;case _r:return this.streetViewControl;case Er:return this.mapTypeControl;case wr:return this.mapMarkers;case kr:return this.mapAPIKEY;case Tr:return this.mapPolys;case Sr:return 0;case xr:return this.fullscreenControl}return this.superclass.getProperty.call(this,t)},pr.prototype.getCanAssign=function(t){switch(t){case fr:case gr:case vr:case br:case yr:case Cr:case _r:case Er:case wr:case Sr:case Tr:case xr:return!0;case kr:return!1}return this.superclass.getCanAssign.call(this,t)},pr.prototype.setProperty=function(t,e){if(!this.getCanAssign(t))return!1;if(this.mWaitingForScripts)return this.cacheSetProperty(t,e),!0;switch(t){case fr:return this.maptype=e,this.map.setMapTypeId(this.getGoogleMapType()),!0;case gr:return this.latlong=e,null!=this.map&&this.map.setCenter(this.makeLatLong()),!0;case vr:return this.zoom=e,this.supressevent=!0,this.map.setZoom(this.zoom),this.supressevent=!1,!0;case br:return this.panControl=e,this.map.panControl=this.panControl,this.update(),!0;case yr:return this.zoomControl=1*e,this.update(),!0;case Cr:return this.scaleControl=1*e!=0,this.map.scaleControl=this.scaleControl,this.update(),!0;case _r:return this.streetViewControl=1*e!=0,this.map.streetViewControl=this.streetViewControl,this.update(),!0;case Er:return this.mapTypeControl=1*e!=0,this.map.mapTypeControl=this.mapTypeControl,this.update(),!0;case wr:return this.mapMarkers=e,this.resetMarkers(),!0;case Tr:return this.mapPolys=e,this.resetPolys(),!0;case Sr:return 1==e&&this.fitMapToMarkers(),!0;case xr:return this.fullscreenControl=1*e!=0,this.map.fullscreenControl=this.fullscreenControl,this.update(),!0}this.superclass.setProperty.call(this,t,e)},pr.prototype.activeChanged=function(){this.update();var t=this.isActive();this.removeAndRestoreMapTabIndex(t),this.superclass.activeChanged.call(this)},pr.prototype.enabledChanged=function(){this.update();for(var t=this.isEnabled()?"pointer":"default",e=this.markersArray,i=0;i<e.length;i++)e[i].setCursor(t);var s=this.polyArray;for(i=0;i<s.length;i++)s[i].setOptions({cursor:t});this.superclass.enabledChanged.call(this)},pr.prototype.removeAndRestoreMapTabIndex=function(t){if(t){if(this.savedElems){for(e=0;e<this.savedElems.length;e++)this.savedElems[e].tabIndex=this.savedElems[e].savedTabIndex;for(e=0;e<this.savedAnchors.length;e++)this.savedAnchors[e].removeAttribute("tabIndex");this.savedAnchors=this.savedElems=null}}else{this.savedElems=this.clientElem.querySelectorAll("[tabindex]");for(var e=0;e<this.savedElems.length;e++)this.savedElems[e].savedTabIndex=this.savedElems[e].tabIndex,this.savedElems[e].removeAttribute("tabIndex");for(this.savedAnchors=this.clientElem.querySelectorAll("a"),e=0;e<this.savedAnchors.length;e++)this.savedAnchors[e].tabIndex=-1}},pr.prototype.updateMapOptions=function(t){var e=this.isEnabled();e||(t.panControl=!1,t.zoomControl=!1,t.scaleControl=!1,t.streetViewControl=!1,t.mapTypeControl=!1,t.fullscreenControl=!1),t.scrollwheel=e,t.draggable=e,t.keyboardShortcuts=e,t.gestureControl=e,t.draggableCursor=e?"":"default"},pr.prototype.visibilityChanged=function(){var t=this.superclass.visibilityChanged.call(this);return this.getTrueVisibility(null)&&(this.sizeChanged(),this.update()),t},pr.prototype.sizeChanged=function(){this.superclass.sizeChanged.call(this),this.map&&this.getTrueVisibility(null)&&google.maps.event.trigger(this.map,"resize")},pr.prototype.cacheSetProperty=function(t,e){this.mCachedProperties||(this.mCachedProperties=[]),this.mCachedProperties.push([t,e])},pr.prototype.setCachedProperties=function(){if(this.mCachedProperties){for(var t=0;t<this.mCachedProperties.length;t++){var e=this.mCachedProperties[t];this.setProperty(e[0],e[1])}this.mCachedProperties=null}},pr.prototype.handleEvent=function(t){switch(t.type){case"click":this.focus();break;case"focus":var e=this.omnisObject||this;if(!e.isActive()){var i=e.clientElem.querySelectorAll("[tabindex], a");document.activeElement===i[0]?e.form.getNextPrevTabObject(e,!1).focus():e.form.getNextPrevTabObject(e,!0).focus()}return}return this.superclass.handleEvent.call(this,t)},pr.prototype.focus=function(){try{this.clientElem.firstChild.focus(),this.clientElem.querySelector("iframe").tabIndex=-1}catch(t){}},pr.prototype.setTabIndex=function(t){return this.clientElem.tabIndex=-1,t},window.initializeMap=function(){mr=2};var Dr,Or=pr;function Ar(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function Pr(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ar(Object(i),!0).forEach((function(e){Ir(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ar(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Ir(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Lr='<svg focusable="false" viewBox="0 0 320 512"><path fill="currentColor" d="M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"></path></svg>',jr="$linkedobject",Nr="$push",Br="$pop",Rr="$initialtitle",Mr="$initialrighttext",Fr="$initialrighticonid",Hr="$::title",zr="$righttext",Wr="$righticonid",$r="$lefthidden",Ur="$initiallefttext",Vr="$initiallefticonid",qr="$backgroundiconid",Kr="$buttonfontsize",Gr="$buttoncolor",Yr="$buttonbordercolor",Xr="$buttonalpha",Jr="$buttonheight",Qr="$buttoniconsize",Zr="$buttonpressedcolor",tn="$buttonhotcolor",en="$disableanimation",sn={evClickRightButton:1,evClickInitialLeftButton:2,evPushFinished:3,evPopFinished:4};nn.prototype=new ctrl_base;var rn=Pr(Pr({},a.Mr),{},{BUTTON:"button",HOT_BUTTON:"hotButton"});function nn(){this.init_class_inst()}nn.prototype.DefaultColors=Pr(Pr({},ctrl_base.prototype.DefaultColors),{},(Ir(Dr={},rn.BACKGROUND,o.l1.primary),Ir(Dr,rn.BUTTON,o.l1.primaryDark),Ir(Dr,rn.HOT_BUTTON,o.l1.primaryLight),Dr)),nn.prototype.mAcceptsReturn=!0,nn.prototype.init_class_inst=function(){this.superclass=ctrl_base.prototype,this.superclass.init_class_inst.call(this),this.mCustomEvents=sn,this.mFocusStyle=eBaseFocusStyle.eCustom,this.baseClassName="omnis-navbar",this.activeReplacesEnabled=!0},nn.prototype.init_ctrl_inst=function(t,e,i,s){this.superclass.init_ctrl_inst.call(this,t,e,i,s);var r=this.getClientElem();return r.style.outline="none",r.style.cursor="default",r.style.overflow="hidden",r.setAttribute("role","navigation"),this.mPagedPaneName=r.getAttribute("data-lo"),this.mInitialTitle=r.getAttribute("data-it"),this.mInitialRightText=r.getAttribute("data-irt"),this.mInitialRightIcon=this.setupIcon(r.getAttribute("data-iri")),this.mInitialLeftText=r.getAttribute("data-ilt"),this.mInitialLeftIcon=this.setupIcon(r.getAttribute("data-ili")),this.setBackground(this.setupIcon(r.getAttribute("data-bi"))),this.mButtonFontSize=parseInt(r.getAttribute("data-bfs")),this.mButtonColor=parseInt(r.getAttribute("data-bc")),this.mButtonHotColor=parseInt(r.getAttribute("data-bhc")),this.mButtonBorderColor=parseInt(r.getAttribute("data-bbc")),this.mButtonAlpha=parseInt(r.getAttribute("data-ba")),this.mButtonHeight=parseInt(r.getAttribute("data-bh")),this.mButtonIconSize=parseInt(r.getAttribute("data-bis")),this.mDisableAnimation="1"===r.getAttribute("data-da"),this.borderWidth=-1===this.mButtonBorderColor?0:1,this.getFontHeights(),this.mNavigationStack=[],this.usesAnimation=!this.mDisableAnimation,this.activeChanged(),t.registerForFormBuilt(this),this.setAriaLiveRegion(r),this.elem.addEventListener("focusin",this.mEventFunction),this.elem.addEventListener("focusout",this.mEventFunction),!1},nn.prototype.delete_class_inst=function(){this.mStyleSheet&&jOmnis.removeStyleSheet(this.mStyleSheet),this.superclass.delete_class_inst.call(this)},nn.prototype.handleEvent=function(t){if(t.type!==jOmnis.transitionEndEvent)return this.superclass.handleEvent.call(this,t);this.mTranslateAnimationFinished&&(this.animationFinished(),this.isTranslating=!1,this.mDeferredPaneSizeChange&&this.pagedPaneSizeChanged())},nn.prototype.getProperty=function(t){switch(t){case Nr:case Br:return null;case Rr:return this.mNavigationStack.length?this.mNavigationStack[0].title:"";case Mr:return this.mNavigationStack.length?this.mNavigationStack[0].righttext:"";case Fr:return this.mNavigationStack.length?this.mNavigationStack[0].righticon:"";case Hr:return this.mNavigationStack.length?this.mNavigationStack[this.mNavigationStack.length-1].title:"";case zr:return this.mNavigationStack.length?this.mNavigationStack[this.mNavigationStack.length-1].righttext:"";case Wr:return this.mNavigationStack.length?this.mNavigationStack[this.mNavigationStack.length-1].righticon:"";case $r:return!!this.mNavigationStack.length&&this.mNavigationStack[this.mNavigationStack.length-1].hideleft;case Ur:return this.mNavigationStack.length?this.mNavigationStack[0].lefttext:"";case Vr:return this.mNavigationStack.length?this.mNavigationStack[0].lefticon:"";case qr:return this.mBackgroundImage;case Kr:return this.mButtonFontSize;case Gr:return this.mButtonColor;case Yr:return this.mButtonBorderColor;case Xr:return this.mButtonAlpha;case Jr:return this.mButtonHeight;case Qr:return this.mButtonIconSize;case Zr:return-1;case tn:return this.mButtonHotColor;case jr:return null!=this.mPagedPaneName?this.mPagedPaneName:"";case en:return this.mDisableAnimation}return this.superclass.getProperty.call(this,t)},nn.prototype.getCanAssign=function(t){switch(t){case Nr:case Br:case Rr:case Mr:case Fr:case Hr:case zr:case Wr:case $r:case Ur:case Vr:case qr:case Kr:case Gr:case Yr:case Xr:case Jr:case Qr:case Zr:case tn:return!0;case jr:case en:return!1}return this.superclass.getCanAssign.call(this,t)},nn.prototype.setProperty=function(t,e){var i=!0;switch(t){case Nr:return this.mBuildLast&&(this.mBuildAll=!0),this.pushStackItem(e),!0;case Br:return this.mBuildLast&&(this.mBuildAll=!0),this.popStackItems(+e,!1),!0;case Rr:this.mNavigationStack.length&&(this.mNavigationStack[0].title=e,this.mBuildFirst=!0);break;case Mr:this.mNavigationStack.length&&(this.mNavigationStack[0].righttext=e,this.mBuildFirst=!0);break;case Fr:this.mNavigationStack.length&&(this.mNavigationStack[0].righticon=e,this.mBuildFirst=!0);break;case Hr:if(this.mNavigationStack.length){var s=this.mNavigationStack[this.mNavigationStack.length-1];s.title=e,this.mBuildLast=!0}break;case zr:this.mNavigationStack.length&&((s=this.mNavigationStack[this.mNavigationStack.length-1]).righttext=e,this.mBuildLast=!0);break;case Wr:this.mNavigationStack.length&&((s=this.mNavigationStack[this.mNavigationStack.length-1]).righticon=e,this.mBuildLast=!0);break;case $r:this.mNavigationStack.length&&((s=this.mNavigationStack[this.mNavigationStack.length-1]).hideleft=1*e!=0,this.mBuildLast=!0);break;case Ur:this.mNavigationStack.length&&(this.mNavigationStack[0].lefttext=e,this.mBuildFirst=!0);break;case Vr:this.mNavigationStack.length&&(this.mNavigationStack[0].lefticon=e,this.mBuildFirst=!0);break;case qr:this.setBackground(e),this.fillChanged();break;case Kr:this.mButtonFontSize=1*e,this.getFontHeights(),this.mBuildAll=!0;break;case Gr:this.mButtonColor=1*e,this.mBuildCSS=!0;break;case Yr:this.mButtonBorderColor=1*e,this.borderWidth=-1===this.mButtonBorderColor?0:1,this.mBuildAll=!0;break;case Xr:this.mButtonAlpha=1*e,this.mBuildCSS=!0;break;case Jr:this.mButtonHeight=1*e,this.mBuildAll=!0;break;case Qr:this.mButtonIconSize=1*e,this.mBuildAll=!0;break;case Zr:break;case tn:this.mButtonHotColor=1*e,this.mBuildCSS=!0,jOmnisEffects.setRippleColor(this.clientElem,this.getTheme(),this.resolveDefaultColor(this.mButtonHotColor,rn.HOT_BUTTON));break;case jr:return jOmnis.mDesign||alert("$linkedobject cannot be set at runtime"),!0;default:i=!1}return i?(this.form.inst.registerPropertyObject(this),!0):this.superclass.setProperty.call(this,t,e)},nn.prototype.applyPropertyChanges=function(){this.mBuildAll&&(this.rebuildStackItemContent(),this.mBuildAll=!1,this.mBuildFirst=!1,this.mBuildLast=!1),this.mBuildFirst&&(this.buildStackItemContent(this.mNavigationStack[0],0,!0),1==this.mNavigationStack.length&&this.mBuildLast&&(this.mBuildLast=!1),this.mBuildFirst=!1),this.mBuildLast&&(this.buildStackItemContent(this.mNavigationStack[this.mNavigationStack.length-1],this.mNavigationStack.length-1,!0),this.mBuildLast=!1),this.mBuildCSS&&(this.addButtonCSS(),this.mBuildCSS=!1)},nn.prototype.fontChanged=function(){this.superclass.fontChanged.call(this),this.rebuildStackItemContent()},nn.prototype.visibilityChanged=function(){this.superclass.visibilityChanged.call(this)&&this.mResizeOnceVisible&&this.getTrueVisibility()&&(this.mResizeOnceVisible=!1,this.resizeControl())},nn.prototype.sizeChanged=function(){this.superclass.sizeChanged.call(this),this.getTrueVisibility()?this.resizeControl():this.mResizeOnceVisible=!0},nn.prototype.resizeControl=function(){if(this.stackParentDiv){for(var t=this.getClientElem(),e=0;e<this.mNavigationStack.length;++e){var i=this.mNavigationStack[e].stackDiv;i.style.width=t.clientWidth+"px",i.style.height=t.clientHeight+"px",i.style.left=t.clientWidth*e+"px"}this.setStackParentDivWidth(),this.rebuildStackItemContent();var s=this.getLeftOffset(t);this.usesAnimation?jOmnis.startTranslateAnimation(this.stackParentDiv,-s,0,0,null):t.scrollLeft=s}},nn.prototype.fillChanged=function(){for(var t=this.getClientElem(),e=0;e<this.mNavigationStack.length;++e)this.mNavigationStack[e].stackDiv.style.background=t.style.background,this.mNavigationStack[e].stackDiv.style.backgroundSize=t.style.backgroundSize},nn.prototype.activeChanged=function(){this.addButtonCSS(),this.rebuildStackItemContent(),this.disableSystemFocusChanged(),this.superclass.activeChanged.call(this)},nn.prototype.formBuilt=function(){if(!this.mFormBuilt){if(this.mFormBuilt=!0,this.addButtonCSS(),this.mPagedPaneCtrl=this.form.findChildByName(this.mPagedPaneName),this.mPagedPaneCtrl&&this.mPagedPaneCtrl.scrollToChangePage&&(this.mPagedPaneCtrl=null),null!=this.mPagedPaneCtrl&&this.mPagedPaneCtrl.registerNavbar(this)){var t=this.mPagedPaneCtrl.mChildren;if(t)for(var e=0;e<t.length;e++){var i=t[e];if(i instanceof ctrl_popmenu||i instanceof ctrl_tabs||i instanceof ctrl_video&&jOmnis.inFirefox()){this.usesAnimation=!1;break}}}else this.mPagedPaneCtrl=null;var s=this.getClientElem();this.stackParentDiv=document.createElement("div"),this.stackParentDiv.style.position="absolute",this.stackParentDiv.style.width=s.clientWidth+"px",this.stackParentDiv.style.height=s.clientHeight+"px",this.stackParentDiv.style.top=0,this.stackParentDiv.style.left=0,s.appendChild(this.stackParentDiv),this.push(this.mPagedPaneCtrl?this.mPagedPaneCtrl.currentPage:0,this.mInitialTitle,this.mInitialRightText,this.mInitialRightIcon,!1,this.mInitialLeftText,this.mInitialLeftIcon),this.superclass.formBuilt.call(this)}},nn.prototype.setTabIndex=function(){this.clientElem.tabIndex=-1},nn.prototype.focus=function(){try{(this.clientElem.querySelector("[tabindex='0']")||this.clientElem).focus()}catch(t){}},nn.prototype.getLeftOffset=function(t){return(this.mNavigationStack.length-1)*t.clientWidth},nn.prototype.setStackParentDivWidth=function(){this.stackParentDiv.style.width=this.clientElem.clientWidth*this.mNavigationStack.length+"px"},nn.prototype.setBackground=function(t){var e=this.getClientElem();this.mBackgroundImage=t;var i=e.style.backgroundColor;this.mBackgroundImage&&this.mBackgroundImage.length?(e.style.background="url("+this.mBackgroundImage+") center repeat-x",e.style.backgroundSize=jIcons.getIconBackSize(this.mBackgroundImage)):(e.style.background="",e.style.backgroundSize=""),e.style.backgroundColor=i},nn.prototype.addButtonCSS=function(){var t="",e="#"+this.clientElem.id,i=this.mButtonAlpha/255;function s(i){t+=e+" "+i+"{";for(var s=1;s<arguments.length-1;s+=2)t+="".concat(arguments[s],": ").concat(arguments[s+1],";");t+="}"}this.mStyleSheet&&jOmnis.removeStyleSheet(this.mStyleSheet);var r=this.getTheme(),n=this.getProperty(eBaseProperties.textcolor),o=r.getColorString(this.mButtonColor,this.DefaultColors[rn.BUTTON],i),a=r.getTextColorString(n,this.resolveDefaultColor(this.mButtonColor,rn.BUTTON),this.DefaultColors[rn.TEXT]);if(s("div.ctrl-navb-button","background-color",o,"color",a),s("div.ctrl-navb-button svg","--om-tint-color",a),!this.elem.disabled){var l=r.getColorString(this.mButtonHotColor,this.DefaultColors[rn.HOT_BUTTON]),h=r.getTextColorString(n,this.resolveDefaultColor(this.mButtonHotColor,rn.HOT_BUTTON),this.DefaultColors[rn.TEXT]);s("div.ctrl-navb-button:focus","background-color",l,"color",h),s("div.ctrl-navb-button:hover","background-color",l,"color",h),s("div.ctrl-navb-button:focus svg","--om-tint-color",h),s("div.ctrl-navb-button:hover svg","--om-tint-color",h)}this.mStyleSheet=jOmnis.addStyleSheet(t)},nn.prototype.complexGridRerendered=function(){this.addButtonCSS()},nn.prototype.getFontHeights=function(){var t=this.getClientElem(),e=t.style.fontSize;t.style.fontSize=this.mButtonFontSize+"pt",this.mNeedFontHeight=!0,this.fontChanged(),this.mButtonFontHeight=this.mFontHeight,t.style.fontSize=e,this.fontChanged()},nn.prototype.push=function(t,e,i,s,r,n,o){var a={};a.pagenumber=t,a.title=e,a.righttext=i,a.righticon=s,a.lefttext=n,a.lefticon=o,a.hideleft=r,this.mNavigationStack.push(a);var l=this.usesAnimation?this.getLeftOffset(this.clientElem):this.clientElem.scrollWidth;if(this.buildStackItemElements(a,this.mNavigationStack.length-1),this.mNavigationStack.length>1&&null!=this.mPagedPaneCtrl){this.setStackParentDivWidth();var h=this.mPagedPaneCtrl.pages[t-1],c=this.getLeftOffset(this.mPagedPaneCtrl.clientElem);h.style.left=c+"px",this.mOldCurrentPage=this.mPagedPaneCtrl.currentPage,jOmnis.deferredFocus=[],this.mPagedPaneCtrl.setCurrentPage(t,!1),this.animateStackChange(l,c,!1)}},nn.prototype.animateStackChange=function(t,e,i){if(jOmnis.deferFocusUntilAnimationComplete=!0,this.mPopping=i,this.usesAnimation)return this.isTranslating=!0,this.mPagePaneLeft=e,jOmnis.startTranslateAnimation(this.mPagedPaneCtrl.pageParentDiv,-e,0,250,null),void jOmnis.startTranslateAnimation(this.stackParentDiv,-t,0,250,this);this.mAnimationSteps=this.mDisableAnimation?1:4,this.mNewNavbarLeft=t,this.mNavbarScrollLeftIncrement=(t-this.clientElem.scrollLeft)/this.mAnimationSteps,this.mNewPagePaneLeft=e,this.mPagePaneScrollLeftIncrement=(e-this.mPagedPaneCtrl.clientElem.scrollLeft)/this.mAnimationSteps,this.stackChangeTimer()},nn.prototype.stackChangeTimer=function(){if(this.mPagedPaneCtrl.animatingStackChange=!0,this.updateScrollLeft(this.clientElem,this.mNavbarScrollLeftIncrement,this.mNewNavbarLeft),this.updateScrollLeft(this.mPagedPaneCtrl.clientElem,this.mPagePaneScrollLeftIncrement,this.mNewPagePaneLeft),--this.mAnimationSteps>0)setTimeout(this.makeFunction("stackChangeTimer",0),62.5);else{var t=this;setTimeout((function(){t.mPagedPaneCtrl.animatingStackChange=!1}),50),this.animationFinished()}},nn.prototype.animationFinished=function(){var t=this.mNavigationStack[this.mNavigationStack.length-1].pagenumber;if(this.mPagedPaneCtrl.pages[this.mOldCurrentPage-1].style.visibility="hidden",this.mPagedPaneCtrl.update(),this.form.inst.doLayoutComponents(),this.mPopping){for(var e=this.mNavigationStack.length-1;e>0;e--){var i=this.mNavigationStack[e];if(i.pagenumber==this.mCurrentPage)break;this.stackParentDiv.removeChild(i.stackDiv),this.mNavigationStack.pop()}this.setStackParentDivWidth()}if(t>1){var s=this.mNavigationStack[t-2];s&&s.stackDiv&&(this.mPopping?s.stackDiv.removeAttribute("aria-hidden"):s.stackDiv.setAttribute("aria-hidden","true"),s.rightButtonDiv&&(s.rightButtonDiv.tabIndex=this.mPopping?0:-1),s.leftButtonDiv&&(s.leftButtonDiv.tabIndex=this.mPopping?0:-1));var r=this.mPopping?s:this.mNavigationStack[t-1];if(r){var n=r.leftButtonDiv,o=r.rightButtonDiv,a=this.mPopping?n||o:o||n;if(a)a.focus();else{var l=this.form.getNextPrevTabObject(this,!1);l&&l.focus()}this.liveRegion.innerText=r.title||""}}for(e=0;e<jOmnis.deferredFocus.length;++e)jOmnis.deferredFocus[e].deferredFocus();jOmnis.deferredFocus=[],this.canSendEvent(this.mPopping?sn.evPopFinished:sn.evPushFinished)&&(this.eventParamsAdd("pPageNumber",t),this.sendEvent(this.mPopping?"evPopFinished":"evPushFinished")),jOmnis.deferFocusUntilAnimationComplete=!1},nn.prototype.updateScrollLeft=function(t,e,i){var s=t.scrollLeft+e;(e>0&&s>i||e<0&&s<i)&&(s=i),t.scrollLeft=s},nn.prototype.buildStackItemElements=function(t,e){var i=this.getClientElem(),s=document.createElement("div");t.stackDiv=s,s.style.background="transparent",s.style.width=i.clientWidth+"px",s.style.height=i.clientHeight+"px",s.style.position="absolute",s.style.top=0,s.style.left=e*i.clientWidth+"px",this.buildStackItemContent(t,e,!1),this.stackParentDiv.appendChild(s)},nn.prototype.buildStackItemContent=function(t,e,i){var s=this.getClientElem();i&&(t.leftButtonDiv&&(t.stackDiv.removeChild(t.leftButtonDiv),t.leftButtonDiv=null),t.rightButtonDiv&&(t.stackDiv.removeChild(t.rightButtonDiv),t.rightButtonDiv=null),t.titleDiv&&(t.stackDiv.removeChild(t.titleDiv),t.titleDiv=null)),t.stackDiv.style.background=s.style.background,t.stackDiv.style.backgroundSize=s.style.backgroundSize,this.mButtonTextDivElement=this.getTextWidthDiv(),this.mButtonTextDivElement.style.fontSize=this.mButtonFontSize+"pt";var r=this.addButton(t,!0,e>0),n=this.addButton(t,!1,!1);if(this.removeTextWidthDiv(this.mButtonTextDivElement),this.mButtonTextDivElement=null,t.hideleft&&(r=0),r<n){var o=document.createElement("div");o.style.height=this.mFontHeight+"px",o.style.width=s.clientWidth+"px",o.style.position="absolute",o.style.left=0,o.style.top=(s.clientHeight-this.mFontHeight)/2+"px",o.style.textAlign="center",o.style.zIndex=1,o.style.whiteSpace="nowrap",o.style.overflow="hidden",o.style.clip="rect(0px,"+n+"px,"+s.clientHeight+"px,"+r+"px)",o.innerHTML=jOmnis.escapeHTML(t.title),t.stackDiv.appendChild(o),t.titleDiv=o}},nn.prototype.rebuildStackItemContent=function(){if(this.mNavigationStack)for(var t=0;t<this.mNavigationStack.length;++t){var e=this.mNavigationStack[t];this.buildStackItemContent(e,t,!0)}},nn.prototype.disableSystemFocusChanged=function(){for(var t=this.clientElem.querySelectorAll(".ctrl-navb-button"),e=0;e<t.length;e++)this.mDisableSystemFocus||this.elem.disabled?jOmnis.removeClass(t[e],"autoFocus"):jOmnis.addClass(t[e],"autoFocus")},nn.prototype.addButton=function(t,e,i){var s=this.getClientElem(),r=e?t.lefttext:t.righttext,n=e?t.lefticon:t.righticon;i&&(n=Lr);var o=r&&r.length>0,a=n&&n.length>0;if(!o&&!a)return e?0:s.clientWidth;var l=this.mButtonHeight;0==l&&((l=(this.mButtonFontHeight<this.mButtonIconSize?this.mButtonIconSize:this.mButtonFontHeight)+2*(2+this.borderWidth))<26&&(l=26));var h=i?14:this.mButtonIconSize,c=a?h:0,u=0;o&&(this.mButtonTextDivElement.innerHTML=jOmnis.escapeHTML(r),u=this.mButtonTextDivElement.clientWidth);var d=(c>u?c:u)+2*(10+this.borderWidth);a&&o&&(d+=5,d+=c>u?u:c);var p,m,f=(s.clientHeight-l)/2;m=e?(p=2)+d+1:(p=s.clientWidth-d-2)-1;var g=t.stackDiv,v=document.createElement("div");v.style.position="absolute",v.style.top=f+"px",v.style.left=p+"px",v.style.width=d-2*this.borderWidth+"px",v.style.height=l-2*this.borderWidth+"px",v.style.zIndex=2,v.style.outline="none",v.setAttribute("role","button"),v.tabIndex=this.elem.disabled?-1:0,v.className=this.mDisableSystemFocus||this.elem.disabled?"":"autoFocus",v.classList.add("ctrl-navb-button"),e&&t.hideleft&&(v.style.visibility="hidden"),jOmnisEffects.addRippleToElem(v,this.getTheme(),!1,this.resolveDefaultColor(this.mButtonHotColor,rn.HOT_BUTTON),At._j),this.setButtonBorder(v);var b=this.createButtonContentElement(v),y=-1;if(a&&(y=this.addButtonIcon(n,b,l,i)),o&&this.addButtonText(r,b,l,i,y),g.appendChild(v),e?t.leftButtonDiv=v:t.rightButtonDiv=v,!this.elem.disabled){var C=function(){e?i?_.popStackItems(1,!0):_.canSendEvent(sn.evClickInitialLeftButton)&&_.sendEvent("evClickInitialLeftButton"):_.canSendEvent(sn.evClickRightButton)&&_.sendEvent("evClickRightButton")},_=this;jOmnis.touchDevice||(v.onmousedown=function(){_.mTimeout=setTimeout((function(){_.mTimeout=null}),1e3)},v.ondblclick=function(t){t.preventDefault(),t.stopPropagation()}),v.onclick=function(){(_.mTimeout||jOmnis.touchDevice)&&(_.mTimeout&&(clearTimeout(_.mTimeout),_.mTimeout=null),C())},v.onkeydown=function(t){var e=OmnisKeyboardHandler.getNormalizedEventKey(t);"Enter"===e?C():" "===e&&t.preventDefault()},v.onkeyup=function(t){" "===OmnisKeyboardHandler.getNormalizedEventKey(t)&&C()}}return m},nn.prototype.setButtonBorder=function(t){this.setButtonBorderColor(t,this.getButtonBorderColor()),t.style.borderStyle="solid",t.style.borderWidth=this.borderWidth+"px",t.style.borderRadius="3px"},nn.prototype.setButtonBorderColor=function(t,e){t.style.borderColor=this.getTheme().getColorString(e)},nn.prototype.getButtonBorderColor=function(){return-1==this.mButtonBorderColor?12632256:this.mButtonBorderColor},nn.prototype.createButtonContentElement=function(t){var e=document.createElement("div");return e.style.background="transparent",e.style.position="absolute",e.style.width="100%",e.style.height="100%",e.style.fontSize=this.mButtonFontSize+"pt",t.appendChild(e),e},nn.prototype.addButtonIcon=function(t,e,i,s){var r=s?14:this.mButtonIconSize,n=s?22:this.mButtonIconSize,o=(i-2*this.borderWidth-n)/2;if(s){e.innerHTML=Lr;var a=e.firstElementChild}else a=jIcons.replaceOrAddToElem(e,t);return a&&(a.style.position="absolute",a.style.left="10px",a.style.top=o+"px",a.style.width=r+"px",a.style.height=n+"px"),10},nn.prototype.addButtonText=function(t,e,i,s,r){var n,o=s?14:this.mButtonIconSize;n=-1==r?10:r+o+5,e.style.paddingLeft=n+"px";var a=(i-2*this.borderWidth-this.mButtonFontHeight)/2;a<0&&(a=0),e.style.paddingTop=a+"px";var l=document.createTextNode(t);e.appendChild(l),jOmnis.disableTextSelection(e)},nn.prototype.pushStackItem=function(t){if(this.mPagedPaneCtrl){var e=t.lstData;if(e&&e.length>=2){var i=1*e[0];if(i>=1&&i<=this.mPagedPaneCtrl.pageCount){for(var s=0;s<this.mNavigationStack.length;++s)if(this.mNavigationStack[s].pagenumber==i)return;var r,n,o,a=e[1];e.length>=3&&(r=e[2]),e.length>=4&&(n=e[3]),o=e.length>=5&&1*e[4]!=0;var l=e.length>=6&&e[5]?e[5]:this.mNavigationStack[this.mNavigationStack.length-1].title;this.push(i,a,r,n,o,l,null)}}}},nn.prototype.popStackItems=function(t,e){if(this.mNavigationStack.length>1){t>this.mNavigationStack.length-1&&(t=this.mNavigationStack.length-1);var i=this.mNavigationStack.length-1-t,s=this.mNavigationStack[i];this.mCurrentPage=s.pagenumber,this.mOldCurrentPage=this.mPagedPaneCtrl.currentPage,jOmnis.deferredFocus=[],this.mPagedPaneCtrl.setCurrentPage(s.pagenumber,!1),this.animateStackChange(i*this.clientElem.clientWidth,i*this.mPagedPaneCtrl.clientElem.clientWidth,!0),e&&this.mPagedPaneCtrl.sendUserChangedPageEvent()}},nn.prototype.pagedPaneSizeChanged=function(){if(this.isTranslating)this.mDeferredPaneSizeChange=!0;else{this.mDeferredPaneSizeChange=!1;var t=this.mPagedPaneCtrl.clientElem.clientWidth;if(t!==this.mPagedPaneWidth){this.mPagedPaneWidth=t;for(var e=0;e<this.mNavigationStack.length;++e){var i=this.mNavigationStack[e];this.mPagedPaneCtrl.pages[i.pagenumber-1].style.left=t*e+"px"}var s=this.getLeftOffset(this.mPagedPaneCtrl.clientElem);if(this.usesAnimation)jOmnis.startTranslateAnimation(this.mPagedPaneCtrl.pageParentDiv,-s,0,0,null);else{this.mPagedPaneCtrl.animatingStackChange=!0,this.mPagedPaneCtrl.clientElem.scrollLeft=s;var r=this;setTimeout((function(){r.mPagedPaneCtrl.animatingStackChange=!1}),50)}}}};var on,an=nn,ln=i(4555);function hn(t){return function(t){if(Array.isArray(t))return cn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return cn(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return cn(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cn(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}function un(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function dn(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?un(Object(i),!0).forEach((function(e){pn(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):un(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function pn(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var mn="$cascadecontents",fn="$headingfont",gn="$headingfontsize",vn="$headingfontstyle",bn="$headingtextcolor",yn="$openwhenmouseover",Cn="$descriptionfont",_n="$descriptionfontsize",En="$descriptionfontstyle",wn="$descriptiontextcolor",kn="$horizontalspacing",Tn="$verticalspacing",Sn="$horizontalcascadeiconid",xn="$verticalcascadeiconid",Dn="$hottextcolor",On="$hotfontstyle",An="$hotheadingtextcolor",Pn="$hotheadingfontstyle",In="$defaultcascadeopenside",Ln="$defaultcascadeborderedges",jn="$defaultcascadebordercolor",Nn="$defaultcascadebackalpha",Bn="$defaultcascadebackcolor",Rn="$borderedges",Mn="$defaultcascadeflags",Fn="$defaultcascadeborderwidth",Hn="$borderwidth",zn="$closeboxiconid",Wn="$hotcloseboxiconid",$n=1,Un=2,Vn=3,qn=1,Kn=2,Gn=3,Yn={kNavMenuSideLeft:1,kNavMenuSideRight:2,kNavMenuSideTop:4,kNavMenuSideBottom:8},Xn=1,Jn=2,Qn=4,Zn=8,to=16,eo=1,io=2,so=4,ro=8,no=128,oo=0,ao=1,lo=2,ho=3,co=4,uo=5,po=6,mo=0,fo=1,go=2,vo=3,bo=4,yo=5,Co=6,_o=7,Eo=0,wo=1,ko=2,To=3,So=4,xo=0,Do=1048576,Oo=2097152,Ao=3145728,Po=4194304,Io=5242880,Lo=6291456,jo=7340032,No=8388608,Bo=9437184,Ro=10485760,Mo=11534336,Fo=12582912,Ho=13631488,zo=14680064,Wo=15728640,$o=267386880,Uo=1048575;function Vo(t){for(;t&&(!t.id||0==t.id.length);)t=t.parentNode;if(t){var e=t.id,i=e.lastIndexOf("_");if(-1!=i){var s=parseInt(e.substr(i+1));this.mType=s&$o,this.mCascadeLevel=s>>16&15,Do==this.mType?(this.mRow=0,this.mTableIndex=65535&s):(this.mRow=65535&s,this.mTableIndex=0),this.mCascadeId=s&Uo}}}function qo(t,e,i,s,r,n,o,a,l){this.mCtrl=t,this.mEntryRow=e,this.mEntryRowIndex=i,this.mPageObject=s,this.mCascadeLevel=r,this.mCascadeEntryList=n,o&&(this.mWaitingForCascadeContents=!0,this.mTarget=o,this.mParentPageDiv=a,this.mTargetIdIndex=l)}qo.prototype.mouseOverOrClick=function(t,e,i){var s=this.mCtrl;if(e.mCascadeLevel==this.mCascadeLevel&&e.mType!=Do){if(this.mCascadeEntryList){var r=this.mCascadeEntryList[e.mRow];r&&(s.mOpenWhenMouseOver||i)&&r[oo]==qn&&(s.elem.disabled||0!=(r[ho]&Qn)||s.openCascadePage(t,this.mPageObject.mPageDiv,r,e))}return!i}s=this.mCtrl;var n=!0,o=e.mType;return(s.clientElem==t||Bo==o||xo==o||Do==o||Lo==o||Ro==o||Mo==o||Fo==o||Ho==o||e.mCascadeLevel==this.mCascadeLevel-1&&e.mRow==this.mEntryRowIndex)&&(n=!1),n?(s.closeCascades(e.mCascadeLevel),!1):!i},Go.prototype=new a.U2,Go.prototype.mAcceptsReturn=!0,Go.prototype.mAcceptsEscape=!0,Go.prototype.defaultAriaElem=!1,Go.prototype.setFillColor=!0;var Ko=dn(dn({},a.Mr),{},{CASCADE_BACKCOLOR:"CASCADE_BACKCOLOR",HOT_TEXTCOLOR:"HOT_TEXTCOLOR"});function Go(){this.init_class_inst()}Go.prototype.DefaultColors=dn(dn({},a.U2.prototype.DefaultColors),{},(pn(on={},Ko.BACKGROUND,o.l1.primary),pn(on,Ko.CASCADE_BACKCOLOR,o.l1.surface),pn(on,Ko.HOT_TEXTCOLOR,o.l1.secondary),on)),Go.prototype.init_class_inst=function(){this.superclass=a.U2.prototype,this.superclass.init_class_inst.call(this),this.mFocusStyle=eBaseFocusStyle.eNone,this.baseClassName="omnis-navmenu",this.usesNotActiveOverlay=!0,this.activeReplacesEnabled=!0,this.mSizeObj={width:16,height:16},this.showDesignName=!0},Go.prototype.delete_class_inst=function(){this.closeCascades(0,!0),this.mStyleSheet&&jOmnis.removeStyleSheet(this.mStyleSheet),this.iscroll&&this.iscroll.destroy(),this.superclass.delete_class_inst.call(this)},Go.prototype.init_ctrl_inst=function(t,e,i,s){this.superclass.init_ctrl_inst.call(this,t,e,i,s);var r=this.getClientElem();function n(t){var e=r.getAttribute(t);return e?1*e:0}return r.style.outline="none",r.style.overflow="hidden",this.makeChildIdBase(r),this.mCascadeParentID="___nm_cascade"+this.uniqueID,this.mHeadingFont=r.getAttribute("data-hf"),this.mHeadingFontSize=n("data-hfsz"),this.mHeadingFontStyle=n("data-hfst"),this.mHeadingTextColor=n("data-hfc"),this.mDescFont=r.getAttribute("data-df"),this.mDescFontSize=n("data-dfsz"),this.mDescFontStyle=n("data-dfst"),this.mDescTextColor=n("data-dfc"),this.mOpenWhenMouseOver=!!n("data-owmo"),this.mHorzSpacing=n("data-hs"),this.mVertSpacing=n("data-vs"),this.mHorizontalCascadeIconId=this.setupIcon(r.getAttribute("data-hcii")),this.mVerticalCascadeIconId=this.setupIcon(r.getAttribute("data-vcii")),this.mHotTextColor=n("data-htfc"),this.mHotFontStyle=n("data-htst"),this.mHotHeadingTextColor=n("data-hhfc"),this.mHotHeadingFontStyle=n("data-hhst"),this.mDefaultCascadeOpenSide=n("data-dcos"),this.mDefaultCascadeBorderEdges=n("data-dcbe"),this.mDefaultCascadeBorderColor=n("data-dcboc"),this.mDefaultCascadeBackColor=n("data-dcbc"),this.mDefaultCascadeBackAlpha=n("data-dcba"),this.mBorderEdges=n("data-be"),this.mDefaultCascadeFlags=n("data-dcf"),this.mDefaultCascadeBorderWidth=n("data-dcbw"),this.mBorderWidth=n("data-bw"),this.mCloseBoxIconId=this.setupIcon(r.getAttribute("data-cbii")),this.mHotCloseBoxIconId=this.setupIcon(r.getAttribute("data-hcbii")),this.setEventHandlers(r),r.addEventListener("focusin",(function(){r.scrollTop=0})),this.mCascadeTrackingArray=[],this.mAnimations={},this.mPixelsPerScroll=1,this.activeChanged(),this.update(),!1},Go.prototype.updateCtrl=function(t,e,i,s){var r=this.getClientElem();this.stopAllAnimation(),this.closeCascades(0,!0);for(var n=document.activeElement.id;null!=r.firstChild;)r.removeChild(r.firstChild);this.mLeftArrowElem=null,this.mRightArrowElem=null,this.mCascadePages={},this.buildCSSStyles();var a=this.getTheme().getColorString(1*r.getAttribute("data-bordercolor"),o.l1.border);if(this.mInitialTopDiv=this.buildMenuPage(this.getData(),r,null,this.mBorderWidth,this.mBorderEdges,a,0),this.setAriaElement(this.mInitialTopDiv),this.sizeChanged(!0),!document.activeElement||n!==document.activeElement.id){var l=document.getElementById(n);l&&(l.focus(),l.tabIndex=0)}if(!l){var h=this.mInitialTopDiv.querySelector("[role='menuitem']");h&&(h.tabIndex=0)}},Go.prototype.getProperty=function(t){switch(t){case mn:return null;case fn:return this.mHeadingFont;case gn:return this.mHeadingFontSize;case vn:return this.mHeadingFontStyle;case bn:return this.mHeadingTextColor;case yn:return this.mOpenWhenMouseOver;case Cn:return this.mDescFont;case _n:return this.mDescFontSize;case En:return this.mDescFontStyle;case wn:return this.mDescTextColor;case kn:return this.mHorzSpacing;case Tn:return this.mVertSpacing;case Sn:return this.mHorizontalCascadeIconId;case xn:return this.mVerticalCascadeIconId;case Dn:return this.mHotTextColor;case On:return this.mHotFontStyle;case An:return this.mHotHeadingTextColor;case Pn:return this.mHotHeadingFontStyle;case In:return this.mDefaultCascadeOpenSide;case Ln:return this.mDefaultCascadeBorderEdges;case jn:return this.mDefaultCascadeBorderColor;case Nn:return this.mDefaultCascadeBackAlpha;case Bn:return this.mDefaultCascadeBackColor;case Rn:return this.mBorderEdges;case Mn:return this.mDefaultCascadeFlags;case Fn:return this.mDefaultCascadeBorderWidth;case Hn:return this.mBorderWidth;case zn:return this.mCloseBoxIconId;case Wn:return this.mHotCloseBoxIconId}return this.superclass.getProperty.call(this,t)},Go.prototype.getCanAssign=function(t){switch(t){case mn:case fn:case gn:case vn:case bn:case yn:case Cn:case _n:case En:case wn:case kn:case Tn:case Sn:case xn:case Dn:case On:case An:case Pn:case In:case Ln:case jn:case Nn:case Bn:case Rn:case Mn:case Fn:case Hn:case zn:case Wn:return!0}return this.superclass.getCanAssign.call(this,t)},Go.prototype.setProperty=function(t,e){var i=this;function s(t){return!!e&&(e!=i[t]&&(i[t]=e+"",i.mNeedUpdate=!0),!0)}function r(t,s,r,n){return null==s&&(s=0),null==e?e=0:e*=1,!(e<s)&&(!(null!=r&&e>r)&&(e!=i[t]&&(i[t]=e,n||(i.mNeedUpdate=!0)),!0))}function n(t){return(e=+e)!==i[t]&&(i[t]=e,i.mNeedUpdate=!0),!0}switch((!this.mSettingProperties&&this.form.inst.recordUpdates||this.applyingFieldStyles)&&(this.form.inst.registerPropertyObject(this),this.mSettingProperties=!0),t){case mn:if(null!=this.mLoadEventCascadeId&&this.mCascadeTrackingArray.length){var o=this.mCascadeTrackingArray[this.mCascadeTrackingArray.length-1];o&&o.mWaitingForCascadeContents&&(this.mCascadeTrackingArray.pop(),e&&e.lstData&&e.lstData.length>0&&this.openCascadePage(o.mTarget,o.mParentPageDiv,o.mEntryRow,o.mTargetIdIndex,e))}return!0;case fn:return s("mHeadingFont");case gn:return r("mHeadingFontSize",2);case vn:return r("mHeadingFontStyle",0,7);case bn:return n("mHeadingTextColor");case yn:var a=this.mOpenWhenMouseOver;return this.mOpenWhenMouseOver=1*e!=0,a!=this.mOpenWhenMouseOver&&(this.mNeedUpdate=!0),!0;case Cn:return s("mDescFont");case _n:return r("mDescFontSize",2);case En:return r("mDescFontStyle",0,7);case wn:return n("mDescTextColor");case kn:return r("mHorzSpacing",0);case Tn:return r("mVertSpacing",0);case Sn:return s("mHorizontalCascadeIconId");case xn:return s("mVerticalCascadeIconId");case Dn:return n("mHotTextColor");case On:return r("mHotFontStyle",0,7);case An:return n("mHotHeadingTextColor");case Pn:return r("mHotHeadingFontStyle",0,7);case In:return function(t,s,r){for(var n=Object.keys(s),o=!1,a=0;a<n.length;++a)if(s[n[a]]==e){e*=1,o=!0;break}return!!o&&(e!=i[t]&&(i[t]=e,r||(i.mNeedUpdate=!0)),!0)}("mDefaultCascadeOpenSide",Yn);case Ln:return r("mDefaultCascadeBorderEdges",0,15);case jn:return n("mDefaultCascadeBorderColor");case Nn:return r("mDefaultCascadeBackAlpha",0,255);case Bn:return n("mDefaultCascadeBackColor");case Rn:return r("mBorderEdges",0,15);case Mn:return r("mDefaultCascadeFlags",0,null,!0);case Fn:return r("mDefaultCascadeBorderWidth",1,16);case Hn:return r("mBorderWidth",1,16);case zn:return s("mCloseBoxIconId");case Wn:return s("mHotCloseBoxIconId");default:t!=eBaseProperties.textcolor&&t!=eBaseProperties.bordercolor&&t!=eBaseProperties.backcolor&&t!=eBaseProperties.backalpha&&t!=eBaseProperties.fontname&&t!=eBaseProperties.fontsize&&t!=eBaseProperties.fontstyle||(this.mNeedUpdate=!0)}return this.superclass.setProperty.call(this,t,e)},Go.prototype.applyPropertyChanges=function(){this.mSettingProperties=!1,this.mNeedUpdate&&(this.updateCtrl(),this.mNeedUpdate=!1)},Go.prototype.sizeChanged=function(t){if(this.superclass.sizeChanged.call(this),this.mInitialTopDiv&&this.checkScrollArrows(this.mInitialTopDiv,t),this.mBreadcrumb){var e=document.getElementsByTagName("TR");if(e&&e.length){var i=this.getBreadcrumbTrHeight();e[0].style.height=i+"px"}}},Go.prototype.visibilityChanged=function(){var t=this.superclass.visibilityChanged.call(this);return this.getTrueVisibility()&&(this.mLastClientWidth=-1,this.sizeChanged()),t},Go.prototype.fontChanged=function(){this.doUpdate(),this.superclass.fontChanged.call(this)},Go.prototype.activeChanged=function(){this.doUpdate(),this.superclass.activeChanged.call(this)},Go.prototype.handleEvent=function(t){var e=t.target,i=new Vo(e);switch(t.type){case"click":return!(!this.iscroll||i.mCascadeLevel||this.iscroll.x==this.mStartScrollOffset)||(e&&e==this.mInitialTopDiv?(this.closeCascades(0),this.canSendEvent(Vn)&&this.sendEvent("evEmptySpaceClicked"),!0):(this.mouseClick(t,e,i),!0));case"mouseover":return this.mouseOver(t,e,i),!0;case"mouseout":return this.mouseOut(t,e,i),!0;case"mousedown":return t.target===this.mCascadeParent?(this.closeCascades(0),jOmnis.stopEventNow(t),!0):(i.mType!==zo&&i.mType!==Wo||this.arrowMouseDown(t,i.mType===zo),!0);case"mouseup":return i.mType!==zo&&i.mType!==Wo||this.arrowMouseUp(t,i.mType===zo),!0;case"keydown":return this.keyDown(t,e,i),!0;case"keyup":return" "===OmnisKeyboardHandler.getNormalizedEventKey(t)&&(this.setFocusNewCascade=!0,this.openCascadeOrGenerateClick(e,i,!1,!0)),!0}return this.superclass.handleEvent.call(this,t)},Go.prototype.touchCanStartScroll=function(t){return this.iscroll&&(this.mStartScrollOffset=this.iscroll.x),this.superclass.touchCanStartScroll(t)},Go.prototype.focus=function(){try{this.clientElem.querySelector("[tabindex='0']").focus()}catch(t){}},Go.prototype.setTabIndex=function(){this.clientElem.tabIndex=-1},Go.prototype.buildCSSStyles=function(){var t=this.getClientElem(),e=this,i=this.getTheme();function s(t,i){var s="#"+e.clientElem.id+t+",#"+e.mCascadeParentID+t;return i&&(s+=",#"+e.clientElem.id+i+",#"+e.mCascadeParentID+i),s+"{"}function r(t,i){var s="#"+e.mCascadeParentID+t;return i&&(s+=",#"+e.mCascadeParentID+i),s+"{"}function n(t,e,s,r,n,o){var a,l="white-space:nowrap;font-family:"+t+";font-size:"+("string"==typeof e?e+";":e+"pt;");return a="string"==typeof s?s:i.getColorString(s),l+="color: ".concat(a,"; --om-tint-color: ").concat(a,";"),l+="font-weight:","string"==typeof r?(""==o&&(o="none"),l+=r+";font-style:"+n+";text-decoration:"+o+";"):(r&eBaseFontStyles.bold?l+="bold":l+="normal",l+=";font-style:",r&eBaseFontStyles.italic?l+="italic":l+="normal",l+=";text-decoration:",l+=jOmnis.fontStyleToTextDecoration(r),l+=";"),l}var a=[" div.ctrl-nm-entry"," div.ctrl-nm-entry-dis"],l=s.apply(void 0,hn(a)),h=t.style.color;l+=n(t.style.fontFamily,t.style.fontSize,h,t.style.fontWeight,t.style.fontStyle,t.style.textDecoration),l+="}",l+=r.apply(void 0,hn(a));var c=i.getTextColorString(this.themeableData.color,this.resolveDefaultColor(this.mDefaultCascadeBackColor,Ko.CASCADE_BACKCOLOR),this.DefaultColors[Ko.TEXT]);l+="color:".concat(c,"; --om-tint-color: ").concat(c,";"),l+="}",l+=s(" div.ctrl-nm-entry-hot"," td:focus>div.ctrl-nm-entry"),l+=n(t.style.fontFamily,t.style.fontSize,this.mHotTextColor===o.JT?i.getColorString(this.DefaultColors.HOT_TEXTCOLOR):this.mHotTextColor,this.mHotFontStyle),l+="}",a=[" div.ctrl-nm-heading"," div.ctrl-nm-heading-dis"],l+=s.apply(void 0,hn(a)),l+=n(this.mHeadingFont,this.mHeadingFontSize,this.mHeadingTextColor===o.JT?h:this.mHeadingTextColor,this.mHeadingFontStyle),l+="}",l+=r.apply(void 0,hn(a));var u=i.getTextColorString(this.mHeadingTextColor,this.resolveDefaultColor(this.mDefaultCascadeBackColor,Ko.CASCADE_BACKCOLOR),this.DefaultColors[Ko.TEXT]);l+="color: ".concat(u,"; --om-tint-color: ").concat(u,";"),l+="}",l+=s(" div.ctrl-nm-heading-hot"," td:focus>div.ctrl-nm-heading"),l+=n(this.mHeadingFont,this.mHeadingFontSize,this.mHotHeadingTextColor===o.JT?i.getColorString(this.DefaultColors.HOT_TEXTCOLOR):this.mHotHeadingTextColor,this.mHotHeadingFontStyle),l+="}",l+=s(a=" div.ctrl-nm-desc"),l+=n(this.mDescFont,this.mDescFontSize,this.mDescTextColor===o.JT?h:this.mDescTextColor,this.mDescFontStyle),l+="}",this.mDescTextColor===o.JT&&(l+=r(a),l+="color: ".concat(c,"; --om-tint-color: ").concat(c,";"),l+="}"),this.mStyleSheet&&jOmnis.removeStyleSheet(this.mStyleSheet),this.mStyleSheet=jOmnis.addStyleSheet(l)},Go.prototype.complexGridRerendered=function(){this.buildCSSStyles()},Go.prototype.buildMenuPage=function(t,e,i,s,r,n,o){var a=this.getClientElem(),l=document.createElement("DIV");l.id=this.childIdBase+"top_"+this.makeIdIndex(Bo,o,0),o&&(l.className="ctrl-nm-top"),l.setAttribute("role",o?"menu":"menubar"),e.appendChild(l);var h=document.createElement("DIV");h.style.display="inline-block",l.appendChild(h),h.id=this.childIdBase+"page_"+this.makeIdIndex(xo,o,0),o>0&&(this.setEventHandlers(h),h.style.backgroundColor=i);var c=s+"px";function u(t){t.style.borderStyle="solid",o?t.style.borderColor=n:t.style.backgroundColor=n,t.style.borderWidth="0px"}if(o)u(h),r&Yn.kNavMenuSideLeft&&(h.style.borderLeftWidth=c),r&Yn.kNavMenuSideRight&&(h.style.borderRightWidth=c),r&Yn.kNavMenuSideTop&&(h.style.borderTopWidth=c),r&Yn.kNavMenuSideBottom&&(h.style.borderBottomWidth=c);else{var d=function(t,e,i){var s=document.createElement("DIV");u(s),s.style.position="absolute",i?(s.style[t]="0px",s.style.height="100%",s.style.top="0px",s.style.width=c):(s.style[t]="0px",s.style.width="100%",s.style.left="0px",s.style.height=c),s.id=m.childIdBase+"bor_"+m.makeIdIndex(e,0,0),a.appendChild(s),i||(l.style["padding-"+t]=c)},p=function(t){var e=m.childIdBase+"bor_"+m.makeIdIndex(t,0,0),i=document.getElementById(e);i&&i.parentNode&&i.parentNode.removeChild(i)},m=this;p(Ro),p(Mo),p(Fo),p(Ho),r&Yn.kNavMenuSideLeft&&d("left",Ro,!0),r&Yn.kNavMenuSideRight&&d("right",Mo,!0),r&Yn.kNavMenuSideTop&&d("top",Fo),r&Yn.kNavMenuSideBottom&&d("bottom",Ho)}if(o>0&&(!this.mOpenWhenMouseOver||jOmnis.touchDevice)&&!this.mBreadcrumb&&this.mCloseBoxIconId){var f=jIcons.replaceOrAddToElem(h,this.mCloseBoxIconId,null,this.mSizeObj);if(f){f.setAttribute("role","presentation"),f.style.position="absolute";var g=this.mBorderWidth+"px";f.style.top=g,f.style.left=g,f.style.paddingTop=this.mVertSpacing/2+"px",f.id=this.childIdBase+"cb_"+this.makeIdIndex(Lo,o,0)}}if(!t)return l;var v=t.lstData;return!v||v.length<=0||(jOmnis.applyStyles(),o||0==(v[0][ho]&Zn)||(this.mBreadcrumb=!0),0!=(v[0][ho]&Xn)||this.mBreadcrumb&&!o?this.buildHorzMenuPage(h,v,o):this.buildVertMenuPage(h,v,o)),l},Go.prototype.buildHorzMenuPage=function(t,e,i){t.className="ctrl-nm-horz",t.parentElement.setAttribute("aria-orientation","horizontal");var s=this,r=0,n=0,a=!i&&this.mBreadcrumb;function l(){var e=document.createElement("TABLE");return e.style.borderSpacing="0px "+(a?0:s.mVertSpacing/2)+"px",r&&(e.style.position="relative",e.style.top=r+"px"),a&&(e.style.fontSize="1pt"),e.id=s.childIdBase+"table_"+s.makeIdIndex(Do,i,n++),e.setAttribute("role","presentation"),t.appendChild(e),e}a&&jOmnis.inFirefox()&&0!=(this.mBorderEdges&Yn.kNavMenuSideTop)&&(r=this.mBorderWidth);var h,c,u=e.length,d=l();i>0&&this.checkTablePadding(d);var p,m,f=0,g=-1;if(a){p=this.getBreadcrumbTrHeight()-2,m=this.mDescTextColor===o.JT?this.DefaultColors[Ko.BORDER]:this.mDescTextColor;var v=this.getTheme();m=v.getColorString(v.getColorRGB(m))}for(var b=0;b<u;++b){h||((h=document.createElement("TR")).setAttribute("role","presentation"),h.style.verticalAlign=a?"middle":"top",d.appendChild(h),a?c=h:(c=document.createElement("TR")).setAttribute("role","presentation"));var y=e[b];if(y[oo]==Gn)-1==g&&(g=b);else if(f+=this.addMenuEntry(y,h,c,!0,!a||y[oo]==qn,i,b,null,a),a&&0!=(y[ho]&to)){var C=document.createElement("TD");C.setAttribute("role","separator"),C.style.width="6px",h.appendChild(C);var _=document.createElement("CANVAS");_.width=8,_.height=p,_.style.width="6px",_.style.height=p+"px",C.appendChild(_);var E=_.getContext("2d");E.moveTo(0,0),E.lineTo(C.clientWidth,p/2),E.lineTo(0,p),E.strokeStyle=m,E.stroke()}var w=!1,k=!1;a||(0!=(y[ho]&Jn)&&b+1<u?k=w=!0:b+1==u&&(w=!0),w&&(f?(d.appendChild(c),f=0,r-=this.mVertSpacing):c=null),k&&(d=l(),h=null))}-1!=g&&(d=l(),(h=document.createElement("TR")).setAttribute("role","presentation"),h.style.verticalAlign="top",d.appendChild(h),this.addMenuEntry(e[g],h,null,!0,!1,i,g,t,a))},Go.prototype.buildVertMenuPage=function(t,e,i){t.className="ctrl-nm-vert",t.parentElement.setAttribute("aria-orientation","vertical");var s=this,r=0;function n(){var e=document.createElement("TABLE");return e.style.borderSpacing="0px "+s.mVertSpacing/2+"px",e.style.cssFloat="left",e.id=s.childIdBase+"table_"+s.makeIdIndex(Do,i,r++),i>0&&s.checkTablePadding(e),e.setAttribute("role","presentation"),t.appendChild(e),e}var o=e.length;function a(t){for(var i=t;i<o;++i){var s=e[i];if(s[oo]==qn)return!0;if(0!=(s[ho]&Jn))break}return!1}for(var l=n(),h=a(0),c=-1,u=0;u<o;++u){var d=document.createElement("TR");d.setAttribute("role","presentation"),d.style.verticalAlign="top",l.appendChild(d);var p=e[u];p[oo]!=Gn?(this.addMenuEntry(p,d,d,!1,h,i,u),0!=(p[ho]&Jn)&&u+1<o&&(l=n(),h=a(u+1))):-1==c&&(c=u)}-1!=c&&(l=n(),(d=document.createElement("TR")).setAttribute("role","presentation"),d.style.verticalAlign="top",l.appendChild(d),this.addMenuEntry(e[c],d,null,!1,!1,i,c,t))},Go.prototype.addMenuEntry=function(t,e,i,s,r,n,o,a,l){function h(t){var e=document.createElement("TD");return l&&(e.style.border="solid 1px transparent",e.className="ctrl-nm-bc"),t.appendChild(e),e}var c=h(e);c.id=this.childIdBase+"td_"+this.makeIdIndex(Oo,n,o);var u,d=this.mHorzSpacing/2+"px";function p(t,e,i){var s=document.createElement("DIV");if(-1==t.indexOf("\r"))s.innerHTML=jOmnis.escapeHTML(t,!0);else for(var r=t.split("\r"),n=0;n<r.length;++n){var o=document.createElement("DIV");o.innerHTML=jOmnis.escapeHTML(r[n],!0),s.appendChild(o)}if(c.appendChild(s),e&&i){s.className=e;var a=s.clientWidth;s.className=i,s.clientWidth>a&&(a=s.clientWidth),s.style.width=a+"px"}return s}c.style.paddingLeft=d,c.style.paddingRight=d,r&&((u=h(i)).id=this.childIdBase+"casctd_"+this.makeIdIndex(jo,n,o),s&&(u.style.paddingLeft=d),l&&(u.className="ctrl-nm-bc",u.tabIndex=-1,u.setAttribute("role","menuitem"),u.setAttribute("aria-haspopup","true"),u.setAttribute("aria-expanded","false")));var m,f=t[oo],g=t[ao];g&&g.length&&((m=Kn==f?p(g,"ctrl-nm-heading","ctrl-nm-heading-hot"):p(g,"ctrl-nm-entry","ctrl-nm-entry-hot")).id=this.childIdBase+"mdiv_"+this.makeIdIndex(Ao,n,o),m.firstElementChild&&jIcons.isIcon(m.firstElementChild)&&(m.firstElementChild.alt=""),l&&u&&u.setAttribute("aria-label",u.previousSibling.textContent));var v=this.elem.disabled||0!=(t[ho]&Qn);if(f!=Gn){var b=t[lo];if(b&&b.length){var y=p(b);y.className="ctrl-nm-desc",y.id=this.childIdBase+"ddiv_"+this.makeIdIndex(Po,n,o)}}if(v||(c.tabIndex=n?0:-1,c.setAttribute("role","menuitem"),qn!==f||l&&0===n||(c.setAttribute("aria-haspopup","true"),c.setAttribute("aria-expanded","false"))),m&&(m.className=v?"ctrl-nm-entry-dis":"ctrl-nm-entry",Kn==f&&(m.className=v?"ctrl-nm-heading-dis":"ctrl-nm-heading"),qn==f&&(m.style.textDecoration="none")),Gn==f){var C=t[po];if(C&&C.lstData&&C.lstData.length){var _=function(t,e){var i=C[t];return null==i?e:i};C=C.lstData[0];var E=document.createElement("DIV");c.appendChild(E);var w=_(wo,0);w*=1;var k=_(ko,0);k*=1;var T=jIcons.selectIcon(C[Eo]),S=jIcons.getIconSize(T);E.style.width=S.width+w+"px",E.style.height=S.height+k+"px",E.id=this.childIdBase+"img_"+this.makeIdIndex(Io,n,o),a.style.backgroundImage="url("+T+")",a.style.backgroundRepeat="no-repeat";var x=_(To,"98%"),D=_(So,"98%");a.style.backgroundPosition=x+" "+D}}else if(qn==f){var O,A;(C=t[po])&&C.lstData&&C.lstData.length&&(C=C.lstData[0]),O=C&&C.length>go?C[go]:this.mDefaultCascadeOpenSide,A=l||O&(Yn.kNavMenuSideLeft|Yn.kNavMenuSideRight)?this.mHorizontalCascadeIconId:this.mVerticalCascadeIconId;var P=jIcons.replaceOrAddToElem(u,A,null,this.mSizeObj);return P&&(P.setAttribute("role","presentation"),s&&!l&&(P.style.position="relative",P.style.top=-this.mVertSpacing+"px"),P.id=this.childIdBase+"casc_"+this.makeIdIndex(No,n,o)),1}return 0},Go.prototype.checkTablePadding=function(t){var e=this.mHorzSpacing/2;e<16&&(!this.mOpenWhenMouseOver||jOmnis.touchDevice)&&!this.mBreadcrumb&&this.mCloseBoxIconId&&(t.style.paddingLeft=16-e+"px")},Go.prototype.makeIdIndex=function(t,e,i){return t+(e<<16)+i},Go.prototype.openCascadePage=function(t,e,i,s,r,n){var a=this.mCascadeTrackingArray.length+1,l=i[po];function h(t,e){return l&&l.length>t?l[t]:e}l&&l.lstData&&l.lstData.length&&(l=l.lstData[0]);var c,u=this.childIdBase+"mdiv_"+this.makeIdIndex(Ao,s.mCascadeLevel,s.mRow),d=document.getElementById(u);if(d&&!this.mBreadcrumb&&("ctrl-nm-entry"==d.className?d.className="ctrl-nm-entry-hot":"ctrl-nm-heading"==d.className&&(d.className="ctrl-nm-heading-hot"),d.parentElement.setAttribute("aria-expanded","true")),this.mBreadcrumb&&s.mType===jo&&t.setAttribute("aria-expanded","true"),this.mBreadcrumb&&1==a){var p=this.childIdBase+"casc_"+this.makeIdIndex(No,s.mCascadeLevel,s.mRow);(c=document.getElementById(p))&&jIcons.setImageUrl(c,this.mVerticalCascadeIconId)}this.stopAllAnimation();var m=this.mCascadePages[s.mCascadeId],f=h(fo,this.mDefaultCascadeFlags);if(f&no&&(f=this.mDefaultCascadeFlags),!r&&0!=(f&eo)){if(null!=this.mLoadEventCascadeId)return null;if(m&&0!=(f&ro)||m&&(delete this.mCascadePages[s.mCascadeId],m=null),!m)return this.canSendEvent($n)?(this.eventParamsAdd("pLineIdent",i[co]),this.eventParamsAdd("pLineTag",i[uo]),this.sendEvent("evLoadCascade"),this.mCascadeTrackingArray.push(new qo(this,i,s.mRow,{parentMainDiv:d,parentCascImg:c},a,null,t,e,s)),this.mLoadEventCascadeId=s.mCascadeId,null):null}var g=h(go,this.mDefaultCascadeOpenSide),v=r||l[mo],b=h(yo,this.mDefaultCascadeBorderWidth),y=h(vo,this.mDefaultCascadeBorderEdges),C=this;function _(t){var e=C.mCascadeParent;t?(e.style.width=C.form.inst.elem.clientWidth+"px",e.style.height=C.form.inst.elem.clientHeight+"px",e.style.position="absolute",e.style.left=e.style.top="0",e.style.zIndex=ln.Z.ZINDEX_OVERLAY,e.onmousedown=C.mEventFunction):(e.style.width="",e.style.height="",e.style.position="",e.style.left=e.style.top="",e.style.zIndex="",e.onmousedown=null)}if(m)this.mCascadeParent.parentNode||document.body.appendChild(this.mCascadeParent),this.mCascadeParent.appendChild(m.mPageDiv),_(!this.mOpenWhenMouseOver||n);else{var E=h(_o,this.mDefaultCascadeBackAlpha),w=this.getTheme().getColorString(h(Co,this.mDefaultCascadeBackColor),this.DefaultColors.CASCADE_BACKCOLOR,E/255),k=this.getTheme().getColorString(h(bo,this.mDefaultCascadeBorderColor),o.l1.border);if(this.mCascadeParent)this.mCascadeParent.parentNode||document.body.appendChild(this.mCascadeParent);else{var T=document.createElement("DIV");this.mCascadeParent=T,T.id=this.mCascadeParentID,T.className="ctrl-nm-cp "+this.getTheme().getCSSClass();var S=this.getProperty(eBaseProperties.cssclassname);S&&(T.className+=" "+S),T.omnisObject=this,this.mOpenWhenMouseOver&&!n||_(!0),document.body.appendChild(T)}var x=this.buildMenuPage(v,this.mCascadeParent,w,b,y,k,a);x.style.zIndex=+ln.Z.ZINDEX_OVERLAY+1+"",x.style.overflow="hidden",m={mPageDiv:x,width:x.firstChild.clientWidth+2,height:x.firstChild.clientHeight+2,parentMainDiv:d,parentCascImg:c,cascadeId:s.mCascadeId},this.mCascadePages[s.mCascadeId]=m}if(this.positionAndSizeCascadePage(s,e,m,g,0!=(f&so),0!=(f&io),b,y),!jOmnis.touchDevice||this.mCascadeTrackingArray.length||this.documentClick||(this.documentClick=this.makeFunction("onDocumentClick",1),document.addEventListener("touchstart",this.documentClick,!0)),this.mCascadeTrackingArray.push(new qo(this,i,s.mRow,m,a,v?v.lstData:null)),this.setFocusNewCascade){var D=m.mPageDiv.querySelector("[role='menuitem']");D&&(D.focus(),m.mPageDiv.scrollTop=0),this.setFocusNewCascade=!1}return!d||this.mBreadcrumb&&1===a?this.mBreadcrumb&&s.mType===jo&&t.setAttribute("aria-owns",m.mPageDiv.id):d.parentElement.setAttribute("aria-owns",m.mPageDiv.id),m},Go.prototype.positionAndSizeCascadePage=function(t,e,i,s,r,n,o,a){var l,h,c=i.width,u=i.height,d=c,p=u;if(a&Yn.kNavMenuSideLeft&&(d+=o),a&Yn.kNavMenuSideRight&&(d+=o),a&Yn.kNavMenuSideTop&&(p+=o),a&Yn.kNavMenuSideBottom&&(p+=o),n||this.mBreadcrumb){if(l=jOmnis.getElemPosRelativeToAncestor(e),0==t.mCascadeLevel?(h=this.clientElem,l.x-=this.getPixels(e.style.marginLeft)):h=e,r&&(Yn.kNavMenuSideLeft==s||Yn.kNavMenuSideRight==s?p<h.offsetHeight&&(u=p=h.offsetHeight,a&Yn.kNavMenuSideTop&&(u-=o),a&Yn.kNavMenuSideBottom&&(u-=o)):c<h.offsetWidth&&(c=d=h.offsetWidth,a&Yn.kNavMenuSideLeft&&(c-=o),a&Yn.kNavMenuSideRight&&(c-=o))),this.mBreadcrumb){var m=this.childIdBase+"casctd_"+this.makeIdIndex(jo,t.mCascadeLevel,t.mRow),f=document.getElementById(m);if(f){var g=jOmnis.getElemPosRelativeToAncestor(f);l.x=g.x-16}}}else{var v=Oo,b="td_";"ctrl-nm-horz"==e.firstChild.className?s==Yn.kNavMenuSideBottom&&(v=jo,b="casctd_"):s==Yn.kNavMenuSideRight&&(v=jo,b="casctd_"),m=this.childIdBase+b+this.makeIdIndex(v,t.mCascadeLevel,t.mRow),h=document.getElementById(m),l=jOmnis.getElemPosRelativeToAncestor(h)}var y=l.x,C=l.y,_=!1,E=this;function w(e,i){if(!t.mCascadeLevel){var s=E.childIdBase+"bor_"+E.makeIdIndex(i,0,0),r=document.getElementById(s);if(!r)return 0;e=i==Ro||i==Mo?r.style.width:r.style.height}var n=e.indexOf("px");return-1==n?0:parseInt(e.substr(0,n))}switch(s){case Yn.kNavMenuSideLeft:l.x-=c,n&&(l.x+=w(e.firstChild.style.borderLeftWidth,Ro)),_=!0;break;case Yn.kNavMenuSideRight:l.x+=h.clientWidth,n&&(l.x-=w(e.firstChild.style.borderRightWidth,Mo));break;case Yn.kNavMenuSideTop:l.y-=u,n&&(l.y+=w(e.firstChild.style.borderTopWidth,Fo)),_=!0;break;default:l.y+=h.clientHeight,n&&(l.y-=w(e.firstChild.style.borderBottomWidth,Ho))}var k=jOmnis.getWindowClientScroll();l.x+c-k.XOffset>jOmnis.curWindowWidth&&(l.x=jOmnis.curWindowWidth-c+k.XOffset),l.x<0&&(l.x=0),l.y+u-k.YOffset>jOmnis.curWindowHeight&&(l.y=jOmnis.curWindowHeight-u+k.YOffset),l.y<0&&(l.y=0);var T=i.mPageDiv;T.firstChild.style.width=c+"px",T.firstChild.style.height=u+"px",T.style.width="0px",T.style.height="0px",T.style.position="absolute",T.style.opacity=0;var S={};S.width=d+"px",S.height=p+"px",S.opacity=1,_?(S.left=l.x+"px",S.top=l.y+"px",T.style.left=y+"px",T.style.top=C+"px"):(T.style.left=l.x+"px",T.style.top=l.y+"px"),E=this,this.mOpenAnimationTimer=setTimeout((function(){E.mOpenAnimationTimer=null,E.startAnimation(T,!1),jOmnis.animate(T,S,200)}),10)},Go.prototype.handleEventResult=function(t,e){if("evLoadCascade"==t&&(this.mLoadEventCascadeId=null,this.mCascadeTrackingArray.length)){var i=this.mCascadeTrackingArray[this.mCascadeTrackingArray.length-1];i&&i.mWaitingForCascadeContents&&this.mCascadeTrackingArray.pop()}return null},Go.prototype.mouseOver=function(t,e,i){if(null==this.mLoadEventCascadeId)i.mCascadeLevel!=this.mCascadeTrackingArray.length&&this.mOpenWhenMouseOver||this.addHotStyle(e,i),this.mBreadcrumb&&!i.mCascadeLevel&&this.setBreadcrumbHotStyle(e,i),this.mOpenWhenMouseOver?this.mCascadeTrackingArray.length&&this.mCascadeTrackingArray[this.mCascadeTrackingArray.length-1].mouseOverOrClick(e,i,!1)||this.elem.disabled||i.mType==Do||i.mType==Bo||i.mType==xo||i.mType==Ro||i.mType==Mo||i.mType==Fo||i.mType==Ho||this.openCascadeOrGenerateClick(e,i,!1):i.mType==Lo&&jIcons.setImageUrl(e,this.mHotCloseBoxIconId);else{this.mouseOverTimeout&&clearTimeout(this.mouseOverTimeout);var s=this;this.mouseOverTimeout=setTimeout((function(){s.mouseOverTimeout=null,s.mouseOver(t,e,i)}),200)}},Go.prototype.openCascadeOrGenerateClick=function(t,e,i,s){if(i&&Lo==e.mType&&this.mCloseBoxIconId)return this.closeCascades(e.mCascadeLevel-1),void jIcons.setImageUrl(t,this.mCloseBoxIconId);if(e.mType!==zo&&e.mType!==Wo){var r,n;if(e.mCascadeLevel){if(e.mCascadeLevel<=this.mCascadeTrackingArray.length){var o=this.mCascadeTrackingArray[e.mCascadeLevel-1];o&&(r=o.mCascadeEntryList,n=o.mPageObject.mPageDiv)}if(!r)return}else{if(!(r=this.getData())||!r.lstData)return;r=r.lstData,n=this.getClientElem().firstChild,jIcons.isIcon(n)&&(n=n.nextSibling)}if(!(e.mRow>=r.length)){var a=r[e.mRow];if(a&&0==(a[ho]&Qn))if(a[oo]!=qn||this.mBreadcrumb&&e.mType!=jo&&e.mType!=No){if(i&&(Ao==e.mType||Io==e.mType)||s&&Oo==e.mType)if(jOmnis.touchDevice){this.addHotStyle(t,e);var l=this;setTimeout((function(){l.generateClick(a,t,e)}),200)}else this.generateClick(a,t,e)}else{var h;if(!i&&!s)h=this.mOpenWhenMouseOver;else if(i){h=!(e.mCascadeLevel<this.mCascadeTrackingArray.length)}else s&&(h=!0);this.closeOnMouseOut=h&&!s&&this.mOpenWhenMouseOver,h&&this.openCascadePage(t,n,a,e,null,s)}}}},Go.prototype.generateClick=function(t,e,i){this.removeHotStyle(e,i),this.canSendEvent(Un)&&(this.eventParamsAdd("pLineIdent",t[co]),this.eventParamsAdd("pLineTag",t[uo]),this.sendEvent("evMenuEntryClicked")),this.closeCascades(0,null,!0)},Go.prototype.mouseOut=function(t,e,i){i.mCascadeLevel!=this.mCascadeTrackingArray.length&&this.mOpenWhenMouseOver||this.removeHotStyle(e,i),this.mBreadcrumb&&!i.mCascadeLevel&&this.setBreadcrumbHotStyle(e,i,!0);i.mType==Lo&&this.mCloseBoxIconId&&jIcons.setImageUrl(e,this.mCloseBoxIconId);var s=!0,r=t.relatedTarget||t.toElement;if(r&&r.id!==jOverlayId&&r!==this.mCascadeParent&&this.elemInThisNavmenu(r))if(!this.mBreadcrumb||this.elemInThisNavmenu(r,!0))s=!1;else{var n=new Vo(r);n.mType!=jo&&n.mType!=No&&n.mType!=Do&&n.mType!=xo&&n.mType!=Bo&&n.mType!=Ho&&n.mType!=Fo&&n.mType!=Ro&&n.mType!=Mo||(s=!1)}s&&this.closeOnMouseOut&&this.closeCascades(0)},Go.prototype.getMainDiv=function(t,e){var i;if(e.mType==Ao){for(;!t.id&&t.parentNode;)t=t.parentNode;i=t}else if(e.mType==Io){var s=this.childIdBase+"mdiv_"+this.makeIdIndex(Ao,e.mCascadeLevel,e.mRow);i=document.getElementById(s)}return i},Go.prototype.addHotStyle=function(t,e){var i=this.getMainDiv(t,e);i&&("ctrl-nm-entry"==i.className?i.className="ctrl-nm-entry-hot":"ctrl-nm-heading"==i.className&&(i.className="ctrl-nm-heading-hot"))},Go.prototype.removeHotStyle=function(t,e){var i=this.getMainDiv(t,e);i&&("ctrl-nm-entry-hot"==i.className?i.className="ctrl-nm-entry":"ctrl-nm-heading-hot"==i.className&&(i.className="ctrl-nm-heading"))},Go.prototype.mouseClick=function(t,e,i){null!=this.mLoadEventCascadeId||this.elem.disabled||this.mCascadeTrackingArray.length&&this.mCascadeTrackingArray[this.mCascadeTrackingArray.length-1].mouseOverOrClick(e,i,!0)||(this.setFocusNewCascade=!0,this.openCascadeOrGenerateClick(e,i,!0))},Go.prototype.setEventHandlers=function(t){var e=this.mEventFunction;jOmnis.touchDevice||(t.onmouseover=e,t.onmouseout=e),t.onclick=e,t.onkeydown=e,t.onkeyup=e},Go.prototype.closeCascades=function(t,e,i){for(;this.mCascadeTrackingArray.length>t;){var s=this.mCascadeTrackingArray.pop(),r=s.mPageObject.mPageDiv;r&&r.parentNode&&(e?r.parentNode.removeChild(r):this.animateRemove(r));var n=s.mPageObject.parentMainDiv;if(n){"ctrl-nm-entry-hot"==n.className?n.className="ctrl-nm-entry":"ctrl-nm-heading-hot"==n.className&&(n.className="ctrl-nm-heading");var o=n.parentElement;o.setAttribute("aria-expanded","false"),o.removeAttribute("aria-owns")}if(s.mPageObject.parentCascImg){jIcons.setImageUrl(s.mPageObject.parentCascImg,this.mHorizontalCascadeIconId),this.setBreadcrumbHotStyle(s.mPageObject.parentCascImg,new Vo(s.mPageObject.parentCascImg),!0);var a=s.mPageObject.parentCascImg.parentElement;a.setAttribute("aria-expanded","false"),a.removeAttribute("aria-owns")}}e&&!this.mCascadeTrackingArray.length&&this.mCascadeParent&&this.mCascadeParent.parentNode&&document.body.removeChild(this.mCascadeParent),!this.mCascadeTrackingArray.length&&this.documentClick&&(document.removeEventListener("touchstart",this.documentClick,!0),this.documentClick=null),i&&(this.mBreadcrumb&&s&&s.mPageObject.parentCascImg?s.mPageObject.parentCascImg.parentElement.focus():n&&n.parentElement.focus())},Go.prototype.elemInThisNavmenu=function(t,e){for(var i=this.getClientElem();t;){if(t==i&&!e||t==this.mCascadeParent)return!0;t=t.parentNode}return!1},Go.prototype.animateRemove=function(t){this.stopAnimation(t,!1);var e={opacity:.001};this.startAnimation(t,!0),jOmnis.animate(t,e,500)},Go.prototype.startAnimation=function(t,e){this.mAnimations[t.id]&&this.stopAnimation(t,!0),this.mAnimations[t.id]={elem:t,removeWhenComplete:e}},Go.prototype.stopAnimation=function(t,e,i){var s=this.mAnimations[t.id];s&&(t.style[jOmnis.transitionProperty]="none",e&&s.removeWhenComplete&&t.parentNode&&(t.parentNode.removeChild(t),this.mCascadeTrackingArray.length||!this.mCascadeParent||this.mCascadeParent.firstChild||document.body.removeChild(this.mCascadeParent)),i||delete this.mAnimations[t.id])},Go.prototype.transitionEnded=function(t){this.stopAnimation(t,!0)},Go.prototype.stopAllAnimation=function(){this.mOpenAnimationTimer&&(clearTimeout(this.mOpenAnimationTimer),this.mOpenAnimationTimer=null);for(var t=Object.keys(this.mAnimations),e=0;e<t.length;e++)this.stopAnimation(this.mAnimations[t[e]].elem,!0,!0);this.mAnimations={}},Go.prototype.doUpdate=function(){this.mSettingProperties?this.mNeedUpdate=!0:this.updateCtrl()};Go.prototype.checkScrollArrows=function(t,e){e&&(t.style.position="relative",t.style.overflow="hidden",t.style.margin=0);var i=this.getClientElem(),s=this.mMaxScrollOffset;t.firstChild.clientWidth<=i.clientWidth?this.mMaxScrollOffset=0:this.mMaxScrollOffset=t.firstChild.clientWidth-i.clientWidth+(jOmnis.useiScroll?0:this.arrowAreaWidth(!0)+this.arrowAreaWidth(!1));var r=this.mMaxScrollOffset>0;if(this.mMaxScrollOffset<0&&(this.mMaxScrollOffset=0),e||this.mLastClientWidth!=i.clientWidth||s!=this.mMaxScrollOffset)if(this.mLastClientWidth=i.clientWidth,jOmnis.useiScroll){if(this.iscroll&&(this.iscroll.destroy(),this.iscroll=null),r){var n={};n.omnisObject=this,n.preventDefault=!0,n.tap=!0,n.scrollX=!0,n.eventPassthrough="vertical",n.momentum=!0,n.bounce=!1,this.iscroll=this.attachIScroll(t,n),e&&this.mBreadcrumb&&this.iscroll.scrollTo(-this.mMaxScrollOffset,0,0)}}else{if(l(this.mLeftArrowElem),this.mLeftArrowElem=null,r&&(this.mLeftArrowElem=h("ctrl-arrow-left",this.childIdBase+"arrow_"+this.makeIdIndex(zo,0,0)),i.insertBefore(this.mLeftArrowElem,i.firstChild)),l(this.mRightArrowElem),this.mRightArrowElem=null,r&&(this.mRightArrowElem=h("ctrl-arrow-right",this.childIdBase+"arrow_"+this.makeIdIndex(Wo,0,0)),i.appendChild(this.mRightArrowElem)),r){var o=this.arrowAreaWidth(!0);t.style.marginLeft=o+"px",this.mLeftArrowElem.style.left=(this.mBorderEdges&Yn.kNavMenuSideLeft?this.mBorderWidth:0)+"px",t.style.marginRight=this.arrowAreaWidth(!1)+"px",this.mRightArrowElem.style.left=o+t.clientWidth+"px";var a=this.mEventFunction;this.mLeftArrowElem.onmousedown=a,this.mLeftArrowElem.onmouseup=a,this.mRightArrowElem.onmousedown=a,this.mRightArrowElem.onmouseup=a,e&&this.mBreadcrumb&&this.setScrollOffset(t,this.mMaxScrollOffset)}}function l(t){t&&i.removeChild(t)}function h(t,e){var s=document.createElement("IMG");return s.alt="",s.setAttribute("role","presentation"),s.id=e,s.style.width="16px",s.style.height="16px",s.style.top=(i.clientHeight-16)/2+"px",s.style.position="absolute",s.src="images/overlay.png",s.className=t,s}},Go.prototype.arrowMouseDown=function(t,e){this.mScrollAdjust=e?-this.mPixelsPerScroll:this.mPixelsPerScroll,this.mTimeouts=0,this.mMilliSeconds=10,this.scrollTimer()},Go.prototype.arrowMouseUp=function(t,e){this.mTimeout&&(clearTimeout(this.mTimeout),this.mTimeout=null)},Go.prototype.scrollTimer=function(){this.arrowMouseUp();var t=this.mInitialTopDiv;if(t){var e=t.scrollLeft,i=t.scrollLeft+this.mScrollAdjust;this.mScrollAdjust<0?i<0&&(i=0):i>this.mMaxScrollOffset&&(i=this.mMaxScrollOffset),i!=e&&(this.setScrollOffset(t,i),++this.mTimeouts,25==this.mTimeouts?(this.mMilliSeconds=5,this.mScrollAdjust*=2):50==this.mTimeouts?(this.mMilliSeconds=2,this.mScrollAdjust*=2):100==this.mTimeouts&&(this.mMilliSeconds=1,this.mScrollAdjust*=2),this.mTimeout=setTimeout(this.makeFunction("scrollTimer",0),this.mMilliSeconds))}},Go.prototype.setScrollOffset=function(t,e){t.scrollLeft=e;var i="ctrl-arrow-left";this.mLeftArrowElem&&(this.mLeftArrowElem.className=0==e?i+"-dis":i),i="ctrl-arrow-right",this.mRightArrowElem&&(this.mRightArrowElem.className=e>=this.mMaxScrollOffset?i+"-dis":i)},Go.prototype.arrowAreaWidth=function(t){var e=16;return this.mBorderEdges&(t?Yn.kNavMenuSideLeft:Yn.kNavMenuSideRight)&&(e+=this.mBorderWidth),e},Go.prototype.setBreadcrumbHotStyle=function(t,e,i){if(!this.elem.disabled){var s=t;if(e.mType!=Oo&&e.mType!=jo){var r=this.getClientElem(),n=s;for(s=null;n.parentNode&&n.parentNode!=r;)if("TD"==(n=n.parentNode).tagName&&((e=new Vo(n)).mType==Oo||e.mType==jo)){s=n;break}}if(s){var o;if(e.mType==Oo){if(o=s.nextSibling)new Vo(o).mType!=jo&&(o=null)}else s=(o=s).previousSibling;var a=this.getData();if(a&&a.lstData)(a=a.lstData)[e.mRow][ho]&Qn||(i?this.mCascadeTrackingArray.length||(e.mType==jo&&(o.className="ctrl-nm-bc"),s.className="ctrl-nm-bc"):e.mType==jo?(o.className="ctrl-nm-hot-bc",s.className="ctrl-nm-hotgray-bc"):s.className="ctrl-nm-hot-bc")}}},Go.prototype.getBreadcrumbTrHeight=function(){var t=0;return this.mBorderEdges&Yn.kNavMenuSideBottom&&(t=this.mBorderWidth),this.mBorderEdges&Yn.kNavMenuSideTop&&(t+=this.mBorderWidth),this.getClientElem().clientHeight-t},Go.prototype.onDocumentClick=function(t){for(var e=this.getClientElem(),i=t.target;i;){if(i==e||i==this.mCascadeParent)return!0;i=i.parentNode}return this.closeCascades(0),jOmnis.handleEventPreventDefault(t,!0)},Go.prototype.keyDown=function(t,e,i){function s(t,e){if(e.mCascadeLevel)var i=t.mCascadeTrackingArray[e.mCascadeLevel-1].mPageObject.mPageDiv;else i=t.clientElem.firstChild,jIcons.isIcon(i.tagName)&&(i=i.nextSibling);return i}var r=OmnisKeyboardHandler.getNormalizedEventKey(t);switch(r){case"Enter":this.setFocusNewCascade=!0,this.openCascadeOrGenerateClick(e,i,!1,!0);break;case"Escape":i.mCascadeLevel>0?this.closeCascades(i.mCascadeLevel-1,null,!0):this.sendNextCancel();break;case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":var n=s(this,i),o="ArrowLeft"===r||"ArrowRight"===r;if("horizontal"===n.getAttribute("aria-orientation")===o){var a=function(t,e){var i=Array.prototype.indexOf.call(e,document.activeElement);if(-1===i)return null;t?i--:i++;var s=e.length-1;return e[i=i<0?s:i>s?0:i]}("ArrowLeft"===r||"ArrowUp"===r,n.querySelectorAll("[role='menuitem']")),l=document.activeElement;a.focus(),i.mCascadeLevel||(l.tabIndex=-1,a.tabIndex=0)}break;case"Home":case"End":l=document.activeElement;var h=s(this,i).querySelectorAll("[role='menuitem']"),c=h["Home"===r?0:h.length-1];c.focus(),i.mCascadeLevel||(l.tabIndex=-1,c.tabIndex=0);break;case"Tab":this.closeCascades(0,!1,!0)}};var Yo=Go,Xo=i(1458),Jo=i(6328),Qo=i(5871);function Zo(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function ta(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Zo(Object(i),!0).forEach((function(e){ea(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Zo(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function ea(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var ia={pagecount:-866,currentpage:-865,scrolltochangepage:-1235,animatetransitions:-1334,landmark:-1360},sa=250,ra=!1;function na(){this.init_class_inst()}na.prototype=new ctrl_base,na.prototype.DefaultColors=ta(ta({},ctrl_base.prototype.DefaultColors),{},ea({},a.Mr.BACKGROUND,o.l1[o._l.surface])),na.prototype.ANIMATION_TIME=500,na.landmarkRoles=["none","main","navigation","banner","contentinfo","complementary","form","search"],na.prototype.init_class_inst=function(){this.superclass=ctrl_base.prototype,this.superclass.init_class_inst.call(this),this.pageCount=0,this.currentPage=0,this.allPanes=[],this.mFocusStyle=eBaseFocusStyle.eNone,this.mCanHaveDesignBorder=0!=jOmnis.mDesign},na.prototype.baseClassName="omnis-pagedpane",na.prototype.init_ctrl_inst=function(t,e,i,s){this.mCannotDrop=!0,this.superclass.init_ctrl_inst.call(this,t,e,i,s);var r=this.getClientElem();if(this.removeFromTabOrder(),this.scrollToChangePage="1"==r.getAttribute("data-scrolltochangepage"),this.animateTransitions=!jOmnis.mDesign&&"1"==r.getAttribute("data-animatetransition"),this.multiplePages=!jOmnis.mDesign&&(this.scrollToChangePage||this.animateTransitions),this.autoScroll="1"==r.getAttribute("data-autoscroll"),this.pageCount=Number(r.getAttribute("data-pagecount")),this.currentPage=Number(r.getAttribute("data-currentpage")),this.rowCtrl&&this.setPropCli(ia.currentpage,this.currentPage,this.rowNumber),this.allPanes=jOmnis.getAttributeList(r,"data-allpanes"),this.currentPage||(this.currentPage=1),this.currentPage=this.calcCurrentPage(this.currentPage),this.usesTouchScroll=this.isScrollable()||this.scrollToChangePage,this.mMakeOldInvisible=!0,this.createPages(0),this.form.installChildren(this,r,i,s,!0,this.rowUnique),this.prevCurrentPage=0,this.update(),this.mInitDone=!0,this.scrollToChangePage){this.pageObjectsMadeVisible=!1,this.setupPagesForScrolling(!1);var n,o=this;jOmnis.addSwipeListener(this.clientElem,(function(t){if(n=(o.currentPage-1)*o.clientElem.clientWidth,o.elem.disabled)return!1;for(var e=t.target;e;){if(e==r)return o.setupPagesForScrolling(!0),!0;if(e.omnisObject&&e.omnisObject.isActive()&&e.omnisObject.usesTouchScroll)return!1;e=e.parentNode}return!1}),(function(t,e){return o.scrollToOffset(n+t,e,!1),!1}),(function(t){var e=o.currentPage+(t.offset<0?1:-1);if(t.cancelled||Math.abs(t.offset)<100||e<1||e>o.pageCount)o.scrollToOffset(n,sa,!0);else{o.setCurrentPage(e),o.sendUserChangedPageEvent();var i=(o.currentPage-1)*o.clientElem.clientWidth;o.scrollToOffset(i,sa,!0)}}),sa)}return this.elem.onkeydown=this.mEventFunction,r.onscroll=this.elem.onkeydown,this.landmark=+r.getAttribute("data-landmark"),this.landmark>0&&r.setAttribute("role",na.landmarkRoles[this.landmark]),jOmnis.mDesign&&this.form.isSubform&&this.showDisabledDesignScrollbars(this.pageParentDiv),!1},na.prototype.installChild=function(t){this.mChildren.push(t);var e=Number(t.elem.getAttribute("data-objlink"))>>>16;0!=e&&this.addComponent(e,t),t.needsAddingToPage=!0},na.prototype.removeChild=function(t,e){var i=this.mChildren.indexOf(t);if(-1!=i){if(this.mChildren.splice(i,1),t.objNumber>0){var s=this.form.mTabOrder.indexOf(t);-1!=s&&this.form.mTabOrder.splice(s,1)}e&&this.update()}},na.prototype.addComponent=function(t,e){this.mCompsFloats||(this.mCompsFloats={});for(var i=e.form.mPositionInfo.getLayoutNames(),s=0;s<i.length;s++){var r=i[s],n=e.getEdgeFloat(r);n>=WND_WC_MENUBAR&&(this.mCompsFloats[r]||(this.mCompsFloats[r]=[]),this.mCompsFloats[r][t]||(this.mCompsFloats[r][t]={}),this.mCompsFloats[r][t][n]=e)}},na.prototype.removeComponent=function(t,e){var i=Number(t.elem.getAttribute("data-objlink"))>>>16,s=this.mCompsFloats[this.form.curScreenSize];if(s&&s[i][e]==t){delete s[i][e];var r=0;for(var n in s[i])++r;0==r&&(s[i]=null)}},na.prototype.newComponent=function(t){var e=Number(t.elem.getAttribute("data-objlink"))>>>16;this.addComponent(e,t)},na.prototype.handleEvent=function(t){switch(t.type){case jOmnis.transitionEndEvent:return void(this.mTranslateAnimationFinished&&this.setupPagesForScrolling(!1));case"scroll":if(!this.animatingStackChange){jOmnis.stopEventNow(t);var e=this.getClientElem();return e.scrollLeft=0,void(e.scrollTop=0)}break;case"keydown":var i=t.keyCode;if(i&&(34==i||33==i)){var s=(e=this.getClientElem()).scrollLeft;setTimeout((function(){s!=e.scrollLeft&&(e.scrollLeft=s)}),0)}default:return this.superclass.handleEvent.call(this,t)}},na.prototype.getProperty=function(t){switch(t){case ia.currentpage:return this.currentPage;case ia.pagecount:return this.pageCount;case ia.scrolltochangepage:return this.scrollToChangePage;case eBaseProperties.autoscroll:return this.autoScroll;case ia.animatetransitions:return this.animateTransitions;case eBaseProperties.horzscroll:case eBaseProperties.vertscroll:return!1;case ia.landmark:return this.landmark}return this.superclass.getProperty.call(this,t)},na.prototype.getCanAssign=function(t){switch(t){case ia.currentpage:case ia.landmark:return!0;case ia.animatetransitions:case ia.scrolltochangepage:return!1;case ia.pagecount:return 0!=jOmnis.mDesign}return this.superclass.getCanAssign.call(this,t)},na.prototype.setProperty=function(t,e){switch(t){case ia.currentpage:return this.setCurrentPage(1*e);case ia.pagecount:return this.setPageCount(+e);case eBaseProperties.horzscroll:case eBaseProperties.vertscroll:return!1;case eBaseProperties.autoscroll:return this.autoScroll=1*e!=0,this.setPageOverflow(this.autoScroll?"auto":"hidden"),this.usesTouchScroll=this.isScrollable()||this.scrollToChangePage,!0;case eBaseProperties.borderradius:var i=this.superclass.setProperty.call(this,t,e);return this.sizeChanged(),i;case ia.landmark:if(+e>=0&&+e<na.landmarkRoles.length){this.landmark=+e;var s=this.fieldset?this.elem:this.clientElem;this.landmark>0?s.setAttribute("role",na.landmarkRoles[this.landmark]):0===this.landmark&&s.removeAttribute("role")}return!0;case eBaseProperties.arialabelledby:return this.fieldset&&(this.mAriaLabelledby=e+"",!this.mAriaLabelledby)?(this.elem.setAttribute("aria-labelledby",this.fieldset.querySelector("legend").id),!0):this.superclass.setProperty.call(this,t,e)}return this.superclass.setProperty.call(this,t,e)},na.prototype.setCurrentPage=function(t,e){return(t=this.calcCurrentPage(t))>=1&&t<=this.pageCount&&(this.currentPage!=t&&(e=jOmnis.defaultParameter(e,!0),this.prevCurrentPage=this.currentPage,this.currentPage=t,this.rowCtrl&&this.setPropCli(ia.currentpage,t,this.rowNumber),this.mMakeOldInvisible=e,this.updateCtrl(),this.mMakeOldInvisible=!0,this.mPageControl&&this.mPageControl.currentPageChanged(),this.mTabsControl&&this.mTabsControl.setCurrentTab(this.currentPage,!0,!0)),!0)},na.prototype.setPageCount=function(t){if(jOmnis.mDesign&&t!=this.pageCount&&!(t<1)){var e=this.pageCount;if(e<t)this.pageCount=t,this.createPages(e);else{for(var i=t;i<this.pageCount;++i)this.pages[i].parentNode.removeChild(this.pages[i]);this.pages.splice(t,this.pageCount-t),this.pageCount=t}this.updateCtrl()}},na.prototype.calcCurrentPage=function(t){if(this.dataName&&this.dataName.length&&!jOmnis.mDesign){var e=1*this.getData();if(e>=1&&e<=this.pageCount)return e}return t},na.prototype.setVisiblePages=function(t){Array.isArray(t)||(t=[t]);for(var e=[],i=0;i<this.pages.length;i++){var s=t.indexOf(i+1)>-1;e[i]={visible:s,changed:this.pages[i].style.display!=(s?"inline":"none")}}var r=[],n=[];if(this.mChildren)for(i=0;i<this.mChildren.length;i++){var o=this.mChildren[i],a=o.elem,l=this.getChildsPane(o);if(!(l>this.pageCount)){var h=0==l||t.indexOf(l)>-1;(0==l||e[l-1].changed||o.needsAddingToPage)&&(h?(0==l&&a.parentNode!=this.pages[this.currentPage-1]&&(a.parentNode&&(o.saveBeforeMadeInvisible(),a.parentNode.removeChild(a)),l=this.currentPage),l>0&&(this.addChildToPage(this.pages[l-1],o,a),r.push(o)),o.needsAddingToPage=!1):this.mMakeOldInvisible&&a.parentNode&&o.parentCtrl==this&&(o.saveBeforeMadeInvisible(),a.parentNode.removeChild(a),n.push(o)))}}for(i=0;i<e.length;i++)this.pages[i].style.display=e[i].visible?"inline":"none";for(i=0;i<r.length;i++)r[i].restoreAfterMadeVisible(),r[i].parentVisible=!0,r[i].visibilityChanged();for(i=0;i<n.length;i++)n[i].parentVisible=!1,n[i].visibilityChanged()},na.prototype.getCurrentPageScrollValues=function(){var t=document.getElementById(this.childIdBase+"page"+(this.currentPage-1));return t?{height:parseFloat(t.style.height),width:parseFloat(t.style.width),fullHeight:t.scrollHeight,fullWidth:t.scrollWidth,scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:null},na.prototype.getCurrentPage=function(){return this.currentPage},na.prototype.getChildsPane=function(t){return this.allPanes.indexOf(t.objIdent)>=0?0:Number(t.elem.getAttribute("data-objlink"))>>>16},na.prototype.updateCtrl=function(){var t=this.calcCurrentPage(this.currentPage);if(t!=this.currentPage)return this.setCurrentPage(t),!0;if(this.mChildren){var e=this.pages[this.currentPage-1];if(this.setVisiblePages(this.currentPage),!this.mMakeOldInvisible||this.multiplePages){if(e.style.visibility="visible",this.multiplePages){this.setupPagesForScrolling(!0),this.scrollToOffset((this.currentPage-1)*this.getClientElem().clientWidth,this.animateTransitions?this.ANIMATION_TIME:0,null),this.visibilityChanged();var i=this;setTimeout((function(){i.setupPagesForScrolling(!1)}),this.animateTransitions?this.ANIMATION_TIME:0)}}else this.mVisibilityChangedAlways=!0,this.visibilityChanged(),this.mVisibilityChangedAlways=!1;if(this.prevCurrentPage>0&&this.prevCurrentPage<=this.pageCount){if(this.mMakeOldInvisible&&!this.multiplePages){for(var s=this.pages[this.prevCurrentPage-1],r=0;r<s.children.length;++r){s.children[r].omnisObject.saveBeforeMadeInvisible()}s.style.visibility="hidden"}this.prevCurrentPage=0}var n=this.getPageComponents(this.currentPage);n&&this.form.pushLayout({ctrl:this,comps:n,elem:this.pages[this.currentPage-1],page:this.currentPage})}},na.prototype.getPageComponents=function(t){var e=this.mCompsFloats;return e&&e[this.form.curScreenSize]?e[this.form.curScreenSize][t]:null},na.prototype.getChildVisibility=function(t,e){var i=!1;if(this.allPanes.indexOf(t.objIdent)>=0)i=!0;else{var s=Number(t.elem.getAttribute("data-objlink"))>>>16;(i=this.multiplePages?t.elem.parentNode&&t.parentCtrl==this&&"inline"==t.elem.parentNode.style.display:0==s||s==this.currentPage&&this.pages[s-1].childNodes.length>0)&&!e&&(i=jOmnis.getObjectVisible(t.elem))}return i},na.prototype.getTrueVisibility=function(t){var e=this.superclass.getTrueVisibility.call(this,t);return e&&t&&(e=this.getChildVisibility(t)),e},na.prototype.visibilityChanged=function(){if(this.mResizeOnceVisible&&this.getTrueVisibility()&&(this.mResizeOnceVisible=!1,this.sizeChanged()),!this.pages)return!1;var t=this.superclass.visibilityChanged.call(this),e=this.pages[this.currentPage-1],i="hidden"!=e.style.visibility,s=this.getTrueVisibility(null);if(t||i!=s||this.mVisibilityChangedAlways){e.style.visibility=s?"visible":"hidden",s&&!this.pageMadeVisible[this.currentPage-1]&&this.mInitDone&&this.setScreenSize(this.form.curScreenSize,this.form.floatX,this.form.floatY),s&&(this.pageMadeVisible[this.currentPage-1]=!0);var r=this.mChildren;if(r)for(var n=0;n<r.length;n++)r[n].parentVisible=s&&this.getChildVisibility(r[n],!0),r[n].visibilityChanged();return!0}return!1},na.prototype.childVisibilityChanged=function(t,e){this.mInitDone&&this.checkLayout(t)},na.prototype.checkLayout=function(t){if(null!=t){if(t.getEdgeFloat(this.form.curScreenSize)>=WND_WC_MENUBAR){var e=Number(t.elem.getAttribute("data-objlink"))>>>16;e==this.currentPage&&(i=this.getPageComponents(e))&&this.form.pushLayout({ctrl:this,comps:i,elem:this.pages[e-1],page:e})}}else{var i=this.getPageComponents(this.currentPage);i&&this.form.pushLayout({ctrl:this,comps:i,elem:this.pages[this.currentPage-1],page:this.currentPage})}},na.prototype.addChildToPage=function(t,e,i){for(var s=!1,r=0;r<t.children.length;++r){var n=t.children[r],o=n.omnisObject;if(e.uniqueID<o.uniqueID){t.insertBefore(i,n),e.setScreenSize(this.form.curScreenSize,0,0,!1),s=!0;break}}s||t.appendChild(i)},na.prototype.onLayoutTransitionFinished=function(){this.getPageComponents(this.currentPage)&&(this.sizeChanged(),this.form.inst.doLayoutComponents()),this.superclass.onLayoutTransitionFinished.call(this)},na.prototype.setScreenSize=function(t,e,i,s,r){var n=this.superclass.setScreenSize.call(this,t,s?0:e,s?0:i,s,r);s||jOmnis.canFloatHorz(n,this.mInLayout)||(e=0),s||jOmnis.canFloatVert(n,this.mInLayout)||(i=0);var o=this.mChildren;if(o){if(this.multiplePages)for(var a=1;a<=this.pageCount;++a)this.pages[a-1].style.display="inline";for(this.autoScroll&&this.setPageOverflow("hidden"),a=0;a<o.length;a++){o[a].setScreenSize(t,e,i,!1,r)}this.autoScroll&&this.setPageOverflow("auto"),this.multiplePages&&this.setupPagesForScrolling(!1)}return n},na.prototype.setPageOverflow=function(t){for(var e=1;e<=this.pageCount;++e)this.pages[e-1].style.overflow=t},na.prototype.sizeChanged=function(){if(this.superclass.sizeChanged.call(this),this.getTrueVisibility()){for(var t=this.getClientElem(),e=this.getPixels(getComputedStyle(t).borderLeftWidth),i=this.getPixels(t.style.width)-2*e,s=this.getPixels(t.style.height)-2*e,r=0;r<this.pageCount;++r){var n=this.pages[r].style;jOmnis.mDesign||(n.width=i+"px",n.height=s+"px"),this.multiplePages&&(n.left=r*i+"px"),n.marginLeft="0px",n.marginRight="0px"}this.pageParentDiv.style.width=i*(jOmnis.mDesign?1:this.pageCount)+"px",this.pageParentDiv.style.height=s+"px",this.mNavbar?this.mNavbar.pagedPaneSizeChanged():this.multiplePages&&this.scrollToOffset((this.currentPage-1)*i,0,null),this.mTabsControl&&this.mTabsControl.updatePagedPane(!1),this.checkLayout()}else this.mResizeOnceVisible=!0},na.prototype.setupPagesForScrolling=function(t){if(!this.makingPageObjectsVisible){var e=this.currentPage;if(!this.pageObjectsMadeVisible){this.pageObjectsMadeVisible=!0,this.makingPageObjectsVisible=!0;for(var i=1;i<=this.pageCount;++i){this.currentPage=i;var s=this.pages[i-1].style.visibility,r=this.pages[i-1].style.display;this.pages[i-1].style.visibility="visible",this.pages[i-1].style.display="inline",this.update(),this.pages[i-1].style.visibility=s,this.pages[i-1].style.display="inline"==r?"inline":"none"}this.currentPage=e,this.update(),this.makingPageObjectsVisible=!1}this.setVisiblePages(t?[e-1,e,e+1]:e)}},na.prototype.scrollToOffset=function(t,e,i){jOmnis.startTranslateAnimation(this.pageParentDiv,-t,0,e,i?this:null)},na.prototype.$makegroupbox=function(t,e,i,s){if(this.fieldset){var r=this.fieldset.firstChild;return e&&(r.style.fontFamily=e),i&&(r.style.fontSize=i),s&&(r.style.color=s),r.innerHTML=t,!0}var n=this.getClientElem(),o=document.createElement("fieldset");for(o.style.padding="0",o.style.margin="0",o.style.backgroundColor=n.style.backgroundColor,jOmnis.setOmnisWidth(o,jOmnis.getOmnisWidth(n)),jOmnis.setOmnisHeight(o,jOmnis.getOmnisHeight(n)),(r=document.createElement("legend")).id=this.childIdBase+"legend",r.style.marginLeft="10px",e&&(r.style.fontFamily=e),i&&(r.style.fontSize=i),s&&(r.style.color=s),r.innerHTML=t,o.appendChild(r),n.parentNode.insertBefore(o,n),n.parentNode.removeChild(n);n.children.length>0;){var a=n.children[0];n.removeChild(a),o.appendChild(a)}return o.id=n.id,o.setAttribute("data-currentpage",n.getAttribute("data-currentpage")),o.setAttribute("data-pagecount",n.getAttribute("data-pagecount")),o.setAttribute("data-scrolltochangepage",n.getAttribute("data-scrolltochangepage")),o.setAttribute("data-animatetransition",n.getAttribute("data-animatetransition")),o.setAttribute("data-autoscroll",n.getAttribute("data-autoscroll")),o.setAttribute("data-allpanes",n.getAttribute("data-allpanes")),o.tabIndex=n.tabIndex,this.landmark>0&&this.elem.setAttribute("role",na.landmarkRoles[this.landmark]),this.setAriaElement(this.elem),this.mAriaLabelledby||this.elem.setAttribute("aria-labelledby",r.id),this.clientElem=o,this.fieldset=o,!0},na.prototype.createPages=function(t){var e=this.getClientElem();t||this.makeChildIdBase(e);var i=e.clientWidth,s=i+"px",r=e.clientHeight+"px";t||(this.pageParentDiv=document.createElement("div")),this.pageParentDiv.style.position="absolute",this.pageParentDiv.style.width=jOmnis.mDesign?s:i*this.pageCount+"px",this.pageParentDiv.style.height=r,this.pageParentDiv.style.left="0",this.pageParentDiv.style.top="0",e.style.overflow="hidden",t||(this.pages=[],this.pageMadeVisible=[]);for(var n=t;n<this.pageCount;++n){var o=document.createElement("div");o.id=this.childIdBase+"page"+n,o.className="omnis-pagedpane-page",o.style.visibility=this.multiplePages||this.currentPage==n+1?"visible":"hidden",o.style.position="absolute",o.style.width=s,o.style.height=r,o.style.left=this.multiplePages?n*i+"px":0,o.style.top=0,o.style.backgroundColor="transparent",o.style.overflow=this.autoScroll?"auto":"hidden",this.pageParentDiv.appendChild(o),this.pages[n]=o,this.pageMadeVisible[n]=!1}t||e.appendChild(this.pageParentDiv)},na.prototype.registerNavbar=function(t){return this.mPageControl?(this.reportError(),!1):(this.mNavbar=t,!0)},na.prototype.registerTabs=function(t){this.mTabsControl=t},na.prototype.makeTabPanel=function(){for(var t=0;t<this.pageCount;t++){var e=this.pages[t];e.setAttribute("role","tabpanel");var i=this.mTabsControl.mTabs[t];i&&i.mLiElement&&e.setAttribute("aria-labelledby",i.mLiElement.id)}},na.prototype.removeTabPanel=function(){for(var t=0;t<this.pageCount;t++){var e=this.pages[t];e.removeAttribute("role"),e.removeAttribute("aria-labelledby")}},na.prototype.sendUserChangedPageEvent=function(){this.canSendEvent(eBaseEvent.evUserChangedPage)&&(this.eventParamsAdd("pPageNumber",this.currentPage),this.sendEvent(eBaseEvent.evUserChangedPage))},na.prototype.registerPageControl=function(t){return this.mNavbar?(this.reportError(),!1):(this.mPageControl=t,!0)},na.prototype.reportError=function(){ra||(jOmnis.mDesign||alert("Cannot link both a page control and a navigation bar to the same paged pane"),ra=!0)},na.prototype.$objs=function(){return this.mObjs||(this.mObjs=new omnis_objs(this)),this.mObjs},na.prototype.resolveBuiltInPropertyName=function(t){var e=ia[t];return e||this.superclass.resolveBuiltInPropertyName.call(this,t)},na.prototype.removeDragBorderObjects=function(t,e){if(!this.form.inst.mInDragBorder&&this.mDragBorderObjectsArray){var i=this.mDragBorderObjectsArray[t.page-1];i&&i.removeObjects(e)}},na.prototype.addDragBorderObject=function(t,e,i){if(!this.form.inst.mInDragBorder){this.mDragBorderObjectsArray||(this.mDragBorderObjectsArray=[]);var s=this.mDragBorderObjectsArray[t.page-1];s||(s=new omnisDragBorderObjects,this.mDragBorderObjectsArray[t.page-1]=s),s.addObject(e,i)}},na.prototype.isScrollable=function(){return this.autoScroll},na.prototype.setChildCtrlParent=function(t,e,i){if(t.parentCtrl!=this){t.parentCtrl?t.parentCtrl.removeChildCtrl(t):t.form.removeChildCtrl(t);var s=this.pages[this.currentPage-1],r=-1;e&&(r=this.mChildren.indexOf(e)),-1==r?s.appendChild(t.elem):e.elem.after(t.elem),t.objLink=this.currentPage<<16|this.objNumber,t.elem.setAttribute("data-objlink",t.objLink),t.parentCtrl=this,this.installChild(t)}},na.prototype.removeChildCtrl=function(t){this.removeChild(t),t.elem.parentNode&&t.elem.parentNode.removeChild(t.elem);var e=t.getEdgeFloat(this.form.curScreenSize);e>=WND_WC_MENUBAR&&this.removeComponent(t,e),t.elem.removeAttribute("data-objlink"),t.objLink=0},na.prototype.addParentElements=function(t){for(var e=0;e<this.pageCount;++e)t.push(this.pages[e])},na.prototype.newAllPanesList=function(t,e,i){for(var s=0;s<t.length;++s){var r=t[s];if(-1==i.indexOf(r)){var n=this.form.findChildByIdentAndInhLevel(r,0);n&&n.elem.setAttribute("data-objlink",e[s]<<16|this.objNumber)}}this.allPanes=i,this.updateCtrl()},na.prototype.focus=function(){this.form.focusInContainer(this)},na.prototype.resetAppearance=function(){var t;null===(t=this.mChildren)||void 0===t||t.forEach((function(t){t.resetAppearance()}))};var oa="$linkedobject",aa="$::currentpage",la="$::pagecount",ha="$pageindicatorcolor",ca="$currentpageindicatorcolor",ua={evPageChanged:100},da="omnis-pagectl-focused";function pa(){this.init_class_inst()}pa.prototype=new ctrl_base,pa.prototype.init_class_inst=function(){this.superclass=ctrl_base.prototype,this.superclass.init_class_inst.call(this),this.mCustomEvents=ua,this.mFocusStyle=eBaseFocusStyle.eNone,this.baseClassName="omnis-pagectl",this.activeReplacesEnabled=!0},pa.prototype.init_ctrl_inst=function(t,e,i,s){this.superclass.init_ctrl_inst.call(this,t,e,i,s);var r=this.getClientElem();return this.makeChildIdBase(r),r.style.outline="none",r.style.overflow="hidden",jOmnis.mobileDevice&&r.style.webkitTapHighlightColor&&(r.style.webkitTapHighlightColor="transparent"),r.setAttribute("role","tablist"),r.onclick=this.mEventFunction,this.mPagedPaneName=r.getAttribute("data-lo"),this.mPageCount=parseInt(r.getAttribute("data-pc")),this.mCurrentPage=parseInt(r.getAttribute("data-cp")),this.mPageIndicatorColor=parseInt(r.getAttribute("data-pic")),this.mCurrentPageIndicatorColor=parseInt(r.getAttribute("data-cpic")),r.onkeydown=this.mEventFunction,r.addEventListener("focusin",this.mEventFunction),r.addEventListener("focusout",this.mEventFunction),r.onmousedown=this.mEventFunction,t.registerForFormBuilt(this),this.activeChanged(),!1},pa.prototype.delete_class_inst=function(){this.superclass.delete_class_inst.call(this)},pa.prototype.handleEvent=function(t){switch(t.type){case"click":if(this.elem.disabled)return;var e=0,i=t.target;if(i==this.clientElem){var s=t.offsetX;null==s&&(s=t.layerX),s<this.mPageIndicatorLefts[this.mCurrentPage-1]?e=this.mCurrentPage-1:s>this.mPageIndicatorLefts[this.mCurrentPage-1]+8&&(e=this.mCurrentPage+1)}else for(var r=0;r<this.mPageCount;++r)if(i==this.mPageIndicatorDivs[r]){var n=r+1;if(n==this.mCurrentPage)return;e=n<this.mCurrentPage?this.mCurrentPage-1:this.mCurrentPage+1;break}return void(e>=1&&e<=this.mPageCount&&(this.updatePageNumber(e),document.getElementById(this.clientElem.id+"_page_"+e).focus()));case"keydown":if(this.elem.disabled)return;switch(e=0,OmnisKeyboardHandler.getNormalizedEventKey(t)){case"ArrowRight":e=this.mCurrentPage<this.mPageCount?this.mCurrentPage+1:1;break;case"ArrowLeft":e=this.mCurrentPage>1?this.mCurrentPage-1:this.mPageCount;break;case"End":this.mCurrentPage<this.mPageCount&&(e=this.mPageCount);break;case"Home":this.mCurrentPage>1&&(e=1)}if(e){this.updatePageNumber(e);var o=document.getElementById(this.clientElem.id+"_page_"+e);o.focus(),o.classList.add(da)}break;case"focusin":this.preventFocus||t.target.classList.add(da);break;case"focusout":t.target.classList.remove(da);break;case"mousedown":var a=this;this.preventFocus=!0,jOmnis.setSingleTimeout(this,"focusTimer",(function(){a.preventFocus=!1}),200);break;default:return this.superclass.handleEvent.call(this,t)}},pa.prototype.getProperty=function(t){switch(t){case aa:return this.mCurrentPage;case ha:return this.mPageIndicatorColor;case ca:return this.mCurrentPageIndicatorColor;case la:return this.mPageCount;case oa:return this.mPagedPaneName}return this.superclass.getProperty.call(this,t)},pa.prototype.getCanAssign=function(t){switch(t){case ha:case ca:return!0;case aa:case la:return!this.mPagedPaneCtrl;case oa:return!1}return this.superclass.getCanAssign.call(this,t)},pa.prototype.setProperty=function(t,e){switch(t){case aa:if(this.mPagedPaneCtrl)return!0;var i=1*e;return i>=1&&i<=this.mPageCount&&i!=this.mCurrentPage&&(this.mCurrentPage=i,this.update()),!0;case la:if(this.mPagedPaneCtrl)return!0;var s=1*e;return s>=1&&s<=32&&s!=this.mPageCount&&(this.mPageCount=s,this.mCurrentPage>s&&(this.mCurrentPage=s),this.update()),!0;case ha:return this.mPageIndicatorColor=1*e,this.update(),!0;case ca:return this.mCurrentPageIndicatorColor=1*e,this.update(),!0;case oa:return jOmnis.mDesign||alert("$linkedobject cannot be set at runtime"),!0}return this.superclass.setProperty.call(this,t,e)},pa.prototype.sizeChanged=function(){this.superclass.sizeChanged.call(this),this.update()},pa.prototype.formBuilt=function(){this.rowCtrl?this.mPagedPaneCtrl=this.rowCtrl.getNamedControlFromRow(this.mPagedPaneName,this.rowNumber):this.mPagedPaneCtrl=this.form.findChildByName(this.mPagedPaneName),this.mPagedPaneCtrl&&this.mPagedPaneCtrl.registerPageControl(this)?(this.mPageCount=this.mPagedPaneCtrl.pageCount,this.mCurrentPage=this.mPagedPaneCtrl.currentPage):this.mPagedPaneCtrl=null,this.update(),this.superclass.formBuilt.call(this)},pa.prototype.updateCtrl=function(){var t=this.getClientElem(),e=null;if(this.mPageIndicatorDivs)for(var i=0;i<this.mPageIndicatorDivs.length;++i)document.activeElement===this.mPageIndicatorDivs[i]&&(e=i),t.removeChild(this.mPageIndicatorDivs[i]);var s=this.getTheme(),r=s.getColorString(this.mCurrentPageIndicatorColor,o.l1.primary),n=-1==this.mPageIndicatorColor?"#999":s.getColorString(this.mPageIndicatorColor),a=(t.clientHeight-8)/2,l=8*this.mPageCount+12*(this.mPageCount-1),h=(t.clientWidth-l)/2;for(this.mPageIndicatorLefts=[],this.mPageIndicatorDivs=[],i=0;i<this.mPageCount;++i){var c=document.createElement("div"),u=i+1===this.mCurrentPage;c.style.position="absolute",c.style.width="0",c.style.height="0",c.style.left=h+"px",c.style.top=a+"px",c.style.borderStyle="solid",c.style.borderRadius="4px",c.style.borderColor=u?r:n,c.style.borderWidth="4px",c.id=t.id+"_page_"+(i+1),c.tabIndex=u&&!this.elem.disabled?0:-1,u?function(t){setTimeout((function(){t.setAttribute("aria-selected","true")}),0)}(c):c.setAttribute("aria-selected","false"),c.setAttribute("role","tab"),t.appendChild(c),this.mPageIndicatorDivs.push(c),this.mPageIndicatorLefts.push(h),h+=20}null!==e&&this.mPageIndicatorDivs[e]&&this.mPageIndicatorDivs[e].focus()},pa.prototype.visibilityChanged=function(){var t=this.superclass.visibilityChanged.call(this);return this.getTrueVisibility()&&this.update(),t},pa.prototype.setTabIndex=function(){var t=this.clientElem.children[this.mCurrentPage-1];t&&(t.tabIndex=this.elem.disabled?-1:0)},pa.prototype.currentPageChanged=function(){this.mPagedPaneCtrl.mCurrentPage!=this.mCurrentPage&&(this.mCurrentPage=this.mPagedPaneCtrl.currentPage,this.update())},pa.prototype.updatePageNumber=function(t){if(this.mPagedPaneCtrl){if(this.mPagedPaneCtrl.setupPagesForScrolling(!0),this.mPagedPaneCtrl.setCurrentPage(t),this.form.inst.doLayoutComponents(),this.mPagedPaneCtrl.scrollToChangePage){var e=(this.mCurrentPage-1)*this.mPagedPaneCtrl.clientElem.clientWidth;this.mPagedPaneCtrl.scrollToOffset(e,sa,!0)}this.mPagedPaneCtrl.sendUserChangedPageEvent()}else this.mCurrentPage=t,this.update(),this.canSendEvent(ua.evPageChanged)&&(this.eventParamsAdd("pValue",this.mCurrentPage),this.sendEvent("evPageChanged"))};var ma=pa,fa={keepaspectratio:-987,picturealign:-986,noscale:-462,tile:-1014,mediatype:"$mediatype",keepaspectratiomode:"$keepaspectratiomode",alttext:"$alttext"},ga=0,va=1,ba=2,ya=0,Ca=16,_a=32,Ea=0,wa=2;function ka(){this.init_class_inst()}ka.prototype=new ctrl_base,ka.prototype.devicePixelRatio=window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI||1,ka.prototype.mAcceptsReturn=!0,ka.prototype.defaultAriaElem=!1,ka.prototype.init_class_inst=function(){this.superclass=ctrl_base.prototype,this.superclass.init_class_inst.call(this),this.keepAspectRatio=!1,this.pictureAlign=ga+ya,this.noscale=!0,this.karMode=Ea,this.activeReplacesEnabled=!0,this.mCanHaveDesignBorder=0!=jOmnis.mDesign,this.showDesignName=!0,this.mFocusStyle=eBaseFocusStyle.eWithin},ka.prototype.baseClassName="omnis-picture",ka.prototype.init_ctrl_inst=function(t,e,i,s){this.superclass.init_ctrl_inst.call(this,t,e,i,s);var r=this.getClientElem();r.style.visibility="hidden",this.keepAspectRatio="1"==r.getAttribute("data-keepaspectratio"),this.pictureAlign=1*r.getAttribute("data-picturealign"),this.noscale="1"==r.getAttribute("data-noscale"),this.iconpath=this.setupIcon(r.getAttribute("data-icon")),this.tile="1"==r.getAttribute("data-tile"),this.dataMediaType=r.getAttribute("data-mediatype");var n=r.getAttribute("data-km");this.karMode=n?1*n:Ea,this.activeChanged(),this.usesTouchScroll=this.isScrollable(),this.imageWidth=0,this.imageHeight=0,this.form.inst.registerPropertyObject(this),this.elem.onkeydown=this.mEventFunction,this.elem.onkeyup=this.mEventFunction;var o=r.getAttribute("data-alttext");return this.altText=o||"",!1},ka.prototype.updateCtrl=function(){var t,e=this.getClientElem(),i=this.getURL();if(this.imageHeight=this.imageWidth=0,this.tile){var s=jIcons.getIconSize(i,!0);t="<div style=\"width:100%;height:100%;background-image:url('".concat(i,"'); background-repeat:repeat;").concat(s,"; visibility: ").concat(this.getTrueVisibility()?"visible":"hidden",'"></div>')}else t=i&&i.length&&this.iconpath?jIcons.getHtml(i,null,null,"visibility:hidden",null,this.altText):'<img src="'+i+'" alt="'+this.altText+'">';if(e.innerHTML=t,!this.tile){var r=e.firstChild;if((r=jIcons.getEventElement(r)).onabort=r.onerror=function(){return!0},e.firstChild.tagName===jIcons.mSvgTag)this.onLoad();else{var n=this;r.onload=function(){n.onLoad()}}}this.setAriaElement(e.firstChild)},ka.prototype.onLoad=function(){if(!this.tile){var t=!1;if(this.iconpath){var e=jIcons.getIconSize(this.iconpath);e.width&&(this.imageWidth=e.width,this.imageHeight=e.height,t=!0)}if(!t){var i=this.getClientElem().childNodes[0];this.imageWidth=i.clientWidth,this.imageHeight=i.clientHeight,1!==this.devicePixelRatio&&(this.imageWidth/=this.devicePixelRatio,this.imageHeight/=this.devicePixelRatio)}this.doLoad(),this.doSetVisible()}},ka.prototype.doSetVisible=function(){var t=this.getClientElem(),e=this.getTrueVisibility()?"visible":"hidden";t.style.visibility=e,t.firstChild&&(t.firstChild.style.visibility=e)},ka.prototype.handleEvent=function(t){switch(t.type){case"keydown":case"keyup":if(!this.elem.disabled){var e=OmnisKeyboardHandler.getNormalizedEventKey(t);("Enter"===e&&"keydown"===t.type||" "===e&&"keyup"===t.type)&&(this.handleEvent(jOmnis.createDOMEvent("click")),"Enter"!==e||this.canSendEvent(eBaseEvent.evClick)||this.sendNextOk())}return!0;default:return this.superclass.handleEvent.call(this,t)}},ka.prototype.activeChanged=function(){var t=this.getClientElem();this.elem.disabled?t.onclick=null:t.onclick=this.mEventFunction,this.superclass.activeChanged.call(this)},ka.prototype.visibilityChanged=function(){var t=this.superclass.visibilityChanged.call(this),e=this.getClientElem();if(this.getTrueVisibility()&&(0==this.imageWidth&&0==this.imageHeight||this.mNeedLoad)){this.mNeedLoad=!1;var i=e.childNodes[0];i?(this.imageWidth=i.clientWidth,this.imageHeight=i.clientHeight):(this.imageWidth=0,this.imageHeight=0),this.doLoad()}return this.doSetVisible(),t},ka.prototype.sizeChanged=function(){this.superclass.sizeChanged.call(this),this.doLoad()},ka.prototype.getProperty=function(t){switch(t){case fa.keepaspectratio:return this.keepAspectRatio;case fa.picturealign:return this.pictureAlign;case fa.noscale:return this.noscale;case fa.tile:return this.tile;case eBaseProperties.iconid:return null==this.iconpath?"":this.iconpath;case fa.mediatype:return null==this.dataMediaType?"":this.dataMediaType;case fa.keepaspectratiomode:return this.karMode;case fa.alttext:return this.altText}return this.superclass.getProperty.call(this,t)},ka.prototype.getCanAssign=function(t){switch(t){case fa.keepaspectratio:case fa.picturealign:case fa.noscale:case fa.tile:case eBaseProperties.iconid:case fa.mediatype:case fa.keepaspectratiomode:case fa.alttext:return!0;case eBaseProperties.arialabelledby:var e=this.getClientElem();return!(e&&e.firstChild&&e.firstChild.tagName==jIcons.mSvgTag&&this.altText&&this.altText.length)}return this.superclass.getCanAssign.call(this,t)},ka.prototype.setProperty=function(t,e){switch(t){case fa.keepaspectratio:return this.keepAspectRatio=0!=e,this.doLoad(),!0;case fa.picturealign:return this.pictureAlign=1*e,this.doLoad(),!0;case fa.noscale:return this.noscale=0!=e,this.doLoad(),!0;case fa.tile:return this.tile=0!=e,this.form.inst.registerPropertyObject(this),!0;case eBaseProperties.iconid:return this.iconpath=e+"","0"!==this.iconpath&&0!=this.iconpath.length||(this.iconpath=null),this.form.inst.registerPropertyObject(this),!0;case fa.mediatype:return this.dataMediaType=e+"","0"!==this.dataMediaType&&0!=this.dataMediaType.length||(this.dataMediaType=null),this.form.inst.registerPropertyObject(this),!0;case fa.keepaspectratiomode:var i=1*e;return i>=Ea&&i<=wa&&(this.karMode=i,this.doLoad()),!0;case eBaseProperties.autoscroll:case eBaseProperties.horzscroll:case eBaseProperties.vertscroll:var s=this.superclass.setProperty.call(this,t,e);return this.usesTouchScroll=this.isScrollable(),s;case fa.alttext:if(this.altText=e?e+"":"",!this.tile)this.getClientElem().firstChild.alt=this.altText;return!0}return this.superclass.setProperty.call(this,t,e)},ka.prototype.doLoad=function(){var t=this.getClientElem();if(t.childNodes.length)if(this.tile||0==this.imageWidth&&0==this.imageHeight)this.doSetVisible();else if(0!=t.clientHeight&&0!=t.clientWidth){var e=t.childNodes[0],i="scroll"==t.style.overflowX||"auto"==t.style.overflowX,s="scroll"==t.style.overflowY||"auto"==t.style.overflowY;(i||s)&&!1;var r=this.pictureAlign;if(i&&(r&=65532),s&&(r&=65487),i||s||this.noscale)jIcons.setWidthHeight(e,this.imageWidth,this.imageHeight),e.style.marginTop=r&Ca?(t.clientHeight-this.imageHeight)/2+"px":r&_a?t.clientHeight-this.imageHeight+"px":0,e.style.marginLeft=r&va?(t.clientWidth-this.imageWidth)/2+"px":r&ba?t.clientWidth-this.imageWidth+"px":0;else{e.style.marginLeft=0,e.style.marginTop=0;var n=t.clientWidth/this.imageWidth,o=t.clientHeight/this.imageHeight;if(this.keepAspectRatio)if(n>o)switch(this.karMode){case 0:n=o,e.style.marginTop=0,e.style.marginLeft=0;break;case 1:n=o,e.style.marginLeft=(t.clientWidth-this.imageWidth*n)/2+"px",e.style.marginTop=0;break;case 2:o=n,e.style.marginTop=(t.clientHeight-this.imageHeight*o)/2+"px",e.style.marginLeft=0}else switch(this.karMode){case 0:o=n,e.style.marginTop=0,e.style.marginLeft=0;break;case 1:o=n,e.style.marginTop=(t.clientHeight-this.imageHeight*o)/2+"px",e.style.marginLeft=0;break;case 2:n=o,e.style.marginLeft=(t.clientWidth-this.imageWidth*n)/2+"px",e.style.marginTop=0}jIcons.setWidthHeight(e,this.imageWidth*n,this.imageHeight*o)}}else this.mNeedLoad=!0},ka.prototype.resolveBuiltInPropertyName=function(t){var e=fa[t];return e||this.superclass.resolveBuiltInPropertyName.call(this,t)},ka.prototype.applyPropertyChanges=function(){this.update()},ka.prototype.getURL=function(){var t="";if(this.iconpath)t=this.iconpath;else{var e=this.getData();e&&e.length&&(t=null!=this.dataMediaType?"data:"+this.dataMediaType+";base64,"+e:0==e.indexOf("/")?window.location.protocol+"//"+window.location.host+e:e)}return t},ka.prototype.getDragValue=function(){return this.getURL()};var Ta=ka,Sa={menuname:"$::menuname",listname:"$::listname",text:eBaseProperties.text,iconid:eBaseProperties.iconid,coltext:"$coltext",colenabled:"$colenabled",colcommandid:"$colcommandid",colcascade:"$colcascade",usehtmlselect:"$usehtmlselect",dataname:"$dataname",menupos:"$menupos",backiconid:"$backiconid",backcolor:eBaseProperties.backcolor,backalpha:eBaseProperties.backalpha,borderstyle:eBaseProperties.effect,bordercolor:eBaseProperties.bordercolor,fontname:eBaseProperties.fontname,fontsize:eBaseProperties.fontsize,fontstyle:eBaseProperties.fontstyle,textalign:eBaseProperties.textalign,textcolor:eBaseProperties.textcolor,textbeforeicon:"$textbeforeicon",hotwhenmouseover:"$hotwhenmouseover",hottitleclicks:"$hottitleclicks",hotbackiconid:"$hotbackiconid",hotbackcolor:"$hotbackcolor",hottextcolor:"$hottextcolor",disbackcolor:"$disbackcolor",distextcolor:"$distextcolor"},xa=1,Da=2,Oa=0,Aa=1,Pa=2;function Ia(){this.init_class_inst()}Ia.prototype=new a.U2,Ia.prototype.defaultAriaElem=!1,Ia.ZINDEX={ELEM:2,TRACKER:3},Ia.prototype.init_class_inst=function(){this.superclass=a.U2.prototype,this.menuIsOpen=!1,this.mAcceptsReturn=!0,this.superclass.init_class_inst.call(this),this.activeReplacesEnabled=!0,this.mFocusStyle=eBaseFocusStyle.eWithin},Ia.prototype.baseClassName="omnis-popup",Ia.prototype.init_ctrl_inst=function(t,e,i,s){this.superclass.init_ctrl_inst.call(this,t,e,i,s),this.mHasAlign=!0;var r=this.getClientElem();return this.installEventHandlers(),this.hotBackColor=+r.getAttribute("data-hotbackcolor"),this.hotTextColor=+r.getAttribute("data-hottextcolor"),this.disBackColor=+r.getAttribute("data-disbackcolor"),this.disTextColor=+r.getAttribute("data-distextcolor"),this.stdFontSize=r.style.fontSize,this.hotWhenMouseOver=jOmnis.getAttributeAsBool(r,"data-hotwhenmouseover"),this.hotTitleClicks=!1,r.setAttribute("role","button"),r.setAttribute("aria-haspopup","true"),r.setAttribute("aria-expanded","false"),r.style.overflow="hidden",this.setProperty(eBaseProperties.align,eBaseAlignment[r.style.textAlign]),this.update(),!1},Ia.prototype.installEventHandlers=function(){var t=this.getClientElem(),e=this.isActive()?this.mEventFunction:null;jOmnis.touchDevice&&(t.ontouchstart=e),t.onmousedown=e,t.onmouseover=e,t.onchange=e,t.onkeydown=this.mEventFunction,t.onkeyup=this.mEventFunction,t.onfocus=this.mEventFunction,t.onblur=this.mEventFunction},Ia.prototype.delete_class_inst=function(){this.menuStyleSheet&&(jOmnis.removeStyleSheet(this.menuStyleSheet),this.menuStyleSheet=null),this.closeMenu(),this.superclass.delete_class_inst.call(this)},Ia.prototype.updateCtrl=function(){var t,e=this.getClientElem();this.useHtmlSelect=jOmnis.getAttributeAsBool(e,"data-usehtmlselect"),t=this.elem.disabled?Pa:this.menuIsOpen?Aa:Oa;var i=this.getTextColor(t);e.style.color=i;var s=document.activeElement===e;if(e.style.backgroundColor=s&&t===Oa?this.getFocusColor():this.getTheme().getColorString(this.resolveBackgroundColor(t),null,this.themeableData.backgroundAlpha/255),this.applyBackgroundImage(t===Aa?"data-hotbackiconid":"data-backiconid"),this.useHtmlSelect){var r=this.loadMenuData();if(r){this.buildCSSStylesMenus(!0);for(var n=this.getData(),o="<select class='"+this.clientElem.id+"CellText + "+this.clientElem.id+'Row\' style="width:100%;height:100%" name="'+jOmnis.escapeHTML(e.getAttribute("data-text"))+'">',a=new omnis_list(r),l=1;l<=a.getRowCount();l++){var h=a.getData(eOMMenuLine.commandID,l),c=a.getData(eOMMenuLine.enabled,l),u=a.getChar(eOMMenuLine.text,l,!0);o+='<option value="'+h+'" ',c&&0!=u.length||(o+="disabled "),n==h&&(o+="selected "),o+=">"+u+"</option>"}o+="</select>",e.innerHTML=o,e.children&&e.children.length&&this.elem.disabled&&(e.children[0].disabled=!0)}}else{var d=jOmnis.escapeHTML(e.getAttribute("data-text"),!0),p=this.setupIcon(e.getAttribute("data-iconid"));if(null!=p&&p.length){var m=jIcons.getHtml(p);null!=d&&d.length?(d=jOmnis.getAttributeAsBool(e,"data-textbeforeicon",!1)?d+" "+m:m+" "+d,e.style.fontSize=this.stdFontSize):(d=m,e.style.fontSize="4pt")}e.innerHTML=d,(this.hotTitleClicks&&this.hotWhenMouseOver||!this.hotWhenMouseOver&&!this.menuIsOpen)&&this.isActive()?e.style.cursor="pointer":e.style.cursor="default"}this.setAriaElement(this.useHtmlSelect?e.firstElementChild:e);var f=e.querySelector("svg");f&&Theme.SetThemedIconColor(f,i)},Ia.prototype.handleEvent=function(t){var e=this.getClientElem();switch(t.type){case"mousedown":case"touchstart":return!!this.useHtmlSelect||(this.menuIsOpen?this.closeMenu():(this.focus(),this.openMenu()),this.hotWhenMouseOver&&this.hotTitleClicks&&this.handleClickEvent(0,0),jOmnis.handleEventPreventDefault(t));case"mouseover":return!!this.useHtmlSelect||(!this.hotWhenMouseOver||this.menuIsOpen||this.preventMouseOver||this.openMenu(),jOmnis.handleEventPreventDefault(t));case"change":if(this.useHtmlSelect){var i=t.target;if(null!=i.selectedIndex){var s=i.options[i.selectedIndex];this.handleClickEvent(s.value,s.index+1)}}return!0;case"omnis-menuopen":return this.menuIsOpen=!0,this.update(),this.mDisableSystemFocus||(jOmnis.removeClass(this.clientElem,"autoFocus"),jOmnis.addClass(this.clientElem,"noFocus")),e.setAttribute("aria-expanded","true"),!0;case"omnis-menuselect":return this.handleClickEvent(t.commandID,t.lineID),this.focus(),jOmnis.handleEventPreventDefault(t);case"omnis-menuclosed":this.hoverTimer&&(clearTimeout(this.hoverTimer),this.hoverTimer=null),this.preventMouseOver=!0;var r=this;return this.hoverTimer=setTimeout((function(){r.preventMouseOver=!1}),200),this.mDisableSystemFocus||(jOmnis.removeClass(this.clientElem,"noFocus"),jOmnis.addClass(this.clientElem,"autoFocus")),(this.menuIsOpen||t.always)&&(this.elem.style.zIndex=this.restoreZIndex,this.mTrackElem&&(document.body.removeChild(this.mTrackElem),this.mTrackElem=null),this.menuIsOpen=!1,this.update()),e.setAttribute("aria-expanded","false"),this.superclass.handleEvent.call(this,t);case"omnis-popupdiscarded":var n=jOmnis.createDOMEvent("omnis-menuclosed");return n.always=!0,this.handleEvent(n),!0;case"keydown":if(!this.elem.disabled&&!this.menuIsOpen&&!this.useHtmlSelect){var o=OmnisKeyboardHandler.getNormalizedEventKey(t);"Enter"!==o&&" "!==o&&"ArrowUp"!==o&&"ArrowDown"!==o||(jOmnis.stopEventNow(t),this.selectFirstItemInMenu=!0,this.handleEvent(jOmnis.createDOMEvent("mousedown")),this.selectFirstItemInMenu=!1)}return!0;case"focus":e.style.backgroundColor=this.getFocusColor();break;case"blur":this.menuIsOpen||(e.style.backgroundColor=this.getTheme().getColorString(this.resolveBackgroundColor(Oa),null,this.themeableData.backgroundAlpha/255));break;default:return this.superclass.handleEvent.call(this,t)}},Ia.prototype.getFocusColor=function(){var t=this.getTheme(),e=OMColor.TintRGB(t.getColorRGB(this.resolveBackgroundColor(Oa)),OMColor.eTintFactor.SMALL);return t.getColorString(e,null,this.themeableData.backgroundAlpha/255)},Ia.prototype.activeChanged=function(){this.form.inst.registerPropertyObject(this),this.installEventHandlers(),this.superclass.activeChanged.call(this)},Ia.prototype.getProperty=function(t){var e=this.getClientElem();switch(t){case Sa.menuname:return e.getAttribute("data-menuname");case Sa.listname:return e.getAttribute("data-listname");case Sa.text:return e.getAttribute("data-text");case Sa.iconid:return e.getAttribute("data-iconid");case Sa.coltext:return e.getAttribute("data-coltext");case Sa.colenabled:return e.getAttribute("data-colenabled");case Sa.colcommandid:return e.getAttribute("data-colcommandid");case Sa.colcascade:return e.getAttribute("data-colcascade");case Sa.usehtmlselect:return jOmnis.getAttributeAsBool(e,"data-usehtmlselect");case Sa.hotwhenmouseover:return this.hotWhenMouseOver;case Sa.hottitleclicks:return this.hotTitleClicks;case Sa.backiconid:return e.getAttribute("data-backiconid");case Sa.hotbackiconid:return e.getAttribute("data-hotbackiconid");case Sa.hotbackcolor:return this.hotBackColor;case Sa.hottextcolor:return this.hotTextColor;case Sa.disbackcolor:return this.disBackColor;case Sa.distextcolor:return this.disTextColor;case eBaseProperties.align:var i=e.style.justifyContent;if("flex-start"===i)var s=eBaseAlignment.left;else"flex-end"===i?s=eBaseAlignment.right:"center"===i&&(s=eBaseAlignment.center);return s;case Sa.textbeforeicon:return"1"===e.getAttribute("data-textbeforeicon")}return this.superclass.getProperty.call(this,t)},Ia.prototype.getCanAssign=function(t){switch(t){case Sa.menuname:case Sa.listname:case Sa.text:case Sa.iconid:case Sa.coltext:case Sa.colenabled:case Sa.colcommandid:case Sa.colcascade:case Sa.usehtmlselect:case Sa.hotwhenmouseover:case Sa.hottitleclicks:case Sa.backiconid:case Sa.hotbackiconid:case Sa.hotbackcolor:case Sa.hottextcolor:case Sa.disbackcolor:case Sa.distextcolor:case Sa.textbeforeicon:return!0}return this.superclass.getCanAssign.call(this,t)},Ia.prototype.setProperty=function(t,e){var i=!1,s=this.getClientElem();switch(t){case Sa.menuname:s.setAttribute("data-menuname",e);break;case Sa.listname:s.setAttribute("data-listname",e);break;case Sa.text:s.setAttribute("data-text",e),i=!0;break;case Sa.iconid:s.setAttribute("data-iconid",e),i=!0;break;case Sa.coltext:s.setAttribute("data-coltext",e);break;case Sa.colenabled:s.setAttribute("data-colenabled",e);break;case Sa.colcommandid:s.setAttribute("data-colcommandid",e);break;case Sa.colcascade:s.setAttribute("data-colcascade",e);break;case Sa.usehtmlselect:s.setAttribute("data-usehtmlselect",e),i=!0;break;case Sa.hotwhenmouseover:this.hotWhenMouseOver=1*e!=0;break;case Sa.hottitleclicks:break;case Sa.backiconid:s.setAttribute("data-backiconid",e),i=!0;break;case Sa.hotbackiconid:s.setAttribute("data-hotbackiconid",e),i=!0;break;case Sa.hotbackcolor:this.hotBackColor=+e,i=!0;break;case Sa.hottextcolor:this.hotTextColor=+e,i=!0;break;case Sa.disbackcolor:this.disBackColor=+e,i=!0;break;case Sa.distextcolor:this.disTextColor=+e,i=!0;break;case eBaseProperties.align:s.style.justifyContent=["flex-start","flex-end","center"][e],this.isResponsive&&this.cachedPositionInfo.updateLayoutInfo(this.form.curScreenSize,"align",e);break;case Sa.textbeforeicon:s.setAttribute("data-textbeforeicon",e?"1":"0"),i=!0;break;case eBaseProperties.textcolor:i=!0,this.superclass.setProperty.call(this,t,e);break;case eBaseProperties.fontsize:this.stdFontSize=s.style.fontSize+"pt",i=!0;default:return this.superclass.setProperty.call(this,t,e)}return i&&this.form.inst.registerPropertyObject(this),!0},Ia.prototype.applyPropertyChanges=function(){this.update()},Ia.prototype.setTabIndex=function(){this.useHtmlSelect?(this.clientElem.firstElementChild.tabIndex=this.isActive()?0:-1,this.clientElem.tabIndex=-1):this.clientElem.tabIndex=this.isActive()?0:-1},Ia.prototype.focus=function(){try{this.useHtmlSelect?this.clientElem.firstElementChild.focus():this.clientElem.focus()}catch(t){}},Ia.prototype.loadMenuData=function(){var t=this.getClientElem();if(this.menuName=t.getAttribute("data-menuname"),this.listName=t.getAttribute("data-listname"),this.menuName&&this.menuName.length)return jOmnisMenuHandler.getMenuData(this.form.ident,this.menuName,!1);if(this.listName&&this.listName.length){var e=this.form.getDataIndex(this.listName,this),i=new omnis_list(this.getData(null,null,null,e)),s={text:0,enabled:0,commandid:0,cascade:0};return s.text=i.findColumn(t.getAttribute("data-coltext")),s.enabled=i.findColumn(t.getAttribute("data-colenabled")),s.commandid=i.findColumn(t.getAttribute("data-colcommandid")),s.cascade=i.findColumn(t.getAttribute("data-colcascade")),this.loadMenuFromList(i,s,0)}},Ia.prototype.loadMenuFromList=function(t,e,i){for(var s=new omnis_list(null),r=t.getRowCount(),n=1;n<=r;n++){var o=s.addRow(0),a=e.commandid?t.getData(e.commandid,n):1e3*i+n;if(s.setData(eOMMenuLine.name,o,n,!0),s.setData(eOMMenuLine.ident,o,n,!0),s.setData(eOMMenuLine.commandID,o,a,!0),s.setData(eOMMenuLine.text,o,e.text?jOmnis.escapeHTML(t.getData(e.text,n),!0):n,!0),s.setData(eOMMenuLine.enabled,o,!e.enabled||t.getData(e.enabled,n),!0),s.setData(eOMMenuLine.checked,o,t.getRowSelectionState(n),!0),e.cascade){var l=new omnis_list(t.getData(e.cascade,n));if(l.getRowCount()){var h=this.loadMenuFromList(l,e,a);s.setData(eOMMenuLine.cascadeName,o,"cascadeName_"+n,!0),s.setData(eOMMenuLine.cascadeData,o,h,!0)}}}return s.getListData()},Ia.prototype.applyBackgroundImage=function(t){var e=this.getClientElem(),i=this.setupIcon(e.getAttribute(t));i&&i.length&&(e.style.backgroundImage="url("+i+")",e.style.backgroundRepeat="repeat-x",e.style.backgroundSize=jIcons.getIconBackSize(i))},Ia.prototype.handleClickEvent=function(t,e){return this.menuName&&this.menuName.length&&this.setData(t),this.canSendEvent(eBaseEvent.evClick)&&(this.eventParamsAdd("pCommandID",t),this.eventParamsAdd("pLineNumber",e),this.sendEvent(eBaseEvent.evClick)),!0},Ia.prototype.openMenu=function(){if(!this.menuIsOpen){jOmnisMenuHandler.closeMenus();var t={};t.parentElem=this.elem,t.clickedObj=this,t.keyElem=this.elem,t.closeOnOverlay=this.hotWhenMouseOver;var e=this.getClientElem();switch(1*e.getAttribute("data-menupos")){case xa:t.posX=jOmnis.getOmnisWidth(e)-1,t.posY=2;break;case Da:t.posX=2,t.posY=jOmnis.getOmnisHeight(e,!0),t.offsetY=t.posY-this.borderWidth-2;break;default:t.posX=2,t.posY=jOmnis.getOmnisHeight(e,!0)+2+this.borderWidth}if(t.menuForm=this.form,t.menuObj=this,t.menuName=this.menuName,t.menuData=this.loadMenuData(),t.menuClassPrefix=this.buildCSSStylesMenus(!1),this.restoreZIndex=this.elem.style.zIndex,this.elem.style.zIndex=jOmnis.getPopupZIndex(this.form,Ia.ZINDEX.ELEM),this.hotWhenMouseOver){this.mTrackElem=this.elem.cloneNode(!1);var i=jOmnis.getElemPosRelativeToAncestor(this.elem);this.mTrackElem.style.left=i.x+"px",this.mTrackElem.style.top=i.y+"px",this.mTrackElem.style.zIndex=jOmnis.getPopupZIndex(this.form,Ia.ZINDEX.TRACKER),jOmnis.setOpacity(this.mTrackElem,0),this.mTrackElem.onmousedown=null,this.mTrackElem.onmouseover=null,this.mTrackElem.onclick=null,this.mTrackElem.id=null,document.body.appendChild(this.mTrackElem)}t.rowCtrl=this.rowCtrl;var s=this.elem.getAttribute("data-css");if(s&&(t.openedMenuClass=s.split(" ")[0]),t.selectFirstItemInMenu=this.selectFirstItemInMenu,t.focusElement=document.activeElement,t.controlMenu=!0,!jOmnisMenuHandler.handleContextMenuOpen(t)){var r=jOmnis.createDOMEvent("omnis-menuclosed");r.always=!0,this.handleEvent(r)}}},Ia.prototype.closeMenu=function(){this.menuIsOpen&&jOmnisMenuHandler.closeMenus()},Ia.prototype.buildCSSStylesMenus=function(t){var e=this.clientElem.id,i="",s="font:"+this.clientElem.style.fontStyle+" "+this.clientElem.style.fontWeight+" "+this.stdFontSize+" "+this.clientElem.style.fontFamily+";";t||(i+=jOmnisMenuHandler.getDefaultCSS(e,eOMMenuArea.main,eOMMenuState.normal),i+=this.getBorderCss(),i+=this.getBackgroundCss(Oa,null)+"}",i+=jOmnisMenuHandler.getDefaultCSS(e,eOMMenuArea.table,eOMMenuState.normal),i+=this.getBackgroundCss(Oa,null)+"}"),i+=jOmnisMenuHandler.getDefaultCSS(e,eOMMenuArea.row,eOMMenuState.normal),i+=this.getBackgroundCss(Oa,"data-backiconid");var r=this.getTextColor(Oa);if(i+="color: ".concat(r,"; --om-tint-color: ").concat(r,";}"),!t){i+=jOmnisMenuHandler.getDefaultCSS(e,eOMMenuArea.row,eOMMenuState.hilite),i+=this.getBackgroundCss(Aa,"data-hotbackiconid");var n=this.getTextColor(Aa);i+="color:".concat(n,"; --om-tint-color: ").concat(n,";}"),i+=jOmnisMenuHandler.getDefaultCSS(e,eOMMenuArea.row,eOMMenuState.disabled),i+=this.getBackgroundCss(Pa,"data-backiconid");var o=this.getTextColor(Pa);i+="color:".concat(o,"; --om-tint-color: ").concat(o,";}"),i+=jOmnisMenuHandler.getDefaultCSS(e,eOMMenuArea.cellCheck,eOMMenuState.normal),i+=s+"}"}return i+=jOmnisMenuHandler.getDefaultCSS(e,eOMMenuArea.cellText,eOMMenuState.normal),i+=s+"}",t||(i+=jOmnisMenuHandler.getDefaultCSS(e,eOMMenuArea.cellText,eOMMenuState.divider),i+="border-bottom: 1pt solid "+this.getTextColor(Pa)+";}",i+=jOmnisMenuHandler.getDefaultCSS(e,eOMMenuArea.cellCascade,eOMMenuState.normal),i+=s+"}"),this.menuStyleSheet&&(jOmnis.removeStyleSheet(this.menuStyleSheet),this.menuStyleSheet=null),this.menuStyleSheet=jOmnis.addStyleSheet(i),e},Ia.prototype.complexGridRerendered=function(){this.buildCSSStylesMenus()},Ia.prototype.getBorderCss=function(){var t=1*this.getClientElem().getAttribute("data-bordercolor"),e=this.getTheme().getColorString(t,this.DefaultColors[a.Mr.BORDER]),i="border-style:solid;";return i+="border-width:"+this.borderWidth+"px;",i+="border-color:"+e+";"},Ia.prototype.getBackgroundCss=function(t,e){var i=this.getClientElem(),s="background-color:"+this.getTheme().getColorString(this.resolveBackgroundColor(t))+";";if(null!=e){var r=this.setupIcon(i.getAttribute(e));null!=r&&r.length&&(s+="background-image:url("+r+");background-repeat:repeat-x;",s+=jIcons.getIconSize(r,!0))}return s},Ia.prototype.getTextColor=function(t){var e;switch(t){case Oa:e=this.themeableData.color;break;case Aa:e=this.hotTextColor;break;case Pa:e=this.disTextColor===o.JT?o.l1.disabledText:this.disTextColor}return this.getTheme().getTextColorString(e,this.resolveBackgroundColor(t),this.themeableData.color)},Ia.prototype.resolveBackgroundColor=function(t){var e;switch(t){case Oa:e=this.resolveDefaultColor(this.themeableData.backgroundColor,a.Mr.BACKGROUND);break;case Aa:e=this.hotBackColor!==o.JT?this.hotBackColor:o.l1.primary;break;case Pa:e=this.disBackColor!==o.JT?this.disBackColor:this.resolveBackgroundColor(Oa)}return e},Ia.prototype.resolveBuiltInPropertyName=function(t){var e=Sa[t];return e||this.superclass.resolveBuiltInPropertyName.call(this,t)};var La,ja=Ia;function Na(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function Ba(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Na(Object(i),!0).forEach((function(e){Ra(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Na(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Ra(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Ma="$::value",Fa="$::max",Ha="$sendcarryon",za="$progresscolor",Wa="$::val",$a="$usesystemappearance",Ua="$secondarycolor",Va="$progressanimation",qa={evCarryOn:100};Ga.prototype=new ctrl_base;var Ka=Ba(Ba({},a.Mr),{},{PROGRESS:"progress",SECONDARY:"secondary"});function Ga(){this.init_class_inst()}Ga.prototype.DefaultColors=Ba(Ba({},ctrl_base.prototype.DefaultColors),{},(Ra(La={},Ka.BACKGROUND,o.l1[o._l.background]),Ra(La,Ka.PROGRESS,o.l1[o._l.primary]),Ra(La,Ka.SECONDARY,o.l1[o._l.primaryLight]),La)),Ga.prototype.defaultAriaElem=!1,Ga.prototype.init_class_inst=function(){this.superclass=ctrl_base.prototype,this.superclass.init_class_inst.call(this),this.mCustomEvents=qa,this.usesTouchScroll=!1,this.mFocusStyle=eBaseFocusStyle.eNone,this.usesNotActiveOverlay=!0,this.activeReplacesEnabled=!0},Ga.prototype.baseClassName="omnis-progress",Ga.prototype.init_ctrl_inst=function(t,e,i,s){this.superclass.init_ctrl_inst.call(this,t,e,i,s);var r=this.clientElem;return this.max=+r.getAttribute("data-max"),this.value=+r.getAttribute("data-value"),this.useSystemAppearance="1"===r.getAttribute("data-usesysappearance"),this.progressColor=+r.getAttribute("data-progresscolor"),this.secondaryColor=+r.getAttribute("data-secondarycolor"),this.borderColor=+r.getAttribute("data-bordercolor"),this.backColor=+r.getAttribute("data-progbackcolor"),this.backAlpha=+r.getAttribute("data-progbackalpha"),this.progressAnimation="1"===r.getAttribute("data-animate"),this.makeChildIdBase(r),this.progressId=this.childIdBase+"prog",r.innerHTML=this.createProgressElement(),this.progress=r.firstChild,this.outerDiv=null,this.useSystemAppearance||this.buildElemWithDivs(),this.setAriaElement(this.progress||this.outerDiv.firstChild),this.activeChanged(),!1},Ga.prototype.getProperty=function(t){switch(t){case Ma:case Wa:return this.value;case Fa:return this.max;case za:return this.progressColor;case eBaseProperties.bordercolor:return this.borderColor;case eBaseProperties.backcolor:return this.backColor;case eBaseProperties.backalpha:return this.backAlpha;case Ha:return!1;case $a:return this.useSystemAppearance;case Ua:return this.secondaryColor;case Va:return this.progressAnimation}return this.superclass.getProperty.call(this,t)},Ga.prototype.getCanAssign=function(t){switch(t){case Ma:case Wa:case Fa:case $a:return!0;case za:case eBaseProperties.bordercolor:case eBaseProperties.backcolor:case eBaseProperties.backalpha:return null!=this.outerDiv;case Ha:return!1;case Ua:case Va:return!this.useSystemAppearance}return this.superclass.getCanAssign.call(this,t)},Ga.prototype.setProperty=function(t,e){var i=this.clientElem;switch(t){case Ma:case Wa:return this.value=+e,this.value<0?this.value=0:this.value>this.max&&(this.value=this.max),null!=this.progress?(this.progress.value=this.value,this.progress.setAttribute("aria-valuenow",this.value+"")):(this.setInnerDivWidth(),this.outerDiv.firstChild.setAttribute("aria-valuenow",this.value+"")),!0;case Fa:return e=+e,this.max=e,null!=this.progress?(this.progress.max=e,this.progress.setAttribute("aria-valuemax",e+"")):(this.setInnerDivWidth(),this.outerDiv.firstChild.setAttribute("aria-valuemax",e+"")),!0;case Ha:return this.canSendEvent(qa.evCarryOn)&&this.sendEventDeferred("evCarryOn"),!0;case za:return this.progressColor=+e,null!=this.outerDiv&&this.updateBackgroundImage(this.progressColor,this.secondaryColor),!0;case eBaseProperties.bordercolor:return null!=this.outerDiv&&(this.outerDiv.style.borderColor=this.getTheme().getColorString(e)),!0;case eBaseProperties.backcolor:null!=this.outerDiv&&(this.outerDiv.style.backgroundColor=this.getTheme().getColorString(+e,this.DefaultColors[a.Mr.BACKGROUND],this.getProperty(eBaseProperties.alpha)/255));break;case eBaseProperties.backalpha:null!=this.outerDiv&&(this.outerDiv.style.backgroundColor=this.getTheme().getColorString(this.getProperty(eBaseProperties.backcolor),this.DefaultColors[a.Mr.BACKGROUND],+e/255));break;case $a:return this.useSystemAppearance=+e?1:0,e?(i.innerHTML=this.createProgressElement(),jOmnis.removeClass(i,"ctrl-prog"),jOmnis.removeClass(i,"ctrl-prog-animate"),this.progress=i.firstChild,this.outerDiv=null,this.setAriaElement(this.progress)):(this.buildElemWithDivs(),this.setAriaElement(this.outerDiv.firstChild)),!0;case Ua:return this.secondaryColor=+e,null!=this.outerDiv&&this.updateBackgroundImage(this.progressColor,this.secondaryColor),!0;case Va:return this.progressAnimation=!!e,e&&this.isActive()&&!jOmnis.mDesign?jOmnis.addClass(i,"ctrl-prog-animate"):jOmnis.removeClass(i,"ctrl-prog-animate"),!0}return this.superclass.setProperty.call(this,t,e)},Ga.prototype.activeChanged=function(){this.superclass.activeChanged.call(this),this.progressAnimation&&!this.useSystemAppearance&&(!this.isActive()||jOmnis.mDesign?jOmnis.removeClass(this.clientElem,"ctrl-prog-animate"):jOmnis.addClass(this.clientElem,"ctrl-prog-animate"))},Ga.prototype.setTabIndex=function(){this.clientElem.tabIndex=-1},Ga.prototype.setInnerDivWidth=function(){var t=0===this.max?0:this.value/this.max*100;this.outerDiv.firstChild.style.width=t+"%"},Ga.prototype.buildElemWithDivs=function(){var t=this.clientElem;this.progress=null;var e=this.getTheme(),i=+t.getAttribute("data-bordercolor");i=e.getColorString(i,this.DefaultColors[a.Mr.BORDER]);var s=+t.getAttribute("data-progbackcolor"),r=+t.getAttribute("data-progbackalpha");s=e.getColorString(s,this.DefaultColors[a.Mr.BACKGROUND],r/255),t.innerHTML='<div id="'+this.progressId+'" style="border:1px solid '+i+"; background-color:"+s+';"></div>',this.outerDiv=t.firstChild,this.outerDiv.id===this.progressId?(this.outerDiv.innerHTML='<div role="progressbar" '+this.getAriaAttribString()+' style="background-color:'+this.progressColor+';">&nbsp;</div>',this.setInnerDivWidth(),this.useSystemAppearance?jOmnis.removeClass(t,"ctrl-prog"):(jOmnis.addClass(t,"ctrl-prog"),this.updateBackgroundImage(this.progressColor,this.secondaryColor),this.progressAnimation&&this.isActive()&&!jOmnis.mDesign?jOmnis.addClass(t,"ctrl-prog-animate"):jOmnis.removeClass(t,"ctrl-prog-animate"))):alert("Failed to create progress outer div - should never get to here")},Ga.prototype.updateBackgroundImage=function(t,e){if(this.outerDiv.firstChild){var i=this.getTheme();t=i.getColorString(t,this.DefaultColors[Ka.PROGRESS]),e=i.getColorString(e,this.DefaultColors[Ka.SECONDARY]),this.outerDiv.firstChild.style.backgroundImage="linear-gradient(45deg, "+e+" 24%, "+t+" 25%, "+t+" 49%, "+e+" 50%, "+e+" 74%, "+t+" 75%, "+t+")"}},Ga.prototype.getAriaAttribString=function(){return'aria-valuenow="'+this.value+'" aria-valuemin="0" aria-valuemax="'+this.max+'"'},Ga.prototype.createProgressElement=function(){return'<progress id="'+this.progressId+'" '+this.getAriaAttribString()+' max="'+this.max+'" value="'+this.value+'"></progress>'};var Ya,Xa=Ga;i(2481);function Ja(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function Qa(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ja(Object(i),!0).forEach((function(e){Za(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ja(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Za(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var tl="$buttoncolor",el="$buttonbackiconid",il="$textbeforeicon",sl="$::vertical",rl="$buttonborderradius",nl="$buttonalpha",ol="$isflat",al="$borderwidth";dl.prototype=new ctrl_base;var ll=Qa(Qa({},a.Mr),{},{DISABLED:"DISABLED",DISABLED_TEXT:"DISABLED_TEXT",FLAT_BUTTON:"FLAT_BUTTON",FLAT_BUTTON_TEXT:"FLAT_BUTTON_TEXT",FLAT_BUTTON_DISABLED:"FLAT_BUTTON_DISABLED",FLAT_BUTTON_DISABLED_TEXT:"FLAT_BUTTON_DISABLED_TEXT"}),hl=Qa(Qa({},ctrl_base.prototype.DefaultColors),{},(Za(Ya={},ll.BACKGROUND,o.l1.neutral),Za(Ya,ll.TEXT,o.l1.neutralText),Za(Ya,ll.DISABLED,o.l1.disabled),Za(Ya,ll.DISABLED_TEXT,o.l1.disabledText),Za(Ya,ll.FLAT_BUTTON,o.l1.background),Za(Ya,ll.FLAT_BUTTON_TEXT,o.l1.primary),Za(Ya,ll.FLAT_BUTTON_DISABLED,o.l1.background),Za(Ya,ll.FLAT_BUTTON_DISABLED_TEXT,o.l1.disabledText),Ya));dl.prototype.DefaultColors=hl;var cl="omnis-button--raised",ul="omnis-prevent-shadow";function dl(){this.init_class_inst()}dl.prototype.init_class_inst=function(){this.superclass=ctrl_base.prototype,this.superclass.init_class_inst.call(this),this.usesTouchScroll=!1,this.activeReplacesEnabled=!0},dl.prototype.baseClassName="omnis-button",dl.prototype.init_ctrl_inst=function(t,e,i,s){this.mDisabledStyleFlags=eStyleFlag.backColor,this.superclass.init_ctrl_inst.call(this,t,e,i,s),this.mAcceptsReturn=!0,this.mHasAlign=!0;var r=this.getClientElem();r.style.overflow="hidden",r.style.display="flex",jOmnis.mobileDevice&&r.style.webkitTapHighlightColor&&(this.enabledTapHighlightColor=r.style.webkitTapHighlightColor);var n=r.getAttribute("data-borderradius");n&&jOmnis.setBorderRadius(r,n);var o=r.getAttribute("data-vert");this.mVertical="1"==o;var a=this.setupIcon(r.getAttribute("data-ii")),l=r.getAttribute("data-html");this.mTextIsHtml="1"==l,this.mTextBeforeIcon="P"===r.firstChild.tagName,r.onclick=this.mEventFunction,r.onblur=this.mEventFunction,r.onkeydown=this.mEventFunction,r.onmouseenter=this.mEventFunction,r.onmouseleave=this.mEventFunction,r.onfocus=this.mEventFunction,this.mIsFlatButton=1===parseInt(r.getAttribute("data-flat")),this.mIsFlatButton||jOmnis.addClass(r,cl);var h=this.getTheme().getThemeableObj(r,"data-themeablectrlspec");this.themeableData=Qa(Qa({},this.themeableData),h),this.activeChanged();var c=r.getAttribute("data-bii");return c&&this.setBackgroundImage(this.setupIcon(c)),r.style.whiteSpace="nowrap",this.initialPadding="0px",this.setIcon(r,a),!1};dl.prototype.updateLayout=function(){var t=this.getClientElem(),e=this.getProperty(a.W9.align),i=this.getProperty(il);dl.layoutButton(t,this.mVertical,e,!1,this.mHorizontalPadding),this.iconElem&&jIcons.isIcon(this.iconElem)&&this.getProperty(a.W9.text)?(this.mVertical?this.iconElem.style.margin=i?"".concat(5,"px 0 0 0"):"0 0 ".concat(5,"px 0"):this.iconElem.style.margin=i?"0 0 0 ".concat(5,"px"):"0 ".concat(5,"px 0 0"),this.iconElem.style.order=i?2:1,this.getTextElement().style.order=i?1:2):this.iconElem&&(this.iconElem.style.margin="0")},dl.prototype.getDefaultColorKeys=function(){return this.mIsFlatButton?{background:ll.FLAT_BUTTON,text:ll.FLAT_BUTTON_TEXT}:{background:ll.BACKGROUND,text:ll.TEXT}},dl.prototype.getDisabledColorKeys=function(){return this.mIsFlatButton?{background:ll.FLAT_BUTTON_DISABLED,text:ll.FLAT_BUTTON_DISABLED_TEXT}:{background:ll.DISABLED,text:ll.DISABLED_TEXT}},dl.prototype.getTextColor=function(){var t=this.getTheme();if(this.clientElem.disabled){var e=this.getDisabledColorKeys();return t.getColorString(this.DefaultColors[e.text])}var i=this.getDefaultColorKeys();return t.getTextColorString(this.themeableData.color,this.mIsFlatButton?this.themeableData.buttonColor:this.resolveDefaultColor(this.themeableData.buttonColor,i.background),this.DefaultColors[i.text])},dl.prototype.getTextColorRGB=function(){var t=this.getTheme();if(this.clientElem.disabled){var e=this.getDisabledColorKeys();return t.getColorRGB(this.DefaultColors[e.text])}var i=this.getDefaultColorKeys();return t.getTextColorRGB(this.themeableData.color,this.mIsFlatButton?this.themeableData.buttonColor:this.resolveDefaultColor(this.themeableData.buttonColor,i.background),this.DefaultColors[i.text])},dl.prototype.setIcon=function(t,e){var i=this,s=this.iconElem=jIcons.replaceOrAddToElem(t,e,(function(){i.visibilityChanged()}));s&&(o.Q2.SetThemedIconColor(s,this.getTextColor()),s.style.verticalAlign="middle",jIcons.hasIcon(s)&&(s.style.display="inline")),this.updateLayout();for(var r=0;r<t.childNodes.length;++r){var n=t.childNodes[r];"span"!==n.tagName.toLowerCase()&&(n.style.position="relative",n!=s&&(!s&&jIcons.isIcon(n)||(n.style.display="inline")))}},dl.prototype.canAnimateProperty=function(t){switch(t){case tl:case nl:return{style:"background-color",elems:[this.clientElem]}}return this.superclass.canAnimateProperty.call(this,t)},dl.prototype.getProperty=function(t){var e=this.getClientElem();switch(t){case a.W9.text:var i=this.getTextElement();return i?this.mTextIsHtml?i.innerHTML:i.textContent:"";case tl:return this.defaultColor?-1:jOmnis.rgbFromCssColor(e.style.backgroundColor);case el:return this.getIconUrlFromStyleUrl(this.getClientElem());case a.W9.iconid:for(var s=0;s<e.children.length;++s)if(jIcons.isIcon(e.children[s]))return jIcons.iconUrl(e.children[s]);return"";case il:return this.mTextBeforeIcon;case sl:return this.mVertical;case rl:return e.getAttribute("data-borderradius");case nl:var r=e.getAttribute("data-ba");return r?1*r:255;case a.W9.textishtml:return this.mTextIsHtml;case ol:return this.mIsFlatButton;case al:return this.mBorderWidth}return this.superclass.getProperty.call(this,t)},dl.prototype.getCanAssign=function(t){switch(t){case a.W9.text:case tl:case el:case a.W9.iconid:case il:case sl:case rl:case nl:case a.W9.textishtml:case ol:case al:case a.W9.horzPadding:return!0}return this.superclass.getCanAssign.call(this,t)},dl.prototype.getBorderColor=function(t){var e=+t.getAttribute("data-bordercolor");return t.disabled||e===o.JT?this.getTextColor():this.getTheme().getColorString(e,this.resolveDefaultColor(this.themeableData.color,ll.TEXT))},dl.prototype.getTextElement=function(){return this.getClientElem().querySelector("P")},dl.prototype.setProperty=function(t,e){var i=this.getClientElem();switch(t){case a.W9.text:var s=this.getTextElement();return s&&(this.mTextIsHtml?s.innerHTML=e:s.textContent=e,this.form.inst.registerPropertyObject(this)),!0;case tl:return this.themeableData.buttonColor=+e,this.mustUpdateColours=!0,this.deferPropertyChanges(),!0;case el:try{i.setAttribute("data-bii",e),"0"!==e?this.setBackgroundImage(e):i.style.backgroundImage=""}catch(t){}return!0;case nl:return this.themeableData.buttonAlpha=Math.min(Math.max(0,+e),255),this.mustUpdateColours=!0,this.deferPropertyChanges(),!0;case a.W9.iconid:return this.setIcon(i,e),this.deferPropertyChanges(),!0;case il:return this.mTextBeforeIcon=!!e,this.form.inst.registerPropertyObject(this),!0;case sl:return this.mVertical=1*e!=0,this.form.inst.registerPropertyObject(this),!0;case a.W9.align:return this.superclass.setProperty.call(this,t,e),this.updateLayout(),this.form.inst.registerPropertyObject(this),!0;case rl:var r=e+"";return i.setAttribute("data-borderradius",r),r&&jOmnis.setBorderRadius(i,r),!0;case a.W9.textcolor:return this.themeableData.color=+e,this.setBorderColor(this.clientElem),this.mustUpdateColours=!0,this.deferPropertyChanges(),!0;case a.W9.textishtml:var n=1*e!=0;if(n!=this.mTextIsHtml){var o=this.getProperty(a.W9.text);this.mTextIsHtml=n,this.setProperty(a.W9.text,o)}return!0;case ol:var l=!!e;return this.mIsFlatButton!==l&&(this.mIsFlatButton=l,this.mIsFlatButton?jOmnis.removeClass(i,cl):jOmnis.addClass(i,cl),this.mustUpdateColours=!0,this.deferPropertyChanges()),!0;case al:return this.mBorderWidth=+e,this.clientElem.style.borderWidth="".concat(this.mBorderWidth,"px"),!0}return this.superclass.setProperty.call(this,t,e)},dl.prototype.handleEvent=function(t){var e=this.clientElem;switch(t.type){case"keydown":if(t.repeat)return!0;var i=OmnisKeyboardHandler.getNormalizedEventKey(t);" "!==i&&"Enter"!==i||(this.fromKeyPress=!0);break;case"click":this.fromKeyPress?(jOmnis.removeClass(e,ul),this.fromKeyPress=!1):jOmnis.addClass(e,ul);break;case"blur":if(jOmnisEffects.removeFocusClass(this.getFocusBorderElemParent()),!this.mIsFlatButton){jOmnis.removeClass(e,ul);break}case"mouseleave":var s=this.getTheme();this.mIsFlatButton&&null!=this.resetColor&&(this.clientElem.style.backgroundColor=s.getColorString(this.resolveDefaultColor(this.resetColor,ll.FLAT_BUTTON),0,this.themeableData.buttonAlpha/255),this.resetColor=null);break;case"focus":if(jOmnisEffects.addFocusClass(this.getFocusBorderElemParent()),!this.mIsFlatButton)break;case"mouseenter":if(this.mIsFlatButton){var r=this.getTheme();this.resetColor=this.themeableData.buttonColor;var n=dl.getFlatButtonFocusColor(this.form.inst,this.themeableData.buttonColor,this.themeableData.color);this.clientElem.style.backgroundColor=dl.getFlatButtonColor(r,n)}}return this.superclass.handleEvent.call(this,t)},dl.prototype.applyPropertyChanges=function(){this.mustUpdateColours&&(this.mustUpdateColours=!1,this.updateButtonColor()),this.visibilityChanged()},dl.prototype.activeChanged=function(){var t=this.getClientElem();t.disabled=this.elem.disabled,this.updateButtonColor(),jOmnis.touchDevice&&(t.style.webkitTapHighlightColor=t.disabled?"transparent":this.enabledTapHighlightColor),this.superclass.activeChanged.call(this)},dl.prototype.visibilityChanged=function(){var t=this.superclass.visibilityChanged.call(this);return this.updateLayout(),t},dl.prototype.updateButtonColor=function(){var t=this.getClientElem(),e=this.getTheme(),i=this.clientElem.disabled,s=this.getTextColor();if(t.style.color=s,this.setBorderColor(t),i)t.style.backgroundColor=e.getColorString(this.DefaultColors[this.getDisabledColorKeys().background]);else{t.style.backgroundColor=e.getColorString(this.themeableData.buttonColor,this.DefaultColors[this.getDefaultColorKeys().background],this.themeableData.buttonAlpha/255);var r,n=this.getRippleBackground();this.mIsFlatButton&&(r=this.getTextColorRGB()),this.ripple?jOmnisEffects.setRippleColor(t,e,n,r):this.ripple=jOmnisEffects.addRippleToElem(t,e,!1,n,At._j,null,r)}var a=t.querySelector("svg");a&&o.Q2.SetThemedIconColor(a,s)},dl.prototype.getRippleBackground=function(){return this.mIsFlatButton?dl.getFlatButtonFocusColor(this.form.inst,this.themeableData.buttonColor,this.themeableData.color):this.resolveDefaultColor(this.themeableData.buttonColor,this.getDefaultColorKeys().background)},dl.prototype.setBackgroundImage=function(t){var e=this.getClientElem();e.style.backgroundImage="url("+t+")",e.style.backgroundRepeat="repeat-x",e.style.backgroundPosition="left center",e.style.backgroundSize=jIcons.getIconBackSize(t)},dl.prototype.getAriaDisabledElem=function(){return null},dl.prototype.horzPaddingChanged=function(){this.updateLayout()},dl.getFlatButtonColor=function(t,e){return t.getColorString(dl.prototype.resolveDefaultColor(e,ll.FLAT_BUTTON))},dl.getFlatButtonFocusColor=function(t,e,i){var s=t.theme,r=s.getColorRGB(dl.prototype.resolveDefaultColor(e,ll.FLAT_BUTTON)),n=s.getColorRGB(dl.prototype.resolveDefaultColor(i,ll.FLAT_BUTTON_TEXT));return OMColor.TintRGBWithColor(r,n,OMColor.eTintFactor.SMALL)},dl.layoutButton=function(t,e,i,s,r){e?(t.style.flexDirection=s?"column-reverse":"column",t.style.alignItems=["flex-start","flex-end","center"][i],t.style.justifyContent="center"):(t.style.flexDirection=s?"row-reverse":"row",t.style.justifyContent=["flex-start","flex-end","center"][i],t.style.alignItems="center"),i===a.NE.left?t.style.padding="0 0 0 ".concat(r,"px"):i===a.NE.right?t.style.padding="0 ".concat(r,"px 0 0"):t.style.padding="0"};var pl,ml,fl,gl,vl,bl,yl,Cl,_l,El,wl,kl=dl;function Tl(){this.init_class_inst()}Tl.prototype=(pl="$columncount",ml="$::horizontal",fl="$maxvalue",gl="$minvalue",vl="$radiobuttoncolor",bl="omnis-radio__button",yl="omnis-radio__label",Cl="omnis-radio__outer-circle",_l="omnis-radio__inner-circle",El="omnis-radio__img",(wl=new Ot).init_class_inst=function(){this.ctrl_box_class=Bt.prototype,this.ctrl_box_class.init_class_inst.call(this),this.columncount=1,this.horizontal=!1,this.minvalue=0,this.maxvalue=2,this.value=this.minvalue,this.initialUpdate=!1,this.usesTouchScroll=!1,this.baseClassName="omnis-radio",this.activeReplacesEnabled=!0},wl.init_ctrl_inst=function(t,e,i,s){this.ctrl_box_class.init_ctrl_inst.call(this,t,e,i,s),this.text&&this.text.length&&(this.text=this.text.split(","));var r=this.getClientElem();return this.columncount=parseInt(r.getAttribute("data-columncount")),this.horizontal=parseInt(r.getAttribute("data-horizontal")),this.minvalue=parseInt(r.getAttribute("data-minvalue")),this.maxvalue=parseInt(r.getAttribute("data-maxvalue")),this.value=this.minvalue,this.setProperty(vl,+r.getAttribute("data-radiobuttoncolor")),this.initialUpdate=!0,this.update(),r.onclick=this.mEventFunction,!1},wl.buildContents=function(){var t;this.mustRebuild=!1,t=this.dataName?+this.getData():this.value;for(var e,i=this.getClientElem(),s="",r=this.maxvalue-this.minvalue+1,n=Math.ceil(r/this.columncount),o=n*this.columncount-r,a=this.columncount-o,l=0,h=0,c=0,u=0,d=this.minvalue;d<this.maxvalue+1;d++){this.horizontal?c=this.columncount*h+l:(e=0,l>a&&(e=l-a),c=n*l-e+h),u=this.minvalue+c;var p=i.id+"_label"+(d+1);s=s+"<div"+(u===t?' class="is-checked"':"")+' value="'+u+'">',s+='<input type="radio" class="'+bl+'" aria-labelledby="'+p+'" name="'+i.id+'"',s+=u===t?' checked="yes" aria-checked="true">':' aria-checked="false">';var m=this.text[c];if(m||(m=""),s=s+'<label id="'+p+'" class="'+yl+'" unselectable="on" style="position: absolute;">'+jOmnis.escapeHTML(m)+"</label>","0"==this.normalImage)s+='<span class="'+Cl+'"></span>',s+='<span class="'+_l+'"></span>';else{var f,g=jIcons.getIconSize(this.normalImage);g.width||(g.width=g.height=16),f=u===t?this.checkedImage:this.normalImage;var v=jIcons.getHtml(f,null,'class="'+El+'"',null,g);s+=v||"<img>"}s+='<span class="'+jOmnisEffects.FOCUS_HELPER_CLASS+'"></span>',s+="</div>",l===this.columncount-1?(h++,l=0):l++}for(i.innerHTML=s,d=0;d<i.childNodes.length;d++)jOmnisEffects.addRippleToElem(i.childNodes[d],null,!0);i.setAttribute("role","radiogroup"),this.updateLayout();var b=i.childNodes;for(d=0;d<b.length;++d){var y=b[d].firstChild;jOmnis.addClass(y,this.mDisableSystemFocus?"noFocus":"autoFocus"),b[d].onmouseup=this.mEventFunction,y.onfocus=this.mEventFunction,y.onblur=this.mEventFunction}this.activeChanged()},wl.activeChanged=function(){var t=this.getClientElem();if(t.children)if("0"!==this.normalImage){var e=t.getElementsByTagName("IMG");e.length||(e=t.getElementsByTagName("svg"));for(var i=0;i<e.length;++i)jOmnis.setOpacity(e[i],this.elem.disabled?100:255)}else{var s=t.getElementsByTagName("input");for(i=0;i<s.length;++i)s[i].disabled=this.elem.disabled}this.superclass.activeChanged.call(this)},wl.redrawRadioBoxes=function(t){for(var e=this.getClientElem().childNodes,i=!1,s=0;s<e.length;s++){var r=e[s].childNodes[0],n=+e[s].getAttribute("value")===t;if(r.setAttribute("aria-checked",n?"true":"false"),n?(r.tabIndex=0,i=!0):r.tabIndex=-1,r.checked=n,"0"!==this.normalImage){var o=e[s].querySelector("img,svg");jIcons.setImageUrl(o,n?this.checkedImage:this.normalImage)}n?e[s].classList.add("is-checked"):e[s].classList.remove("is-checked")}if(!i&&e[0]){var a=e[0].childNodes[0];a&&(a.tabIndex=0)}},wl.updateCtrl=function(t,e,i,s){(this.initialUpdate||this.mustRebuild||s)&&(this.buildContents(),this.initialUpdate=!1)},wl.sizeChanged=function(){this.superclass.sizeChanged.call(this),this.updateLayout()},wl.handleEvent=function(t){switch(t.type){case"click":var e,i=e=this.dataName?+this.getData():this.value,s=this.getClientElem(),r=t.target;if(this.elem.disabled)return!0;if(r===s)this.redrawRadioBoxes(+e);else{for(;"DIV"!==r.tagName;)r=r.parentNode;i=r.getAttribute("value"),this.redrawRadioBoxes(+i),r.firstChild.focus()}return i!==e&&(this.dataName&&this.setData(1*i),this.value=i,this.canSendEvent(eBaseEvent.evClick)&&(this.eventParamsAdd("pNewVal",+i),this.sendEvent(eBaseEvent.evClick))),!0;case"mouseup":var n=t.currentTarget;return setTimeout((function(){jOmnisEffects.removeFocusClass(n)}),.001),!0;case"focus":return jOmnisEffects.addFocusClass(t.target.parentNode),!0;case"blur":return jOmnisEffects.removeFocusClass(t.target.parentNode),!0;default:return this.ctrl_box_class.handleEvent.call(this,t)}},wl.updateLayout=function(){if(this.clientElem&&this.clientElem.childNodes&&this.clientElem.childNodes.length&&this.getTrueVisibility()&&"hidden"!==this.elem.style.visibility){var t,e,i,s,r,n,o,a,l=this.clientElem.childNodes,h=0,c=0,u=5,d=5,p=0,m=0,f=0,g=0,v="0"===this.normalImage;if(t=l[0].childNodes[2],e=l[0].childNodes[1],o=Ot.getTotalHeight(e),v){var b=parseInt(this.clientElem.style.fontSize)*(96/72);r=n=4*Math.round(b/4)}else r=Ot.getTotalHeight(t),n=Ot.getTotalWidth(t);for(i=n,o>(s=r)?(m=Math.floor((o-s)/2),g=o):s>o?(f=Math.floor((s-o)/2),g=s):g=o,a=0;a<l.length;a++)e=l[a].childNodes[1],(h=Ot.getTotalWidth(e))>c&&(c=h);for(a=0;a<l.length;a++){t=l[a].childNodes[2],e=l[a].childNodes[1],Ot.setDefaultMargins(t),Ot.setDefaultMargins(e),t.style.position="absolute",e.style.display="inline",e.style.verticalAlign="middle";var y=u+m+0,C=d+0;if(jOmnis.setOmnisTop(t,y),jOmnis.setOmnisLeft(t,C),v){t.style.height=r+"px",t.style.width=n+"px",t.style.borderWidth=n/8+"px";var _=l[a].querySelector("."+_l);_.style.height=r+"px",_.style.width=n+"px",_.style.top=y+"px",_.style.left=C+"px"}var E=l[a].querySelector("."+At.O7.CONTAINER);E.style.height=E.style.width=n+10+"px",k(E,t);var w=l[a].querySelector("."+jOmnisEffects.FOCUS_HELPER_CLASS);w.style.height=E.style.height,w.style.width=E.style.width,w.style.top=E.style.top,w.style.left=E.style.left,d+=i+8,jOmnis.setOmnisTop(e,u+f),jOmnis.setOmnisLeft(e,d),d+=c+14,p===this.columncount-1?(d=5,u+=g+10,p=0):p++}}function k(t,e){var i=((e.tagName===jIcons.mSvgTag?jIcons.getElemWidth(e):e.offsetWidth)-t.offsetWidth)/2;jOmnis.setOmnisTop(t,y+i),jOmnis.setOmnisLeft(t,C+i)}},wl.visibilityChanged=function(){var t=this.superclass.visibilityChanged.call(this);return this.getTrueVisibility()&&"hidden"!==this.elem.style.visibility&&this.updateLayout(),t},wl.getProperty=function(t){switch(t){case pl:return this.columncount;case ml:return!!this.horizontal;case fl:return this.maxvalue;case gl:return this.minvalue;case eBaseProperties.text:return"string"==typeof this.text?this.text:this.text.join(",");case eBaseProperties.iconid:return"0"===this.normalImage?"":this.normalImage;case vl:return this.radioButtonColor}return this.ctrl_box_class.getProperty.call(this,t)},wl.getCanAssign=function(t){switch(t){case pl:case ml:case fl:case gl:case eBaseProperties.text:case eBaseProperties.iconid:case vl:return!0}return this.superclass.getCanAssign.call(this,t)},wl.setProperty=function(t,e){if(!this.getCanAssign(t))return!1;switch(t){case pl:return this.columncount=+e,this.mustRebuild=!0,this.update(),!0;case ml:return this.horizontal=!!e,this.mustRebuild=!0,this.update(),!0;case fl:return this.maxvalue=+e,this.mustRebuild=!0,this.update(),!0;case gl:return this.minvalue=+e,this.mustRebuild=!0,this.update(),!0;case eBaseProperties.text:return e&&e.length?this.text=e.split(","):this.text="",this.mustRebuild=!0,this.update(),!0;case eBaseProperties.iconid:return e===this.normalImage||(this.normalImage=e+"",e&&(this.checkedImage=jIcons.getCheckedImage(this.normalImage)),this.mustRebuild=!0,this.update()),!0;case vl:return this.radioButtonColor=+e,this.clientElem.style.setProperty("--radiobutton-color",this.getTheme().getColorString(this.radioButtonColor,o.l1.secondary)),!0}this.ctrl_box_class.setProperty.call(this,t,e)},wl.setTabIndex=function(t){var e=this.getClientElem();e.tabIndex=-1;var i=e.childNodes,s=this.dataName?this.getData():this.value;this.tabIndex=-1===t?-1:0;for(var r=!1,n=0;n<i.length;++n)n+this.minvalue===+s?(i[n].firstChild.tabIndex=this.tabIndex,r=!0):i[n].firstChild.tabIndex=-1;return!r&&i[0]&&i[0].firstChild&&(i[0].firstChild.tabIndex=this.tabIndex),t},wl.getFocusState=function(t){for(var e=this.getClientElem().childNodes,i=0;i<e.length;++i)if(t===e[i].firstChild)return{button:i};return null},wl.setFocusFromState=function(t){try{this.getClientElem().childNodes[t.button].firstChild.focus()}catch(t){}},wl.focus=function(){var t=this.dataName?this.getData():this.value;this.setFocusFromState({button:+t})},wl.fontChanged=function(){this.superclass.fontChanged.call(this),this.updateLayout()},wl);var Sl,xl=Tl;function Dl(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function Ol(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Dl(Object(i),!0).forEach((function(e){Al(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Dl(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Al(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Pl="$currentsegment",Il="$segmenttext",Ll="$segmenticonid",jl="$segmentenabled",Nl="$segmentcount",Bl="$segmentarialabel",Rl="$selectedtextcolor",Ml="$selectedcolor",Fl="$selectedsegment",Hl="$showselectedsegment",zl="$displaystyle",Wl="$segmentspacing",$l="$segmentwidth",Ul="$segmenteffect",Vl="$segmentborderradius",ql="$segmentbordercolor",Kl="$hidedisabledsegments",Gl="$movesegment",Yl="$focusedsegmentindicatorcolor",Xl=0,Jl=1,Ql=0,Zl=1;eh.prototype=new a.U2,eh.prototype.separatorWidth=1,eh.prototype.mAcceptsReturn=!0,eh.prototype.defaultAriaElem=!1;var th=Ol(Ol({},a.Mr),{},{INDICATOR_COLOR:"INDICATOR_COLOR",SELECTED_BACK_COLOR:"SELECTED_BACK_COLOR",SELECTED_TEXT_COLOR:"SELECTED_TEXT_COLOR"});function eh(){this.init_class_inst()}function ih(t){this.active=!!t,this.imageSize={},this.ariaLabel=""}eh.prototype.DefaultColors=Ol(Ol({},a.U2.prototype.DefaultColors),{},(Al(Sl={},a.Mr.BACKGROUND,o.l1[o._l.primary]),Al(Sl,a.Mr.TEXT,o.l1[o._l.primaryText]),Al(Sl,th.INDICATOR_COLOR,o.l1[o._l.secondary]),Al(Sl,th.SELECTED_BACK_COLOR,o.l1[o._l.primary]),Al(Sl,th.SELECTED_TEXT_COLOR,o.l1[o._l.primaryText]),Sl)),eh.prototype.init_class_inst=function(){this.superclass=a.U2.prototype,this.superclass.init_class_inst.call(this),this.selectedSegment=0,this.segmentPadding=5,this.segments=[],this.mFocusStyle=eBaseFocusStyle.eCustom,this.activeReplacesEnabled=!0},eh.prototype.baseClassName="omnis-segmented",eh.prototype.delete_class_inst=function(){this.superclass.delete_class_inst.call(this)},eh.prototype.init_ctrl_inst=function(t,e,i,s){this.superclass.init_ctrl_inst.call(this,t,e,i,s);var r=this.getClientElem();return r.style.cursor="default",r.style.outline="none",this.currentSegment=parseInt(r.getAttribute("data-cursegment")),this.showSelected="1"===r.getAttribute("data-showsel"),this.selectedSegment=+r.getAttribute("data-selsegment"),this.selectedBackgroundColor=+r.getAttribute("data-selectedcolor"),this.selectedTextColor=+r.getAttribute("data-selectedtextcolor"),this.propSegmentWidth=+r.getAttribute("data-segwidth"),this.propSpacing=+r.getAttribute("data-spacing"),this.backgroundColor=r.style.backgroundColor,this.segmentEffect="1"===r.getAttribute("data-segeffect")?Zl:Ql,this.segmentBorderColor=this.getTheme().getColorString(+r.getAttribute("data-segbordercolor")),this.segmentBorderRadius=+r.getAttribute("data-segborderradius"),this.hideDisabled=!!r.getAttribute("data-hidedisabled"),this.displayStyle="1"===r.getAttribute("data-displaystyle")?Jl:Xl,this.setProperty(Yl,+r.getAttribute("data-indicatorcolor")),this.elem.onclick=this.mEventFunction,this.elem.onkeydown=this.mEventFunction,this.elem.onkeyup=this.mEventFunction,this.buildControl(),this.isActive()||this.activeChanged(),this.elem.addEventListener("focusin",this.mEventFunction),this.elem.addEventListener("focusout",this.mEventFunction),!1},eh.prototype.buildControl=function(){var t=this.getClientElem(),e=parseInt(t.getAttribute("data-segs"));this.segments=[],this.segmentCount=0,this.visibleSegments=0,jOmnis.addClass(t,"unselectable");var i=document.createElement("div");i.style.height="100%",i.style.overflow="hidden",i.style.boxSizing="border-box",i.style.margin="auto";var s=this.showSelected?"tablist":"group";i.setAttribute("role",s),this.setAriaElement(i),t.appendChild(i),this.segContainer=i,t.style.backgroundColor="";for(var r=1;r<=e;r++)this.addSegment(t.getAttribute("data-seg"+r).split(","));this.updateStyleSheet(),this.selectedSegment>0&&this.updateSelectedSegment(this.selectedSegment,!0),this.showSelected&&this.updateAriaSelected(!0,this.selectedSegment),this.updatePositions()},eh.prototype.addSegment=function(t,e){var i=++this.segmentCount,s="1"===t[2];e=null==e?!s&&this.hideDisabled&&!jOmnis.mDesign:e,this.segments.push(new ih(s)),e||this.visibleSegments++;var r=document.createElement("div");r.className=s?"segment enabledsegment":"segment disabledsegment",s||r.setAttribute("aria-disabled","true"),r.style.display=e?"none":"inline-block",r.style.height="inherit",r.style.position="relative",r.style.overflow="hidden",r.onfocus=this.mEventFunction,r.onblur=this.mEventFunction,r.style.outline="none",r.style.backgroundColor=this.backgroundColor,r.style.boxSizing="border-box",0!==this.propSpacing&&(r.style.borderRadius=this.segmentBorderRadius+"px",r.style.border=this.segmentEffect==Zl?"solid "+this.separatorWidth+"px "+this.segmentBorderColor:"");var n=this.showSelected?"tab":"button";r.setAttribute("role",n),this.setIcon(i,r,t[1]);var o=document.createElement("p");return o.textContent=t[0],o.style.textAlign="center",o.style.position="absolute",o.style.width="100%",o.style.margin="0",r.appendChild(o),this.setAriaLabel(i,t[3],r),jOmnisEffects.addRippleToElem(r,this.getTheme(),!1,this.resolveDefaultColor(this.themeableData.backgroundColor,a.Mr.BACKGROUND),At._j),s||this.addDisabledOverlay(r),this.segContainer.appendChild(r),r},eh.prototype.removeLastSegment=function(){(!this.hideDisabled||this.segments[this.segmentCount-1].active||jOmnis.mDesign)&&this.visibleSegments--,this.segmentCount--,this.currentSegment>this.segmentCount&&(this.currentSegment=this.segmentCount),this.segments.pop(),this.segContainer.removeChild(this.segContainer.lastChild)},eh.prototype.addDisabledOverlay=function(t){var e=document.createElement("div");e.className="segment-disabled-overlay",t.appendChild(e)},eh.prototype.updateStyleSheet=function(){var t=this.getTheme(),e=this.getClientElem(),i=t.getColorString(this.selectedBackgroundColor,this.DefaultColors[th.SELECTED_BACK_COLOR]),s=t.getTextColorString(this.selectedTextColor,this.selectedBackgroundColor,this.DefaultColors[th.SELECTED_TEXT_COLOR]),r="#"+e.id+" .segment.selectedsegment { background-color: "+i+" !important; color: "+s+"; } ";r+="#"+e.id+" .segment.selectedsegment svg { --om-tint-color: "+s+"; } ",r+="#"+e.id+" .segment svg { --om-tint-color: "+e.style.color+"; } ",this.mStyleSheet&&jOmnis.removeStyleSheet(this.mStyleSheet),this.mStyleSheet=jOmnis.addStyleSheet(r)},eh.prototype.complexGridRerendered=function(){this.updateStyleSheet()},eh.prototype.updatePositions=function(){if(this.getTrueVisibility()){this.updatePositionsOnceVisible=!1;var t=this.getClientElem();if(t.style.overflow=this.propSegmentWidth?"auto":"hidden",this.segmentHeight=jOmnis.getOmnisHeight(t,!0),this.spacing=this.propSpacing,0==this.propSegmentWidth){var e=jOmnis.getOmnisWidth(t,!0);if(this.segmentWidth=(e-this.separatorWidth*this.visibleSegments)/this.visibleSegments+1,this.propSpacing>0){var i=this.propSpacing*(this.visibleSegments-1);this.segmentWidth-=i/this.visibleSegments,this.segmentWidth<10&&(this.segmentWidth=10);var s=e-10*this.visibleSegments,r=this.visibleSegments>1?s/(this.visibleSegments-1):0;i>s&&(this.spacing=r)}}else this.segmentWidth=this.propSegmentWidth;this.segContainer.style.width=(this.segmentWidth+this.spacing)*this.visibleSegments-this.spacing+"px";for(var n=1;n<=this.segmentCount;n++)this.updateSegment(n);if(jOmnis.mDesign&&this.segmentCount){var o=this.segContainer.childNodes;this.hiliteSelectedItem(this.currentSegment,o[this.currentSegment-1],!0)}}else this.updatePositionsOnceVisible=!0},eh.prototype.updateSegment=function(t){var e=t===this.getLastVisibleSegment(),i=this.getSegmentElement(t);0===this.propSpacing?(i.style.borderRadius="0",i.style.border="",1===t&&(i.style.borderTopLeftRadius=this.segmentBorderRadius+"px",i.style.borderBottomLeftRadius=this.segmentBorderRadius+"px"),e&&(i.style.borderTopRightRadius=this.segmentBorderRadius+"px",i.style.borderBottomRightRadius=this.segmentBorderRadius+"px")):this.segmentEffect===Zl?(i.style.borderRadius=this.segmentBorderRadius+"px",i.style.border="solid "+this.separatorWidth+"px "+this.segmentBorderColor):(i.style.borderRadius=this.segmentBorderRadius+"px",i.style.border=""),i.style.width=this.segmentWidth+"px",0!==this.propSpacing||this.segmentEffect!==Zl||e||(i.style.borderRight=this.separatorWidth+"px solid "+this.segmentBorderColor),i.style.marginRight=e?"0":this.spacing+"px",i.style.backgroundColor=this.backgroundColor;var s=this.segments[t-1].imageSize,r=s.width?s.width:0,n=s.height?s.height:0,o=i.childNodes[1],a=i.childNodes[0];i.textContent?a.style.top=this.displayStyle==Xl?this.segmentHeight-n-this.segmentPadding+"px":this.segmentPadding+"px":a.style.top=(this.segmentHeight-n)/2+"px",a.style.left=(this.segmentWidth-r)/2+"px",n&&(n+=this.segmentPadding),o.style.lineHeight=this.segmentHeight-n+"px",o.style.top=this.displayStyle==Xl?0:n+"px",this.setAriaLabel(t,this.segments[t-1].ariaLabel)},eh.prototype.updateCtrl=function(t){},eh.prototype.sizeChanged=function(){this.updatePositions()},eh.prototype.handleEvent=function(t){switch(t.type){case"click":jOmnis.stopEventNow(t),t.preventDefault();var e=function(t){for(;t&&!jOmnis.hasClass(t,"segment");)t=t.parentNode;if(!t)return null;var e=0;for(;t=t.previousSibling;)e++;return e+1}(t.target);return e>0&&this.segmentClicked(e),!0;case"focus":case"blur":if(!this.mDisableSystemFocus&&this.isActive()){var i=t.target;if("DIV"==i.tagName&&i!=this.elem&&i!=this.clientElem&&i!=this.segContainer)if("focus"===t.type){this.focusElem=i,a=this.segContainer.childNodes;for(var s=0;s<a.length;s++)a[s].tabIndex=-1;this.focusElem.tabIndex=0}else this.focusElem&&(this.focusElem=null)}return!0;case"keydown":case"keyup":var r=OmnisKeyboardHandler.getNormalizedEventKey(t),n="keydown"===t.type;if("Enter"===r||" "===r){t.preventDefault();var o=" "===r;if(o&&n||!o&&!n)return!0;var a=this.segContainer.childNodes,l=document.activeElement;"Enter"!==r||this.canSendEvent(eBaseEvent.evClick)||this.showSelected&&!jOmnis.hasClass(l,"selectedsegment")||this.sendNextOk();for(s=0;s<a.length;++s)if(l===a[s])return this.segmentClicked(s+1),!0}else if("ArrowLeft"===r||"ArrowRight"===r||"ArrowUp"===r||"ArrowDown"===r){if(t.preventDefault(),!n)return!0;var h=(a=this.segContainer.childNodes).length;if(l=document.activeElement){var c=-1;for(s=0;s<h;++s)if(a[s]==l){c=s;break}if(-1!=c){var u,d=[],p=-1;for(s=0;s<h;++s)this.segments[s].active&&(s==c&&(p=d.length),d.push(s));if(-1!=p)if("ArrowLeft"===r||"ArrowUp"===r?(u=p-1)<0&&(u=d.length-1):(u=p+1)==d.length&&(u=0),u!=p)(l=a[d[u]]).focus()}}}else if("Home"===r){if(t.preventDefault(),!n)return!0;for(a=this.segContainer.childNodes,s=0;s<this.segments.length;s++)if(this.segments[s].active){a[s].focus();break}}else if("End"===r){if(t.preventDefault(),!n)return!0;for(a=this.segContainer.childNodes,s=this.segments.length-1;s>=0;s--)if(this.segments[s].active){a[s].focus();break}}return!0}return this.superclass.handleEvent.call(this,t)},eh.prototype.updateSelectedSegment=function(t,e){if(this.selectedSegment==t&&!e)return!1;var i=this.selectedSegment;if(i>0&&i<=this.segmentCount){var s=this.getSegmentElement(i);jOmnis.removeClass(s,"selectedsegment")}return!this.showSelected||(i!==t&&this.updateAriaSelected(!0,t),t>=0&&t<=this.segmentCount?(this.selectedSegment=t,(s=this.getSegmentElement(t))&&jOmnis.addClass(s,"selectedsegment"),!0):void 0)},eh.prototype.getSegmentElement=function(t){return t>this.segmentCount?(console.log("Attempt to get segment out of range"),null):this.segContainer.childNodes[t-1]},eh.prototype.getProperty=function(t){switch(t){case Pl:return this.currentSegment;case Hl:return this.showSelected;case Fl:return this.selectedSegment;case Ml:return this.selectedBackgroundColor;case Rl:return this.selectedTextColor;case Nl:return this.segmentCount;case zl:return this.displayStyle;case jl:return this.segments[this.currentSegment-1].active;case Il:return this.getSegmentElement(this.currentSegment).childNodes[1].textContent;case Ll:return this.getSegmentElement(this.currentSegment).childNodes[0].src;case Bl:return this.segments[this.currentSegment-1].ariaLabel;case Wl:return this.propSpacing;case $l:return this.propSegmentWidth;case eBaseProperties.backcolor:return jOmnis.rgbFromCssColor(this.backgroundColor);case ql:return jOmnis.rgbFromCssColor(this.segmentBorderColor);case Vl:return this.segmentBorderRadius;case Ul:return this.segmentEffect;case Kl:return this.hideDisabled;case Gl:return 0;case Yl:return this.focusedSegmentIndicatorColor}return this.superclass.getProperty.call(this,t)},eh.prototype.getCanAssign=function(t){switch(t){case Pl:case Nl:case jl:case Ll:case Il:case Bl:case Ml:case Rl:case Hl:case Fl:case zl:case Wl:case $l:case ql:case Vl:case Ul:case Kl:case Yl:return!0;case Gl:return 0!=jOmnis.mDesign}return this.superclass.getCanAssign.call(this,t)},eh.prototype.setProperty=function(t,e){if(!this.getCanAssign(t))return!1;switch(t){case Pl:if(e>0&&e<=this.segmentCount){if(this.currentSegment=e,jOmnis.mDesign){var i=this.segContainer.childNodes;this.hiliteSelectedItem(e,i[e-1])}return!0}return!1;case Hl:if(this.showSelected==e)return!0;this.showSelected=e,this.updateSelectedSegment(this.selectedSegment,!0),this.updateAriaSelected(this.showSelected,this.selectedSegment),this.segContainer.setAttribute("role",this.showSelected?"tablist":"group");for(var s=this.showSelected?"tab":"button",r=(i=this.segContainer.childNodes,0);r<i.length;r++)i[r].setAttribute("role",s);return!0;case Fl:return this.updateSelectedSegment(e,!1),!0;case Ll:return this.setIcon(this.currentSegment,this.getSegmentElement(this.currentSegment),e),this.updateSegment(this.currentSegment),!0;case Il:return 0===e&&(e=""),this.getSegmentElement(this.currentSegment).childNodes[1].textContent=e,this.updateSegment(this.currentSegment),!0;case Nl:if(e>this.segmentCount)for(;this.segmentCount<e;){var n=this.isActive(),o=this.addSegment(["","",n?"1":"0"],!1);o.tabIndex=n?0:-1,this.segments[this.segmentCount-1].active=!0}else if(e<this.segmentCount)for(;this.segmentCount>1&&this.segmentCount>e;)this.removeLastSegment();return this.updatePositions(),!0;case jl:return this.setActive(this.currentSegment,e),!0;case Bl:return this.setAriaLabel(this.currentSegment,e+""),!0;case Ml:return this.selectedBackgroundColor=+e,this.updateSelectedSegment(this.selectedSegment,!0),this.updateStyleSheet(),!0;case Rl:return this.selectedTextColor=+e,this.updateSelectedSegment(this.selectedSegment,!0),this.updateStyleSheet(),!0;case zl:return e!=this.displayStyle&&(this.displayStyle=e,this.updatePositions()),!0;case Wl:return e==this.propSpacing||(this.propSpacing=+e,this.updatePositions()),!0;case $l:return e==this.propSegmentWidth||(this.propSegmentWidth=+e,this.updatePositions()),!0;case eBaseProperties.backcolor:this.themeableData.backgroundColor=e;var l=this.getTheme();this.backgroundColor=l.getColorString(e,this.DefaultColors.background);for(var h=1;h<=this.segmentCount;h++)this.getSegmentElement(h).style.backgroundColor=this.backgroundColor;var c=this.resolveDefaultColor(e,a.Mr.BACKGROUND);return this.clientElem.style.color=l.getTextColorString(this.themeableData.color,c,this.DefaultColors.text),jOmnisEffects.setRippleColor(this.clientElem,l,c),this.updateStyleSheet(),!0;case eBaseProperties.textcolor:var u=this.superclass.setProperty.call(this,t,e);return this.updateStyleSheet(),u;case Vl:if(e==this.segmentBorderRadius)return!0;if(this.segmentBorderRadius=+e,0!==this.propSpacing)for(var d=1;d<=this.segmentCount;d++)this.getSegmentElement(d).style.borderRadius=this.segmentBorderRadius+"px";else this.updatePositions();return!0;case ql:this.segmentBorderColor=this.getTheme().getColorString(e),this.segContainer.style.borderColor=this.segmentBorderColor;for(d=1;d<=this.segmentCount;d++)this.getSegmentElement(d).style.borderColor=this.segmentBorderColor;return!0;case Ul:return this.segmentEffect=+e,this.updatePositions(),!0;case Kl:if(this.hideDisabled===!!e)return!0;if(this.hideDisabled=!!e,!jOmnis.mDesign){for(d=1;d<=this.segmentCount;d++)this.segments[d-1].active||(o=this.getSegmentElement(d),this.hideDisabled?(o.style.display="none",this.visibleSegments--):(o.style.display="inline-block",this.visibleSegments++));this.updatePositions()}return!0;case Gl:if(e*=1,jOmnis.mDesign&&e>0&&e<=this.segmentCount&&e!=this.currentSegment){var p=this.segments.splice(this.mCurrentSegment-1,1);this.segments.splice(e-1,0,p[0]);i=this.segContainer.childNodes;var m=this.segContainer.removeChild(i[this.currentSegment-1]);e>1?i[e-2].after(m):i[0].before(m),this.currentSegment=e}return!0;case Yl:this.focusedSegmentIndicatorColor=+e;var f=this.getTheme();return this.clientElem.style.setProperty("--indicator-color",f.getColorString(this.focusedSegmentIndicatorColor,this.DefaultColors.INDICATOR_COLOR)),!0;default:return this.superclass.setProperty.call(this,t,e)}},eh.prototype.activeChanged=function(){for(var t=this.isActive(),e=1;e<=this.segmentCount;e++)this.setActive(e,t,!0);this.superclass.activeChanged.call(this),this.disableSystemFocusChanged()},eh.prototype.setActive=function(t,e,i){if(i&&(e=e?this.segments[t-1].active:e),!i&&this.segments[t-1].active==e)return!0;i||(this.segments[t-1].active=e);for(var s=this.getSegmentElement(t),r=null,n=0;n<s.childNodes.length;n++)if("segment-disabled-overlay"===s.childNodes[n].className){r=s.childNodes[n];break}i||(e?s.removeAttribute("aria-disabled"):s.setAttribute("aria-disabled","true")),(i||this.isActive())&&(e&&r?(r.parentNode.removeChild(r),jOmnis.removeClass(s,"disabledsegment"),jOmnis.addClass(s,"enabledsegment")):e||r||(this.addDisabledOverlay(s),jOmnis.removeClass(s,"enabledsegment"),jOmnis.addClass(s,"disabledsegment"))),i||!this.hideDisabled||jOmnis.mDesign||(e?(s.style.display="inline-block",this.visibleSegments++):(s.style.display="none",this.visibleSegments--),this.updatePositions())},eh.prototype.setIcon=function(t,e,i){i||(i=""),i=this.setupIcon(i);var s=jIcons.replaceOrAddToElem(e,i);null==s&&(s=document.createElement("IMG"),e.appendChild(s)),s.style.position="absolute",s.style.display=i?"block":"none",this.segments[t-1].imageSize=jIcons.getIconSize(i)},eh.prototype.setAriaLabel=function(t,e,i){this.segments[t-1].ariaLabel=e,i||(i=this.getSegmentElement(t)),!e||i.childNodes[1].textContent?i.removeAttribute("aria-label"):i.setAttribute("aria-label",e)},eh.prototype.updateAriaSelected=function(t,e){for(var i=this.segContainer.childNodes,s=0;s<i.length;s++)t?i[s].setAttribute("aria-selected","false"):i[s].removeAttribute("aria-selected");t&&e>0&&i[e-1].setAttribute("aria-selected","true")},eh.prototype.focus=function(){var t=this.segContainer.childNodes;if(this.selectedSegment&&this.segments[this.selectedSegment-1].active)t[this.selectedSegment-1].focus();else if(t.length&&this.isActive())for(var e=0;e<t.length;++e)if(this.segments[e].active){t[e].focus();break}},eh.prototype.setTabIndex=function(t){var e=-1!=t&&this.isActive()?0:-1;this.clientElem.tabIndex=-1;for(var i=this.segContainer.childNodes,s=!1,r=0;r<i.length;++r)!s&&this.segments[r].active?(i[r].tabIndex=e,s=!0):i[r].tabIndex=-1;return t},eh.prototype.disableSystemFocusChanged=function(){this.setTabIndex(this.isActive()?0:-1),this.focusElem&&(this.focusElem=null)},eh.prototype.visibilityChanged=function(){var t=this.superclass.visibilityChanged.call(this);return this.updatePositionsOnceVisible&&this.getTrueVisibility()&&this.updatePositions(),t},eh.prototype.getLastVisibleSegment=function(){if(!this.hideDisabled||jOmnis.mDesign)return this.segmentCount;for(var t=this.segmentCount;t>0&&!this.segments[t-1].active;)t--;return t},eh.prototype.segmentClicked=function(t){this.segments[t-1].active&&(this.updateSelectedSegment(t,!1),this.canSendEvent(eBaseEvent.evClick)&&(this.eventParamsAdd("pClickedSegment",t),this.sendEvent(eBaseEvent.evClick)))};var sh=eh;i(7207);function rh(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function nh(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?rh(Object(i),!0).forEach((function(e){oh(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):rh(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function oh(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var ah="$showcontrols",lh="$plaintextname",hh="$contenttip",ch="$dataformat";function uh(){this.init_class_inst()}uh.prototype=new ctrl_base,uh.prototype.DefaultColors=nh(nh({},ctrl_base.prototype.DefaultColors),{},oh({},a.Mr.BACKGROUND,o.l1[o._l.background])),uh.prototype.allowDefaultDropHandling=!0,uh.prototype.eToolbarPartMaskVals={font:1,fontSize:2,fontStyle:4,script:8,bgColor:16,fontColor:32,orderedList:64,bulletList:128,align:256,blockQuote:512,codeBlock:1024,indent:2048,link:4096,image:8192,video:16384,clear:32768,print:65536},uh.eDataFormats={JSON:0,HTML:1,PLAINTEXT:2},uh.prototype.init_class_inst=function(){this.superclass=ctrl_base.prototype,this.superclass.init_class_inst.call(this),this.mFocusStyle=eBaseFocusStyle.eWithin,this.usesNotActiveOverlay=!0,this.mCanHaveDesignBorder=0!=jOmnis.mDesign,this.showDesignName=!0},uh.prototype.baseClassName="omnis-rich",uh.prototype.init_ctrl_inst=function(t,e,i,s){this.mHasDefaultDisableAppearanceProperty=!0,this.superclass.init_ctrl_inst.call(this,t,e,i,s);var r=this.getClientElem();jOmnis.addClass(r,"text-selectable"),r.style.whiteSpace="normal",jOmnis.mDesign&&(r.style.overflow="hidden"),this.plainName=r.getAttribute("data-pn"),this.plainNameIndex=-1,this.showControls="1"==r.getAttribute("data-sc"),this.contentTip=r.getAttribute("data-ctip"),this.fontName=this.superclass.getProperty.call(this,eBaseProperties.fontname),this.fontSize=this.superclass.getProperty.call(this,eBaseProperties.fontsize),this.textColor=this.superclass.getProperty.call(this,eBaseProperties.textcolor),this.dataFormat=+r.getAttribute("data-format"),this.removedToolbarItems=r.getAttribute("data-rtis"),this.removedToolbarItems=this.removedToolbarItems?+this.removedToolbarItems:0,this.clientElem.onfocus=this.mEventFunction,this.clientElem.onkeyup=this.mEventFunction;var n=this;return jOmnis.loadResources(["css/highlight-theme.css","scripts/highlight.pack.js","css/quill.snow.css","scripts/quill.js"],(function(){n.buildQuill(),n.bufferedPropertyChanges&&n.bufferedPropertyChanges.length>0&&n.applyBufferedPropChanges.call(n),n.update(),n.bufferedSizeChange&&n.sizeChanged()}),(function(t){jOmnis.handleError(new Error("Failed to load resource: "+t),n.form.inst)})),this.bufferedPropertyChanges=[],!1},uh.prototype.buildQuill=function(){if(!jOmnis.mDesign){this.containerElem=document.createElement("div"),this.clientElem.appendChild(this.containerElem),this.createToolbar();var t=Quill.import("parchment"),e=new t.Attributor.Style("font","font-family",{scope:t.Scope.INLINE});Quill.register(e,!0);var i=new t.Attributor.Style("size","font-size",{scope:t.Scope.INLINE});Quill.register(i,!0),this.quill=new Quill(this.containerElem,{bounds:this.form.serverElem,theme:"snow",modules:{syntax:!0,toolbar:this.toolbarElem,clipboard:{matchVisual:!1}},placeholder:this.contentTip}),this.setProperty(ah,this.showControls,!0),this.editorElem=this.clientElem.querySelector(".ql-editor"),this.editorElem.id=this.clientElem.id+"_textarea",this.editorElem.setAttribute("role","textbox"),this.editorElem.setAttribute("aria-multiline","true"),this.applyPadding(),this.enabledChanged();var s=this;this.quill.on("text-change",(function(t,e){s.updateDataVars()}))}},uh.prototype.destroyQuill=function(){null!=this.quill&&(this.quill=null,this.clientElem.removeChild(this.toolbarElem),this.clientElem.removeChild(this.containerElem))},uh.prototype.rebuildQuill=function(){if(!jOmnis.mDesign){var t=this.quill.getContents();this.destroyQuill(),this.buildQuill(),this.quill.setContents(t)}},uh.prototype.sizeChanged=function(){this.superclass.sizeChanged.call(this),this.quill?(this.bufferedSizeChange=!1,this.resizeEditor()):this.bufferedSizeChange=!0},uh.prototype.resizeEditor=function(){if(this.showControls&&this.toolbarElem){var t=this.toolbarElem.offsetHeight;this.containerElem.style.height=this.clientElem.clientHeight-t+"px"}else this.containerElem&&(this.containerElem.style.height="100%");this.disabledOverlay&&this.toolbarElem&&(this.disabledOverlay.style.height=this.toolbarElem.offsetHeight+"px")},uh.prototype.updateCtrl=function(){this.getTrueVisibility()?(this.lastData=this.getData(),this.quill&&this.insertData(this.lastData)):this.mNeedUpdate=!0},uh.prototype.insertData=function(t,e){switch(t=t||"",this.detectDataFormat(t)){case uh.eDataFormats.JSON:var i=uh.parseDeltaString(t);void 0!==e?(e>0&&i.ops.unshift({retain:e}),this.quill.updateContents(i)):this.quill.setContents(i);break;case uh.eDataFormats.HTML:this.setHTML(t,e);break;case uh.eDataFormats.PLAINTEXT:void 0!==e?this.quill.insertText(e,t):this.quill.setText(t)}this.setPlain()},uh.prototype.setHTML=function(t,e){if('<div class="omnisQuillDefaultFormat"'==t.substring(0,36)){var i=document.createElement("div");i.innerHTML=t,t=i.childNodes[0].innerHTML}void 0!==e?this.quill.clipboard.dangerouslyPasteHTML(e,t):this.quill.pasteHTML(t)},uh.prototype.getHTML=function(){var t=this.quill.root.innerHTML;return'<div class="omnisQuillDefaultFormat" '+this.defaultStyleString+">"+t+"</div>"},uh.prototype.updateDataVars=function(){switch(this.dataFormat){case uh.eDataFormats.JSON:var t=JSON.stringify(this.quill.getContents());break;case uh.eDataFormats.HTML:t=this.getHTML();break;case uh.eDataFormats.PLAINTEXT:t=this.quill.getText()}null!=this.lastData&&t==this.lastData||(this.lastData=t,this.setData(t,null,null,null,"s"),this.setPlain())},uh.prototype.handleEvent=function(t){switch(t.type){case"focus":return this.focus(t),!0;case"keyup":return jOmnis.stopEventNow(t),!0;default:return this.superclass.handleEvent.call(this,t)}},uh.prototype.getProperty=function(t){switch(t){case ah:return this.showControls;case lh:return this.plainName?this.plainName:"";case hh:return this.contentTip;case eBaseProperties.fontname:return this.fontName;case eBaseProperties.fontsize:return this.fontSize;case eBaseProperties.textcolor:return this.textColor;case ch:return this.dataFormat}return this.superclass.getProperty.call(this,t)},uh.prototype.getCanAssign=function(t){switch(t){case ah:case lh:case eBaseProperties.textcolor:case eBaseProperties.fontname:case eBaseProperties.fontsize:case hh:case ch:case eBaseProperties.horzPadding:case eBaseProperties.vertPadding:return!0}return this.superclass.getCanAssign.call(this,t)},uh.prototype.setProperty=function(t,e,i){if(jOmnis.mDesign)return this.superclass.setProperty.call(this,t,e);if(!(this.quill&&this.editorElem||this.mInLayout&&[eBaseProperties.top,eBaseProperties.left,eBaseProperties.width,eBaseProperties.height].includes(t)))return i&&this.bufferedPropertyChanges.find((function(e){return e.propNumber===t}))||this.bufferedPropertyChanges.push({propNumber:t,propValue:e}),!1;var s;switch(t){case ah:return this.showControls=!!e,this.toolbarElem.style.display=e?"block":"none",this.resizeEditor(),!0;case hh:return this.contentTip=e,!0;case ch:return this.dataFormat=e,this.updateDataVars(),!0;case eBaseProperties.backcolor:case eBaseProperties.backalpha:s=this.superclass.setProperty.call(this,t,e),jOmnis.mDesign||(this.editorElem.style.backgroundColor=this.getClientElem().style.backgroundColor);break;case lh:return this.plainName=e,this.plainNameIndex=-1,this.setPlain(this.lastData),!0;case eBaseProperties.textcolor:return this.textColor=1*e,this.form.inst.registerPropertyObject(this),!0;case eBaseProperties.fontname:return this.fontName=e,this.form.inst.registerPropertyObject(this),!0;case eBaseProperties.fontsize:return this.fontSize=1*e,this.form.inst.registerPropertyObject(this),!0;case eBaseProperties.borderradius:case eBaseProperties.linestyle:s=this.superclass.setProperty.call(this,t,e),this.updateToolbarBorderRadius();break;default:s=this.superclass.setProperty.call(this,t,e)}return s},uh.prototype.horzPaddingChanged=function(){this.applyPadding()},uh.prototype.vertPaddingChanged=function(){this.applyPadding()},uh.prototype.applyPadding=function(){this.editorElem&&(this.editorElem.style.padding="".concat(this.mVerticalPadding,"px ").concat(this.mHorizontalPadding,"px"))},uh.prototype.applyPropertyChanges=function(){this.rebuildQuill()},uh.prototype.focus=function(t){try{t&&t.relatedTarget&&t.relatedTarget.parentNode&&jOmnis.hasClass(t.relatedTarget.parentNode,"ql-tooltip")||this.quill.container.querySelector(".ql-editor").focus()}catch(t){}},uh.prototype.visibilityChanged=function(){this.superclass.visibilityChanged.call(this),this.getTrueVisibility(null)&&(this.mNeedUpdate&&(this.update(),this.mNeedUpdate=!1),this.resizeEditor())},uh.prototype.enabledChanged=function(){var t=this.isEnabled();jOmnis.mDesign||(this.quill.enable(t),this.clientElem.querySelector(".ql-clipboard").setAttribute("contenteditable",t),this.clientElem.setAttribute("aria-labelledby",t?"":this.editorElem.id),this.containerElem.setAttribute("aria-readonly",!t),this.removeAndRestoreToolbarTabIndex(t)),this.superclass.enabledChanged.call(this)},uh.prototype.removeAndRestoreToolbarTabIndex=function(t){if(t){if(this.savedElems){for(e=0;e<this.savedElems.length;e++)this.savedElems[e].tabIndex=this.savedElems[e].savedTabIndex;for(e=0;e<this.savedButtons.length;e++)this.savedButtons[e].disabled=!1}}else{this.savedElems=this.clientElem.querySelectorAll("[tabindex]");for(var e=0;e<this.savedElems.length;e++)this.savedElems[e].savedTabIndex=this.savedElems[e].tabIndex,this.savedElems[e].removeAttribute("tabIndex");for(this.savedButtons=this.clientElem.querySelectorAll("button"),e=0;e<this.savedButtons.length;e++)this.savedButtons[e].disabled=!0}},uh.prototype.translate=function(t,e,i){var s=this.form;if(s&&s.stringTable){var r={text:"$st.rt_"+t.toLowerCase()};if(s.stringTable.translateParam(r,"text")&&r.text.length>0&&0!=r.text.indexOf("st."))return i?r.text.replace(/ /g,"&nbsp;"):r.text}return e},uh.prototype.setPlain=function(){if((-1!=this.plainNameIndex||(this.plainName&&this.plainName.length&&(this.plainNameIndex=this.form.getDataIndex(this.plainName,this,!1)),-1!=this.plainNameIndex))&&this.dataName!=this.plainName){var t=this.quill.getText();this.form.setData(this.plainNameIndex,t)}},uh.prototype.getDragValue=function(){var t=this.quill.getSelection();return this.quill.getText(t.index,t.length)},uh.prototype.createToolbar=function(){this.toolbarElem=document.createElement("div"),this.toolbarElem.style.fontSize="13px",this.toolbarElem.addEventListener("mousedown",(function(t){t.preventDefault()})),this.toolbarElem.style.borderBottom=this.clientElem.style.border,this.updateToolbarBorderRadius();var t={},e="ql-formats";if(!(this.removedToolbarItems&this.eToolbarPartMaskVals.font&&this.removedToolbarItems&this.eToolbarPartMaskVals.fontSize)){var i=this.insertElem("span",this.toolbarElem,e);if(!(this.removedToolbarItems&this.eToolbarPartMaskVals.font)){var s=this.insertElem("select",i,"ql-font",this.translate("fontfamily","Font"));this.insertOption(s,"Verdana, Arial, Helvetica, sans-serif",this.translate("sansserif","Sans Serif")),this.insertOption(s,'"Times New Roman", Georgia, serif',this.translate("serif","Serif")),this.insertOption(s,'"Courier New", monospace',this.translate("monospace","Monospace"));for(var r=0;r<s.childNodes.length;r++){var n=s.childNodes[r];if(n.value==this.fontName){n.setAttribute("selected","true"),this.containerElem.style.fontFamily=t["font-family"]=n.value;break}}}if(!(this.removedToolbarItems&this.eToolbarPartMaskVals.fontSize))for(s=this.insertElem("select",i,"ql-size",this.translate("fontsize","Font Size")),this.insertOption(s,"9px",this.translate("sizesmall","Small")),this.insertOption(s,"13px",this.translate("sizemedium","Normal")),this.insertOption(s,"18px",this.translate("sizelarge","Large")),this.insertOption(s,"32px",this.translate("sizehuge","Huge")),r=0;r<s.childNodes.length;r++){n=s.childNodes[r];var o=parseInt(n.value);if(this.fontSize<=o||r==s.childNodes.length-1){n.setAttribute("selected","true"),this.containerElem.style.fontSize=t["font-size"]=n.value;break}}}if(!(this.removedToolbarItems&this.eToolbarPartMaskVals.fontStyle)){var l=this.insertElem("span",this.toolbarElem,e);this.insertElem("button",l,"ql-bold",this.translate("bold","Bold (Cmd/Ctrl + B)")),this.insertElem("button",l,"ql-italic",this.translate("italic","Italic (Cmd/Ctrl + I)")),this.insertElem("button",l,"ql-underline",this.translate("underline","Underline (Cmd/Ctrl + U)")),this.insertElem("button",l,"ql-strike",this.translate("strikethrough","Strikethrough"))}if(!(this.removedToolbarItems&this.eToolbarPartMaskVals.script)){var h=this.insertElem("span",this.toolbarElem,e);this.insertElem("button",h,"ql-script",this.translate("subscript","Subscript")).value="sub",this.insertElem("button",h,"ql-script",this.translate("superscript","Superscript")).value="super"}if(!(this.removedToolbarItems&this.eToolbarPartMaskVals.fontColor&&this.removedToolbarItems&this.eToolbarPartMaskVals.bgColor||this.removedToolbarItems&this.eToolbarPartMaskVals.fontColor)){var c=this.insertElem("span",this.toolbarElem,e),u=this.insertElem("select",c,"ql-color",this.translate("textcolor","Text Color"));this.insertOption(u,"rgb(0,0,0)"),this.insertOption(u,"rgb(230,0,0)"),this.insertOption(u,"rgb(255,153,0)"),this.insertOption(u,"rgb(255,255,0)"),this.insertOption(u,"rgb(0,138,0)"),this.insertOption(u,"rgb(0,102,204)"),this.insertOption(u,"rgb(153,51,255)"),this.insertOption(u,"rgb(255,255,255)"),this.insertOption(u,"rgb(250,204,204)"),this.insertOption(u,"rgb(255,235,204)"),this.insertOption(u,"rgb(255,255,204)"),this.insertOption(u,"rgb(204,232,204)"),this.insertOption(u,"rgb(204,224,245)"),this.insertOption(u,"rgb(235,214,255)"),this.insertOption(u,"rgb(187,187,187)"),this.insertOption(u,"rgb(240,102,102)"),this.insertOption(u,"rgb(255,194,102)"),this.insertOption(u,"rgb(255,255,102)"),this.insertOption(u,"rgb(102,185,102)"),this.insertOption(u,"rgb(102,163,224)"),this.insertOption(u,"rgb(194,133,255)"),this.insertOption(u,"rgb(136,136,136)"),this.insertOption(u,"rgb(161,0,0)"),this.insertOption(u,"rgb(178,107,0)"),this.insertOption(u,"rgb(178,178,0)"),this.insertOption(u,"rgb(0,97,0)"),this.insertOption(u,"rgb(0,71,178)"),this.insertOption(u,"rgb(107,36,178)"),this.insertOption(u,"rgb(68,68,68)"),this.insertOption(u,"rgb(92,0,0)"),this.insertOption(u,"rgb(102,61,0)"),this.insertOption(u,"rgb(102,102,0)"),this.insertOption(u,"rgb(0,55,0)"),this.insertOption(u,"rgb(0,41,102)"),this.insertOption(u,"rgb(61,20,102)");var d=this.getTheme(),p=this.getProperty(eBaseProperties.backcolor),m=d.getTextColorRGB(this.textColor,this.resolveDefaultColor(p,a.Mr.BACKGROUND),0);m=d.getColorString(m,0).replaceAll(" ","");var f=u.childNodes,g=!1;for(r=0;r<f.length;r++)if((n=f[r]).value==m){n.setAttribute("selected","true"),g=!0;break}g||this.insertOption(u,m).setAttribute("selected","true"),this.containerElem.style.color=t.color=m,this.removedToolbarItems&this.eToolbarPartMaskVals.bgColor||this.insertElem("select",c,"ql-background",this.translate("backgroundcolor","Background Color"))}if(!(this.removedToolbarItems&this.eToolbarPartMaskVals.align)){var v=this.insertElem("span",this.toolbarElem,e);this.insertElem("button",v,"ql-indent",this.translate("decrease_indent","Decrease Indent (Shift + Tab)")).value="-1",this.insertElem("button",v,"ql-indent",this.translate("increase_indent","Increase Indent (Tab)")).value="+1",this.insertElem("select",v,"ql-align",this.translate("textalign","Text Alignment"))}if(!(this.removedToolbarItems&this.eToolbarPartMaskVals.orderedList&&this.removedToolbarItems&this.eToolbarPartMaskVals.bulletList)){var b=this.insertElem("span",this.toolbarElem,e);this.removedToolbarItems&this.eToolbarPartMaskVals.orderedList||(this.insertElem("button",b,"ql-list",this.translate("insertorderedlist","Numbered List")).value="ordered"),this.removedToolbarItems&this.eToolbarPartMaskVals.bulletList||(this.insertElem("button",b,"ql-list",this.translate("insertunorderedlist","Bullet List")).value="bullet")}if(!(this.removedToolbarItems&this.eToolbarPartMaskVals.video&&this.removedToolbarItems&this.eToolbarPartMaskVals.link&&this.removedToolbarItems&this.eToolbarPartMaskVals.image)){var y=this.insertElem("span",this.toolbarElem,e);this.removedToolbarItems&this.eToolbarPartMaskVals.link||this.insertElem("button",y,"ql-link",this.translate("link","Link (Cmd/Ctrl + K)")),this.removedToolbarItems&this.eToolbarPartMaskVals.image||this.insertElem("button",y,"ql-image",this.translate("image","Image")),this.removedToolbarItems&this.eToolbarPartMaskVals.video||this.insertElem("button",y,"ql-video",this.translate("video","Video"))}if(!(this.removedToolbarItems&this.eToolbarPartMaskVals.blockQuote&&this.removedToolbarItems&this.eToolbarPartMaskVals.codeBlock)){var C=this.insertElem("span",this.toolbarElem,e);this.removedToolbarItems&this.eToolbarPartMaskVals.blockQuote||this.insertElem("button",C,"ql-blockquote",this.translate("blockquote","Block Quote")),this.removedToolbarItems&this.eToolbarPartMaskVals.codeBlock||this.insertElem("button",C,"ql-code-block",this.translate("codeblock","Code Block"))}if(!(this.removedToolbarItems&this.eToolbarPartMaskVals.clear)){var _=this.insertElem("span",this.toolbarElem,e);this.insertElem("button",_,"ql-clean",this.translate("clearformat","Clear Formatting"))}if(!(this.removedToolbarItems&this.eToolbarPartMaskVals.print)){var E=this.insertElem("span",this.toolbarElem,e),w=this.insertElem("button",E,"ctrl-rich-btn",this.translate("print","Print"));w.setAttribute("type","button"),w.innerHTML='<svg class="ctrl-rich-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M448 192V77.25c0-8.49-3.37-16.62-9.37-22.63L393.37 9.37c-6-6-14.14-9.37-22.63-9.37H96C78.33 0 64 14.33 64 32v160c-35.35 0-64 28.65-64 64v112c0 8.84 7.16 16 16 16h48v96c0 17.67 14.33 32 32 32h320c17.67 0 32-14.33 32-32v-96h48c8.84 0 16-7.16 16-16V256c0-35.35-28.65-64-64-64zm-64 256H128v-96h256v96zm0-224H128V64h192v48c0 8.84 7.16 16 16 16h48v96zm48 72c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"></path></svg>';var k=this;w.addEventListener("click",(function(){k.openPrintWindow()}))}for(var T in this.containerElem.parentNode.insertBefore(this.toolbarElem,this.containerElem),this.defaultStyleString='style="',t){var S=t[T];"string"==typeof S&&(S=S.replace(/"/g,"'")),this.defaultStyleString+=T+": "+S+"; "}this.defaultStyleString+='"'},uh.prototype.insertElem=function(t,e,i,s){var r=document.createElement(t);return r.className=i,s&&(r.title=s),e.appendChild(r),r},uh.prototype.insertOption=function(t,e,i){var s=document.createElement("option");return s.value=e,void 0!==i&&(s.textContent=i),t.appendChild(s),s},uh.prototype.$appenddata=function(t,e){this.insertData(t,this.quill.getLength()-(e?0:1))},uh.prototype.$prependdata=function(t,e){if(e)switch(this.detectDataFormat(t)){case uh.eDataFormats.HTML:t+="<p>&nbsp;</p><br>";break;case uh.eDataFormats.JSON:var i=uh.parseDeltaString(t);i.ops.push({insert:"\n"}),t=JSON.stringify(i);break;case uh.eDataFormats.PLAINTEXT:t+="\n"}this.insertData(t,0)},uh.prototype.$printcontents=function(t){this.openPrintWindow(t)},uh.parseDeltaString=function(t){var e=JSON.parse(t);if(!e.ops||!Array.isArray(e.ops))throw"Data is not a valid Quill Delta object";return e},uh.prototype.detectDataFormat=function(t){if(this.dataFormat!==uh.eDataFormats.JSON)return this.dataFormat===uh.eDataFormats.HTML?"<"===t.substr(0,1)?uh.eDataFormats.HTML:uh.eDataFormats.PLAINTEXT:this.dataFormat;try{return uh.parseDeltaString(t),uh.eDataFormats.JSON}catch(e){return"<"===t.substr(0,1)?uh.eDataFormats.HTML:uh.eDataFormats.PLAINTEXT}},uh.prototype.applyBufferedPropChanges=function(){var t=this;this.bufferedPropertyChanges.forEach((function(e){t.setProperty(e.propNumber,e.propValue)})),this.bufferedPropertyChanges=[]},uh.prototype.openPrintWindow=function(t){var e=window.open("","Print_Window");if(e){'<link rel="stylesheet" href="css/highlight-theme.css">','<link rel="stylesheet" href="css/user.css">',t=t?"<title>"+t+"</title>":"",e.document.write("<html><head>"+t+'<link rel="stylesheet" href="css/quill.snow.css"><link rel="stylesheet" href="css/highlight-theme.css"><link rel="stylesheet" href="css/user.css"></head><body class="'+this.clientElem.className+'">'),e.document.write('<div class="ql-container ql-snow" style="border:none"><div class="ql-editor" style="overflow-y: visible;">'+this.getHTML()+"</div></div>"),e.document.write("</body></html>"),e.document.close(),e.focus(),e.addEventListener("load",(function(){e.print()})),e.addEventListener("afterprint",(function(){e.close()}))}},uh.prototype.updateToolbarBorderRadius=function(){if(this.toolbarElem){var t=Math.max(0,this.getProperty(eBaseProperties.borderradius)-this.borderWidth);this.toolbarElem.style.borderRadius="".concat(t,"px ").concat(t,"px 0 0")}};var dh=uh;!function(t,e){var i=0,s=t.ui.mouse.prototype,r=s._mouseInit,n=s._mouseDown,o=s._mouseUp,a={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"};t.widget("ui.slider",t.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",isRTL:!1,range:!1,step:1,value:0,values:null},_create:function(){var e=this,i=this.options;if(this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+(i.isRTL?" ui-slider-rtl":"")+" ui-widget ui-widget-content ui-corner-all"),i.disabled&&this.element.addClass("ui-slider-disabled ui-disabled"),this.range=t([]),i.range&&(!0===i.range?(this.range=t("<div></div>"),i.values||(i.values=[this._valueMin(),this._valueMin()]),i.values.length&&2!==i.values.length&&(i.values=[i.values[0],i.values[0]])):this.range=t("<div></div>"),this.range.appendTo(this.element).addClass("ui-slider-range"),"min"!==i.range&&"max"!==i.range||this.range.addClass("ui-slider-range-"+i.range),this.range.addClass("ui-widget-header")),0===t(".ui-slider-handle",this.element).length&&t("<a href='#'></a>").appendTo(this.element).addClass("ui-slider-handle"),i.values&&i.values.length)for(;t(".ui-slider-handle",this.element).length<i.values.length;)t("<a href='#'></a>").appendTo(this.element).addClass("ui-slider-handle");this.handles=t(".ui-slider-handle",this.element).addClass("ui-state-default ui-corner-all"),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click((function(t){t.preventDefault()})).hover((function(){i.disabled||t(this).addClass("ui-state-hover")}),(function(){t(this).removeClass("ui-state-hover")})).focus((function(){i.disabled?t(this).blur():(t(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),t(this).addClass("ui-state-focus"))})).blur((function(){t(this).removeClass("ui-state-focus")})),this.handles.each((function(e){t(this).data("index.ui-slider-handle",e)})),this.handles.keydown((function(i){var s,r,n,o=!0,a=t(this).data("index.ui-slider-handle");if(!e.options.disabled){switch(i.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(o=!1,!e._keySliding&&(e._keySliding=!0,t(this).addClass("ui-state-active"),!1===e._start(i,a)))return}n=e.options.step,s=r=e.options.values&&e.options.values.length?e.values(a):e.value();var l=function(t,i){s!==t&&(r=e._trimAlignValue(s+i))};switch(i.keyCode){case t.ui.keyCode.HOME:r=e._valueMin();break;case t.ui.keyCode.END:r=e._valueMax();break;case t.ui.keyCode.PAGE_UP:r=e._trimAlignValue(s+(e._valueMax()-e._valueMin())/5);break;case t.ui.keyCode.PAGE_DOWN:r=e._trimAlignValue(s-(e._valueMax()-e._valueMin())/5);break;case t.ui.keyCode.UP:l(e._valueMax(),n);break;case t.ui.keyCode.RIGHT:l(e._valueMax(),e.options.isRTL?-n:n);break;case t.ui.keyCode.DOWN:l(e._valueMin(),-n);break;case t.ui.keyCode.LEFT:l(e._valueMin(),e.options.isRTL?n:-n)}return e._slide(i,a,r),o}})).keyup((function(i){var s=t(this).data("index.ui-slider-handle");e._keySliding&&(e._keySliding=!1,e._stop(i,s),e._change(i,s),t(this).removeClass("ui-state-active"))})),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},makeMouseEvent:function(e){try{var i=e.originalEvent.changedTouches[0];return t.extend(e,{type:a[e.type],which:1,pageX:i.pageX,pageY:i.pageY,screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY})}catch(t){return e}},_mouseInit:function(){var t=this;jOmnis.touchDevice&&t.element.bind("touchstart."+t.widgetName,(function(e){return t._mouseDown(t.makeMouseEvent(e))})),r.call(t)},_mouseDown:function(t){var e=this,i=n.call(e,t);e._onMoveDelegate=function(t){return e._mouseMove(e.makeMouseEvent(t))},e._onUpDelegate=function(t){return e._mouseUp(e.makeMouseEvent(t))};var s=jOmnis.touchDevice&&t.originalEvent.type.indexOf("touch")>-1;return e.element.bind((s?"touchmove.":"mousemove.")+e.widgetName,e._onMoveDelegate),e.element.bind((s?"touchend.":"mouseup.")+e.widgetName,e._onUpDelegate),i},_mouseUp:function(t){var e=this,i=jOmnis.touchDevice&&t.originalEvent.type.indexOf("touch")>-1;return e.element.unbind((i?"touchmove.":"mousemove.")+e.widgetName,e._onMoveDelegate),e.element.unbind((i?"touchend.":"mouseup.")+e.widgetName,e._onUpDelegate),o.call(e,t),i&&jOmnis.sendDOMEvent(document,"mouseup",!1),!0},_mouseCapture:function(e){var i,s,r,n,o,a,l,h,c=this.options;return!c.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},s=this._normValueFromMouse(i),r=this._valueMax()-this._valueMin()+1,o=this,this.handles.each((function(e){var i=Math.abs(s-o.values(e));r>i&&(r=i,n=t(this),a=e)})),!0===c.range&&this.values(1)===c.min&&(a+=1,n=t(this.handles[a])),!1!==this._start(e,a)&&(this._mouseSliding=!0,o._handleIndex=a,n.addClass("ui-state-active").focus(),l=n.offset(),h=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=h?{left:0,top:0}:{left:e.pageX-l.left-n.width()/2,top:e.pageY-l.top-n.height()/2-(parseInt(n.css("borderTopWidth"),10)||0)-(parseInt(n.css("borderBottomWidth"),10)||0)+(parseInt(n.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,a,s),this._animateOff=!0,!0))},_mouseStart:function(t){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,s,r,n;return"horizontal"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),(s=i/e)>1&&(s=1),s<0&&(s=0),"vertical"===this.orientation&&(s=1-s),this.options.isRTL&&(s=1-s),r=this._valueMax()-this._valueMin(),n=this._valueMin()+s*r,this._trimAlignValue(n)},_start:function(t,e){var i={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("start",t,i)},_slide:function(t,e,i){var s,r,n;this.options.values&&this.options.values.length?(s=this.values(e?0:1),2===this.options.values.length&&!0===this.options.range&&(0===e&&i>s||1===e&&i<s)&&(i=s),i!==this.values(e)&&((r=this.values())[e]=i,n=this._trigger("slide",t,{handle:this.handles[e],value:i,values:r}),s=this.values(e?0:1),!1!==n&&this.values(e,i,!0))):i!==this.value()&&!1!==(n=this._trigger("slide",t,{handle:this.handles[e],value:i}))&&this.value(i)},_stop:function(t,e){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("stop",t,i)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("change",t,i)}},value:function(t){return arguments.length&&(this.options.value=this._trimAlignValue(t),this._refreshValue(),this._change(null,0)),this._value()},values:function(e,i){var s,r,n;if(arguments.length>1&&(this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),this._change(null,e)),!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(e):this.value();for(s=this.options.values,r=arguments[0],n=0;n<s.length;n+=1)s[n]=this._trimAlignValue(r[n]),this._change(null,n);this._refreshValue()},_setOption:function(e,i){var s,r=0;switch(t.isArray(this.options.values)&&(r=this.options.values.length),t.Widget.prototype._setOption.apply(this,arguments),e){case"disabled":i?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.attr("disabled","disabled"),this.element.addClass("ui-disabled")):(this.handles.removeAttr("disabled"),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"isRTL":this.element.toggleClass("ui-slider-rtl",i),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),s=0;s<r;s+=1)this._change(null,s);this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,s;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);for(i=this.options.values.slice(),s=0;s<i.length;s+=1)i[s]=this._trimAlignValue(i[s]);return i},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,s=(t-this._valueMin())%e;return i=t-s,2*Math.abs(s)>=e&&(i+=s>0?e:-e),parseFloat(i.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var e,i,s,r,n,o=this.options.range,a=this.options,l=this,h=!this._animateOff&&a.animate,c={};this.options.values&&this.options.values.length?this.handles.each((function(s,r){e=(l.values(s)-l._valueMin())/(l._valueMax()-l._valueMin())*100,e=l.options.isRTL?100-e:e,c["horizontal"===l.orientation?"left":"bottom"]=e+"%",t(this).stop(1,1)[h?"animate":"css"](c,a.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===s&&l.range.stop(1,1)[h?"animate":"css"](l.options.isRTL?{right:100-e+"%"}:{left:e+"%"},a.animate),1===s&&l.range[h?"animate":"css"]({width:(l.options.isRTL?-1:1)*(e-i)+"%"},{queue:!1,duration:a.animate})):(0===s&&l.range.stop(1,1)[h?"animate":"css"](l.options.isRTL?{top:100-e+"%"}:{bottom:e+"%"},a.animate),1===s&&l.range[h?"animate":"css"]({height:(l.options.isRTL?-1:1)*(e-i)+"%"},{queue:!1,duration:a.animate}))),i=e})):(s=this.value(),r=this._valueMin(),n=this._valueMax(),e=n!==r?(s-r)/(n-r)*100:0,e=l.options.isRTL?100-e:e,c["horizontal"===l.orientation?"left":"bottom"]=e+"%",this.handle.stop(1,1)[h?"animate":"css"](c,a.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({width:(l.options.isRTL?100-e:e)+"%"},a.animate),"max"===o&&"horizontal"===this.orientation&&this.range[h?"animate":"css"]({width:(l.options.isRTL?e:100-e)+"%"},{queue:!1,duration:a.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({height:(l.options.isRTL?100-e:e)+"%"},a.animate),"max"===o&&"vertical"===this.orientation&&this.range[h?"animate":"css"]({height:(l.options.isRTL?e:100-e)+"%"},{queue:!1,duration:a.animate}))}}),t.extend(t.ui.slider,{version:"1.8.9"})}(jQuery);var ph="$::max",mh="$::min",fh="$val",gh="$step",vh="$::vertical",bh="$sliderhorziconid",yh="$sliderverticonid",Ch="$horzmargin",_h="$vertmargin",Eh={evStartSlider:5e3,evEndSlider:5001,evNewValue:5002},wh=0;function kh(){this.init_class_inst()}kh.prototype=new ctrl_base,kh.prototype.defaultAriaElem=!1,kh.prototype.init_class_inst=function(){this.superclass=ctrl_base.prototype,this.superclass.init_class_inst.call(this),this.min=0,this.max=100,this.step=1,this.value=0,this.vertical=!1,this.sliderSelector=null,this.vertMarg=10,this.horzMarg=10,this.horzIcon=null,this.vertIcon=null,this.eventCount=0,this.mCustomEvents=Eh,this.mFocusStyle=eBaseFocusStyle.eWithin,this.activeReplacesEnabled=!0},kh.prototype.baseClassName="omnis-slider",kh.prototype.init_ctrl_inst=function(t,e,i,s){this.superclass.init_ctrl_inst.call(this,t,e,i,s);var r=this.getClientElem();return this.min=parseInt(r.getAttribute("data-min")),this.max=parseInt(r.getAttribute("data-max")),this.step=parseInt(r.getAttribute("data-step")),this.value=parseInt(r.getAttribute("data-value")),this.vertical=parseInt(r.getAttribute("data-vertical")),this.horzIcon=this.setupIcon(r.getAttribute("data-horzicon")),this.vertIcon=this.setupIcon(r.getAttribute("data-verticon")),this.horzMarg=r.getAttribute("data-horzmargin"),this.vertMarg=r.getAttribute("data-vertmargin"),this.useScroll=jOmnis.mobileDevice&&!jOmnis.touchDevice,this.useScroll&&(this.createElements(),this.activeChanged()),this.update(),!1},kh.prototype.delete_class_inst=function(){null!=this.sliderSelector&&($(this.sliderSelector).slider("destroy"),this.sliderSelector=null),this.superclass.delete_class_inst.call(this)},kh.prototype.updateCtrl=function(){var t=this.getClientElem();if("hidden"!=t.style.visibility&&!this.useScroll){null!=this.sliderSelector&&$(this.sliderSelector)[0]&&$(this.sliderSelector)[0].firstChild&&($(this.sliderSelector).slider("destroy"),this.sliderSelector=null);var e="slider_"+t.id+"_"+wh++;t.innerHTML='<div id="'+e+'"></div>',this.sliderSelector="#"+e;var i={};i.max=this.max,i.min=this.min,i.orientation=this.vertical?"vertical":"horizontal",this.vertical&&(i.isRTL=!0),i.step=this.step,i.value=this.value,null==this.sliderEventHandler&&(this.sliderEventHandler=this.makeFunction("handleSliderEvent",2)),i.start=this.sliderEventHandler,i.stop=this.sliderEventHandler,i.slide=this.sliderEventHandler,$(this.sliderSelector).slider(i);var s,r,n=t.childNodes[0],o=jOmnis.getOmnisWidth(t,!0),a=jOmnis.getOmnisHeight(t,!0);if(n.style.position="absolute",this.vertical)s=4+jOmnis.parseInteger($(this.sliderSelector).css("border-left-width"))+jOmnis.parseInteger($(this.sliderSelector).css("border-right-width"))+jOmnis.parseInteger($(this.sliderSelector).css("padding-left"))+jOmnis.parseInteger($(this.sliderSelector).css("padding-right")),jOmnis.setOmnisLeft(n,(o-s)/2),jOmnis.setOmnisTop(n,this.vertMarg),jOmnis.setOmnisWidth(n,s),jOmnis.setOmnisHeight(n,a-2*this.vertMarg);else r=4+jOmnis.parseInteger($(this.sliderSelector).css("border-top-width"))+jOmnis.parseInteger($(this.sliderSelector).css("border-bottom-width"))+jOmnis.parseInteger($(this.sliderSelector).css("padding-top"))+jOmnis.parseInteger($(this.sliderSelector).css("padding-bottom")),jOmnis.setOmnisLeft(n,this.horzMarg),jOmnis.setOmnisTop(n,(a-r)/2),jOmnis.setOmnisWidth(n,o-2*this.horzMarg),jOmnis.setOmnisHeight(n,r);var l=$(this.sliderSelector).children(".ui-slider-handle");this.setAriaElement(l[0]);var h=this.vertical?this.vertIcon:this.horzIcon,c=jIcons.getIconSize(h),u=c.width,d=c.height;if(u?(l.css("background-color","transparent"),l.css("background-image","url('"+h+"')"),l.css("background-size",u+"px "+d+"px"),l.css("width",u),l.css("height",d),l.css("z-index","auto")):(u=jOmnis.parseInteger(l.css("width")),d=jOmnis.parseInteger(l.css("height"))),this.vertical?l.css("margin-bottom",-d/2+"px"):l.css("margin-left",-u/2+"px"),this.vertical?l.css("left",(s-u)/2-1):l.css("top",(r-d)/2-1),this.vertical){var p=$._data(l[0],"events").keydown[0].handler;l.unbind("keydown"),l.bind("keydown",(function(t){switch(t.keyCode){case $.ui.keyCode.LEFT:case $.ui.keyCode.UP:t.keyCode=$.ui.keyCode.DOWN;break;case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:t.keyCode=$.ui.keyCode.UP;break;case $.ui.keyCode.PAGE_DOWN:t.keyCode=$.ui.keyCode.PAGE_UP;break;case $.ui.keyCode.PAGE_UP:t.keyCode=$.ui.keyCode.PAGE_DOWN}p(t)}))}this.elem.disabled&&$(this.sliderSelector).slider("disable"),l.attr("role","slider"),l.attr("aria-valuemin",this.min),l.attr("aria-valuemax",this.max),l.attr("aria-valuenow",this.value),this.vertical?l.attr("aria-orientation","vertical"):l.removeAttr("aria-orientation"),this.queuedTabIndex&&(this.setTabIndex(this.queuedTabIndex),this.queuedTabIndex=null)}},kh.prototype.getProperty=function(t){switch(t){case ph:return this.max;case mh:return this.min;case fh:return this.value;case gh:return this.step;case vh:return!!this.vertical;case bh:return this.horzIcon;case yh:return this.vertIcon;case Ch:return this.horzMarg;case _h:return this.vertMarg}return this.superclass.getProperty.call(this,t)},kh.prototype.getCanAssign=function(t){switch(t){case ph:case mh:case fh:case gh:case vh:case bh:case yh:case Ch:case _h:return!0}return this.superclass.getCanAssign.call(this,t)},kh.prototype.setProperty=function(t,e){var i=!0;switch(t){case ph:return this.max=e,this.useScroll?this.valueToPos():$(this.sliderSelector).slider("option","max",e),void $(this.sliderSelector).children(".ui-slider-handle").attr("aria-valuemax",e);case mh:return this.min=e,this.useScroll?this.valueToPos():$(this.sliderSelector).slider("option","min",e),void $(this.sliderSelector).children(".ui-slider-handle").attr("aria-valuemin",e);case fh:return this.value=e,this.useScroll?this.valueToPos():$(this.sliderSelector).slider("option","value",e),void $(this.sliderSelector).children(".ui-slider-handle").attr("aria-valuenow",e);case gh:return this.step=e,void(this.useScroll?this.valueToPos():$(this.sliderSelector).slider("option","step",e));case vh:this.vertical=e;break;case bh:if(e==this.horzIcon)return;this.horzIcon=e;break;case yh:if(e==this.vertIcon)return;this.vertIcon=e;break;case Ch:this.horzMarg=e;break;case _h:this.vertMarg=e;break;default:i=!1}return i?(this.form.inst.registerPropertyObject(this),!0):this.superclass.setProperty.call(this,t,e)},kh.prototype.applyPropertyChanges=function(){this.getTrueVisibility()&&this.sizeChanged()},kh.prototype.visibilityChanged=function(){var t=this.superclass.visibilityChanged.call(this);return this.getTrueVisibility()&&this.sizeChanged(),t},kh.prototype.sizeChanged=function(){this.superclass.sizeChanged.call(this),this.zIndex||(this.zIndex=this.elem.style.zIndex),this.useScroll?this.layoutElements():this.update()},kh.prototype.activeChanged=function(){this.setTabIndex(this.elem.disabled?-1:0),this.useScroll?this.elem.disabled?(this.sliderScrollBar.style.overflowX="hidden",this.sliderScrollBar.style.overflowY="hidden"):this.vertical?(this.sliderScrollBar.style.overflowX="hidden",this.sliderScrollBar.style.overflowY="scroll"):(this.sliderScrollBar.style.overflowX="scroll",this.sliderScrollBar.style.overflowY="hidden"):this.elem.disabled?$(this.sliderSelector).slider("disable"):$(this.sliderSelector).slider("enable"),this.superclass.activeChanged.call(this)},kh.prototype.sendEvent=function(t){this.elem.style.zIndex=2e4,this.eventCount++,this.superclass.sendEvent.call(this,t)},kh.prototype.handleEventResult=function(t,e){this.superclass.handleEventResult.call(this,t,e),this.eventCount--,this.eventCount<=0&&(this.eventCount=0,this.elem.style.zIndex=this.zIndex),"evNewValue"===t&&(this.newValueSending=!1)},kh.prototype.handleEvent=function(t){switch(t.type){case"mousedown":if(!this.useScroll)return;if(this.elem.disabled)break;this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.canSendEvent(Eh.evStartSlider)&&(this.eventParamsAdd("pSliderValue",this.value.toString()),this.sendEvent("evStartSlider"));var e=this.getEventMousePosition(t),i=0,s=0;this.vertical?(i=e.y-this.scrollBarPos.y,(s=this.sliderScrollBar.clientHeight-i-this.handleHeight/2)>this.sliderBar.clientHeight?s=this.sliderBar.clientHeight:s<0&&(s=0)):(i=e.x-this.scrollBarPos.x,(s=this.sliderScrollBar.clientWidth-i-this.handleWidth/2)>this.sliderBar.clientWidth?s=this.sliderBar.clientWidth:s<0&&(s=0)),this.processingMouseDown=!0,this.posToValue(s,!0);var r=this;setTimeout((function(){r.processingMouseDown=!1}),0);break;case"scroll":if(this.elem.disabled)break;this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.processingMouseDown||this.processingScroll||(this.scrollTimer(!1),this.timeout=setTimeout(this.makeFunction("scrollTimer"),250));break;default:return this.superclass.handleEvent.call(this,t)}return!0},kh.prototype.handleSliderEvent=function(t,e){var i,s;switch(t.type){case"slidestart":i=Eh.evStartSlider,s="evStartSlider";break;case"slidestop":i=Eh.evEndSlider;break;case"slide":i=Eh.evNewValue}if(i&&(this.value=e.value,$(this.sliderSelector).children(".ui-slider-handle").attr("aria-valuenow",this.value),this.canSendEvent(i)))switch(i){case Eh.evNewValue:this.sendNewValue();break;case Eh.evEndSlider:this.sendSliderEnd();break;default:this.eventParamsAdd("pSliderValue",this.value.toString()),this.sendEvent(s)}return!0},kh.prototype.sendNewValue=function(){if(this.canSendEvent(Eh.evNewValue)){if(this.newValueInterval)return;var t=this;this.newValueInterval=setInterval((function(){t.newValueSending||(clearInterval(t.newValueInterval),t.newValueInterval=null,t.newValueSending=!0,t.eventParamsAdd("pSliderValue",t.value.toString()),t.sendEvent("evNewValue"))}),50)}},kh.prototype.sendSliderEnd=function(){this.canSendEvent(Eh.evEndSlider)&&(this.newValueInterval?setTimeout(this.sendSliderEnd.bind(this),50):(this.eventParamsAdd("pSliderValue",this.value.toString()),this.sendEvent("evEndSlider")))},kh.prototype.createElements=function(){this.sliderBar=document.createElement("DIV"),this.sliderScrollBar=document.createElement("DIV"),this.sliderScrollArea=document.createElement("DIV"),this.sliderHandle=document.createElement("DIV"),this.sliderBar.style.position="absolute",this.sliderScrollBar.style.position="absolute",this.sliderScrollBar.hideFocus="true",this.sliderScrollArea.style.position="absolute",this.sliderScrollArea.style.background="transparent",this.sliderHandle.style.position="absolute",this.sliderHandle.style.overflow="visible",this.sliderScrollArea.appendChild(this.sliderHandle),this.sliderScrollArea.style.outline="none",this.sliderScrollArea.className="noFocus",this.sliderScrollArea.hideFocus="true",this.sliderScrollBar.appendChild(this.sliderScrollArea),this.sliderScrollBar.style.background="transparent",this.sliderBar.style.background="rgb(255,255,255)";var t=this.getClientElem();t.appendChild(this.sliderBar),t.appendChild(this.sliderScrollBar);var e=this.mEventFunction;this.sliderScrollBar.onscroll=e,this.sliderScrollBar.onmousedown=e,this.sliderScrollArea.style.visibility="hidden",this.sliderHandle.style.visibility="visible"},kh.prototype.layoutElements=function(){var t,e,i=this.getClientElem(),s=jOmnis.getOmnisWidth(i,!0),r=jOmnis.getOmnisHeight(i,!0);this.sliderBar.style.borderWidth="1px",this.sliderBar.style.borderStyle="solid",this.sliderBar.style.borderColor="rgb(221,221,221)",this.vertical?(e=6,t=r-2*this.vertMarg,jOmnis.setOmnisLeft(this.sliderBar,(s-e)/2)):(t=6,e=s-2*this.horzMarg,jOmnis.setOmnisLeft(this.sliderBar,this.horzMarg)),jOmnis.setOmnisTop(this.sliderBar,(r-t)/2),jOmnis.setOmnisWidth(this.sliderBar,e),jOmnis.setOmnisHeight(this.sliderBar,t);var n,o=this.vertical?this.vertIcon:this.horzIcon;if(o){var a=jIcons.getIconSize(o);this.handleWidth=a.width,this.handleHeight=a.height}else o="images/sliderHandle.png",this.handleWidth=16,this.handleHeight=16;this.sliderHandle.style.background="url('"+o+"') no-repeat",this.sliderHandle.style.backgroundSize=this.handleWidth+"px "+this.handleHeight+"px",this.sliderHandle.style.width=this.handleWidth+"px",this.sliderHandle.style.height=this.handleHeight+"px",this.vertical?(n=t+this.handleHeight,jOmnis.setOmnisTop(this.sliderScrollBar,this.vertMarg-this.handleHeight/2),jOmnis.setOmnisHeight(this.sliderScrollBar,n),jOmnis.setOmnisHeight(this.sliderScrollArea,2*t+this.handleHeight),this.sliderScrollBar.style.width=this.handleWidth+"px",this.sliderScrollBar.style.left=(s-this.handleWidth)/2+"px",this.sliderHandle.style.top=n-this.handleHeight+"px",this.sliderScrollArea.style.width="100%"):(n=e+this.handleWidth,jOmnis.setOmnisLeft(this.sliderScrollBar,this.horzMarg-this.handleWidth/2),jOmnis.setOmnisWidth(this.sliderScrollBar,n),jOmnis.setOmnisWidth(this.sliderScrollArea,2*e+this.handleWidth),this.sliderScrollBar.style.height=this.handleHeight+"px",this.sliderScrollBar.style.top=(r-this.handleHeight)/2+"px",this.sliderHandle.style.left=n-this.handleWidth+"px",this.sliderScrollArea.style.height="100%"),this.scrollBarPos=jOmnis.getElemPosRelativeToAncestor(this.sliderScrollBar),this.valueToPos()},kh.prototype.getEventMousePosition=function(t){var e=0,i=0;return t&&(t.pageX||t.pageY?(e=t.pageX,i=t.pageY):(t.clientX||t.clientY)&&(e=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,i=t.clientY+document.body.scrollTop+document.documentElement.scrollTop)),{x:e,y:i}},kh.prototype.posToValue=function(t,e){var i=0,s=0;this.vertical?(i=this.sliderBar.clientHeight-t,s=this.sliderBar.clientHeight/((this.max-this.min)/this.step)):(i=this.sliderBar.clientWidth-t,s=this.sliderBar.clientWidth/((this.max-this.min)/this.step));var r=Math.round(i/s),n=this.value;if(this.value=this.min+r*this.step,this.value>this.max?this.value=this.max:this.value<this.min&&(this.value=this.min),e){var o=this;this.processingScroll=!0,this.vertical?this.sliderScrollBar.scrollTop=this.sliderBar.clientHeight-r*s:this.sliderScrollBar.scrollLeft=this.sliderBar.clientWidth-r*s,setTimeout((function(){o.processingScroll=!1}),0),this.sendSliderEnd(),this.startedScroll=!1}else n!=this.value&&this.sendNewValue()},kh.prototype.valueToPos=function(){this.processingScroll=!0,this.value<this.min?this.value=this.min:this.value>this.max&&(this.value=this.max);var t=Math.round((this.value-this.min)/this.step);if(this.vertical){var e=this.sliderBar.clientHeight/((this.max-this.min)/this.step);this.sliderScrollBar.scrollTop=this.sliderBar.clientHeight-t*e}else e=this.sliderBar.clientWidth/((this.max-this.min)/this.step),this.sliderScrollBar.scrollLeft=this.sliderBar.clientWidth-t*e;var i=this;setTimeout((function(){i.processingScroll=!1}),0)},kh.prototype.scrollTimer=function(t){null==t&&(t=!0),this.startedScroll||(this.startedScroll=!0,this.canSendEvent(Eh.evStartSlider)&&(this.eventParamsAdd("pSliderValue",this.value.toString()),this.sendEvent("evStartSlider"))),this.vertical?this.posToValue(this.sliderScrollBar.scrollTop,t):this.posToValue(this.sliderScrollBar.scrollLeft,t)},kh.prototype.setTabIndex=function(t){if(this.sliderSelector){var e=this.getClientElem().childNodes[0];e.firstChild.tabIndex=-1==t||this.elem.disabled?-1:0,e.tabIndex=-1}else this.queuedTabIndex=t},kh.prototype.getLabelForElem=function(t){var e=this.getClientElem().id+"_label";return t.querySelector("label").id=e,$(this.sliderSelector).children(".ui-slider-handle").attr("aria-labelledby",e),!1},kh.prototype.getAriaDisabledElem=function(){return null};var Th=kh;i(489),i(2419),i(4819);function Sh(t){return Sh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sh(t)}function xh(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function Dh(t,e,i){return Dh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var s=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Lh(t)););return t}(t,e);if(s){var r=Object.getOwnPropertyDescriptor(s,e);return r.get?r.get.call(i):r.value}},Dh(t,e,i||t)}function Oh(t,e){return Oh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Oh(t,e)}function Ah(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,s=Lh(t);if(e){var r=Lh(this).constructor;i=Reflect.construct(s,arguments,r)}else i=s.apply(this,arguments);return Ph(this,i)}}function Ph(t,e){return!e||"object"!==Sh(e)&&"function"!=typeof e?Ih(t):e}function Ih(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Lh(t){return Lh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Lh(t)}function jh(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var Nh=0;function Bh(t){return"__private_"+Nh+++"_"+t}function Rh(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function Mh(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Rh(Object(i),!0).forEach((function(e){Fh(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Rh(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Fh(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Hh={hotBackColor:"$hotbackcolor",activeBackColor:"$activebackcolor",menuName:"$::menuname",arrowSide:"$arrowside",textBeforeIcon:"$textbeforeicon",vertical:"$::vertical",menuBackColor:"$menubackcolor",menuHotBackColor:"$menuhotbackcolor",menuTextColor:"$menutextcolor",menuHotTextColor:"$menuhottextcolor",menuDisabledTextColor:"$menudisabledtextcolor",buttonBorderRadius:"$buttonborderradius",borderWidth:"$borderwidth"},zh="ctrl-sb-btn",Wh="ctrl-sb-mainbtn",$h="ctrl-sb-dropdownbtn",Uh="ctrl-sb-right",Vh="ctrl-sb-left",qh="ctrl-sb-top",Kh="ctrl-sb-bottom",Gh="ctrl-sb-text",Yh="ctrl-sb-icon",Xh="omnis-prevent-shadow",Jh=0,Qh=1,Zh=2,tc=3,ec=Mh(Mh({},a.Mr),{},{MENU_BACKGROUND:"MENU_BACKGROUND"}),ic=Bh("setTextAndIconPosition"),sc=Bh("resolveBackgroundColor"),rc=Bh("addRippleToElem"),nc=Bh("getDirectRippleColor"),oc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Oh(t,e)}(n,t);var e,i,s,r=Ah(n);function n(){var t,e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),e=r.call(this),Object.defineProperty(Ih(e),nc,{value:cc}),Object.defineProperty(Ih(e),rc,{value:hc}),Object.defineProperty(Ih(e),sc,{value:lc}),Object.defineProperty(Ih(e),ic,{value:ac}),e.baseClassName="omnis-splitbutton",e.activeReplacesEnabled=!0,e.usesNotActiveOverlay=!0,e.defaultAriaElem=!1,e.DefaultColors=Mh(Mh({},a.U2.prototype.DefaultColors),{},(Fh(t={},ec.BACKGROUND,o.l1.primary),Fh(t,ec.MENU_BACKGROUND,o.l1.background),t)),e.init_class_inst(),e}return e=n,i=[{key:"init_class_inst",value:function(){Dh(Lh(n.prototype),"init_class_inst",this).call(this),this.mFocusStyle=eBaseFocusStyle.eCustom}},{key:"delete_class_inst",value:function(){this.styleSheet&&jOmnis.removeStyleSheet(this.styleSheet),this.menuStyleSheet&&jOmnis.removeStyleSheet(this.menuStyleSheet),Dh(Lh(n.prototype),"delete_class_inst",this).call(this)}},{key:"init_ctrl_inst",value:function(t,e,i,s){Dh(Lh(n.prototype),"init_ctrl_inst",this).call(this,t,e,i,s);var r=this.clientElem;return this.hotBackColor=+r.getAttribute("data-hotbackcolor"),this.menuName=r.getAttribute("data-menuname")||null,this.text=r.getAttribute("data-text")||null,this.arrowSide=+r.getAttribute("data-arrowside"),this.textBeforeIcon="1"===r.getAttribute("data-textbeforeicon"),this.vertical="1"===r.getAttribute("data-vert"),this.iconId=r.getAttribute("data-icon"),this.buttonBorderRadius=+r.getAttribute("data-btnborderradius"),this.borderWidth=+r.getAttribute("data-borderwidth"),this.menuBackColor=+r.getAttribute("data-menubackcolor"),this.menuHotBackColor=+r.getAttribute("data-menuhotbackcolor"),this.menuTextColor=+r.getAttribute("data-menutextcolor"),this.menuHotTextColor=+r.getAttribute("data-menuhottextcolor"),this.menuDisabledTextColor=+r.getAttribute("data-menudisabledtextcolor"),this.borderColor=+r.getAttribute("data-bordercolor"),this.buildHtml(),this.buildCSSStyles(),this.mFocusBorderElem&&this.setBorderRadius(this.mFocusBorderElem,this.buttonBorderRadius),this.elem.addEventListener("focusin",this.mEventFunction),this.elem.addEventListener("focusout",this.mEventFunction),!1}},{key:"handleEvent",value:function(t){var e;switch(t.type){case"keydown":if("ArrowDown"===(e=OmnisKeyboardHandler.getNormalizedEventKey(t))&&t.altKey)return this.loadMenu(),!0;"Enter"===e?(this.canSendEvent(eBaseEvent.evClick)&&this.sendEvent(eBaseEvent.evClick),this.fromKeyPress=!0):" "===e&&(t.preventDefault(),this.fromKeyPress=!0);break;case"keyup":" "===(e=OmnisKeyboardHandler.getNormalizedEventKey(t))&&this.canSendEvent(eBaseEvent.evClick)&&this.sendEvent(eBaseEvent.evClick);break;case"click":if(this.fromKeyPress?(jOmnis.removeClass(this.clientElem,Xh),this.fromKeyPress=!1):jOmnis.addClass(this.clientElem,Xh),t.target===this.dropdownBtnElem||t.target.parentElement===this.dropdownBtnElem)return this.loadMenu(),!0;break;case"blur":jOmnis.removeClass(this.clientElem,Xh);break;case"omnis-menuopen":return this.dropdownBtnElem.setAttribute("aria-expanded","true"),this.dropdownBtnElem.setAttribute("aria-owns",jOmnisMenuHandler.curMenu.elem.id),!0;case"omnis-menuclosed":this.dropdownBtnElem.setAttribute("aria-expanded","false"),this.dropdownBtnElem.removeAttribute("aria-owns")}return Dh(Lh(n.prototype),"handleEvent",this).call(this,t)}},{key:"getProperty",value:function(t){switch(t){case Hh.hotBackColor:return this.hotBackColor;case Hh.activeBackColor:return-1;case Hh.menuname:return this.menuName;case eBaseProperties.text:return this.text;case Hh.arrowSide:return this.arrowSide;case Hh.textBeforeIcon:return this.textBeforeIcon;case Hh.vertical:return this.vertical;case eBaseProperties.iconid:return this.iconId;case Hh.menuBackColor:return this.menuBackColor;case Hh.menuHotBackColor:return this.menuHotBackColor;case Hh.menuTextColor:return this.menuTextColor;case Hh.menuHotTextColor:return this.menuHotTextColor;case Hh.menuDisabledTextColor:return this.menuDisabledTextColor;case Hh.buttonBorderRadius:return this.buttonBorderRadius;case Hh.borderWidth:return this.borderWidth;case eBaseProperties.borderColor:return this.borderColor;default:return Dh(Lh(n.prototype),"getProperty",this).call(this,t)}}},{key:"getCanAssign",value:function(t){switch(t){case Hh.hotBackColor:case Hh.activeBackColor:case Hh.menuName:case eBaseProperties.text:case Hh.arrowSide:case Hh.textBeforeIcon:case Hh.vertical:case eBaseProperties.iconid:case Hh.menuBackColor:case Hh.menuHotBackColor:case Hh.menuTextColor:case Hh.menuHotTextColor:case Hh.menuDisabledTextColor:case Hh.buttonBorderRadius:case Hh.borderWidth:case eBaseProperties.bordercolor:case eBaseProperties.horzPadding:return!0;default:return Dh(Lh(n.prototype),"getCanAssign",this).call(this,t)}}},{key:"setProperty",value:function(t,e){if(!this.getCanAssign(t))return!1;switch(t){case Hh.hotBackColor:return this.hotBackColor=+e,this.buildCSSStyles(),jOmnisEffects.setRippleColor(this.clientElem,this.getTheme(),this.hotBackColor,jh(this,nc)[nc]()),!0;case Hh.activeBackColor:return!0;case Hh.menuName:return this.menuName=e,!0;case eBaseProperties.text:return this.text=e,this.updateMainBtnContent(this.mainBtnElem),!0;case Hh.arrowSide:return this.arrowSide=e,this.updateArrowSideCssClass(this.arrowSide),!0;case Hh.textBeforeIcon:return this.textBeforeIcon=!!e,jh(this,ic)[ic](this.mainBtnElem),!0;case Hh.vertical:return this.vertical=!!e,jh(this,ic)[ic](this.mainBtnElem),!0;case eBaseProperties.iconid:return this.iconId=e,this.updateMainBtnContent(this.mainBtnElem),!0;case Hh.menuBackColor:return this.menuBackColor=+e,!0;case Hh.menuHotBackColor:return this.menuHotBackColor=+e,!0;case Hh.menuTextColor:return this.menuTextColor=+e,!0;case Hh.menuHotTextColor:return this.menuHotTextColor=+e,!0;case Hh.menuDisabledTextColor:return this.menuDisabledTextColor=+e,!0;case Hh.buttonBorderRadius:return+e>=0&&(this.buttonBorderRadius=+e,this.mFocusBorderElem&&this.setBorderRadius(this.mFocusBorderElem,this.buttonBorderRadius),this.buildCSSStyles()),!0;case Hh.borderWidth:return+e>=0&&+e<=7&&(this.borderWidth=+e,this.buildCSSStyles()),!0;case eBaseProperties.bordercolor:return this.borderColor=+e,this.buildCSSStyles(),!0;case eBaseProperties.backcolor:case eBaseProperties.textcolor:var i=Dh(Lh(n.prototype),"setProperty",this).call(this,t,e);return this.updateMainBtnContent(this.mainBtnElem),this.buildCSSStyles(),i;case eBaseProperties.align:return Dh(Lh(n.prototype),"setProperty",this).call(this,t,e),jh(this,ic)[ic](this.mainBtnElem),!0;default:return Dh(Lh(n.prototype),"setProperty",this).call(this,t,e)}}},{key:"setTabIndex",value:function(){this.mainBtnElem.tabIndex=this.isActive()?0:-1}},{key:"focus",value:function(){this.mainBtnElem.focus()}},{key:"disableSystemFocusChanged",value:function(){var t=this.mDisableSystemFocus,e=[this.mainBtnElem,this.dropdownBtnElem];this.setFocusBorderElem(),this.mFocusBorderElem&&this.setBorderRadius(this.mFocusBorderElem,this.buttonBorderRadius),e.forEach((function(e){e.classList.remove(t?"autoFocus":"noFocus"),e.classList.add(t?"noFocus":"autoFocus")}))}},{key:"activeChanged",value:function(){var t=this.isActive();t?this.mainBtnElem.removeAttribute("aria-disabled"):this.mainBtnElem.setAttribute("aria-disabled","true"),this.dropdownBtnElem.disabled=!t,Dh(Lh(n.prototype),"activeChanged",this).call(this)}},{key:"buildHtml",value:function(){this.clientElem.tabIndex=-1,this.mainBtnElem=this.buildMainBtn(),this.dropdownBtnElem=this.buildDropdownBtn(),this.updateArrowSideCssClass(this.arrowSide)}},{key:"buildMainBtn",value:function(){var t=document.createElement("div");return t.className=zh+" "+Wh,t.classList.add(this.mDisableSystemFocus?"noFocus":"autoFocus"),t.setAttribute("role","button"),t.setAttribute("aria-haspopup","true"),this.updateMainBtnContent(t),jh(this,ic)[ic](t),t.onclick=this.mEventFunction,t.onkeydown=this.mEventFunction,t.onkeyup=this.mEventFunction,t.onblur=this.mEventFunction,this.clientElem.appendChild(t),this.setAriaElement(t),this.isActive()||t.setAttribute("aria-disabled","true"),jh(this,rc)[rc](t),t}},{key:"buildDropdownBtn",value:function(){var t=document.createElement("button");return t.setAttribute("type","button"),t.className=zh+" "+$h,t.classList.add(this.mDisableSystemFocus?"noFocus":"autoFocus"),t.setAttribute("aria-haspopup","true"),t.setAttribute("aria-expanded","false"),t.setAttribute("aria-label",jGetOmnisString(this.form.inst,"ctl_splitbutton_openmenu")),t.tabIndex=-1,t.onclick=this.mEventFunction,t.disabled=!this.isActive(),jh(this,rc)[rc](t),this.clientElem.appendChild(t),t}},{key:"updateMainBtnContent",value:function(t){if(t.innerHTML="",this.iconId){var e=jIcons.replaceOrAddToElem(t,this.iconId);e&&e.classList.add(Yh)}if(this.text){var i=document.createElement("div");i.className=Gh,i.innerHTML=jOmnis.escapeHTML(this.text),t.appendChild(i)}}},{key:"loadMenu",value:function(){var t=jOmnisMenuHandler.getMenuData(this.form.ident,this.menuName,!1);if(t){var e=n.getMenuPosition(this.arrowSide,this.clientElem);jOmnisMenuHandler.handleContextMenuOpen({posX:e.x+2,posY:e.y+2,menuForm:this.form,menuObj:this,menuName:this.menuName,menuClassPrefix:this.buildCSSStylesMenus(),menuData:t,clickedObj:this,keyElem:this.elem,parentElem:this.elem,offsetY:this.arrowSide===Jh?1:0,focusElement:this.mainBtnElem,controlMenu:!0})}}},{key:"buildCSSStylesMenus",value:function(){var t=this.clientElem.id,e=this.getTheme(),i=this,s=this.clientElem.style,r="font: ".concat(s.fontStyle," ").concat(s.fontWeight," ").concat(s.fontSize," ").concat(s.fontFamily);function n(t){return t?i.menuHotBackColor!==o.JT?i.resolveDefaultColor(i.menuHotBackColor,ec.MENU_BACKGROUND):n(!1):i.resolveDefaultColor(i.menuBackColor,ec.MENU_BACKGROUND)}var a=e.getColorString(this.menuBackColor,this.DefaultColors.MENU_BACKGROUND),l=e.getTextColorString(this.menuTextColor,n(!1),0),h=e.getColorString(this.menuHotBackColor,OMColor.TintRGB(e.getColorRGB(n(!1)),OMColor.eTintFactor.SMALL)),c=e.getTextColorString(this.menuHotTextColor,n(!0),0),u=e.getColorString(this.menuDisabledTextColor,o.l1.disabledText),d="";return d+=jOmnisMenuHandler.getDefaultCSS(t,eOMMenuArea.main,eOMMenuState.normal)+"background-color: ".concat(a,";}"),d+=jOmnisMenuHandler.getDefaultCSS(t,eOMMenuArea.table,eOMMenuState.normal)+"}",d+=jOmnisMenuHandler.getDefaultCSS(t,eOMMenuArea.row,eOMMenuState.normal)+"color: ".concat(l,";}"),d+=jOmnisMenuHandler.getDefaultCSS(t,eOMMenuArea.row,eOMMenuState.hilite)+"background-color: ".concat(h,";")+"color: ".concat(c,";}"),d+=jOmnisMenuHandler.getDefaultCSS(t,eOMMenuArea.row,eOMMenuState.disabled)+"color: ".concat(u,";}"),d+=jOmnisMenuHandler.getDefaultCSS(t,eOMMenuArea.cellCheck,eOMMenuState.normal)+r+"}",d+=jOmnisMenuHandler.getDefaultCSS(t,eOMMenuArea.cellText,eOMMenuState.normal)+r+"}",d+=jOmnisMenuHandler.getDefaultCSS(t,eOMMenuArea.cellText,eOMMenuState.divider)+"border-bottom: 1pt solid ".concat(u,";}"),d+=jOmnisMenuHandler.getDefaultCSS(t,eOMMenuArea.cellCascade,eOMMenuState.normal)+"}",this.menuStyleSheet&&jOmnis.removeStyleSheet(this.menuStyleSheet),this.menuStyleSheet=jOmnis.addStyleSheet(d),t}},{key:"buildCSSStyles",value:function(){var t="#"+this.clientElem.id,e=this.getTheme(),i=null;o.Q2.isConstant(this.hotBackColor)&&this.themeableData.color===o.JT&&(i=e.getTextColorString(o.JT,this.hotBackColor,0));var s=kl.getFlatButtonFocusColor(this.form.inst,jh(this,sc)[sc](),this.themeableData.color),r="".concat(t," .").concat(zh,":hover,")+"".concat(t," .").concat(Wh,":focus {")+"background-color: ".concat(e.getColorString(this.hotBackColor,s),";");null!==i&&(r+="color: ".concat(i,";")),r+="}",r+="".concat(t," .").concat(Wh," svg {")+"--om-tint-color: ".concat(this.getTheme().getTextColorString(this.themeableData.color,jh(this,sc)[sc](),this.DefaultColors[a.Mr.TEXT]),";")+"}",null!==i&&(r+="".concat(t," .").concat(Wh,":hover svg,")+"".concat(t," .").concat(Wh,":focus svg {")+"--om-tint-color: ".concat(i,";")+"}"),r+="".concat(t," {")+"border-radius: ".concat(this.buttonBorderRadius,"px;")+"border-style: ".concat(this.borderWidth?"solid":"none",";")+"border-width: ".concat(this.borderWidth,"px;")+"border-color: ".concat(e.getColorString(this.borderColor,this.DefaultColors[a.Mr.BORDER]),";}"),this.styleSheet&&jOmnis.removeStyleSheet(this.styleSheet),this.styleSheet=jOmnis.addStyleSheet(r)}},{key:"updateArrowSideCssClass",value:function(t){var e;switch(t){case tc:e=Uh;break;case Zh:e=Vh;break;case Jh:e=qh;break;case Qh:e=Kh}var i=this.clientElem;i.classList.remove(Uh),i.classList.remove(Vh),i.classList.remove(qh),i.classList.remove(Kh),i.classList.add(e)}},{key:"horzPaddingChanged",value:function(){jh(this,ic)[ic](this.mainBtnElem)}}],s=[{key:"getMenuPosition",value:function(t,e){var i={};switch(t){case tc:i.x=e.offsetWidth-30,i.y=e.offsetHeight;break;case Zh:case Qh:i.x=0,i.y=e.offsetHeight;break;case Jh:i.x=0,i.y=1}return i}}],i&&xh(e.prototype,i),s&&xh(e,s),n}(a.U2),ac=function(t){var e=this.getProperty(eBaseProperties.align);kl.layoutButton(t,this.vertical,e,this.textBeforeIcon,this.mHorizontalPadding)},lc=function(){return this.resolveDefaultColor(this.themeableData.backgroundColor,ec.BACKGROUND)},hc=function(t){jOmnisEffects.addRippleToElem(t,this.getTheme(),!1,this.hotBackColor,At._j,null,jh(this,nc)[nc]())},cc=function(){var t=null;this.hotBackColor===o.JT&&(t=this.getTheme().getTextColorRGB(this.themeableData.color,jh(this,sc)[sc](),this.DefaultColors[ec.TEXT]));return t},uc=oc,dc="$switchon",pc="$switchoff",mc="$justifyhoriz",fc="$justifyvert",gc="$switchcolor";function vc(){this.init_class_inst()}vc.prototype=new ctrl_base,vc.prototype.mAcceptsReturn=!0,vc.prototype.init_class_inst=function(){this.superclass=ctrl_base.prototype,this.superclass.init_class_inst.call(this),this.value=0,this.activeReplacesEnabled=!0,this.mFocusStyle=eBaseFocusStyle.eWithin},vc.prototype.init_ctrl_inst=function(t,e,i,s){this.superclass.init_ctrl_inst.call(this,t,e,i,s);var r=this.getClientElem();return this.checkedImage=this.setupIcon(r.getAttribute("data-icon_on")),this.normalImage=this.setupIcon(r.getAttribute("data-icon_off")),this.setProperty(mc,r.getAttribute("data-jsth")||0),this.setProperty(fc,r.getAttribute("data-jstv")),this.setProperty(gc,+r.getAttribute("data-switchcolor")),0==this.normalImage&&(this.normalImage=null),0==this.checkedImage&&(this.checkedImage=null),r.onkeydown=r.onkeyup=this.mEventFunction,r.setAttribute("role","button"),this.update(),this.activeChanged(),!1},vc.prototype.baseClassName="omnis-switch",vc.prototype.updateCtrl=function(){var t;t=this.dataName?this.getData():this.value;var e=this.getClientElem();if(e.onclick=this.mEventFunction,this.useIcons=this.normalImage&&this.checkedImage,this.useIcons){var i,s="";t?(i=this.checkedImage,e.setAttribute("aria-pressed","true")):(i=this.normalImage,e.setAttribute("aria-pressed","false"));var r=e.id+"_img";s+=jIcons.getHtml(i,null,'role="presentation" id="'+r+'"'),e.innerHTML=s,e.style.overflow="hidden",e.onmouseup=null,this.switchElem=this.inputElem=this.trackElem=this.thumbElem=this.focusHelperElem=this.rippleContainer=null,e.classList.remove("material")}else this.buildMaterialHtml(t),this.updateDimensions(),e.classList.add("material")},vc.prototype.buildMaterialHtml=function(t){var e=this.clientElem;e.innerHTML='\n\t\t<div class="omnis-switch__material'.concat(t?" is-checked":"",'">\n\t\t\t<input type="checkbox" class="omnis-switch__input" role="switch">\n\t\t\t<div class="omnis-switch__track"></div>\n\t\t\t<div class="omnis-switch__thumb">\n\t\t\t\t<div class="').concat(jOmnisEffects.FOCUS_HELPER_CLASS,'"></div>\n\t\t\t</div>\n\t\t</div>'),this.switchElem=e.querySelector(".omnis-switch__material"),jOmnisEffects.addRippleToElem(this.switchElem,null,!0),this.inputElem=e.querySelector(".omnis-switch__input"),this.trackElem=e.querySelector(".omnis-switch__track"),this.thumbElem=e.querySelector(".omnis-switch__thumb"),this.focusHelperElem=e.querySelector("."+jOmnisEffects.FOCUS_HELPER_CLASS),this.rippleContainer=e.querySelector("."+At.O7.CONTAINER),e.style.overflow="visible",e.tabIndex=-1,this.inputElem.onfocus=this.inputElem.onblur=this.mEventFunction},vc.prototype.handleEvent=function(t){switch(t.type){case"click":var e;e=(e=this.dataName?this.getData():this.value)?0:1;var i=this.getClientElem();return this.dataName&&this.setData(e),this.value=e,this.useIcons?(this.update(),i.setAttribute("aria-pressed",e?"true":"false")):(e?this.switchElem.classList.add("is-checked"):this.switchElem.classList.remove("is-checked"),this.updateState(),this.inputElem.setAttribute("aria-checked",e?"true":"false")),this.canSendEvent(eBaseEvent.evClick)&&(this.eventParamsAdd("pNewVal",e),this.sendEvent(eBaseEvent.evClick)),!0;case"keydown":case"keyup":if(this.useIcons){var s=OmnisKeyboardHandler.getNormalizedEventKey(t);("Enter"===s&&"keydown"===t.type||" "===s&&"keyup"===t.type)&&this.handleEvent(jOmnis.createDOMEvent("click"))}return!0;case"focus":return this.useIcons||t.target!==this.inputElem||(jOmnisEffects.addFocusClass(this.switchElem),this.updateState()),!0;case"blur":return this.useIcons||(jOmnisEffects.removeFocusClass(this.switchElem),this.updateState()),!0;default:return this.superclass.handleEvent.call(this,t)}},vc.prototype.getProperty=function(t){switch(t){case dc:return this.checkedImage;case pc:return this.normalImage;case mc:return this.justifyHoriz;case fc:return this.justifyVert;case gc:return this.switchColor}return this.superclass.getProperty.call(this,t)},vc.prototype.getCanAssign=function(t){switch(t){case dc:case pc:case mc:case fc:case gc:return!0}return this.superclass.getCanAssign.call(this,t)},vc.prototype.setProperty=function(t,e){var i=this.getClientElem();switch(t){case dc:return i.innerHTML="",this.checkedImage=0==e?null:e,this.update(),!0;case pc:return i.innerHTML="",this.normalImage=0==e?null:e,this.update(),!0;case mc:return this.justifyHoriz=+e,i.style.justifyContent=["flex-start","flex-end","center"][e],!0;case fc:return this.justifyVert=+e,i.style.alignItems=["flex-start","center","flex-end"][e-1],!0;case gc:return this.switchColor=+e,i.style.setProperty("--switch-color",this.getTheme().getColorString(this.switchColor,o.l1.secondary)),!0}return this.superclass.setProperty.call(this,t,e)},vc.prototype.sizeChanged=function(){return!this.useIcons&&this.switchElem&&this.updateDimensions(),this.superclass.sizeChanged.call(this)},vc.prototype.setTabIndex=function(t){return this.useIcons?this.superclass.setTabIndex.call(this,t):(this.inputElem&&(this.inputElem.tabIndex=-1==t?-1:0),t)},vc.prototype.focus=function(){this.useIcons||this.inputElem.focus()},vc.prototype.getLabelForElem=function(t){var e=this.getClientElem().id+"_label";return t.querySelector("label").id=e,(this.useIcons?this.getClientElem():this.inputElem).setAttribute("aria-labelledby",e),!1},vc.prototype.updateDimensions=function(){this.scale=this.getScale();var t=24*this.scale,e=14*this.scale,i=36*this.scale,s=20*this.scale,r=36*this.scale,n=36*this.scale,o=(t-e)/2,a=(t-s)/2;this.switchElem.style.width=i+"px",this.switchElem.style.height=t+"px",this.switchElem.style.paddingLeft=i-8+"px",this.inputElem.style.lineHeight=t+"px",this.trackElem.style.top=o+"px",this.trackElem.style.height=e+"px",this.trackElem.style.width=i+"px",this.trackElem.style.borderRadius=e+"px",this.thumbElem.style.top=a+"px",this.thumbElem.style.height=s+"px",this.thumbElem.style.width=s+"px",this.focusHelperElem.style.left=this.focusHelperElem.style.top=(s-r)/2+"px",this.focusHelperElem.style.width=r+"px",this.focusHelperElem.style.height=r+"px",this.rippleContainer.style.top=-(n-t)/2+"px",this.rippleContainer.style.width=n+"px",this.rippleContainer.style.height=n+"px",this.updateState()},vc.prototype.updateState=function(){var t=36*this.scale,e=20*this.scale,i=36*this.scale;this.switchElem.classList.contains("is-checked")?(this.thumbElem.style.left=t-e+"px",this.rippleContainer.style.left=t-i/2-e/2+"px"):(this.thumbElem.style.left="0",this.rippleContainer.style.left=e/2-i/2+"px")},vc.prototype.getScale=function(){var t=jOmnis.getOmnisWidth(this.clientElem)/36,e=jOmnis.getOmnisHeight(this.clientElem)/24;return Math.min(t,e)};var bc,yc=vc;function Cc(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function _c(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Cc(Object(i),!0).forEach((function(e){Ec(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Cc(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Ec(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var wc=0,kc=1,Tc=2,Sc=0,xc=1,Dc=2,Oc=3,Ac=0,Pc=1,Ic=2,Lc=0,jc=1,Nc=2,Bc=3,Rc=4,Mc=5,Fc=1,Hc=2,zc=18,Wc=16,$c="tabdiv",Uc={side:"$side",linkedobject:"$linkedobject",currenttab:-864,tabcount:-840,selectedtab:"$selectedtab",tablayout:"$tablayout",tabiconsize:"$tabiconsize",fixedtabsize:"$fixedtabsize",maxfixedtabsize:"$maxfixedtabsize",extratabspacing:"$extratabspacing",currenttabtextcolor:"$currenttabtextcolor",currenttabextra:"$currenttabextra",disabledtabtextcolor:"$disabledtabtextcolor",baseedgewidth:"$baseedgewidth",baseedgecolor:"$baseedgecolor",baseedgealpha:"$baseedgealpha",tabbordercolor:"$tabbordercolor",tabborderalpha:"$tabborderalpha",tabborderwidth:"$tabborderwidth",tabborderradius:"$tabborderradius",tabbackstyle:"$tabbackstyle",tabbackcolor:"$tabbackcolor",tabbackalpha:"$tabbackalpha",tabbackiconid:"$tabbackiconid",currenttabbackcolor:"$currenttabbackcolor",currenttabbackalpha:"$currenttabbackalpha",currenttabbackiconid:"$currenttabbackiconid",hottabbackcolor:"$hottabbackcolor",hottabbackalpha:"$hottabbackalpha",hottabbackiconid:"$hottabbackiconid",tabspacing:"$tabspacing",tabtext:"$tabtext",tabvisible:"$tabvisible",tabenabled:"$tabenabled",tabtooltip:"$::tabtooltip",tabiconid:"$::tabiconid",hottabtextcolor:"$hottabtextcolor",hotcurrent:"$hotcurrent",trackmenus:"$trackmenus",tabmenu:"$tabmenu",tabsjst:"$tabsjst",tabmenubackcolor:"$tabmenubackcolor",tabmenubackiconid:"$tabmenubackiconid",tabmenutextcolor:"$tabmenutextcolor",tabmenudisabledtextcolor:"$tabmenudisabledtextcolor",tabmenuhotbackcolor:"$tabmenuhotbackcolor",tabmenuhotbackiconid:"$tabmenuhotbackiconid",tabmenuhottextcolor:"$tabmenuhottextcolor",canclickselectedtab:"$canclickselectedtab",movetab:"$movetab",currentTabIndicatorColor:"$currenttabindicatorcolor"};qc.prototype=Object.create(a.U2.prototype);var Vc=_c(_c({},a.Mr),{},{TAB_CUR_BACKCOLOR_DEFAULT:"TAB_CUR_BACKCOLOR_DEFAULT",TAB_CUR_INDICATOR:"TAB_CUR_INDICATOR"});function qc(){this.init_class_inst()}qc.prototype.DefaultColors=_c(_c({},a.U2.prototype.DefaultColors),{},(Ec(bc={},Vc.BACKGROUND,o.l1.primary),Ec(bc,Vc.TAB_CUR_BACKCOLOR_DEFAULT,o.l1.primary),Ec(bc,Vc.TAB_CUR_INDICATOR,o.l1.secondary),bc)),qc.prototype.mAcceptsReturn=!0,qc.prototype.defaultAriaElem=!1,qc.prototype.init_class_inst=function(){this.superclass=a.U2.prototype,this.superclass.init_class_inst.call(this),this.mFocusStyle=eBaseFocusStyle.eCustom,this.activeReplacesEnabled=!0},qc.prototype.baseClassName="omnis-tabs",qc.prototype.init_ctrl_inst=function(t,e,i,s){this.superclass.init_ctrl_inst.call(this,t,e,i,s),this.mHasAlign=!0;var r=this.getClientElem();jOmnis.isAndroid&&(r.style.webkitTapHighlightColor="transparent"),this.mPixelsPerScroll=1,this.makeChildIdBase(r),this.mFirst=!0,this.mNeedFontHeight=!0,this.fontChanged(),this.mFirst=!1,this.mSide=parseInt(r.getAttribute("data-side")),this.mVertical=this.mSide==Dc||this.mSide==Oc,this.mPagedPaneName=r.getAttribute("data-linkedobject"),this.mPagedPaneCtrl=null,t.registerForFormBuilt(this),this.mCurrentTab=parseInt(r.getAttribute("data-currenttab")),this.rowCtrl&&this.setPropCli(Uc.currenttab,this.mCurrentTab,this.rowNumber),this.mSelectedTab=parseInt(r.getAttribute("data-selectedtab")),this.mTabLayout=parseInt(r.getAttribute("data-tablayout")),this.mTabIconSize=parseInt(r.getAttribute("data-tabiconsize")),this.mFixedTabSize=1==r.getAttribute("data-fixedtabsize"),this.mMaxFixedTabSize=parseInt(r.getAttribute("data-maxfixedtabsize")),this.mExtraSpacing=parseInt(r.getAttribute("data-extraspacing")),this.mCurrentTabTextColor=+r.getAttribute("data-currenttabtextcolor"),this.mCurrentTabExtra=parseInt(r.getAttribute("data-currenttabextra")),this.mCurrentTabExtra<0&&(this.mCurrentTabExtra=0),this.mDisabledTabTextColorInt=-1;var n=r.getAttribute("data-disabledtabtextcolor");return n&&(this.mDisabledTabTextColorInt=parseInt(n)),this.mHotTabTextColorInt=parseInt(r.getAttribute("data-hottabtextcolor")),this.mBaseEdgeWidth=parseInt(r.getAttribute("data-baseedgewidth")),this.mBaseEdgeColor=+r.getAttribute("data-baseedgecolor"),this.mBaseEdgeAlpha=+r.getAttribute("data-baseedgealpha"),this.mTabBorderColor=+r.getAttribute("data-tabbordercolor"),this.mTabBorderAlpha=+r.getAttribute("data-tabborderalpha"),this.mTabBorderWidth=parseInt(r.getAttribute("data-tabborderwidth")),this.mTabBackStyle=parseInt(r.getAttribute("data-tabbackstyle")),this.mTabBackColor=+r.getAttribute("data-tabbackcolor"),this.mTabBackAlpha=+r.getAttribute("data-tabbackalpha"),this.mTabBackImage=this.setupIcon(r.getAttribute("data-tabbackimage")),this.mTabCurBackColor=+r.getAttribute("data-tabcurbackcolor"),this.mTabCurBackAlpha=+r.getAttribute("data-tabcurbackalpha"),this.mTabCurBackImage=this.setupIcon(r.getAttribute("data-tabcurbackimage")),this.mTabHotBackColor=+r.getAttribute("data-tabhotbackcolor"),this.mTabHotBackAlpha=+r.getAttribute("data-tabhotbackalpha"),this.mTabHotBackImage=this.setupIcon(r.getAttribute("data-tabhotbackimage")),this.mTabRadius=parseInt(r.getAttribute("data-tabradius")),this.mTabSpacing=parseInt(r.getAttribute("data-tabspacing")),this.mHotCurrent=1==r.getAttribute("data-hotcurrent"),this.mTrackMenus=1==r.getAttribute("data-trackmenus"),this.mOpenMenuTabNumber=0,this.mTabsJst=parseInt(r.getAttribute("data-tabsjst")),this.mCanClickSel=1==r.getAttribute("data-ccs"),this.mTabMenuBackColor=+r.getAttribute("data-tmbc"),this.mTabMenuBackImage=this.setupIcon(r.getAttribute("data-tmbi")),this.mTabMenuHotBackImage=this.setupIcon(r.getAttribute("data-tmhbi")),this.tabTrackID="___tabtrack"+this.uniqueID,this.mCurrentTabIndicatorColor=+r.getAttribute("data-tabcurindicatorcolor"),this.buildTabObjects(),this.buildCSSStyles(),this.elem.addEventListener("focusin",this.mEventFunction),this.elem.addEventListener("focusout",this.mEventFunction),!1},qc.prototype.updateCtrl=function(t){""===t&&this.rowCtrl&&this.applyPropertyChanges()},qc.prototype.formBuilt=function(){this.updatePagedPane(!0),this.mFormBuilt=!0},qc.prototype.delete_class_inst=function(){this.mTabStyleSheet&&jOmnis.removeStyleSheet(this.mTabStyleSheet),this.mTabMenuStyleSheet&&jOmnis.removeStyleSheet(this.mTabMenuStyleSheet),null!=this.iscroll&&this.iscroll.destroy(),this.superclass.delete_class_inst.call(this)},qc.prototype.handleEvent=function(t){var e;switch(t.type){case"click":case"tap":e=jOmnis.getEventCurrentTarget(t),this.updateFocusedTab(null);var i=jOmnis.getElemPosRelativeToAncestor(e,this.elem);if(jOmnisMenuHandler.isContextMenuOpen()){this.closeAnyOpenMenu(!0);var s=this.tabNumberForEvent(t);s&&this.mTabs[s-1].mLiElement.focus()}return this.tabClicked(t),(jOmnis.touchDevice||t.omnisKey)&&this.openMenu(t,i,!!t.omnisKey),!0;case"mousedown":case"touchstart":if(jOmnisMenuHandler.isContextMenuOpen())return this.closeAnyOpenMenu(!0),!0;if(e=t.target)if(this.mLeftUpArrowElement&&e.id==this.mLeftUpArrowElement.id)this.arrowMouseDown(t,!0);else if(this.mRightDownArrowElement&&e.id==this.mRightDownArrowElement.id)this.arrowMouseDown(t,!1);else{(p=this.tabNumberForEvent(null,e))&&!this.mTabs[p-1].mEnabled&&jOmnis.stopEventNow(t);var r=this;this.preventFocusedClass=!0,setTimeout((function(){r.preventFocusedClass=!1}),50)}return!0;case"mouseup":return(e=jOmnis.getEventCurrentTarget(t))&&(e.id==this.mLeftUpArrowElement.id?this.arrowMouseUp(t,!0):e.id==this.mRightDownArrowElement.id&&this.arrowMouseUp(t,!1)),!0;case"mouseover":return this.preventMouseOver&&!t.omnisKey||this.openMenu(t,null,!!t.omnisKey),!0;case"mouseout":for(var n=t.relatedTarget||t.toElement,o=!1;n&&!("LI"==n.tagName||"UL"==n.tagName||n.children&&n.children.length&&"UL"==n.children[0].tagName);){if(n==this.mTrackContainer){o=!0;break}n=n.parentNode}return jOmnis.overlayManager.hasMenuOverlay(this.form)&&!o||this.closeAnyOpenMenu(!0),!0;case"omnis-menuopen":return this.setMenuTimeout(),!0;case"omnis-menuclosed":return this.closeAnyOpenMenu(!1),this.setMenuTimeout(),this.superclass.handleEvent.call(this,t);case"omnis-popupdiscarded":return this.mNextMenuTabNumber&&this.openMenu(null),!0;case"focus":case"blur":if(!this.elem.disabled&&!jOmnis.mDesign){var a=t.target;if("LI"==a.tagName)if("focus"==t.type){if((p=this.tabNumberForEvent(null,a))&&!this.mTabs[p-1].mEnabled){var l=this.getFirstSelectableTab();return void(l&&this.mTabs[l-1].mLiElement.focus())}this.focusElem=a,p&&this.scrollTabToView(!1,p);for(var h=0;h<this.mTabs.length;++h)this.mTabs[h].mLiElement&&(this.mTabs[h].mLiElement.tabIndex=-1);this.focusElem.tabIndex=0,this.preventFocusedClass||this.updateFocusedTab(this.focusElem)}else this.focusElem&&(this.focusElem=null,this.updateFocusedTab(null))}return!0;case"keydown":e=t.target;var c=OmnisKeyboardHandler.getNormalizedEventKey(t);if(" "===c||"Enter"===c){if(this.mLeftUpArrowElement&&e.id==this.mLeftUpArrowElement.id)this.arrowMouseDown(t,!0);else if(this.mRightDownArrowElement&&e.id==this.mRightDownArrowElement.id)this.arrowMouseDown(t,!1);else if(!this.elem.disabled&&"Enter"===c&&!jOmnisMenuHandler.isContextMenuOpen()){var u=jOmnis.createDOMEvent("click");u.omnisKey=!0;var d=this.mCurrentTab;e.dispatchEvent(u),this.mCanClickSel||d!==this.tabNumberForEvent(null,e)||this.sendNextOk()}jOmnis.stopEventNow(t)}else if("ArrowLeft"!==c&&"ArrowRight"!==c&&"ArrowUp"!==c&&"ArrowDown"!==c||this.elem.disabled)"Home"!==c&&"End"!==c||((C="Home"===c?this.getFirstSelectableTab():this.getLastSelectableTab())&&this.mTabs[C-1].mLiElement.focus(),jOmnis.stopEventNow(t));else{var p,m=this.mTabs,f=m.length;if(!(p=this.mOpenMenuTabNumber)){var g=document.activeElement;if(g)for(h=0;h<f;++h)if(m[h].mLiElement==g){p=h+1;break}}if(p){var v,b=[],y=-1;for(h=1;h<=f;++h)m[h-1].mEnabled&&m[h-1].mVisible&&(h==p&&(y=b.length),b.push(h));if(-1!=y)if("ArrowLeft"===c||"ArrowUp"===c?(v=y-1)<0&&(v=b.length-1):(v=y+1)==b.length&&(v=0),v!=y){var C=b[v];m[C-1].mLiElement.focus()}}jOmnis.stopEventNow(t)}return C&&this.mTrackMenus&&this.mTabs[C-1].mTabMenu&&((u=jOmnis.createDOMEvent("mouseover")).omnisKey=!0,this.mTabs[C-1].mLiElement.dispatchEvent(u)),!0;case"keyup":return e=t.target,c=OmnisKeyboardHandler.getNormalizedEventKey(t),this.mLeftUpArrowElement&&e.id==this.mLeftUpArrowElement.id?this.arrowMouseUp(t,!0):this.mRightDownArrowElement&&e.id==this.mRightDownArrowElement.id?this.arrowMouseUp(t,!1):this.elem.disabled||" "!==c||jOmnisMenuHandler.isContextMenuOpen()||((u=jOmnis.createDOMEvent("click")).omnisKey=!0,e.dispatchEvent(u)),!0;case"scroll":return jOmnis.mDesign||this.setScrollPosition(this.mVertical?this.mTabDivElement.scrollTop:this.mTabDivElement.scrollLeft),!0;default:return this.superclass.handleEvent.call(this,t)}},qc.prototype.getProperty=function(t){switch(t){case Uc.side:return this.mSide;case Uc.linkedobject:return this.mPagedPaneName;case Uc.currenttab:return this.mCurrentTab;case Uc.tabcount:return this.mTabs.length;case Uc.selectedtab:return this.mSelectedTab;case Uc.tablayout:return this.mTabLayout;case Uc.tabiconsize:return this.mTabIconSize;case Uc.fixedtabsize:return this.mFixedTabSize;case Uc.maxfixedtabsize:return this.mMaxFixedTabSize;case Uc.extratabspacing:return this.mExtraSpacing;case Uc.currenttabtextcolor:return this.mCurrentTabTextColor;case Uc.currenttabextra:return this.mCurrentTabExtra;case Uc.disabledtabtextcolor:return this.mDisabledTabTextColorInt;case Uc.baseedgewidth:return this.mBaseEdgeWidth;case Uc.baseedgecolor:return this.mBaseEdgeColor;case Uc.baseedgealpha:return this.mBaseEdgeAlpha;case Uc.tabbordercolor:return this.mTabBorderColor;case Uc.tabborderalpha:return this.mTabBorderAlpha;case Uc.tabborderwidth:return this.mTabBorderWidth;case Uc.tabborderradius:return this.mTabRadius;case Uc.tabbackstyle:return this.mTabBackStyle;case Uc.tabbackcolor:return this.mTabBackColor;case Uc.tabbackalpha:return this.mTabBackAlpha;case Uc.tabbackiconid:return this.mTabBackImage;case Uc.currenttabbackcolor:return this.mTabCurBackColor;case Uc.currenttabbackalpha:return this.mTabCurBackAlpha;case Uc.currenttabbackiconid:return this.mTabCurBackImage;case Uc.hottabbackcolor:return this.mTabHotBackColor;case Uc.hottabbackalpha:return this.mTabHotBackAlpha;case Uc.hottabbackiconid:return this.mTabHotBackImage;case Uc.tabspacing:return this.mTabSpacing;case Uc.tabtext:return this.mTabs[this.mSelectedTab-1].mText;case Uc.tabvisible:return this.mTabs[this.mSelectedTab-1].mVisible;case Uc.tabenabled:return this.mTabs[this.mSelectedTab-1].mEnabled;case Uc.tabtooltip:return this.mTabs[this.mSelectedTab-1].mTabTooltip;case Uc.tabiconid:return this.mTabs[this.mSelectedTab-1].mTabIconUrl;case Uc.hottabtextcolor:return this.mHotTabTextColorInt;case Uc.hotcurrent:return this.mHotCurrent;case Uc.trackmenus:return this.mTrackMenus;case Uc.tabmenu:return this.mTabs[this.mSelectedTab-1].mTabMenu;case Uc.tabsjst:return this.mTabsJst;case Uc.tabmenubackcolor:return this.mTabMenuBackColor;case Uc.tabmenubackiconid:return this.mTabMenuBackImage;case Uc.tabmenutextcolor:return null!=(e=this.getClientElem().getAttribute("data-tmtc"))?1*e:-1;case Uc.tabmenudisabledtextcolor:return null!=(e=this.getClientElem().getAttribute("data-tmdtc"))?1*e:-1;case Uc.tabmenuhotbackcolor:return null!=(e=this.getClientElem().getAttribute("data-tmhbc"))?1*e:-1;case Uc.tabmenuhotbackiconid:return this.mTabMenuHotBackImage;case Uc.tabmenuhottextcolor:var e;return null!=(e=this.getClientElem().getAttribute("data-tmhtc"))?1*e:-1;case Uc.canclickselectedtab:return this.mCanClickSel;case Uc.movetab:return 0;case Uc.currentTabIndicatorColor:return this.mCurrentTabIndicatorColor}return this.superclass.getProperty.call(this,t)},qc.prototype.getCanAssign=function(t){switch(t){case Uc.side:case Uc.currenttab:case Uc.selectedtab:case Uc.tablayout:case Uc.tabiconsize:case Uc.fixedtabsize:case Uc.maxfixedtabsize:case Uc.extratabspacing:case Uc.currenttabtextcolor:case Uc.currenttabextra:case Uc.disabledtabtextcolor:case Uc.baseedgewidth:case Uc.baseedgecolor:case Uc.baseedgealpha:case Uc.tabbordercolor:case Uc.tabborderalpha:case Uc.tabborderwidth:case Uc.tabborderradius:case Uc.tabbackstyle:case Uc.tabbackcolor:case Uc.tabbackalpha:case Uc.tabbackiconid:case Uc.currenttabbackcolor:case Uc.currenttabbackalpha:case Uc.currenttabbackiconid:case Uc.hottabbackcolor:case Uc.hottabbackalpha:case Uc.hottabbackiconid:case Uc.tabspacing:case Uc.tabtext:case Uc.tabvisible:case Uc.tabenabled:case Uc.tabtooltip:case Uc.tabiconid:case Uc.hottabtextcolor:case Uc.hotcurrent:case Uc.trackmenus:case Uc.tabmenu:case Uc.tabsjst:case Uc.linkedobject:case Uc.tabmenubackcolor:case Uc.tabmenubackiconid:case Uc.tabmenutextcolor:case Uc.tabmenudisabledtextcolor:case Uc.tabmenuhotbackcolor:case Uc.tabmenuhotbackiconid:case Uc.tabmenuhottextcolor:case Uc.canclickselectedtab:case Uc.tabcount:case Uc.currentTabIndicatorColor:return!0;case Uc.movetab:return 0!=jOmnis.mDesign}return this.superclass.getCanAssign.call(this,t)},qc.prototype.setProperty=function(t,e){var i=!1;switch(t){case Uc.side:if((e*=1)!=Sc&&e!=Dc&&e!=Oc&&e!=xc)return!1;this.mSide=e,this.mVertical=this.mSide===Dc||this.mSide===Oc,this.mRebuildCss=!0;break;case Uc.linkedobject:this.mPagedPaneCtrl&&this.mPagedPaneCtrl.removeTabPanel(),this.mPagedPaneName=e+"",this.removePagedPaneBorderDiv(),this.removeTabBorderDivs(),this.mPagedPaneCtrl=null,this.updatePagedPane(!1),this.mPagedPaneCtrl&&this.mPagedPaneCtrl.makeTabPanel(),this.setAriaControls(this.mPagedPaneCtrl);break;case Uc.currenttab:this.mNewCurrentTab=1*e;break;case Uc.tabcount:this.setTabCount(1*e);break;case Uc.selectedtab:return(e*=1)>=1&&e<=this.mTabs.length&&(this.mSelectedTab=e,jOmnis.mDesign&&this.hiliteSelectedItem(e,this.mTabs[e-1].mLiElement),!0);case Uc.tablayout:if((e*=1)!=Lc&&e!=jc&&e!=Nc&&e!=Rc&&e!=Bc&&e!=Mc)return!1;this.mTabLayout=e,this.mCalcTabWidths=!0;break;case Uc.tabiconsize:this.mTabIconSize=e*=1,this.mCalcTabWidths=!0;break;case Uc.fixedtabsize:this.mFixedTabSize=1*e!=0;break;case Uc.maxfixedtabsize:this.mMaxFixedTabSize=1*e;break;case Uc.extratabspacing:this.mExtraSpacing=1*e,this.mCalcTabWidths=!0;break;case Uc.currenttabtextcolor:this.mCurrentTabTextColor=+e,this.mRebuildCss=!0;break;case Uc.currenttabextra:this.mCurrentTabExtra=1*e,this.mRebuildCss=!0;break;case Uc.disabledtabtextcolor:this.mDisabledTabTextColorInt=1*e,this.mRebuildCss=!0;break;case Uc.baseedgewidth:this.mBaseEdgeWidth=1*e;break;case Uc.baseedgecolor:this.mBaseEdgeColor=+e;break;case Uc.baseedgealpha:this.mBaseEdgeAlpha=+e;break;case Uc.tabbordercolor:this.mTabBorderColor=+e,this.mRebuildCss=!0;break;case Uc.tabborderalpha:this.mTabBorderAlpha=+e,this.mRebuildCss=!0;break;case Uc.tabborderwidth:this.mTabBorderWidth=1*e,this.mCalcTabWidths=!0,this.mRebuildCss=!0,this.mTabWidthChanged=!0;break;case Uc.tabborderradius:this.mTabRadius=1*e,this.mRebuildCss=!0,this.mTabWidthChanged=!0;break;case Uc.tabbackstyle:if((e*=1)!=wc&&e!=kc&&e!=Tc)return!1;this.mTabBackStyle=e,this.mRebuildCss=!0;break;case Uc.tabbackcolor:this.mTabBackColor=+e,jOmnisEffects.setRippleColor(this.clientElem,this.getTheme(),this.resolveBackgroundColor(Pc)),this.mRebuildCss=!0;break;case Uc.tabbackalpha:this.mTabBackAlpha=+e,this.mRebuildCss=!0;break;case Uc.tabbackiconid:this.mTabBackImage=e,this.mRebuildCss=!0;break;case Uc.currenttabbackcolor:this.mTabCurBackColor=+e,this.mRebuildCss=!0;break;case Uc.currenttabbackalpha:this.mTabCurBackAlpha=+e,this.mRebuildCss=!0;break;case Uc.currenttabbackiconid:this.mTabCurBackImage=e,this.mRebuildCss=!0;break;case Uc.hottabbackcolor:this.mTabHotBackColor=+e,jOmnisEffects.setRippleColor(this.clientElem,this.getTheme(),this.resolveBackgroundColor(Pc)),this.mRebuildCss=!0;break;case Uc.hottabbackalpha:this.mTabHotBackAlpha=+e,this.mRebuildCss=!0;break;case Uc.hottabbackiconid:this.mTabHotBackImage=e,this.mRebuildCss=!0;break;case Uc.tabspacing:this.mTabSpacing=1*e,this.mRebuildCss=!0,this.mTabWidthChanged=!0;break;case Uc.tabtext:this.mTabs[this.mSelectedTab-1].mText=e,this.mCalcTabWidths=!0,this.mTabWidthChanged=!0;break;case Uc.tabvisible:var s=1*e!=0;s!=this.mTabs[this.mSelectedTab-1].mVisible&&(this.mTabs[this.mSelectedTab-1].mVisible=s,jOmnis.mDesign||(this.mVisibleTabCount+=s?1:-1,this.mCalcTabWidths=!0,this.mTabWidthChanged=!0,this.mSetTabOrder=!0));break;case Uc.tabenabled:var r=1*e!=0;r!=this.mTabs[this.mSelectedTab-1].mEnabled&&(this.mTabs[this.mSelectedTab-1].mEnabled=r,this.mSetTabOrder=!0);break;case Uc.tabtooltip:this.mTabs[this.mSelectedTab-1].mTabTooltip=e;break;case Uc.tabiconid:this.mTabs[this.mSelectedTab-1].mTabIconUrl=e;break;case Uc.hottabtextcolor:this.mHotTabTextColorInt=1*e,this.mRebuildCss=!0;break;case Uc.hotcurrent:this.mHotCurrent=1*e!=0,this.mRebuildCss=!0;break;case Uc.trackmenus:var n=1*e!=0;if(n&&(this.mSide==Dc||this.mSide==Oc))return!1;this.mTrackMenus=n;break;case Uc.tabmenu:this.mTabs[this.mSelectedTab-1].mTabMenu=e;break;case Uc.tabsjst:this.mTabsJst=1*e;break;case eBaseProperties.cssclassname:this.superclass.setProperty.call(this,t,e);break;case Uc.tabmenubackcolor:return this.mTabMenuBackColor=+e,!0;case Uc.tabmenubackiconid:return this.mTabMenuBackImage=e,!0;case Uc.tabmenutextcolor:return this.getClientElem().setAttribute("data-tmtc",1*e),!0;case Uc.tabmenudisabledtextcolor:return this.getClientElem().setAttribute("data-tmdtc",1*e),!0;case Uc.tabmenuhotbackcolor:return this.getClientElem().setAttribute("data-tmhbc",1*e),!0;case Uc.tabmenuhotbackiconid:return this.mTabMenuHotBackImage=e,!0;case Uc.tabmenuhottextcolor:return this.getClientElem().setAttribute("data-tmhtc",1*e),!0;case Uc.canclickselectedtab:return this.mCanClickSel=1*e!=0,!0;case eBaseProperties.fontsize:case eBaseProperties.fontname:case eBaseProperties.fontstyle:this.superclass.setProperty.call(this,t,e),this.mTabWidthChanged=!0;break;case Uc.movetab:if(e*=1,jOmnis.mDesign&&e>0&&e<=this.mTabs.length&&e!=this.mSelectedTab){var o=this.mTabs.splice(this.mSelectedTab-1,1);this.mTabs.splice(e-1,0,o[0]),this.mSelectedTab=e,this.buildElements()}return!0;case Uc.currentTabIndicatorColor:if(this.indicatorElem){this.mCurrentTabIndicatorColor=+e;var a=this.getTheme();this.indicatorElem.style.backgroundColor=a.getColorString(this.mCurrentTabIndicatorColor,this.DefaultColors.TAB_CUR_INDICATOR)}return!0;default:i=!0}if(i){var l=this.superclass.setProperty.call(this,t,e);return t!=eBaseProperties.textcolor&&t!=eBaseProperties.align||(this.mRebuildElements=!0,this.mRebuildCss=!0,this.focusAfterRebuild=this.focusAfterRebuild||this.clientElem.contains(document.activeElement),this.form.inst.registerPropertyObject(this)),l}return this.mRebuildElements=!0,this.focusAfterRebuild=this.focusAfterRebuild||this.clientElem.contains(document.activeElement),this.form.inst.registerPropertyObject(this),!0},qc.prototype.applyPropertyChanges=function(){this.mCalcTabWidths&&(this.calcTabWidths(),this.mCalcTabWidths=!1),this.mRebuildCss&&(this.buildCSSStyles(),this.mRebuildCss=!1),null!=this.mNewCurrentTab&&(this.mNewCurrentTab<=0?this.mNewCurrentTab=this.mTabs.length?1:0:this.mNewCurrentTab>this.mTabs.length&&(this.mNewCurrentTab=this.mTabs.length)),this.mRebuildElements&&(this.buildElements(),this.mRebuildElements=!1),null!=this.mNewCurrentTab&&(this.setCurrentTab(this.mNewCurrentTab,!1),this.setTabIndex(this.elem.disabled?-1:0),this.mNewCurrentTab=null),this.mTabWidthChanged&&(this.mTabWidthChanged=!1,this.updatePagedPane(!1)),this.mSetTabOrder&&this.form.setTabOrder(),this.focusAfterRebuild&&(this.focus(),this.focusAfterRebuild=!1)},qc.prototype.fontChanged=function(){this.superclass.fontChanged.call(this),this.calcTabWidths(),this.mFirst||this.buildElements()},qc.prototype.sizeChanged=function(){this.superclass.sizeChanged.call(this);var t=this.getClientElem();0==t.offsetHeight&&0==t.offsetWidth||(this.buildElements(),this.scrollTabToView(!1),this.updatePagedPane(!1))},qc.prototype.activeChanged=function(){this.buildElements(),this.superclass.activeChanged.call(this),this.disableSystemFocusChanged()},qc.prototype.visibilityChanged=function(){var t=this.superclass.visibilityChanged.call(this);return this.getTrueVisibility()&&(this.calcTabWidths(),this.buildElements(),this.updatePagedPane(!1)),t},qc.prototype.buildTabObjects=function(){var t=this.getClientElem();this.mTabs=[],this.mVisibleTabCount=0;for(var e=1;e<=256;++e){var i=t.getAttribute("data-tab"+e);if(null==i)break;var s=i.split(","),r={};r.mText=s[0].replace(/\x7f/g,","),this.form.stringTable&&(r.mText=this.form.stringTable.translateText(r.mText)),r.mVisible="1"==s[1],(r.mVisible||jOmnis.mDesign)&&this.mVisibleTabCount++,r.mEnabled="1"==s[2],r.mTabTooltip=s[3].replace(/\x7f/g,","),this.form.stringTable&&(r.mTabTooltip=this.form.stringTable.translateText(r.mTabTooltip)),r.mTabIconUrl=this.setupIcon(s[4]),r.mTabMenu=s[5],this.mTabs.push(r)}this.calcTabWidths()},qc.prototype.calcTabWidths=function(){if(this.mTotalWidthOrHeight=0,this.mTabs){var t;this.mTabLayout!=jc&&(t=this.getTextWidthDiv());for(var e=[],i=0;i<this.mTabs.length;++i){var s=this.mTabs[i],r=this.hasSingleBorders()&&0!==i,n=this.mTabIconSize+4+(r?1:2)*this.mTabBorderWidth+this.mExtraSpacing;if(this.mTabLayout!=jc){t.innerHTML=jOmnis.escapeHTML(s.mText);var o=t.clientWidth;jOmnis.mDesign&&e.push(o),this.mTabLayout==Nc||this.mTabLayout==Bc?s.mWidthOrHeight=o+2+n:this.mTabLayout!=Rc&&this.mTabLayout!=Mc&&this.mTabLayout!=Lc||(s.mWidthOrHeight=o+4+(r?1:2)*this.mTabBorderWidth+this.mExtraSpacing),this.mTabLayout!=Lc&&s.mWidthOrHeight<n&&(s.mWidthOrHeight=n)}else s.mWidthOrHeight=n;(s.mVisible||jOmnis.mDesign)&&(this.mTotalWidthOrHeight+=s.mWidthOrHeight)}if(this.mTabLayout!=jc&&this.removeTextWidthDiv(t),jOmnis.mDesign){var a=JSON.stringify(e);this.mLastSentTextWidths&&a==this.mLastSentTextWidths||(jOmnis.sendDesignMessage({messageType:eDesignMessageTypes.cIDMsetTabWidths,context:this.getDesignContext(),widths:e}),this.mLastSentTextWidths=a)}}},qc.prototype.buildCSSStylesMenus=function(){var t,e,i=this.clientElem.id,s=(this.mSide,""),r=this.getClientElem(),n=this.mTabBackAlpha,a=this.mTabMenuBackImage?this.mTabMenuBackImage:this.mTabBackImage,l=r.style.color;(h=r.getAttribute("data-tmtc"))&&1*h!=-1&&(l=this.getTheme().getColorString(1*h)),t=(h=r.getAttribute("data-tmdtc"))&&1*h!=-1?this.getTheme().getColorString(1*h):this.getDisabledTabTextColor();var h,c=this.mTabHotBackAlpha;(h=r.getAttribute("data-tmhbc"))&&1*h!=-1?e=1*h:(e=this.mTabHotBackColor)===o.JT&&(e=OMColor.TintRGB(this.getTheme().getColorRGB(this.resolveBackgroundColor(Ac)),OMColor.eTintFactor.SMALL));var u=this.mTabMenuHotBackImage?this.mTabMenuHotBackImage:this.mTabHotBackImage,d=this.mHotTabTextColorInt;(h=r.getAttribute("data-tmhtc"))&&1*h!=-1&&(d=1*h);var p=this.mTabMenuBackColor!==o.JT?this.mTabMenuBackColor:this.resolveBackgroundColor(Ac);return s+=jOmnisMenuHandler.getDefaultCSS(i,eOMMenuArea.main,eOMMenuState.normal),s+=this.getTabBorderCss(eOMMenuArea.main),s+=this.getTabBackgroundCss(p,n,a,Ac,eOMMenuArea.main),s+="}",s+=jOmnisMenuHandler.getDefaultCSS(i,eOMMenuArea.table,eOMMenuState.normal),s+=this.getTabBackgroundCss(p,n,a,Ac,eOMMenuArea.table),s+="}",s+=jOmnisMenuHandler.getDefaultCSS(i,eOMMenuArea.row,eOMMenuState.normal),s+=this.getTabBackgroundCss(p,n,a,Ac,eOMMenuArea.row),s+="color:"+l+";",s+="}",s+=jOmnisMenuHandler.getDefaultCSS(i,eOMMenuArea.row,eOMMenuState.disabled),s+="color:"+t+";",s+=this.getTabBackgroundCss(p,n,a,Ac,eOMMenuArea.row),s+="}",s+=jOmnisMenuHandler.getDefaultCSS(i,eOMMenuArea.cellCheck,eOMMenuState.normal),s+="font:"+this.clientElem.style.fontStyle+" "+this.clientElem.style.fontWeight+" "+this.clientElem.style.fontSize+" "+this.clientElem.style.fontFamily+";}",s+=jOmnisMenuHandler.getDefaultCSS(i,eOMMenuArea.cellText,eOMMenuState.normal),s+="font:"+this.clientElem.style.fontStyle+" "+this.clientElem.style.fontWeight+" "+this.clientElem.style.fontSize+" "+this.clientElem.style.fontFamily+";}",s+=jOmnisMenuHandler.getDefaultCSS(i,eOMMenuArea.cellText,eOMMenuState.divider),s+="border-bottom: 1pt solid "+t+";}",s+=jOmnisMenuHandler.getDefaultCSS(i,eOMMenuArea.cellCascade,eOMMenuState.normal),s+="font:"+this.clientElem.style.fontStyle+" "+this.clientElem.style.fontWeight+" "+this.clientElem.style.fontSize+" "+this.clientElem.style.fontFamily+";}",s+=jOmnisMenuHandler.getDefaultCSS(i,eOMMenuArea.row,eOMMenuState.hilite),s+=this.getTabBackgroundCss(e,c,u,Pc,eOMMenuArea.row),s+="color:"+this.getTheme().getTextColorString(d,e,0)+" !important;",s+="}",this.mTabMenuStyleSheet&&jOmnis.removeStyleSheet(this.mTabMenuStyleSheet),this.mTabMenuStyleSheet=jOmnis.addStyleSheet(s),i},qc.prototype.buildCSSStyles=function(){var t=this;function e(e,i){var s="#"+t.clientElem.id+e+",#"+t.tabTrackID+e;return i&&(s+=",#"+t.clientElem.id+i+",#"+t.tabTrackID+i),s+"{"}var i=e(" li.ctrl-tabs-li");i+=this.getTabBorderCss(null,this.hasSingleBorders()),i+=this.getTabRadiusCss(),i+=this.getTabBackgroundCss(this.mTabBackColor,this.mTabBackAlpha,this.mTabBackImage,Ac),i+="}",this.hasSingleBorders()&&(i+=e(" li.ctrl-tabs-li:first-child"),i+=this.getTabBorderCss(null,!1),i+="}"),i+=e(" li.ctrl-tabs-li ."+At.O7.CONTAINER),i+=this.getTabRadiusCss(!0),i+="}";var s=this.mTabHotBackColor,r=this.getTheme();s===o.JT&&(s=OMColor.TintRGB(r.getColorRGB(this.resolveBackgroundColor(Ac)),OMColor.eTintFactor.SMALL));var n=OMColor.TintRGB(r.getColorRGB(this.resolveBackgroundColor(Pc)),OMColor.eTintFactor.MEDIUM);if(jOmnis.touchDevice||(i+=e(" li.ctrl-tabs-li:hover"),i+=this.getTabBackgroundCss(s,this.mTabHotBackAlpha,this.mTabHotBackImage,Pc),i+="}"),i+=e(" li.ctrl-tabs-li.ctrl-tabs-li-focused:not(.ctrl-tabs-li-disabled)"),i+=this.getTabBackgroundCss(n,this.mTabHotBackAlpha,this.mTabHotBackImage,Pc),i+="}",i+=e(" li.ctrl-tabs-li-active"),i+=this.getTabBackgroundCss(this.mTabCurBackColor,this.mTabCurBackAlpha,this.mTabCurBackImage,Ic),i+="}",i+=e(" li.ctrl-tabs-li-disabled"," li.ctrl-tabs-li-disabled:hover"),i+=this.getTabBackgroundCss(this.mTabBackColor,this.mTabBackAlpha,this.mTabBackAlpha,this.mTabBackImage,Ac),i+="color:"+this.getDisabledTabTextColor()+";",i+="}",!jOmnis.touchDevice){this.mHotCurrent||(i+=e(" li.ctrl-tabs-li-active:hover"),i+=this.getTabBackgroundCss(this.mTabCurBackColor,this.mTabCurBackAlpha,this.mTabCurBackImage,Ic),i+="}");var a=" li.ctrl-tabs-li:hover:not(.ctrl-tabs-li-disabled)"+(this.mHotCurrent?"":":not(.ctrl-tabs-li-active)"),l=" li.ctrl-tabs-li.ctrl-tabs-li-focused";i+=e(a+" a.ctrl-tabs-a",l+" a.ctrl-tabs-a"),i+="color:"+this.getHotTabTextColor()+" !important;",i+="}",i+=e(a+" svg",l+" svg"),i+="--om-tint-color:"+this.getHotTabTextColor()+"!important;",i+="}"}this.mTabStyleSheet&&jOmnis.removeStyleSheet(this.mTabStyleSheet),this.mTabStyleSheet=jOmnis.addStyleSheet(i)},qc.prototype.complexGridRerendered=function(){this.buildCSSStyles(),this.buildCSSStylesMenus()},qc.prototype.getTabTextColor=function(t){return this.getEnabled(t)?this.mTabBackStyle===wc?jOmnis.getStyle(this.clientElem,"color"):this.getTheme().getTextColorString(this.getProperty(eBaseProperties.textcolor),this.resolveBackgroundColor(Ac),0):this.getDisabledTabTextColor()},qc.prototype.getDisabledTabTextColor=function(){return this.getTheme().getColorString(this.mDisabledTabTextColorInt,o.l1.disabledText)},qc.prototype.getCurrentTabTextColor=function(t){return this.getEnabled(t)?this.mTabBackStyle===wc?this.mCurrentTabTextColor===o.JT?jOmnis.getStyle(this.clientElem,"color"):this.getTheme().getColorString(this.mCurrentTabTextColor):this.getTheme().getTextColorString(this.mCurrentTabTextColor,this.resolveBackgroundColor(Ic),0):this.getDisabledTabTextColor()},qc.prototype.getHotTabTextColor=function(){return this.mTabBackStyle===wc?this.getTheme().getColorString(this.mHotTabTextColorInt):this.getTheme().getTextColorString(this.mHotTabTextColorInt,this.resolveBackgroundColor(Pc),0)},qc.prototype.getTabBorderCss=function(t,e){var i="",s=this.mTabBorderWidth+"px ";if(null!=t){if(t===eOMMenuArea.main)i+="border-style:solid solid solid solid;",i+="border-width:"+s+s+s+s+";"}else switch(this.mSide){case Sc:i+="border-style:solid solid none solid;",i+="border-width:"+s+s+"0 "+(e?"0":s)+";";break;case xc:i+="border-style:none solid solid solid;",i+="border-width:0 "+s+s+(e?"0":s)+";";break;case Dc:i+="border-style:solid none solid solid;",i+="border-width:"+(e?"0 ":s)+"0 "+s+s+";";break;case Oc:i+="border-style:solid solid solid none;",i+="border-width:"+(e?"0 ":s)+s+s+"0;"}return i+="border-color:"+this.getTheme().getColorString(this.mTabBorderColor,this.DefaultColors[Vc.BORDER],this.mTabBorderAlpha/255)+";"},qc.prototype.getTabRadiusCss=function(t){var e="";if(0!=this.mTabRadius){var i=this.mTabRadius;t&&(i=Math.max(0,this.mTabRadius-this.mTabBorderWidth));var s=i+"px ";switch(this.mSide){case Sc:e+="border-radius:"+s+s+"0 0;";break;case xc:e+="border-radius:0 0 "+s+s+";";break;case Dc:e+="border-radius:"+s+"0 0 "+s+";";break;case Oc:e+="border-radius:0 "+s+s+"0;"}}return e},qc.prototype.getTabBackgroundCss=function(t,e,i,s,r){if(null!=r)switch(r){case eOMMenuArea.main:case eOMMenuArea.table:return"background-color:"+this.getTheme().getColorString(t,this.DefaultColors[Vc.BACKGROUND],e/255)+";";case eOMMenuArea.row:break;default:return""}var n="";if(this.mTabBackStyle==wc){switch(i="images/ctl_tabs/",s){case Ac:i+=this.mVertical?"def_normal_vert_1000x1":"def_normal_1x1000";break;case Pc:i+=this.mVertical?"def_hot_vert_1000x1":"def_hot_1x1000";break;case Ic:i+=this.mVertical?"def_current_vert_1000x1":"def_current_1x1000"}i+=this.form.inst.resolution==eResolutions.retina?"_2x.png":".png"}return this.mTabBackStyle==kc?"background-color:"+this.getTheme().getColorString(t,this.resolveBackgroundColor(s),e/255)+";":(i&&i.length&&(n=jIcons.getIconSize(i,!0)),"background-image:url("+i+");background-repeat:repeat-"+(this.mVertical?"y":"x")+";background-position:"+(this.mVertical?"top":"left")+" center;"+n)},qc.prototype.buildElements=function(){var t,e,i=this.getClientElem();if(i.tabIndex=-1,this.mCurrentTab>0&&this.mCurrentTab<=this.mTabs.length&&!this.mTabs[this.mCurrentTab-1].mEnabled){var s=this.getFirstSelectableTab();this.mCurrentTab=s||1,this.updatePagedPane(!0)}this.mTabDivPosition=0,this.mFixedTabSize?(e=this.mVertical?i.offsetHeight:i.offsetWidth,this.mVisibleTabCount&&(e-=(this.mVisibleTabCount-1)*this.mTabSpacing,e/=this.mVisibleTabCount),e>this.mMaxFixedTabSize&&(e=this.mMaxFixedTabSize),t=e*this.mVisibleTabCount):t=this.mTotalWidthOrHeight;var r=t+=(this.mVisibleTabCount-1)*this.mTabSpacing;this.mNeedScroll=!1,this.mVisibleTabCount>0&&t>(this.mVertical?i.offsetHeight:i.offsetWidth)&&(t=(this.mVertical?i.offsetHeight:i.offsetWidth)-(jOmnis.touchDevice?0:36),jOmnis.touchDevice||(this.mTabDivPosition=zc),this.mNeedScroll=!0),e<0&&(e=0),t<0&&(t=0),r<0&&(r=0),this.mNeedScroll||(Hc==this.mTabsJst?this.mTabDivPosition=((this.mVertical?i.offsetHeight:i.offsetWidth)-t)/2:Fc==this.mTabsJst&&(this.mVertical?this.mTabDivPosition=i.offsetHeight-t:this.mTabDivPosition=i.offsetWidth-t)),this.mBaseEdgeElement&&(i.removeChild(this.mBaseEdgeElement),this.mBaseEdgeElement=null);var n=this.mVertical?i.offsetWidth:i.offsetHeight;if(this.mBaseEdgeWidth>0){switch(n-=this.mBaseEdgeWidth,this.mBaseEdgeElement=document.createElement("div"),this.mBaseEdgeElement.style.backgroundColor=this.getTheme().getColorString(this.mBaseEdgeColor,0,this.mBaseEdgeAlpha/255),this.mBaseEdgeElement.style.position="absolute",this.mSide){case Sc:this.mBaseEdgeElement.style.height=this.mBaseEdgeWidth+"px",this.mBaseEdgeElement.style.width=i.offsetWidth+"px",this.mBaseEdgeElement.style.left=0,this.mBaseEdgeElement.style.top=i.offsetHeight-this.mBaseEdgeWidth+"px";break;case xc:this.mBaseEdgeElement.style.height=this.mBaseEdgeWidth+"px",this.mBaseEdgeElement.style.width=i.offsetWidth+"px",this.mBaseEdgeElement.style.left=0,this.mBaseEdgeElement.style.top=0;break;case Dc:this.mBaseEdgeElement.style.width=this.mBaseEdgeWidth+"px",this.mBaseEdgeElement.style.height=i.offsetHeight+"px",this.mBaseEdgeElement.style.left=i.offsetWidth-this.mBaseEdgeWidth+"px",this.mBaseEdgeElement.style.top=0;break;case Oc:this.mBaseEdgeElement.style.width=this.mBaseEdgeWidth+"px",this.mBaseEdgeElement.style.height=i.offsetHeight+"px",this.mBaseEdgeElement.style.left=0,this.mBaseEdgeElement.style.top=0}i.appendChild(this.mBaseEdgeElement)}var o,a=this.mEventFunction;this.elem.onkeydown=a,this.elem.onkeyup=a,this.elem.onmousedown=a,jOmnis.touchDevice&&(this.elem.ontouchstart=a),jOmnis.touchDevice||(this.mLeftUpArrowElement&&i.removeChild(this.mLeftUpArrowElement),this.mLeftUpArrowElement=this.prepareArrowElement(this.mVertical?"up":"left",!this.mNeedScroll,a),this.mVertical?(this.mLeftUpArrowElement.style.top="1px",this.mSide==Oc?this.mLeftUpArrowElement.style.left=this.mBaseEdgeWidth+(n-Wc)/2+"px":this.mLeftUpArrowElement.style.left=(n-Wc)/2+"px"):(this.mLeftUpArrowElement.style.left="1px",this.mSide==xc?this.mLeftUpArrowElement.style.top=this.mBaseEdgeWidth+(n-Wc)/2+"px":this.mLeftUpArrowElement.style.top=(n-Wc)/2+"px")),this.mTabDivElement&&(jOmnis.mDesign?o=this.mTabDivElement:i.removeChild(this.mTabDivElement)),this.mTabDivElement=document.createElement("div"),this.mTabDivElement.style.position="absolute",this.mVertical?(this.mTabDivElement.style.top=this.mTabDivPosition+"px",this.mTabDivElement.style.left=this.mSide==Oc?this.mBaseEdgeWidth+"px":"0",this.mTabDivElement.style.height=t+"px",this.mTabDivElement.style.width="100%"):(this.mTabDivElement.style.left=this.mTabDivPosition+"px",this.mTabDivElement.style.top=this.mSide==xc?this.mBaseEdgeWidth+"px":"0",this.mTabDivElement.style.width=t+"px",this.mTabDivElement.style.height="100%"),this.mTabDivElement.style.overflow="hidden",this.mTabDivElement.onscroll=a,i.appendChild(this.mTabDivElement),jOmnis.touchDevice||(this.mRightDownArrowElement&&i.removeChild(this.mRightDownArrowElement),this.mRightDownArrowElement=this.prepareArrowElement(this.mVertical?"down":"right",!this.mNeedScroll,a),this.mVertical?(this.mRightDownArrowElement.style.top=zc+t+1+"px",this.mSide==Oc?this.mRightDownArrowElement.style.left=this.mBaseEdgeWidth+(n-Wc)/2+"px":this.mRightDownArrowElement.style.left=(n-Wc)/2+"px"):(this.mRightDownArrowElement.style.left=zc+t+1+"px",this.mSide==xc?this.mRightDownArrowElement.style.top=this.mBaseEdgeWidth+(n-Wc)/2+"px":this.mRightDownArrowElement.style.top=(n-Wc)/2+"px")),this.mUlElement=document.createElement("ul"),this.mUlElement.id=this.childIdBase+"tabs",this.mUlElement.setAttribute("role","tablist"),this.mUlElement.style.position="absolute",this.mUlElement.style.left=0,this.mUlElement.style.top=0,this.mUlElement.style.margin=0,this.mUlElement.style.padding=0,this.mVertical?(this.mUlElement.style.height=r+"px",this.mUlElement.style.width=n+"px"):(this.mUlElement.style.width=r+"px",this.mUlElement.style.height=n+"px"),this.setAriaElement(this.mUlElement),this.mTabDivElement.appendChild(this.mUlElement);for(var l=0,h=0,c=0,u=0;u<this.mTabs.length;++u){var d=this.mTabs[u];if(d.mVisible||jOmnis.mDesign){var p=this.mCurrentTabExtra;this.mCurrentTab==u+1&&(p=0),d.mTabStartOffset=l,h=u,d.mLiElement=document.createElement("li");var m=d.mLiElement;m.id=this.childIdBase+"_"+(u+1),m.title=d.mTabTooltip?d.mTabTooltip:"",m.setAttribute("role","tab"),d.mEnabled||m.setAttribute("aria-disabled","true"),m.style.position="absolute",this.mFixedTabSize?d.mActualWidthHeight=e:d.mActualWidthHeight=d.mWidthOrHeight,c=d.mActualWidthHeight;try{var f=this.hasSingleBorders()&&0!==u;this.mVertical?(m.style.left=(this.mSide==Oc?0:p)+"px",m.style.top=l+"px",m.style.height=d.mActualWidthHeight-(f?1:2)*this.mTabBorderWidth+"px",m.style.width=n-this.mTabBorderWidth-p+"px"):(m.style.left=l+"px",m.style.top=(this.mSide==xc?0:p)+"px",m.style.height=n-this.mTabBorderWidth-p+"px",m.style.width=d.mActualWidthHeight-(f?1:2)*this.mTabBorderWidth+"px")}catch(t){}l+=d.mActualWidthHeight+this.mTabSpacing;var g=this.getEnabled(d);m.className=g?this.mCurrentTab==u+1?"ctrl-tabs-li ctrl-tabs-li-active":"ctrl-tabs-li":"ctrl-tabs-li ctrl-tabs-li-disabled",this.mUlElement.appendChild(m);var v=document.createElement("a"),b=g&&(this.mCurrentTab!=u+1||this.mHotCurrent)?"ctrl-tabs-a ":"";v.style.position="absolute",v.style.width=this.mVertical?m.style.height:m.style.width,v.style.height=this.mVertical?m.style.width:m.style.height,this.mVertical&&this.mSide==Oc?v.style.left=m.style.width:v.style.left=0,this.mVertical&&this.mSide==Dc?v.style.top=m.style.height:v.style.top=0,this.mVertical?v.className=b+(this.mSide==Oc?"ctrl-tabs-vertical-text-right":"ctrl-tabs-vertical-text-left"):v.className=b,m.appendChild(v),this.layoutAElement(v,d);var y=this.mCurrentTab===u+1?this.getCurrentTabTextColor(d):this.getTabTextColor(d);v.style.color=y;var C=m.querySelector("svg");C&&Theme.SetThemedIconColor(C,y),g&&jOmnisEffects.addRippleToElem(m,this.getTheme(),!0,this.resolveBackgroundColor(Pc),At._j),m.onclick=a,m.onblur=a,m.onfocus=a,this.mTrackMenus&&!jOmnis.touchDevice&&(m.onmouseover=a)}}this.indicatorElem=document.createElement("span"),this.indicatorElem.className="omnis-tabs__indicator",this.setProperty(Uc.currentTabIndicatorColor,this.mCurrentTabIndicatorColor),this.mTabDivElement.appendChild(this.indicatorElem);var _=this;if(setTimeout((function(){_.updateIndicatorPosition(),o&&(_.mVertical?_.mTabDivElement.scrollTop=o.scrollTop:_.mTabDivElement.scrollLeft=o.scrollLeft,i.removeChild(o))}),0),this.updateFocusBorder(),null==this.mNewCurrentTab&&this.setTabIndex(this.elem.disabled?-1:0),jOmnis.mDesign||(this.mTabs.length?this.mVertical?this.mMaxScrollPosition=this.mTabs[h].mTabStartOffset-(parseInt(this.mTabDivElement.style.height)-c):this.mMaxScrollPosition=this.mTabs[h].mTabStartOffset-(parseInt(this.mTabDivElement.style.width)-c):this.mMaxScrollPosition=0),jOmnis.useiScroll&&(null!=this.iscroll&&(this.iscroll.destroy(),this.iscroll=null),this.mNeedScroll)){var E={};E.omnisObject=this,E.preventDefault=!0,E.tap=!0,E.scrollX=!this.mVertical,E.eventPassthrough=this.mVertical?"horizontal":"vertical",E.momentum=!0,E.bounce=!1,E.disableMouse=!1,E.probeType=2,this.iscroll=this.attachIScroll(this.mUlElement.parentNode,E,!0)}this.mMustScrollToView=!0,this.scrollTabToView(!0),this.mPagedPaneCtrl&&this.setAriaControls(this.mPagedPaneCtrl),this.updateAriaSelected(this.mCurrentTab),jOmnis.mDesign&&this.mTabs.length&&this.hiliteSelectedItem(this.mSelectedTab,this.mTabs[this.mSelectedTab-1].mLiElement,!0),null!=this.mPagedPaneCtrl&&this.updatePagedPaneBorder(!0)},qc.prototype.layoutAElement=function(t,e){var i,s=this.getPixels(t.style.height),r=this.getPixels(t.style.width);if(isNaN(s)&&(s=0),isNaN(r)&&(r=0),this.mTabLayout!=jc){var n,o=jOmnis.escapeHTML(e.mText);e.mLineCount=1;do{-1!=(n=o.indexOf("//"))&&(e.mLineCount++,o=o.slice(0,n)+"<br>"+o.slice(n+2))}while(-1!=n);this.mTabLayout!=jc&&(t.innerHTML=o)}switch(this.mTabLayout!==Lc&&t.parentElement&&e.mTabIconUrl&&((i=jIcons.replaceOrAddToElem(t.parentElement,e.mTabIconUrl)).style.height=i.style.width=this.mTabIconSize+"px"),this.mTabLayout){case Lc:var a=(s-this.mFontHeight*e.mLineCount)/2;this.applyAElementPadding(t,0,0,a,0,s,r);break;case jc:i&&(t.parentElement.style.alignItems="center",t.parentElement.style.justifyContent="center");break;case Nc:i&&(t.parentElement.style.alignItems="center",i.style.left="2px");a=(s-this.mFontHeight*e.mLineCount)/2;this.applyAElementPadding(t,this.mTabIconSize+4,0,a,0,s,r);break;case Bc:i&&(t.parentElement.style.alignItems="center",i.style.right="2px");a=(s-this.mFontHeight*e.mLineCount)/2;this.applyAElementPadding(t,0,this.mTabIconSize+4,a,0,s,r);break;case Rc:i&&(t.parentElement.style.justifyContent="center",i.style.top="2px"),this.applyAElementPadding(t,0,0,s-(this.mFontHeight*e.mLineCount+2),0,s,r);break;case Mc:i&&(t.parentElement.style.justifyContent="center",i.style.bottom="2px"),this.applyAElementPadding(t,0,0,2,0,s,r)}e.mTabIconUrl&&this.mTabLayout!=Lc&&(t.style.backgroundSize=jIcons.getIconBackSize(e.mTabIconUrl))},qc.prototype.applyAElementPadding=function(t,e,i,s,r,n,o){0!=s&&(s<0&&(s=0),t.style.paddingTop=s+"px",t.style.height=n-s+"px"),0!=r&&(r<0&&(r=0),t.style.paddingBottom=r+"px",t.style.height=n-r+"px"),0!=e&&(e<0&&(e=0),t.style.paddingLeft=e+"px",t.style.width=o-e+"px"),0!=i&&(i<0&&(i=0),t.style.paddingRight=i+"px",t.style.width=o-i+"px")},qc.prototype.scrollTabToView=function(t,e){if(this.mNeedScroll&&!jOmnis.mDesign)if(this.delayedScrollTimer&&(clearTimeout(this.delayedScrollTimer),t=!0),t){var i=this;this.delayedScrollTimer=setTimeout((function(){s.call(i,e),i.delayedScrollTimer=null}),1)}else s.call(this,e);function s(t){var e=!1,i=this.mTabs[(t||this.mCurrentTab)-1],s=i.mTabStartOffset||0;if(this.mVertical){var r=jOmnis.useiScroll?this.iscroll?-this.iscroll.y:0:this.mTabDivElement.scrollTop,n=r+this.mTabDivElement.offsetHeight-1,o=i.mLiElement?this.getPixels(i.mLiElement.style.height):0;i.mTabStartOffset<r?e=!0:i.mTabStartOffset+o>n&&(e=!0,s-=this.mTabDivElement.offsetHeight-o-2*this.mTabBorderWidth)}else{n=(r=jOmnis.useiScroll?this.iscroll?-this.iscroll.x:0:this.mTabDivElement.scrollLeft)+this.mTabDivElement.offsetWidth-1;var a=i.mLiElement?this.getPixels(i.mLiElement.style.width):0;i.mTabStartOffset<r?e=!0:i.mTabStartOffset+a>n&&(e=!0,s-=this.mTabDivElement.offsetWidth-a-2*this.mTabBorderWidth)}(e||this.mMustScrollToView)&&(this.mMustScrollToView=!1,s>this.mMaxScrollPosition&&(s=this.mMaxScrollPosition),this.scrollToTab(s))}},qc.prototype.prepareArrowElement=function(t,e,i){var s=this.getClientElem(),r=document.createElement("img");r.id=this.childIdBase+t;var n=jGetOmnisString(this.form.inst,"ctl_tabs_scroll"+t);return r.alt=n,r.setAttribute("aria-label",n),r.setAttribute("role","button"),r.tabIndex=e?-1:0,r.style.position="absolute",r.style.width="16px",r.style.height="16px",this.mArrowsVisible=!0,e&&(r.style.visibility="hidden",this.mArrowsVisible=!1),r.onmouseup=i,r.style.overflow="visible",r.border=0,r.src="images/overlay.png",r.className="ctrl-arrow-"+t+(this.mDisableSystemFocus?" noFocus":" autoFocus"),s.appendChild(r),r},qc.prototype.getEnabled=function(t){return!this.elem.disabled&&t.mEnabled},qc.prototype.tabNumberForEvent=function(t,e){if(e||(e=this.iscroll?t.target:jOmnis.getEventCurrentTarget(t)),"A"!=e.tagName&&"SPAN"!==e.tagName||(e=e.parentNode),"LI"==e.tagName){var i=e.id.lastIndexOf("_");if(-1!=i)return parseInt(e.id.substr(i+1))}return 0},qc.prototype.tabClicked=function(t){var e=this.tabNumberForEvent(t);e>0&&this.setCurrentTab(e,!0)},qc.prototype.openMenu=function(t,e,i){if(this.mTrackMenus&&!this.elem.disabled){var s=this.mNextMenuTabNumber?this.mNextMenuTabNumber:this.tabNumberForEvent(t);if(this.mNextMenuTabNumber=0,s>0&&s<=this.mTabs.length){if(s==this.mOpenMenuTabNumber)return;var r=this.mTabs[s-1];if(!r.mEnabled)return void this.closeAnyOpenMenu(!0);var n=null;t&&(n=jOmnis.getEventCurrentTarget(t));var o=0;if(n&&(o=e?e.x+2:jOmnis.getElemPosRelativeToAncestor(n,this.elem).x+2,this.mLeftUpArrowElement&&"hidden"!=this.mLeftUpArrowElement.style.visibility&&(o-=this.mTabDivElement.scrollLeft)<zc&&(o=this.mTabDivPosition)),t&&jOmnis.isServerComms&&jOmnisMenuHandler.inOpenMenuEvent&&jOmnisMenuHandler.popupMenuParams&&jOmnisMenuHandler.popupMenuParams.menuObj==this)return this.mPopupOffsetLeft=o,this.mNextMenuTabNumber=s,this.mOpenMenuTabNumber=0,void(jOmnisMenuHandler.popupMenuParams.eventDiscarded=!0);if(r.mTabMenu&&r.mTabMenu.length>0){var a={};switch(a.menuForm=this.form,a.menuObj=this,a.menuName=r.mTabMenu,a.menuData=jOmnisMenuHandler.getMenuData(this.form.ident,a.menuName,!1),a.clickedObj=this,a.keyElem=this.elem,a.parentElem=this.elem,a.posX=n?o:this.mPopupOffsetLeft,a.posY=this.elem.offsetHeight+2,a.closeOnOverlay=!0,a.offsetY=0,a.posn=s,this.mSide){case Sc:a.posY-=this.mBaseEdgeWidth;break;case xc:a.offsetY=this.elem.clientHeight-this.mBaseEdgeWidth}this.closeAnyOpenMenu(!0),jOmnis.setOpacity(this.form.serverElem,255),this.mTrackContainer=this.clientElem.cloneNode(!0);var l=jOmnis.getElemPosRelativeToAncestor(this.clientElem,null),h=0,c=0;if(this.mArrowsVisible){for(var u=this.mTrackContainer.children.length-1;u>=0;--u){var d=this.mTrackContainer.children[u];"DIV"!=d.tagName||0==d.children.length?this.mTrackContainer.removeChild(d):this.mVertical?d.style.top=0:d.style.left=0}this.mVertical?(c=36,this.mTrackContainer.style.left=l.x+"px",this.mTrackContainer.style.top=l.y+zc+"px"):(h=36,this.mTrackContainer.style.left=l.x+zc+"px",this.mTrackContainer.style.top=l.y+"px")}else this.mTrackContainer.style.left=l.x+"px",this.mTrackContainer.style.top=l.y+"px";(l=jOmnis.getElemPosRelativeToAncestor(this.clientElem,this.form.serverElem)).x+=h/2,l.y+=c/2;var p=jOmnis.getOmnisWidth(this.elem)-h,m=jOmnis.getOmnisHeight(this.elem)-c,f=jOmnis.getOmnisWidth(this.form.serverElem),g=jOmnis.getOmnisHeight(this.form.serverElem),v=p,b=m;if(l.x+p>f)(v=f-l.x)<=0&&(v=1);if(l.y+m>g)(b=g-l.y)<=0&&(b=1);this.mTrackContainer.style.width=v+"px",this.mTrackContainer.style.height=b+"px",this.mTrackContainer.style.overflow="hidden",this.mTrackContainer.style.zIndex=jOmnis.getPopupZIndex(this.form,1),this.mTrackContainer.id=this.tabTrackID,this.mTrackContainer.classList.add(this.getTheme().getCSSClass()),jOmnis.setOpacity(this.getClientElem(),0),document.body.appendChild(this.mTrackContainer);var y=this.mTrackContainer.getElementsByTagName("LI"),C=this.mEventFunction;for(u=0;u<y.length;++u)y[u].id=this.childIdBase+"__"+(u+1),jOmnis.touchDevice||(y[u].onmouseover=C,y[u].onmouseout=C),y[u].onclick=C;var _=this.mTrackContainer.getElementsByTagName("UL");_[0].parentNode.scrollLeft=this.mTabDivElement.scrollLeft,_[0].parentNode.scrollTop=this.mTabDivElement.scrollTop,a.menuClassPrefix=this.buildCSSStylesMenus();var E=this.elem.getAttribute("data-css");return E&&(a.openedMenuClass=E.split(" ")[0]),a.focusElement=document.activeElement,a.selectFirstItemInMenu=!!i,a.controlMenu=!0,jOmnisMenuHandler.handleContextMenuOpen(a),void(this.mOpenMenuTabNumber=s)}}}this.closeAnyOpenMenu(!0)},qc.prototype.closeAnyOpenMenu=function(t){if(this.mOpenMenuTabNumber){t&&jOmnisMenuHandler.closeMenus(),this.mOpenMenuTabNumber=0,this.mTrackContainer&&(jOmnis.setOpacity(this.getClientElem(),255),document.body.removeChild(this.mTrackContainer),this.mTrackContainer=null);var e=this.form.serverElem.getAttribute("data-alpha");null!=e&&jOmnis.setOpacity(this.form.serverElem,1*e)}this.mNextMenuTabNumber=0},qc.prototype.setCurrentTab=function(t,e,i){if(t>0&&t<=this.mTabs.length&&this.getEnabled(this.mTabs[t-1])){var s=function(){e&&r.canSendEvent(eBaseEvent.evTabSelected)&&(r.eventParamsAdd("pTabNumber",t),r.sendEvent(eBaseEvent.evTabSelected))},r=this;if(this.mCurrentTab==t)this.mCanClickSel&&s();else{var n=this.mTabs[t-1],o=this.mTabs[this.mCurrentTab-1],a=o.mVisible||jOmnis.mDesign,l=n.mVisible||jOmnis.mDesign;a&&(o.mLiElement.className=o.mEnabled?"ctrl-tabs-li":"ctrl-tabs-li ctrl-tabs-li-disabled"),l&&(n.mLiElement.className=n.mEnabled?"ctrl-tabs-li ctrl-tabs-li-active":"ctrl-tabs-li ctrl-tabs-li-disabled");var h="";if(this.mVertical&&(h=this.mSide==Oc?"ctrl-tabs-vertical-text-right":"ctrl-tabs-vertical-text-left"),l){var c=n.mLiElement.firstChild;c.style.color=this.getCurrentTabTextColor(n),c.className=h+(this.mHotCurrent?" ctrl-tabs-a":"");var u=n.mLiElement.querySelector("svg");u&&Theme.SetThemedIconColor(u,this.getCurrentTabTextColor(n))}if(a){var d=o.mLiElement.firstChild;d.style.color=this.getTabTextColor(o),d.className=h+(this.getEnabled(o)?" ctrl-tabs-a":"");var p=o.mLiElement.querySelector("svg");p&&Theme.SetThemedIconColor(p,this.getTabTextColor(o))}if(this.mCurrentTabExtra>0){switch(this.mSide){case Sc:a&&(o.mLiElement.style.top=this.mCurrentTabExtra+"px",o.mLiElement.style.height=this.getPixels(o.mLiElement.style.height)-this.mCurrentTabExtra+"px"),l&&(n.mLiElement.style.top=0,n.mLiElement.style.height=this.getPixels(n.mLiElement.style.height)+this.mCurrentTabExtra+"px");break;case xc:a&&(o.mLiElement.style.height=this.getPixels(o.mLiElement.style.height)-this.mCurrentTabExtra+"px"),l&&(n.mLiElement.style.height=this.getPixels(n.mLiElement.style.height)+this.mCurrentTabExtra+"px");break;case Dc:a&&(o.mLiElement.style.left=this.mCurrentTabExtra+"px",o.mLiElement.style.width=this.getPixels(o.mLiElement.style.width)-this.mCurrentTabExtra+"px"),l&&(n.mLiElement.style.left=0,n.mLiElement.style.width=this.getPixels(n.mLiElement.style.width)+this.mCurrentTabExtra+"px");break;case Oc:a&&(o.mLiElement.style.width=this.getPixels(o.mLiElement.style.width)-this.mCurrentTabExtra+"px"),l&&(n.mLiElement.style.width=this.getPixels(n.mLiElement.style.width)+this.mCurrentTabExtra+"px")}a&&(d.style.width=this.mVertical?o.mLiElement.style.height:o.mLiElement.style.width),l&&(c.style.height=this.mVertical?n.mLiElement.style.width:n.mLiElement.style.height),a&&this.layoutAElement(d,o),l&&this.layoutAElement(c,n)}this.mCurrentTab=t,this.updateAriaSelected(this.mCurrentTab),this.scrollTabToView(),this.updateIndicatorPosition(),i||this.updatePagedPane(!0,e),this.form.inst.doLayoutComponents(),s()}this.rowCtrl&&this.setPropCli(Uc.currenttab,t,this.rowNumber)}},qc.prototype.updateIndicatorPosition=function(t){var e=this.mTabs[this.mCurrentTab-1],i=this.indicatorElem;if(!this.isActive()||this.mCurrentTab<=0||this.mCurrentTab>this.mTabs.length||!e.mVisible)i.style.display="none";else{i.style.display="block",t&&(i.style.transitionProperty="none"),i.style.left=i.style.right=i.style.top=i.style.bottom=i.style.width=i.style.height="";var s=this.hasSingleBorders()&&1!==this.mCurrentTab;if(this.mVertical){var r=this.iscroll&&this.iscroll.y||0;i.style.top=e.mTabStartOffset+(s?0:this.mTabBorderWidth)+r+"px",i.style.height=e.mLiElement.clientHeight+"px",i.style.width="2px",this.mSide===Dc?i.style.right="0":i.style.left="0"}else{var n=this.iscroll&&this.iscroll.x||0;i.style.left=e.mTabStartOffset+(s?0:this.mTabBorderWidth)+n+"px",i.style.width=e.mLiElement.clientWidth+"px",i.style.height="2px",this.mSide===Sc?i.style.bottom="0":i.style.top="0"}t&&(i.style.transitionProperty="inherit")}},qc.prototype.updatePagedPane=function(t,e){(t||this.mFormBuilt)&&(null==this.mPagedPaneCtrl&&this.hasPagedPane()&&(this.rowCtrl?this.mPagedPaneCtrl=this.rowCtrl.getNamedControlFromRow(this.mPagedPaneName,this.rowNumber):this.mPagedPaneCtrl=this.form.findChildByName(this.mPagedPaneName),null!=this.mPagedPaneCtrl&&this.mPagedPaneCtrl.registerTabs(this)),null!=this.mPagedPaneCtrl&&(this.mPagedPaneCtrl.makeTabPanel(),t&&(this.mPagedPaneCtrl.setCurrentPage(this.mCurrentTab),e&&this.mPagedPaneCtrl.sendUserChangedPageEvent()),this.updatePagedPaneBorder(!0)))},qc.prototype.updatePagedPaneBorder=function(t){if(this.removePagedPaneBorderDiv(),0==this.mBaseEdgeWidth&&this.mTabDivElement&&this.mTabBorderWidth){var e,i,s,r=this,n=this.mPagedPaneCtrl;this.mVertical?(e=this.getPixels(this.elem.style.top)-this.getPixels(n.elem.style.top)+this.mTabDivPosition,i=this.getPixels(this.mTabDivElement.style.height),s=this.mTabDivElement.scrollTop):(e=this.getPixels(this.elem.style.left)-this.getPixels(n.elem.style.left)+this.mTabDivPosition,i=this.getPixels(this.mTabDivElement.style.width),s=this.mTabDivElement.scrollLeft),isNaN(e)&&(e=0),isNaN(i)&&(i=0);var o=Math.max(0,this.mTabBorderWidth-s);!function(t,e){var i=document.createElement("div");i.id=n.childIdBase+"ppdiv",i.style.position="absolute",function(t){var e=n.clientElem.style.backgroundColor;if(-1!=e.toLowerCase().indexOf("rgba(")){var i=e.lastIndexOf(",");t.style.backgroundColor=e.substr(0,i)+",1.0)"}else t.style.backgroundColor=n.clientElem.style.backgroundColor}(i),r.mVertical?(i.style.top=t+"px",i.style.height=e+"px",i.style.width=n.borderWidth+"px",r.mSide==Dc?i.style.left=0:i.style.left=r.getPixels(n.elem.style.width)-n.borderWidth+"px"):(i.style.left=t+"px",i.style.width=e+"px",i.style.height=n.borderWidth+"px",r.mSide==Sc?i.style.top=0:i.style.top=r.getPixels(n.elem.style.height)-n.borderWidth+"px"),n.elem.appendChild(i)}(e+o,i-o-Math.max(0,this.mTabBorderWidth-(this.mMaxScrollPosition-s))),t&&(this.removeTabBorderDivs(),this.mTabSpacing&&function(){for(var t=n.borderWidth+"px",e=r.mTabSpacing+"px",i="-"+(r.mTabBorderWidth+r.mTabSpacing)+"px",s=0;s<r.mTabs.length-1;s++)if(r.mTabs[s].mVisible){var o=document.createElement("div");switch(o.className=$c,o.style.backgroundColor=n.getBorderColor(n.clientElem),o.style.position="absolute",r.mSide){case Sc:o.style.height=t,o.style.width=e,o.style.bottom="0",o.style.right=i;break;case xc:o.style.height=t,o.style.width=e,o.style.top="0",o.style.right=i;break;case Dc:o.style.width=t,o.style.height=e,o.style.right="0",o.style.bottom=i;break;case Oc:o.style.width=t,o.style.height=e,o.style.left="0",o.style.bottom=i}r.mTabs[s].mLiElement.appendChild(o)}}())}else this.removeTabBorderDivs()},qc.prototype.removePagedPaneBorderDiv=function(){if(null!=this.mPagedPaneCtrl){var t=document.getElementById(this.mPagedPaneCtrl.childIdBase+"ppdiv");t&&this.mPagedPaneCtrl.elem.removeChild(t)}},qc.prototype.removeTabBorderDivs=function(){for(var t=this.clientElem.getElementsByClassName($c),e=t.length,i=0;i<e;i++)t[0].parentElement.removeChild(t[0])},qc.prototype.arrowMouseDown=function(t,e){this.mScrollAdjust=e?-this.mPixelsPerScroll:this.mPixelsPerScroll,this.mTimeouts=0,this.mMilliSeconds=10,this.scrollTimer()},qc.prototype.arrowMouseUp=function(t,e){this.mTimeout&&(clearTimeout(this.mTimeout),this.mTimeout=null)},qc.prototype.scrollTimer=function(){this.arrowMouseUp(),this.adjustScrollPosition()&&(++this.mTimeouts,25==this.mTimeouts?(this.mMilliSeconds=5,this.mScrollAdjust*=2):50==this.mTimeouts?(this.mMilliSeconds=2,this.mScrollAdjust*=2):100==this.mTimeouts&&(this.mMilliSeconds=1,this.mScrollAdjust*=2),this.mTimeout=setTimeout(this.makeFunction("scrollTimer",0),this.mMilliSeconds))},qc.prototype.adjustScrollPosition=function(){var t,e=this.mVertical?this.mTabDivElement.scrollTop:this.mTabDivElement.scrollLeft;return e+=this.mScrollAdjust,this.mScrollAdjust<0?(e<0&&(e=0),t=e>0):(e>this.mMaxScrollPosition&&(e=this.mMaxScrollPosition),t=e<this.mMaxScrollPosition),this.setScrollPosition(e),t},qc.prototype.scrollToTab=function(t){if(!this.iscroll)return t<0?t=0:t>this.mMaxScrollPosition&&(t=this.mMaxScrollPosition),void this.setScrollPosition(t);this.mVertical?this.iscroll.scrollTo(0,-t,0):this.iscroll.scrollTo(-t,0,0)},qc.prototype.setScrollPosition=function(t){if(!this.mSettingScrollPosition){this.mSettingScrollPosition=!0;try{this.mVertical?this.mTabDivElement.scrollTop=t:this.mTabDivElement.scrollLeft=t;var e=this.mDisableSystemFocus?"noFocus":"autoFocus",i=e+" ctrl-arrow-"+(this.mVertical?"up":"left");this.mLeftUpArrowElement&&(this.mLeftUpArrowElement.className=0==t?i+"-dis":i),i=e+" ctrl-arrow-"+(this.mVertical?"down":"right"),this.mRightDownArrowElement&&(this.mRightDownArrowElement.className=t>=this.mMaxScrollPosition?i+"-dis":i),this.updatePagedPaneBorder(!1)}catch(t){}this.mSettingScrollPosition=!1}},qc.prototype.touchScrollEnded=function(t){null!=this.mPagedPaneCtrl&&this.updatePagedPaneBorder(!1),this.updateIndicatorPosition(!0)},qc.prototype.touchChangedPosition=function(){this.updateIndicatorPosition(!0)},qc.prototype.hasPagedPane=function(){return this.mPagedPaneName&&""!=this.mPagedPaneName},qc.prototype.resolveBuiltInPropertyName=function(t){var e=Uc[t];return e||this.superclass.resolveBuiltInPropertyName.call(this,t)},qc.prototype.setTabCount=function(t){if(t<0?t=0:t>256&&(t=256),this.mTabs.length!=t){if(this.mTabs.length>t){this.mTabs.splice(t,this.mTabs.length-t),this.mVisibleTabCount=0;for(var e=0;e<this.mTabs.length;++e)this.mVisibleTabCount++;if(this.mCurrentTab>t){var i=this.getFirstSelectableTab();this.mCurrentTab=i||1,this.updatePagedPane(!0)}this.mSelectedTab>t&&(this.mSelectedTab=1)}else{var s=t-this.mTabs.length;for(e=0;e<s;++e){var r={mText:"",mLineCount:1,mVisible:!0};this.mVisibleTabCount++,r.mEnabled=!0,r.mTabTooltip="",r.mTabIconUrl=null,r.mTabMenu=null,this.mTabs.push(r)}s==t&&(this.mSelectedTab=1)}this.mCalcTabWidths=!0,this.mRebuildElements=!0}},qc.prototype.isItemProperty=function(t){switch(t){case Uc.tabvisible:case Uc.tabenabled:case Uc.tabtooltip:case Uc.tabiconid:case Uc.tabtext:case Uc.tabmenu:return!0}return!1},qc.prototype.currentItemProperty=function(){return Uc.selectedtab},qc.prototype.getDropTarget=function(t){for(this.mDropId=this.mCurrentTab;t&&t!=this.clientElem;){if(jOmnis.hasClass(t,"ctrl-tabs-li")){this.mDropId=this.tabNumberForEvent(null,t);break}t=t.parentNode}return this.superclass.getDropTarget.call(this,t)},qc.prototype.focus=function(){if(this.mTabs.length&&!this.elem.disabled){var t=this.mCurrentTab,e=t&&this.mTabs[t-1]&&(this.mTabs[t-1].mVisible||jOmnis.mDesign)?this.mTabs[t-1].mLiElement:null;e||(e=(t=this.getFirstSelectableTab())&&this.mTabs[t-1]?this.mTabs[t-1].mLiElement:null),e&&e.focus()}else"hidden"!=this.mLeftUpArrowElement.style.visibility&&this.mLeftUpArrowElement.focus()},qc.prototype.setTabIndex=function(t){for(var e=-1!=t&&this.isActive()?0:-1,i=!1,s=this.mNewCurrentTab>0,r=0;r<this.mTabs.length;++r){var n=this.mTabs[r].mLiElement;n&&(i||!this.mTabs[r].mEnabled||s&&r!==this.mCurrentTab-1?n.tabIndex=-1:(n.tabIndex=e,i=!0))}return t},qc.prototype.disableSystemFocusChanged=function(){this.setTabIndex(this.elem.disabled?-1:0),this.focusElem&&(this.focusElem=null);var t=this;function e(e){e&&(t.mDisableSystemFocus?(jOmnis.removeClass(e,"autoFocus"),jOmnis.addClass(e,"noFocus")):(jOmnis.removeClass(e,"noFocus"),jOmnis.addClass(e,"autoFocus")))}e(this.mLeftUpArrowElement),e(this.mRightDownArrowElement),this.updateFocusBorder()},qc.prototype.canTabToObject=function(){return!this.getTrueVisibility()||this.elem.disabled&&"hidden"==this.mLeftUpArrowElement.style.visibility?null:this},qc.prototype.getFirstSelectableTab=function(){for(var t=0;t<this.mTabs.length;t++)if(this.mTabs[t].mEnabled&&(this.mTabs[t].mVisible||jOmnis.mDesign))return t+1},qc.prototype.getLastSelectableTab=function(){for(var t=this.mTabs.length-1;t>=0;t--)if(this.mTabs[t].mEnabled&&(this.mTabs[t].mVisible||jOmnis.mDesign))return t+1},qc.prototype.setAriaControls=function(t){if(t)for(var e=0;e<this.mTabs.length;e++)this.mTabs[e].mLiElement&&t.pages[e]&&this.mTabs[e].mLiElement.setAttribute("aria-controls",t.pages[e].id);else for(e=0;e<this.mTabs.length;e++)this.mTabs[e].mLiElement&&this.mTabs[e].mLiElement.removeAttribute("aria-controls")},qc.prototype.updateAriaSelected=function(t){for(var e=0;e<this.mTabs.length;e++)this.mTabs[e].mLiElement&&this.mTabs[e].mLiElement.setAttribute("aria-selected","false");t>0&&t<=this.mTabs.length&&this.mTabs[t-1].mLiElement&&this.mTabs[t-1].mLiElement.setAttribute("aria-selected","true")},qc.prototype.setMenuTimeout=function(){this.preventMouseOver=!0;var t=this;this.hoverTimer&&(clearTimeout(this.hoverTimer),this.hoverTimer=null),this.hoverTimer=setTimeout((function(){t.preventMouseOver=!1}),25)},qc.prototype.setDesignScrollInfo=function(t,e){this.mUlElement&&(this.mUlElement.style.width=t+"px"),this.mMaxScrollPosition=t,this.mTabDivElement&&(this.mVertical?this.mTabDivElement.scrollTop=e:this.mTabDivElement.scrollLeft=e),this.setScrollPosition(e)},qc.prototype.hasSingleBorders=function(){return!this.mTabSpacing&&!this.mTabRadius&&!this.mCurrentTabExtra},qc.prototype.resolveBackgroundColor=function(t){var e;switch(t){case Ac:e=this.resolveDefaultColor(this.mTabBackColor,Vc.BACKGROUND);break;case Pc:e=this.mTabHotBackColor!==o.JT?this.mTabHotBackColor:this.resolveBackgroundColor(Ac);break;case Ic:e=this.resolveDefaultColor(this.mTabCurBackColor,Vc.TAB_CUR_BACKCOLOR_DEFAULT)}return e},qc.prototype.updateFocusedTab=function(t){this.focusedTab!==t&&(this.focusedTab&&jOmnis.removeClass(this.focusedTab,"ctrl-tabs-li-focused"),t&&jOmnis.addClass(t,"ctrl-tabs-li-focused"),this.focusedTab=t)},qc.prototype.updateFocusBorder=function(){if(this.mFocusBorderElem){var t;switch(this.mSide){case Sc:t="solid solid none solid";break;case xc:t="none solid solid solid";break;case Dc:t="solid none solid solid";break;case Oc:t="solid solid solid none"}this.mFocusBorderElem.style.borderStyle=t}};var Kc=qc,Gc={evTimer:1};function Yc(){this.init_class_inst()}Yc.prototype=new ctrl_base,Yc.prototype.init_class_inst=function(){this.superclass=ctrl_base.prototype,this.superclass.init_class_inst.call(this),this.timervalue=1,this.running=0,this.useseconds=1,this.mCustomEvents=Gc,this.mFocusStyle=eBaseFocusStyle.eNone,this.activeReplacesEnabled=!0,this.mCanHaveDesignBorder=0!=jOmnis.mDesign,this.showDesignName=!0},Yc.prototype.init_ctrl_inst=function(t,e,i,s){this.superclass.init_ctrl_inst.call(this,t,e,i,s);var r=this.getClientElem();return this.removeFromTabOrder(),this.timervalue=1*r.getAttribute("data-timervalue"),this.running="1"==r.getAttribute("data-running"),this.useseconds="1"==r.getAttribute("data-useseconds"),this.checkTimer(),this.update(),!1},Yc.prototype.checkTimer=function(){if(this.mTimeout&&(clearTimeout(this.mTimeout),this.mTimeout=null),0!=this.running){var t=this.timervalue;this.useseconds&&(t*=1e3),this.mTimeout=setTimeout(this.makeFunction("doTimer",0),t)}},Yc.prototype.doTimer=function(){this.mTimeout=null,this.canSendEvent(Gc.evTimer)&&0==jOmnis.modalDialogOpen?(this.form.inst.registerEventResponseObject(this),this.sendEvent("evTimer")):this.checkTimer()},Yc.prototype.updateCtrl=function(){this.getClientElem().innerHTML=""},Yc.prototype.handleEvent=function(t){return t.type,this.superclass.handleEvent.call(this,t)},Yc.prototype.getProperty=function(t){switch(t){case Xc.timervalue:return this.timervalue;case Xc.running:return!!(1*this.running);case Xc.useseconds:return!!(1*this.useseconds)}return this.superclass.getProperty.call(this,t)},Yc.prototype.getCanAssign=function(t){switch(t){case Xc.timervalue:case Xc.running:case Xc.useseconds:return!0}return this.superclass.getCanAssign.call(this,t)};var Xc={timervalue:"$timervalue",running:"$running",useseconds:"$useseconds"};Yc.prototype.setProperty=function(t,e){switch(t){case Xc.timervalue:return this.timervalue=e,this.form.inst.registerPropertyObject(this),!0;case Xc.running:return this.running=e,this.form.inst.registerPropertyObject(this),!0;case Xc.useseconds:return this.useseconds=e,this.form.inst.registerPropertyObject(this),!0}return this.superclass.setProperty.call(this,t,e)},Yc.prototype.applyPropertyChanges=function(){this.form.inst.registerEventResponseObject(null),this.checkTimer()},Yc.prototype.eventResponseHasBeenProcessed=function(){this.checkTimer()},Yc.prototype.getAriaDisabledElem=function(){return null};var Jc=Yc;function Qc(t){return Qc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qc(t)}function Zc(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function tu(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Zc(Object(i),!0).forEach((function(e){eu(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Zc(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function eu(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function iu(){this.init_class_inst()}iu.prototype=function(){var t,e="$itemcount",i="$toolbartitle",s="$showitemtext",r="$showitemicons",n="$showdividers",l="$dividercolor",h="$iconcolor",c="$sidemenucolor",u="$overflowcolor",d="$toolbaractivecolor",p="$toolbarhovercolor",m="$sidemenuhovercolor",f="$overflowhovercolor",g="$currentitem",v="$itemiconid",b="$itemtext",y="$itemoverflow",C="$itemenabled",_="$sidemenu",E="$itemwidth",w="$displaystyle",k="$titlefontsize",T="$menudirection",S="$verticaltoolbar",x="$showtooltips",D="$selecteditem",O="$showselecteditem",A="$selectedcolor",P="$selectedtextcolor",I="$selectedlinecolor",L="$toolbarhovertextcolor",j="$sidemenutextcolor",N="$sidemenuhovertextcolor",B="$overflowtextcolor",R="$overflowhovertextcolor",M="$moveitem",F=6e3,H="ctrl-tb-horz",z="ctrl-tb-vert",W="ctrl-tb-overlay",$="ctrl-tb-bar",U="ctrl-tb-item",V="ctrl-tb-item-text",q="ctrl-tb-title",K="ctrl-tb-overflow-btn",G="ctrl-tb-overflow",Y="ctrl-tb-overflow-visible",X="ctrl-tb-overflow-item",J="ctrl-tb-hamburger-btn",Q="ctrl-tb-menu-wrapper",Z="ctrl-tb-sidemenu",tt="ctrl-tb-sidemenu-visible",et="ctrl-tb-group-header",it="ctrl-tb-menuitem",st="ctrl-tb-focused",rt="ctrl-tb-selected",nt="ctrl-tb-selected-line",ot="ctrl-tb-disabled-item",at=0,lt=1,ht=2,ct=3,ut=0,dt=1,pt=2,mt=3,ft=0,gt=1,vt=2,bt=0,yt=1,Ct=0,_t=1,Et=2,wt=3,kt=Object.create(a.U2.prototype),Tt=tu(tu({},a.Mr),{},{SELECTED_COLOR:"SELECTED_COLOR",DIVIDER_COLOR:"DIVIDER_COLOR",ICON_COLOR:"ICON_COLOR",SIDEMENU_COLOR:"SIDEMENU_COLOR",SELECTED_LINE_COLOR:"SELECTED_LINE_COLOR"});kt.DefaultColors=tu(tu({},a.U2.prototype.DefaultColors),{},(eu(t={},Tt.BACKGROUND,o.l1.primary),eu(t,Tt.SELECTED_COLOR,o.l1.secondary),eu(t,Tt.DIVIDER_COLOR,o.l1.border),eu(t,Tt.ICON_COLOR,o.l1.primaryText),eu(t,Tt.SIDEMENU_COLOR,o.l1.surface),eu(t,Tt.SELECTED_LINE_COLOR,o.l1.secondary),t)),kt.mAcceptsReturn=!0,kt.mAcceptsEscape=!0,kt.baseClassName="omnis-toolbar",kt.usesNotActiveOverlay=!0,kt.activeReplacesEnabled=!0,kt.init_class_inst=function(){this.superclass=a.U2.prototype,this.superclass.init_class_inst.call(this),this.mFocusStyle=eBaseFocusStyle.eCustom},kt.delete_class_inst=function(){this.initialCss&&jOmnis.removeStyleSheet(this.initialCss),this.colorCss&&jOmnis.removeStyleSheet(this.colorCss),this.superclass.delete_class_inst.call(this)},kt.init_ctrl_inst=function(t,e,i,s){this.superclass.init_ctrl_inst.call(this,t,e,i,s),this.mData=this.getData();var r=this.clientElem;r.setAttribute("role","toolbar"),this.makeChildIdBase(r),this.itemCount=+r.getAttribute("data-items"),this.currentItem=+r.getAttribute("data-curitem"),this.itemWidth=+r.getAttribute("data-itemwidth"),this.toolbarTitle=r.getAttribute("data-title")||"",this.showItemText=!!r.getAttribute("data-showtext"),this.showItemIcons=!!r.getAttribute("data-showicons"),this.showDividers=!!r.getAttribute("data-showdividers"),this.sideMenuProp=!!r.getAttribute("data-sidemenu"),this.displayStyle=+r.getAttribute("data-displaystyle"),this.titleFontSize=+r.getAttribute("data-titlesize"),this.menuDirection=+r.getAttribute("data-menudir"),this.verticalToolbar=!!r.getAttribute("data-vertical"),this.showTooltips=!!r.getAttribute("data-tooltips"),this.selectedItem=+r.getAttribute("data-selitem"),this.showSelectedItem=!!r.getAttribute("data-showsel"),this.selectedColor=+r.getAttribute("data-selectedcolor"),this.selectedTextColor=+r.getAttribute("data-selectedtextcolor"),this.dividerColor=+r.getAttribute("data-dividercol"),this.iconColor=+r.getAttribute("data-iconcol"),this.overflowColor=+r.getAttribute("data-overflowcol"),this.toolbarHoverColor=+r.getAttribute("data-tbhover"),this.overflowHoverColor=+r.getAttribute("data-overflowhover"),this.toolbarHoverTextColor=+r.getAttribute("data-tbhovertextcolor"),this.overflowTextColor=+r.getAttribute("data-overflowtextcolor"),this.overflowHoverTextColor=+r.getAttribute("data-overflowhovertextcolor"),this.itemData=[];for(var n=1;n<=this.itemCount;n++){var o=r.getAttribute("data-item"+n).split(",");this.itemData[n-1]={text:o[0],iconId:o[1],forceOverflow:"1"===o[2],enabled:"0"!==o[3]}}return this.addEventHandlers(r),this.sideMenuObj=this.sideMenu(),this.rebuildHTML(),this.applyInitialCss(),this.applyColorCss(),this.elem.addEventListener("focusin",this.mEventFunction),this.elem.addEventListener("focusout",this.mEventFunction),!1},kt.sideMenu=function(){var t=this,e=this.clientElem,i={isOpen:!1,grouped:!1,itemHeight:40};return i.backgroundColor=+e.getAttribute("data-sidecol"),i.hoverColor=+e.getAttribute("data-sidehover"),i.selectedLineColor=+e.getAttribute("data-selectedlinecolor"),i.textColor=+e.getAttribute("data-sidetextcolor"),i.hoverTextColor=+e.getAttribute("data-sidehovertextcolor"),i.selectedLine={mainLine:0,subLine:0},i.rebuild=function(){if(this.elem&&(e.removeChild(this.elem.parentNode),this.elem=null),this.isOpen=!1,t.sideMenuProp&&t.mData&&t.mData.__list.getRowCount()){var i=document.createElement("div");jOmnis.addClass(i,Q),this.elem=document.createElement("ul");var s=this.elem;jOmnis.addClass(s,Z),s.setAttribute("role","menu"),i.appendChild(s);var r=this;s.addEventListener(jOmnis.transitionEndEvent,(function(){r.isOpening&&(r.isOpening=!1,r.focusLine())})),this.updateDimensions(),t.hamburgerBtnElem?e.insertBefore(i,t.hamburgerBtnElem.nextSibling):e.appendChild(i),this.rebuildContents()}},i.rebuildContents=function(){this.grouped=null!=t.mData.__list.getData(1,1).lstDef;var e=t.mData.lstData;if(this.elem.innerHTML="",this.grouped)for(var i=1;i<=e.length;i++){var s=e[i-1][Ct].lstData,r=e[i-1][_t],n=e[i-1][Et],o=!n&&e[i-1][wt],a=document.createElement("li");a.setAttribute("role","presentation"),a.setAttribute("data-group",i+""),this.elem.appendChild(a);var l=document.createElement("div");jOmnis.addClass(l,et),jOmnis.addClass(l,t.mDisableSystemFocus?"noFocus":"autoFocus"),l.setAttribute("data-clickable","true"),l.tabIndex=-1,l.innerHTML=jOmnis.escapeHTML(r),a.appendChild(l),n||(l.innerHTML+='<svg fill="var(--om-tint-color)" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M177 159.7l136 136c9.4 9.4 9.4 24.6 0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9 0L160 255.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9 0L7 329.7c-9.4-9.4-9.4-24.6 0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1z"/></svg><svg fill="var(--om-tint-color)" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z"/></svg>',l.setAttribute("role","button"),l.setAttribute("aria-expanded",o?"false":"true")),t.addRippleToElem(l,vt);var h=document.createElement("ul");h.setAttribute("role","presentation"),h.style.display=o?"none":"block",h.setAttribute("data-expanded",o?"false":"true"),a.appendChild(h);for(var c=1;c<=s.length;c++)this.addItem(h,c,s[c-1][bt],s[c-1][yt])}else for(c=1;c<=e.length;c++)this.addItem(this.elem,c,e[c-1][bt],e[c-1][yt]);this.updateSelectedLine()},i.addItem=function(e,i,s,r){var n,o=document.createElement("li");(jOmnis.addClass(o,it),jOmnis.addClass(o,t.mDisableSystemFocus?"noFocus":"autoFocus"),o.setAttribute("data-clickable","true"),o.setAttribute("data-item",i+""),o.setAttribute("role","menuitem"),o.tabIndex=-1,n=jIcons.replaceOrAddToElem(o,t.setupIcon(r)))||((n=document.createElement("img")).style.visibility="hidden",o.appendChild(n));var a=document.createElement("span");a.innerHTML=jOmnis.escapeHTML(s),o.appendChild(a),t.addRippleToElem(o,vt),e.appendChild(o)},i.updateDimensions=function(){if(this.elem){var i=this.elem.parentNode,s=t.menuDirection;i.style.bottom=i.style.top=i.style.left=i.style.right="",s===dt?i.style.bottom=e.offsetHeight+"px":s===ut?i.style.top=e.offsetHeight+"px":s===mt?i.style.right="100%":s===pt&&(i.style.left="100%"),this.elem.style.height=t.getMenuMaxHeight(!0),this.elem.style.left=s===mt?"100%":"-100%"}},i.open=function(){if(!this.isOpen&&this.elem){var e=this.elem.parentNode;jOmnis.addClass(e,tt),t.hamburgerBtnElem.setAttribute("aria-expanded","true"),this.isOpen=!0,this.isOpening=!0,t.addOverlay()}},i.close=function(){if(this.isOpen){var e=this.elem.parentNode;jOmnis.removeClass(e,tt),t.hamburgerBtnElem.setAttribute("aria-expanded","false"),this.isOpen=!1,t.overflowMenuIsOpen||t.removeOverlay()}},i.focusLine=function(){var e=this.getItemElem(this.selectedLine);e&&!e.offsetWidth&&this.grouped&&this.toggleGroup(e.parentElement.parentElement),e?e.focus():((e=this.elem.querySelector("[data-clickable]")).focus(),t.updateFocusedElem(null))},i.toggleGroup=function(e){var i=e.firstChild,s=+e.getAttribute("data-group");if(!t.mData.lstData[s-1][Et]){var r=i.nextElementSibling,n="true"===i.getAttribute("aria-expanded");r.style.display=n?"none":"block",r.setAttribute("data-expanded",n?"false":"true"),i.setAttribute("aria-expanded",n?"false":"true")}},i.getItemElem=function(t){if(this.elem&&t.mainLine){if(this.grouped){var e=this.elem.querySelector("[data-group='"+t.mainLine+"']");return e?e.querySelector("[data-item='"+t.subLine+"']"):null}return this.elem.querySelector("[data-item='"+t.mainLine+"']")}return null},i.updateSelectedLine=function(){var e=t.getData("#L");this.selectedLine.mainLine=e,this.grouped&&e?this.selectedLine.subLine=t.mData.lstData[e-1][Ct].lstL:this.selectedLine.subLine=0,this.applySelectedLineStyle()},i.setSelectedLine=function(e){this.selectedLine=e,t.setData(e.mainLine,"#L"),this.grouped&&t.setData(e.subLine,"#NCELL",[e.mainLine,1,"#L"]),this.applySelectedLineStyle()},i.applySelectedLineStyle=function(){if(this.elem){var t=this.elem.querySelector("."+nt);t&&jOmnis.removeClass(t,nt);var e=this.getItemElem(this.selectedLine);e&&jOmnis.addClass(e,nt)}},i},kt.updateCtrl=function(t,e,i,s){var r=this.getData();this.mData!==r&&(this.mData=r,""===t&&(!(!this.mData||!this.mData.__list.getRowCount())&&this.sideMenuProp&&this.sideMenuObj.elem?this.sideMenuObj.rebuildContents():this.sideMenuObj.rebuild()));this.sideMenuObj.updateSelectedLine()},kt.sizeChanged=function(){this.superclass.sizeChanged.call(this),this.updateToolbarLayout(),this.sideMenuObj.updateDimensions()},kt.addEventHandlers=function(t){t.onmousedown=this.mEventFunction,t.onclick=this.mEventFunction,jOmnis.touchDevice&&(t.ontouchstart=this.mEventFunction,t.ontouchend=this.mEventFunction),t.onkeydown=this.mEventFunction,t.onkeyup=this.mEventFunction},kt.handleEvent=function(t){if(!this.isActive())return!0;switch(t.type){case"mousedown":jOmnis.hasClass(t.target,ot)&&t.preventDefault();break;case"click":return this.handleClick(t);case"keydown":this.handleKeyDown(t);break;case"keyup":this.handleKeyUp(t);break;default:return this.superclass.handleEvent.call(this,t)}},kt.handleClick=function(t){var e=this.getClickableParent(t.target);if(e)if(jOmnis.hasClass(e,U)||jOmnis.hasClass(e,X)){if(jOmnis.hasClass(e,ot))return;this.updateSelectedItem(e),this.canSendEvent(eBaseEvent.evClick)&&(jOmnis.stopEventNow(t),this.eventParamsAdd("pClickedItem",+e.getAttribute("data-index")),this.sendEvent(eBaseEvent.evClick)),jOmnis.hasClass(e,X)?(this.closeOverflowMenu(),this.overflowBtnElem.focus(),this.updateFocusedElem(null)):this.setFocusItem(e)}else if(jOmnis.hasClass(e,K)){if(this.overflowMenuIsOpen)this.closeOverflowMenu();else{this.openOverflowMenu();var i="."+X+":not(."+ot+")",s=this.overflowMenuElem.querySelector(i);if(s){var r=this;setTimeout((function(){s.focus(),r.updateFocusedElem(null)}),50)}}this.sideMenuObj.isOpen&&this.sideMenuObj.close(),this.setFocusItem(e)}else if(jOmnis.hasClass(e,J))this.sideMenuObj.isOpen?(this.sideMenuObj.close(),this.hamburgerBtnElem.focus()):this.sideMenuObj.open(),this.overflowMenuIsOpen&&this.closeOverflowMenu(),this.setFocusItem(e);else if(this.sideMenuObj.grouped&&jOmnis.hasClass(e,et)){var n=e.parentElement;this.sideMenuObj.toggleGroup(n),this.sendNavClickEvent(t,+n.getAttribute("data-group"),0)}else if(jOmnis.hasClass(e,it)){var o=this.sideMenuObj.grouped?+e.parentElement.parentElement.getAttribute("data-group"):0,a=+e.getAttribute("data-item"),l=this.sideMenuObj.grouped?{mainLine:o,subLine:a}:{mainLine:a,subLine:0};this.sideMenuObj.setSelectedLine(l),this.sendNavClickEvent(t,o,a),this.sideMenuObj.close(),this.hamburgerBtnElem.focus(),this.updateFocusedElem(null)}else jOmnis.hasClass(e,W)&&(this.sideMenuObj.isOpen&&this.sideMenuObj.close(),this.overflowMenuIsOpen&&this.closeOverflowMenu(),this.removeOverlay())},kt.handleKeyDown=function(t){var e,i=this.focusItem,s=document.activeElement,r=OmnisKeyboardHandler.getNormalizedEventKey(t),n=this;if("ArrowUp"!==r&&"ArrowDown"!==r&&"ArrowLeft"!==r&&"ArrowRight"!==r&&" "!==r&&"Home"!==r&&"End"!==r||t.preventDefault(),this.sideMenuObj.isOpen)switch(r){case"ArrowUp":a(u(),!0,!0,!1);break;case"ArrowDown":a(u(),!1,!0,!1);break;case"Home":l(!0);break;case"End":l(!1);break;case"Enter":this.handleClick(t);break;case"Tab":this.sideMenuObj.close();break;case"Escape":this.sideMenuObj.close(),this.hamburgerBtnElem.focus()}else if(this.overflowMenuIsOpen)switch(r){case"ArrowUp":a(p(),!0,!1,!0);break;case"ArrowDown":a(p(),!1,!1,!0);break;case"Home":h(!0);break;case"End":h(!1);break;case"Enter":this.handleClick(t);break;case"Tab":this.closeOverflowMenu();break;case"Escape":this.closeOverflowMenu(),this.overflowBtnElem.focus()}else switch(r){case"ArrowUp":o(!0,!0,dt);break;case"ArrowDown":o(!0,!1,ut);break;case"ArrowLeft":o(!1,!0,mt);break;case"ArrowRight":o(!1,!1,pt);break;case"Home":c(!0);break;case"End":c(!1);break;case"Enter":i.hasAttribute("data-index")&&this.handleClick(t);break;case"Escape":this.sendNextCancel()}function o(e,s,r){e===n.verticalToolbar?a(d(),s,!1,!1):i!==n.overflowBtnElem&&i!==n.hamburgerBtnElem||n.menuDirection===r&&n.handleClick(t)}function a(t,i,r,o){var a=Array.prototype.indexOf.call(t,s);if(-1!==a){i?a--:a++;var l=t.length-1;if(!(e=t[a=a<0?l:a>l?0:a]))return null;r||o||n.setFocusItem(e),r&&n.updateFocusedElem(e),e.focus()}}function l(t){var e=u(),i=t?e[0]:e[e.length-1];i.focus(),n.updateFocusedElem(i)}function h(t){var e=p();(t?e[0]:e[e.length-1]).focus()}function c(t){var e=d(),i=t?e[0]:e[e.length-1];i&&(n.setFocusItem(i),i.focus())}function u(){if(n.sideMenuObj.grouped){var t="."+et+", ul[data-expanded=true] ."+it;return n.sideMenuObj.elem.querySelectorAll(t)}return n.sideMenuObj.elem.children}function d(){var t="."+J+", ."+U+":not(."+ot+"), ."+K;return n.clientElem.querySelectorAll(t)}function p(){var t="."+X+":not(."+ot+")";return n.overflowMenuElem.querySelectorAll(t)}},kt.handleKeyUp=function(t){" "===OmnisKeyboardHandler.getNormalizedEventKey(t)&&(t.preventDefault(),this.handleClick(t))},kt.sendNavClickEvent=function(t,e,i){this.canSendEvent(F)&&(jOmnis.stopEventNow(t),this.eventParamsAdd("pClickedMenuGroup",e),this.eventParamsAdd("pClickedMenuItem",i),this.sendEvent("evNavigationClick"))},kt.disableSystemFocusChanged=function(){for(var t="."+U+",."+K+",."+J+",."+it+",."+et+",."+X,e=this.clientElem.querySelectorAll(t),i=0;i<e.length;i++)jOmnis.removeClass(e[i],this.mDisableSystemFocus?"autoFocus":"noFocus"),jOmnis.addClass(e[i],this.mDisableSystemFocus?"noFocus":"autoFocus")},kt.visibilityChanged=function(){var t=this.superclass.visibilityChanged.call(this);return this.getTrueVisibility()&&this.rebuildHTML(),t},kt.setTabIndex=function(){this.clientElem.tabIndex=-1,this.focusItem&&(this.focusItem.tabIndex=this.isActive()?0:-1)},kt.focus=function(){try{this.focusItem.focus(),this.updateCssFocused(this.focusItem,!0)}catch(t){}},kt.getProperty=function(t){switch(t){case i:return this.toolbarTitle;case e:return this.itemCount;case s:return this.showItemText;case r:return this.showItemIcons;case g:return this.currentItem;case v:return this.itemData[this.currentItem-1].iconId;case b:return this.itemData[this.currentItem-1].text;case y:return this.itemData[this.currentItem-1].forceOverflow;case C:return this.itemData[this.currentItem-1].enabled;case n:return this.showDividers;case l:return this.dividerColor;case h:return this.iconColor;case c:return this.sideMenuObj.backgroundColor;case u:return this.overflowColor;case d:return-1;case p:return this.toolbarHoverColor;case m:return this.sideMenuObj.hoverColor;case f:return this.overflowHoverColor;case _:return this.sideMenuProp;case E:return this.itemWidth;case w:return this.displayStyle;case k:return this.titleFontSize;case T:return this.menuDirection;case S:return this.verticalToolbar;case x:return this.showTooltips;case D:return this.selectedItem;case O:return this.showSelectedItem;case A:return this.selectedColor;case P:return this.selectedTextColor;case I:return this.sideMenuObj.selectedLineColor;case L:return this.toolbarHoverTextColor;case j:return this.sideMenuObj.textColor;case N:return this.sideMenuObj.hoverTextColor;case B:return this.overflowTextColor;case R:return this.overflowHoverTextColor;case M:return 0}return this.superclass.getProperty.call(this,t)},kt.getCanAssign=function(t){switch(t){case x:return!this.showItemText;case i:case e:case s:case r:case g:case v:case b:case y:case C:case n:case l:case h:case c:case u:case d:case p:case m:case f:case _:case E:case w:case k:case T:case S:case D:case O:case A:case P:case I:case L:case j:case N:case B:case R:return!0;case M:return 0!=jOmnis.mDesign}return this.superclass.getCanAssign.call(this,t)},kt.setProperty=function(t,o){if(!this.getCanAssign(t))return!1;switch(t){case g:if(+o<=0||+o>this.itemCount)return!1;var a=+o;if(this.currentItem=a,jOmnis.mDesign){var F=this.getItemElem(a);F?this.doHiliteSelectedItem(a,F):this.hiliteSelectedItem(0)}return!0;case e:if(+o===this.itemCount)return!0;if(+o>this.itemCount)for(;+o>this.itemCount;)this.itemData.push({text:"",iconId:"",forceOverflow:!1,enabled:!0}),this.itemCount++;else for(;+o<this.itemCount;)this.itemData.pop(),this.itemCount--;return this.updateToolbarLayout(),!0;case v:return this.itemData[this.currentItem-1].iconId=o?o+"":"",this.updateItemContents(this.currentItem),!0;case b:return this.itemData[this.currentItem-1].text=o?o+"":"",this.updateItemContents(this.currentItem),!0;case y:return this.itemData[this.currentItem-1].forceOverflow=!!o,this.updateToolbarLayout(),!0;case C:var H=!!o,z=this.itemData[this.currentItem-1];if(H!==z.enabled&&(z.enabled=H,this.updateItemContents(this.currentItem),this.updateFocusItem(),F=this.getItemElem(this.currentItem)))if(H)this.addRippleToElem(F,jOmnis.hasClass(F,U)?ft:gt);else{var W=F.querySelector("."+At.O7.RIPPLE);W&&W.parentElement.removeChild(W)}return!0;case i:return this.toolbarTitle=o?o+"":"",this.rebuildTitle(),this.updateToolbarLayout(),this.setProperty(eBaseProperties.arialabelledby,this.mAriaLabelledby),!0;case s:return this.showItemText=!!o,this.showItemText&&(this.showTooltips=!1),this.updateBarElem(),!0;case r:return this.showItemIcons=!!o,this.updateBarElem(),!0;case n:return this.showDividers=!!o,this.applyColorCss(),!0;case l:return this.dividerColor=+o,this.applyColorCss(),!0;case h:return this.iconColor=+o,this.applyColorCss(),!0;case c:return this.sideMenuObj.backgroundColor=+o,this.applyColorCss(),!0;case u:return this.overflowColor=+o,this.applyColorCss(),!0;case d:return!0;case p:return this.toolbarHoverColor=+o,this.applyColorCss(),jOmnisEffects.setRippleColor(this.barElem,this.getTheme(),this.resolveBackgroundColor(ft)),!0;case m:return this.sideMenuObj.hoverColor=+o,this.applyColorCss(),this.sideMenuObj.elem&&jOmnisEffects.setRippleColor(this.sideMenuObj.elem,this.getTheme(),this.resolveBackgroundColor(vt)),!0;case f:return this.overflowHoverColor=+o,this.applyColorCss(),jOmnisEffects.setRippleColor(this.overflowMenuElem,this.getTheme(),this.resolveBackgroundColor(gt)),!0;case _:return this.sideMenuProp=!!o,this.rebuildHTML(),!0;case E:return this.itemWidth=Math.max(1,+o),this.updateToolbarLayout(),!0;case w:this.displayStyle=+o;for(var $=0;$<this.itemsInToolbar.length;$++)this.updateItemContents(this.itemsInToolbar[$]);return!0;case k:return this.titleFontSize=+o,this.updateToolbarLayout(),!0;case T:var V=+o,q=V===mt||V===pt,K=V===dt||V===ut;return(this.verticalToolbar&&q||!this.verticalToolbar&&K)&&(this.menuDirection=V,this.rebuildHTML()),!0;case S:return this.verticalToolbar=!!o,this.verticalToolbar?this.menuDirection===ut?this.menuDirection=pt:this.menuDirection===dt&&(this.menuDirection=mt):this.menuDirection===mt?this.menuDirection=dt:this.menuDirection===pt&&(this.menuDirection=ut),this.rebuildHTML(),this.applyColorCss(),!0;case x:return this.showTooltips=!!o,this.updateBarElem(),!0;case D:return this.updateSelectedItem(+o),!0;case O:return this.showSelectedItem=!!o,this.updateSelectedItem(this.selectedItem,!0),!0;case A:return this.selectedColor=+o,this.applyColorCss(),!0;case P:return this.selectedTextColor=+o,this.applyColorCss(),!0;case eBaseProperties.arialabel:var G=this.superclass.setProperty.call(this,t,o);return this.setProperty(eBaseProperties.arialabelledby,this.mAriaLabelledby),G;case eBaseProperties.arialabelledby:if(!o)return this.mAriaLabelledby=null,this.toolbarTitle.length&&!this.mAriaLabel?this.clientElem.setAttribute("aria-labelledby",this.titleElem.id):this.clientElem.removeAttribute("aria-labelledby"),!0;break;case I:return this.sideMenuObj.selectedLineColor=+o,this.applyColorCss(),!0;case L:return this.toolbarHoverTextColor=+o,this.applyColorCss(),!0;case j:return this.sideMenuObj.textColor=+o,this.applyColorCss(),!0;case N:return this.sideMenuObj.hoverTextColor=+o,this.applyColorCss(),!0;case B:return this.overflowTextColor=+o,this.applyColorCss(),!0;case R:return this.overflowHoverTextColor=+o,this.applyColorCss(),!0;case M:return this.moveItem(+o),!0;case eBaseProperties.backcolor:case eBaseProperties.textcolor:return G=this.superclass.setProperty.call(this,t,o),this.applyColorCss(),G}return this.superclass.setProperty.call(this,t,o)},kt.rebuildHTML=function(){var t=this.clientElem;t.innerHTML="",this.isOverlay=!1,this.hamburgerBtnElem=null,this.sideMenuObj.elem=null,this.titleElem=null,this.barElem=null,this.overflowBtnElem=null,this.overflowMenuElem=null,this.verticalToolbar&&!jOmnis.hasClass(t,z)?(jOmnis.removeClass(t,H),jOmnis.addClass(t,z)):this.verticalToolbar||jOmnis.hasClass(t,H)||(jOmnis.removeClass(t,z),jOmnis.addClass(t,H)),this.verticalToolbar?t.setAttribute("aria-orientation","vertical"):t.removeAttribute("aria-orientation"),this.rebuildHamburgerBtn(),this.sideMenuObj.rebuild(),this.rebuildTitle(),!this.titleElem||this.mAriaLabelledby||this.mAriaLabel||t.setAttribute("aria-labelledby",this.titleElem.id),this.setItemArrays(),this.updateBarElem(),this.itemsInOverflow.length>0&&(this.createOverflowBtn(),this.createOverflowMenu()),this.updateSelectedItem(this.selectedItem,!0)},kt.updateToolbarLayout=function(){if(this.toolbarTitle.length>0&&this.updateTitleDimensions(),this.setItemArrays(),this.updateBarElem(),this.itemsInOverflow.length>0){if(!this.overflowMenuElem){this.createOverflowBtn(),this.createOverflowMenu();var t=!0}}else this.overflowMenuElem&&(this.clientElem.removeChild(this.overflowMenuElem),this.overflowMenuElem=null,this.clientElem.removeChild(this.overflowBtnElem),this.overflowBtnElem=null);if(!t&&this.overflowMenuElem){this.overflowMenuElem.innerHTML="",this.updateOverflowDimensions();for(var e=0;e<this.itemsInOverflow.length;e++)this.addItemToOverflow(this.itemsInOverflow[e])}this.showSelectedItem&&this.updateSelectedItem(this.selectedItem,!0)},kt.createButton=function(t){var e=document.createElement("button");jOmnis.addClass(e,t?J:K),jOmnis.addClass(e,this.mDisableSystemFocus?"noFocus":"autoFocus"),e.setAttribute("type","button"),e.setAttribute("data-clickable","true");var i=t?"ctl_toolbar_sidemenu":"ctl_toolbar_overflowmenu";return e.setAttribute("aria-label",jGetOmnisString(this.form.inst,i)),e.setAttribute("aria-haspopup","true"),e.setAttribute("aria-expanded","false"),e.tabIndex=-1,e.innerHTML=t?'<svg fill="var(--om-tint-color)" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"/></svg>':'<svg fill="var(--om-tint-color)" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 512"><path d="M96 184c39.8 0 72 32.2 72 72s-32.2 72-72 72-72-32.2-72-72 32.2-72 72-72zM24 80c0 39.8 32.2 72 72 72s72-32.2 72-72S135.8 8 96 8 24 40.2 24 80zm0 352c0 39.8 32.2 72 72 72s72-32.2 72-72-32.2-72-72-72-72 32.2-72 72z"/></svg>',this.verticalToolbar&&(e.style[t?"top":"bottom"]="0",e.style.height="70px",e.style.width="70px",e.style[this.menuDirection===pt?"right":"left"]="0"),this.addFocusListeners(e),this.addRippleToElem(e,ft),e},kt.rebuildHamburgerBtn=function(){var t=this.clientElem;this.hamburgerBtnElem&&(t.removeChild(this.hamburgerBtnElem),this.hamburgerBtnElem=null),this.sideMenuProp&&(this.hamburgerBtnElem=this.createButton(!0),t.children.length?t.insertBefore(this.hamburgerBtnElem,t.firstChild):t.appendChild(this.hamburgerBtnElem),this.updateFocusItem())},kt.rebuildTitle=function(){var t=this.clientElem;if(this.titleElem&&(t.removeChild(this.titleElem),this.titleElem=null),this.toolbarTitle.length){this.titleElem=document.createElement("div");var e=this.titleElem;e.id=this.childIdBase+"title",jOmnis.addClass(e,q),this.updateTitleDimensions(),e.innerHTML=jOmnis.escapeHTML(this.toolbarTitle),this.barElem?t.insertBefore(e,this.barElem):t.appendChild(e)}},kt.updateTitleDimensions=function(){var t=this.titleElem.style,e=this.clientElem.offsetWidth;if(t.padding="0 10px",t.fontSize=this.titleFontSize+"pt",this.verticalToolbar)t.height="70px",t.lineHeight="70px",t.left=this.menuDirection===mt&&this.sideMenuProp?"70px":"0",t.maxWidth=Math.max(0,e-20-70)+"px";else{t.height="",t.lineHeight=this.clientElem.offsetHeight+"px",t.left=this.sideMenuProp?"50px":"0";var i=50+(this.sideMenuProp?50:0);t.maxWidth=e-i-20+"px"}},kt.setItemArrays=function(){var t=this.itemData;if(this.verticalToolbar)var e=this.clientElem.offsetHeight-Math.max(70,70);else{var i=this.titleElem?this.titleElem.offsetWidth:0,s=(this.sideMenuProp?50:0)+i;e=this.clientElem.offsetWidth-s}var r=Math.max(0,Math.floor(e/this.itemWidth)),n=function(){for(var e=0,i=1;i<=t.length;i++){if(t[i-1].forceOverflow||e>=r)return!0;e++}return!1}();n&&(e-=this.verticalToolbar?70:50,r=Math.max(0,Math.floor(e/this.itemWidth))),this.itemsInToolbar=[],this.itemsInOverflow=[];for(var o=1;o<=this.itemCount;o++)t[o-1].forceOverflow||this.itemsInToolbar.length>=r?this.itemsInOverflow.push(o):this.itemsInToolbar.push(o)},kt.updateBarElem=function(){var t=this.barElem;t||(this.barElem=document.createElement("div"),t=this.barElem,jOmnis.addClass(t,$),this.clientElem.appendChild(t)),t.style.right=!this.verticalToolbar&&this.itemsInOverflow.length>0?"50px":"0",t.innerHTML="";for(var e=0;e<this.itemsInToolbar.length;e++)this.addItemToToolbar(this.itemsInToolbar[e]);this.updateFocusItem()},kt.addItemToToolbar=function(t){var e,i=document.createElement("div");(this.barElem.appendChild(i),jOmnis.addClass(i,U),jOmnis.addClass(i,this.mDisableSystemFocus?"noFocus":"autoFocus"),i.setAttribute("data-index",t+""),i.setAttribute("data-clickable","true"),i.setAttribute("role","button"),i.tabIndex=-1,i.style[this.verticalToolbar?"height":"width"]=this.itemWidth+"px",this.updateItemContents(t),jOmnis.touchDevice&&(i.oncontextmenu=function(t){return t.preventDefault(),t.stopPropagation(),!1}),this.addFocusListeners(i),this.itemData[t-1].enabled&&this.addRippleToElem(i,ft),this.showTooltips)&&(this.menuDirection===dt?e=OmnisToastMessage.position.TOP:this.menuDirection===ut?e=OmnisToastMessage.position.BOTTOM:this.menuDirection===mt?e=OmnisToastMessage.position.LEFT:this.menuDirection===pt&&(e=OmnisToastMessage.position.RIGHT),OmnisToastMessage.addAsTooltip(this.itemData[t-1].text,i,{position:e}))},kt.createOverflowBtn=function(){this.overflowBtnElem=this.createButton(!1),this.clientElem.appendChild(this.overflowBtnElem),this.updateFocusItem()},kt.createOverflowMenu=function(){this.overflowMenuElem=document.createElement("div");var t=this.overflowMenuElem;jOmnis.addClass(t,G),this.clientElem.appendChild(t),this.updateOverflowDimensions();for(var e=0;e<this.itemsInOverflow.length;e++)this.addItemToOverflow(this.itemsInOverflow[e]);this.overflowMenuIsOpen=!1},kt.addItemToOverflow=function(t){var e=document.createElement("div");this.overflowMenuElem.appendChild(e),jOmnis.addClass(e,X),jOmnis.addClass(e,this.mDisableSystemFocus?"noFocus":"autoFocus"),e.setAttribute("data-clickable","true"),e.setAttribute("data-index",t+""),e.setAttribute("role","button"),e.tabIndex=-1,t===this.itemsInOverflow[this.itemsInOverflow.length-1]&&(e.style.borderBottom="none"),this.updateItemContents(t),this.addFocusListeners(e),this.itemData[t-1].enabled&&this.addRippleToElem(e,gt)},kt.updateOverflowDimensions=function(){var t=this.overflowMenuElem;t.style.bottom=t.style.top=t.style.left="",t.style.right="0",this.menuDirection===dt?t.style.bottom=this.clientElem.offsetHeight+"px":this.menuDirection===ut?t.style.top=this.clientElem.offsetHeight+"px":this.menuDirection===mt?t.style.left="-140px":this.menuDirection===pt&&(t.style.right="-140px"),this.verticalToolbar&&(t.style.bottom="0"),t.style.maxHeight=this.getMenuMaxHeight(!1)},kt.updateItemContents=function(t){var e=this.getItemElem(t);if(e){var i=this.itemData[t-1];i.enabled?(jOmnis.removeClass(e,ot),e.removeAttribute("aria-disabled")):(jOmnis.addClass(e,ot),e.setAttribute("aria-disabled","true"));var s=jOmnis.hasClass(e,X);if(e.innerHTML="",!s&&this.showItemIcons&&i.iconId){var r=jIcons.replaceOrAddToElem(e,this.setupIcon(i.iconId));r&&(r.style.position="relative")}if(s)e.innerHTML=jOmnis.escapeHTML(i.text);else if(this.showItemText){var n=document.createElement("div");jOmnis.addClass(n,V),n.innerHTML=jOmnis.escapeHTML(i.text),e.appendChild(n)}else e.setAttribute("aria-label",i.text);if(!s){var o=this.verticalToolbar?this.clientElem.offsetWidth:this.itemWidth,a=this.verticalToolbar?this.itemWidth:this.clientElem.offsetHeight;St(e,r,n,this.displayStyle,o,a,this.showItemIcons,this.showItemText),jOmnis.mDesign&&this.currentItem==t&&this.doHiliteSelectedItem(t,e)}}};var St=function(t,e,i,s,r,n,o,a){var l="";if(s===at||s===lt){if(e){var h=jIcons.getIconSize(jIcons.iconUrl(e)),c=Math.min(h.width,r-6,n-6);if(a){var u=Math.max(0,n-16-3);c=Math.min(u-6,c),c=Math.max(0,c),e.style.top=s===lt?(u-c)/2+"px":19+(u-c)/2+"px"}else e.style.top=(n-c)/2+"px";e.style.width=c+"px",e.style.height=c+"px"}i&&(o?s===lt?i.style.bottom="3px":i.style.top="3px":(i.style.top=(n-16)/2+"px",i.style.width="100%"),i.style.right="0")}else if(s===ht||s===ct){if(o&&a?s===ct?l="left":s===ht&&(l="right"):l="center",e){var d=Math.min(n,r);d-=6,h=jIcons.getIconSize(jIcons.iconUrl(e)),c=Math.min(d,h.width),e.style.top=(n-c)/2+"px",e.style.width=c+"px",e.style.height=c+"px",a&&(u=Math.min(54,r),s===ct?e.style.left=(u-c)/2+"px":e.style.right=(u-c)/2+"px")}i&&(i.style.top=(n-16)/2+"px",o?s===ct?(i.style.left="54px",i.style.right="0"):(i.style.left="3px",i.style.maxWidth=r-u+"px"):i.style.width="100%")}t.style.textAlign=l};return kt.applyInitialCss=function(){this.initialCss&&jOmnis.removeStyleSheet(this.initialCss);var t="#"+this.clientElem.id,e=t+" ."+J+" {width:50px; }"+t+" ."+K+" {width:50px; }"+t+" ."+G+" {width:140px; }"+t+" ."+et+", "+t+" ."+it+" {height:"+this.sideMenuObj.itemHeight+"px;line-height:"+this.sideMenuObj.itemHeight+"px; }"+t+" ."+et+">svg {height:20px;width:20px;padding:"+(this.sideMenuObj.itemHeight-20)/2+"px 15px; }"+t+"."+z+" ."+$+" {top:"+Math.max(70,70)+"px; }";this.initialCss=jOmnis.addStyleSheet(e)},kt.applyColorCss=function(){this.colorCss&&jOmnis.removeStyleSheet(this.colorCss);var t=this,e=this.getTheme(),i="#"+this.clientElem.id;function s(t){return t===o.JT?"":"color:"+e.getColorString(t)+";"}function r(i,s){return e.getColorString(OMColor.TintRGB(e.getColorRGB(t.resolveBackgroundColor(i)),s))}var n=s(this.overflowHoverTextColor),a=s(this.toolbarHoverTextColor),l=s(this.sideMenuObj.hoverTextColor),h=e.getColorString(this.selectedColor,this.DefaultColors.SELECTED_COLOR),c=e.getColorString(this.dividerColor,this.DefaultColors.DIVIDER_COLOR),u=e.getColorString(this.resolveBackgroundColor(gt)),d=e.getColorString(this.resolveBackgroundColor(vt)),p=e.getColorString(this.sideMenuObj.selectedLineColor,this.DefaultColors.SELECTED_LINE_COLOR),m=e.getTextColorString(this.iconColor,this.resolveBackgroundColor(ft),0),f=e.getTextColorString(this.selectedTextColor,this.resolveDefaultColor(this.selectedColor,Tt.SELECTED_COLOR),0),g=e.getTextColorString(this.overflowTextColor,this.resolveBackgroundColor(gt),0),v=e.getTextColorString(this.sideMenuObj.textColor,this.resolveBackgroundColor(vt),0),b=e.getTextColorString(this.iconColor,this.resolveBackgroundColor(vt),0),y=this.toolbarHoverColor!==o.JT?e.getColorString(this.toolbarHoverColor):r(ft,OMColor.eTintFactor.SMALL),C=this.overflowHoverColor!==o.JT?e.getColorString(this.overflowHoverColor):r(gt,OMColor.eTintFactor.SMALL),_=this.sideMenuObj.hoverColor!==o.JT?e.getColorString(this.sideMenuObj.hoverColor):r(vt,OMColor.eTintFactor.SMALL),E=r(ft,OMColor.eTintFactor.MEDIUM),w=r(gt,OMColor.eTintFactor.MEDIUM),k=r(vt,OMColor.eTintFactor.MEDIUM),T=i+" ."+X+" {background-color:"+u+";color:"+g+"; }"+i+" ."+X+":hover:not(."+ot+") {background-color:"+C+";"+n+" }"+i+" ."+X+"."+st+" {background-color:"+w+" !important; }"+i+" ."+U+":hover:not(."+rt+"):not(."+ot+"),"+i+" ."+J+":hover:not(."+rt+"):not(."+ot+"),"+i+" ."+K+":hover:not(."+rt+"):not(."+ot+") {background-color:"+y+";"+a+" }"+i+" ."+U+" svg {--om-tint-color:"+this.clientElem.style.color+"; }"+i+" ."+U+":hover:not(."+rt+"):not(."+ot+") svg {--om-tint-color:"+e.getColorString(this.toolbarHoverTextColor)+"; }"+i+" ."+rt+" svg {--om-tint-color:"+f+"; }"+i+" ."+rt+","+i+" ."+X+"."+rt+" {background-color:"+h+";color:"+f+"; }"+i+" ."+st+" {background-color:"+E+" !important; }";this.showDividers&&(T+=i+" ."+X+" {border-bottom:1px solid "+c+"; }",this.verticalToolbar?T+=i+" ."+U+":first-child {border-top:solid 1px "+c+"; }"+i+" ."+U+" {border-bottom:solid 1px "+c+"; }":T+=i+" ."+U+","+i+" ."+K+" {border-left:solid 1px "+c+"; }"),T+=i+" ."+Z+" {background-color:"+d+";color:"+v+"; }"+i+" ."+et+":hover:not(."+nt+"),"+i+" ."+it+":hover:not(."+nt+") {background-color:"+_+";"+l+" }"+i+" ."+nt+" {background-color:"+p+"; }"+i+" ."+Z+" ."+st+" {background-color:"+k+" !important; }",T+=i+" ."+et+">svg {--om-tint-color:"+b+"; }"+i+" ."+J+">svg,"+i+" ."+K+">svg {--om-tint-color:"+m+"; }",this.colorCss=jOmnis.addStyleSheet(T)},kt.setFocusItem=function(t){this.focusItem&&(this.focusItem.tabIndex=-1),t&&(t.tabIndex=this.isActive()?0:-1),this.focusItem=t},kt.updateFocusItem=function(){if(this.barElem)var t=this.barElem.querySelector("."+U+":not(."+ot+")");t||(t=this.hamburgerBtnElem||this.overflowBtnElem),this.setFocusItem(t)},kt.openOverflowMenu=function(){this.overflowMenuIsOpen||(jOmnis.addClass(this.overflowMenuElem,Y),this.overflowBtnElem.setAttribute("aria-expanded","true"),this.overflowMenuIsOpen=!0,this.addOverlay())},kt.closeOverflowMenu=function(){this.overflowMenuIsOpen&&(jOmnis.removeClass(this.overflowMenuElem,Y),this.overflowBtnElem.setAttribute("aria-expanded","false"),this.overflowMenuIsOpen=!1,this.sideMenuObj.isOpen||this.removeOverlay())},kt.addOverlay=function(){if(!this.isOverlay){var t=document.createElement("div");jOmnis.addClass(t,W),t.setAttribute("data-clickable","true"),this.clientElem.appendChild(t),this.isOverlay=!0}},kt.removeOverlay=function(){if(this.isOverlay){var t=this.clientElem.querySelector("."+W);t&&t.parentNode.removeChild(t),this.isOverlay=!1}},kt.addFocusListeners=function(t){var e=this,i=!0;function s(){i=!1,setTimeout((function(){i=!0}),50)}t.onblur=function(){jOmnis.hasClass(t,ot)||e.updateFocusedElem(null)},t.onfocus=function(){i&&!jOmnis.hasClass(t,ot)&&e.updateFocusedElem(t)},t.onmousedown=function(){s()},t.ontouchend=function(){s()}},kt.updateCssFocused=function(t,e){e?jOmnis.addClass(t,st):jOmnis.removeClass(t,st)},kt.updateFocusedElem=function(t){this.focusedElem!==t&&(this.focusedElem&&this.updateCssFocused(this.focusedElem,!1),t&&this.updateCssFocused(t,!0),this.focusedElem=t)},kt.updateSelectedItem=function(t,e){if("object"===Qc(t)){var i=t.getAttribute("data-index");null!=i&&(i=+i)}else i=t;if(null!=i){var s=this.selectedItem;if((e||s!==i)&&!(i<0||i>this.itemCount)){var r=this.getItemElem(s);if(r&&(jOmnis.removeClass(r,rt),r.setAttribute("aria-label",this.itemData[s-1].text)),this.showSelectedItem){var n=this.getItemElem(i);if(n){jOmnis.addClass(n,rt);var o=this.itemData[i-1].text,a=jGetOmnisString(this.form.inst,"ctl_toolbar_selected_item",null,o);n.setAttribute("aria-label",a.trim())}}this.selectedItem=i}}},kt.getItemElem=function(t){return this.clientElem.querySelector("[data-index='"+t+"']")},kt.getClickableParent=function(t){for(;!t.getAttribute("data-clickable");){if(t===this.clientElem)return null;t=t.parentNode}return t},kt.getMenuMaxHeight=function(t){if(t&&this.verticalToolbar)return"";var e=this.clientElem,i=jOmnis.getContainerControl(e),s=i?i.getClientElem():this.form.elem,r=jOmnis.getElemPosRelativeToAncestor(e,s);if(this.menuDirection===ut)var n=s.offsetHeight-(r.y+e.offsetHeight);else n=this.menuDirection===dt?r.y:r.y+e.offsetHeight;return n+"px"},kt.doHiliteSelectedItem=function(t,e){this.hiliteSelectedItem(t,e,!0),this.mSelectedItemHiliteElem&&(this.mSelectedItemHiliteElem.style.position="absolute",this.mSelectedItemHiliteElem.style.top="0px")},kt.moveItem=function(t){if(jOmnis.mDesign&&t>0&&t<=this.itemCount&&t!=this.currentItem){var e=this.itemData.splice(this.currentItem-1,1);this.itemData.splice(t-1,0,e[0]),this.currentItem=t,this.rebuildHTML()}},kt.addRippleToElem=function(t,e){jOmnisEffects.addRippleToElem(t,this.getTheme(),!0,this.resolveBackgroundColor(e),At._j)},kt.resolveBackgroundColor=function(t){var e;switch(t){case ft:e=this.resolveDefaultColor(this.themeableData.backgroundColor,Tt.BACKGROUND);break;case gt:e=this.overflowColor!==o.JT?this.overflowColor:this.resolveBackgroundColor(ft);break;case vt:e=this.resolveDefaultColor(this.sideMenuObj.backgroundColor,Tt.SIDEMENU_COLOR)}return e},kt}();var su,ru=iu,nu=i(6798);function ou(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function au(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ou(Object(i),!0).forEach((function(e){lu(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ou(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function lu(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var hu="$textbeforeicon",cu="$::vertical",uu="$buttonborderradius",du="$boldwhenhot",pu="$borderwidth",mu="$hotbackalpha",fu="$hotbackcolor",gu="$hotbordercolor",vu="$hoticonid";yu.prototype=new ctrl_base,yu.prototype.okKeyEventName="mouseup";var bu=au(au({},a.Mr),{},{HOT_BACKGROUND:"HOT_BACKGROUND",HOT_BORDER:"HOT_BORDER"});function yu(){this.init_class_inst()}yu.prototype.DefaultColors=au(au({},ctrl_base.prototype.DefaultColors),{},(lu(su={},a.Mr.BACKGROUND,o.l1.neutral),lu(su,a.Mr.TEXT,o.l1.neutralText),lu(su,a.Mr.BORDER,o.l1.transparent),lu(su,bu.HOT_BACKGROUND,o.l1.neutral),lu(su,bu.HOT_BORDER,o.l1.transparent),su)),yu.DIRECTION_MASK={LEFT:1,TOP:2,RIGHT:4,BOTTOM:8},yu.REBUILD_TYPE={CSS:1,FLEX_PROPS:2,LAYOUT:4},yu.prototype.init_class_inst=function(){this.superclass=ctrl_base.prototype,this.superclass.init_class_inst.call(this),this.baseClassName="omnis-trans ctrl-trans",this.activeReplacesEnabled=!0,this.rebuildType=0,this.mFocusStyle=eBaseFocusStyle.eWithin},yu.prototype.init_ctrl_inst=function(t,e,i,s){this.superclass.init_ctrl_inst.call(this,t,e,i,s);var r=this.getClientElem();jOmnis.mDesign&&(this.mCanHaveDesignBorder=!0),this.mAcceptsReturn=!0,this.mHasAlign=!0,r.style.overflow="hidden",r.style.display="flex",r.style.padding="0",jOmnis.mobileDevice&&r.style.webkitTapHighlightColor&&(this.enabledTapHighlightColor=r.style.webkitTapHighlightColor),r.addEventListener("mouseup",this.mEventFunction),i&&r.addEventListener("click",this.mEventFunction),r.addEventListener("keydown",this.mEventFunction),r.addEventListener("keyup",this.mEventFunction),r.addEventListener("mouseenter",this.mEventFunction),r.addEventListener("mouseleave",this.mEventFunction),r.addEventListener("touchstart",this.mEventFunction),r.addEventListener("touchend",this.mEventFunction),r.addEventListener("focus",this.mEventFunction),r.addEventListener("blur",this.mEventFunction);var n=r.getAttribute("data-ii");n&&(n=this.setupIcon(n),r.setAttribute("data-ii",n));var o=r.getAttribute("data-hii")||n;o&&(o=this.setupIcon(o),r.setAttribute("data-hii",o),this.preloadImage(o,!1));var a=r.getAttribute("data-bwh");this.mBoldWhenHot="1"===a;var l=r.getAttribute("data-bbr");return l&&jOmnis.setBorderRadius(r,l),a=r.getAttribute("data-vert"),this.mVertical="1"===a,a=r.getAttribute("data-tbi"),this.mTextBeforeIcon="1"===a,this.updateFlexProperties(r),a=r.getAttribute("data-bw"),this.mBorderWidth=+a||0,r.style.borderWidth=this.mBorderWidth+"px",a=r.getAttribute("data-hbc"),this.mHotBackColor=+a||0,a=r.getAttribute("data-hba"),this.mHotBackAlpha=+a||0,a=r.getAttribute("data-bc"),this.mBorderColor=+a||0,a=r.getAttribute("data-hbordc"),this.mHotBorderColor=+a||0,a=r.getAttribute("data-html"),this.mTextIsHtml="1"===a,this.setInnerHtml(n,o),this.layoutControl(),this.activeChanged(),this.updateFlexProperties(r),!1},yu.prototype.queueRebuildType=function(t){this.rebuildType|=t,this.form.inst.registerPropertyObject(this)},yu.prototype.updateIconColor=function(){var t=this.clientElem.children[0];t&&o.Q2.SetThemedIconColor(t,this.getTheme().getTextColorString(this.themeableData.color,this.resolveDefaultColor(this.themeableData.backgroundColor,bu.BACKGROUND),this.DefaultColors[bu.TEXT]))},yu.prototype.updateHotIconColor=function(){var t=this.clientElem.children[1];t&&o.Q2.SetThemedIconColor(t,this.getTheme().getTextColorString(this.themeableData.color,this.resolveHotBackgroundColor(),this.DefaultColors[bu.TEXT]))},yu.prototype.updateFlexProperties=function(t){t=t||this.getClientElem();var e=this.getProperty(eBaseProperties.align);this.mVertical?(t.style.flexDirection=this.mTextBeforeIcon?"column-reverse":"column",t.style.alignItems=["flex-start","flex-end","center"][e],t.style.justifyContent="center"):(t.style.flexDirection=this.mTextBeforeIcon?"row-reverse":"row",t.style.justifyContent=[this.mTextBeforeIcon?"flex-end":"flex-start",this.mTextBeforeIcon?"flex-start":"flex-end","center"][e],t.style.alignItems="center")},yu.prototype.setInnerHtml=function(t,e){var i,s=this.getClientElem();this.mTextDiv&&(i=this.mTextDiv,s.removeChild(this.mTextDiv),this.mTextDiv=null),t||(t=s.getAttribute("data-ii")),e||(e=s.getAttribute("data-hii"));var r="";t&&t.length>0&&(r=jIcons.getHtml(t)),e&&e.length>0&&(r+=jIcons.getHtml(e)),s.innerHTML=r;var n=this.getTheme();jOmnisEffects.addRippleToElem(s,n,!1,this.resolveHotBackgroundColor(),At._j);var l=0;if(t&&t.length>0){var h=s.children[l++];o.Q2.SetThemedIconColor(h,n.getTextColorString(this.themeableData.color,this.resolveDefaultColor(this.themeableData.backgroundColor,bu.BACKGROUND),this.DefaultColors[a.Mr.TEXT])),h.classList.add("image")}e&&e.length>0&&(h=s.children[l],o.Q2.SetThemedIconColor(h,n.getTextColorString(this.themeableData.color,this.resolveHotBackgroundColor(),this.DefaultColors[a.Mr.TEXT])),h.classList.add("image"),h.classList.add("hot")),i&&(s.appendChild(i),this.mTextDiv=i)},yu.prototype.delete_class_inst=function(){this.mStyleSheet&&jOmnis.removeStyleSheet(this.mStyleSheet),this.superclass.delete_class_inst.call(this)},yu.prototype.getProperty=function(t){switch(t){case cu:return this.mVertical;case hu:return this.mTextBeforeIcon;case uu:var e=this.getClientElem(),i=e.getAttribute("data-bbr");return i?1*i:0;case du:return this.mBoldWhenHot;case pu:return this.mBorderWidth;case mu:return this.mHotBackAlpha;case fu:return this.mHotBackColor;case gu:return this.mHotBorderColor;case vu:return(e=this.getClientElem()).getAttribute("data-hii");case eBaseProperties.bordercolor:return this.mBorderColor;case eBaseProperties.iconid:return(e=this.getClientElem()).getAttribute("data-ii");case eBaseProperties.text:return(e=this.getClientElem()).getAttribute("data-text");case eBaseProperties.textishtml:return this.mTextIsHtml}return this.superclass.getProperty.call(this,t)},yu.prototype.getCanAssign=function(t){switch(t){case cu:case hu:case uu:case du:case pu:case mu:case fu:case gu:case vu:case eBaseProperties.bordercolor:case eBaseProperties.iconid:case eBaseProperties.text:case eBaseProperties.textishtml:return!0}return this.superclass.getCanAssign.call(this,t)},yu.prototype.setProperty=function(t,e){var i=this.getClientElem(),s=yu.REBUILD_TYPE;switch(t){case eBaseProperties.cssclassname:var r=e+"";return this.elem.setAttribute("data-css",r),this.mUserCss=r,i.className=this.mUserCss+" ctrl-trans",!0;case cu:return this.mVertical=1*e!=0,this.queueRebuildType(s.FLEX_PROPS|s.CSS),!0;case hu:return this.mTextBeforeIcon=1*e!=0,this.queueRebuildType(s.FLEX_PROPS|s.CSS),!0;case uu:var n=1*e;return i.setAttribute("data-bbr",n),jOmnis.setBorderRadius(i,n),!0;case du:return this.mBoldWhenHot=1*e!=0,this.queueRebuildType(s.CSS),!0;case pu:var o=1*e;return o<0?o=0:o>7&&(o=7),this.mBorderWidth=o,i.style.borderWidth=o+"px",jOmnis.mDesign&&this.queueRebuildType(s.LAYOUT),!0;case eBaseProperties.textcolor:var a=this.superclass.setProperty.call(this,t,e);return this.updateIconColor(),a;case eBaseProperties.backcolor:var l=this.superclass.setProperty.call(this,t,e);return this.updateIconColor(),l;case mu:var h=1*e;return h<0?o=0:h>255&&(h=255),this.mHotBackAlpha=h,this.queueRebuildType(s.CSS),!0;case fu:return this.mHotBackColor=1*e,this.queueRebuildType(s.CSS),jOmnisEffects.setRippleColor(this.clientElem,this.getTheme(),this.resolveHotBackgroundColor()),this.updateHotIconColor(),!0;case gu:return this.mHotBorderColor=1*e,this.queueRebuildType(s.CSS),!0;case vu:return i.setAttribute("data-hii",e),this.preloadImage(e,!0),this.setInnerHtml(null,e),!0;case eBaseProperties.bordercolor:return this.mBorderColor=1*e,this.queueRebuildType(s.CSS),!0;case eBaseProperties.iconid:return i.setAttribute("data-ii",e),this.preloadImage(e,!0),this.setInnerHtml(e),!0;case eBaseProperties.text:return i.setAttribute("data-text",e||""),this.queueRebuildType(s.LAYOUT|s.CSS),!0;case eBaseProperties.textishtml:return this.mTextIsHtml=1*e!=0,this.queueRebuildType(s.LAYOUT),!0;case eBaseProperties.align:var c=this.superclass.setProperty.call(this,t,e);return c&&this.queueRebuildType(s.LAYOUT|s.FLEX_PROPS|s.CSS),c;case eBaseProperties.enabled:e||this.setHotState(!1)}return this.superclass.setProperty.call(this,t,e)},yu.prototype.applyPropertyChanges=function(){this.rebuildType&yu.REBUILD_TYPE.LAYOUT&&this.layoutControl(),this.rebuildType&yu.REBUILD_TYPE.CSS&&this.buildCSSStyles(),this.rebuildType&yu.REBUILD_TYPE.FLEX_PROPS&&this.updateFlexProperties(),this.rebuildType=0},yu.prototype.activeChanged=function(){var t=this.getClientElem();t.disabled=this.elem.disabled,t.style.webkitTapHighlightColor=t.disabled?"transparent":this.enabledTapHighlightColor,jOmnis.setOpacity(this.elem,t.disabled?64:255),this.buildCSSStyles(),this.superclass.activeChanged.call(this)},yu.prototype.visibilityChanged=function(){var t=this.superclass.visibilityChanged.call(this);return this.getTrueVisibility()&&this.layoutControl(),t},yu.prototype.sizeChanged=function(){this.superclass.sizeChanged.call(this),this.getClientElem().clientWidth&&this.layoutControl()},yu.prototype.handleEvent=function(t){switch(t.type){case"touchstart":return this.touchEvent=!0,void this.setHotState(!0);case"touchend":return void this.setHotState(!1);case"click":if(this.ignoreClick)return void(this.ignoreClick=!1);case"mouseup":return this.ignoreClick="mouseup"===t.type,this.touchEvent=!1,void(this.canSendEvent(eBaseEvent.evClick)&&this.sendEvent(eBaseEvent.evClick));case"mouseenter":case"focus":return void(this.touchEvent||this.enterDown||this.setHotState(!0));case"mouseleave":case"blur":var e;if(!this.enterDown)(null===(e=t.relatedTarget)||void 0===e?void 0:e.id)!==nu.SQ&&this.setHotState(!1);return;case"keydown":return void(t.repeat||"Enter"!==OmnisKeyboardHandler.getNormalizedEventKey(t)||(this.enterDown=!0,this.canSendEvent(eBaseEvent.evClick)&&this.sendEvent(eBaseEvent.evClick)));case"keyup":var i=OmnisKeyboardHandler.getNormalizedEventKey(t);return void("Enter"===i?this.enterDown=!1:" "===i&&this.canSendEvent(eBaseEvent.evClick)&&this.sendEvent(eBaseEvent.evClick))}return this.superclass.handleEvent.call(this,t)},yu.prototype.setHotState=function(t){var e=this.getClientElem();e.classList.contains("hot")!==t&&(t?jOmnis.addClass(e,"hot"):jOmnis.removeClass(e,"hot"),this.layoutControl())},yu.prototype.buildCSSStyles=function(){this.mStyleSheet&&(jOmnis.removeStyleSheet(this.mStyleSheet),this.mStyleSheet=null);var t=this.getClientElem(),e=this.getTheme(),i="#"+t.id+".ctrl-trans {";i+="border-color:"+e.getColorString(this.mBorderColor,this.DefaultColors[bu.BORDER])+";",i+="}";var s=function(){var t=0,e=0;this.mVertical?t|=this.mTextBeforeIcon?yu.DIRECTION_MASK.TOP:yu.DIRECTION_MASK.BOTTOM:t|=this.mTextBeforeIcon?yu.DIRECTION_MASK.LEFT:yu.DIRECTION_MASK.RIGHT;var i=this.getProperty(eBaseProperties.align);return i===eBaseAlignment.left?(!this.mVertical&&this.mTextBeforeIcon||(t|=yu.DIRECTION_MASK.LEFT),(this.mVertical||this.mTextBeforeIcon)&&(e|=yu.DIRECTION_MASK.LEFT)):i===eBaseAlignment.right&&((this.mVertical||this.mTextBeforeIcon)&&(t|=yu.DIRECTION_MASK.RIGHT),!this.mVertical&&this.mTextBeforeIcon||(e|=yu.DIRECTION_MASK.RIGHT)),{iconmask:t,textmask:e}}.call(this);t.getAttribute("data-text")&&(i+="#"+t.id+".ctrl-trans .image {",i+=this.marginMaskToCSSString(s.iconmask),i+="}"),i+="#"+t.id+".ctrl-trans .omnis-trans-text {",i+=this.marginMaskToCSSString(s.textmask),i+="}",i+="#"+t.id+".ctrl-trans .image.hot {",i+="display: none;",i+="}",t.disabled||(i+="#"+this.clientElem.id+".ctrl-trans.hot .image { display: none; }",i+="#"+this.clientElem.id+".ctrl-trans.hot .image.hot { display: block; }",i+="#"+this.clientElem.id+".ctrl-trans.hot {",this.mBoldWhenHot&&(i+="font-weight:bold !important;"),i+="background-color:"+e.getColorString(this.resolveHotBackgroundColor(),0,this.mHotBackAlpha/255)+" !important;",this.themeableData.color===o.JT&&this.mHotBackColor!==o.JT&&(i+="color:"+e.getTextColorString(this.themeableData.color,this.mHotBackColor,this.resolveDefaultColor(o.JT,bu.TEXT))+" !important;"),i+="border-color:"+e.getColorString(this.mHotBorderColor,this.DefaultColors.HOT_BORDER)+";",i+="}"),this.mStyleSheet=jOmnis.addStyleSheet(i)},yu.prototype.resolveHotBackgroundColor=function(){return this.mHotBackColor===o.JT?this.resolveDefaultColor(this.themeableData.backgroundColor,bu.HOT_BACKGROUND):this.mHotBackColor},yu.prototype.marginMaskToCSSString=function(t){return"margin: "+(t&yu.DIRECTION_MASK.TOP?"4px ":"0 ")+(t&yu.DIRECTION_MASK.RIGHT?"4px ":"0 ")+(t&yu.DIRECTION_MASK.BOTTOM?"4px ":"0 ")+(t&yu.DIRECTION_MASK.LEFT?"4px":"0")+";"},yu.prototype.complexGridRerendered=function(){this.buildCSSStyles()},yu.prototype.layoutControl=function(){var t=this.getClientElem();!this.form.isSubform&&jOmnis.mDesign&&(0==this.mBorderWidth?this.designBorderDiv||this.setBorderFromOmnisDefinition(t,null,null,!0):this.designBorderDiv&&(this.designBorderDiv.parentNode.removeChild(this.designBorderDiv),this.designBorderDiv=null));var e=t.getAttribute("data-text");if(e&&e.length){var i=this.mTextDiv||document.createElement("div");i.className="omnis-trans-text",this.mTextIsHtml?i.innerHTML=e:i.textContent=e,this.mTextDiv||t.appendChild(i),i.style.whiteSpace="pre-line",i.style.border="solid 1px transparent",i.style.overflow="hidden",i.style.width=jOmnis.inIE11OrLater()?"100%":"auto",i.style.height="auto",i.style.display="inline",this.mTextDiv=i}else this.mTextDiv&&(t.removeChild(this.mTextDiv),this.mTextDiv=null)},yu.prototype.preloadImage=function(t,e){t&&(e&&(t=this.setupIcon(t)),(new Image).src=t)};var Cu,_u=yu;i(2087),i(4081),i(4794);function Eu(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function wu(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Eu(Object(i),!0).forEach((function(e){ku(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Eu(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function ku(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Tu="$showicons",Su="$showlines",xu="$checkbox",Du="$twostate",Ou="$selectedlinecolor",Au="$selectedlinetextcolor",Pu="$nodedata",Iu="$currentnodeident",Lu="$nodeaction",ju="$extraspace",Nu="$iconurlprefix",Bu="$lineborder",Ru="$linebordercolor",Mu="$evenrowcolor",Fu="$renameshortcut",Hu="$checkboxcolor",zu={evRenamed:100,evLoadNode:101,evCollapseNode:102,evExpandNode:103},Wu="evExpandNode";hd.prototype=new a.U2;var $u=0,Uu=1,Vu=2,qu=3,Ku=4,Gu=1,Yu=2,Xu=4,Ju=8,Qu=16,Zu=1,td=2,ed=3,id=4,sd=5,rd=6,nd=7,od=8,ad=9;hd.eAriaUpdateActions={ALL:"all",HOVER:"hover",OPENCLOSENODE:"openclosenode",SELECT:"select"},hd.DEFAULT_PADDING=4,hd.SVG_ARROW_SIZE=24;var ld=wu(wu({},a.Mr),{},{BORDER:"BORDER",SELECTED_LINE:"SELECTED_LINE",SELECTED_LINE_TEXT:"SELECTED_LINE_TEXT",EVEN_ROW:"EVEN_ROW",LINE_BORDER:"LINE_BORDER"});function hd(){this.init_class_inst()}hd.prototype.DefaultColors=wu(wu({},a.U2.prototype.DefaultColors),{},(ku(Cu={},ld.BORDER,o.l1.border),ku(Cu,ld.SELECTED_LINE,o.l1.primary),ku(Cu,ld.SELECTED_LINE_TEXT,o.l1.primaryText),ku(Cu,ld.EVEN_ROW,o.l1.none),ku(Cu,ld.LINE_BORDER,o.l1.border),Cu)),hd.prototype.baseClassName="omnis-tree",hd.prototype.init_class_inst=function(){this.superclass=a.U2.prototype,this.superclass.init_class_inst.call(this),this.mCustomEvents=zu,this.mNeedFontHeight=!0,this.mFocusStyle=eBaseFocusStyle.eWithin,this.usesNotActiveOverlay=!0,jOmnis.mDesign&&(this.baseClassName="omnis-tree-design",this.mCanHaveDesignBorder=!0,this.showDesignName=!0)},hd.prototype.init_ctrl_inst=function(t,e,i,s){this.doneAlert=0!=jOmnis.mDesign,this.disableEvents=!1,this.mHasDefaultDisableAppearanceProperty=!0,this.superclass.init_ctrl_inst.call(this,t,e,i,s);var r=this.getClientElem();r.idBase="ctrl_tree_"+cd+++"_",this.clientSelector="#"+r.firstChild.id,this.mClientResult=!0,this.setIconUrlPrefix(r.getAttribute("data-iconurlprefix")),r.style.cursor="default";var n=this;r.addEventListener("blur",(function(t){return $(n.clientSelector).jstree("unset_focus"),n.mHasFocus=!1,n.superclass.handleEvent.call(n,t)}),!0),this.mAcceptsEscape=!0,this.mAcceptsReturn=!0;var o=r.getAttribute("data-mode");this.mDataMode=o?parseInt(o):$u,this.ignoreClick=!1,this.selectedLineColor=+r.getAttribute("data-selectedlinecolor"),this.selectedLineTextColor=+r.getAttribute("data-selectedlinetextcolor"),this.mHiliteLine="1"==r.getAttribute("data-hiliteline"),this.mLineBorder=1==+r.getAttribute("data-lineborder"),this.mLineBorderColor=+r.getAttribute("data-linebordercol"),this.mEvenRowColor=+r.getAttribute("data-evenrowcolor"),this.fontChanged(),this.mExtraSpace=r.getAttribute("data-es"),this.mExtraSpace=this.mExtraSpace?1*this.mExtraSpace:0,this.buildCSSStyles(),r.setAttribute("role","tree"),r.firstElementChild.setAttribute("role","presentation"),this.setProperty(eBaseProperties.keyboardchangesline,r.getAttribute("data-changeline")),this.mRenameShortcut=!!r.getAttribute("data-renameshort"),this.checkboxColor=+r.getAttribute("data-checkboxcolor"),Lt.setColor(this.checkboxColor,this);var a=this.mEventFunction;return this.elem.onkeypress=a,this.update(),!1},hd.prototype.delete_class_inst=function(){null!=this.iscroll&&this.iscroll.destroy(),this.mTreeStyleSheet&&jOmnis.removeStyleSheet(this.mTreeStyleSheet),this.superclass.delete_class_inst.call(this)},hd.prototype.openParentNodes=function(t){if(t){this.isOpeningParentNodes=!0,t--;var e=this.getData("").__list,i=e.list.lstData[t];if(i)for(var s=i.length-this.getTreeInfoColCount(),r=0;r<s-1;r++)if(i[r]){var n=e.search(r+1,i[r]),o=this.getNodeSelector(n);$(this.clientSelector).jstree("open_node",o,!1)}}},hd.prototype.selectLineInList=function(t){var e=this.clientSelector;if(this.currentNodeLine&&!this.multisel){var i=this.getNodeSelector(this.currentNodeLine);$(e).jstree("deselect_node",i),$(e).jstree("get_selected").length>0&&$(e).jstree("deselect_all")}else this.multisel&&!this.checkbox&&$(e).jstree("deselect_all");this.currentNodeLine=t,i=this.getNodeSelector(t),this.checkbox?$(e).jstree("check_node",i,!1):(this.preventClickEvent=!0,$(e).jstree("select_node",i,!1),this.preventClickEvent=!1)},hd.prototype.displayLineInList=function(t){var e=this.clientSelector,i=this.getNodeSelector(t);document.querySelector(i)||this.openParentNodes(t),$(e).jstree("scrollObjToView",i),this.multisel||this.selectLineInList(t)},hd.prototype.visibilityChanged=function(){var t=this.superclass.visibilityChanged.call(this);return this.getTrueVisibility()&&this.updateWhenVisible&&(this.updateWhenVisible=!1,this.update()),t},hd.prototype.updateCtrl=function(t){if(this.getTrueVisibility()){var e=this.getClientElem(),i=this.clientSelector,s=this.getData("#L"),r=this.mDataMode==Ku;if(r){if(!this.nodeIconList){var n=e.getAttribute("data-nil");n&&n.length&&(this.nodeIconList=this.form.getDataIndex(n,this,!1))}this.nodeJSON={}}else if("#L"===t&&this.haveBoundEventFunctions)return void this.displayLineInList(s);var a=this;this.checkbox=!1,this.twostate=!1,this.multisel=!r&&"1"==e.getAttribute("data-multisel");var l={core:{animation:300,html_titles:!0},plugins:["themes","json_data","ui","hotkeys","crrm","types"],hotkeys:{del:!1}};this.multisel&&(this.checkbox="1"==e.getAttribute("data-checkbox"),this.checkbox&&(this.twostate="1"==e.getAttribute("data-twostate"),l.plugins[l.plugins.length]="checkbox"));var h={theme:"default"};h.dots="1"==e.getAttribute("data-dots"),this.icons="1"==e.getAttribute("data-icons"),h.icons=this.icons,l.themes=h;var c={types:{}};c.types.max_children=-2,c.types.max_depth=-2,this.colCount=this.getData("#CCNT"),this.setListColumnNumbers();var u=r?0:1;if(this.lineCount=this.getData("#LCNT"),this.colCount<this.getTreeInfoColCount()+u)this.doneAlert||(alert("Control "+this.objName+":Tree data list must have at least "+(this.getTreeInfoColCount()+u)+" columns"),this.doneAlert=!0);else{if(this.iconIds=[],h.icons)if(c.types.emptyicon={icon:{image:"images/1x1.png"}},r){if(this.iconCount=0,this.nodeIconList){var d=this.form.getData(this.nodeIconList);if(d&&d.lstData){this.iconCount=d.lstData.length;for(var p=0;p<this.iconCount;++p)c.types["icon"+(p+1)]={icon:{image:jIcons.selectIcon(d.lstData[p][0])}}}}}else{this.urlOk=!1;var m=this.getData();m.lstDef&&m.lstDef[this.iconIdCol-1][1]==eOmnisDataTypes.fftCharacter&&(this.urlOk=!0);for(var f=0,g=1;g<=this.lineCount;g++){var v=this.getData("#COL",g,this.iconIdCol);if(this.urlOk||(v=parseInt(v,10)),this.urlOk&&v&&v.length||0!=v){var b=!1;for(p=0;p<f;++p)if(this.iconIds[p]==v){b=!0;break}if(!b){if(this.urlOk)c.types["icon"+f]={icon:{image:jIcons.selectIcon(v)}};else{for(var y=(268435455&v)+"";y.length<6;)y="0"+y;c.types["icon"+f]={icon:{image:e.iconURLPrefix+y+"n16.png"}}}this.iconIds[f++]=v}}}}l.types=c,this.selectLines=[],l.json_data=this.getJSONdata(),l.ui={select_limit:this.multisel?-1:1,selected_parent_close:!1},this.checkbox&&(l.checkbox={override_ui:!0,two_state:this.twostate}),this.haveBoundEventFunctions&&($(i).unbind("open_node.jstree close_node.jstree after_open.jstree after_close.jstree select_all.jstree deselect_all.jstree rename_node.jstree hover_node.jstree"),$(i).unbind("mousedown select_node.jstree deselect_node.jstree check_node.jstree uncheck_node.jstree click dblclick loaded.jstree reselect.jstree init.jstree"),$(i).unbind("move_node.jstree create_node.jstree delete_node.jstree refresh.jstree")),$(i).jstree("is_locked")&&$(i).jstree("unlock"),r||(l.updateNow=!0),$(i).css("backgroundColor",e.style.backgroundColor),$(i).jstree(l),this.mHasFocus||$(i).jstree("unset_focus"),this.haveBoundEventFunctions=!0,$(i).bind("open_node.jstree",(function(t,e){if(a.updateEvenRows(),r){var i=e.rslt.obj.attr("data-ident");a.nodeJSON[i].flags|=Yu}else{var s=a.getNodeLine(e.rslt.obj.attr("id"));a.setData(1,"#1COL",s,a.openCol),a.canSendEvent(zu.evLoadNode)&&(a.addEventParams(s),a.sendEvent("evLoadNode"))}})).bind("close_node.jstree",(function(t,e){var i;if(a.updateEvenRows(),r){i=e.rslt.obj.attr("data-ident");var s=a.nodeJSON[i];s.flags&=~Yu,s.flags&Ju&&a.discardNodeChildren(e)}else i=a.getNodeLine(e.rslt.obj.attr("id")),a.setData(0,"#1COL",i,a.openCol);a.canSendEvent(zu.evCollapseNode)&&(a.addEventParams(i),a.sendEvent("evCollapseNode"))})).bind("after_open.jstree after_close.jstree",(function(t,e){a.iscroll&&a.iscroll.refresh();var s=a.getData("#L");if(a.isOpeningParentNodes&&document.querySelector(a.getNodeSelector(s))&&($(i).jstree("scrollObjToView",a.getNodeSelector(s)),a.isOpeningParentNodes=!1),a.updateAriaRolesAndAttributes(hd.eAriaUpdateActions.OPENCLOSENODE),"after_open"===t.type&&a.canSendEvent(zu.evExpandNode)){var n=r?e.rslt.obj.attr("data-ident"):a.getNodeLine(e.rslt.obj.attr("id"));a.addEventParams(n),a.sendEvent(Wu)}"after_close"===t.type&&e.rslt.obj.discard&&a.discardNodeChildren(e)})).bind("select_all.jstree deselect_all.jstree",(function(t,e){if(a.multisel)for(var i=1;i<=a.lineCount;i++)a.setData("select_all"==t.type,"#LSEL",i)})).bind("rename_node.jstree",(function(t,e){if(a.renameNodeID){var s,n,o,l,h,c=a.renameNodeID;a.renameNodeID=0,r?(n=(o=a.nodeJSON[c]).text,o.flags&Qu&&(l=n.indexOf(">"),h=n.lastIndexOf("<"),-1!=l&&(n=n.substring(l+1,h)))):(s=parseInt(e.rslt.obj.attr("listcolumn")),n=a.getData("#COL",c,s));var u=e.rslt.name;if(u!=n){if(r){var d;o.flags&Qu&&-1!=l&&(o.text=o.text.substr(0,l+1)+u+o.text.substr(h),d=!0),d||(o.text=u+"")}else{a.setData(u,"#1COL",c,s);for(var p=[],m=1;m<s;++m)p.push(a.getData("#COL",c,m));for(p.push(n),m=c+1;m<=a.lineCount&&a.matchesParent(m,p);++m)a.setData(u,"#1COL",m,s)}a.canSendEvent(zu.evRenamed)&&(a.addEventParams(c),a.eventParamsAdd("pOldName",n),a.eventParamsAdd("pNewName",u),a.sendEvent("evRenamed"))}var f=a.getClientElem();a.renameNodeID=0,r?$(i).jstree("set_text","#"+f.idBase+c,o.text):$(i).jstree("set_text","#"+f.idBase+c,a.getNodeText(u,a.getData("#COL",c,a.textColorCol),!0)),a.iscroll&&a.iscroll.refresh(),f.focus(),$(i).jstree("set_focus")}})).bind("mousedown",(function(t,e){a.renameNodeID&&(a.multisel||a.getNodeContainerElem(t.target).nodeID==a.renameNodeID)&&(a.ignoreClick=!0)})).bind("select_node.jstree deselect_node.jstree",(function(t,e){if("select_node"===t.type&&(a.currentNodeIdent=e.rslt.obj.attr("data-ident")),!a.disableEvents){if(a.updateAriaRolesAndAttributes(hd.eAriaUpdateActions.SELECT),a.multisel){for(var i=e.rslt.obj.length,s=0;s<i;++s){var n=a.getNodeLine(e.rslt.obj[s].id);a.setData("select_node"===t.type,"#LSEL",n)}o()}else if("select_node"===t.type){if(o(),r)return;n=a.getNodeLine(e.rslt.obj.attr("id"))}"select_node"===t.type&&(a.currentNodeLine=n,a.setData(n,"#L"))}function o(){if(!a.preventClickEvent&&a.canSendEvent(eBaseEvent.evClick,!0)){var t,i=null!==(t=e.rslt.obj.contextObj)&&void 0!==t?t:e.rslt.obj,s=r?i.attr("data-ident"):a.getNodeLine(i.attr("id"));s&&(a.addEventParams(s),a.sendEvent(eBaseEvent.evClick))}}})).bind("check_node.jstree uncheck_node.jstree",(function(t,e){if(a.currentNodeIdent=e.rslt.obj.attr("data-ident"),l=a.getNodeLine(e.rslt.obj.attr("id")),a.setData(l,"#L"),a.currentNodeLine=l,"check_node"===t.type&&$(i).jstree("scrollObjToView",a.getNodeSelector(a.currentNodeLine)),!a.disableEvents){var s=a.getNodeLine(e.rslt.obj.attr("id"));if(a.twostate)a.setData("check_node"===t.type?1:0,"#LSEL",s);else{for(var r=$(i).jstree("get_checked",null,!0),n=[],o=0;o<a.lineCount;++o)n[o]=0;for(o=0;o<r.length;++o){var l=a.getNodeLine(r[o].id);n[l-1]=1}a.setData(n,"#LSEL_ALL")}a.canSendEvent(eBaseEvent.evClick,!0)&&(a.addEventParams(s),a.sendEvent(eBaseEvent.evClick)),a.updateAriaRolesAndAttributes(hd.eAriaUpdateActions.SELECT)}})).bind("click dblclick tap",(function(t,e){if(a.ignoreClick)return a.ignoreClick=!1,void t.stopImmediatePropagation();var i=a.getNodeContainerElem(t.target);i.ok&&(a.clickedID=i.nodeID,jOmnis.handleEvent(t,a.clientElem,a.form.ident,a.uniqueID),a.focus())})).bind("loaded.jstree",(function(t,e){a.updateEvenRows(),a.iscroll&&a.iscroll.refresh(),a.elem.disabled&&$(i).jstree("lock"),a.updateAriaRolesAndAttributes(hd.eAriaUpdateActions.ALL)})).bind("reselect.jstree",(function(t,e){r&&a.setCurrentNode(a.currentNodeIdent)})).bind("init.jstree",(function(t,e){a.mHasFocus||$(a.clientElem.firstChild).jstree("unset_focus")})).bind("hover_node.jstree",(function(t,e){if(a.updateAriaRolesAndAttributes(hd.eAriaUpdateActions.HOVER),a.keyboardChangesCurrentLine&&a.multisel&&!e.rslt.obj.hoverFromMouseOver){a.currentNodeIdent=e.rslt.obj.attr("data-ident");var i=a.getNodeLine(e.rslt.obj.attr("id"));a.currentNodeLine=i,a.setData(i,"#L"),a.canSendEvent(eBaseEvent.evClick,!0)&&(a.addEventParams(i),a.sendEvent(eBaseEvent.evClick))}})).bind("move_node.jstree create_node.jstree delete_node.jstree refresh.jstree",(function(t,e){a.updateEvenRows()})),r||this.setTreeTextColor(e.style.color);var C=this.getTheme().getTextColorString(this.themeableData.color,this.resolveDefaultColor(this.themeableData.backgroundColor,ld.BACKGROUND),this.DefaultColors.TEXT);if(o.Q2.SetThemedIconColor(e,C),jOmnis.useiScroll){if(null==this.iscroll){e.firstChild.style.display="table",e.firstChild.style.width="100%";var _={allowDefaultOnStartAndEnd:!0,preventDefault:!0,scrollX:!0,mouseWheel:!0,tap:!0,scrollbars:!0};Function.prototype.bind&&(_.fadeScrollbars=!0),_.momentum=!0,_.bounce=!0,this.iscroll=this.attachIScroll(e,_,!1)}this.iscroll.refresh()}r||(this.displayLineInList(s),a.updateEvenRows()),this.updateAriaRolesAndAttributes(hd.eAriaUpdateActions.ALL)}}else this.updateWhenVisible=!0},hd.prototype.setCurrentNode=function(t,e){var i=this.getClientElem();if(this.mDataMode==Ku){$(this.clientSelector).jstree("deselect_all");var s="#"+i.idBase+t;this.preventClickEvent=!0,$(this.clientSelector).jstree("select_node",s),this.preventClickEvent=!1,$(this.clientSelector).jstree("scrollObjToView",s)}else this.displayLineInList(e),this.multisel&&this.selectLineInList(e);this.currentNodeIdent=t},hd.prototype.updateEvenRows=function(){var t=Array.prototype.slice.call(this.clientElem.querySelectorAll("a"),0),e=1;t.forEach((function(t){for(var i=!0,s=t.parentNode;s&&"LI"===s.tagName&&s.parentNode&&"UL"===s.parentNode.tagName&&s.parentNode.parentNode;)jOmnis.hasClass(s.parentNode.parentNode,"jstree-closed")&&(i=!1),s=s.parentNode;i&&(!function(t,e){jOmnis.addClass(t,e?"even":"odd"),jOmnis.removeClass(t,e?"odd":"even")}(t,!(e%2)),e++)}))},hd.prototype.updateAriaRolesAndAttributes=function(t){"openclosenode"!==(t=t.toLowerCase())&&"hover"!==t&&"select"!==t&&(t="all");var e=this.clientElem,i=e.querySelector("ul"),s=i.querySelectorAll("li");if("all"===t||"openclosenode"===t){for(d=0;d<s.length;d++)s[d].setAttribute("role","treeitem"),s[d].setAttribute("tabindex","-1"),jOmnis.hasClass(s[d],"jstree-open")?(s[d].setAttribute("aria-expanded","true"),jOmnis.removeClass(s[d],"activedescendant")):jOmnis.hasClass(s[d],"jstree-closed")&&s[d].setAttribute("aria-expanded","false");var r=e.querySelectorAll("ins");for(d=0;d<r.length;d++){var n=r[d],o=n.parentElement.hasAttribute("aria-expanded");if(n.setAttribute("role",o?"button":"presentation"),o){var a=jOmnis.hasClass(n.parentElement,"jstree-open")?"ctl_tree_collapse":"ctl_tree_expand";n.setAttribute("aria-label",jGetOmnisString(this.form.inst,a))}}var l=e.querySelectorAll("ul");for(d=0;d<l.length;d++)l[d].hasAttribute("role")||l[d].setAttribute("role","group")}if("hover"!==t){for(d=0;d<s.length;d++)this.multisel?this.checkbox?s[d].setAttribute("aria-checked","false"):s[d].setAttribute("aria-selected","false"):s[d].removeAttribute("aria-selected");var h=this.checkbox?i.querySelectorAll(".jstree-checked"):i.querySelectorAll(".jstree-clicked");for(d=0;d<h.length;d++)this.checkbox?h[d].setAttribute("aria-checked","true"):h[d].parentElement.setAttribute("aria-selected","true")}if("all"===t){var c=i.children,u="";this.multisel&&e.setAttribute("aria-multiselectable","true");for(var d=0;d<c.length;d++)u=d===c.length-1?u+c[d].id:u+c[d].id+" ",c[d].setAttribute("role","treeitem");e.setAttribute("aria-owns",u)}"select"!==t&&i.querySelector(".jstree-hovered")&&this.setAriaActiveDescendant(i.querySelector(".jstree-hovered").parentElement.id)},hd.prototype.addLineDataToIgnore=function(t){this.ignoreLineData||(this.ignoreLineData=[]),this.ignoreLineData.push(+t)},hd.prototype.buildDynamicJSONData=function(t,e){if(t||(e=this.getData()),!e||!e.lstData||!e.lstData.length)return[];var i=[];e=e.lstData;for(var s=this.getClientElem(),r=0;r<e.length;++r){var n=e[r],o=this.ignoreLineData?this.ignoreLineData.indexOf(+n[this.identCol-1]):-1;if(o>-1)this.ignoreLineData.splice(o,1);else{var a={};a.data=this.getNodeText(n[this.textCol-1],n[this.textColorCol-1],!0),a.text=a.data;var l={};if(this.icons){l.rel="emptyicon";var h=1*n[this.iconIdCol-1];h>=1&&h<=this.iconCount&&(l.rel="icon"+h)}var c=n[this.identCol-1];if(!jOmnis.isInteger(c)||c<=0)throw jGetOmnisException(this.form.inst,"ctl_tree_badident",this.objName,c);if(c+="",this.nodeJSON[c])throw jGetOmnisException(this.form.inst,"ctl_tree_dupident",this.objName,c);l["data-ident"]=c,l["data-tag"]=n[this.tagCol-1],l.id=s.idBase+c,l.title=n[this.tooltipCol-1],l.even=r%2==1;var u=1*n[this.flagsCol-1];if(0!=n[this.textColorCol-1]&&(u|=Qu),a.flags=u,a.attr=l,this.nodeJSON[c]=a,u&Xu){a.state=u&Yu?"open":"closed";var d=n[this.childrenCol-1],p=this.buildDynamicJSONData(a,d);p.length&&(a.children=p)}i.push(a)}}return i},hd.prototype.getJSONdata=function(){var t={};t.progressive_render=!jOmnis.useiScroll&&!this.multisel;var e=this;if(this.mDataMode==Ku)t.data=function(t,i){-1==t?i(e.buildDynamicJSONData()):!e.canSendEvent(zu.evLoadNode)||e.disableLoadNode?i([]):(e.loadingNode||(e.loadingNode=[]),e.loadingNode.push({node:t,callback:i}),e.addEventParams(t.attr("data-ident")),e.sendEvent("evLoadNode"))};else{var i=this.getClientElem();t.data=function(t,s){if(-1==t)s(e.buildChildJSONData([],1));else{for(var r=e.getNodeLine(t.attr("id")),n=[],o=1;o<=e.colCount-e.getTreeInfoColCount();++o){var a=e.getData("#COL",r,o);if(""==a)break;n[n.length]=a}s(e.buildChildJSONData(n,r+1))}var l=e.clientSelector;for(e.disableEvents=!0;e.selectLines.length;){var h=e.selectLines.shift();if(e.checkbox)$(l).jstree("check_node","#"+h);else{if(!e.multisel){var c=e.getNodeSelector(r);$(l).jstree("deselect_node",c)}$(l).jstree("select_node","#"+h,!1)}}e.disableEvents=!1,e.setTreeTextColor(i.style.color)}}return t},hd.prototype.getNodeContainerElem=function(t){var e={ok:!1},i=t;if(null!=i&&("A"==i.tagName||"SPAN"==i.tagName||"INS"==i.tagName&&"A"==i.parentNode.tagName)){e.ok=!0,e.nodeID=0;for(var s=this.getClientElem();i!=s&&null!=i;){if("LI"==i.tagName){this.mDataMode==Ku?e.nodeID=i.getAttribute("data-ident"):e.nodeID=this.getNodeLine(i.id);break}i=i.parentNode}}return e},hd.prototype.handleEvent=function(t){var e=eBaseEvent.evNone;switch(t.type){case"focus":return $(this.clientSelector).jstree("set_focus"),this.mHasFocus=!0,this.superclass.handleEvent.call(this,t);case"click":case"tap":case"dragstart":var i,s=this.getClientElem(),r=Ku==this.mDataMode;if((r||this.enterableCol)&&this.clickedID&&!t.shiftKey&&!t.ctrlKey&&!t.altKey&&!this.elem.disabled)if((r?0!=((i=this.nodeJSON[this.clickedID]).flags&Gu):0!=this.getData("#COL",this.clickedID,this.enterableCol))&&"INS"!=t.target.tagName&&!this.renameNodeID){var n="#"+s.idBase+this.clickedID,o=this.clientSelector;if(r){if(i.flags&Qu){var a=i.text.indexOf(">"),l=i.text.lastIndexOf("<");if(-1!=a){var h=i.text.substring(a+1,l);this.renameNodeID=0,$(o).jstree("set_text",n,h)}}this.renameNodeID=this.clickedID}else{var c=$(n).attr("listcolumn"),u=this.getData("#COL",this.clickedID,c);this.renameNodeID=0,$(o).jstree("set_text",n,this.getNodeText(u,this.getData("#COL",this.clickedID,this.textColorCol),!1)),this.renameNodeID=this.clickedID}$(o).jstree("rename",n)}this.multisel||r||this.setData(this.clickedID,"#L");break;case"dblclick":e=eBaseEvent.evDoubleClick;break;case"keypress":var d=OmnisKeyboardHandler.getNormalizedEventKey(t);if(!this.isRenaming&&"Tab"!==d){this.continueKeySearch(d),jOmnis.stopEventNow(t);break}default:return this.superclass.handleEvent.call(this,t)}return!this.elem.disabled&&this.canSendEvent(e)&&(this.addEventParams(this.clickedID),this.iscroll?this.sendEventDeferred(e):this.sendEvent(e)),!0},hd.prototype.searchList=function(t){if(t&&t.length){for(var e={},i=this.clientElem.querySelectorAll("li"),s=0;s<i.length;s++){e[i[s].getAttribute("data-ident")]=i[s].querySelector("a").innerText.trim()}var r=Object.keys(e).length;for(s=0;s<r;s++){var n=Object.keys(e)[s],o=e[n];if(null!=o&&0===o.toUpperCase().indexOf(t)){if(Ku!==this.mDataMode)var a=this.getData("").__list.search(this.identCol,n),l=this.getNodeSelector(a);else l="#"+this.clientElem.idBase+n;return $(this.clientSelector).jstree("hover_node",l),void $(this.clientSelector).jstree("scrollObjToView",l)}}}},hd.prototype.addEventParams=function(t){if(Ku==this.mDataMode){var e=this.nodeJSON[t];return this.eventParamsAdd("pNodeIdent",e?1*t:null),void this.eventParamsAdd("pNodeTag",e?e.attr["data-tag"]:null)}var i=t?this.getData("#COL",t,this.identCol):0;if(this.eventParamsAdd("pNodeIdent",i),this.tagCol){var s=t?this.getData("#COL",t,this.tagCol):"";this.eventParamsAdd("pNodeTag",s)}},hd.prototype.getTreeInfoColCount=function(){switch(this.mDataMode){case $u:case Vu:return 5;case Uu:return 7;case qu:return 6;case Ku:return 8}throw jGetOmnisException(this.form.inst,"ctl_tree_invmode",this.objName)},hd.prototype.setListColumnNumbers=function(){switch(this.mDataMode){case $u:return this.iconIdCol=this.colCount-4,this.identCol=this.colCount-3,this.openCol=this.colCount-2,this.textColorCol=this.colCount-1,this.tooltipCol=this.colCount,this.tagCol=0,void(this.enterableCol=0);case Uu:return this.iconIdCol=this.colCount-6,this.identCol=this.colCount-5,this.openCol=this.colCount-4,this.textColorCol=this.colCount-3,this.tooltipCol=this.colCount-2,this.tagCol=this.colCount-1,void(this.enterableCol=this.colCount);case Vu:return this.iconIdCol=this.colCount-4,this.identCol=this.colCount-3,this.enterableCol=this.colCount-2,this.openCol=this.colCount-1,this.textColorCol=this.colCount,this.tooltipCol=0,void(this.tagCol=0);case qu:return this.iconIdCol=this.colCount-5,this.identCol=this.colCount-4,this.enterableCol=this.colCount-3,this.openCol=this.colCount-2,this.textColorCol=this.colCount-1,this.tagCol=this.colCount,void(this.tooltipCol=0);case Ku:return this.textCol=1,this.iconIdCol=2,this.identCol=3,this.tagCol=4,this.tooltipCol=5,this.textColorCol=6,this.flagsCol=7,void(this.childrenCol=8)}throw jGetOmnisException(this.form.inst,"ctl_tree_invmode",this.objName)},hd.prototype.getProperty=function(t){switch(t){case eBaseProperties.multipleselect:return"1"==this.clientElem.getAttribute("data-multisel");case Tu:return"1"==this.clientElem.getAttribute("data-icons");case Su:return"1"==this.clientElem.getAttribute("data-dots");case xu:return"1"==this.clientElem.getAttribute("data-checkbox");case Du:return"1"==this.clientElem.getAttribute("data-twostate");case Nu:return this.clientElem.iconURLPrefix;case Ou:return this.selectedLineColor;case Au:return this.selectedLineTextColor;case Pu:return null;case Iu:return null==this.currentNodeIdent?0:this.currentNodeIdent;case Lu:return null;case ju:return this.mExtraSpace;case eBaseProperties.keyboardchangesline:return this.keyboardChangesCurrentLine;case Bu:return this.mLineBorder;case Ru:return this.mLineBorderColor;case Mu:return this.mEvenRowColor;case Fu:return this.mRenameShortcut;case Hu:return this.checkboxColor}return this.superclass.getProperty.call(this,t)},hd.prototype.getCanAssign=function(t){switch(t){case eBaseProperties.multipleselect:case xu:case Du:return this.mDataMode!=Ku;case Tu:case Su:case Nu:case Ou:case Au:case eBaseProperties.textcolor:case Pu:case Iu:case Lu:case ju:case eBaseProperties.keyboardchangesline:case Bu:case Ru:case Mu:case Fu:case Hu:return!0}return this.superclass.getCanAssign.call(this,t)},hd.prototype.setProperty=function(t,e){var i=this.getClientElem(),s=!0,r=this.mDataMode==Ku;switch(t){case Pu:return!(!r||!this.loadingNode||this.loadingNode.length<1)&&(this.updatingNodeData=!0,this.loadingNode[0].callback(this.buildDynamicJSONData(this.loadingNode[0].node,e)),this.loadingNode.shift(),!0);case Iu:if(!r)var n=this.getData("").__list.search(this.identCol,e);return this.setCurrentNode(e,n),!0;case Lu:return!!r&&this.nodeAction(e);case eBaseProperties.multipleselect:if(r)return!1;this.clientElem.setAttribute("data-multisel",e?"1":"0");break;case Tu:return this.clientElem.setAttribute("data-icons",e?"1":"0"),$(this.clientSelector).jstree(e?"show_icons":"hide_icons"),!0;case Su:return this.clientElem.setAttribute("data-dots",e?"1":"0"),$(this.clientSelector).jstree(e?"show_dots":"hide_dots"),!0;case xu:if(r)return!1;this.clientElem.setAttribute("data-checkbox",e?"1":"0");break;case Du:if(r)return!1;this.clientElem.setAttribute("data-twostate",e?"1":"0");break;case Nu:if(this.setIconUrlPrefix(e),r)return!0;break;case Ou:return this.selectedLineColor=+e,this.buildCSSStyles(),!0;case Au:return this.selectedLineTextColor=+e,this.buildCSSStyles(),!0;case eBaseProperties.textcolor:this.themeableData.color=+e;var a=this.getTheme().getTextColorString(+e,this.resolveDefaultColor(this.themeableData.backgroundColor,ld.BACKGROUND),this.DefaultColors.TEXT);return i.style.color=a,o.Q2.SetThemedIconColor(i,a),r?this.buildCSSStyles():this.setTreeTextColor(a),!0;case eBaseProperties.backcolor:case eBaseProperties.backalpha:var l=this.superclass.setProperty.call(this,t,e);return $("#"+i.firstChild.id).css("backgroundColor",i.style.backgroundColor),l;case ju:var h=this.mExtraSpace;return this.mExtraSpace=1*e,this.mExtraSpace<0&&(this.mExtraSpace=0),this.mExtraSpace==h?!0:(this.buildCSSStyles(),!0);case eBaseProperties.keyboardchangesline:return this.keyboardChangesCurrentLine=1*e!=0,!0;case Bu:return this.mLineBorder=1*e!=0,this.buildCSSStyles(),!0;case Ru:return this.mLineBorderColor=+e,this.buildCSSStyles(),!0;case eBaseProperties.bordercolor:return this.superclass.setProperty.call(this,t,e),-1===this.mLineBorderColor&&this.buildCSSStyles(),!0;case Mu:return this.mEvenRowColor=+e,this.buildCSSStyles(),!0;case Fu:return this.mRenameShortcut=!!e,!0;case Hu:return this.checkboxColor=+e,Lt.setColor(this.checkboxColor,this),!0;default:s=!1}return s?(this.update(),!0):this.superclass.setProperty.call(this,t,e)},hd.prototype.activeChanged=function(){var t="#"+this.getClientElem().firstChild.id;this.elem.disabled?$(t).jstree("lock"):$(t).jstree("unlock"),this.superclass.activeChanged.call(this)},hd.prototype.canRenameByKeypress=function(){return this.mRenameShortcut},hd.prototype.buildChildJSONData=function(t,e){for(var i=this.getClientElem(),s=[],r="",n=0,o=this.getData("#L"),a=e;a<=this.lineCount;a++){if(!this.matchesParent(a,t))return s;var l=this.getData("#COL",a,t.length+1);if(l!=r){if(this.multisel)this.getData("#LSEL",a)&&(this.selectLines[this.selectLines.length]=i.idBase+a);else o==a&&(this.selectLines=[i.idBase+a],this.currentNodeLine=o);r=l;var h={};h.data=this.getNodeText(l,this.getData("#COL",a,this.textColorCol),!0);var c={};if(this.icons){c.rel="emptyicon";var u=this.getData("#COL",a,this.iconIdCol);if(this.urlOk||(u=parseInt(u,10)),u)for(var d=0;d<this.iconIds.length;++d)if(u==this.iconIds[d]){c.rel="icon"+d;break}}c.id=i.idBase+a,this.tooltipCol&&(c.title=this.getData("#COL",a,this.tooltipCol)),c.listcolumn=t.length+1,c["data-ident"]=this.getData("#COL",a,this.identCol),c.even=a%2==0,h.attr=c;var p=this.colCount-this.getTreeInfoColCount(),m=!1;if(a<this.lineCount&&t.length<p-1&&(m=this.matchesParent(a+1,t)&&this.getData("#COL",a+1,t.length+1)==l),m){var f=0!=this.getData("#COL",a,this.openCol);if(h.state=f?"open":"closed",f||this.checkbox&&!this.twostate){var g=t.slice(0);g[t.length]=l,h.children=this.buildChildJSONData(g,a+1)}}s[n++]=h}}return s},hd.prototype.matchesParent=function(t,e){for(var i=0;i<e.length;++i){if(this.getData("#COL",t,i+1)!=e[i])return!1}return!0},hd.prototype.getNodeText=function(t,e,i){return i&&0!=e?'<span style="color:'+this.getTheme().getColorString(e)+';">'+t+"</span>":t},hd.prototype.setTreeTextColor=function(t){var e=this.getClientElem();$("#"+e.id).find("a").css("color",t)},hd.prototype.getNodeLine=function(t){if(this.mDataMode==Ku)throw jGetOmnisException(this.form.inst,"ctl_tree_badgnl",this.objName);return parseInt(t.substr(t.lastIndexOf("_")+1),10)},hd.prototype.setIconUrlPrefix=function(t){var e=this.getClientElem();e.iconURLPrefix=this.setupIcon(t),null!=e.iconURLPrefix&&0!=e.iconURLPrefix.length&&"0"!=e.iconURLPrefix||(e.iconURLPrefix="icons/datafile/omnispic/")},hd.prototype.buildCSSStyles=function(){var t=this.getTheme();this.mTreeStyleSheet&&(jOmnis.removeStyleSheet(this.mTreeStyleSheet),this.mTreeStyleSheet=null);var e="#"+this.clientElem.id,i="",s=t.getColorString(this.selectedLineColor,this.DefaultColors.SELECTED_LINE),r=t.getTextColorString(this.selectedLineTextColor,this.resolveDefaultColor(this.selectedLineColor,ld.SELECTED_LINE),this.DefaultColors.SELECTED_LINE_TEXT);if(i+=e+" *.jstree-clicked{",i+="background:"+s+" !important;",i+="color:"+r+" !important;",i+="}",i+=e+" *.jstree-svg-clicked svg{",i+="--om-tint-color:"+r+";",i+="}",this.mDataMode==Ku||this.mExtraSpace){i+=e+" a{",this.mDataMode==Ku&&(i+="color:"+this.getClientElem().style.color+";");var n=hd.DEFAULT_PADDING;this.mExtraSpace&&(n+=this.mExtraSpace/2),i+="padding:"+n+"px "+hd.DEFAULT_PADDING+"px;",i+="}";var o=document.createElement("div");o.innerHTML="<div><ul class='jstree-no-dots jstree-no-icons'><li class='jstree-open'><a>Dummy</a></li></ul></div>",this.clientElem.appendChild(o);var a=o.clientHeight+2*n;o.remove(),i+=e+" .jstree-icon.omnis-tree-button{",i+="padding:"+(a-hd.SVG_ARROW_SIZE)/2+"px 0;",i+="}"}i+=e+" a{",i+="border-bottom: "+(this.mLineBorder?t.getColorString(this.mLineBorderColor,this.DefaultColors.LINE_BORDER):"transparent")+" solid 1px",i+="}";var l=t.getColorString(this.mEvenRowColor,this.DefaultColors.EVEN_ROW);l&&(i+=e+" a.even{",i+="background-color: "+l,i+="}");var h=this.getClientElem().style.textDecoration;h&&h.length||(h="none"),i+=e+" a{text-decoration:"+h+" !important;}",this.mHiliteLine&&(i=this.addHiliteLineStyle(i,s)),this.getProperty(eBaseProperties.autoscroll)||this.getProperty(eBaseProperties.horzscroll)||(i+=e+" li a {display:block;text-overflow:ellipsis;}",i+=e+" li ins {float:left;}"),this.mTreeStyleSheet=jOmnis.addStyleSheet(i)},hd.prototype.complexGridRerendered=function(){this.buildCSSStyles()},hd.prototype.handleEventResult=function(t,e){return this.loadingNode&&this.loadingNode.length>0&&"evLoadNode"==t&&(this.loadingNode[0].callback([]),this.updatingNodeData||(this.loadingNode.shift(),this.updatingNodeData=!1)),this.superclass.handleEventResult.call(this,t,e)},hd.prototype.nodeAction=function(t){var e=t.lstData;if(!e)return!1;var i=e[0];if(!i)return!1;var s,r=e[1];if(0!=r||ed!=i){if(!r||r<=0)return!1;if(!(s=this.nodeJSON[r]))return!1}var n=this.getClientElem();switch(i){case Zu:return $(this.clientSelector).jstree("open_node","#"+n.idBase+r),!0;case td:return $(this.clientSelector).jstree("close_node","#"+n.idBase+r),!0;case ed:return this.addNodes(r,e[2],e[3]);case id:var o=this.currentNodeIdent;return this.deleteNode(r),this.currentNodeIdent!=r||this.nodeJSON[r]||(this.currentNodeIdent=0),this.currentNodeIdent!=o&&this.canSendEvent(eBaseEvent.evClick,!0)&&(this.addEventParams(this.currentNodeIdent),this.sendEvent(eBaseEvent.evClick)),!0;case sd:var a=s.text,l=!1;if(s.flags&Qu){var h=a.indexOf(">"),c=a.lastIndexOf("<");-1!=h&&(s.text=s.text.substr(0,h+1)+e[2]+s.text.substr(c),l=!0)}return l||(s.text=e[2]),$(this.clientSelector).jstree("set_text","#"+n.idBase+r,s.text),!0;case rd:var u,d=e[2]>0?"icon".concat(e[2]):"emptyicon",p=n.querySelector("#"+n.idBase+r),m=null===(u=p.querySelector("a"))||void 0===u?void 0:u.querySelector("ins");if(null==p||p.setAttribute("rel",d),m){var f=this.getSVGIconData(d);if(f)jIcons.replaceOrAddToElem(m,f);else{var g=m.querySelector("svg");null==g||g.remove()}}return!0;case nd:var v,b=e[2];if(0===b)v=-1;else{if(!this.nodeJSON[b])return!1;v="#"+n.idBase+b}var y=this.getPositionParam(b,e[3]);return $(this.clientSelector).jstree("move_node","#"+n.idBase+r,v,y),!0;case od:return $(this.clientSelector).jstree("close_node","#"+n.idBase+r,!1,!0),!0;case ad:for(var C=$.jstree._reference(this.clientSelector)._get_children("#"+n.idBase+r),_=0;_<C.length;_++)this.deleteNode(C[_].getAttribute("data-ident"),!0);return $(this.clientSelector).jstree("refresh","#"+n.idBase+r),!0}return!1},hd.prototype.deleteNode=function(t,e){var i=this.getClientElem(),s=$.jstree._reference(this.clientSelector)._get_children("#"+i.idBase+t);if(s)for(var r=0;r<s.length;++r)this.deleteNode(s[r].getAttribute("data-ident"));e||(this.preventClickEvent=!0,$(this.clientSelector).jstree("delete_node","#"+i.idBase+t),this.preventClickEvent=!1),delete this.nodeJSON[t]},hd.prototype.getPositionParam=function(t,e){var i=this.getClientElem();if(-1==e)e="first";else if(0==e)e="last";else{var s=!1,r=$.jstree._reference(this.clientSelector)._get_children(0==t?-1:"#"+i.idBase+t);if(r)for(var n=0;n<r.length;++n)if(r[n].getAttribute("data-ident")==e){e=n+1,s=!0;break}s||(e="last")}return e},hd.prototype.addNodes=function(t,e,i){var s=this.getClientElem(),r=this.buildDynamicJSONData(!0,i);if(!r.length)return!0;e=this.getPositionParam(t,e);var n=$(this.clientSelector);function o(t,i){var r=i.attr["data-ident"];if(n.jstree("create_node",0==t?-1:"#"+s.idBase+t,e,i,null,null!=i.children),i.children){"closed"==i.state&&n.jstree("load_node","#"+s.idBase+r);for(var a=i.children,l=0;l<a.length;++l)o(r,a[l])}}function a(t){return $("#"+s.idBase+t).data("jstree_is_loading")}if("last"!=e)for(var l=r.length-1;l>=0;--l)a(t)?this.addToNodeActionQueue(t,r[l],o):o(t,r[l]);else for(var h=0;h<r.length;++h)a(t)?this.addToNodeActionQueue(t,r[h],o):o(t,r[h]);return!0},hd.prototype.addToNodeActionQueue=function(t,e,i){this.nodeActionQueue||(this.nodeActionQueue={}),this.nodeActionQueue[t]||(this.nodeActionQueue[t]=[]),this.nodeActionQueue[t].push({nodeJson:e,callback:i})},hd.prototype.loadNodeFinished=function(t){!this.nodeActionQueue||!this.nodeActionQueue[t]||this.nodeActionQueue[t].length<1||(this.nodeActionQueue[t].forEach((function(e){return e.callback(t,e.nodeJson)})),delete this.nodeActionQueue[t])},hd.prototype.fontChanged=function(){this.superclass.fontChanged.call(this),this.buildCSSStyles()},hd.prototype.getDragValue=function(){if(!this.currentNodeIdent)return null;var t=this.nodeJSON[this.currentNodeIdent],e=t.text,i=t.attr["data-tag"];if(t.flags&Qu){var s=e.indexOf(">"),r=e.lastIndexOf("<");-1!=s&&(e=e.substring(s+1,r))}var n=new omnis_raw_list(!0,this.form),o=n.$cols();return o.$add("ident",eOmnisDataTypes.fftInteger,0),o.$add("tag",eOmnisDataTypes.fftCharacter,0,gCliMaxcharlen),o.$add("text",eOmnisDataTypes.fftCharacter,0,gCliMaxcharlen),n.lstData=[this.currentNodeIdent,i,e],n},hd.prototype.getDropTarget=function(t){if(this.mDropId=null,this.mHiliteLine){var e=this.getClientElem();if("UL"==t.tagName||"LI"==t.tagName)return null;for(;t;){if("LI"==t.tagName){var i;if(i=this.mDataMode==Ku?1*t.getAttribute("data-ident"):this.getNodeLine(t.id))for(var s=0;s<t.children.length;++s)if("A"==t.children[s].tagName)return this.mDropId=i,this.form.inst.mNoOverlay=!0,this.mDataMode==Ku?this.nodeAction({lstData:[Zu,i]}):$(this.clientSelector).jstree("open_node","#"+e.idBase+i),this.form.inst.mNoOverlay=!1,t.children[s];return null}t=t.parentNode}return null}return this.superclass.getDropTarget.call(this,t)},hd.prototype.hiliteLineChanged=function(){this.buildCSSStyles()},hd.prototype.sendDragStartEvent=function(t){if(this.mDataMode==Ku){var e=this.getNodeContainerElem(t.target);e.ok?(e.nodeID!=this.currentNodeIdent&&(this.clickedID=e.nodeID,this.setCurrentNode(this.clickedID),this.form.inst.mNoOverlay=!0,jOmnis.handleEvent(t,this.clientElem,this.form.ident,this.uniqueID),this.form.inst.mNoOverlay=!1),this.superclass.sendDragStartEvent.call(this,t)):jOmnis.stopEventNow(t)}else jOmnis.stopEventNow(t)},hd.prototype.getNodeSelector=function(t){return this.mDataMode!=Ku?"#"+this.clientElem.idBase+t:"#"+this.clientElem.idBase+this.getNodeIdent(t)},hd.prototype.getNodeIdent=function(t){var e=this.getData();return!e||!e.lstData||!e.lstData.length||e.lstData.length<t?"":(e=e.lstData)[t-1][this.identCol-1]},hd.prototype.getNotActiveElem=function(){return this.elem},hd.prototype.getSVGArrowHTML=function(){var t=hd.SVG_ARROW_SIZE,e={width:t,height:t,viewBox:[0,0,t,t].join(" ")};return jIcons.getHtml("images/keyboard_arrow_right.svg?",null,null,null,e,null)},hd.prototype.addCheckboxElem=function(t,e,i){document.body.appendChild(t),t.style.font=getComputedStyle(this.clientElem).font,Lt.addToElem(t,e,"",!1,!0),t.firstElementChild.setAttribute("aria-label",i),Lt.updateDimensions(t,!0);var s=Lt.getDimensions(t);t.style.height=s.height+"px",t.style.width=s.width+"px",t.style.marginRight=parseInt(getComputedStyle(t).fontSize)/2+"px",document.body.removeChild(t)},hd.prototype.setCheckboxValue=function(t,e){Lt.setValue(t,e)},hd.prototype.addSVGIconData=function(t,e){this.SVGIconData||(this.SVGIconData={}),this.SVGIconData[t]=e},hd.prototype.getSVGIconData=function(t){if(this.SVGIconData)return this.SVGIconData[t]},hd.prototype.discardNodeChildren=function(t){for(var e=t.inst._get_children(t.rslt.obj),i=0;i<e.length;++i)this.deleteNode(e[i].getAttribute("data-ident"));var s=t.inst._get_node(t.rslt.obj);s.attr("state","closed"),s.removeClass("jstree-leaf"),s.addClass("jstree-closed")};var cd=0,ud=hd,dd=OMCreateAbstractClass(["init","update","destroy","setProperty","getProperty","setSize"],{saveState:function(){},restoreState:function(){}});dd.PROPERTIES={showcontrols:"$showcontrols",currentposition:"$currentposition",startposition:"$startposition",poster:"$poster",tracklistname:"$tracklistname",duration:"$duration",playing:"$playing",volume:"$volume",playbackrate:"$playbackrate",requestCaptions:"$requestcaptions"},dd.EVENTS={evVideoReady:6e3,evVideoEnded:6001};var pd=dd;function md(t){this.ctrl=t,this.queuedAssignments={}}md.prototype=function(){var t=[pd.PROPERTIES.playing,pd.PROPERTIES.currentposition,pd.PROPERTIES.volume,pd.PROPERTIES.playbackrate],e=0,i=1,s=2,r=3,n=4,o={0:"subtitles",1:"captions",2:"descriptions",3:"chapters",4:"metadata"},a=Object.create(pd.prototype);a.init=function(){this.playing=!1,l.call(this)},a.destroy=function(){this.videoElement&&(this.oldVolume=this.getProperty(pd.PROPERTIES.volume)),this.queuedAssignments={},this.videoReady=!1,this.ctrl.getClientElem().innerHTML=""},a.setSize=function(t,e){this.videoElement&&(this.videoElement.height=e,this.videoElement.width=t)},a.getProperty=function(t){switch(t){case pd.PROPERTIES.currentposition:return this.videoReady?this.videoElement.currentTime:-1;case pd.PROPERTIES.startposition:return this.startPosition||0;case pd.PROPERTIES.showcontrols:return this.showControls;case pd.PROPERTIES.poster:return this.poster;case pd.PROPERTIES.volume:return this.videoElement?this.videoElement.muted?0:100*this.videoElement.volume:-1;case pd.PROPERTIES.duration:return this.videoElement?this.videoElement.duration:-1;case pd.PROPERTIES.playing:return this.playing;case pd.PROPERTIES.playbackrate:if(this.videoElement)return this.videoElement.playbackRate}},a.setProperty=function(e,i){if(!this.videoReady&&t.includes(e))return this.queuedAssignments[e]=+i,!1;switch(e){case pd.PROPERTIES.showcontrols:return this.showControls=!!i,this.videoElement&&(i?this.videoElement.setAttribute("controls","1"):this.videoElement.removeAttribute("controls")),!0;case pd.PROPERTIES.startposition:return this.startPosition=+i,!0;case pd.PROPERTIES.currentposition:return this.videoElement.currentTime=Math.min(+i,m.call(this)),!0;case pd.PROPERTIES.poster:return this.poster=i,!0;case pd.PROPERTIES.tracklistname:return this.trackListName=i,!0;case pd.PROPERTIES.volume:return 0==+i?this.videoElement.muted=!0:(this.videoElement.muted=!1,this.videoElement.volume=+i/100),!0;case pd.PROPERTIES.playing:return u.call(this,!!i),!0;case pd.PROPERTIES.playbackrate:return this.videoElement.playbackRate=+i,!0}return!1},a.update=function(){l.call(this)};var l=function(){if(this.playing=!1,this.videoReady=!1,!jOmnis.mDesign){var t=this.ctrl.getClientElem(),a=this.ctrl.getData("#LCNT");if(this.ctrl.getData("#CCNT")<2)alert("HTML5 Video list does not have 2 columns.");else{this.videoElement&&this.destroy(),t.innerHTML="<div></div>";for(var l='<video style="position:absolute" width="'+t.clientWidth+'" height="'+t.clientHeight+'" '+(this.showControls?'controls="controls" ':"")+(this.poster?'poster="'+this.poster+'" ':"")+(jOmnis.isAndroid?'onclick="this.play();" ':"")+">",u=0;u<a;u++){var d=u+1,m=this.ctrl.getData("#COL",d,1);l+='<source src="',0===m.indexOf("/")?l=l+window.location.protocol+"//"+window.location.host+m:l+=m,l+='"';var f=this.ctrl.getData("#COL",d,2);f.length>0&&(l=l+" type='"+f+"'/>")}if(p.call(this),this.trackListData){var g="",v=this.ctrl.form.getData(this.trackListData,"").lstData;for(u=0;u<v.length;u++){g+="<track"+(' kind="'+o[v[u][e]]+'"')+(' label="'+v[u][i]+'"')+(' src="'+v[u][s]+'"')+(' srclang="'+v[u][r]+'"')+(v[u][n]?" default":"")+" />"}l+=g}if(l+="</video>",t.innerHTML=l,this.videoElement=t.firstChild,this.videoElement){var b=function(t){y.playing=t},y=this;this.videoElement.addEventListener("canplay",(function t(){y.videoElement.removeEventListener("canplay",t),h.call(y)})),this.videoElement.addEventListener("play",(function(){b(!0)})),this.videoElement.addEventListener("pause",(function(){b(!1)})),this.videoElement.addEventListener("ended",(function(){b(!1),c.call(y)}))}}}},h=function(){this.videoReady=!0,null!=this.oldVolume&&(this.setProperty(pd.PROPERTIES.volume,this.oldVolume),this.oldVolume=null),this.videoElement.currentTime=Math.min(this.startPosition,m.call(this)),d.call(this),this.ctrl.canSendEvent(pd.EVENTS.evVideoReady)&&(this.ctrl.eventParamsAdd("pVideoURL",this.videoElement.currentSrc),this.ctrl.sendEvent("evVideoReady"))},c=function(){this.ctrl.canSendEvent(pd.EVENTS.evVideoEnded)&&(this.ctrl.eventParamsAdd("pVideoURL",this.videoElement.currentSrc),this.ctrl.sendEvent("evVideoEnded"))},u=function(t){if(this.playing=!!t,t){var e=this.videoElement.play();if(e){var i=this;e.catch((function(t){i.playing=!1,console.error(t.message)}))}}else this.videoElement.pause()},d=function(){for(var t=Object.keys(this.queuedAssignments),e=0;e<t.length;e++)this.setProperty(t[e],this.queuedAssignments[t[e]]);this.queuedAssignments={}},p=function(){this.trackListName&&this.trackListName.length>0?this.trackListData=this.form.getDataIndex(this.trackListName,this):this.trackListData=0},m=function(){return this.videoElement&&this.videoElement.duration>=0?this.videoElement.duration:-1};return a}();var fd=md;i(8674);function gd(t){this.ctrl=t,this.queuedAssignments={}}gd.prototype=function(){var t={},e=!1,i=!1,s=[pd.PROPERTIES.playing,pd.PROPERTIES.currentposition,pd.PROPERTIES.volume,pd.PROPERTIES.playbackrate],r=Object.create(pd.prototype);r.init=function(){l.call(this)},r.setSize=function(t,e){this.player&&this.player.setSize(t,e)},r.getProperty=function(t){switch(t){case pd.PROPERTIES.currentposition:return this.videoReady?this.player.getCurrentTime():-1;case pd.PROPERTIES.startposition:return this.startPosition||0;case pd.PROPERTIES.showcontrols:return this.showControls;case pd.PROPERTIES.duration:return this.videoReady?this.player.getDuration():-1;case pd.PROPERTIES.volume:return this.videoReady?this.player.isMuted()?0:this.player.getVolume():this.volume;case pd.PROPERTIES.playing:return!!this.videoReady&&this.player.getPlayerState()===YT.PlayerState.PLAYING;case pd.PROPERTIES.playbackrate:if(this.videoReady)return this.player.getPlaybackRate()}},r.setProperty=function(t,e){if(!this.videoReady&&s.includes(t))return this.queuedAssignments[t]=+e,!1;switch(t){case pd.PROPERTIES.showcontrols:return this.showControls=!!e,this.player&&(this.restoreWhenReady=!0,this.saveState(),c.call(this)),!0;case pd.PROPERTIES.startposition:return this.startPosition=+e,!0;case pd.PROPERTIES.currentposition:if(this.player.getPlayerState()===YT.PlayerState.CUED)var i=!0;return this.player.seekTo(Math.min(+e,u.call(this)),!0),i&&a(this.player,YT.PlayerState.PLAYING,(function(t){t.pauseVideo()})),!0;case pd.PROPERTIES.volume:return this.volume=+e,+e?(this.player.setVolume(+e),this.player.isMuted()&&this.player.unMute()):this.player.mute(),!0;case pd.PROPERTIES.playing:return e?this.player.playVideo():this.player.pauseVideo(),!0;case pd.PROPERTIES.playbackrate:return this.player.setPlaybackRate(+e),!0;case pd.PROPERTIES.requestCaptions:return this.requestCaptions!==!!e&&(this.requestCaptions=!!e,this.player&&p.call(this)),!0}return!1},r.saveState=function(){this.player&&(this.savedState={playlistIndex:this.player.getPlaylistIndex(),currentTime:this.player.getCurrentTime()})},r.restoreState=function(){this.restoreWhenReady=!0,this.player&&this.destroy(),this.ctrl.getTrueVisibility()?c.call(this):this.ctrl.updateOnVisible=!0};var n=function(){if(this.savedState){var t=this.savedState.currentTime,e=this,i=this.player.isMuted();if(this.savedState.playlistIndex>0){this.player.mute(),a(this.player,YT.PlayerState.PLAYING,(function(s){d.call(e,t,!0).then((function(){i||e.player.unMute()}))})),this.player.playVideoAt(this.savedState.playlistIndex);var s=!0}else t>0&&(this.player.mute(),d.call(this,t,!0).then((function(){i||e.player.unMute()})));this.savedState=null}return!!s};r.update=function(){c.call(this)},r.destroy=function(){this.player&&(this.oldVolume=this.getProperty(pd.PROPERTIES.volume),this.queuedAssignments={},this.videoReady=!1,this.player.destroy(),this.player=null,this.videoReady=!1),this.oldPlayerOptions=null},window.onYouTubeIframeAPIReady=function(){e=!0,i=!1;var s=Object.keys(t);for(var r in s)b.call(t[s[r]]),delete t[s[r]]},window.onYoutubeStateChange=function(t){if(t.target.statusChangeListeners)for(var e=t.target.statusChangeListeners.length-1;e>=0;e--){(0,t.target.statusChangeListeners[e])(t)&&t.target.statusChangeListeners.splice(e,1)}};var o=function(t,e){t.statusChangeListeners||(t.statusChangeListeners=[]),t.statusChangeListeners.push(e)},a=function(t,e,i){o(t,(function(t){if(t.data===e)return i(t.target),!0}))},l=function(){e?b.call(this):(i||jOmnis.loadResource("https://www.youtube.com/iframe_api","JS").catch((function(t){console.error(t)})),t[this.ctrl.uniqueID]=this)},h=function(){var t=this.ctrl.getData("#LCNT");if(t){var e=this.ctrl.getData("#COL",1,1),i=this,s={videoId:e,playerVars:{enablejsapi:1,origin:document.location.origin,controls:this.showControls?1:0,cc_lang_pref:jOmnis.getClientLocale().substring(0,2),cc_load_policy:this.requestCaptions?1:0,modestbranding:1},events:{onReady:function(){f.call(i)},onStateChange:onYoutubeStateChange}};if(t>1){for(var r=[],n=2;n<=t;n++)r.push(this.ctrl.getData("#COL",n,1));s.playerVars.playlist=r.join(",")}}return s},c=function(){if(e){var t=this.ctrl.getClientElem(),i=h.call(this);if(!jOmnis.isEqual(i,this.oldPlayerOptions)&&(this.player&&this.destroy(),i)){i.width=t.clientWidth,i.height=t.clientHeight,i.playerVars.start=Math.round(this.startPosition);var s=document.createElement("div");t.appendChild(s),this.player=new YT.Player(s,i),this.oldPlayerOptions=i;var r=this;o(this.player,(function(t){t.data===YT.PlayerState.UNSTARTED?r.player.getVideoData().video_id!==r.lastVideoID&&g.call(r):t.data===YT.PlayerState.ENDED&&v.call(r)}))}}},u=function(){return this.videoReady?this.player.getDuration():-1},d=function(t,e){var i=this.player;return new Promise((function(s,r){a(i,YT.PlayerState.PLAYING,(function(t){e?(a(t,YT.PlayerState.PAUSED,(function(){s()})),t.pauseVideo()):s()})),i.seekTo(t,!0)}))},p=function(){this.saveState(),this.destroy(),this.restoreState()},m=function(){for(var t=Object.keys(this.queuedAssignments),e=0;e<t.length;e++)this.setProperty(t[e],this.queuedAssignments[t[e]]);this.queuedAssignments={}},f=function(){if(this.restoreWhenReady){this.restoreWhenReady=!1;var t=n.call(this)}this.videoReady=!0,null!=this.oldVolume&&(this.setProperty(pd.PROPERTIES.volume,this.oldVolume),this.oldVolume=null),m.call(this),t||g.call(this)},g=function(){this.ctrl.canSendEvent(pd.EVENTS.evVideoReady)&&(this.lastVideoID=this.player.getVideoData().video_id,this.ctrl.eventParamsAdd("pVideoURL",this.lastVideoID),this.ctrl.sendEvent("evVideoReady"))},v=function(){this.ctrl.canSendEvent(pd.EVENTS.evVideoEnded)&&(this.ctrl.eventParamsAdd("pVideoURL",this.lastVideoID),this.ctrl.sendEvent("evVideoEnded"))},b=function(){c.call(this)};return r}();var vd=gd;function bd(){this.playerProperties={},this.init_class_inst()}bd.prototype=function(){var t="$autoplay",e="$flowplayerline",i="$flowplayerurl",s="$youtube",r=Object.create(ctrl_base.prototype);function n(t,e){return this.player&&this.player.setProperty(t,e),this.playerProperties[t]=e,!0}function o(t){if(this.player){var e=this.player.getProperty(t);if(void 0!==e)return e}return this.playerProperties[t]}function a(){this.player&&this.player.destroy(),this.player=this.youtube?new vd(this):new fd(this);for(var t=Object.keys(this.playerProperties),e=0;e<t.length;e++)this.player.setProperty(t[e],this.playerProperties[t[e]]);this.player.init()}return r.baseClassName="omnis-video",r.init_class_inst=function(){this.superclass=ctrl_base.prototype,this.superclass.init_class_inst.call(this),this.showingDisabled=!1,this.mFocusStyle=eBaseFocusStyle.eNone,this.activeReplacesEnabled=!0,this.usesNotActiveOverlay=!0,this.mCanHaveDesignBorder=0!=jOmnis.mDesign,this.showDesignName=!0},r.init_ctrl_inst=function(t,e,i,s){this.superclass.init_ctrl_inst.call(this,t,e,i,s);var r=this.getClientElem();return this.youtube="1"===r.getAttribute("data-youtube"),this.player=this.youtube?new vd(this):new fd(this),this.setProperty(pd.PROPERTIES.showcontrols,"1"===r.getAttribute("data-showcontrols")),this.setProperty(pd.PROPERTIES.startposition,+r.getAttribute("data-startpos")||0),this.setProperty(pd.PROPERTIES.tracklistname,r.getAttribute("data-tracks")),this.setProperty(pd.PROPERTIES.poster,r.getAttribute("data-poster")),this.setProperty(pd.PROPERTIES.volume,+r.getAttribute("data-vol")||0),this.setProperty(pd.PROPERTIES.playbackrate,+r.getAttribute("data-rate")||1),this.setProperty(pd.PROPERTIES.playing,"1"===r.getAttribute("data-playing")),this.setProperty(pd.PROPERTIES.requestCaptions,"1"===r.getAttribute("data-ccs")),this.player.init(),!1},r.delete_class_inst=function(){this.player.destroy(),this.superclass.delete_class_inst.call(this)},r.showDisabledImage=function(t){var e=this.getClientElem();if(e.innerHTML="",t){var i=document.createElement("img");i.src="images/overlay.png",i.className="unselectable ctrl-video-disabled",e.style.overflow="hidden",e.appendChild(i),i.style.position="absolute",i.style.top=(e.clientHeight-i.offsetHeight)/2+"px",i.style.left=(e.clientWidth-i.offsetWidth)/2+"px"}this.showingDisabled=t},r.enabledChanged=function(){var t=this.isEnabled();t?(this.showDisabledImage(!1),this.player.restoreState()):!t&&this.player&&(this.player.saveState(),this.player.destroy(),this.showDisabledImage(!0))},r.updateCtrl=function(){this.elem.disabled||(this.getTrueVisibility()?this.player.update():this.updateOnVisible=!0)},r.handleEvent=function(t){return this.superclass.handleEvent.call(this,t)},r.activeChanged=function(){this.update(),this.superclass.activeChanged.call(this)},r.sizeChanged=function(){if(this.superclass.sizeChanged.call(this),this.getTrueVisibility()){var t=this.getClientElem();if(this.isEnabled())this.player.setSize(t.clientWidth,t.clientHeight);else if(this.showingDisabled){var e=t.firstChild;e.style.top=(t.clientHeight-e.offsetHeight)/2+"px",e.style.left=(t.clientWidth-e.offsetWidth)/2+"px"}}else this.queuedSizeChange=!0},r.visibilityChanged=function(){var t=this.superclass.visibilityChanged.call(this);return this.getTrueVisibility()&&this.queuedSizeChange&&this.sizeChanged(),this.updateOnVisible&&(this.updateOnVisible=!1,this.update()),t},r.saveBeforeMadeInvisible=function(){this.player.saveState()},r.restoreAfterMadeVisible=function(){this.player.restoreState()},r.getProperty=function(t){if(t===s)return this.youtube;var e=o.call(this,t);return void 0!==e?e:this.superclass.getProperty.call(this,t)},r.getCanAssign=function(t){switch(t){case pd.PROPERTIES.showcontrols:case s:case pd.PROPERTIES.currentposition:case pd.PROPERTIES.startposition:case pd.PROPERTIES.volume:case pd.PROPERTIES.playing:case pd.PROPERTIES.playbackrate:return!0;case pd.PROPERTIES.poster:return!this.youtube;case pd.PROPERTIES.requestCaptions:return this.youtube;case pd.PROPERTIES.duration:return!1}return this.superclass.getCanAssign.call(this,t)},r.setProperty=function(r,o){if(!this.getCanAssign(r))return!1;switch(r){case t:case e:case i:return!0;case s:return o!==this.youtube&&(this.youtube=!!o,a.call(this)),!0}return Object.values(pd.PROPERTIES).includes(r)?n.call(this,r,o):this.superclass.setProperty.call(this,r,o)},r}();var yd=bd;window.ctrl_actv=O,window.ctrl_back=z,window.ctrl_cgrid=tt,window.ctrl_barchart_chart=bt,window.ctrl_piechart_chart=xt,window.ctrl_checkbox=Bt,window.ctrl_combobox=Ue,window.ctrl_datagrid=yi,window.ctrl_datepicker=qt,window.ctrl_device=Ui,window.callbackFromWrapper=function(t,e){new Function("arg1",e)(t)},window.ctrl_droplist=Fe,window.ctrl_edit=ke,window.ctrl_file=xs,window.ctrl_html=js,window.ctrl_hyperlink=Gs,window.ctrl_label=Js,window.ctrl_listbox=ur,window.ctrl_map=Or,window.ctrl_navbar=an,window.ctrl_navmenu=Yo,window.ctrl_nlist=Xo.Z,window.ctrl_nslider=Jo.Z,window.ctrl_nswitch=Qo.Z,window.ctrl_page=ma,window.ctrl_pagedpane=na,window.ctrl_picture=Ta,window.ctrl_popmenu=ja,window.ctrl_progress=Xa,window.ctrl_pushbutton=kl,window.ctrl_radiobox=xl,window.ctrl_segmented=sh,window.ctrl_rich=dh,window.ctrl_slider=Th,window.ctrl_splitbutton=uc,window.ctrl_switch=yc,window.ctrl_tabs=Kc,window.ctrl_timer=Jc,window.ctrl_toolbar=ru,window.ctrl_transbutton=_u,window.ctrl_tree=ud,window.ctrl_video=yd},4139:function(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2222),core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7327),core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_array_find__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9826),core_js_modules_es_array_find__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_find__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(9554),core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(2772),core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(5306),core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_string_trim__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(3210),core_js_modules_es_string_trim__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_string_trim__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(4747),core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_7__);
/**
 * @license
 * (c) 2009-2010 Michael Leibman (michael.leibman@gmail.com)
 * http://github.com/mleibman/slickgrid
 * Distributed under MIT license.
 * All rights reserved.
 *
 * SlickGrid v1.4.3
 *
 * TODO:
 * - frozen columns
 * - consistent events (EventHelper?  jQuery events?)
 *
 *
 * OPTIONS:
 *     rowHeight                - (default 25px) Row height in pixels.
 *     enableAddRow             - (default false) If true, a blank row will be displayed at the bottom - typing values in that row will add a new one.
 *     leaveSpaceForNewRows     - (default false)
 *     editable                 - (default false) If false, no cells will be switched into edit mode.
 *     autoEdit                 - (default true) Cell will not automatically go into edit mode when selected.
 *     enableCellNavigation     - (default true) If false, no cells will be selectable.
 *     enableCellRangeSelection - (default false) If true, user will be able to select a cell range.  onCellRangeSelected event will be fired.
 *     defaultColumnWidth       - (default 80px) Default column width in pixels (if columns[cell].width is not specified).
 *     enableColumnReorder      - (default true) Allows the user to reorder columns.
 *     asyncEditorLoading       - (default false) Makes cell editors load asynchronously after a small delay.
 *                                This greatly increases keyboard navigation speed.
 *     asyncEditorLoadDelay     - (default 100msec) Delay after which cell editor is loaded. Ignored unless asyncEditorLoading is true.
 *     forceFitColumns          - (default false) Force column sizes to fit into the viewport (avoid horizontal scrolling).
 *     enableAsyncPostRender    - (default false) If true, async post rendering will occur and asyncPostRender delegates on columns will be called.
 *     asyncPostRenderDelay     - (default 60msec) Delay after which async post renderer delegate is called.
 *     autoHeight               - (default false) If true, vertically resizes to fit all rows.
 *     editorLock               - (default Slick.GlobalEditorLock) A Slick.EditorLock instance to use for controlling concurrent data edits.
 *     showSecondaryHeaderRow   - (default false) If true, an extra blank (to be populated externally) row will be displayed just below the header columns.
 *     secondaryHeaderRowHeight - (default 25px) The height of the secondary header row.
 *     syncColumnCellResize     - (default false) Synchronously resize column cells when column headers are resized
 *     rowCssClasses            - (default null) A function which (given a row's data item as an argument) returns a space-delimited string of CSS classes that will be applied to the slick-row element. Note that this should be fast, as it is called every time a row is displayed.
 *     cellHighlightCssClass    - (default "highlighted") A CSS class to apply to cells highlighted via setHighlightedCells().
 *     cellFlashingCssClass     - (default "flashing") A CSS class to apply to flashing cells (flashCell()).
 *     formatterFactory         - (default null) A factory object responsible to creating a formatter for a given cell.
 *                                Must implement getFormatter(column).
 *     editorFactory            - (default null) A factory object responsible to creating an editor for a given cell.
 *                                Must implement getEditor(column).
 *     multiSelect              - (default true) Enable multiple row selection.
 *     frozenColumn             - (default -1) If greater than zero, then columns whose index are less than or equal to this number will be frozen
 *     keyboardChangesLine			- (default false) If true, the navigation keys will set the current line. If false, a focused row is shown.
 *     tabThroughCells          - (default false) Alters the effect of the tab key when the grid is not in edit mode. If true, the next cell is selected. If false, focus leaves the grid.
 *
 * COLUMN DEFINITION (columns) OPTIONS:
 *     id                  - Column ID.
 *     name                - Column name to put in the header.
 *     toolTip             - Tooltip (if different from name).
 *     field               - Property of the data context to bind to.
 *     formatter           - (default 'return value || ""') Function responsible for rendering the contents of a cell. Signature: function formatter(row, cell, value, columnDef, dataContext) { ... return "..."; }
 *     editor              - An Editor class.
 *     validator           - An extra validation function to be passed to the editor.
 *     unselectable        - If true, the cell cannot be selected (and therefore edited).
 *     cannotTriggerInsert - If true, a new row cannot be created from just the value of this cell.
 *     width               - Width of the column in pixels.
 *     resizable           - (default true) If false, the column cannot be resized.
 *     sortable            - (default false) If true, the column can be sorted (onSort will be called).
 *     minWidth            - Minimum allowed column width for resizing.
 *     maxWidth            - Maximum allowed column width for resizing.
 *     cssClass            - A CSS class to add to the cell.
 *     rerenderOnResize    - Rerender the column when it is resized (useful for columns relying on cell width or adaptive formatters).
 *     asyncPostRender     - Function responsible for manipulating the cell DOM node after it has been rendered (called in the background).
 *     behavior            - Configures the column with one of several available predefined behaviors:  "select", "move", "selectAndMove".
 *
 *
 * EVENTS:
 *     onSort                -
 *     onHeaderContextMenu   -
 *     onHeaderClick         -
 *     onClick               -
 *     onDblClick            -
 *     onContextMenu         -
 *     onKeyDown             -
 *     onAddNewRow           -
 *     onValidationError     -
 *     onViewportChanged     -
 *     onSelectedRowsChanged -
 *     onColumnsReordered    -
 *     onColumnsResized      -
 *     onBeforeMoveRows      -
 *     onMoveRows            -
 *     onCellChange          -  Raised when cell has been edited.   Args: row,cell,dataContext.
 *     onBeforeEditCell      -  Raised before a cell goes into edit mode.  Return false to cancel.  Args: row,cell,dataContext.
 *     onBeforeCellEditorDestroy    - Raised before a cell editor is destroyed.  Args: current cell editor.
 *     onBeforeDestroy       -  Raised just before the grid control is destroyed (part of the destroy() method).
 *     onCurrentCellChanged  -  Raised when the selected (active) cell changed.  Args: {row:currentRow, cell:currentCell}.
 *     onCellRangeSelected   -  Raised when a user selects a range of cells.  Args: {from:{row,cell}, to:{row,cell}}.
 *
 * NOTES:
 *     Cell/row DOM manipulations are done directly bypassing jQuery's DOM manipulation methods.
 *     This increases the speed dramatically, but can only be done safely because there are no event handlers
 *     or data associated with any cell/row DOM nodes.  Cell editors must make sure they implement .destroy()
 *     and do proper cleanup.
 *
 *
 * @param {Node}              container   Container node to create the grid in.
 * @param {Array} or {Object} data        An array of objects for databinding.
 * @param {Array}             columns     An array of column definitions.
 * @param {Object}            options     Grid options.
 */
if("undefined"==typeof jQuery)throw new Error("SlickGrid requires jquery module to be loaded");if(!jQuery.fn.drag)throw new Error("SlickGrid requires jquery.event.drag module to be loaded");(function($){var scrollbarDimensions;function EditorLock(){var t=null;this.isActive=function(e){return e?t===e:null!==t},this.activate=function(e){if(e!==t){if(null!==t)throw"SlickGrid.EditorLock.activate: an editController is still active, can't activate another editController";if(!e.commitCurrentEdit)throw"SlickGrid.EditorLock.activate: editController must implement .commitCurrentEdit()";if(!e.cancelCurrentEdit)throw"SlickGrid.EditorLock.activate: editController must implement .cancelCurrentEdit()";t=e}},this.deactivate=function(e){if(t!==e)throw"SlickGrid.EditorLock.deactivate: specified editController is not the currently active one";t=null},this.commitCurrentEdit=function(){return!t||t.commitCurrentEdit()},this.cancelCurrentEdit=function(){return!t||t.cancelCurrentEdit()}}function SlickGrid(container,data,columns,options){var defaults={rowHeight:25,defaultColumnWidth:80,enableAddRow:!1,leaveSpaceForNewRows:!1,editable:!1,autoEdit:!0,enableCellNavigation:!0,enableCellRangeSelection:!1,enableColumnReorder:!0,asyncEditorLoading:!1,asyncEditorLoadDelay:100,forceFitColumns:!1,enableAsyncPostRender:!1,asyncPostRenderDelay:60,autoHeight:!1,editorLock:Slick.GlobalEditorLock,showSecondaryHeaderRow:!1,secondaryHeaderRowHeight:25,syncColumnCellResize:!1,enableAutoTooltips:!0,toolTipMaxLength:null,formatterFactory:null,editorFactory:null,cellHighlightCssClass:"highlighted",cellFlashingCssClass:"flashing",multiSelect:!0,frozenColumn:-1,keyboardChangesLine:!1,tabThroughCells:!1,createFooterRow:!0,showFooterRow:!1,footerRowHeight:25},gridData,gridDataGetLength,gridDataGetItem,columnDefaults={name:"",resizable:!0,sortable:!1,minWidth:30,filterex_type:0},maxSupportedCssHeight,th,h,ph,n,cj,page=0,offset=0,scrollDir=1,$container,uid="slickgrid_"+__nextSlickID++,self=this,$headerScroller,$headers,$secondaryHeaderScroller,$secondaryHeaders,$viewport,$canvas,$style,jOmnisStyleSheetId,viewportH,viewportW,viewportHasHScroll,headerColumnWidthDiff,headerColumnHeightDiff,cellWidthDiff,cellHeightDiff,absoluteColumnMinWidth,$footerRow,$footerRowScroller,$footerRowScrollerL,$footerRowScrollerR,$footerRowL,$footerRowR,canvasWidthL,canvasWidthR,currentRow,currentCell,currentCellNode=null,currentEditor=null,serializedEditorValue,editController,rowsCache={},renderedRows=0,numVisibleRows,prevScrollTop=0,scrollTop=0,lastRenderedScrollTop=0,prevScrollLeft=0,selectedRows=[],selectedRowsLookup={},columnsById={},highlightedCells,sortColumnId,sortAsc=!0,h_editorLoader=null,h_render=null,h_postrender=null,postProcessedRows={},postProcessToRow=null,postProcessFromRow=null,counter_rows_rendered=0,counter_rows_removed=0,mRenderNow=!1,mUsingIScroll=!1,canvas0,canvas1,headers0,headers1,viewp0,uis="dbhp"+Math.round(1e6*Math.random()),focusRow=null,defaultFontSize=10;function init(){$container=$(container),gridDataGetLength=(gridData=data).getLength||defaultGetLength,gridDataGetItem=gridData.getItem||defaultGetItem,maxSupportedCssHeight=getMaxSupportedCssHeight();var t,e,i,s,r,n,o,a=0;if(scrollbarDimensions=scrollbarDimensions||measureScrollbar(),options=$.extend({},defaults,options),columnDefaults.width=options.defaultColumnWidth,options.enableColumnReorder&&!$.fn.sortable)throw new Error('SlickGrid\'s "enableColumnReorder = true" option requires jquery-ui.sortable module to be loaded');editController={commitCurrentEdit:commitCurrentEdit,cancelCurrentEdit:cancelCurrentEdit},$container.empty().attr("tabIndex",-1).attr("hideFocus",!0).attr("role","grid").css("overflow","hidden").css("outline",0).addClass(uid).addClass("ui-widget"),/relative|absolute|fixed/.test($container.css("position"))||$container.css("position","relative"),$headerScroller=$("<div id='hs"+uis+"' class='slick-header ui-state-default' role='row' style='overflow:hidden;position:relative;' />").appendTo($container),$headers=$("<div id='h"+uis+"' class='slick-header-columns' style='width:100000px; left:-10000px' />").appendTo($headerScroller),$secondaryHeaderScroller=$("<div id='shs"+uis+"' class='slick-header-secondary ui-state-default' style='z-index: 2; overflow:hidden;position:relative;' />").appendTo($container),$secondaryHeaders=$("<div id='sh"+uis+"' class='slick-header-columns-secondary' style='width:100000px' />").appendTo($secondaryHeaderScroller),options.frozenColumn>-1&&(o=$("<div id='splittedC"+uis+"' style='overflow:hidden;position:absolute;top:0px;' />"),t=$("<div id='hs1"+uis+"' class='slick-header ui-state-default' role='row' style='overflow:hidden;position:relative;' />").appendTo(o),e=$("<div id='h1"+uis+"' class='slick-header-columns' style='width:100000px; left:-10000px' />").appendTo(t),$headers=$().add($headers).add(e),i=$("<div id='shs1"+uis+"' class='slick-header-secondary ui-state-default' style='overflow:hidden;position:relative;' />").appendTo(o),s=$("<div id='sh1"+uis+"' class='slick-header-columns-secondary' style='width:100000px' />").appendTo(i),$secondaryHeaderScroller=$().add($secondaryHeaderScroller).add(i),$headerScroller=$().add($headerScroller).add(t),$secondaryHeaders=$().add($secondaryHeaders).add(s)),options.showSecondaryHeaderRow||$secondaryHeaderScroller.hide();var l="";if(l=options.frozenColumn>-1?"width:100%;outline:0;position:relative;overflow-x: scroll; overflow-y: auto;":"width:100%;overflow-x:auto;outline:0;position:relative;overflow-y:auto;",$viewport=$("<div id='v"+uis+"' class='slick-viewport' role='presentation' tabindex='-1' hideFocus style='"+l+"'>").appendTo($container),$canvas=$("<div id='c"+uis+"' class='grid-canvas' role='presentation' tabindex='0' hideFocus style='overflow:hidden' />").appendTo($viewport),options.frozenColumn>-1){r=$("<div id='v1"+uis+"' class='slick-viewport' role='presentation' tabindex='-1' hideFocus style='width:100%;overflow-x:scroll;overflow-y:auto;outline:0;position:relative;overflow-y:auto;'>").appendTo(o),n=$("<div id='c1"+uis+"' class='grid-canvas' role='presentation' hideFocus style='overflow:hidden' />").appendTo(r),$viewport=$().add($viewport).add(r),$canvas=$().add($canvas).add(n),o.appendTo($container),canvas0=$("#c"+uis,$container)[0],canvas1=$("#c1"+uis,$container)[0],headers0=$("#h"+uis,$container)[0],headers1=$("#h1"+uis,$container)[0],viewp0=$("#v"+uis,$container)[0]}if(options.createFooterRow&&($footerRowScrollerL=$("<div id='f"+uis+"' class='slick-footerrow ui-state-default' />").appendTo($container),$footerRowScrollerR=$("<div id='f1"+uis+"' class='slick-footerrow ui-state-default slick-footerrow-right' />").appendTo($container),$footerRowScroller=$().add($footerRowScrollerL).add($footerRowScrollerR),$footerRowL=$("<div class='slick-footerrow-columns slick-footerrow-columns-left' />").appendTo($footerRowScrollerL),$footerRowR=$("<div class='slick-footerrow-columns slick-footerrow-columns-right' />").appendTo($footerRowScrollerR),$footerRow=$().add($footerRowL).add($footerRowR),options.showFooterRow||$footerRowScroller.hide()),$container.resizeHandler=function(){$container[0].clientHeight&&measureCellPaddingAndBorder()&&setColumns(columns)},$(window).bind("resize",$container.resizeHandler),measureCellPaddingAndBorder(),$viewport.height($container.innerHeight()-$headerScroller.outerHeight()-(options.showSecondaryHeaderRow?$secondaryHeaderScroller.outerHeight():0)),disableSelection($headers),$viewport.bind("selectstart.ui",(function(t){return $(t.target).is("input,textarea")})),createColumnHeaders(),createColumnFooter(),setupColumnSort(),setupDragEvents(),createCssRules(),options.frozenColumn>-1){a=getWidthSplittedCanvas().widthFixed,$("#v"+uis,$container).width(a);$container.width();o.css("left",a),$footerRowScrollerR.css("left",a)}options.createFooterRow&&$footerRow.on("contextmenu",handleFooterContextMenu).on("click",handleFooterClick),resizeAndRender(),bindAncestorScrollEvents(),$viewport.bind("scroll.slickgrid touchmove.slickgrid",handleScroll),$container.bind("resize.slickgrid",resizeAndRender),$container.bind("focusout.slickgrid",handleFocusOut),$canvas.bind("keydown.slickgrid",handleKeyDown),$canvas.bind("click.slickgrid tap.slickgrid",handleClick),$canvas.bind("dblclick.slickgrid",handleDblClick),$canvas.bind("contextmenu.slickgrid",handleContextMenu),$canvas.bind("mouseover.slickgrid",handleHover),$headerScroller.bind("contextmenu.slickgrid",handleHeaderContextMenu),$headerScroller.bind("click.slickgrid tap.slickgrid",handleHeaderClick)}function measureScrollbar(){var t=$("<div style='position:absolute; top:-10000px; left:-10000px; width:100px; height:100px; overflow:scroll;'></div>").appendTo("body"),e={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),e}function setCanvasWidth(t){viewportHasHScroll=t>viewportW-scrollbarDimensions.width}function getCanvasWidth(){var t=getWidthSplittedCanvas(),e=(t.widthFixed,t.widthScrolled,columns.length);for(canvasWidthL=canvasWidthR=0;e--;)hasFrozenColumns()&&e>options.frozenColumn?canvasWidthR+=columns[e].width:canvasWidthL+=columns[e].width;return canvasWidthL+canvasWidthR}function hasFrozenColumns(){return options.frozenColumn>-1}function createColumnFooter(){if(options.createFooterRow){$footerRowL.empty(),$footerRowR.empty();for(var t=0;t<columns.length;t++){var e=columns[t],i=e.omnisObject?"".concat(e.omnisObject.getFooterCellCssClass()," c").concat(e.omnisListColumn):"";$("<div class='ui-state-default "+i+" slick-footerrow-column l"+t+" r"+t+"'></div>").data("column",e).addClass(hasFrozenColumns()&&t<=options.frozenColumn?"frozen":"").width((e.currentWidth||e.width)-headerColumnWidthDiff).height(options.footerRowHeight-cellHeightDiff).appendTo(hasFrozenColumns()&&t>options.frozenColumn?$footerRowR:$footerRowL)}}}function getFooterRowColumn(t){var e,i="number"==typeof t?t:getColumnIndex(t);hasFrozenColumns()?i<=options.frozenColumn?e=$footerRowL:(e=$footerRowR,i-=options.frozenColumn+1):e=$footerRowL;var s=e&&e.children().eq(i);return s&&s[0]}function setFooterRowVisibility(t,e){var i=!1!==e;options.showFooterRow!=t&&(options.showFooterRow=t,t?i?$footerRowScroller.slideDown("fast",resizeCanvas):($footerRowScroller.show(),$footerRowScrollerR&&$footerRowScrollerR.css("display","inline-block"),resizeCanvas()):i?$footerRowScroller.slideUp("fast",resizeCanvas):($footerRowScroller.hide(),resizeCanvas()))}function disableSelection(t){t&&t.jquery&&t.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",(function(){return!1}))}function defaultGetLength(){return gridData.length}function defaultGetItem(t){return gridData[t]}function getMaxSupportedCssHeight(){if(null!=jOmnis.mMaxSupportedCssHeight)return jOmnis.mMaxSupportedCssHeight;for(var t=1e6,e=0,i=jOmnis.inFirefox()?5e6:1e9,s=$("<div style='display:none' />").appendTo(document.body),r=(e=0,t),n=!1;r<=i;){if(s.css("height",r),s.height()!==r){var o=s.height();if(o>e)e=o;else{if(n)break;n=!0}}else e=r;(r+=t)>5e6&&(t=1e8)}return s.remove(),jOmnis.mMaxSupportedCssHeight=e,e}function bindAncestorScrollEvents(){for(var t=$canvas[0];t&&(t=t.parentNode)!=document.body&&t;)t!=$viewport[0]&&t.scrollWidth==t.clientWidth&&t.scrollHeight==t.clientHeight||$(t).on("scroll.slickgrid touchmove.slickgrid",handleCurrentCellPositionChange)}function unbindAncestorScrollEvents(){$canvas.parents().unbind("scroll.slickgrid touchmove.slickgrid")}function createColumnHeaders(){var t,e;function i(){$(this).addClass("ui-state-hover")}function s(){$(this).removeClass("ui-state-hover")}$headers.empty(),columnsById={};var r=function(){function r(t,e){for(var i=0;t.indexOf("\\n")>-1&&i<10;)i++,t=t.replace("\\n",e?"<br role='presentation'>":"\n");return t}var h;if(n=columns[t]=$.extend({},columnDefaults,columns[t]),columnsById[n.id]=t,e=options.frozenColumn>-1?t<=options.frozenColumn?$(headers0):$(headers1):$headers,o="",o="",options.frozenColumn>-1?t<=options.frozenColumn?(e=$(headers0),o="is-frozen "):e=$(headers1):e=$headers,a=n.omnisObject?n.omnisObject.getColumnHeaderCssClass(n):"",l=$("<div class='ui-state-default "+o+" "+a+" slick-header-column' role='columnheader' id='"+uid+n.id+"' />").html("<span class='slick-column-name'>"+function(){var t=n.omnisObject?n.omnisObject.formatHeader(n):n.name;t=r(t,!0);var e=n.omnisObject&&n.omnisObject.hasFormatHeaderMethod()?' style="height:100%;"':"";return"<div".concat(e,">").concat(t,"</div>")}()+"</span>").width((n.currentWidth||n.width)-headerColumnWidthDiff).attr("title",(h=n.toolTip||n.name||"",h=r(h,!1))).data("fieldId",n.id).appendTo(e),(options.enableColumnReorder||n.sortable)&&l.hover(i,s),n.sortable){var c=n.omnisFontSize||defaultFontSize;jIcons.replaceOrAddToElem(l[0],"images/south.svg?",null,{width:c,height:c,viewBox:"0 0 24 24"}),jOmnis.addClass(l[0].querySelector("svg"),"slick-sort-indicator")}n.omnisObject&&n.omnisObject.mSupportsMultiFilter&&n.omnisObject.setupInputObject(self,uid,l,n,0==t)};for(t=0;t<columns.length;t++){var n,o,a,l;r()}setSortColumn(sortColumnId,sortAsc),setupColumnResize(),options.enableColumnReorder&&setupColumnReorder()}function setupColumnSort(){var t=!1;$headers.mousedown((function(e){$(e.target).hasClass("slick-resizable-handle")||(t=!0)})),$headers.click((function(e){if(t&&(t=!1,self.onSort)){var i=$(e.target).closest(".slick-header-column");if(!i.length)return;var s=columns[getSiblingIndex(i[0])];if(s.sortable){if(!options.editorLock.commitCurrentEdit())return;s.id===sortColumnId?sortAsc=!sortAsc:(sortColumnId=s.id,sortAsc=!0),setSortColumn(sortColumnId,sortAsc),self.onSort(s,sortAsc)}}}))}function setupColumnReorder(){$headers.sortable({scroll:!1,containment:"parent",axis:"x",cursor:"default",tolerance:"intersection",helper:"clone",placeholder:"slick-sortable-placeholder ui-state-default slick-header-column",forcePlaceholderSize:!0,start:function(t,e){$(e.helper).addClass("slick-header-column-active")},beforeStop:function(t,e){$(e.helper).removeClass("slick-header-column-active")},stop:function(t){if(options.editorLock.commitCurrentEdit()){if(options.frozenColumn>-1)e=(e=$(headers0).sortable("toArray")).concat($(headers1).sortable("toArray"));else var e=$headers.sortable("toArray");for(var i=[],s=0;s<e.length;s++)i.push(columns[getColumnIndex(e[s].replace(uid,""))]);setColumns(i),self.onColumnsReordered&&self.onColumnsReordered(),t.stopPropagation(),setupColumnResize()}else $(this).sortable("cancel")}})}function setupColumnResize(){var t,e,i,s,r,n,o,a,l,h;(s=$headers.children()).find(".slick-resizable-handle").remove(),s.each((function(t,e){columns[t].resizable&&(void 0===o&&(o=t),a=t)})),s.each((function(c,u){void 0===o&&void 0===a||void 0!==o&&c<o||options.forceFitColumns&&c>=a||($(u),$("<div class='slick-resizable-handle' />").appendTo(u).bind("dragstart",(function(o,a){var u;if(!options.editorLock.commitCurrentEdit())return!1;i=null!==(u=o.pageX)&&void 0!==u?u:o.originalValues.pageX,$(this).parent().addClass("slick-header-column-active");var d=null,p=null;if(s.each((function(t,e){columns[t].previousWidth=$(e).outerWidth()})),options.forceFitColumns)for(d=0,p=0,t=c+1;t<s.length;t++)(e=columns[t]).resizable&&(null!==p&&(e.maxWidth?p+=e.maxWidth-e.previousWidth:p=null),d+=e.previousWidth-Math.max(e.minWidth||0,absoluteColumnMinWidth));var m=0,f=0;for(t=0;t<=c;t++)(e=columns[t]).resizable&&(null!==f&&(e.maxWidth?f+=e.maxWidth-e.previousWidth:f=null),m+=e.previousWidth-Math.max(e.minWidth||0,absoluteColumnMinWidth));null===d&&(d=1e5),null===m&&(m=1e5),null===p&&(p=1e5),null===f&&(f=1e5),n=i+Math.min(d,f),r=i-Math.min(m,p),l=$canvas.width(),columns&&columns[0]&&(h=columns[0].omnisObject.getFrozenColumnStopPixels()),$(canvas1).width(1e5)})).bind("drag",(function(o,a){var u,d,p,m=Math.min(n,Math.max(r,null!==(u=o.pageX)&&void 0!==u?u:o.originalValues.pageX))-i;if(m<0){for(p=m,t=c;t>=0;t--)(e=columns[t]).resizable&&(d=Math.max(e.minWidth||0,absoluteColumnMinWidth),p&&e.previousWidth+p<d?(p+=e.previousWidth-d,styleColumnWidth(t,d,options.syncColumnCellResize)):(styleColumnWidth(t,e.previousWidth+p,options.syncColumnCellResize),p=0));if(options.forceFitColumns)for(p=-m,t=c+1;t<s.length;t++)(e=columns[t]).resizable&&(p&&e.maxWidth&&e.maxWidth-e.previousWidth<p?(p-=e.maxWidth-e.previousWidth,styleColumnWidth(t,e.maxWidth,options.syncColumnCellResize)):(styleColumnWidth(t,e.previousWidth+p,options.syncColumnCellResize),p=0));else options.syncColumnCellResize&&setCanvasWidth(l+m)}else{for(p=m,t=c;t>=0;t--)if((e=columns[t]).resizable)if(p&&e.maxWidth&&e.maxWidth-e.previousWidth<p)p-=e.maxWidth-e.previousWidth,styleColumnWidth(t,e.maxWidth,options.syncColumnCellResize);else{if(hasFrozenColumns()&&options.frozenColumn>=t&&function(){for(var t=0,e=0;e<=options.frozenColumn;e++)t+=columns[e].previousWidth;return t}()+h+p>$viewport[0].offsetWidth)return;styleColumnWidth(t,e.previousWidth+p,options.syncColumnCellResize),p=0}if(options.forceFitColumns)for(p=-m,t=c+1;t<s.length;t++)(e=columns[t]).resizable&&(d=Math.max(e.minWidth||0,absoluteColumnMinWidth),p&&e.previousWidth+p<d?(p+=e.previousWidth-d,styleColumnWidth(t,d,options.syncColumnCellResize)):(styleColumnWidth(t,e.previousWidth+p,options.syncColumnCellResize),p=0));else options.syncColumnCellResize&&setCanvasWidth(l+m)}hasFrozenColumns()&&(resizeCanvas(),$footerRowScrollerR.css("left",$("#splittedC"+uis,$container).css("left")))})).bind("dragend",(function(i,r){var n;for($(this).parent().removeClass("slick-header-column-active"),t=0;t<s.length;t++)e=columns[t],n=$(s[t]).outerWidth(),e.previousWidth!==n&&e.rerenderOnResize&&removeAllRows(),options.forceFitColumns?e.width=Math.floor(e.width*(n-e.previousWidth)/e.previousWidth)+e.width:e.width=n,options.syncColumnCellResize||e.previousWidth===n||styleColumnWidth(t,n,!0);resizeCanvas(),self.onColumnsResized&&self.onColumnsResized()})))}))}function setupDragEvents(){function t(t){return{start:{row:Math.min(t.start.row,t.end.row),cell:Math.min(t.start.cell,t.end.cell)},end:{row:Math.max(t.start.row,t.end.row),cell:Math.max(t.start.cell,t.end.cell)}}}$canvas.bind("draginit",(function(t,e){var i=$(t.target).closest(".slick-cell");if(0===i.length)return!1;if(parseInt(i.parent().attr("row"),10)>=gridDataGetLength())return!1;var s=columns[getSiblingIndex(i[0])];if("move"==s.behavior||"selectAndMove"==s.behavior)e.mode=1;else{if(!options.enableCellRangeSelection)return!1;e.mode=2}})).bind("dragstart",(function(t,e){if(!options.editorLock.commitCurrentEdit())return!1;var i=parseInt($(t.target).closest(".slick-row").attr("row"),10);if(1==e.mode&&(selectedRowsLookup[i]||setSelectedRows([i]),e.selectionProxy=$("<div class='slick-reorder-proxy'/>").css("position","absolute").css("zIndex","99999").css("width",$(this).innerWidth()).css("height",options.rowHeight*selectedRows.length).appendTo($viewport),e.guide=$("<div class='slick-reorder-guide'/>").css("position","absolute").css("zIndex","99998").css("width",$(this).innerWidth()).css("top",-1e3).appendTo($viewport),e.insertBefore=-1),2==e.mode){var s=getCellFromPoint(e.startX-$canvas.offset().left,e.startY-$canvas.offset().top);return!!cellExists(s.row,s.cell)&&(e.range={start:s,end:{}},$("<div class='slick-selection'></div>").appendTo($canvas))}})).bind("drag",(function(e,i){if(1==i.mode){var s=e.pageY-$(this).offset().top;i.selectionProxy.css("top",s-5);var r=Math.max(0,Math.min(Math.round(s/options.rowHeight),gridDataGetLength()));r!==i.insertBefore&&(self.onBeforeMoveRows&&!1===self.onBeforeMoveRows(getSelectedRows(),r)?(i.guide.css("top",-1e3),i.canMove=!1):(i.guide.css("top",r*options.rowHeight),i.canMove=!0),i.insertBefore=r)}if(2==i.mode){var n=getCellFromPoint(e.clientX-$canvas.offset().left,e.clientY-$canvas.offset().top);if(!cellExists(n.row,n.cell))return;i.range.end=n;var o=t(i.range),a=getCellNodeBox(o.start.row,o.start.cell),l=getCellNodeBox(o.end.row,o.end.cell);$(i.proxy).css({top:a.top,left:a.left,height:l.bottom-a.top-2,width:l.right-a.left-2})}})).bind("dragend",(function(e,i){1==i.mode&&(i.guide.remove(),i.selectionProxy.remove(),self.onMoveRows&&i.canMove&&self.onMoveRows(getSelectedRows(),i.insertBefore)),2==i.mode&&($(i.proxy).remove(),self.onCellRangeSelected&&self.onCellRangeSelected(t(i.range)))}))}function measureCellPaddingAndBorder(){var t=$("<div class='ui-state-default slick-header-column' style='visibility:hidden'>-</div>").appendTo($headers),e=t[0],i=parseFloat($.css(e,"border-right-width",!0))+parseFloat($.css(e,"border-left-width",!0))+parseFloat($.css(e,"padding-right",!0))+parseFloat($.css(e,"padding-left",!0)),s=parseFloat($.css(e,"border-top-width"),!0)+parseFloat($.css(e,"border-bottom-width"),!0)+parseFloat($.css(e,"padding-top",!0))+parseFloat($.css(e,"padding-bottom",!0));t.remove();var r=$("<div class='slick-row' />").appendTo($canvas),n=(e=(t=$("<div class='slick-cell' id='' style='visibility:hidden'>-</div>").appendTo(r))[0],parseFloat($.css(e,"border-right-width",!0))+parseFloat($.css(e,"border-left-width",!0))+parseFloat($.css(e,"padding-right",!0))+parseFloat($.css(e,"padding-left",!0))),o=parseFloat($.css(e,"border-top-width",!0))+parseFloat($.css(e,"border-bottom-width",!0))+parseFloat($.css(e,"padding-top",!0))+parseFloat($.css(e,"padding-bottom",!0));return r.remove(),(i!==headerColumnWidthDiff||s!==headerColumnHeightDiff||n!==cellWidthDiff||o!==cellHeightDiff)&&(headerColumnWidthDiff=i,headerColumnHeightDiff=s,cellWidthDiff=n,cellHeightDiff=o,absoluteColumnMinWidth=Math.max(headerColumnWidthDiff,cellWidthDiff),!0)}function createCssRules(){for(var t=options.rowHeight-cellHeightDiff,e=["."+uid+" .slick-header-column { left: 10000px; }","."+uid+" .slick-header-columns-secondary {  height:"+options.secondaryHeaderRowHeight+"px; }","."+uid+" .slick-cell { height:"+t+"px; }"],i=0,s=0;s<columns.length;s++){var r=columns[s].currentWidth||columns[s].width,n=r-cellWidthDiff;n<0&&(r+=Math.abs(n)),i+=r,e.push("."+uid+" .c"+s+" { width:"+(r-cellWidthDiff)+"px;  } ")}e.push("."+uid+" .grid-canvas { width:"+i+"px; } "),jOmnisStyleSheetId&&jOmnis.removeStyleSheet(jOmnisStyleSheetId),jOmnisStyleSheetId=jOmnis.addStyleSheet(e.join(""))}function removeCssRules(){jOmnisStyleSheetId&&(jOmnis.removeStyleSheet(jOmnisStyleSheetId),jOmnisStyleSheetId=null)}function destroy(){options.editorLock.cancelCurrentEdit(),self.onBeforeDestroy&&self.onBeforeDestroy(),options.enableColumnReorder&&$headers.sortable&&$headers.sortable("destroy"),unbindAncestorScrollEvents(),$headers.each((function(){try{$(this).sortable&&$(this).sortable("destroy")}catch(t){}})),$(window).unbind("resize",$container.resizeHandler),$container.unbind(".slickgrid"),removeCssRules(),$canvas.unbind("draginit dragstart dragend drag"),$container.empty().removeClass(uid)}function getEditController(){return editController}function getColumnIndex(t){return columnsById[t]}function autosizeColumns(){var t,e,i=[],s=0,r=$viewport.innerWidth(),n=options.autoHeight?r:r-scrollbarDimensions.width,o=0,a=0;for(t=0;t<columns.length;t++)e=columns[t],i.push(e.width),a+=e.width,s+=e.width-Math.max(e.minWidth||0,absoluteColumnMinWidth);for(o=a,removeAllRows();o>n;){if(!s)return;var l=(o-n)/s;for(t=0;t<columns.length&&o>n;t++)if((e=columns[t]).resizable&&e.minWidth!==e.width&&e.width!==absoluteColumnMinWidth){var h=Math.floor(l*(e.width-Math.max(e.minWidth||0,absoluteColumnMinWidth)))||1;o-=h,i[t]-=h}}for(var c=o;o<n;){var u=n/o;for(t=0;t<columns.length&&o<n;t++)if((e=columns[t]).resizable&&!(e.maxWidth<=e.width)){var d=Math.min(Math.floor(u*e.width)-e.width,e.maxWidth-e.width||1e6)||1;o+=d,i[t]+=d}if(c==o)break;c=o}for(t=0;t<columns.length;t++)styleColumnWidth(t,columns[t].currentWidth=i[t],!0);resizeCanvas()}function styleColumnWidth(t,e,i){columns[t].currentWidth=e,$headers.children().eq(t).css("width",e-headerColumnWidthDiff),$footerRow.children().eq(t).css("width",e-headerColumnWidthDiff),i&&(removeCssRules(),createCssRules())}function setSortColumn(t,e){sortAsc=e;var i=getColumnIndex(sortColumnId=t),s=$headers.children();s.removeClass("slick-header-column-sorted");for(var r=$headers.find(".slick-sort-indicator"),n=0;n<r.length;n++)jOmnis.removeClass(r[n],["slick-sort-indicator-asc","slick-sort-indicator-desc"]);if(null!=i){var o=s.eq(i).addClass("slick-header-column-sorted").find(".slick-sort-indicator");jOmnis.addClass(o[0],sortAsc?"slick-sort-indicator-asc":"slick-sort-indicator-desc")}for(var a=0;a<s.length;a++)a===i?s.eq(a).attr("aria-sort",sortAsc?"ascending":"descending"):s.eq(a).removeAttr("aria-sort")}function getSelectedRows(){return selectedRows.concat()}function setSelectedRows(t){var e,i,s={};for(e=0;e<t.length;e++)s[t[e]]=!0;for(e=0;e<selectedRows.length;e++)i=selectedRows[e],rowsCache[i]&&!s[i]&&$(rowsCache[i]).removeClass("ui-state-active selected");for(e=0;e<t.length;e++)i=t[e],rowsCache[i]&&!selectedRowsLookup[i]&&$(rowsCache[i]).addClass("ui-state-active selected");selectedRows=t.concat(),selectedRowsLookup=s}function getColumns(){return columns}function setColumns(t){columns=t.filter((function(t){return!t.hidden||jOmnis.mDesign})),removeAllRows(),createColumnHeaders(),createColumnFooter(),removeCssRules(),createCssRules(),resizeAndRender(),handleScroll(),updateFooterRowAllCells(),self.omn_ctrl&&(self.omn_ctrl.restoreFilterRow(),self.omn_ctrl.setAriaColCount(columns.length))}function getOptions(){return options}function setOptions(t){options.editorLock.commitCurrentEdit()&&(makeSelectedCellNormal(),options.enableAddRow!==t.enableAddRow&&removeRow(gridDataGetLength()),options=$.extend(options,t),render())}function setData(t,e){removeAllRows(),gridDataGetLength=(gridData=data=t).getLength||defaultGetLength,gridDataGetItem=gridData.getItem||defaultGetItem,e&&scrollTo(0)}function getData(){return gridData}function getSecondaryHeaderRow(){return $secondaryHeaders[0]}function getSecondaryHeaderRowEx(){return $secondaryHeaders[1]}function getsecondaryHeaderScroller(){return $secondaryHeaderScroller}function showSecondaryHeaderRow(){if(options.showSecondaryHeaderRow=!0,$secondaryHeaderScroller.slideDown("fast",resizeCanvas),$secondaryHeaders[0].style.width="9999px",$secondaryHeaders.length>1){var t=$($secondaryHeaders[0]).outerHeight();$secondaryHeaders[1].style.height=t+"px"}}function hideSecondaryHeaderRow(){options.showSecondaryHeaderRow=!1,$secondaryHeaderScroller.slideUp("fast",resizeCanvas)}function scrollTo(t){var e=offset;page=Math.min(n-1,Math.floor(t/ph));var i=t-(offset=Math.round(page*cj));if(offset!=e){var s=getVisibleRange(i);cleanupRows(s.top,s.bottom),updateRowPositions()}if(prevScrollTop!=i){var r=$viewport[0].scrollTop;scrollDir=prevScrollTop+e<i+offset?1:-1,$viewport.scrollTop(lastRenderedScrollTop=scrollTop=prevScrollTop=i),r==$viewport.scrollTop?handleScroll():self.onViewportChanged&&self.onViewportChanged()}}function defaultFormatter(t,e,i,s,r){return null==i?"<span></span>":"<span>".concat(i,"</span>")}function getFormatter(t){return t.formatter||options.formatterFactory&&options.formatterFactory.getFormatter(t)||defaultFormatter}function getEditor(t){return t.editor||options.editorFactory&&options.editorFactory.getEditor(t)}function appendRowHtml(t,e){var i,s=gridDataGetItem(e),r="slick-row "+(e<gridDataGetLength()&&!s?" loading":"")+(selectedRowsLookup[e]?" selected ui-state-active":"")+(e%2==1?" odd":" even");options.rowCssClasses&&(r+=" "+options.rowCssClasses(s));var n="";columns.length&&columns[0]&&columns[0].omnisObject&&columns[0].omnisObject.mDragEnabled&&(n=" draggable='true'"),t.push("<div class='ui-widget-content "+r+"' role='row' aria-rowindex='"+(e+1)+"' row='"+e+"' style='top:"+(options.rowHeight*e-offset)+"px'"+n+">");for(var o=0,a=columns.length;o<a;o++){var l=columns[o];i="slick-cell c"+o+(l.cssClass?" "+l.cssClass:""),highlightedCells&&highlightedCells[e]&&highlightedCells[e][l.id]&&(i+=" "+options.cellHighlightCssClass),t.push("<div class='"+i+"' role='gridcell' tabindex='-1'>"),s&&t.push(getFormatter(l)(e,o,s[l.field],l,s)),t.push("</div>")}t.push("</div>")}function cleanupRows(t){for(var e in rowsCache)(e=parseInt(e,10))!==currentRow&&(e<t.top||e>t.bottom)&&removeRowFromCache(e)}function invalidate(){updateRowCount(),removeAllRows(),render()}function removeAllRows(){currentEditor&&makeSelectedCellNormal(),$canvas.each((function(){this.innerHTML=""})),rowsCache={},postProcessedRows={},counter_rows_removed+=renderedRows,renderedRows=0}function removeRowFromCache(t){rowsCache[t]&&($canvas.find(".slick-row[row="+t+"]").detach(),delete rowsCache[t],delete postProcessedRows[t],renderedRows--,counter_rows_removed++)}function removeRows(t){var e,i,s;if(t&&t.length){scrollDir=0;var r=[];for(e=0,i=t.length;e<i;e++)currentEditor&&currentRow===e&&makeSelectedCellNormal(),rowsCache[t[e]]&&r.push(t[e]);if(renderedRows>10&&r.length===renderedRows)removeAllRows();else for(e=0,s=r.length;e<s;e++)removeRowFromCache(r[e])}}function removeRow(t){removeRows([t])}function updateCell(t,e){if(rowsCache[t]){var i=$(getCellNode(t,e));if(0!==i.length){var s=columns[e],r=gridDataGetItem(t);currentEditor&&currentRow===t&&currentCell===e?currentEditor.loadValue(r):(i[0].innerHTML=r?getFormatter(s)(t,e,r[s.field],s,r):"",invalidatePostProcessingResults(t))}}}function updateRow(t){rowsCache[t]&&($(rowsCache[t]).children().each((function(e){var i=columns[e];t===currentRow&&e===currentCell&&currentEditor?currentEditor.loadValue(gridDataGetItem(currentRow)):gridDataGetItem(t)?this.innerHTML=getFormatter(i)(t,e,gridDataGetItem(t)[i.field],i,gridDataGetItem(t)):this.innerHTML=""})),invalidatePostProcessingResults(t))}function resizeCanvas(){var t=options.rowHeight*(gridDataGetLength()+(options.enableAddRow?1:0)+(options.leaveSpaceForNewRows?numVisibleRows-1:0));if(options.autoHeight)$viewport.height(t);else{var e=0;"none"!=$headerScroller[0].style.display&&(e=$headerScroller.outerHeight());var i=options.showFooterRow?options.footerRowHeight:0;$viewport.height($container.innerHeight()-e-(options.showSecondaryHeaderRow?$secondaryHeaderScroller.outerHeight():0)-2-i)}viewportW=$viewport.innerWidth(),viewportH=$viewport.innerHeight(),numVisibleRows=Math.ceil(viewportH/options.rowHeight);var s=0;if($headers.find(".slick-header-column").each((function(){s+=$(this).outerWidth()})),setCanvasWidth(s),options.frozenColumn>-1){var r=getWidthSplittedCanvas();$(canvas0).width(r.widthFixed),$(canvas1).width(r.widthScrolled),$("#splittedC"+uis,$container).width($container.width()-r.widthFixed),$("#splittedC"+uis,$container).css("left",r.widthFixed),$($footerRowScrollerR).css("left",r.widthFixed);var n=(options.frozenColumn>-1?"1":"")+uis,o=$("#v"+n,$container);$(o).width($container.width()-r.widthFixed),$(canvas1).width(r.widthScrolled)}updateRowCount(),render()}function updateFooterRowOneCell(t){var e;if(t.omnisObject&&options.showFooterRow&&(getColumns().forEach((function(i,s){i.omnisListColumn===t.omnisListColumn&&(e=s)})),t.getFooterText(),null!=e)){var i=getFooterRowColumn(e);i&&(i.innerHTML=t.getFooterText())}}function updateFooterRowAllCells(){options.showFooterRow&&self.omn_ctrl.columnDefnArray.forEach((function(t){t.hidden||updateFooterRowOneCell(t)}))}function resizeAndRender(){options.forceFitColumns?autosizeColumns():resizeCanvas()}function updateRowCount(){var t=gridDataGetLength()+(options.enableAddRow?1:0)+(options.leaveSpaceForNewRows?numVisibleRows-1:0),e=h,i=(options.frozenColumn>-1?"1":"")+uis,s=$("#v"+i,$container)[0],r=options.enableAddRow?gridDataGetLength():gridDataGetLength()-1;for(var o in rowsCache)o>=r&&removeRowFromCache(o);(th=Math.max(options.rowHeight*t,viewportH-scrollbarDimensions.height))<maxSupportedCssHeight?(h=ph=th,n=1,cj=0):(ph=(h=maxSupportedCssHeight)/100,n=Math.floor(th/ph),cj=(th-h)/(n-1)),h!==e&&($canvas.css("height",h),scrollTop=s.scrollTop);var a=scrollTop+offset<=th-viewportH;0==th||0==scrollTop?page=offset=0:scrollTo(a?scrollTop+offset:th-viewportH),h!=e&&options.autoHeight&&resizeCanvas(),self.omn_ctrl&&self.omn_ctrl.setAriaRowCount(t)}function getVisibleRange(t){return null==t&&(t=scrollTop),{top:Math.floor((scrollTop+offset)/options.rowHeight),bottom:Math.ceil((scrollTop+offset+viewportH)/options.rowHeight)}}function getRenderedRange(t){var e=getVisibleRange(t),i=Math.round(viewportH/options.rowHeight);return-1==scrollDir?(e.top-=i,e.bottom+=3):1==scrollDir?(e.top-=3,e.bottom+=i):(e.top-=3,e.bottom+=3),e.top=Math.max(0,e.top),e.bottom=Math.min(options.enableAddRow?gridDataGetLength():gridDataGetLength()-1,e.bottom),e}function renderRows(t){var e,i,s=$canvas[0],r=[],n=[],o=[],a=!1;if(options.frozenColumn>-1){for(e=t.top;e<=t.bottom;e++)rowsCache[e]||(renderedRows++,o.push(e),appendSplitedHtmlRow(r,n,e),currentCellNode&&currentRow===e&&(a=!0),counter_rows_rendered++);var l=document.createElement("div"),h=document.createElement("div");for(l.innerHTML=r.join(""),h.innerHTML=n.join(""),e=0,i=l.childNodes.length;e<i;e++)rowsCache[o[e]]=$().add($(l.firstChild).appendTo(canvas0)).add($(h.firstChild).appendTo(canvas1))}else{for(e=t.top;e<=t.bottom;e++)rowsCache[e]||(renderedRows++,o.push(e),appendRowHtml(r,e),currentCellNode&&currentRow===e&&(a=!0),counter_rows_rendered++);for((l=document.createElement("div")).innerHTML=r.join(""),e=0,i=l.childNodes.length;e<i;e++)rowsCache[o[e]]=s.appendChild(l.firstChild)}a&&setSelectedCell(currentCellNode=getCellNode(currentRow,currentCell),!1)}function appendSplitedHtmlRow(t,e,i){var s=gridDataGetItem(i),r="slick-row "+(i<gridDataGetLength()&&!s?" loading":"")+(selectedRowsLookup[i]?" selected ui-state-active":"")+(i%2==1?" odd":" even");options.rowCssClasses&&(r+=" "+options.rowCssClasses(s)),t.push("<div class='ui-widget-content "+r+"' row='"+i+"' style='top:"+options.rowHeight*i+"px'>"),e.push("<div class='ui-widget-content "+r+"' row='"+i+"' style='top:"+options.rowHeight*i+"px'>");for(var n=0,o=options.frozenColumn+1;n<o;n++){var a=columns[n];a.hidden&&!jOmnis.mDesign||(t.push("<div tabindex='-1' class='is-frozen slick-cell c"+n+(a.cssClass?" "+a.cssClass:"")+"' cell="+n+">"),s&&i<gridDataGetLength()&&t.push(getFormatter(a)(i,n,s[a.field],a,s)),t.push("</div>"))}t.push("</div>");for(n=options.frozenColumn+1,o=columns.length;n<o;n++)(a=columns[n]).hidden&&!jOmnis.mDesign||(e.push("<div tabindex='-1' class='slick-cell c"+n+(a.cssClass?" "+a.cssClass:"")+"' cell="+n+">"),s&&i<gridDataGetLength()&&e.push(getFormatter(a)(i,n,s[a.field],a,s)),e.push("</div>"));e.push("</div>")}function getWidthSplittedCanvas(){var t=0,e=0;return $(headers0).find(".slick-header-column").each((function(){t+=$(this).outerWidth()})),$(headers1).find(".slick-header-column").each((function(){e+=$(this).outerWidth()})),{widthFixed:t,widthScrolled:e}}function startPostProcessing(){options.enableAsyncPostRender&&(clearTimeout(h_postrender),h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay))}function invalidatePostProcessingResults(t){delete postProcessedRows[t],postProcessFromRow=Math.min(postProcessFromRow,t),postProcessToRow=Math.max(postProcessToRow,t),startPostProcessing()}function updateRowPositions(){for(var t in rowsCache)rowsCache[t].style.top=t*options.rowHeight-offset+"px"}function render(){var t=getVisibleRange(),e=getRenderedRange();cleanupRows(e),renderRows(e),postProcessFromRow=t.top,postProcessToRow=Math.min(options.enableAddRow?gridDataGetLength():gridDataGetLength()-1,t.bottom),startPostProcessing(),lastRenderedScrollTop=scrollTop,h_render=null}function handleScroll(t){var e,i,s=options.frozenColumn>-1;s&&t&&t.target===viewp0?(e=viewp0,i=$("#v1"+uis,$container)[0]):s?(e=$("#v1"+uis,$container)[0],i=$("#v"+uis,$container)[0]):e=$("#v"+uis,$container)[0];var r=e.children[0];scrollTop=mUsingIScroll?-r.position().top:e.scrollTop;var o=mUsingIScroll?-r.position().left:e.scrollLeft,a=Math.abs(scrollTop-prevScrollTop);if(o!==prevScrollLeft){prevScrollLeft=o;var l=(s&&t&&t.target!==viewp0?"1":"")+uis;$("#hs"+l+",#shs"+l+",#f"+l,$container).scrollLeft(o)}if(a){if(scrollDir=prevScrollTop<scrollTop?1:-1,prevScrollTop=scrollTop,a<viewportH)scrollTo(scrollTop+offset);else{var c=offset;page=Math.min(n-1,Math.floor(scrollTop*((th-viewportH)/(h-viewportH))*(1/ph))),c!=(offset=Math.round(page*cj))&&removeAllRows()}i&&(i.scrollTop=scrollTop),h_render&&clearTimeout(h_render),Math.abs(lastRenderedScrollTop-scrollTop)<viewportH||mRenderNow?render():h_render=setTimeout(render,50),self.onViewportChanged&&self.onViewportChanged()}}function asyncPostProcessRows(){for(;postProcessFromRow<=postProcessToRow;){var t=scrollDir>=0?postProcessFromRow++:postProcessToRow--,e=rowsCache[t];if(!(!e||postProcessedRows[t]||t>=gridDataGetLength())){for(var i=gridDataGetItem(t),s=$(e).children(),r=0,n=0,o=columns.length;r<o;++r){var a=columns[r];a.asyncPostRender&&a.asyncPostRender(s[n],postProcessFromRow,i,a),++n}return postProcessedRows[t]=!0,void(h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay))}}}function setHighlightedCells(t){var e,i;for(var s in rowsCache)for(e=0;e<columns.length;e++)(highlightedCells&&highlightedCells[s]&&highlightedCells[s][columns[e].id])!=(t&&t[s]&&t[s][columns[e].id])&&(i=$(getCellNode(s,e))).length&&i.toggleClass(options.cellHighlightCssClass);highlightedCells=t}function flashCell(t,e,i){if(i=i||100,rowsCache[t]){var s=$(getCellNode(t,e));!function t(e){e&&setTimeout((function(){s.queue((function(){s.toggleClass(options.cellFlashingCssClass).dequeue(),t(e-1)}))}),i)}(4)}}function getSiblingIndex(t){for(var e=0;t&&t.previousSibling;)e++,t=t.previousSibling;options.frozenColumn>-1&&(0==$(t).hasClass("is-frozen")&&(e+=options.frozenColumn+1));return e}function getCellNode(t,e){return rowsCache[t]?$(rowsCache[t]).children().eq(e)[0]:null}function handleKeyDown(t){if(!jOmnisMenuHandler.isContextMenuOpen()){var e=!0;if(!(self.onKeyDown&&!options.editorLock.isActive()&&self.onKeyDown(t,currentRow,currentCell))){var i=!t.shiftKey&&!t.altKey&&!t.ctrlKey,s=t.shiftKey&&!t.altKey&&!t.ctrlKey,r=!t.shiftKey&&!t.altKey&&t.ctrlKey,n=OmnisKeyboardHandler.getNormalizedEventKey(t);if(i&&"Escape"===n){if(!options.editorLock.isActive())return;cancelEditAndSetFocus(),setFocusRow(currentRow)}else if(i&&"ArrowLeft"===n)focusLeft();else if(i&&"ArrowRight"===n)focusRight();else if(i&&"ArrowUp"===n)focusUp();else if(i&&"ArrowDown"===n)focusDown();else if(i&&"Home"===n)focusRowStart();else if(i&&"End"===n)focusRowEnd();else if((i||s)&&"Tab"===n){if(options.editorLock.isActive()){var o=i?navigateNext():navigatePrev();e=o,o&&!options.editorLock.isActive()&&makeSelectedCellEditable()}else options.tabThroughCells&&(e=o=i?navigateNext():navigatePrev());o||(e=self.omn_ctrl.tabOutOfGrid(s))}else if("Enter"===n){if(!ctrlIsEnabled())return;if(currentEditor)currentRow===defaultGetLength()?navigateDown():commitEditAndSetFocus();else{var a=jOmnis.getOmnisCtrl($canvas[0]),l=a.pager;if(l)var h=l.currentLine-l.entriesPerPage*(l.displayedPage-1);else h=a.getData("#L");gotoCell(currentRow,currentCell),h===a.getRealListRow(currentRow)+1&&options.editable&&options.editorLock.commitCurrentEdit()&&makeSelectedCellEditable()}}else if(i&&"PageUp"===n)focusPageUp();else if(i&&"PageDown"===n)focusPageDown();else if(r&&"Home"===n)focusFirstCell();else if(r&&"End"===n)focusLastCell();else{if(" "!==n||null==currentRow||options.editorLock.isActive())return;options.autoEdit&&null!=currentCell&&columns[currentCell].editor===YesNoCheckboxCellEditor?handleClick(t):!options.keyboardChangesLine&&ctrlIsEnabled()&&selectRow(r)}}e&&(t.stopPropagation(),t.preventDefault());try{t.originalEvent.keyCode=0}catch(t){}}}function selectRow(t){if(options.multiSelect&&!t){var e=getSelectedRows();-1===$.inArray(currentRow,e)?e.push(currentRow):e=$.grep(e,(function(t){return t!==currentRow})),setSelectedRows(e),gotoCell(currentRow,currentCell,!1,!0)}else gotoCell(currentRow,currentCell)}function handleClick(t){if(!options.disableClick){var e=$(t.target).closest(".slick-cell",$canvas);if(0!==e.length||0!==(e=$(document.activeElement).closest(".slick-cell",$canvas)).length)if(t.target.gridCell=e,ctrlIsEnabled()){if(currentCellNode!==e[0]||null===currentEditor){var i=parseInt(e.parent().attr("row"),10),s=getSiblingIndex(e[0]),r=null,n=columns[s],o=gridDataGetItem(i);if(n.omnisObject.canAllowClickOnNewCell()){if(o&&("selectAndMove"===n.behavior||"select"===n.behavior||t.ctrlKey||t.shiftKey||t.metaKey)&&(r=options.editorLock.commitCurrentEdit())){var a=getSelectedRows(),l=$.inArray(i,a);return t.ctrlKey||t.shiftKey||t.metaKey?options.multiSelect&&(-1===l&&(t.ctrlKey||t.metaKey)?a.push(i):-1!==l&&(t.ctrlKey||t.metaKey)?a=$.grep(a,(function(t,e){return t!==i})):a.length&&t.shiftKey&&(a=selectRange(i,a))):a=[i],resetCurrentCell(),setSelectedRows(a),self.onSelectedRowsChanged&&self.onSelectedRowsChanged(),options.disableScrollToView||$canvas[0].focus(),!1}if(o&&self.onClick&&(r=options.editorLock.commitCurrentEdit())&&self.onClick(t,i,s))return t.stopPropagation(),t.preventDefault(),!1;if(options.enableCellNavigation&&!columns[s].unselectable&&(!0===r||null===r&&options.editorLock.commitCurrentEdit())){scrollRowIntoView(i,!1),e[0].isConnected||(e=$(getCellNode(i,s)));var h=(" "===t.key?t.target.querySelector(".omnis-checkbox"):t.target).closest(".omnis-checkbox");if(options.autoEdit&&h&&!h.supressAutoEditCheckbox)e[0].clickedCheckbox=!0,jOmnis.getOmnisCtrl(e[0]).autoClickedCheckbox=e[0];h&&(h.supressAutoEditCheckbox=!1),setSelectedCellAndRow(e[0],i===defaultGetLength()||options.autoEdit)}}}}else setSelectedCell(e[0])}}function selectRange(t,e){var i=e.pop(),s=Math.min(t,i),r=Math.max(t,i);e=[];for(var n=s;n<=r;n++)n!==i&&e.push(n);return e.push(i),e}function handleContextMenu(t){var e=$(t.target).closest(".slick-cell",$canvas);if(0!==e.length&&(currentCellNode!==e[0]||null===currentEditor)){var i=parseInt(e.parent().attr("row"),10),s=getSiblingIndex(e[0]);return gridDataGetItem(i)&&self.onContextMenu&&options.editorLock.commitCurrentEdit()&&self.onContextMenu(t,i,s)?(t.stopPropagation(),t.preventDefault(),!1):void 0}}function handleDblClick(t){var e=$(t.target).closest(".slick-cell",$canvas);if(0!==e.length&&(currentCellNode!==e[0]||null===currentEditor)){var i=parseInt(e.parent().attr("row"),10),s=getSiblingIndex(e[0]);if(gridDataGetItem(i)&&self.onDblClick&&options.editorLock.commitCurrentEdit()&&self.onDblClick(t,i,s))return t.stopPropagation(),t.preventDefault(),!1;options.editable&&gotoCell(i,s,!0)}}function handleHeaderContextMenu(t){if(self.onHeaderContextMenu&&options.editorLock.commitCurrentEdit()){t.preventDefault();var e=$(t.target).closest(".slick-header-column",".slick-header-columns");self.onHeaderContextMenu(t,columns[self.getColumnIndex(e.data("fieldId"))])}}function handleHeaderClick(t){var e=$(t.target).closest(".slick-header-column");if(0!=e.length){var i=columns[getSiblingIndex(e[0])];self.onHeaderClick&&options.editorLock.commitCurrentEdit()&&(t.preventDefault(),self.onHeaderClick(t,i))}}function handleFooterContextMenu(t){$(t.target).closest(".slick-footerrow-column",".slick-footerrow-columns")}function handleFooterClick(t){var e=$(t.target).closest(".slick-footerrow-column",".slick-footerrow-columns"),i=e&&e.data("column");i&&i.omnisObject&&i.omnisObject.sendFooterClick(i.omnisGridColumn)}function handleHover(t){if(options.enableAutoTooltips){var e=$(t.target).closest(".slick-cell",$canvas);if(e.length)if(e.innerWidth()<e[0].scrollWidth){var i=$.trim(e.text());e.attr("title",options.toolTipMaxLength&&i.length>options.toolTipMaxLength?i.substr(0,options.toolTipMaxLength-3)+"...":i)}else e.attr("title","")}}function setFocusRow(t){options.keyboardChangesLine&&ctrlIsEnabled()?null!=focusRow&&$(rowsCache[focusRow]).removeClass("ctrl-dgrd-row-focused"):focusRow!==t&&(t<0||t>gridDataGetLength()||($(rowsCache[focusRow]).removeClass("ctrl-dgrd-row-focused"),$(rowsCache[t]).addClass("ctrl-dgrd-row-focused"),focusRow=t))}function handleFocusOut(t){$container[0].contains(t.relatedTarget)||setFocusRow(null)}function cellExists(t,e){return!(t<0||t>=gridDataGetLength()||e<0||e>=columns.length)}function getCellFromPoint(t,e){for(var i=Math.floor((e+offset)/options.rowHeight),s=0,r=0,n=0;n<columns.length&&r<t;n++)r+=columns[n].width,s++;return{row:i,cell:s-1}}function getCellFromEvent(t){var e=$(t.target).closest(".slick-cell",$canvas);if(!e.length){if(!t.target.gridCell)return null;e=t.target.gridCell}return{row:0|e.parent().attr("row"),cell:getSiblingIndex(e[0])}}function getCellFromNode(t){var e=/l\d+/.exec(t.className)||/c\d+/.exec(t.className);if(!e)throw"getCellFromNode: cannot get cell - "+t.className;return parseInt(e[0].substr(1,e[0].length-1),10)}function getCellNodeBox(t,e){if(!cellExists(t,e))return null;for(var i=t*options.rowHeight-offset,s=i+options.rowHeight-1,r=0,n=0;n<e;n++)r+=columns[n].width;return{top:i,left:r,bottom:s,right:r+columns[e].width}}function resetCurrentCell(){setSelectedCell(null,!1)}function focusOnCurrentCell(){if(currentCellNode!==document.activeElement){var t=(options.frozenColumn>-1?"1":"")+uis,e=$("#v"+t,$container)[0],i=e.scrollLeft;try{if(columns.length&&columns[0]&&columns[0].omnisObject)var s=columns[0].omnisObject.form.inst.mAnimationTimersRunning>0;s?columns[0].omnisObject.form.inst.deferredFocusElem=currentCellNode:currentCellNode.focus()}catch(t){}try{var r=$(currentCellNode).position().left,n=r+$(currentCellNode).outerWidth(),o=i+$("#v"+t,$container).width();if(options.disableScrollToView)return;r<i?$viewport.scrollLeft(r):n>o&&$("#v"+t,$container).scrollLeft(Math.min(r,n-e.clientWidth))}catch(t){}}}function setSelectedCell(t,e){currentCellNode&&(makeSelectedCellNormal(),$(currentCellNode).removeClass("selected")),null!=(currentCellNode=t)?(currentRow=parseInt($(currentCellNode).parent().attr("row"),10),currentCell=getSiblingIndex(currentCellNode),$(currentCellNode).addClass("selected"),options.editable&&e&&isCellPotentiallyEditable(currentRow,currentCell)?(clearTimeout(h_editorLoader),options.asyncEditorLoading?h_editorLoader=setTimeout(makeSelectedCellEditable,options.asyncEditorLoadDelay):makeSelectedCellEditable()):focusOnCurrentCell(),self.onCurrentCellChanged&&self.onCurrentCellChanged(getCurrentCell())):(currentRow=null,currentCell=null),setFocusRow(currentRow)}function setSelectedCellAndRow(t,e){setSelectedCell(t,e),setSelectedRows(t?[currentRow]:[]),self.onSelectedRowsChanged&&self.onSelectedRowsChanged()}function isCellPotentiallyEditable(t,e){return!(t<gridDataGetLength()&&!gridDataGetItem(t))&&(!(columns[e].cannotTriggerInsert&&t>=gridDataGetLength())&&!!getEditor(columns[e]))}function makeSelectedCellNormal(){if(currentEditor){if(self.onBeforeCellEditorDestroy&&self.onBeforeCellEditorDestroy(currentEditor),currentEditor.destroy(),currentEditor=null,currentCellNode&&($(currentCellNode).removeClass("editable invalid omnis-prevent-copy"),gridDataGetItem(currentRow))){var t=columns[currentCell];t&&(currentCellNode.innerHTML=getFormatter(t)(currentRow,currentCell,gridDataGetItem(currentRow)[t.field],t,gridDataGetItem(currentRow))),invalidatePostProcessingResults(currentRow)}options.editorLock.deactivate(editController)}}function makeSelectedCellEditable(){if(currentCellNode){if(!options.editable)throw"Grid : makeSelectedCellEditable : should never get called when options.editable is false";if(clearTimeout(h_editorLoader),isCellPotentiallyEditable(currentRow,currentCell))if(self.onBeforeEditCell&&!1===self.onBeforeEditCell(currentRow,currentCell,gridDataGetItem(currentRow)))focusOnCurrentCell();else{options.editorLock.activate(editController),$(currentCellNode).addClass("editable omnis-prevent-copy");var t=absBox(currentCellNode);if(0!=t.left||0!=t.top){currentCellNode.innerHTML="";var e=columns[currentCell],i=gridDataGetItem(currentRow);if(currentEditor=new(getEditor(e))({grid:self,gridPosition:absBox($container[0]),position:absBox(currentCellNode),container:currentCellNode,column:e,item:i||{},commitChanges:commitEditAndSetFocus,cancelChanges:cancelEditAndSetFocus}),i&&currentEditor.loadValue(i,currentCellNode.clickedCheckbox),currentCellNode.clickedCheckbox)return commitEditAndSetFocus(!0),void(currentCellNode.clickedCheckbox=!1);serializedEditorValue=currentEditor.serializeValue(),currentEditor.position&&handleCurrentCellPositionChange()}else focusOnCurrentCell()}}}function commitEditAndSetFocus(t){options.editorLock.commitCurrentEdit()&&(focusOnCurrentCell(),options.autoEdit&&!t&&navigateDown())}function cancelEditAndSetFocus(){options.editorLock.cancelCurrentEdit()&&focusOnCurrentCell()}function absBox(t){var e=jOmnis.getElemPosRelativeToAncestor(t,document.body),i={top:e.y,left:e.x,bottom:0,right:0,width:e.w,height:e.h,visible:!0};return i.bottom=i.top+i.height,i.right=i.left+i.width,i}function getCurrentCellPosition(){return absBox(currentCellNode)}function getGridPosition(){return absBox($container[0])}function renderNow(t){mRenderNow=t}function setUsingIScroll(t){mUsingIScroll=t}function handleCurrentCellPositionChange(){var t;currentCellNode&&(self.onCurrentCellPositionChanged&&(t=getCurrentCellPosition(),self.onCurrentCellPositionChanged(t)),currentEditor&&(t=t||getCurrentCellPosition(),currentEditor.show&&currentEditor.hide&&(t.visible?currentEditor.show():currentEditor.hide()),currentEditor.position&&currentEditor.position(t)))}function getCellEditor(){return currentEditor}function getCurrentCell(){return currentCellNode?{row:currentRow,cell:currentCell}:null}function getCurrentCellNode(){return currentCellNode}function scrollRowIntoView(t,e){var i=t*options.rowHeight,s=(t+1)*options.rowHeight-viewportH+(viewportHasHScroll?scrollbarDimensions.height:0),r=(options.frozenColumn>-1?"1":"")+uis,n=$("#v"+r,$container)[0];scrollTop=n.scrollTop,(t+1)*options.rowHeight>scrollTop+viewportH+offset?(scrollTo(e?i:s),render()):t*options.rowHeight<scrollTop+offset&&(scrollTo(e?s:i),render())}function gotoDir(t,e,i,s){if(!currentCellNode||!options.enableCellNavigation)return!0;if(!options.editorLock.commitCurrentEdit())return!0;function r(){return!columns[getSiblingIndex(this)].unselectable}var n=rowsCache[currentRow+t],o=n&&currentCell+e>=0?$(n).children().eq(currentCell+e).filter(r):null;o&&!o.length&&((a=$(n).children().filter((function(t){return e>0?t>currentCell+e:t<currentCell+e})).filter(r))&&a.length&&(o=e>0?a.eq(0):a.eq(a.length-1)));if(i&&0===t&&!(n&&o&&o.length)&&(!o||!o.length)){n=rowsCache[currentRow+t+(e>0?1:-1)];var a=$(n).children().filter(r);o=e>0?n?a.eq(0):null:n?a.eq(a.length-1):null}if(!(n&&o&&o.length))return s||focusOnCurrentCell(),!1;var l=parseInt($(n).attr("row"),10),h=l==defaultGetLength();return scrollRowIntoView(l,!h),options.keyboardChangesLine&&ctrlIsEnabled()?setSelectedCellAndRow(o[0],h||options.autoEdit):setSelectedCell(o[0],h||options.autoEdit),currentEditor||focusOnCurrentCell(),!0}function gotoCell(t,e,i,s){if(!(t>gridDataGetLength()||t<0||e>=columns.length||e<0)&&options.enableCellNavigation&&columns[e]&&!columns[e].unselectable&&options.editorLock.commitCurrentEdit()){scrollRowIntoView(t,!1);var r=null;columns[e].unselectable||(r=getCellNode(t,e)),s?setSelectedCell(r,!1):setSelectedCellAndRow(r,i||t===gridDataGetLength()||options.autoEdit),currentEditor||focusOnCurrentCell()}}function navigateUp(){gotoDir(-1,0,!1)}function navigateDown(){gotoDir(1,0,!1)}function navigateLeft(){gotoDir(0,-1,!1)}function navigateRight(){gotoDir(0,1,!1)}function navigatePrev(){return!!options.editable&&gotoDir(0,-1,!0,!0)}function navigateNext(){return!!options.editable&&gotoDir(0,1,!0,!0)}function setFocusCell(t,e){gotoCell(t,e,!1,!options.keyboardChangesLine||!ctrlIsEnabled())}function focusLeft(){setFocusCell(currentRow,Math.max(0,currentCell-1))}function focusRight(){setFocusCell(currentRow,Math.min(columns.length-1,currentCell+1))}function focusUp(){setFocusCell(Math.max(0,currentRow-1),currentCell)}function focusDown(){var t=self.omn_ctrl.extendable&&options.editable?gridDataGetLength():gridDataGetLength()-1;setFocusCell(Math.min(currentRow+1,t),currentCell)}function focusRowStart(){setFocusCell(currentRow,0)}function focusRowEnd(){setFocusCell(currentRow,columns.length-1)}function focusPageUp(){setFocusCell(Math.max(0,currentRow-numVisibleRows),currentCell)}function focusPageDown(){setFocusCell(Math.min(currentRow+numVisibleRows,gridDataGetLength()-1),currentCell)}function focusFirstCell(){setFocusCell(0,0)}function focusLastCell(){setFocusCell(gridDataGetLength()-1,columns.length-1)}function ctrlIsEnabled(){var t=jOmnis.getOmnisCtrl($canvas[0]);return t&&t.isEnabled()}function commitCurrentEdit(){var t=gridDataGetItem(currentRow),e=columns[currentCell];if(currentEditor){if(currentEditor.isValueChanged()){var i=currentEditor.validate();if(i.valid){if(currentRow<gridDataGetLength()){var s={row:currentRow,cell:currentCell,editor:currentEditor,serializedValue:currentEditor.serializeValue(),prevSerializedValue:serializedEditorValue,execute:function(){this.editor.applyValue(t,this.serializedValue),updateRow(this.row)},undo:function(){this.editor.applyValue(t,this.prevSerializedValue),updateRow(this.row)}};options.editCommandHandler?(makeSelectedCellNormal(),options.editCommandHandler(t,e,s)):(s.execute(),makeSelectedCellNormal()),self.onCellChange&&self.onCellChange(currentRow,currentCell,t)}else if(self.onAddNewRow&&options.enableAddRow){var r={};currentEditor.applyValue(r,currentEditor.serializeValue()),makeSelectedCellNormal(),self.onAddNewRow(r,e)}return!options.editorLock.isActive()}return $(currentCellNode).addClass("invalid"),$(currentCellNode).stop(!0,!0).effect("highlight",{color:"red"},300),self.onValidationError&&self.onValidationError(currentCellNode,i,currentRow,currentCell,e),currentEditor.focus(),!1}makeSelectedCellNormal()}return!0}function cancelCurrentEdit(){return makeSelectedCellNormal(),!0}this.debug=function(){var t="";t+="\ncounter_rows_rendered:  "+counter_rows_rendered,t+="\ncounter_rows_removed:  "+counter_rows_removed,t+="\nrenderedRows:  "+renderedRows,t+="\nnumVisibleRows:  "+numVisibleRows,t+="\nmaxSupportedCssHeight:  "+maxSupportedCssHeight,t+="\nn(umber of pages):  "+n,t+="\n(current) page:  "+page,t+="\npage height (ph):  "+ph,t+="\nscrollDir:  "+scrollDir,alert(t)},this.eval=function(expr){return eval(expr)},init(),$.extend(this,{slickGridVersion:"1.4.3",onSort:null,onHeaderContextMenu:null,onClick:null,onDblClick:null,onContextMenu:null,onKeyDown:null,onAddNewRow:null,onValidationError:null,onViewportChanged:null,onSelectedRowsChanged:null,onColumnsReordered:null,onColumnsResized:null,onBeforeMoveRows:null,onMoveRows:null,onCellChange:null,onBeforeEditCell:null,onBeforeCellEditorDestroy:null,onBeforeDestroy:null,onCurrentCellChanged:null,onCurrentCellPositionChanged:null,onCellRangeSelected:null,getColumns:getColumns,setColumns:setColumns,getOptions:getOptions,setOptions:setOptions,getData:getData,setData:setData,destroy:destroy,getColumnIndex:getColumnIndex,autosizeColumns:autosizeColumns,updateCell:updateCell,updateRow:updateRow,removeRow:removeRow,removeRows:removeRows,removeAllRows:removeAllRows,render:render,invalidate:invalidate,setHighlightedCells:setHighlightedCells,flashCell:flashCell,getViewport:getVisibleRange,resizeCanvas:resizeCanvas,updateRowCount:updateRowCount,getCellFromPoint:getCellFromPoint,getCellFromEvent:getCellFromEvent,getCurrentCell:getCurrentCell,getCurrentCellNode:getCurrentCellNode,resetCurrentCell:resetCurrentCell,navigatePrev:navigatePrev,navigateNext:navigateNext,navigateUp:navigateUp,navigateDown:navigateDown,navigateLeft:navigateLeft,navigateRight:navigateRight,gotoCell:gotoCell,editCurrentCell:makeSelectedCellEditable,getCellEditor:getCellEditor,scrollRowIntoView:scrollRowIntoView,getSelectedRows:getSelectedRows,setSelectedRows:setSelectedRows,getSecondaryHeaderRow:getSecondaryHeaderRow,getSecondaryHeaderRowEx:getSecondaryHeaderRowEx,getsecondaryHeaderScroller:getsecondaryHeaderScroller,showSecondaryHeaderRow:showSecondaryHeaderRow,hideSecondaryHeaderRow:hideSecondaryHeaderRow,setSortColumn:setSortColumn,getCurrentCellPosition:getCurrentCellPosition,getGridPosition:getGridPosition,renderNow:renderNow,setUsingIScroll:setUsingIScroll,selectRange:selectRange,setFooterRowVisibility:setFooterRowVisibility,updateFooterRowOneCell:updateFooterRowOneCell,updateFooterRowAllCells:updateFooterRowAllCells,commitEditAndSetFocus:commitEditAndSetFocus,getEditController:getEditController})}$.extend(!0,window,{Slick:{Grid:SlickGrid,EditorLock:EditorLock,GlobalEditorLock:new EditorLock}})})(jQuery);var __nextSlickID=1},1458:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_symbol__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2526),core_js_modules_es_symbol__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_symbol__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2222),core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(7327),core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(9554),core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(2772),core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(5003),core_js_modules_es_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(9337),core_js_modules_es_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_object_keys__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(7941),core_js_modules_es_object_keys__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_object_keys__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(5306),core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(3123),core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(4747),core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_10__),_core_omn_theme__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(5304),_ctl_base__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(6353),_core_omnis__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(6798),_objectSpread2;function ownKeys(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(i),!0).forEach((function(e){_defineProperty(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function _defineProperty(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}ctrl_nlist.prototype=new _ctl_base__WEBPACK_IMPORTED_MODULE_12__.U2,ctrl_nlist.prototype.eNativeListProperties={rowdisplaystyle:"$rowdisplaystyle",imageheight:"$imageheight",imagewidth:"$imagewidth",dividercolor:"$dividercolor",lineheight:"$lineheight",rowcolor:"$rowcolor",rowalpha:"$rowalpha",selectedrowcolor:"$selectedrowcolor",selectedrowalpha:"$selectedrowalpha",buffersize:"$buffersize",groupheight:"$groupheight",groupcolor:"$groupcolor",groupalpha:"$groupalpha",grouptextcolor:"$grouptextcolor",grouptextfont:"$grouptextfont",grouptextsize:"$grouptextsize",grouptextstyle:"$grouptextstyle",text1color:"$text1color",text1selectedcolor:"$text1selectedcolor",text1size:"$text1size",text1style:"$text1style",text1font:"$text1font",text2color:"$text2color",text2selectedcolor:"$text2selectedcolor",text2size:"$text2size",text2style:"$text2style",text2font:"$text2font",buttoncolor:"$buttoncolor",buttonalpha:"$buttonalpha",buttonbordercolor:"$buttonbordercolor",buttonpressedcolor:"$buttonpressedcolor",buttonpressedalpha:"$buttonpressedalpha",buttontextcolor:"$buttontextcolor",buttontextfont:"$buttontextfont",buttontextsize:"$buttontextsize",buttontextstyle:"$buttontextstyle",text1col:"$text1col",text2col:"$text2col",imagecol:"$imagecol",accessorytypecol:"$accessorytypecol",accessorycontentcol:"$accessorycontentcol",accessoryvaluecol:"$accessoryvaluecol"},ctrl_nlist.prototype.eAccessories={DISCLOSURE:1,CHECKBOX:2,BUTTON:3,CUSTOM:4,CUSTOM_WITH_EVENT:5},ctrl_nlist.prototype.eDisplayStyle={TEXTVERT:0,TEXTHORZ:1},ctrl_nlist.prototype.eComponentParts={ROW:1,ACCESSORY:2},ctrl_nlist.prototype.rowObj=function(t,e,i,s){this.id=t,this.top=e,this.height=i,this.data=s};var DefaultColorKeys=_objectSpread(_objectSpread({},_ctl_base__WEBPACK_IMPORTED_MODULE_12__.Mr),{},{ROW:"ROW",ROW_SELECTED:"ROW_SELECTED",GROUP_HEADING:"GROUP_HEADING",GROUP_HEADING_ANDROID:"GROUP_HEADING_ANDROID",DIVIDER:"DIVIDER",BUTTON:"BUTTON",BUTTON_BORDER:"BUTTON_BORDER",TEXT:"TEXT"});function ctrl_nlist(){this.init_class_inst()}function getCheckboxIconString(t,e){var i=e?"on":"off",s="images/native/".concat(t,"/checkbox_").concat(i,".png;");return t===_core_omnis__WEBPACK_IMPORTED_MODULE_13__.Km[1]&&(s+="checkbox_".concat(i,"_15x.png;")),s+="checkbox_".concat(i,"_2x.png;")}ctrl_nlist.prototype.DefaultColors=_objectSpread(_objectSpread({},_ctl_base__WEBPACK_IMPORTED_MODULE_12__.U2.prototype.DefaultColors),{},(_objectSpread2={},_defineProperty(_objectSpread2,DefaultColorKeys.ROW,_core_omn_theme__WEBPACK_IMPORTED_MODULE_11__.l1.background),_defineProperty(_objectSpread2,DefaultColorKeys.ROW_SELECTED,_core_omn_theme__WEBPACK_IMPORTED_MODULE_11__.l1.primary),_defineProperty(_objectSpread2,DefaultColorKeys.GROUP_HEADING,_core_omn_theme__WEBPACK_IMPORTED_MODULE_11__.l1.neutral),_defineProperty(_objectSpread2,DefaultColorKeys.GROUP_HEADING_ANDROID,_core_omn_theme__WEBPACK_IMPORTED_MODULE_11__.l1.background),_defineProperty(_objectSpread2,DefaultColorKeys.DIVIDER,_core_omn_theme__WEBPACK_IMPORTED_MODULE_11__.l1.border),_defineProperty(_objectSpread2,DefaultColorKeys.BUTTON,_core_omn_theme__WEBPACK_IMPORTED_MODULE_11__.l1.neutral),_defineProperty(_objectSpread2,DefaultColorKeys.BUTTON_BORDER,_core_omn_theme__WEBPACK_IMPORTED_MODULE_11__.l1.border),_defineProperty(_objectSpread2,DefaultColorKeys.TEXT,_core_omn_theme__WEBPACK_IMPORTED_MODULE_11__.l1.backgroundText),_objectSpread2)),ctrl_nlist.prototype.eMovementKey={ArrowUp:!0,ArrowDown:!0,ArrowRight:!0,PageUp:!0,PageDown:!0,Home:!0,End:!0},ctrl_nlist.prototype.mAcceptsReturn=!0,ctrl_nlist.prototype.init_class_inst=function(){this.superclass=_ctl_base__WEBPACK_IMPORTED_MODULE_12__.U2.prototype,this.superclass.init_class_inst.call(this),this.value=0,this.listHeight=0,this.usesNotActiveOverlay=!0,this.activeReplacesEnabled=!0,this.mCanHaveDesignBorder=0!=jOmnis.mDesign,this.showDesignName=this.showDesignNameBackground=!0,this.mFocusStyle=eBaseFocusStyle.eWithin},ctrl_nlist.prototype.baseClassName="omnis-nativelist",ctrl_nlist.prototype.init_ctrl_inst=function(t,e,i,s){this.superclass.init_ctrl_inst.call(this,t,e,i,s),jOmnis.mDesign&&(this.dataName=jOmnis.mDesignTempList),this.form.inst.registerPropertyObject(this);var r=this.getClientElem();this.theList=this.getData(),this.curLine=0,_core_omnis__WEBPACK_IMPORTED_MODULE_13__.Km.indexOf(jOmnis.platformName)>-1?this.displayPlatform=jOmnis.platformName:this.displayPlatform=this.form.defaultAppearance,"WP8"==this.displayPlatform&&(this.displayPlatform="iOS"),this.label1Col=jOmnis.parseInteger(r.getAttribute("data-coltext1"))-1,this.label2Col=jOmnis.parseInteger(r.getAttribute("data-coltext2"))-1,this.iconCol=jOmnis.parseInteger(r.getAttribute("data-colimage"))-1,this.accessoryTypeCol=jOmnis.parseInteger(r.getAttribute("data-colactype"))-1,this.accessoryValCol=jOmnis.parseInteger(r.getAttribute("data-colacval"))-1,this.accessoryContentCol=jOmnis.parseInteger(r.getAttribute("data-colaccont"))-1,this.grouped=!1,this.layout=r.getAttribute("data-dispstyle"),this.layout=null==this.layout?this.eDisplayStyle.TEXTVERT:parseInt(this.layout),this.lineHeight=jOmnis.parseInteger(r.getAttribute("data-lineheight")),this.groupHeight=jOmnis.parseInteger(r.getAttribute("data-groupheight")),this.bufferRows=jOmnis.parseInteger(r.getAttribute("data-buffer")),this.scrollBuffer=this.lineHeight*this.bufferRows,this.setProperty(eBaseProperties.keyboardchangesline,r.getAttribute("data-changeline")),this.rowColor=+r.getAttribute("data-rowcolor"),this.rowAlpha=+r.getAttribute("data-rowalpha"),this.rowSelColor=+r.getAttribute("data-rowselcolor"),this.rowSelAlpha=+r.getAttribute("data-rowselalpha"),this.groupColor=+r.getAttribute("data-groupcolor"),this.groupAlpha=+r.getAttribute("data-groupalpha"),this.dividerColor=+r.getAttribute("data-dividercolor"),this.text1Font=r.getAttribute("data-text1font"),this.text1Size=parseInt(r.getAttribute("data-text1size")),this.text1Style=parseInt(r.getAttribute("data-text1style")),this.text1Color=+r.getAttribute("data-text1color"),this.text1SelColor=+r.getAttribute("data-text1selcolor"),this.text2Font=r.getAttribute("data-text2font"),this.text2Size=parseInt(r.getAttribute("data-text2size")),this.text2Style=parseInt(r.getAttribute("data-text2style")),this.text2Color=+r.getAttribute("data-text2color"),this.text2SelColor=+r.getAttribute("data-text2selcolor"),this.groupTextFont=r.getAttribute("data-grouptextfont"),this.groupTextSize=parseInt(r.getAttribute("data-grouptextsize")),this.groupTextStyle=parseInt(r.getAttribute("data-grouptextstyle")),this.groupTextColor=+r.getAttribute("data-grouptextcolor"),this.buttonColor=+r.getAttribute("data-btncolor"),this.buttonAlpha=+r.getAttribute("data-btnalpha"),this.buttonBorderColor=+r.getAttribute("data-btnbordercolor"),this.buttonPressedColor=+r.getAttribute("data-btnpressedcolor"),this.buttonPressedAlpha=+r.getAttribute("data-btnpressedalpha"),this.buttonTextFont=r.getAttribute("data-btntextfont"),this.buttonTextSize=parseInt(r.getAttribute("data-btntextsize")),this.buttonTextStyle=parseInt(r.getAttribute("data-btntextstyle")),this.buttonTextColor=+r.getAttribute("data-btntextcolor");var n=r.getAttribute("data-imgsize");this.imageWidth=parseInt(n.substr(0,n.indexOf("x"))),this.imageHeight=parseInt(n.substr(n.indexOf("x")+1)),this.scrollTop=0,this.lastTouch=0,r.style.overflow="auto",this.listView=document.createElement("div"),this.listView.className="nativeListBox "+this.displayPlatform,this.listView.style.height=r.style.height,r.appendChild(this.listView);var o={preventDefault:!0,mouseWheel:!0,tap:!0,scrollbars:!0};return Function.prototype.bind&&(o.fadeScrollbars=!0),o.shrinkScrollbars="clip",o.momentum=!0,o.deceleration=.001,o.bounce=!0,o.probeType=3,o.smoothReeling=!0,o.removeFocus=jOmnis.touchDevice,o.disableMouse=!1,this.iscroll=this.attachIScroll(r,o,!0),this.rebuildList(),jOmnis.registerStyleSheetObject(this),this.applyCurLine(),this.activeChanged(),r.addEventListener("keydown",this.handleEvent,!0),r.addEventListener("blur",this.handleEvent,!0),r.addEventListener("mouseenter",this.handleEvent,!0),r.addEventListener("mouseleave",this.handleEvent),r.setAttribute("role","grid"),this.sectionHeadingElem=document.createElement("div"),this.sectionHeadingElem.id=r.id+"_sectionheading",this.sectionHeadingElem.className="sr-only",r.appendChild(this.sectionHeadingElem),!1},ctrl_nlist.prototype.delete_class_inst=function(){jOmnis.unregisterStyleSheetObject(this),this.mStyleSheet&&jOmnis.removeStyleSheet(this.mStyleSheet),this.superclass.delete_class_inst.call(this)},ctrl_nlist.prototype.applyPropertyChanges=function(){(this.cssChangeRequired||void 0===this.cssChangeRequired)&&this.applyCustomCss(),this.rebuildRequired&&this.rebuildList(),this.cssChangeRequired=this.rebuildRequired=!1},ctrl_nlist.prototype.styleSheetsUpdated=function(){this.getTrueVisibility(this.elem)&&this.updateRowLayouts()},ctrl_nlist.prototype.rebuildList=function(){if(this.listView.innerHTML="",this.dataStruct=[],this.getTrueVisibility()){if(this.rebuildRequired&&(this.rebuildRequired=!1),this.theList){this.theList.__list&&this.theList.__list.getRowCount()>0&&(this.grouped=null!=this.theList.__list.getData(1,1).lstDef);for(var t=0,e=0;e<this.theList.lstData.length;e++)t=this.grouped?this.addListGroup(e+1,t,this.theList.lstData[e]):this.addListRow(e+1,e,t,this.theList);if(this.grouped){this.rowDataStruct=[],this.groupDataStruct=[];for(e=0;e<this.dataStruct.length;e++)-1!==this.dataStruct[e].id.indexOf(":")?this.rowDataStruct.push(this.dataStruct[e]):this.groupDataStruct.push(this.dataStruct[e])}else this.rowDataStruct=this.dataStruct;this.listView.style.height=t+"px",this.shownRows=[];var i=this.dataStruct.length?this.dataStruct[this.dataStruct.length-1].top:0,s=this.dataStruct.length?i+this.dataStruct[this.dataStruct.length-1].height-this.clientElem.clientHeight:0;s<0&&(s=0),this.scrollTop>s&&(this.scrollTop=s),this.showRows(this.scrollTop),this.iscroll.refresh(),this.setCurLine(this.keyboardChangesCurrentLine?this.curLine:this.curFocusLine,this.keyboardChangesCurrentLine),this.focusAfterRebuild&&(document.activeElement===this.clientElem&&this.clientElem.blur(),this.clientElem.focus(),this.focusAfterRebuild=!1)}}else this.rebuildRequired=!0},ctrl_nlist.prototype.updateCtrl=function(t,e,i,s){("#L"==t||"#LSEL"==t||""==t||s)&&(this.theList=this.getData(),this.theList.__list&&this.theList.__list.getRowCount()>0&&(this.grouped=null!=this.theList.__list.getData(1,1).lstDef),this.updateLine(!1),(""==t||s)&&(this.keyboardChangesCurrentLine||this.updateLine(!0),this.rebuildList()))},ctrl_nlist.prototype.reload=function(){this.theList=this.getData(),this.rebuildList()},ctrl_nlist.prototype.visibilityChanged=function(){var t=this.superclass.visibilityChanged.call(this),e=this.getTrueVisibility();t&&this.iscroll&&(e?this.iscroll.enable():this.iscroll.disable()),e&&t&&(this.rebuildRequired&&this.rebuildList(),this.mResizeOnceVisible?(this.mResizeOnceVisible=!1,this.updateAppearance()):this.iscroll.refresh())},ctrl_nlist.prototype.sizeChanged=function(){this.superclass.sizeChanged.call(this),this.getTrueVisibility(this.elem)?this.updateAppearance():this.mResizeOnceVisible=!0},ctrl_nlist.prototype.updateAppearance=function(){var t=this.getClientElem(),e=parseInt(t.style.height);e!=this.listHeight&&(this.listHeight=e,this.displayedRows=Math.floor(this.listHeight/this.lineHeight),this.showRows(this.scrollTop));var i=t.getBoundingClientRect().width;i!=this.rowWidth&&(this.rowWidth=i,this.updateRowLayouts()),this.iscroll.refresh()},ctrl_nlist.prototype.touchChangedPosition=function(t){if(Math.abs(this.scrollTop+t.y)>this.scrollBuffer/2){this.scrollTimeout&&clearTimeout(this.scrollTimeout);var e=this;this.scrollTimeout=setTimeout((function(){e.scrollTimeout=null,e.scrollTop=-t.y,e.showRows(e.scrollTop)}),0)}},ctrl_nlist.prototype.touchScrollEnded=function(t){Math.abs(this.scrollTop+t.y)>this.scrollBuffer/2&&(this.scrollTop=-t.y,this.showRows(this.scrollTop))},ctrl_nlist.prototype.handleEvent=function(t){var e=this.omnisObject||this;if(!e.elem.disabled){var i=e.clientElem;switch(t.type){case"tap":t.isArtificial||this.resetAccessoryAppearance();var s=this.getContainingRow(t.target);if(!s)return;t.stopPropagation(),s.className.indexOf("nativeListRow")>-1?this.rowClicked(s):this.accessoryClicked(s),i!==document.activeElement&&(this.preventScrollAfterTap=!0,i.focus(),this.preventScrollAfterTap=!1);break;case"keydown":var r=OmnisKeyboardHandler.getNormalizedEventKey(t);if(e.eMovementKey[r]){e.handleMovementKey(r);break}switch(r){case"ArrowLeft":e.resetAccessoryAppearance();break;case"Enter":case" ":var n=e.keyboardChangesCurrentLine?e.curLine:e.curFocusLine;if(n){var o=e.elem.getElementsByClassName("NLHiliteAccessory")[0]||e.getRowElement(n),a=jOmnis.hasClass(o,"selectedRow");jOmnis.sendDOMEvent(o,"tap",!0)}if("Enter"===r)if(n){if(a&&!e.canSendEvent(eBaseEvent.evClick)){e.getRowData(o.getAttribute("data-id")).data[e.accessoryTypeCol]!==e.eAccessories.CHECKBOX&&e.sendNextOk()}}else e.sendNextOk()}break;case"focus":if(e.preventScrollAfterTap||e.restoringFocus)break;if(!e.rowDataStruct||!e.rowDataStruct.length){e.focusAfterRebuild=!0;break}if(e.curLine)var l=e.curFocusLine=e.curLine;else l=e.curFocusLine=e.grouped?"g1:1":1;var h=e.getRowIndex(l),c=e.rowDataStruct[h];c&&!e.getRowElement(c.id)?e.showRows(c.top)&&e.iscroll.revealElement(e.getRowElement(c.id),1):e.keyboardChangesCurrentLine||e.setCurLine(l,!1);break;case"blur":e.resetAccessoryAppearance(),e.curGroup=0,e.focusAfterRebuild=!1;case"mouseleave":if(e.keyboardChangesCurrentLine)break;var u=e.getRowElement(e.curFocusLine);u&&(jOmnis.removeClass(u,"focusedRow"),e.curFocusLine=null);break;case"mouseenter":if(e.keyboardChangesCurrentLine||e.preventHover)break;if(jOmnis.hasClass(t.target,"nativeListRow")){var d=t.target.getAttribute("data-id");d&&d!==e.curFocusLine&&e.setCurLine(d,!1)}break;default:return this.superclass.handleEvent.call(this,t)}}},ctrl_nlist.prototype.handleMovementKey=function(t){var e=this.keyboardChangesCurrentLine?this.curLine:this.curFocusLine,i=this.getRowIndex(e),s=this.rowDataStruct;switch(t){case"ArrowDown":this.keyMovement(1,!0,!0,i);break;case"ArrowUp":this.keyMovement(-1,!0,!0,i);break;case"Home":if(0===i)break;this.keyMovement(0,!1,!1,i);break;case"End":if(i===s.length-1)break;this.keyMovement(s.length-1,!1,!1,i);break;case"PageUp":if(0===i)break;this.keyMovement(-this.displayedRows,!0,!1,i);break;case"PageDown":if(i===s.length-1)break;this.keyMovement(this.displayedRows,!0,!1,i);break;case"ArrowRight":if(null==i)return;var r=s[i].data[this.accessoryTypeCol];if(r===this.eAccessories.BUTTON||r===this.eAccessories.CUSTOM_WITH_EVENT){var n=this.getRowElement(e).getElementsByClassName("listAccessory")[0].firstChild;n&&(jOmnis.addClass(n,"NLHiliteAccessory"),this.clientElem.setAttribute("aria-activedescendant",this.getRow(e).id+"_accessory"))}else r===this.eAccessories.DISCLOSURE&&jOmnis.sendDOMEvent(this.getRowElement(e),"tap",!0)}},ctrl_nlist.prototype.keyMovement=function(t,e,i,s){this.keyboardChangesCurrentLine||this.setHoverTimeout();var r=this.rowDataStruct;if(0===(s=function(){if(null==s)var n=-1===t||!e&&t>0?r.length-1:0;else i&&e?n=t<0&&0===s?r.length-1:t>0&&s>=r.length-1?0:s+t:!i&&e?(n=s+t)<0?n=0:n>r.length-1&&(n=r.length-1):e||(n=t);return n}())||s===r.length-1)var n=s;else n=t<0?s-1:s+1;var o=r[s];this.getRowElement(o.id)||this.showRows(o.top),this.keyboardChangesCurrentLine&&o.data[this.accessoryTypeCol]!==this.eAccessories.CHECKBOX&&jOmnis.sendDOMEvent(this.getRowElement(o.id),"tap",!0),this.setCurLine(o.id,this.keyboardChangesCurrentLine),this.getRowElement(r[n].id)?this.iscroll.revealElement(this.getRowElement(r[n].id),1):this.iscroll.revealElement(this.getRowElement(o.id),1),this.resetAccessoryAppearance()},ctrl_nlist.prototype.resetAccessoryAppearance=function(t){if(t)jOmnis.removeClass(t,"NLHiliteAccessory");else for(var e=this.elem.getElementsByClassName("NLHiliteAccessory"),i=0;i<e.length;i++)jOmnis.removeClass(e[i],"NLHiliteAccessory");this.curLine&&this.getRowElement(this.curLine)&&this.clientElem.setAttribute("aria-activedescendant",this.getRowElement(this.curLine).id)},ctrl_nlist.prototype.updateCurGroup=function(t){this.curGroup=t,this.sectionHeadingElem.innerHTML=this.groupDataStruct[t-1].data},ctrl_nlist.prototype.accessoryClicked=function(t){var e=t.parentNode.getAttribute("data-id");this.sendClick(e,this.eComponentParts.ACCESSORY)},ctrl_nlist.prototype.rowClicked=function(t){var e=t.getAttribute("data-id"),i=this.getRowData(e);i.data[this.accessoryTypeCol]==this.eAccessories.CHECKBOX?this.toggleCheckbox(getElem(t,"data-function","accessory"),i,t):this.setCurLine(e,!0),this.sendClick(e,this.eComponentParts.ROW)},ctrl_nlist.prototype.toggleCheckbox=function(t,e){var i=!e.data[this.accessoryValCol];t.firstChild.src=i?jIcons.selectIcon(getCheckboxIconString(this.displayPlatform,!0)):jIcons.selectIcon(getCheckboxIconString(this.displayPlatform,!1)),e.data[this.accessoryValCol]=i;var s=[];this.grouped?s.push(e.id.split(":")[0].substr(1),1,e.id.split(":")[1],this.accessoryValCol+1):s.push(e.id,this.accessoryValCol+1),this.theList.setValue(null,s,i)},ctrl_nlist.prototype.getRowsInstanceList=function(t){if(this.grouped){var e=t.split(":"),i=parseInt(e[0].substr(1))-1;return this.theList.lstData[i][0]}return this.theList},ctrl_nlist.prototype.getRowInMainList=function(t){if(this.grouped){var e=t.split(":"),i=parseInt(e[0].substr(1))-1;return this.theList.lstData[i][0].lstData[parseInt(e[1])-1]}return this.theList.lstData[t-1]},ctrl_nlist.prototype.sendClick=function(t,e){if(this.canSendEvent(eBaseEvent.evClick)){if(this.grouped){var i=t.split(":");this.eventParamsAdd("pGroup",i[0].substr(1)),t=i[1]}this.pager&&this.pager.isAttached&&(t=this.pager.pagedRowToAbsoluteRow(+t)),this.eventParamsAdd("pRow",t),this.eventParamsAdd("pWhat",e),this.sendEvent(eBaseEvent.evClick)}},ctrl_nlist.prototype.findGroup=function(t){for(;!isGroup(this.dataStruct[t]);)t--;return this.dataStruct[t]},ctrl_nlist.prototype.getRowElement=function(t){return this.getClientElem().querySelector("[data-id='"+t+"']")};var touchWithinRange=function(t,e,i){return!(Math.abs(t.x-e.clientX)>i)&&Math.abs(t.y-e.clientY)<=i};ctrl_nlist.prototype.addListGroup=function(t,e,i){var s="g"+t;this.dataStruct.push(new this.rowObj(s,e,this.groupHeight,i[1]));for(var r=e+this.groupHeight,n=0;n<i[0].lstData.length;n++){var o=s+":"+(n+1);r=this.addListRow(o,n,r,i[0])}return r},ctrl_nlist.prototype.addListRow=function(t,e,i,s){return this.dataStruct.push(new this.rowObj(t,i,this.lineHeight,s.lstData[e])),i+this.lineHeight},ctrl_nlist.prototype.showRows=function(t){var e=!1;if(0==this.dataStruct.length)return e;var i=this.shownRows;this.shownRows=[];var s=this.findTopRow(t),r=this.dataStruct[s];if(this.listHeight)for(e=!0;r&&r.top<t+this.scrollBuffer+this.listHeight;){var n=i.indexOf(r.id);n>-1?(this.shownRows.push(r.id),i[n]=-1):(isGroup(r)?this.createGroupHeading(r):this.createListRow(r),this.shownRows.push(r.id)),r=this.dataStruct[++s]}return this.setCurLine(this.curLine,!0),this.keyboardChangesCurrentLine||this.setCurLine(this.curFocusLine,!1),this.destroyRows(i),e},ctrl_nlist.prototype.destroyRows=function(t){for(var e=0;e<t.length;e++)if(-1!=t[e]){var i=getElem(this.listView,"data-id",t[e]);i.parentElement.removeChild(i)}},ctrl_nlist.prototype.findTopRow=function(t){(t-=this.scrollBuffer)<0&&(t=0);var e=parseInt(t/this.lineHeight),i=this.dataStruct[e],s=function(){return i.top<=t&&i.top+i.height>=t};if(s())return e;if(i.top+i.height<t){for(;!s();)i=this.dataStruct[++e];return e}for(;!s();)i=this.dataStruct[--e];return e};var isGroup=function(t){return"string"==typeof t.data};ctrl_nlist.prototype.getUniqueID=function(t){return this.clientElem.id+"_"+t},ctrl_nlist.prototype.createGroupHeading=function(t){var e=document.createElement("div");e.className="groupHeading "+this.displayPlatform,e.style.height=t.height+"px";var i=document.createElement("p");i.textContent=t.data,e.appendChild(i),e.style.top=t.top+"px",e.setAttribute("data-id",t.id),e.id=this.getUniqueID(t.id),this.listView.appendChild(e)},ctrl_nlist.prototype.createListRow=function(t){var e=document.createElement("div");e.className="nativeListRow",e.style.height=this.lineHeight+"px",e.style.top=t.top+"px",e.setAttribute("data-id",t.id),e.setAttribute("data-clickable",!0),e.id=this.getUniqueID(t.id),e.setAttribute("role","row");var i=0,s=this.rowWidth-10;if(this.listView.appendChild(e),this.iconCol>-1&&t.data[this.iconCol]){i+=10;var r=document.createElement("img");r.setAttribute("role","none"),r.setAttribute("alt",""),r.style.width=this.imageWidth+"px",r.style.height=this.imageHeight+"px",r.style.top=(this.lineHeight-this.imageHeight)/2+"px",r.style.left=i+"px",r.src=jIcons.selectIcon(t.data[this.iconCol]),e.appendChild(r),i+=this.imageWidth}if(this.accessoryTypeCol>-1&&t.data[this.accessoryTypeCol]>0){var n=document.createElement("div");switch(n.className="listAccessory",n.setAttribute("data-function","accessory"),n.id=e.id+"_accessory",n.style.height=e.style.height,n.setAttribute("role","gridcell"),n.setAttribute("aria-readonly","true"),e.appendChild(n),parseInt(t.data[this.accessoryTypeCol])){case this.eAccessories.DISCLOSURE:this.createDisclosure(n,e);break;case this.eAccessories.CHECKBOX:this.createCheckBox(n,t.data[this.accessoryValCol],e);break;case this.eAccessories.BUTTON:this.createButton(n,t.data[this.accessoryContentCol],e.id);break;case this.eAccessories.CUSTOM:this.createCustom(n,t.data[this.accessoryContentCol],!1);break;case this.eAccessories.CUSTOM_WITH_EVENT:this.createCustom(n,t.data[this.accessoryContentCol],!0)}s=this.positionAccessory(n)}var o=document.createElement("div");if(o.setAttribute("role","gridcell"),o.setAttribute("aria-readonly","true"),o.setAttribute("data-function","text-container"),e.appendChild(o),this.label1Col>-1){i+=10,s-=10;var a=document.createElement("p");a.id=e.id+"_text1",a.className="text1",a.textContent=t.data[this.label1Col],a.style.left=i+"px",a.style.top="0",a.style.lineHeight=this.lineHeight+"px",a.style.fontSize=this.text1Size+"pt",a.style.textOverflow="ellipsis",a.setAttribute("data-function","text1"),o.appendChild(a),e.setAttribute("aria-labelledby",a.id)}if(this.label2Col>-1){var l=document.createElement("p");if(l.id=e.id+"_text2",l.className="text2",l.textContent=t.data[this.label2Col],l.style.fontSize=this.text2Size+"pt",l.style.left=i+"px",l.style.textOverflow="ellipsis",l.setAttribute("data-function","text2"),a&&this.layout==this.eDisplayStyle.TEXTVERT){var h=this.text1Size/(this.text1Size+this.text2Size);a.style.height=a.style.lineHeight=h*this.lineHeight+"px",a.style.width=s-i+"px",l.style.top=a.style.height,l.style.lineHeight=(1-h)*this.lineHeight+"px",l.style.width=s-i+"px"}else a&&this.layout!=this.eDisplayStyle.TEXTHORZ||(l.style.lineHeight=this.lineHeight+"px",l.style.top="0");o.appendChild(l),e.setAttribute("aria-describedby",l.id)}this.positionText(a,l)},ctrl_nlist.prototype.positionAccessory=function(t){var e=t.firstChild;e.className.indexOf("nativeListButton")>=0&&(e.style.width=e.firstChild.offsetWidth+"px");var i=e.offsetWidth,s=t.parentNode.offsetWidth,r=s-i-10;t.style.left=r+"px";var n=s-r;return t.style.width=n+"px",e.style.top=(this.lineHeight-e.offsetHeight)/2+"px",e.style.left=(n-i)/2+"px",r},ctrl_nlist.prototype.positionText=function(t,e){if(t||e){t&&(t.style.width="auto"),e&&(e.style.width="auto");var i=t?t.offsetLeft:e.offsetLeft,s=t?t.getBoundingClientRect().width:0,r=e?e.getBoundingClientRect().width:0,n=i,o=t?t.parentElement.parentElement:e.parentElement.parentElement,a=getElem(o,"data-function","accessory"),l=a?parseInt(a.firstChild.style.width)+20:10,h=this.rowWidth-i-l;if(t?(!e||s>h)&&(s=h):r=h,this.layout===this.eDisplayStyle.TEXTHORZ&&e){var c=h-s-(s?10:0);n=i+(h-(r=c>0?Math.min(r,c):0))}else n=i,r>h&&(r=h);t&&(t.style.left=i+"px",t.style.width=s+"px"),e&&(e.style.left=n+"px",e.style.width=r+"px")}},ctrl_nlist.prototype.updateRowLayouts=function(){if(this.shownRows)for(var t=0;t<this.shownRows.length;t++)this.updateRowLayout(this.getRow(this.shownRows[t]),this.shownRows[t])},ctrl_nlist.prototype.updateRowLayout=function(t,e){var i=this.getRowData(e);if(!isGroup(i)){var s=getElem(t,"data-function","accessory");s&&this.positionAccessory(s);var r=t.querySelector("p[data-function=text1]"),n=t.querySelector("p[data-function=text2]");this.positionText(r,n)}},ctrl_nlist.prototype.getRowData=function(t){for(var e=0;e<this.dataStruct.length;e++)if(this.dataStruct[e].id==t)return this.dataStruct[e]},ctrl_nlist.prototype.createDisclosure=function(t,e){var i=document.createElement("img");i.className="listDisclosure",i.style.width="16px",i.style.height="14px",i.src=jIcons.selectIcon("images/native/iOS/disclosure.png;disclosure_2x.png;disclosure_2x.png;"),i.setAttribute("role","none"),i.alt="",t.appendChild(i),e.setAttribute("aria-expanded","false")},ctrl_nlist.prototype.createCheckBox=function(t,e,i){var s=document.createElement("img");s.src=e?jIcons.selectIcon(getCheckboxIconString(this.displayPlatform,!0)):jIcons.selectIcon(getCheckboxIconString(this.displayPlatform,!1)),s.style.width=s.style.height="32px",s.setAttribute("role","none"),s.alt="",jOmnis.addClass(s,"NLTick"),t.appendChild(s),i.setAttribute("aria-checked",e?"true":"false")},ctrl_nlist.prototype.createButton=function(t,e,i){var s=document.createElement("div");t.setAttribute("data-clickable",!0),s.className="nativeListButton",s.setAttribute("role","button");var r=document.createElement("p");r.id=i+"_accessory_text",s.setAttribute("aria-labelledby",r.id),r.innerHTML=e,t.appendChild(s),s.appendChild(r),s.style.width=r.offsetWidth+"px",r.style.top=(s.offsetHeight-r.offsetHeight)/2+"px",r.style.left=(s.offsetWidth-r.offsetWidth)/2+"px"},ctrl_nlist.prototype.createCustom=function(t,e,i){e||(e="<div />"),t.innerHTML=e;var s=t.firstChild;""==s.style.width&&(s.style.width="32px"),""==s.style.height&&(s.style.height=t.parentNode.style.height),i&&(t.setAttribute("data-clickable",!0),jOmnis.addClass(t,"NLClickable"),t.tabIndex="-1")},ctrl_nlist.prototype.getProperty=function(t){switch(t){case eBaseProperties.pagesize:if(this.grouped)return 0;break;case this.eNativeListProperties.lineheight:return this.lineHeight;case this.eNativeListProperties.text1col:return this.label1Col+1;case this.eNativeListProperties.text2col:return this.label2Col+1;case this.eNativeListProperties.imagecol:return this.iconCol+1;case this.eNativeListProperties.accessorytypecol:return this.accessoryTypeCol+1;case this.eNativeListProperties.accessorycontentcol:return this.accessoryContentCol+1;case this.eNativeListProperties.accessoryvaluecol:return this.accessoryValCol+1;case this.eNativeListProperties.rowdisplaystyle:return this.layout;case this.eNativeListProperties.imageheight:return this.imageHeight;case this.eNativeListProperties.imagewidth:return this.imageWidth;case this.eNativeListProperties.buffersize:return this.bufferRows;case this.eNativeListProperties.dividercolor:return this.dividerColor;case this.eNativeListProperties.rowcolor:return this.rowColor;case this.eNativeListProperties.rowalpha:return this.rowAlpha;case this.eNativeListProperties.selectedrowcolor:return this.rowSelColor;case this.eNativeListProperties.selectedrowalpha:return this.rowSelAlpha;case this.eNativeListProperties.groupheight:return this.groupHeight;case this.eNativeListProperties.groupcolor:return this.groupColor;case this.eNativeListProperties.groupalpha:return this.groupAlpha;case this.eNativeListProperties.grouptextcolor:return this.groupTextColor;case this.eNativeListProperties.grouptextfont:return this.groupTextFont;case this.eNativeListProperties.grouptextsize:return this.groupTextSize;case this.eNativeListProperties.grouptextstyle:return this.groupTextStyle;case this.eNativeListProperties.text1color:return this.text1Color;case this.eNativeListProperties.text2color:return this.text2Color;case this.eNativeListProperties.text1selectedcolor:return this.text1SelColor;case this.eNativeListProperties.text2selectedcolor:return this.text2SelColor;case this.eNativeListProperties.text1size:return this.text1Size;case this.eNativeListProperties.text2size:return this.text2Size;case this.eNativeListProperties.text1style:return this.text1Style;case this.eNativeListProperties.text2style:return this.text2Style;case this.eNativeListProperties.text1font:return this.text1Font;case this.eNativeListProperties.text2font:return this.text2Font;case this.eNativeListProperties.buttoncolor:return this.buttonColor;case this.eNativeListProperties.buttonalpha:return this.buttonAlpha;case this.eNativeListProperties.buttonpressedcolor:return this.buttonPressedColor;case this.eNativeListProperties.buttonpressedalpha:return this.buttonPressedAlpha;case this.eNativeListProperties.buttonbordercolor:return this.buttonBorderColor;case this.eNativeListProperties.buttontextcolor:return this.buttonTextColor;case this.eNativeListProperties.buttontextfont:return this.buttonTextFont;case this.eNativeListProperties.buttontextsize:return this.buttonTextSize;case this.eNativeListProperties.buttontextstyle:return this.buttonTextStyle;case eBaseProperties.keyboardchangesline:return this.keyboardChangesCurrentLine}return this.superclass.getProperty.call(this,t)},ctrl_nlist.prototype.getCanAssign=function(t){if("string"==typeof t&&0==t.indexOf("$")){var e=t.substr(1);if(this.eNativeListProperties[e])return!0}switch(t){case eBaseProperties.pagesize:case eBaseProperties.keyboardchangesline:return!0}return this.superclass.getCanAssign.call(this,t)},ctrl_nlist.prototype.setProperty=function(t,e){if(!this.getCanAssign(t))return!1;switch(t){case this.eNativeListProperties.text1col:this.label1Col=1*e-1,this.rebuildRequired=!0;break;case this.eNativeListProperties.text2col:this.label2Col=1*e-1,this.rebuildRequired=!0;break;case this.eNativeListProperties.imagecol:this.iconCol=1*e-1,this.rebuildRequired=!0;break;case this.eNativeListProperties.accessorytypecol:this.accessoryTypeCol=1*e-1,this.rebuildRequired=!0;break;case this.eNativeListProperties.accessorycontentcol:this.accessoryContentCol=1*e-1,this.rebuildRequired=!0;break;case this.eNativeListProperties.accessoryvaluecol:this.accessoryValCol=1*e-1,this.rebuildRequired=!0;break;case this.eNativeListProperties.lineheight:this.lineHeight=1*e,this.scrollBuffer=this.lineHeight*this.bufferRows,this.rebuildRequired=!0;break;case this.eNativeListProperties.buffersize:this.bufferRows=+e>0?+e:0,this.scrollBuffer=this.lineHeight*this.bufferRows,this.rebuildRequired=!0;break;case this.eNativeListProperties.rowdisplaystyle:this.layout=1*e,this.rebuildRequired=!0;break;case this.eNativeListProperties.imageheight:this.imageHeight=1*e,this.rebuildRequired=!0;break;case this.eNativeListProperties.imagewidth:this.imageWidth=1*e,this.rebuildRequired=!0;break;case this.eNativeListProperties.dividercolor:this.dividerColor=+e,this.cssChangeRequired=!0;break;case this.eNativeListProperties.rowcolor:this.rowColor=+e,this.cssChangeRequired=!0;break;case this.eNativeListProperties.rowalpha:this.rowAlpha=+e,this.cssChangeRequired=!0;break;case this.eNativeListProperties.selectedrowcolor:this.rowSelColor=+e,this.cssChangeRequired=!0;break;case this.eNativeListProperties.selectedrowalpha:this.rowSelAlpha=+e,this.cssChangeRequired=!0;break;case this.eNativeListProperties.groupheight:this.groupHeight=1*e,this.rebuildRequired=!0;break;case this.eNativeListProperties.groupcolor:this.groupColor=+e,this.cssChangeRequired=!0;break;case this.eNativeListProperties.groupalpha:this.groupAlpha=+e,this.cssChangeRequired=!0;break;case this.eNativeListProperties.grouptextcolor:this.groupTextColor=+e,this.cssChangeRequired=!0;break;case this.eNativeListProperties.grouptextfont:this.groupTextFont=e,this.cssChangeRequired=!0;break;case this.eNativeListProperties.grouptextsize:this.groupTextSize=1*e,this.cssChangeRequired=!0;break;case this.eNativeListProperties.grouptextstyle:this.groupTextStyle=e,this.cssChangeRequired=!0;break;case this.eNativeListProperties.text1color:this.text1Color=+e,this.cssChangeRequired=!0;break;case this.eNativeListProperties.text2color:this.text2Color=+e,this.cssChangeRequired=!0;break;case this.eNativeListProperties.text1selectedcolor:this.text1SelColor=+e,this.cssChangeRequired=!0;break;case this.eNativeListProperties.text2selectedcolor:this.text2SelColor=+e,this.cssChangeRequired=!0;break;case this.eNativeListProperties.text1size:this.text1Size=1*e,this.cssChangeRequired=!0;break;case this.eNativeListProperties.text2size:this.text2Size=1*e,this.cssChangeRequired=!0;break;case this.eNativeListProperties.text1style:this.text1Style=1*e,this.cssChangeRequired=!0;break;case this.eNativeListProperties.text2style:this.text2Style=1*e,this.cssChangeRequired=!0;break;case this.eNativeListProperties.text1font:this.text1Font=e,this.cssChangeRequired=!0;break;case this.eNativeListProperties.text2font:this.text2Font=e,this.cssChangeRequired=!0;break;case this.eNativeListProperties.buttoncolor:this.buttonColor=+e,this.cssChangeRequired=!0;break;case this.eNativeListProperties.buttonalpha:this.buttonAlpha=+e,this.cssChangeRequired=!0;break;case this.eNativeListProperties.buttonpressedcolor:this.buttonPressedColor=+e,this.cssChangeRequired=!0;break;case this.eNativeListProperties.buttonpressedalpha:this.buttonPressedAlpha=+e,this.cssChangeRequired=!0;break;case this.eNativeListProperties.buttonbordercolor:this.buttonBorderColor=+e,this.cssChangeRequired=!0;break;case this.eNativeListProperties.buttontextcolor:this.buttonTextColor=+e,this.cssChangeRequired=!0;break;case this.eNativeListProperties.buttontextfont:this.buttonTextFont=e,this.cssChangeRequired=!0;break;case this.eNativeListProperties.buttontextsize:this.buttonTextSize=1*e,this.cssChangeRequired=!0;break;case this.eNativeListProperties.buttontextstyle:this.buttonTextStyle=1*e,this.cssChangeRequired=!0;break;case eBaseProperties.keyboardchangesline:this.keyboardChangesCurrentLine=1*e!=0;break;default:return this.superclass.setProperty.call(this,t,e)}return this.form.inst.registerPropertyObject(this),!0},ctrl_nlist.prototype.assignValue=function(theValue){eval("this.update"+this.displayPlatform+"SwitchButton(theValue, true)"),this.value!=theValue&&(this.dataName&&this.setData(theValue),this.value=theValue,this.canSendEvent(eBaseEvent.evClick)&&(this.eventParamsAdd("pNewVal",theValue),this.sendEvent(eBaseEvent.evClick)))},ctrl_nlist.prototype.getRow=function(t){return getElem(this.listView,"data-id",t)};var getElem=function(t,e,i){for(var s=t.children,r=0;r<s.length;r++)if(s[r].getAttribute(e)==i)return s[r]};ctrl_nlist.prototype.addClickHandlers=function(t){this.usesTouch?(t.ontouchstart=this.mEventFunction,t.ontouchend=this.mEventFunction):t.onclick=this.mEventFunction},ctrl_nlist.prototype.updateLine=function(t){var e=t?"curFocusLine":"curLine";try{var i=this.getData("#L");if(t&&i<1&&(i=1),this.grouped){var s=this.theList.lstData[i-1][0].lstL;t&&s<1&&(s=1),this[e]="g"+i+":"+s}else this[e]=i}catch(t){this[e]=0}},ctrl_nlist.prototype.applyCurLine=function(){var t=0;this.theList&&(t=this.theList.lstL),this.grouped&&t>0&&(t="g"+t+":"+this.theList.lstData[t-1][0].lstL),this.setCurLine(t,!0)},ctrl_nlist.prototype.setCurLine=function(t,e){this.grouped||"string"!=typeof t||(t=+t);var i=e?this.curLine:this.curFocusLine,s=this.getRowElement(i);if(s&&jOmnis.removeClass(s,e?"selectedRow":"focusedRow"),t){if(e?this.curLine=t:this.curFocusLine=t,this.grouped)var r=parseInt(t.substr(1,t.indexOf(":")-1)),n=t.substr(t.indexOf(":")+1);this.grouped&&e?(this.setData(r,"#L",null,null,null,null,!1,!0),this.setData(parseInt(n),"#NCELL",[r,1,"#L"],null,null,null,!1,!0)):e&&this.setData(parseInt(t),"#L");var o=this.getRowElement(t);if(o&&(jOmnis.addClass(o,e?"selectedRow":"focusedRow"),this.clientElem.setAttribute("aria-activedescendant",o.id),r))if(r!==this.curGroup){this.updateCurGroup(r);var a=o.getAttribute("aria-labelledby");a=a.replace(this.sectionHeadingElem.id+" ",""),o.setAttribute("aria-labelledby",this.sectionHeadingElem.id+" "+a)}else a=(a=o.getAttribute("aria-labelledby")).replace(this.sectionHeadingElem.id+" ",""),o.setAttribute("aria-labelledby",a);if(e&&this.theList.lstData.length>0&&this.accessoryTypeCol>0&&"blackberry"!==this.displayPlatform){if(s){var l=this.grouped?parseInt(i.substr(1,i.indexOf(":")-1)):null,h=this.grouped?parseInt(i.substr(i.indexOf(":")+1)):i,c=this.grouped?this.theList.lstData[l-1][0].lstData[h-1][this.accessoryTypeCol]:this.theList.lstData[h-1][this.accessoryTypeCol];if(c===this.eAccessories.CHECKBOX){var u=s.getElementsByClassName("NLTickColorChange")[0];u&&jOmnis.removeClass(u,"NLTickColorChange")}}-1!==t&&n>0&&(c=this.grouped?this.theList.lstData[r-1][0].lstData[n-1][this.accessoryTypeCol]:this.theList.lstData[t-1][this.accessoryTypeCol])===this.eAccessories.CHECKBOX&&(u=o.getElementsByClassName("NLTick")[0])&&jOmnis.addClass(u,"NLTickColorChange")}}},ctrl_nlist.prototype.getContainingRow=function(t){for(;!t.getAttribute("data-clickable");){if(t===this.getClientElem())return null;t=t.parentNode}return t},ctrl_nlist.prototype.setHoverTimeout=function(){this.preventHover=!0;var t=this;this.hoverTimer&&clearTimeout(this.hoverTimer),this.hoverTimer=setTimeout((function(){t.preventHover=!1,t.hoverTimer=null}),200)},ctrl_nlist.prototype.getRowIndex=function(t){for(var e=this.rowDataStruct,i=0;i<e.length;i++)if(t===e[i].id)return i;return null},ctrl_nlist.prototype.applyCustomCss=function(){var t=this.setRowCss()+this.setGroupCss()+this.setText1Css()+this.setText2Css()+this.setButtonCss();this.mStyleSheet&&jOmnis.removeStyleSheet(this.mStyleSheet),this.mStyleSheet=jOmnis.addStyleSheet(t)},ctrl_nlist.prototype.complexGridRerendered=function(){this.applyCustomCss()},ctrl_nlist.prototype.textDecorationCss=function(t){return t&(eBaseFontStyles.underline|eBaseFontStyles.linethrough)?"text-decoration:"+jOmnis.fontStyleToTextDecoration(t)+";":""},ctrl_nlist.prototype.setRowCss=function(){var t=this.getTheme(),e=" #"+this.elem.id+" .nativeListBox."+this.displayPlatform+" div.nativeListRow{";e+="background-color: "+t.getColorString(this.rowColor,this.DefaultColors[DefaultColorKeys.ROW],this.rowAlpha/255)+";",e+="border-bottom: 1px solid "+t.getColorString(this.dividerColor,this.DefaultColors[DefaultColorKeys.DIVIDER])+";",e+="}",e+=" #"+this.elem.id+" .nativeListBox."+this.displayPlatform+" div.nativeListRow.focusedRow::after{";var i=t.getColorString(this.rowSelColor,this.DefaultColors[DefaultColorKeys.ROW_SELECTED],this.rowSelAlpha/255);return e+="background-color: "+i+";",e+="}",e+=" #"+this.elem.id+" .nativeListBox."+this.displayPlatform+" div.nativeListRow.focusedRow .NLHiliteAccessory{",e+="outline-color: "+i+" !important;",e+="}",e+=" #"+this.elem.id+" .nativeListBox."+this.displayPlatform+" div.nativeListRow.selectedRow .NLHiliteAccessory{",e+="outline-color: "+t.getTextColorString(_core_omn_theme__WEBPACK_IMPORTED_MODULE_11__.JT,this.resolveDefaultColor(this.rowSelColor,DefaultColorKeys.ROW_SELECTED),this.DefaultColors[DefaultColorKeys.TEXT])+" !important;",e+="}",e+=" #"+this.elem.id+" .nativeListBox."+this.displayPlatform+" div.nativeListRow.selectedRow{",e+="background-color: "+i+";",e+="}"},ctrl_nlist.prototype.setGroupCss=function(){var t=this.getTheme(),e=" #"+this.elem.id+" .groupHeading."+this.displayPlatform+"{",i="android"===this.displayPlatform?DefaultColorKeys.GROUP_HEADING_ANDROID:DefaultColorKeys.GROUP_HEADING;return e+="background-color: "+t.getColorString(this.groupColor,this.DefaultColors[i],this.groupAlpha/255)+";",e+="border-bottom: 1px solid "+t.getColorString(this.dividerColor,this.DefaultColors[DefaultColorKeys.DIVIDER])+";",e+="}",e+=" #"+this.elem.id+" .groupHeading."+this.displayPlatform+" p{",null!=this.groupTextFont&&(e+="font-family: "+this.groupTextFont+";"),null!=this.groupTextStyle&&(this.groupTextStyle&eBaseFontStyles.bold&&(e+="font-weight: bold;"),this.groupTextStyle&eBaseFontStyles.italic&&(e+="font-style: italic;"),e+=this.textDecorationCss(this.groupTextStyle)),e+="color: "+t.getTextColorString(this.groupTextColor,this.resolveDefaultColor(this.groupColor,i),this.DefaultColors[DefaultColorKeys.TEXT])+";",null!=this.groupTextSize&&(e+="font-size: "+this.groupTextSize+"pt;"),e+="}"},ctrl_nlist.prototype.setText1Css=function(){var t=this.getTheme(),e=" #"+this.elem.id+" .nativeListBox."+this.displayPlatform+" div.nativeListRow p.text1{";return null!=this.text1Font&&(e+="font-family: "+this.text1Font+";"),null!=this.text1Style&&(this.text1Style&eBaseFontStyles.bold&&(e+="font-weight: bold;"),this.text1Style&eBaseFontStyles.italic&&(e+="font-style: italic;"),e+=this.textDecorationCss(this.text1Style)),e+="color: "+t.getTextColorString(this.text1Color,this.rowColor,this.DefaultColors[DefaultColorKeys.TEXT])+";",e+="}",e+=" #"+this.elem.id+" .nativeListBox."+this.displayPlatform+" div.nativeListRow.selectedRow p.text1{",e+="color: "+t.getTextColorString(this.text1SelColor,this.resolveDefaultColor(this.rowSelColor,DefaultColorKeys.ROW_SELECTED),this.DefaultColors[DefaultColorKeys.TEXT])+";}"},ctrl_nlist.prototype.setText2Css=function(){var t=this.getTheme(),e=" #"+this.elem.id+" .nativeListBox."+this.displayPlatform+" div.nativeListRow p.text2{";return null!=this.text2Font&&(e+="font-family: "+this.text2Font+";"),null!=this.text2Style&&(this.text2Style&eBaseFontStyles.bold&&(e+="font-weight: bold;"),this.text2Style&eBaseFontStyles.italic&&(e+="font-style: italic;"),e+=this.textDecorationCss(this.text2Style)),e+="color: "+t.getTextColorString(this.text2Color,this.rowColor,this.DefaultColors[DefaultColorKeys.TEXT])+";",e+="}",e+=" #"+this.elem.id+" .nativeListBox."+this.displayPlatform+" div.nativeListRow.selectedRow p.text2{",e+="color: "+t.getTextColorString(this.text2SelColor,this.resolveDefaultColor(this.rowSelColor,DefaultColorKeys.ROW_SELECTED),this.DefaultColors[DefaultColorKeys.TEXT])+";}"},ctrl_nlist.prototype.setButtonCss=function(){var t=this.getTheme(),e=" #"+this.elem.id+" .nativeListBox."+this.displayPlatform+" .nativeListButton{";return e+="background-color:"+t.getColorString(this.buttonColor,this.DefaultColors[DefaultColorKeys.BUTTON],this.buttonAlpha/255)+";",e+="border:solid 1px "+t.getColorString(this.buttonBorderColor,this.DefaultColors[DefaultColorKeys.BUTTON_BORDER])+";",e+="}",this.buttonPressedColor!==_core_omn_theme__WEBPACK_IMPORTED_MODULE_11__.JT&&(e+=" #"+this.elem.id+" .nativeListBox."+this.displayPlatform+" .nativeListButton:active{",e+="background-color:"+t.getColorString(this.buttonPressedColor,0,this.buttonPressedAlpha/255)+";}"),e+=" #"+this.elem.id+" .nativeListBox."+this.displayPlatform+" .nativeListButton p{",null!=this.buttonTextFont&&(e+="font-family: "+this.buttonTextFont+";"),null!=this.buttonTextStyle&&(this.buttonTextStyle&eBaseFontStyles.bold&&(e+="font-weight: bold;"),this.buttonTextStyle&eBaseFontStyles.italic&&(e+="font-style: italic;"),e+=this.textDecorationCss(this.buttonTextStyle)),e+="font-size:"+this.buttonTextSize+"pt;",e+="color: "+t.getTextColorString(this.buttonTextColor,this.resolveDefaultColor(this.buttonColor,DefaultColorKeys.BUTTON),this.DefaultColors[DefaultColorKeys.TEXT])+";",e+="}"},__webpack_exports__.Z=ctrl_nlist},6328:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2772),core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1539),core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_regexp_to_string__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9714),core_js_modules_es_regexp_to_string__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_regexp_to_string__WEBPACK_IMPORTED_MODULE_2__),eNSliderEvent={evStartSlider:5e3,evEndSlider:5001,evNewValue:5002},eNSliderProperties={max:"$::max",min:"$::min",val:"$val",step:"$step",useSteps:"$usesteps",vertical:"$::vertical",hmargin:"$horzmargin",vmargin:"$vertmargin"},numberOfPages=5;function ctrl_nslider(){this.init_class_inst()}ctrl_nslider.prototype=new ctrl_base,ctrl_nslider.prototype.defaultAriaElem=!1,ctrl_nslider.prototype.init_class_inst=function(){var t;this.superclass=ctrl_base.prototype,this.superclass.init_class_inst.call(this),this.hasRedrawBug=(t=getWebkitVersion(),jOmnis.inAppWrapper()&&t>-1&&t<537),this.activeReplacesEnabled=!0,this.mFocusStyle=eBaseFocusStyle.eWithin},ctrl_nslider.prototype.baseClassName="omnis-nativeslider",ctrl_nslider.prototype.init_ctrl_inst=function(form,elem,rowCtrl,rowNumber){this.superclass.init_ctrl_inst.call(this,form,elem,rowCtrl,rowNumber);var client_elem=this.getClientElem();eSupportedNativeOSs.indexOf(jOmnis.platformName)>-1?this.displayPlatform=jOmnis.platformName:this.displayPlatform=this.form.defaultAppearance,"WP8"==this.displayPlatform&&(this.displayPlatform="iOS"),this.eventCount=0,this.mClientResult=!0,jOmnis.addClass(client_elem,this.displayPlatform+"SliderBackground"),this.fullDiv=document.createElement("div"),this.fullDiv.className=this.displayPlatform+"SliderFull",client_elem.appendChild(this.fullDiv),this.handle=document.createElement("div"),this.handle.className=this.displayPlatform+"SliderHandle",client_elem.appendChild(this.handle),this.handle.setAttribute("role","slider"),this.setAriaElement(this.handle),this.handleWidth=this.handle.clientWidth,this.touchStart=-1,this.max=parseInt(client_elem.getAttribute("data-max")),this.min=parseInt(client_elem.getAttribute("data-min")),this.value=parseInt(client_elem.getAttribute("data-value")),this.step=parseInt(client_elem.getAttribute("data-step")),this.hMargin=parseInt(client_elem.getAttribute("data-horzmargin")),this.vMargin=parseInt(client_elem.getAttribute("data-vertmargin")),this.isVertical=parseInt(client_elem.getAttribute("data-vertical")),this.useSteps=parseInt(client_elem.getAttribute("data-usesteps")),this.iconHandle=this.getBestIcon("slider_handle"),this.iconHandlePressed=this.getBestIcon("slider_handle_pressed"),this.iconHandleDisabled=this.getBestIcon("slider_handle_disabled"),eval("this.init"+this.displayPlatform+"()"),this.setNormal();var eventFunc=this.mEventFunction;return this.elem.onclick=eventFunc,this.elem.onmouseleave=eventFunc,this.elem.onkeydown=eventFunc,this.elem.onkeyup=eventFunc,this.elem.onmousemove=eventFunc,this.handle.onmousedown=eventFunc,this.elem.onmouseup=eventFunc,this.handle.ontouchstart=eventFunc,this.handle.ontouchmove=eventFunc,this.handle.ontouchend=eventFunc,this.update(),!1},ctrl_nslider.prototype.updateCtrl=function(){if(this.getTrueVisibility()){this.updateOnceVisible=!1;var t,e=this.getClientElem();e.style.marginLeft=e.style.marginRight=!this.isVertical*this.hMargin+"px",e.style.marginTop=e.style.marginBottom=this.isVertical*this.vMargin+"px",this.isVertical?(e.style.width=this.barWidth+"px",this.fullDiv.style.width=this.fullBarWidth+"px",e.style.top="0px",e.style.left=(parseInt(this.elem.style.width)-this.barWidth)/2+"px",this.sliderLength=parseInt(this.elem.style.height)-2*this.vMargin,e.style.height=this.sliderLength+"px",this.fullDiv.style.left=(this.barWidth-this.fullBarWidth)/2+"px",this.handle.style.left=(this.barWidth-this.handleWidth)/2+"px"):(e.style.height=this.barWidth+"px",this.fullDiv.style.height=this.fullBarWidth+"px",e.style.left="0px",e.style.top=(parseInt(this.elem.style.height)-this.barWidth)/2+"px",this.sliderLength=parseInt(this.elem.style.width)-2*this.hMargin,e.style.width=this.sliderLength+"px",this.fullDiv.style.top=(this.barWidth-this.fullBarWidth)/2+"px",this.handle.style.top=(this.barWidth-this.handleWidth)/2+"px"),this.useSteps&&(this.stepCount=(this.max-this.min)/this.step),t=this.dataName?this.getData():this.value,this.value!=t&&(this.value=t),this.setSliderValue(this.value),this.handleActive(!this.elem.disabled),this.handle.setAttribute("aria-valuemin",this.min),this.handle.setAttribute("aria-valuemax",this.max),this.handle.setAttribute("aria-valuenow",Math.round(this.value).toString()),this.isVertical?this.handle.setAttribute("aria-orientation","vertical"):this.handle.removeAttribute("aria-orientation")}else this.updateOnceVisible=!0},ctrl_nslider.prototype.sizeChanged=function(){this.superclass.sizeChanged.call(this),this.zIndex||(this.zIndex=this.elem.style.zIndex)},ctrl_nslider.prototype.setScreenSize=function(t,e,i,s,r){this.superclass.setScreenSize.call(this,t,e,i,s,r),this.updateCtrl()},ctrl_nslider.prototype.resetZeroPos=function(){this.zeroPos=jOmnis.getElemPosRelativeToAncestor(this.getClientElem())},ctrl_nslider.prototype.handleEvent=function(t){if(this.elem.disabled)return!0;switch(t.type){case"click":if(void 0===t.clientX)return!1;if(this.resetZeroPos(),this.isVertical)e=this.sliderLength-(t.clientY-this.zeroPos.y+document.documentElement.scrollTop);else var e=t.clientX-this.zeroPos.x+document.documentElement.scrollLeft;return jOmnis.removeClass(this.handle,"pressed"),this.positionSlider(e,this.useSteps),this.sendSliderEnd(),!0;case"keydown":var i=OmnisKeyboardHandler.getNormalizedEventKey(t),s=this.value;switch(i){case"PageDown":if(this.value<=this.min)break;case"PageUp":if("PageUp"===i&&this.value>=this.max)break;var r=(this.max-this.min)/numberOfPages;(s="PageDown"===i?this.value-r:this.value+r)<this.min?s=this.min:s>this.max&&(s=this.max);break;case"End":this.value<this.max&&(s=this.max);break;case"Home":this.value>this.min&&(s=this.min);break;case"ArrowLeft":case"ArrowDown":this.value>this.min&&(s=this.value-this.step);break;case"ArrowRight":case"ArrowUp":this.value<this.max&&(s=this.value+this.step);break;default:return!0}return this.value!==s&&(this.positionSlider(this.posFromValue(s),this.useSteps),this.sendSliderEnd()),t.preventDefault(),!0;case"mousedown":return this.resetZeroPos(),this.handlePressed=!0,this.handle.style.zIndex=20001,t.preventDefault(),!0;case"mousemove":return 1!=this.handlePressed||(e=this.isVertical?this.sliderLength-(t.clientY-this.zeroPos.y+document.documentElement.scrollTop):t.clientX-this.zeroPos.x+document.documentElement.scrollLeft,this.positionSlider(e,this.useSteps)),!0;case"mouseup":case"mouseleave":return!this.handlePressed||(this.handlePressed=!1,this.handle.style.zIndex=this.zIndex,(e=this.isVertical?this.sliderLength-(t.clientY-this.zeroPos.y+document.documentElement.scrollTop):t.clientX-this.zeroPos.x+document.documentElement.scrollLeft)>=0&&e<=this.sliderLength&&this.positionSlider(e,this.useSteps),this.sendSliderEnd(),!0);case"touchstart":return this.resetZeroPos(),this.setPressed(),this.handle.style.zIndex=20001,!0;case"touchend":return"blackberry"==this.displayPlatform&&this.handle.removeChild(this.touchRing),this.handle.style.zIndex=this.zIndex,this.setNormal(),this.sendSliderEnd(),!0;case"touchmove":var n=t.changedTouches[0];return t.preventDefault(),(e=this.isVertical?this.sliderLength-(n.clientY-this.zeroPos.y+document.documentElement.scrollTop):n.clientX-this.zeroPos.x+document.documentElement.scrollLeft)<0?e=0:e>this.sliderLength&&(e=this.sliderLength),this.positionSlider(e,this.useSteps),!0;default:return this.superclass.handleEvent.call(this,t)}},ctrl_nslider.prototype.getProperty=function(t){switch(t){case eNSliderProperties.val:return this.value;case eNSliderProperties.vertical:return this.isVertical;case eNSliderProperties.useSteps:return this.useSteps;case eNSliderProperties.max:return this.max;case eNSliderProperties.min:return this.min;case eNSliderProperties.step:return this.step;case eNSliderProperties.hmargin:return this.hMargin;case eNSliderProperties.vmargin:return this.vMargin}return this.superclass.getProperty.call(this,t)},ctrl_nslider.prototype.getCanAssign=function(t){return this.superclass.getCanAssign.call(this,t)},ctrl_nslider.prototype.setProperty=function(t,e){switch(t){case eBaseProperties.active:this.handleActive(e);break;case eNSliderProperties.val:this.setSliderValue(e);break;case eNSliderProperties.step:return this.step=e,void this.updateCtrl();case eNSliderProperties.useSteps:return this.useSteps=e,void this.updateCtrl();case eNSliderProperties.max:return this.max=e,void this.updateCtrl();case eNSliderProperties.min:return this.min=e,void this.updateCtrl();case eNSliderProperties.vertical:return this.isVertical=e,void this.updateCtrl();case eNSliderProperties.vmargin:return this.vMargin=e,void this.updateCtrl();case eNSliderProperties.hmargin:return this.hMargin=e,void this.updateCtrl()}return this.superclass.setProperty.call(this,t,e)},ctrl_nslider.prototype.visibilityChanged=function(){var t=this.superclass.visibilityChanged.call(this);return this.updateOnceVisible&&this.getTrueVisibility()&&this.update(),t},ctrl_nslider.prototype.initandroid=function(){this.barWidth=1,this.fullBarWidth=3},ctrl_nslider.prototype.initiOS=function(){this.barWidth=2,this.fullBarWidth=2},ctrl_nslider.prototype.initblackberry=function(){this.barWidth=6,this.fullBarWidth=6},ctrl_nslider.prototype.handleActive=function(t){t?this.setNormal():this.setDisabled()},ctrl_nslider.prototype.setSliderValue=function(t){t>this.max?t=this.max:t<this.min&&(t=this.min);var e=(t-this.min)/(this.max-this.min)*this.sliderLength;this.value=t,this.positionSlider(e)},ctrl_nslider.prototype.positionSlider=function(t,e){t<0?t=0:t>this.sliderLength&&(t=this.sliderLength);var i=this.valueFromPos(t);(i!=this.value&&(this.value=i,this.sendNewValue()),e)&&((t=Math.round((i-this.min)/this.step)*(this.sliderLength*(this.step/(this.max-this.min))))>this.sliderLength&&(t=this.sliderLength));this.isVertical?(this.handle.style.top=this.sliderLength-(t+this.handleWidth/2)+"px",this.fullDiv.style.height=t+"px",this.fullDiv.style.top=this.sliderLength-t+"px"):(this.handle.style.left=t-this.handleWidth/2+"px",this.fullDiv.style.width=t+"px"),this.hasRedrawBug&&(this.elem.style.display="none",this.elem.offsetHeight,this.elem.style.display=""),this.handle.setAttribute("aria-valuenow",Math.round(this.value).toString())},ctrl_nslider.prototype.sendSliderEnd=function(){this.canSendEvent(eNSliderEvent.evEndSlider)&&(this.newValueInterval?setTimeout(this.sendSliderEnd.bind(this),50):(this.eventParamsAdd("pSliderValue",this.value),this.sendEvent("evEndSlider")))},ctrl_nslider.prototype.sendNewValue=function(){if(this.canSendEvent(eNSliderEvent.evNewValue)){if(this.newValueInterval)return;var t=this;this.newValueInterval=setInterval((function(){t.newValueSending||(clearInterval(t.newValueInterval),t.newValueInterval=null,t.newValueSending=!0,t.eventParamsAdd("pSliderValue",t.value),t.sendEvent("evNewValue"))}),50)}},ctrl_nslider.prototype.valueFromPos=function(t,e){var i=t/this.sliderLength;if(this.useSteps){var s=this.min+Math.round(i*this.stepCount)*this.step;return s>this.max&&(s=this.max),s}return this.min+i*(this.max-this.min)},ctrl_nslider.prototype.posFromValue=function(t){return(t-=this.min)/(this.max-this.min)*this.sliderLength},ctrl_nslider.prototype.getBestIcon=function(t){var e="images/native/"+this.displayPlatform+"/"+t+".png;"+t+"_15x.png;"+t+"_2x.png";return jIcons.selectIcon(e)},ctrl_nslider.prototype.setNormal=function(){this.handle.className=this.displayPlatform+"SliderHandle","android"==this.displayPlatform?(this.handle.style.backgroundImage="url("+this.iconHandle+")",this.fullDiv.style.visibility="visible"):"iOS"==this.displayPlatform?this.fullDiv.parentElement.style.opacity="1":"blackberry"==this.displayPlatform&&(this.fullDiv.style.visibility="visible")},ctrl_nslider.prototype.setPressed=function(){this.handle.className=this.displayPlatform+"SliderHandle pressed","android"==this.displayPlatform?this.handle.style.backgroundImage="url("+this.iconHandlePressed+")":"blackberry"==this.displayPlatform&&(this.touchRing=document.createElement("div"),this.touchRing.style.width=this.touchRing.style.height="64px",this.touchRing.style.left="-17px",this.touchRing.style.top="-17px",this.touchRing.style.borderRadius="32px",this.touchRing.className="blackberryTouchRing",this.handle.appendChild(this.touchRing))},ctrl_nslider.prototype.setDisabled=function(){this.handle.className=this.displayPlatform+"SliderHandle disabled","android"==this.displayPlatform?(this.handle.style.background="url("+this.iconHandleDisabled+")",this.fullDiv.style.visibility="hidden"):"iOS"==this.displayPlatform?this.fullDiv.parentElement.style.opacity="0.45":"blackberry"==this.displayPlatform&&(this.fullDiv.style.visibility="hidden")},ctrl_nslider.prototype.sendEvent=function(t){this.elem.style.zIndex=2e4,this.eventCount++,this.superclass.sendEvent.call(this,t)},ctrl_nslider.prototype.handleEventResult=function(t,e){this.superclass.handleEventResult.call(this,t,e),this.eventCount--,this.eventCount<=0&&(this.eventCount=0,this.elem.style.zIndex=this.zIndex),"evNewValue"===t&&(this.newValueSending=!1)},ctrl_nslider.prototype.setTabIndex=function(t){this.handle.tabIndex=-1==t||this.elem.disabled?-1:0},ctrl_nslider.prototype.getLabelForElem=function(t){var e=this.getClientElem().id+"_label";return t.querySelector("label").id=e,this.handle.setAttribute("aria-labelledby",e),!1},__webpack_exports__.Z=ctrl_nslider},5871:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2772),core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_0__);ctrl_nswitch.prototype=new ctrl_base,ctrl_nswitch.prototype.ON_TEXT="",ctrl_nswitch.prototype.OFF_TEXT="",ctrl_nswitch.prototype.mAcceptsReturn=!0;var eJstH={LEFT:0,RIGHT:1,CENTER:2},eJstV={TOP:1,MIDDLE:2,BOTTOM:3};function ctrl_nswitch(){this.init_class_inst()}ctrl_nswitch.prototype.init_class_inst=function(){this.superclass=ctrl_base.prototype,this.superclass.init_class_inst.call(this),this.value=0,this.activeReplacesEnabled=!0,this.mFocusStyle=eBaseFocusStyle.eWithin},ctrl_nswitch.prototype.baseClassName="omnis-nativeswitch",ctrl_nswitch.prototype.init_ctrl_inst=function(t,e,i,s){this.superclass.init_ctrl_inst.call(this,t,e,i,s),""===this.ON_TEXT&&(ctrl_nswitch.prototype.ON_TEXT=jGetOmnisString(t.inst,"switch_on"),ctrl_nswitch.prototype.OFF_TEXT=jGetOmnisString(t.inst,"switch_off"));var r=this.getClientElem();if(eSupportedNativeOSs.indexOf(jOmnis.platformName)>-1?this.displayPlatform=jOmnis.platformName:this.displayPlatform=this.form.defaultAppearance,"WP8"==this.displayPlatform&&(this.displayPlatform="iOS"),jOmnis.addClass(r,this.displayPlatform+"SwitchBackground"),this.switchButton=r.children[0],this.switchButton.className=this.displayPlatform+"SwitchButton "+this.displayPlatform+"SwitchButtonOff","iOS"==this.displayPlatform)this.widthToHeight=1.65,this.innerBG=document.createElement("div"),this.innerBG.className="iOSInnerBackground",this.innerBG.style.width="0px",this.innerBG.style.height="0px",r.insertBefore(this.innerBG,this.switchButton),this.mJstH=parseInt(r.getAttribute("data-jsth")),this.mJstV=parseInt(r.getAttribute("data-jstv"));else if("blackberry"==this.displayPlatform){var n=document.createElement("p");n.textContent=this.OFF_TEXT,n.className="blackberrySwitchText",n.style.top="0px",this.switchButton.appendChild(n);var o=document.createElement("p");o.textContent=this.ON_TEXT,o.className="blackberrySwitchText",o.style.top="0px",this.switchButton.appendChild(o)}var a=this.mEventFunction;return r.onclick=a,r.onkeydown=r.onkeyup=a,this.switchButton.ontouchstart=a,this.switchButton.ontouchmove=a,this.switchButton.ontouchend=a,r.setAttribute("role","button"),this.update(),this.activeChanged(),!1},ctrl_nswitch.prototype.updateCtrl=function(){var theValue;this.margins=2*parseInt(this.switchButton.offsetTop),eval("this.update"+this.displayPlatform+"()"),theValue=this.dataName?this.getData():this.value,this.clientElem.setAttribute("aria-pressed",theValue?"true":"false"),this.value!=theValue&&(this.value=theValue),eval("this.update"+this.displayPlatform+"SwitchButton("+theValue+", true)"),this.elem.disabled?this.handleActive(!1):this.handleActive(!0)},ctrl_nswitch.prototype.updateiOS=function(){var t=this.getClientElem(),e=t.parentElement,i=parseInt(e.style.width),s=parseInt(e.style.height);if(i/s>=this.widthToHeight){var r=s*this.widthToHeight;switch(t.style.width=r+"px",this.mJstH){case eJstH.RIGHT:t.style.left=i-r+"px";break;case eJstH.CENTER:t.style.left=(i-r)/2+"px";break;default:t.style.left="0px"}}else{var n=i/this.widthToHeight;switch(t.style.height=n+"px",this.mJstV){case eJstV.MIDDLE:t.style.top=(s-n)/2+"px";break;case eJstV.BOTTOM:t.style.top=s-n+"px";break;default:t.style.top="0px"}}t.style.borderRadius=parseInt(t.style.height)/2+"px",this.buttonWidth=this.origButtonWidth=parseInt(t.style.height)-this.margins,this.switchButton.style.width=this.buttonWidth+"px",this.switchButton.style.height=this.buttonWidth+"px",this.switchButton.style.borderRadius=this.buttonWidth/2+"px";var o=this.buttonWidth/10;this.switchButton.style.boxShadow="0px "+o+"px "+2*o+"px 0px rgba(0,0,0,0.15)",this.innerBG.style.borderRadius=this.buttonWidth/2+"px"},ctrl_nswitch.prototype.updateandroid=function(){var t=this.getClientElem();this.buttonWidth=(parseInt(t.style.width)-this.margins)/2,this.switchButton.style.width=this.buttonWidth+"px";var e=parseInt(t.style.height)-this.margins;this.switchButton.style.height=e+"px",this.switchButton.style.lineHeight=this.switchButton.style.height,this.switchButton.style.fontSize=e/2+"px"},ctrl_nswitch.prototype.updateblackberry=function(){var t=this.getClientElem();t.style.borderRadius=parseInt(t.style.height)/2+"px",this.buttonWidth=this.origButtonWidth=parseInt(t.style.height)-this.margins,this.switchButton.style.width=this.buttonWidth+"px",this.switchButton.style.height=this.buttonWidth+"px",this.switchButton.style.borderRadius=this.buttonWidth/2+"px";var e=parseInt(t.style.width)-this.margins-this.buttonWidth,i=this.buttonWidth/2,s=this.switchButton.children[0];s.style.left=this.buttonWidth+this.margins/2+"px",s.style.width=e+"px",s.style.lineHeight=this.buttonWidth+"px",s.style.fontSize=i+"px";var r=this.switchButton.children[1];r.style.left=-e+"px",r.style.width=e+"px",r.style.lineHeight=this.buttonWidth+"px",r.style.fontSize=i+"px"},ctrl_nswitch.prototype.setScreenSize=function(t,e,i,s,r){this.superclass.setScreenSize.call(this,t,e,i,s,r),this.updateCtrl()},ctrl_nswitch.prototype.handleEvent=function(event){if(this.elem.disabled)return!0;switch(event.type){case"click":var touchTime=(new Date).getTime();return touchTime-this.lastTouch<1e3||this.toggleValue(),!0;case"touchstart":switch(this.lastTouch=(new Date).getTime(),jOmnis.clearAnimations(this.switchButton),this.displayPlatform){case"android":this.switchButton.className="androidSwitchButton androidSwitchButtonTouched";break;case"blackberry":this.switchButton.className="blackberrySwitchButton blackberrySwitchButtonTouched",this.touchRing=document.createElement("div"),this.touchRing.style.width=this.touchRing.style.height=2*this.buttonWidth+"px",this.touchRing.style.left=parseInt(this.switchButton.style.left)-this.buttonWidth/2+this.margins/2+"px",this.touchRing.style.top=parseInt(this.switchButton.clientTop)-this.buttonWidth/2+this.margins/2+"px",this.touchRing.style.borderRadius=this.buttonWidth+"px",this.touchRing.className="blackberryTouchRing",this.getClientElem().parentElement.appendChild(this.touchRing);break;case"iOS":jOmnis.clearAnimations(this.switchButton),this.value||this.showInnerBG(!1),this.origButtonWidth=this.buttonWidth,this.buttonWidth=.7*parseInt(this.switchButton.parentElement.style.width);var newLeft="0px";parseInt(this.switchButton.style.left)>this.margins/2&&(newLeft=parseInt(this.switchButton.parentElement.style.width)-this.margins-this.buttonWidth+"px"),jOmnis.animate(this.switchButton,{width:this.buttonWidth+"px",left:newLeft},200)}return!0;case"touchend":if("blackberry"==this.displayPlatform&&this.getClientElem().parentElement.removeChild(this.touchRing),touchTime=(new Date).getTime(),touchTime-this.lastTouch<500)return this.toggleValue(),!0;var leftPos=parseInt(this.switchButton.style.left),bWdth=this.buttonWidth;"iOS"==this.displayPlatform&&(jOmnis.clearAnimations(this.switchButton),this.buttonWidth=this.origButtonWidth,newLeft="0px",parseInt(leftPos)>this.margins/2&&(newLeft=parseInt(this.switchButton.parentElement.style.width)-this.margins-this.buttonWidth+"px"),jOmnis.animate(this.switchButton,{width:this.buttonWidth+"px",left:newLeft},200));var midway=(parseInt(this.switchButton.parentElement.style.width)-this.margins)/2,theValue=leftPos+bWdth/2>midway;return this.assignValue(theValue),!0;case"touchmove":var touchobj=event.changedTouches[0];event.preventDefault();var client_elem=this.getClientElem(),frame=client_elem.parentElement,cntLeft=parseInt(frame.style.left)+parseInt(client_elem.style.left);newLeft=touchobj.clientX-cntLeft-this.buttonWidth/2+document.documentElement.scrollLeft;var maxLeft=parseInt(client_elem.style.width)-this.margins-this.buttonWidth;return newLeft<0?newLeft=0:newLeft>maxLeft&&(newLeft=maxLeft),this.switchButton.style.left=newLeft+"px","blackberry"==this.displayPlatform&&(this.touchRing.style.left=newLeft-this.buttonWidth/2+this.margins/2+"px"),midway=(parseInt(this.switchButton.parentElement.style.width)-this.margins-this.buttonWidth)/2,eval("this.update"+this.displayPlatform+"SwitchButton("+(newLeft>midway)+", false)"),!0;case"keydown":case"keyup":if(!this.elem.disabled){var code=event.keyCode||event.which;(13==code&&"keydown"==event.type||32==code&&"keyup"==event.type)&&this.handleEvent(jOmnis.createDOMEvent("click"))}return!0;default:return this.superclass.handleEvent.call(this,event)}},ctrl_nswitch.prototype.getProperty=function(t){return this.superclass.getProperty.call(this,t)},ctrl_nswitch.prototype.getCanAssign=function(t){return this.superclass.getCanAssign.call(this,t)},ctrl_nswitch.prototype.setProperty=function(t,e){switch(t){case eBaseProperties.active:this.handleActive(e);break;case"$justifyhoriz":this.mJstH=e,this.updateCtrl();break;case"$justifyvert":this.mJstV=e,this.updateCtrl()}return this.superclass.setProperty.call(this,t,e)},ctrl_nswitch.prototype.handleActive=function(t){t?(jOmnis.removeClass(this.switchButton.parentElement,"disabled"),jOmnis.removeClass(this.switchButton,"disabled")):(jOmnis.addClass(this.switchButton.parentElement,"disabled"),jOmnis.addClass(this.switchButton,"disabled"))},ctrl_nswitch.prototype.assignValue=function(theValue){eval("this.update"+this.displayPlatform+"SwitchButton("+theValue+", true)"),this.value!=theValue&&(this.dataName&&this.setData(theValue),this.clientElem.setAttribute("aria-pressed",theValue?"true":"false"),this.value=theValue,this.canSendEvent(eBaseEvent.evClick)&&(this.eventParamsAdd("pNewVal",theValue),this.sendEvent(eBaseEvent.evClick)))},ctrl_nswitch.prototype.updateandroidSwitchButton=function(t,e){t?(e&&(this.switchButton.style.left=this.buttonWidth+"px",this.switchButton.className="androidSwitchButton androidSwitchButtonOn"),this.switchButton.textContent=this.ON_TEXT):(e&&(this.switchButton.style.left="0px",this.switchButton.className="androidSwitchButton androidSwitchButtonOff"),this.switchButton.textContent=this.OFF_TEXT)},ctrl_nswitch.prototype.updateiOSSwitchButton=function(t,e){if(e){jOmnis.clearAnimations(this.switchButton),this.buttonWidth=this.origButtonWidth;var i=t?parseInt(this.switchButton.parentElement.style.width)-this.margins-this.buttonWidth+"px":"0px";jOmnis.animate(this.switchButton,{width:this.buttonWidth+"px",left:i},200),this.showInnerBG(!t)}var s=this.switchButton.parentElement;t?(this.switchButton.className="iOSSwitchButton iOSSwitchButtonOn",jOmnis.addClass(s,"iOSSwitchBackgroundOn"),jOmnis.removeClass(s,"iOSSwitchBackgroundOff")):(this.switchButton.className="iOSSwitchButton iOSSwitchButtonOff",jOmnis.addClass(s,"iOSSwitchBackgroundOff"),jOmnis.removeClass(s,"iOSSwitchBackgroundOn"))},ctrl_nswitch.prototype.updateblackberrySwitchButton=function(t,e){if(e){jOmnis.clearAnimations(this.switchButton),this.buttonWidth=this.origButtonWidth;var i=t?parseInt(this.switchButton.parentElement.style.width)-this.margins-this.buttonWidth+"px":"0px";jOmnis.animate(this.switchButton,{width:this.buttonWidth+"px",left:i},150),this.switchButton.className=t?"blackberrySwitchButton blackberrySwitchButtonOn":"blackberrySwitchButton blackberrySwitchButtonOff"}},ctrl_nswitch.prototype.showInnerBG=function(t){var e=parseInt(this.switchButton.parentElement.style.width)-this.margins,i=parseInt(this.switchButton.parentElement.style.height)-this.margins;t&&(this.innerBG.style.left=e/2+"px",this.innerBG.style.top=i/2+"px");var s=e*t,r=i*t,n=t?this.margins/2:i/2,o=t?this.margins/2:e/2;jOmnis.animate(this.innerBG,{width:s+"px",height:r+"px",left:o+"px",top:n+"px"},300)},ctrl_nswitch.prototype.toggleValue=function(){var t;t=(t=this.dataName?this.getData():this.value)?0:1,this.assignValue(t)},ctrl_nswitch.prototype.getLabelForElem=function(t){var e=this.getClientElem().id+"_label";return t.querySelector("label").id=e,this.getClientElem().setAttribute("aria-labelledby",e),!1},__webpack_exports__.Z=ctrl_nswitch},1962:function(t,e,i){"use strict";var s,r;i(2526),i(1817),i(2165),i(2222),i(7327),i(9826),i(4944),i(2772),i(6992),i(1249),i(5069),i(7042),i(2707),i(561),i(3792),i(489),i(1539),i(4603),i(9714),i(8783),i(4723),i(5306),i(3123),i(3210),i(3948);function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}
/*! jQuery v3.6.0 | (c) OpenJS Foundation and other contributors | jquery.org/license */t=i.hmd(t),s="undefined"!=typeof window?window:void 0,r=function(t,e){var s=[],r=Object.getPrototypeOf,o=s.slice,a=s.flat?function(t){return s.flat.call(t)}:function(t){return s.concat.apply([],t)},l=s.push,h=s.indexOf,c={},u=c.toString,d=c.hasOwnProperty,p=d.toString,m=p.call(Object),f={},g=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},v=function(t){return null!=t&&t===t.window},b=t.document,y={type:!0,src:!0,nonce:!0,noModule:!0};function C(t,e,i){var s,r,n=(i=i||b).createElement("script");if(n.text=t,e)for(s in y)(r=e[s]||e.getAttribute&&e.getAttribute(s))&&n.setAttribute(s,r);i.head.appendChild(n).parentNode.removeChild(n)}function _(t){return null==t?t+"":"object"==n(t)||"function"==typeof t?c[u.call(t)]||"object":n(t)}var E="3.6.0",w=function t(e,i){return new t.fn.init(e,i)};function k(t){var e=!!t&&"length"in t&&t.length,i=_(t);return!g(t)&&!v(t)&&("array"===i||0===e||"number"==typeof e&&0<e&&e-1 in t)}w.fn=w.prototype={jquery:E,constructor:w,length:0,toArray:function(){return o.call(this)},get:function(t){return null==t?o.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=w.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return w.each(this,t)},map:function(t){return this.pushStack(w.map(this,(function(e,i){return t.call(e,i,e)})))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(w.grep(this,(function(t,e){return(e+1)%2})))},odd:function(){return this.pushStack(w.grep(this,(function(t,e){return e%2})))},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(0<=i&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:s.sort,splice:s.splice},w.extend=w.fn.extend=function(){var t,e,i,s,r,o,a=arguments[0]||{},l=1,h=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[l]||{},l++),"object"==n(a)||g(a)||(a={}),l===h&&(a=this,l--);l<h;l++)if(null!=(t=arguments[l]))for(e in t)s=t[e],"__proto__"!==e&&a!==s&&(c&&s&&(w.isPlainObject(s)||(r=Array.isArray(s)))?(i=a[e],o=r&&!Array.isArray(i)?[]:r||w.isPlainObject(i)?i:{},r=!1,a[e]=w.extend(c,o,s)):void 0!==s&&(a[e]=s));return a},w.extend({expando:"jQuery"+(E+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,i;return!(!t||"[object Object]"!==u.call(t)||(e=r(t))&&("function"!=typeof(i=d.call(e,"constructor")&&e.constructor)||p.call(i)!==m))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,i){C(t,{nonce:e&&e.nonce},i)},each:function(t,e){var i,s=0;if(k(t))for(i=t.length;s<i&&!1!==e.call(t[s],s,t[s]);s++);else for(s in t)if(!1===e.call(t[s],s,t[s]))break;return t},makeArray:function(t,e){var i=e||[];return null!=t&&(k(Object(t))?w.merge(i,"string"==typeof t?[t]:t):l.call(i,t)),i},inArray:function(t,e,i){return null==e?-1:h.call(e,t,i)},merge:function(t,e){for(var i=+e.length,s=0,r=t.length;s<i;s++)t[r++]=e[s];return t.length=r,t},grep:function(t,e,i){for(var s=[],r=0,n=t.length,o=!i;r<n;r++)!e(t[r],r)!==o&&s.push(t[r]);return s},map:function(t,e,i){var s,r,n=0,o=[];if(k(t))for(s=t.length;n<s;n++)null!=(r=e(t[n],n,i))&&o.push(r);else for(n in t)null!=(r=e(t[n],n,i))&&o.push(r);return a(o)},guid:1,support:f}),"function"==typeof Symbol&&(w.fn[Symbol.iterator]=s[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){c["[object "+e+"]"]=e.toLowerCase()}));var T=function(t){var e,i,s,r,n,o,a,l,h,c,u,d,p,m,f,g,v,b,y,C="sizzle"+1*new Date,_=t.document,E=0,w=0,k=lt(),T=lt(),S=lt(),x=lt(),D=function(t,e){return t===e&&(u=!0),0},O={}.hasOwnProperty,A=[],P=A.pop,I=A.push,L=A.push,j=A.slice,N=function(t,e){for(var i=0,s=t.length;i<s;i++)if(t[i]===e)return i;return-1},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",R="[\\x20\\t\\r\\n\\f]",M="(?:\\\\[\\da-fA-F]{1,6}"+R+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",F="\\["+R+"*("+M+")(?:"+R+"*([*^$|!~]?=)"+R+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+M+"))|)"+R+"*\\]",H=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+F+")*)|.*)\\)|)",z=new RegExp(R+"+","g"),W=new RegExp("^"+R+"+|((?:^|[^\\\\])(?:\\\\.)*)"+R+"+$","g"),$=new RegExp("^"+R+"*,"+R+"*"),U=new RegExp("^"+R+"*([>+~]|"+R+")"+R+"*"),V=new RegExp(R+"|>"),q=new RegExp(H),K=new RegExp("^"+M+"$"),G={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M+"|[*])"),ATTR:new RegExp("^"+F),PSEUDO:new RegExp("^"+H),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+R+"*(even|odd|(([+-]|)(\\d*)n|)"+R+"*(?:([+-]|)"+R+"*(\\d+)|))"+R+"*\\)|)","i"),bool:new RegExp("^(?:"+B+")$","i"),needsContext:new RegExp("^"+R+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+R+"*((?:-\\d)?\\d*)"+R+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,X=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=new RegExp("\\\\[\\da-fA-F]{1,6}"+R+"?|\\\\([^\\r\\n\\f])","g"),it=function(t,e){var i="0x"+t.slice(1)-65536;return e||(i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320))},st=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,rt=function(t,e){return e?"\0"===t?"":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},nt=function(){d()},ot=Ct((function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{L.apply(A=j.call(_.childNodes),_.childNodes),A[_.childNodes.length].nodeType}catch(e){L={apply:A.length?function(t,e){I.apply(t,j.call(e))}:function(t,e){for(var i=t.length,s=0;t[i++]=e[s++];);t.length=i-1}}}function at(t,e,s,r){var n,a,h,c,u,m,v,b=e&&e.ownerDocument,_=e?e.nodeType:9;if(s=s||[],"string"!=typeof t||!t||1!==_&&9!==_&&11!==_)return s;if(!r&&(d(e),e=e||p,f)){if(11!==_&&(u=Z.exec(t)))if(n=u[1]){if(9===_){if(!(h=e.getElementById(n)))return s;if(h.id===n)return s.push(h),s}else if(b&&(h=b.getElementById(n))&&y(e,h)&&h.id===n)return s.push(h),s}else{if(u[2])return L.apply(s,e.getElementsByTagName(t)),s;if((n=u[3])&&i.getElementsByClassName&&e.getElementsByClassName)return L.apply(s,e.getElementsByClassName(n)),s}if(i.qsa&&!x[t+" "]&&(!g||!g.test(t))&&(1!==_||"object"!==e.nodeName.toLowerCase())){if(v=t,b=e,1===_&&(V.test(t)||U.test(t))){for((b=tt.test(t)&&vt(e.parentNode)||e)===e&&i.scope||((c=e.getAttribute("id"))?c=c.replace(st,rt):e.setAttribute("id",c=C)),a=(m=o(t)).length;a--;)m[a]=(c?"#"+c:":scope")+" "+yt(m[a]);v=m.join(",")}try{return L.apply(s,b.querySelectorAll(v)),s}catch(e){x(t,!0)}finally{c===C&&e.removeAttribute("id")}}}return l(t.replace(W,"$1"),e,s,r)}function lt(){var t=[];return function e(i,r){return t.push(i+" ")>s.cacheLength&&delete e[t.shift()],e[i+" "]=r}}function ht(t){return t[C]=!0,t}function ct(t){var e=p.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ut(t,e){for(var i=t.split("|"),r=i.length;r--;)s.attrHandle[i[r]]=e}function dt(t,e){var i=e&&t,s=i&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(s)return s;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function pt(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function mt(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function ft(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ot(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function gt(t){return ht((function(e){return e=+e,ht((function(i,s){for(var r,n=t([],i.length,e),o=n.length;o--;)i[r=n[o]]&&(i[r]=!(s[r]=i[r]))}))}))}function vt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in i=at.support={},n=at.isXML=function(t){var e=t&&t.namespaceURI,i=t&&(t.ownerDocument||t).documentElement;return!Y.test(e||i&&i.nodeName||"HTML")},d=at.setDocument=function(t){var e,r,o=t?t.ownerDocument||t:_;return o!=p&&9===o.nodeType&&o.documentElement&&(m=(p=o).documentElement,f=!n(p),_!=p&&(r=p.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener("unload",nt,!1):r.attachEvent&&r.attachEvent("onunload",nt)),i.scope=ct((function(t){return m.appendChild(t).appendChild(p.createElement("div")),void 0!==t.querySelectorAll&&!t.querySelectorAll(":scope fieldset div").length})),i.attributes=ct((function(t){return t.className="i",!t.getAttribute("className")})),i.getElementsByTagName=ct((function(t){return t.appendChild(p.createComment("")),!t.getElementsByTagName("*").length})),i.getElementsByClassName=Q.test(p.getElementsByClassName),i.getById=ct((function(t){return m.appendChild(t).id=C,!p.getElementsByName||!p.getElementsByName(C).length})),i.getById?(s.filter.ID=function(t){var e=t.replace(et,it);return function(t){return t.getAttribute("id")===e}},s.find.ID=function(t,e){if(void 0!==e.getElementById&&f){var i=e.getElementById(t);return i?[i]:[]}}):(s.filter.ID=function(t){var e=t.replace(et,it);return function(t){var i=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===e}},s.find.ID=function(t,e){if(void 0!==e.getElementById&&f){var i,s,r,n=e.getElementById(t);if(n){if((i=n.getAttributeNode("id"))&&i.value===t)return[n];for(r=e.getElementsByName(t),s=0;n=r[s++];)if((i=n.getAttributeNode("id"))&&i.value===t)return[n]}return[]}}),s.find.TAG=i.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):i.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,s=[],r=0,n=e.getElementsByTagName(t);if("*"===t){for(;i=n[r++];)1===i.nodeType&&s.push(i);return s}return n},s.find.CLASS=i.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&f)return e.getElementsByClassName(t)},v=[],g=[],(i.qsa=Q.test(p.querySelectorAll))&&(ct((function(t){var e;m.appendChild(t).innerHTML="<a id='"+C+"'></a><select id='"+C+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+R+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||g.push("\\["+R+"*(?:value|"+B+")"),t.querySelectorAll("[id~="+C+"-]").length||g.push("~="),(e=p.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||g.push("\\["+R+"*name"+R+"*="+R+"*(?:''|\"\")"),t.querySelectorAll(":checked").length||g.push(":checked"),t.querySelectorAll("a#"+C+"+*").length||g.push(".#.+[+~]"),t.querySelectorAll("\\\f"),g.push("[\\r\\n\\f]")})),ct((function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=p.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&g.push("name"+R+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),m.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),g.push(",.*:")}))),(i.matchesSelector=Q.test(b=m.matches||m.webkitMatchesSelector||m.mozMatchesSelector||m.oMatchesSelector||m.msMatchesSelector))&&ct((function(t){i.disconnectedMatch=b.call(t,"*"),b.call(t,"[s!='']:x"),v.push("!=",H)})),g=g.length&&new RegExp(g.join("|")),v=v.length&&new RegExp(v.join("|")),e=Q.test(m.compareDocumentPosition),y=e||Q.test(m.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,s=e&&e.parentNode;return t===s||!(!s||1!==s.nodeType||!(i.contains?i.contains(s):t.compareDocumentPosition&&16&t.compareDocumentPosition(s)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},D=e?function(t,e){if(t===e)return u=!0,0;var s=!t.compareDocumentPosition-!e.compareDocumentPosition;return s||(1&(s=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!i.sortDetached&&e.compareDocumentPosition(t)===s?t==p||t.ownerDocument==_&&y(_,t)?-1:e==p||e.ownerDocument==_&&y(_,e)?1:c?N(c,t)-N(c,e):0:4&s?-1:1)}:function(t,e){if(t===e)return u=!0,0;var i,s=0,r=t.parentNode,n=e.parentNode,o=[t],a=[e];if(!r||!n)return t==p?-1:e==p?1:r?-1:n?1:c?N(c,t)-N(c,e):0;if(r===n)return dt(t,e);for(i=t;i=i.parentNode;)o.unshift(i);for(i=e;i=i.parentNode;)a.unshift(i);for(;o[s]===a[s];)s++;return s?dt(o[s],a[s]):o[s]==_?-1:a[s]==_?1:0}),p},at.matches=function(t,e){return at(t,null,null,e)},at.matchesSelector=function(t,e){if(d(t),i.matchesSelector&&f&&!x[e+" "]&&(!v||!v.test(e))&&(!g||!g.test(e)))try{var s=b.call(t,e);if(s||i.disconnectedMatch||t.document&&11!==t.document.nodeType)return s}catch(t){x(e,!0)}return 0<at(e,p,null,[t]).length},at.contains=function(t,e){return(t.ownerDocument||t)!=p&&d(t),y(t,e)},at.attr=function(t,e){(t.ownerDocument||t)!=p&&d(t);var r=s.attrHandle[e.toLowerCase()],n=r&&O.call(s.attrHandle,e.toLowerCase())?r(t,e,!f):void 0;return void 0!==n?n:i.attributes||!f?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},at.escape=function(t){return(t+"").replace(st,rt)},at.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},at.uniqueSort=function(t){var e,s=[],r=0,n=0;if(u=!i.detectDuplicates,c=!i.sortStable&&t.slice(0),t.sort(D),u){for(;e=t[n++];)e===t[n]&&(r=s.push(n));for(;r--;)t.splice(s[r],1)}return c=null,t},r=at.getText=function(t){var e,i="",s=0,n=t.nodeType;if(n){if(1===n||9===n||11===n){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=r(t)}else if(3===n||4===n)return t.nodeValue}else for(;e=t[s++];)i+=r(e);return i},(s=at.selectors={cacheLength:50,createPseudo:ht,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,it),t[3]=(t[3]||t[4]||t[5]||"").replace(et,it),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||at.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&at.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return G.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&q.test(i)&&(e=o(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,it).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=k[t+" "];return e||(e=new RegExp("(^|"+R+")"+t+"("+R+"|$)"))&&k(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,i){return function(s){var r=at.attr(s,t);return null==r?"!="===e:!e||(r+="","="===e?r===i:"!="===e?r!==i:"^="===e?i&&0===r.indexOf(i):"*="===e?i&&-1<r.indexOf(i):"$="===e?i&&r.slice(-i.length)===i:"~="===e?-1<(" "+r.replace(z," ")+" ").indexOf(i):"|="===e&&(r===i||r.slice(0,i.length+1)===i+"-"))}},CHILD:function(t,e,i,s,r){var n="nth"!==t.slice(0,3),o="last"!==t.slice(-4),a="of-type"===e;return 1===s&&0===r?function(t){return!!t.parentNode}:function(e,i,l){var h,c,u,d,p,m,f=n!==o?"nextSibling":"previousSibling",g=e.parentNode,v=a&&e.nodeName.toLowerCase(),b=!l&&!a,y=!1;if(g){if(n){for(;f;){for(d=e;d=d[f];)if(a?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;m=f="only"===t&&!m&&"nextSibling"}return!0}if(m=[o?g.firstChild:g.lastChild],o&&b){for(y=(p=(h=(c=(u=(d=g)[C]||(d[C]={}))[d.uniqueID]||(u[d.uniqueID]={}))[t]||[])[0]===E&&h[1])&&h[2],d=p&&g.childNodes[p];d=++p&&d&&d[f]||(y=p=0)||m.pop();)if(1===d.nodeType&&++y&&d===e){c[t]=[E,p,y];break}}else if(b&&(y=p=(h=(c=(u=(d=e)[C]||(d[C]={}))[d.uniqueID]||(u[d.uniqueID]={}))[t]||[])[0]===E&&h[1]),!1===y)for(;(d=++p&&d&&d[f]||(y=p=0)||m.pop())&&((a?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++y||(b&&((c=(u=d[C]||(d[C]={}))[d.uniqueID]||(u[d.uniqueID]={}))[t]=[E,y]),d!==e)););return(y-=r)===s||y%s==0&&0<=y/s}}},PSEUDO:function(t,e){var i,r=s.pseudos[t]||s.setFilters[t.toLowerCase()]||at.error("unsupported pseudo: "+t);return r[C]?r(e):1<r.length?(i=[t,t,"",e],s.setFilters.hasOwnProperty(t.toLowerCase())?ht((function(t,i){for(var s,n=r(t,e),o=n.length;o--;)t[s=N(t,n[o])]=!(i[s]=n[o])})):function(t){return r(t,0,i)}):r}},pseudos:{not:ht((function(t){var e=[],i=[],s=a(t.replace(W,"$1"));return s[C]?ht((function(t,e,i,r){for(var n,o=s(t,null,r,[]),a=t.length;a--;)(n=o[a])&&(t[a]=!(e[a]=n))})):function(t,r,n){return e[0]=t,s(e,null,n,i),e[0]=null,!i.pop()}})),has:ht((function(t){return function(e){return 0<at(t,e).length}})),contains:ht((function(t){return t=t.replace(et,it),function(e){return-1<(e.textContent||r(e)).indexOf(t)}})),lang:ht((function(t){return K.test(t||"")||at.error("unsupported lang: "+t),t=t.replace(et,it).toLowerCase(),function(e){var i;do{if(i=f?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(i=i.toLowerCase())===t||0===i.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===m},focus:function(t){return t===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:ft(!1),disabled:ft(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!s.pseudos.empty(t)},header:function(t){return J.test(t.nodeName)},input:function(t){return X.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:gt((function(){return[0]})),last:gt((function(t,e){return[e-1]})),eq:gt((function(t,e,i){return[i<0?i+e:i]})),even:gt((function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t})),odd:gt((function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t})),lt:gt((function(t,e,i){for(var s=i<0?i+e:e<i?e:i;0<=--s;)t.push(s);return t})),gt:gt((function(t,e,i){for(var s=i<0?i+e:i;++s<e;)t.push(s);return t}))}}).pseudos.nth=s.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})s.pseudos[e]=pt(e);for(e in{submit:!0,reset:!0})s.pseudos[e]=mt(e);function bt(){}function yt(t){for(var e=0,i=t.length,s="";e<i;e++)s+=t[e].value;return s}function Ct(t,e,i){var s=e.dir,r=e.next,n=r||s,o=i&&"parentNode"===n,a=w++;return e.first?function(e,i,r){for(;e=e[s];)if(1===e.nodeType||o)return t(e,i,r);return!1}:function(e,i,l){var h,c,u,d=[E,a];if(l){for(;e=e[s];)if((1===e.nodeType||o)&&t(e,i,l))return!0}else for(;e=e[s];)if(1===e.nodeType||o)if(c=(u=e[C]||(e[C]={}))[e.uniqueID]||(u[e.uniqueID]={}),r&&r===e.nodeName.toLowerCase())e=e[s]||e;else{if((h=c[n])&&h[0]===E&&h[1]===a)return d[2]=h[2];if((c[n]=d)[2]=t(e,i,l))return!0}return!1}}function _t(t){return 1<t.length?function(e,i,s){for(var r=t.length;r--;)if(!t[r](e,i,s))return!1;return!0}:t[0]}function Et(t,e,i,s,r){for(var n,o=[],a=0,l=t.length,h=null!=e;a<l;a++)(n=t[a])&&(i&&!i(n,s,r)||(o.push(n),h&&e.push(a)));return o}function wt(t,e,i,s,r,n){return s&&!s[C]&&(s=wt(s)),r&&!r[C]&&(r=wt(r,n)),ht((function(n,o,a,l){var h,c,u,d=[],p=[],m=o.length,f=n||function(t,e,i){for(var s=0,r=e.length;s<r;s++)at(t,e[s],i);return i}(e||"*",a.nodeType?[a]:a,[]),g=!t||!n&&e?f:Et(f,d,t,a,l),v=i?r||(n?t:m||s)?[]:o:g;if(i&&i(g,v,a,l),s)for(h=Et(v,p),s(h,[],a,l),c=h.length;c--;)(u=h[c])&&(v[p[c]]=!(g[p[c]]=u));if(n){if(r||t){if(r){for(h=[],c=v.length;c--;)(u=v[c])&&h.push(g[c]=u);r(null,v=[],h,l)}for(c=v.length;c--;)(u=v[c])&&-1<(h=r?N(n,u):d[c])&&(n[h]=!(o[h]=u))}}else v=Et(v===o?v.splice(m,v.length):v),r?r(null,o,v,l):L.apply(o,v)}))}function kt(t){for(var e,i,r,n=t.length,o=s.relative[t[0].type],a=o||s.relative[" "],l=o?1:0,c=Ct((function(t){return t===e}),a,!0),u=Ct((function(t){return-1<N(e,t)}),a,!0),d=[function(t,i,s){var r=!o&&(s||i!==h)||((e=i).nodeType?c(t,i,s):u(t,i,s));return e=null,r}];l<n;l++)if(i=s.relative[t[l].type])d=[Ct(_t(d),i)];else{if((i=s.filter[t[l].type].apply(null,t[l].matches))[C]){for(r=++l;r<n&&!s.relative[t[r].type];r++);return wt(1<l&&_t(d),1<l&&yt(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(W,"$1"),i,l<r&&kt(t.slice(l,r)),r<n&&kt(t=t.slice(r)),r<n&&yt(t))}d.push(i)}return _t(d)}return bt.prototype=s.filters=s.pseudos,s.setFilters=new bt,o=at.tokenize=function(t,e){var i,r,n,o,a,l,h,c=T[t+" "];if(c)return e?0:c.slice(0);for(a=t,l=[],h=s.preFilter;a;){for(o in i&&!(r=$.exec(a))||(r&&(a=a.slice(r[0].length)||a),l.push(n=[])),i=!1,(r=U.exec(a))&&(i=r.shift(),n.push({value:i,type:r[0].replace(W," ")}),a=a.slice(i.length)),s.filter)!(r=G[o].exec(a))||h[o]&&!(r=h[o](r))||(i=r.shift(),n.push({value:i,type:o,matches:r}),a=a.slice(i.length));if(!i)break}return e?a.length:a?at.error(t):T(t,l).slice(0)},a=at.compile=function(t,e){var i,r,n,a,l,c,u=[],m=[],g=S[t+" "];if(!g){for(e||(e=o(t)),i=e.length;i--;)(g=kt(e[i]))[C]?u.push(g):m.push(g);(g=S(t,(r=m,a=0<(n=u).length,l=0<r.length,c=function(t,e,i,o,c){var u,m,g,v=0,b="0",y=t&&[],C=[],_=h,w=t||l&&s.find.TAG("*",c),k=E+=null==_?1:Math.random()||.1,T=w.length;for(c&&(h=e==p||e||c);b!==T&&null!=(u=w[b]);b++){if(l&&u){for(m=0,e||u.ownerDocument==p||(d(u),i=!f);g=r[m++];)if(g(u,e||p,i)){o.push(u);break}c&&(E=k)}a&&((u=!g&&u)&&v--,t&&y.push(u))}if(v+=b,a&&b!==v){for(m=0;g=n[m++];)g(y,C,e,i);if(t){if(0<v)for(;b--;)y[b]||C[b]||(C[b]=P.call(o));C=Et(C)}L.apply(o,C),c&&!t&&0<C.length&&1<v+n.length&&at.uniqueSort(o)}return c&&(E=k,h=_),y},a?ht(c):c))).selector=t}return g},l=at.select=function(t,e,i,r){var n,l,h,c,u,d="function"==typeof t&&t,p=!r&&o(t=d.selector||t);if(i=i||[],1===p.length){if(2<(l=p[0]=p[0].slice(0)).length&&"ID"===(h=l[0]).type&&9===e.nodeType&&f&&s.relative[l[1].type]){if(!(e=(s.find.ID(h.matches[0].replace(et,it),e)||[])[0]))return i;d&&(e=e.parentNode),t=t.slice(l.shift().value.length)}for(n=G.needsContext.test(t)?0:l.length;n--&&(h=l[n],!s.relative[c=h.type]);)if((u=s.find[c])&&(r=u(h.matches[0].replace(et,it),tt.test(l[0].type)&&vt(e.parentNode)||e))){if(l.splice(n,1),!(t=r.length&&yt(l)))return L.apply(i,r),i;break}}return(d||a(t,p))(r,e,!f,i,!e||tt.test(t)&&vt(e.parentNode)||e),i},i.sortStable=C.split("").sort(D).join("")===C,i.detectDuplicates=!!u,d(),i.sortDetached=ct((function(t){return 1&t.compareDocumentPosition(p.createElement("fieldset"))})),ct((function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")}))||ut("type|href|height|width",(function(t,e,i){if(!i)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)})),i.attributes&&ct((function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}))||ut("value",(function(t,e,i){if(!i&&"input"===t.nodeName.toLowerCase())return t.defaultValue})),ct((function(t){return null==t.getAttribute("disabled")}))||ut(B,(function(t,e,i){var s;if(!i)return!0===t[e]?e.toLowerCase():(s=t.getAttributeNode(e))&&s.specified?s.value:null})),at}(t);w.find=T,(w.expr=T.selectors)[":"]=w.expr.pseudos,w.uniqueSort=w.unique=T.uniqueSort,w.text=T.getText,w.isXMLDoc=T.isXML,w.contains=T.contains,w.escapeSelector=T.escape;var S=function(t,e,i){for(var s=[],r=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&w(t).is(i))break;s.push(t)}return s},x=function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i},D=w.expr.match.needsContext;function O(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var A=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function P(t,e,i){return g(e)?w.grep(t,(function(t,s){return!!e.call(t,s,t)!==i})):e.nodeType?w.grep(t,(function(t){return t===e!==i})):"string"!=typeof e?w.grep(t,(function(t){return-1<h.call(e,t)!==i})):w.filter(e,t,i)}w.filter=function(t,e,i){var s=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===s.nodeType?w.find.matchesSelector(s,t)?[s]:[]:w.find.matches(t,w.grep(e,(function(t){return 1===t.nodeType})))},w.fn.extend({find:function(t){var e,i,s=this.length,r=this;if("string"!=typeof t)return this.pushStack(w(t).filter((function(){for(e=0;e<s;e++)if(w.contains(r[e],this))return!0})));for(i=this.pushStack([]),e=0;e<s;e++)w.find(t,r[e],i);return 1<s?w.uniqueSort(i):i},filter:function(t){return this.pushStack(P(this,t||[],!1))},not:function(t){return this.pushStack(P(this,t||[],!0))},is:function(t){return!!P(this,"string"==typeof t&&D.test(t)?w(t):t||[],!1).length}});var I,L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(w.fn.init=function(t,e,i){var s,r;if(!t)return this;if(i=i||I,"string"==typeof t){if(!(s="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:L.exec(t))||!s[1]&&e)return!e||e.jquery?(e||i).find(t):this.constructor(e).find(t);if(s[1]){if(e=e instanceof w?e[0]:e,w.merge(this,w.parseHTML(s[1],e&&e.nodeType?e.ownerDocument||e:b,!0)),A.test(s[1])&&w.isPlainObject(e))for(s in e)g(this[s])?this[s](e[s]):this.attr(s,e[s]);return this}return(r=b.getElementById(s[2]))&&(this[0]=r,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):g(t)?void 0!==i.ready?i.ready(t):t(w):w.makeArray(t,this)}).prototype=w.fn,I=w(b);var j=/^(?:parents|prev(?:Until|All))/,N={children:!0,contents:!0,next:!0,prev:!0};function B(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}w.fn.extend({has:function(t){var e=w(t,this),i=e.length;return this.filter((function(){for(var t=0;t<i;t++)if(w.contains(this,e[t]))return!0}))},closest:function(t,e){var i,s=0,r=this.length,n=[],o="string"!=typeof t&&w(t);if(!D.test(t))for(;s<r;s++)for(i=this[s];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(o?-1<o.index(i):1===i.nodeType&&w.find.matchesSelector(i,t))){n.push(i);break}return this.pushStack(1<n.length?w.uniqueSort(n):n)},index:function(t){return t?"string"==typeof t?h.call(w(t),this[0]):h.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),w.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return S(t,"parentNode")},parentsUntil:function(t,e,i){return S(t,"parentNode",i)},next:function(t){return B(t,"nextSibling")},prev:function(t){return B(t,"previousSibling")},nextAll:function(t){return S(t,"nextSibling")},prevAll:function(t){return S(t,"previousSibling")},nextUntil:function(t,e,i){return S(t,"nextSibling",i)},prevUntil:function(t,e,i){return S(t,"previousSibling",i)},siblings:function(t){return x((t.parentNode||{}).firstChild,t)},children:function(t){return x(t.firstChild)},contents:function(t){return null!=t.contentDocument&&r(t.contentDocument)?t.contentDocument:(O(t,"template")&&(t=t.content||t),w.merge([],t.childNodes))}},(function(t,e){w.fn[t]=function(i,s){var r=w.map(this,e,i);return"Until"!==t.slice(-5)&&(s=i),s&&"string"==typeof s&&(r=w.filter(s,r)),1<this.length&&(N[t]||w.uniqueSort(r),j.test(t)&&r.reverse()),this.pushStack(r)}}));var R=/[^\x20\t\r\n\f]+/g;function M(t){return t}function F(t){throw t}function H(t,e,i,s){var r;try{t&&g(r=t.promise)?r.call(t).done(e).fail(i):t&&g(r=t.then)?r.call(t,e,i):e.apply(void 0,[t].slice(s))}catch(t){i.apply(void 0,[t])}}w.Callbacks=function(t){var e;t="string"==typeof t?(e={},w.each(t.match(R)||[],(function(t,i){e[i]=!0})),e):w.extend({},t);var i,s,r,n,o=[],a=[],l=-1,h=function(){for(n=n||t.once,r=i=!0;a.length;l=-1)for(s=a.shift();++l<o.length;)!1===o[l].apply(s[0],s[1])&&t.stopOnFalse&&(l=o.length,s=!1);t.memory||(s=!1),i=!1,n&&(o=s?[]:"")},c={add:function(){return o&&(s&&!i&&(l=o.length-1,a.push(s)),function e(i){w.each(i,(function(i,s){g(s)?t.unique&&c.has(s)||o.push(s):s&&s.length&&"string"!==_(s)&&e(s)}))}(arguments),s&&!i&&h()),this},remove:function(){return w.each(arguments,(function(t,e){for(var i;-1<(i=w.inArray(e,o,i));)o.splice(i,1),i<=l&&l--})),this},has:function(t){return t?-1<w.inArray(t,o):0<o.length},empty:function(){return o&&(o=[]),this},disable:function(){return n=a=[],o=s="",this},disabled:function(){return!o},lock:function(){return n=a=[],s||i||(o=s=""),this},locked:function(){return!!n},fireWith:function(t,e){return n||(e=[t,(e=e||[]).slice?e.slice():e],a.push(e),i||h()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},w.extend({Deferred:function(e){var i=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],s="pending",r={state:function(){return s},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return r.then(null,t)},pipe:function(){var t=arguments;return w.Deferred((function(e){w.each(i,(function(i,s){var r=g(t[s[4]])&&t[s[4]];o[s[1]]((function(){var t=r&&r.apply(this,arguments);t&&g(t.promise)?t.promise().progress(e.notify).done(e.resolve).fail(e.reject):e[s[0]+"With"](this,r?[t]:arguments)}))})),t=null})).promise()},then:function(e,s,r){var o=0;function a(e,i,s,r){return function(){var l=this,h=arguments,c=function(){var t,c;if(!(e<o)){if((t=s.apply(l,h))===i.promise())throw new TypeError("Thenable self-resolution");c=t&&("object"==n(t)||"function"==typeof t)&&t.then,g(c)?r?c.call(t,a(o,i,M,r),a(o,i,F,r)):(o++,c.call(t,a(o,i,M,r),a(o,i,F,r),a(o,i,M,i.notifyWith))):(s!==M&&(l=void 0,h=[t]),(r||i.resolveWith)(l,h))}},u=r?c:function(){try{c()}catch(t){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(t,u.stackTrace),o<=e+1&&(s!==F&&(l=void 0,h=[t]),i.rejectWith(l,h))}};e?u():(w.Deferred.getStackHook&&(u.stackTrace=w.Deferred.getStackHook()),t.setTimeout(u))}}return w.Deferred((function(t){i[0][3].add(a(0,t,g(r)?r:M,t.notifyWith)),i[1][3].add(a(0,t,g(e)?e:M)),i[2][3].add(a(0,t,g(s)?s:F))})).promise()},promise:function(t){return null!=t?w.extend(t,r):r}},o={};return w.each(i,(function(t,e){var n=e[2],a=e[5];r[e[1]]=n.add,a&&n.add((function(){s=a}),i[3-t][2].disable,i[3-t][3].disable,i[0][2].lock,i[0][3].lock),n.add(e[3].fire),o[e[0]]=function(){return o[e[0]+"With"](this===o?void 0:this,arguments),this},o[e[0]+"With"]=n.fireWith})),r.promise(o),e&&e.call(o,o),o},when:function(t){var e=arguments.length,i=e,s=Array(i),r=o.call(arguments),n=w.Deferred(),a=function(t){return function(i){s[t]=this,r[t]=1<arguments.length?o.call(arguments):i,--e||n.resolveWith(s,r)}};if(e<=1&&(H(t,n.done(a(i)).resolve,n.reject,!e),"pending"===n.state()||g(r[i]&&r[i].then)))return n.then();for(;i--;)H(r[i],a(i),n.reject);return n.promise()}});var z=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(e,i){t.console&&t.console.warn&&e&&z.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,i)},w.readyException=function(e){t.setTimeout((function(){throw e}))};var W=w.Deferred();function $(){b.removeEventListener("DOMContentLoaded",$),t.removeEventListener("load",$),w.ready()}w.fn.ready=function(t){return W.then(t).catch((function(t){w.readyException(t)})),this},w.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--w.readyWait:w.isReady)||(w.isReady=!0)!==t&&0<--w.readyWait||W.resolveWith(b,[w])}}),w.ready.then=W.then,"complete"===b.readyState||"loading"!==b.readyState&&!b.documentElement.doScroll?t.setTimeout(w.ready):(b.addEventListener("DOMContentLoaded",$),t.addEventListener("load",$));var U=function t(e,i,s,r,n,o,a){var l=0,h=e.length,c=null==s;if("object"===_(s))for(l in n=!0,s)t(e,i,l,s[l],!0,o,a);else if(void 0!==r&&(n=!0,g(r)||(a=!0),c&&(a?(i.call(e,r),i=null):(c=i,i=function(t,e,i){return c.call(w(t),i)})),i))for(;l<h;l++)i(e[l],s,a?r:r.call(e[l],l,i(e[l],s)));return n?e:c?i.call(e):h?i(e[0],s):o},V=/^-ms-/,q=/-([a-z])/g;function K(t,e){return e.toUpperCase()}function G(t){return t.replace(V,"ms-").replace(q,K)}var Y=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function X(){this.expando=w.expando+X.uid++}X.uid=1,X.prototype={cache:function(t){var e=t[this.expando];return e||(e={},Y(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,i){var s,r=this.cache(t);if("string"==typeof e)r[G(e)]=i;else for(s in e)r[G(s)]=e[s];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][G(e)]},access:function(t,e,i){return void 0===e||e&&"string"==typeof e&&void 0===i?this.get(t,e):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,s=t[this.expando];if(void 0!==s){if(void 0!==e){i=(e=Array.isArray(e)?e.map(G):(e=G(e))in s?[e]:e.match(R)||[]).length;for(;i--;)delete s[e[i]]}(void 0===e||w.isEmptyObject(s))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!w.isEmptyObject(e)}};var J=new X,Q=new X,Z=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,tt=/[A-Z]/g;function et(t,e,i){var s,r;if(void 0===i&&1===t.nodeType)if(s="data-"+e.replace(tt,"-$&").toLowerCase(),"string"==typeof(i=t.getAttribute(s))){try{i="true"===(r=i)||"false"!==r&&("null"===r?null:r===+r+""?+r:Z.test(r)?JSON.parse(r):r)}catch(t){}Q.set(t,e,i)}else i=void 0;return i}w.extend({hasData:function(t){return Q.hasData(t)||J.hasData(t)},data:function(t,e,i){return Q.access(t,e,i)},removeData:function(t,e){Q.remove(t,e)},_data:function(t,e,i){return J.access(t,e,i)},_removeData:function(t,e){J.remove(t,e)}}),w.fn.extend({data:function(t,e){var i,s,r,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(r=Q.get(o),1===o.nodeType&&!J.get(o,"hasDataAttrs"))){for(i=a.length;i--;)a[i]&&0===(s=a[i].name).indexOf("data-")&&(s=G(s.slice(5)),et(o,s,r[s]));J.set(o,"hasDataAttrs",!0)}return r}return"object"==n(t)?this.each((function(){Q.set(this,t)})):U(this,(function(e){var i;if(o&&void 0===e)return void 0!==(i=Q.get(o,t))||void 0!==(i=et(o,t))?i:void 0;this.each((function(){Q.set(this,t,e)}))}),null,e,1<arguments.length,null,!0)},removeData:function(t){return this.each((function(){Q.remove(this,t)}))}}),w.extend({queue:function(t,e,i){var s;if(t)return e=(e||"fx")+"queue",s=J.get(t,e),i&&(!s||Array.isArray(i)?s=J.access(t,e,w.makeArray(i)):s.push(i)),s||[]},dequeue:function(t,e){var i=w.queue(t,e=e||"fx"),s=i.length,r=i.shift(),n=w._queueHooks(t,e);"inprogress"===r&&(r=i.shift(),s--),r&&("fx"===e&&i.unshift("inprogress"),delete n.stop,r.call(t,(function(){w.dequeue(t,e)}),n)),!s&&n&&n.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return J.get(t,i)||J.access(t,i,{empty:w.Callbacks("once memory").add((function(){J.remove(t,[e+"queue",i])}))})}}),w.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?w.queue(this[0],t):void 0===e?this:this.each((function(){var i=w.queue(this,t,e);w._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&w.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){w.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,s=1,r=w.Deferred(),n=this,o=this.length,a=function(){--s||r.resolveWith(n,[n])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";o--;)(i=J.get(n[o],t+"queueHooks"))&&i.empty&&(s++,i.empty.add(a));return a(),r.promise(e)}});var it=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,st=new RegExp("^(?:([+-])=|)("+it+")([a-z%]*)$","i"),rt=["Top","Right","Bottom","Left"],nt=b.documentElement,ot=function(t){return w.contains(t.ownerDocument,t)},at={composed:!0};nt.getRootNode&&(ot=function(t){return w.contains(t.ownerDocument,t)||t.getRootNode(at)===t.ownerDocument});var lt=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&ot(t)&&"none"===w.css(t,"display")};function ht(t,e,i,s){var r,n,o=20,a=s?function(){return s.cur()}:function(){return w.css(t,e,"")},l=a(),h=i&&i[3]||(w.cssNumber[e]?"":"px"),c=t.nodeType&&(w.cssNumber[e]||"px"!==h&&+l)&&st.exec(w.css(t,e));if(c&&c[3]!==h){for(l/=2,h=h||c[3],c=+l||1;o--;)w.style(t,e,c+h),(1-n)*(1-(n=a()/l||.5))<=0&&(o=0),c/=n;w.style(t,e,(c*=2)+h),i=i||[]}return i&&(c=+c||+l||0,r=i[1]?c+(i[1]+1)*i[2]:+i[2],s&&(s.unit=h,s.start=c,s.end=r)),r}var ct={};function ut(t,e){for(var i,s,r,n,o,a,l,h=[],c=0,u=t.length;c<u;c++)(s=t[c]).style&&(i=s.style.display,e?("none"===i&&(h[c]=J.get(s,"display")||null,h[c]||(s.style.display="")),""===s.style.display&&lt(s)&&(h[c]=(l=o=n=void 0,o=(r=s).ownerDocument,a=r.nodeName,(l=ct[a])||(n=o.body.appendChild(o.createElement(a)),l=w.css(n,"display"),n.parentNode.removeChild(n),"none"===l&&(l="block"),ct[a]=l)))):"none"!==i&&(h[c]="none",J.set(s,"display",i)));for(c=0;c<u;c++)null!=h[c]&&(t[c].style.display=h[c]);return t}w.fn.extend({show:function(){return ut(this,!0)},hide:function(){return ut(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){lt(this)?w(this).show():w(this).hide()}))}});var dt,pt,mt=/^(?:checkbox|radio)$/i,ft=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,gt=/^$|^module$|\/(?:java|ecma)script/i;dt=b.createDocumentFragment().appendChild(b.createElement("div")),(pt=b.createElement("input")).setAttribute("type","radio"),pt.setAttribute("checked","checked"),pt.setAttribute("name","t"),dt.appendChild(pt),f.checkClone=dt.cloneNode(!0).cloneNode(!0).lastChild.checked,dt.innerHTML="<textarea>x</textarea>",f.noCloneChecked=!!dt.cloneNode(!0).lastChild.defaultValue,dt.innerHTML="<option></option>",f.option=!!dt.lastChild;var vt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function bt(t,e){var i;return i=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&O(t,e)?w.merge([t],i):i}function yt(t,e){for(var i=0,s=t.length;i<s;i++)J.set(t[i],"globalEval",!e||J.get(e[i],"globalEval"))}vt.tbody=vt.tfoot=vt.colgroup=vt.caption=vt.thead,vt.th=vt.td,f.option||(vt.optgroup=vt.option=[1,"<select multiple='multiple'>","</select>"]);var Ct=/<|&#?\w+;/;function _t(t,e,i,s,r){for(var n,o,a,l,h,c,u=e.createDocumentFragment(),d=[],p=0,m=t.length;p<m;p++)if((n=t[p])||0===n)if("object"===_(n))w.merge(d,n.nodeType?[n]:n);else if(Ct.test(n)){for(o=o||u.appendChild(e.createElement("div")),a=(ft.exec(n)||["",""])[1].toLowerCase(),l=vt[a]||vt._default,o.innerHTML=l[1]+w.htmlPrefilter(n)+l[2],c=l[0];c--;)o=o.lastChild;w.merge(d,o.childNodes),(o=u.firstChild).textContent=""}else d.push(e.createTextNode(n));for(u.textContent="",p=0;n=d[p++];)if(s&&-1<w.inArray(n,s))r&&r.push(n);else if(h=ot(n),o=bt(u.appendChild(n),"script"),h&&yt(o),i)for(c=0;n=o[c++];)gt.test(n.type||"")&&i.push(n);return u}var Et=/^([^.]*)(?:\.(.+)|)/;function wt(){return!0}function kt(){return!1}function Tt(t,e){return t===function(){try{return b.activeElement}catch(t){}}()==("focus"===e)}function St(t,e,i,s,r,o){var a,l;if("object"==n(e)){for(l in"string"!=typeof i&&(s=s||i,i=void 0),e)St(t,l,i,s,e[l],o);return t}if(null==s&&null==r?(r=i,s=i=void 0):null==r&&("string"==typeof i?(r=s,s=void 0):(r=s,s=i,i=void 0)),!1===r)r=kt;else if(!r)return t;return 1===o&&(a=r,(r=function(t){return w().off(t),a.apply(this,arguments)}).guid=a.guid||(a.guid=w.guid++)),t.each((function(){w.event.add(this,e,r,s,i)}))}function xt(t,e,i){i?(J.set(t,e,!1),w.event.add(t,e,{namespace:!1,handler:function(t){var s,r,n=J.get(this,e);if(1&t.isTrigger&&this[e]){if(n.length)(w.event.special[e]||{}).delegateType&&t.stopPropagation();else if(n=o.call(arguments),J.set(this,e,n),s=i(this,e),this[e](),n!==(r=J.get(this,e))||s?J.set(this,e,!1):r={},n!==r)return t.stopImmediatePropagation(),t.preventDefault(),r&&r.value}else n.length&&(J.set(this,e,{value:w.event.trigger(w.extend(n[0],w.Event.prototype),n.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===J.get(t,e)&&w.event.add(t,e,wt)}w.event={global:{},add:function(t,e,i,s,r){var n,o,a,l,h,c,u,d,p,m,f,g=J.get(t);if(Y(t))for(i.handler&&(i=(n=i).handler,r=n.selector),r&&w.find.matchesSelector(nt,r),i.guid||(i.guid=w.guid++),(l=g.events)||(l=g.events=Object.create(null)),(o=g.handle)||(o=g.handle=function(e){return void 0!==w&&w.event.triggered!==e.type?w.event.dispatch.apply(t,arguments):void 0}),h=(e=(e||"").match(R)||[""]).length;h--;)p=f=(a=Et.exec(e[h])||[])[1],m=(a[2]||"").split(".").sort(),p&&(u=w.event.special[p]||{},p=(r?u.delegateType:u.bindType)||p,u=w.event.special[p]||{},c=w.extend({type:p,origType:f,data:s,handler:i,guid:i.guid,selector:r,needsContext:r&&w.expr.match.needsContext.test(r),namespace:m.join(".")},n),(d=l[p])||((d=l[p]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(t,s,m,o)||t.addEventListener&&t.addEventListener(p,o)),u.add&&(u.add.call(t,c),c.handler.guid||(c.handler.guid=i.guid)),r?d.splice(d.delegateCount++,0,c):d.push(c),w.event.global[p]=!0)},remove:function(t,e,i,s,r){var n,o,a,l,h,c,u,d,p,m,f,g=J.hasData(t)&&J.get(t);if(g&&(l=g.events)){for(h=(e=(e||"").match(R)||[""]).length;h--;)if(p=f=(a=Et.exec(e[h])||[])[1],m=(a[2]||"").split(".").sort(),p){for(u=w.event.special[p]||{},d=l[p=(s?u.delegateType:u.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=n=d.length;n--;)c=d[n],!r&&f!==c.origType||i&&i.guid!==c.guid||a&&!a.test(c.namespace)||s&&s!==c.selector&&("**"!==s||!c.selector)||(d.splice(n,1),c.selector&&d.delegateCount--,u.remove&&u.remove.call(t,c));o&&!d.length&&(u.teardown&&!1!==u.teardown.call(t,m,g.handle)||w.removeEvent(t,p,g.handle),delete l[p])}else for(p in l)w.event.remove(t,p+e[h],i,s,!0);w.isEmptyObject(l)&&J.remove(t,"handle events")}},dispatch:function(t){var e,i,s,r,n,o,a=new Array(arguments.length),l=w.event.fix(t),h=(J.get(this,"events")||Object.create(null))[l.type]||[],c=w.event.special[l.type]||{};for(a[0]=l,e=1;e<arguments.length;e++)a[e]=arguments[e];if(l.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,l)){for(o=w.event.handlers.call(this,l,h),e=0;(r=o[e++])&&!l.isPropagationStopped();)for(l.currentTarget=r.elem,i=0;(n=r.handlers[i++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==n.namespace&&!l.rnamespace.test(n.namespace)||(l.handleObj=n,l.data=n.data,void 0!==(s=((w.event.special[n.origType]||{}).handle||n.handler).apply(r.elem,a))&&!1===(l.result=s)&&(l.preventDefault(),l.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,l),l.result}},handlers:function(t,e){var i,s,r,n,o,a=[],l=e.delegateCount,h=t.target;if(l&&h.nodeType&&!("click"===t.type&&1<=t.button))for(;h!==this;h=h.parentNode||this)if(1===h.nodeType&&("click"!==t.type||!0!==h.disabled)){for(n=[],o={},i=0;i<l;i++)void 0===o[r=(s=e[i]).selector+" "]&&(o[r]=s.needsContext?-1<w(r,this).index(h):w.find(r,this,null,[h]).length),o[r]&&n.push(s);n.length&&a.push({elem:h,handlers:n})}return h=this,l<e.length&&a.push({elem:h,handlers:e.slice(l)}),a},addProp:function(t,e){Object.defineProperty(w.Event.prototype,t,{enumerable:!0,configurable:!0,get:g(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[w.expando]?t:new w.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return mt.test(e.type)&&e.click&&O(e,"input")&&xt(e,"click",wt),!1},trigger:function(t){var e=this||t;return mt.test(e.type)&&e.click&&O(e,"input")&&xt(e,"click"),!0},_default:function(t){var e=t.target;return mt.test(e.type)&&e.click&&O(e,"input")&&J.get(e,"click")||O(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},w.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i)},(w.Event=function(t,e){if(!(this instanceof w.Event))return new w.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?wt:kt,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&w.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[w.expando]=!0}).prototype={constructor:w.Event,isDefaultPrevented:kt,isPropagationStopped:kt,isImmediatePropagationStopped:kt,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=wt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=wt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=wt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},w.event.addProp),w.each({focus:"focusin",blur:"focusout"},(function(t,e){w.event.special[t]={setup:function(){return xt(this,t,Tt),!1},trigger:function(){return xt(this,t),!0},_default:function(){return!0},delegateType:e}})),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){w.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,s=t.relatedTarget,r=t.handleObj;return s&&(s===this||w.contains(this,s))||(t.type=r.origType,i=r.handler.apply(this,arguments),t.type=e),i}}})),w.fn.extend({on:function(t,e,i,s){return St(this,t,e,i,s)},one:function(t,e,i,s){return St(this,t,e,i,s,1)},off:function(t,e,i){var s,r;if(t&&t.preventDefault&&t.handleObj)return s=t.handleObj,w(t.delegateTarget).off(s.namespace?s.origType+"."+s.namespace:s.origType,s.selector,s.handler),this;if("object"==n(t)){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(i=e,e=void 0),!1===i&&(i=kt),this.each((function(){w.event.remove(this,t,i,e)}))}});var Dt=/<script|<style|<link/i,Ot=/checked\s*(?:[^=]|=\s*.checked.)/i,At=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Pt(t,e){return O(t,"table")&&O(11!==e.nodeType?e:e.firstChild,"tr")&&w(t).children("tbody")[0]||t}function It(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Lt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function jt(t,e){var i,s,r,n,o,a;if(1===e.nodeType){if(J.hasData(t)&&(a=J.get(t).events))for(r in J.remove(e,"handle events"),a)for(i=0,s=a[r].length;i<s;i++)w.event.add(e,r,a[r][i]);Q.hasData(t)&&(n=Q.access(t),o=w.extend({},n),Q.set(e,o))}}function Nt(t,e,i,s){e=a(e);var r,n,o,l,h,c,u=0,d=t.length,p=d-1,m=e[0],v=g(m);if(v||1<d&&"string"==typeof m&&!f.checkClone&&Ot.test(m))return t.each((function(r){var n=t.eq(r);v&&(e[0]=m.call(this,r,n.html())),Nt(n,e,i,s)}));if(d&&(n=(r=_t(e,t[0].ownerDocument,!1,t,s)).firstChild,1===r.childNodes.length&&(r=n),n||s)){for(l=(o=w.map(bt(r,"script"),It)).length;u<d;u++)h=r,u!==p&&(h=w.clone(h,!0,!0),l&&w.merge(o,bt(h,"script"))),i.call(t[u],h,u);if(l)for(c=o[o.length-1].ownerDocument,w.map(o,Lt),u=0;u<l;u++)h=o[u],gt.test(h.type||"")&&!J.access(h,"globalEval")&&w.contains(c,h)&&(h.src&&"module"!==(h.type||"").toLowerCase()?w._evalUrl&&!h.noModule&&w._evalUrl(h.src,{nonce:h.nonce||h.getAttribute("nonce")},c):C(h.textContent.replace(At,""),h,c))}return t}function Bt(t,e,i){for(var s,r=e?w.filter(e,t):t,n=0;null!=(s=r[n]);n++)i||1!==s.nodeType||w.cleanData(bt(s)),s.parentNode&&(i&&ot(s)&&yt(bt(s,"script")),s.parentNode.removeChild(s));return t}w.extend({htmlPrefilter:function(t){return t},clone:function(t,e,i){var s,r,n,o,a,l,h,c=t.cloneNode(!0),u=ot(t);if(!(f.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||w.isXMLDoc(t)))for(o=bt(c),s=0,r=(n=bt(t)).length;s<r;s++)a=n[s],"input"===(h=(l=o[s]).nodeName.toLowerCase())&&mt.test(a.type)?l.checked=a.checked:"input"!==h&&"textarea"!==h||(l.defaultValue=a.defaultValue);if(e)if(i)for(n=n||bt(t),o=o||bt(c),s=0,r=n.length;s<r;s++)jt(n[s],o[s]);else jt(t,c);return 0<(o=bt(c,"script")).length&&yt(o,!u&&bt(t,"script")),c},cleanData:function(t){for(var e,i,s,r=w.event.special,n=0;void 0!==(i=t[n]);n++)if(Y(i)){if(e=i[J.expando]){if(e.events)for(s in e.events)r[s]?w.event.remove(i,s):w.removeEvent(i,s,e.handle);i[J.expando]=void 0}i[Q.expando]&&(i[Q.expando]=void 0)}}}),w.fn.extend({detach:function(t){return Bt(this,t,!0)},remove:function(t){return Bt(this,t)},text:function(t){return U(this,(function(t){return void 0===t?w.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return Nt(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Pt(this,t).appendChild(t)}))},prepend:function(){return Nt(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Pt(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return Nt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return Nt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(w.cleanData(bt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return w.clone(this,t,e)}))},html:function(t){return U(this,(function(t){var e=this[0]||{},i=0,s=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Dt.test(t)&&!vt[(ft.exec(t)||["",""])[1].toLowerCase()]){t=w.htmlPrefilter(t);try{for(;i<s;i++)1===(e=this[i]||{}).nodeType&&(w.cleanData(bt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return Nt(this,arguments,(function(e){var i=this.parentNode;w.inArray(this,t)<0&&(w.cleanData(bt(this)),i&&i.replaceChild(e,this))}),t)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){w.fn[t]=function(t){for(var i,s=[],r=w(t),n=r.length-1,o=0;o<=n;o++)i=o===n?this:this.clone(!0),w(r[o])[e](i),l.apply(s,i.get());return this.pushStack(s)}}));var Rt=new RegExp("^("+it+")(?!px)[a-z%]+$","i"),Mt=function(e){var i=e.ownerDocument.defaultView;return i&&i.opener||(i=t),i.getComputedStyle(e)},Ft=function(t,e,i){var s,r,n={};for(r in e)n[r]=t.style[r],t.style[r]=e[r];for(r in s=i.call(t),e)t.style[r]=n[r];return s},Ht=new RegExp(rt.join("|"),"i");function zt(t,e,i){var s,r,n,o,a=t.style;return(i=i||Mt(t))&&(""!==(o=i.getPropertyValue(e)||i[e])||ot(t)||(o=w.style(t,e)),!f.pixelBoxStyles()&&Rt.test(o)&&Ht.test(e)&&(s=a.width,r=a.minWidth,n=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=i.width,a.width=s,a.minWidth=r,a.maxWidth=n)),void 0!==o?o+"":o}function Wt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function e(){if(c){h.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",nt.appendChild(h).appendChild(c);var e=t.getComputedStyle(c);s="1%"!==e.top,l=12===i(e.marginLeft),c.style.right="60%",o=36===i(e.right),r=36===i(e.width),c.style.position="absolute",n=12===i(c.offsetWidth/3),nt.removeChild(h),c=null}}function i(t){return Math.round(parseFloat(t))}var s,r,n,o,a,l,h=b.createElement("div"),c=b.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",f.clearCloneStyle="content-box"===c.style.backgroundClip,w.extend(f,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),s},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),n},reliableTrDimensions:function(){var e,i,s,r;return null==a&&(e=b.createElement("table"),i=b.createElement("tr"),s=b.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",i.style.cssText="border:1px solid",i.style.height="1px",s.style.height="9px",s.style.display="block",nt.appendChild(e).appendChild(i).appendChild(s),r=t.getComputedStyle(i),a=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===i.offsetHeight,nt.removeChild(e)),a}}))}();var $t=["Webkit","Moz","ms"],Ut=b.createElement("div").style,Vt={};function qt(t){return w.cssProps[t]||Vt[t]||(t in Ut?t:Vt[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),i=$t.length;i--;)if((t=$t[i]+e)in Ut)return t}(t)||t)}var Kt=/^(none|table(?!-c[ea]).+)/,Gt=/^--/,Yt={position:"absolute",visibility:"hidden",display:"block"},Xt={letterSpacing:"0",fontWeight:"400"};function Jt(t,e,i){var s=st.exec(e);return s?Math.max(0,s[2]-(i||0))+(s[3]||"px"):e}function Qt(t,e,i,s,r,n){var o="width"===e?1:0,a=0,l=0;if(i===(s?"border":"content"))return 0;for(;o<4;o+=2)"margin"===i&&(l+=w.css(t,i+rt[o],!0,r)),s?("content"===i&&(l-=w.css(t,"padding"+rt[o],!0,r)),"margin"!==i&&(l-=w.css(t,"border"+rt[o]+"Width",!0,r))):(l+=w.css(t,"padding"+rt[o],!0,r),"padding"!==i?l+=w.css(t,"border"+rt[o]+"Width",!0,r):a+=w.css(t,"border"+rt[o]+"Width",!0,r));return!s&&0<=n&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-n-l-a-.5))||0),l}function Zt(t,e,i){var s=Mt(t),r=(!f.boxSizingReliable()||i)&&"border-box"===w.css(t,"boxSizing",!1,s),n=r,o=zt(t,e,s),a="offset"+e[0].toUpperCase()+e.slice(1);if(Rt.test(o)){if(!i)return o;o="auto"}return(!f.boxSizingReliable()&&r||!f.reliableTrDimensions()&&O(t,"tr")||"auto"===o||!parseFloat(o)&&"inline"===w.css(t,"display",!1,s))&&t.getClientRects().length&&(r="border-box"===w.css(t,"boxSizing",!1,s),(n=a in t)&&(o=t[a])),(o=parseFloat(o)||0)+Qt(t,e,i||(r?"border":"content"),n,s,o)+"px"}function te(t,e,i,s,r){return new te.prototype.init(t,e,i,s,r)}w.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=zt(t,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,i,s){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,a,l=G(e),h=Gt.test(e),c=t.style;if(h||(e=qt(l)),a=w.cssHooks[e]||w.cssHooks[l],void 0===i)return a&&"get"in a&&void 0!==(r=a.get(t,!1,s))?r:c[e];"string"===(o=n(i))&&(r=st.exec(i))&&r[1]&&(i=ht(t,e,r),o="number"),null!=i&&i==i&&("number"!==o||h||(i+=r&&r[3]||(w.cssNumber[l]?"":"px")),f.clearCloneStyle||""!==i||0!==e.indexOf("background")||(c[e]="inherit"),a&&"set"in a&&void 0===(i=a.set(t,i,s))||(h?c.setProperty(e,i):c[e]=i))}},css:function(t,e,i,s){var r,n,o,a=G(e);return Gt.test(e)||(e=qt(a)),(o=w.cssHooks[e]||w.cssHooks[a])&&"get"in o&&(r=o.get(t,!0,i)),void 0===r&&(r=zt(t,e,s)),"normal"===r&&e in Xt&&(r=Xt[e]),""===i||i?(n=parseFloat(r),!0===i||isFinite(n)?n||0:r):r}}),w.each(["height","width"],(function(t,e){w.cssHooks[e]={get:function(t,i,s){if(i)return!Kt.test(w.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?Zt(t,e,s):Ft(t,Yt,(function(){return Zt(t,e,s)}))},set:function(t,i,s){var r,n=Mt(t),o=!f.scrollboxSize()&&"absolute"===n.position,a=(o||s)&&"border-box"===w.css(t,"boxSizing",!1,n),l=s?Qt(t,e,s,a,n):0;return a&&o&&(l-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(n[e])-Qt(t,e,"border",!1,n)-.5)),l&&(r=st.exec(i))&&"px"!==(r[3]||"px")&&(t.style[e]=i,i=w.css(t,e)),Jt(0,i,l)}}})),w.cssHooks.marginLeft=Wt(f.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(zt(t,"marginLeft"))||t.getBoundingClientRect().left-Ft(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),w.each({margin:"",padding:"",border:"Width"},(function(t,e){w.cssHooks[t+e]={expand:function(i){for(var s=0,r={},n="string"==typeof i?i.split(" "):[i];s<4;s++)r[t+rt[s]+e]=n[s]||n[s-2]||n[0];return r}},"margin"!==t&&(w.cssHooks[t+e].set=Jt)})),w.fn.extend({css:function(t,e){return U(this,(function(t,e,i){var s,r,n={},o=0;if(Array.isArray(e)){for(s=Mt(t),r=e.length;o<r;o++)n[e[o]]=w.css(t,e[o],!1,s);return n}return void 0!==i?w.style(t,e,i):w.css(t,e)}),t,e,1<arguments.length)}}),((w.Tween=te).prototype={constructor:te,init:function(t,e,i,s,r,n){this.elem=t,this.prop=i,this.easing=r||w.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=s,this.unit=n||(w.cssNumber[i]?"":"px")},cur:function(){var t=te.propHooks[this.prop];return t&&t.get?t.get(this):te.propHooks._default.get(this)},run:function(t){var e,i=te.propHooks[this.prop];return this.options.duration?this.pos=e=w.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):te.propHooks._default.set(this),this}}).init.prototype=te.prototype,(te.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=w.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){w.fx.step[t.prop]?w.fx.step[t.prop](t):1!==t.elem.nodeType||!w.cssHooks[t.prop]&&null==t.elem.style[qt(t.prop)]?t.elem[t.prop]=t.now:w.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=te.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},w.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},(w.fx=te.prototype.init).step={};var ee,ie,se,re,ne=/^(?:toggle|show|hide)$/,oe=/queueHooks$/;function ae(){ie&&(!1===b.hidden&&t.requestAnimationFrame?t.requestAnimationFrame(ae):t.setTimeout(ae,w.fx.interval),w.fx.tick())}function le(){return t.setTimeout((function(){ee=void 0})),ee=Date.now()}function he(t,e){var i,s=0,r={height:t};for(e=e?1:0;s<4;s+=2-e)r["margin"+(i=rt[s])]=r["padding"+i]=t;return e&&(r.opacity=r.width=t),r}function ce(t,e,i){for(var s,r=(ue.tweeners[e]||[]).concat(ue.tweeners["*"]),n=0,o=r.length;n<o;n++)if(s=r[n].call(i,e,t))return s}function ue(t,e,i){var s,r,n=0,o=ue.prefilters.length,a=w.Deferred().always((function(){delete l.elem})),l=function(){if(r)return!1;for(var e=ee||le(),i=Math.max(0,h.startTime+h.duration-e),s=1-(i/h.duration||0),n=0,o=h.tweens.length;n<o;n++)h.tweens[n].run(s);return a.notifyWith(t,[h,s,i]),s<1&&o?i:(o||a.notifyWith(t,[h,1,0]),a.resolveWith(t,[h]),!1)},h=a.promise({elem:t,props:w.extend({},e),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},i),originalProperties:e,originalOptions:i,startTime:ee||le(),duration:i.duration,tweens:[],createTween:function(e,i){var s=w.Tween(t,h.opts,e,i,h.opts.specialEasing[e]||h.opts.easing);return h.tweens.push(s),s},stop:function(e){var i=0,s=e?h.tweens.length:0;if(r)return this;for(r=!0;i<s;i++)h.tweens[i].run(1);return e?(a.notifyWith(t,[h,1,0]),a.resolveWith(t,[h,e])):a.rejectWith(t,[h,e]),this}}),c=h.props;for(function(t,e){var i,s,r,n,o;for(i in t)if(r=e[s=G(i)],n=t[i],Array.isArray(n)&&(r=n[1],n=t[i]=n[0]),i!==s&&(t[s]=n,delete t[i]),(o=w.cssHooks[s])&&"expand"in o)for(i in n=o.expand(n),delete t[s],n)i in t||(t[i]=n[i],e[i]=r);else e[s]=r}(c,h.opts.specialEasing);n<o;n++)if(s=ue.prefilters[n].call(h,t,c,h.opts))return g(s.stop)&&(w._queueHooks(h.elem,h.opts.queue).stop=s.stop.bind(s)),s;return w.map(c,ce,h),g(h.opts.start)&&h.opts.start.call(t,h),h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always),w.fx.timer(w.extend(l,{elem:t,anim:h,queue:h.opts.queue})),h}w.Animation=w.extend(ue,{tweeners:{"*":[function(t,e){var i=this.createTween(t,e);return ht(i.elem,t,st.exec(e),i),i}]},tweener:function(t,e){g(t)?(e=t,t=["*"]):t=t.match(R);for(var i,s=0,r=t.length;s<r;s++)i=t[s],ue.tweeners[i]=ue.tweeners[i]||[],ue.tweeners[i].unshift(e)},prefilters:[function(t,e,i){var s,r,n,o,a,l,h,c,u="width"in e||"height"in e,d=this,p={},m=t.style,f=t.nodeType&&lt(t),g=J.get(t,"fxshow");for(s in i.queue||(null==(o=w._queueHooks(t,"fx")).unqueued&&(o.unqueued=0,a=o.empty.fire,o.empty.fire=function(){o.unqueued||a()}),o.unqueued++,d.always((function(){d.always((function(){o.unqueued--,w.queue(t,"fx").length||o.empty.fire()}))}))),e)if(r=e[s],ne.test(r)){if(delete e[s],n=n||"toggle"===r,r===(f?"hide":"show")){if("show"!==r||!g||void 0===g[s])continue;f=!0}p[s]=g&&g[s]||w.style(t,s)}if((l=!w.isEmptyObject(e))||!w.isEmptyObject(p))for(s in u&&1===t.nodeType&&(i.overflow=[m.overflow,m.overflowX,m.overflowY],null==(h=g&&g.display)&&(h=J.get(t,"display")),"none"===(c=w.css(t,"display"))&&(h?c=h:(ut([t],!0),h=t.style.display||h,c=w.css(t,"display"),ut([t]))),("inline"===c||"inline-block"===c&&null!=h)&&"none"===w.css(t,"float")&&(l||(d.done((function(){m.display=h})),null==h&&(c=m.display,h="none"===c?"":c)),m.display="inline-block")),i.overflow&&(m.overflow="hidden",d.always((function(){m.overflow=i.overflow[0],m.overflowX=i.overflow[1],m.overflowY=i.overflow[2]}))),l=!1,p)l||(g?"hidden"in g&&(f=g.hidden):g=J.access(t,"fxshow",{display:h}),n&&(g.hidden=!f),f&&ut([t],!0),d.done((function(){for(s in f||ut([t]),J.remove(t,"fxshow"),p)w.style(t,s,p[s])}))),l=ce(f?g[s]:0,s,d),s in g||(g[s]=l.start,f&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?ue.prefilters.unshift(t):ue.prefilters.push(t)}}),w.speed=function(t,e,i){var s=t&&"object"==n(t)?w.extend({},t):{complete:i||!i&&e||g(t)&&t,duration:t,easing:i&&e||e&&!g(e)&&e};return w.fx.off?s.duration=0:"number"!=typeof s.duration&&(s.duration in w.fx.speeds?s.duration=w.fx.speeds[s.duration]:s.duration=w.fx.speeds._default),null!=s.queue&&!0!==s.queue||(s.queue="fx"),s.old=s.complete,s.complete=function(){g(s.old)&&s.old.call(this),s.queue&&w.dequeue(this,s.queue)},s},w.fn.extend({fadeTo:function(t,e,i,s){return this.filter(lt).css("opacity",0).show().end().animate({opacity:e},t,i,s)},animate:function(t,e,i,s){var r=w.isEmptyObject(t),n=w.speed(e,i,s),o=function(){var e=ue(this,w.extend({},t),n);(r||J.get(this,"finish"))&&e.stop(!0)};return o.finish=o,r||!1===n.queue?this.each(o):this.queue(n.queue,o)},stop:function(t,e,i){var s=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each((function(){var e=!0,r=null!=t&&t+"queueHooks",n=w.timers,o=J.get(this);if(r)o[r]&&o[r].stop&&s(o[r]);else for(r in o)o[r]&&o[r].stop&&oe.test(r)&&s(o[r]);for(r=n.length;r--;)n[r].elem!==this||null!=t&&n[r].queue!==t||(n[r].anim.stop(i),e=!1,n.splice(r,1));!e&&i||w.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,i=J.get(this),s=i[t+"queue"],r=i[t+"queueHooks"],n=w.timers,o=s?s.length:0;for(i.finish=!0,w.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=n.length;e--;)n[e].elem===this&&n[e].queue===t&&(n[e].anim.stop(!0),n.splice(e,1));for(e=0;e<o;e++)s[e]&&s[e].finish&&s[e].finish.call(this);delete i.finish}))}}),w.each(["toggle","show","hide"],(function(t,e){var i=w.fn[e];w.fn[e]=function(t,s,r){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(he(e,!0),t,s,r)}})),w.each({slideDown:he("show"),slideUp:he("hide"),slideToggle:he("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){w.fn[t]=function(t,i,s){return this.animate(e,t,i,s)}})),w.timers=[],w.fx.tick=function(){var t,e=0,i=w.timers;for(ee=Date.now();e<i.length;e++)(t=i[e])()||i[e]!==t||i.splice(e--,1);i.length||w.fx.stop(),ee=void 0},w.fx.timer=function(t){w.timers.push(t),w.fx.start()},w.fx.interval=13,w.fx.start=function(){ie||(ie=!0,ae())},w.fx.stop=function(){ie=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(e,i){return e=w.fx&&w.fx.speeds[e]||e,i=i||"fx",this.queue(i,(function(i,s){var r=t.setTimeout(i,e);s.stop=function(){t.clearTimeout(r)}}))},se=b.createElement("input"),re=b.createElement("select").appendChild(b.createElement("option")),se.type="checkbox",f.checkOn=""!==se.value,f.optSelected=re.selected,(se=b.createElement("input")).value="t",se.type="radio",f.radioValue="t"===se.value;var de,pe=w.expr.attrHandle;w.fn.extend({attr:function(t,e){return U(this,w.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each((function(){w.removeAttr(this,t)}))}}),w.extend({attr:function(t,e,i){var s,r,n=t.nodeType;if(3!==n&&8!==n&&2!==n)return void 0===t.getAttribute?w.prop(t,e,i):(1===n&&w.isXMLDoc(t)||(r=w.attrHooks[e.toLowerCase()]||(w.expr.match.bool.test(e)?de:void 0)),void 0!==i?null===i?void w.removeAttr(t,e):r&&"set"in r&&void 0!==(s=r.set(t,i,e))?s:(t.setAttribute(e,i+""),i):r&&"get"in r&&null!==(s=r.get(t,e))?s:null==(s=w.find.attr(t,e))?void 0:s)},attrHooks:{type:{set:function(t,e){if(!f.radioValue&&"radio"===e&&O(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},removeAttr:function(t,e){var i,s=0,r=e&&e.match(R);if(r&&1===t.nodeType)for(;i=r[s++];)t.removeAttribute(i)}}),de={set:function(t,e,i){return!1===e?w.removeAttr(t,i):t.setAttribute(i,i),i}},w.each(w.expr.match.bool.source.match(/\w+/g),(function(t,e){var i=pe[e]||w.find.attr;pe[e]=function(t,e,s){var r,n,o=e.toLowerCase();return s||(n=pe[o],pe[o]=r,r=null!=i(t,e,s)?o:null,pe[o]=n),r}}));var me=/^(?:input|select|textarea|button)$/i,fe=/^(?:a|area)$/i;function ge(t){return(t.match(R)||[]).join(" ")}function ve(t){return t.getAttribute&&t.getAttribute("class")||""}function be(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(R)||[]}w.fn.extend({prop:function(t,e){return U(this,w.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each((function(){delete this[w.propFix[t]||t]}))}}),w.extend({prop:function(t,e,i){var s,r,n=t.nodeType;if(3!==n&&8!==n&&2!==n)return 1===n&&w.isXMLDoc(t)||(e=w.propFix[e]||e,r=w.propHooks[e]),void 0!==i?r&&"set"in r&&void 0!==(s=r.set(t,i,e))?s:t[e]=i:r&&"get"in r&&null!==(s=r.get(t,e))?s:t[e]},propHooks:{tabIndex:{get:function(t){var e=w.find.attr(t,"tabindex");return e?parseInt(e,10):me.test(t.nodeName)||fe.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),f.optSelected||(w.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){w.propFix[this.toLowerCase()]=this})),w.fn.extend({addClass:function(t){var e,i,s,r,n,o,a,l=0;if(g(t))return this.each((function(e){w(this).addClass(t.call(this,e,ve(this)))}));if((e=be(t)).length)for(;i=this[l++];)if(r=ve(i),s=1===i.nodeType&&" "+ge(r)+" "){for(o=0;n=e[o++];)s.indexOf(" "+n+" ")<0&&(s+=n+" ");r!==(a=ge(s))&&i.setAttribute("class",a)}return this},removeClass:function(t){var e,i,s,r,n,o,a,l=0;if(g(t))return this.each((function(e){w(this).removeClass(t.call(this,e,ve(this)))}));if(!arguments.length)return this.attr("class","");if((e=be(t)).length)for(;i=this[l++];)if(r=ve(i),s=1===i.nodeType&&" "+ge(r)+" "){for(o=0;n=e[o++];)for(;-1<s.indexOf(" "+n+" ");)s=s.replace(" "+n+" "," ");r!==(a=ge(s))&&i.setAttribute("class",a)}return this},toggleClass:function(t,e){var i=n(t),s="string"===i||Array.isArray(t);return"boolean"==typeof e&&s?e?this.addClass(t):this.removeClass(t):g(t)?this.each((function(i){w(this).toggleClass(t.call(this,i,ve(this),e),e)})):this.each((function(){var e,r,n,o;if(s)for(r=0,n=w(this),o=be(t);e=o[r++];)n.hasClass(e)?n.removeClass(e):n.addClass(e);else void 0!==t&&"boolean"!==i||((e=ve(this))&&J.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":J.get(this,"__className__")||""))}))},hasClass:function(t){var e,i,s=0;for(e=" "+t+" ";i=this[s++];)if(1===i.nodeType&&-1<(" "+ge(ve(i))+" ").indexOf(e))return!0;return!1}});var ye=/\r/g;w.fn.extend({val:function(t){var e,i,s,r=this[0];return arguments.length?(s=g(t),this.each((function(i){var r;1===this.nodeType&&(null==(r=s?t.call(this,i,w(this).val()):t)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=w.map(r,(function(t){return null==t?"":t+""}))),(e=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))}))):r?(e=w.valHooks[r.type]||w.valHooks[r.nodeName.toLowerCase()])&&"get"in e&&void 0!==(i=e.get(r,"value"))?i:"string"==typeof(i=r.value)?i.replace(ye,""):null==i?"":i:void 0}}),w.extend({valHooks:{option:{get:function(t){var e=w.find.attr(t,"value");return null!=e?e:ge(w.text(t))}},select:{get:function(t){var e,i,s,r=t.options,n=t.selectedIndex,o="select-one"===t.type,a=o?null:[],l=o?n+1:r.length;for(s=n<0?l:o?n:0;s<l;s++)if(((i=r[s]).selected||s===n)&&!i.disabled&&(!i.parentNode.disabled||!O(i.parentNode,"optgroup"))){if(e=w(i).val(),o)return e;a.push(e)}return a},set:function(t,e){for(var i,s,r=t.options,n=w.makeArray(e),o=r.length;o--;)((s=r[o]).selected=-1<w.inArray(w.valHooks.option.get(s),n))&&(i=!0);return i||(t.selectedIndex=-1),n}}}}),w.each(["radio","checkbox"],(function(){w.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=-1<w.inArray(w(t).val(),e)}},f.checkOn||(w.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})})),f.focusin="onfocusin"in t;var Ce=/^(?:focusinfocus|focusoutblur)$/,_e=function(t){t.stopPropagation()};w.extend(w.event,{trigger:function(e,i,s,r){var o,a,l,h,c,u,p,m,f=[s||b],y=d.call(e,"type")?e.type:e,C=d.call(e,"namespace")?e.namespace.split("."):[];if(a=m=l=s=s||b,3!==s.nodeType&&8!==s.nodeType&&!Ce.test(y+w.event.triggered)&&(-1<y.indexOf(".")&&(y=(C=y.split(".")).shift(),C.sort()),c=y.indexOf(":")<0&&"on"+y,(e=e[w.expando]?e:new w.Event(y,"object"==n(e)&&e)).isTrigger=r?2:3,e.namespace=C.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+C.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=s),i=null==i?[e]:w.makeArray(i,[e]),p=w.event.special[y]||{},r||!p.trigger||!1!==p.trigger.apply(s,i))){if(!r&&!p.noBubble&&!v(s)){for(h=p.delegateType||y,Ce.test(h+y)||(a=a.parentNode);a;a=a.parentNode)f.push(a),l=a;l===(s.ownerDocument||b)&&f.push(l.defaultView||l.parentWindow||t)}for(o=0;(a=f[o++])&&!e.isPropagationStopped();)m=a,e.type=1<o?h:p.bindType||y,(u=(J.get(a,"events")||Object.create(null))[e.type]&&J.get(a,"handle"))&&u.apply(a,i),(u=c&&a[c])&&u.apply&&Y(a)&&(e.result=u.apply(a,i),!1===e.result&&e.preventDefault());return e.type=y,r||e.isDefaultPrevented()||p._default&&!1!==p._default.apply(f.pop(),i)||!Y(s)||c&&g(s[y])&&!v(s)&&((l=s[c])&&(s[c]=null),w.event.triggered=y,e.isPropagationStopped()&&m.addEventListener(y,_e),s[y](),e.isPropagationStopped()&&m.removeEventListener(y,_e),w.event.triggered=void 0,l&&(s[c]=l)),e.result}},simulate:function(t,e,i){var s=w.extend(new w.Event,i,{type:t,isSimulated:!0});w.event.trigger(s,null,e)}}),w.fn.extend({trigger:function(t,e){return this.each((function(){w.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var i=this[0];if(i)return w.event.trigger(t,e,i,!0)}}),f.focusin||w.each({focus:"focusin",blur:"focusout"},(function(t,e){var i=function(t){w.event.simulate(e,t.target,w.event.fix(t))};w.event.special[e]={setup:function(){var s=this.ownerDocument||this.document||this,r=J.access(s,e);r||s.addEventListener(t,i,!0),J.access(s,e,(r||0)+1)},teardown:function(){var s=this.ownerDocument||this.document||this,r=J.access(s,e)-1;r?J.access(s,e,r):(s.removeEventListener(t,i,!0),J.remove(s,e))}}}));var Ee=t.location,we={guid:Date.now()},ke=/\?/;w.parseXML=function(e){var i,s;if(!e||"string"!=typeof e)return null;try{i=(new t.DOMParser).parseFromString(e,"text/xml")}catch(e){}return s=i&&i.getElementsByTagName("parsererror")[0],i&&!s||w.error("Invalid XML: "+(s?w.map(s.childNodes,(function(t){return t.textContent})).join("\n"):e)),i};var Te=/\[\]$/,Se=/\r?\n/g,xe=/^(?:submit|button|image|reset|file)$/i,De=/^(?:input|select|textarea|keygen)/i;function Oe(t,e,i,s){var r;if(Array.isArray(e))w.each(e,(function(e,r){i||Te.test(t)?s(t,r):Oe(t+"["+("object"==n(r)&&null!=r?e:"")+"]",r,i,s)}));else if(i||"object"!==_(e))s(t,e);else for(r in e)Oe(t+"["+r+"]",e[r],i,s)}w.param=function(t,e){var i,s=[],r=function(t,e){var i=g(e)?e():e;s[s.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==i?"":i)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!w.isPlainObject(t))w.each(t,(function(){r(this.name,this.value)}));else for(i in t)Oe(i,t[i],e,r);return s.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=w.prop(this,"elements");return t?w.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!w(this).is(":disabled")&&De.test(this.nodeName)&&!xe.test(t)&&(this.checked||!mt.test(t))})).map((function(t,e){var i=w(this).val();return null==i?null:Array.isArray(i)?w.map(i,(function(t){return{name:e.name,value:t.replace(Se,"\r\n")}})):{name:e.name,value:i.replace(Se,"\r\n")}})).get()}});var Ae=/%20/g,Pe=/#.*$/,Ie=/([?&])_=[^&]*/,Le=/^(.*?):[ \t]*([^\r\n]*)$/gm,je=/^(?:GET|HEAD)$/,Ne=/^\/\//,Be={},Re={},Me="*/".concat("*"),Fe=b.createElement("a");function He(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var s,r=0,n=e.toLowerCase().match(R)||[];if(g(i))for(;s=n[r++];)"+"===s[0]?(s=s.slice(1)||"*",(t[s]=t[s]||[]).unshift(i)):(t[s]=t[s]||[]).push(i)}}function ze(t,e,i,s){var r={},n=t===Re;function o(a){var l;return r[a]=!0,w.each(t[a]||[],(function(t,a){var h=a(e,i,s);return"string"!=typeof h||n||r[h]?n?!(l=h):void 0:(e.dataTypes.unshift(h),o(h),!1)})),l}return o(e.dataTypes[0])||!r["*"]&&o("*")}function We(t,e){var i,s,r=w.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((r[i]?t:s||(s={}))[i]=e[i]);return s&&w.extend(!0,t,s),t}Fe.href=Ee.href,w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ee.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ee.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Me,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?We(We(t,w.ajaxSettings),e):We(w.ajaxSettings,t)},ajaxPrefilter:He(Be),ajaxTransport:He(Re),ajax:function(e,i){"object"==n(e)&&(i=e,e=void 0);var s,r,o,a,l,h,c,u,d,p,m=w.ajaxSetup({},i=i||{}),f=m.context||m,g=m.context&&(f.nodeType||f.jquery)?w(f):w.event,v=w.Deferred(),y=w.Callbacks("once memory"),C=m.statusCode||{},_={},E={},k="canceled",T={readyState:0,getResponseHeader:function(t){var e;if(c){if(!a)for(a={};e=Le.exec(o);)a[e[1].toLowerCase()+" "]=(a[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=a[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return c?o:null},setRequestHeader:function(t,e){return null==c&&(t=E[t.toLowerCase()]=E[t.toLowerCase()]||t,_[t]=e),this},overrideMimeType:function(t){return null==c&&(m.mimeType=t),this},statusCode:function(t){var e;if(t)if(c)T.always(t[T.status]);else for(e in t)C[e]=[C[e],t[e]];return this},abort:function(t){var e=t||k;return s&&s.abort(e),S(0,e),this}};if(v.promise(T),m.url=((e||m.url||Ee.href)+"").replace(Ne,Ee.protocol+"//"),m.type=i.method||i.type||m.method||m.type,m.dataTypes=(m.dataType||"*").toLowerCase().match(R)||[""],null==m.crossDomain){h=b.createElement("a");try{h.href=m.url,h.href=h.href,m.crossDomain=Fe.protocol+"//"+Fe.host!=h.protocol+"//"+h.host}catch(e){m.crossDomain=!0}}if(m.data&&m.processData&&"string"!=typeof m.data&&(m.data=w.param(m.data,m.traditional)),ze(Be,m,i,T),c)return T;for(d in(u=w.event&&m.global)&&0==w.active++&&w.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!je.test(m.type),r=m.url.replace(Pe,""),m.hasContent?m.data&&m.processData&&0===(m.contentType||"").indexOf("application/x-www-form-urlencoded")&&(m.data=m.data.replace(Ae,"+")):(p=m.url.slice(r.length),m.data&&(m.processData||"string"==typeof m.data)&&(r+=(ke.test(r)?"&":"?")+m.data,delete m.data),!1===m.cache&&(r=r.replace(Ie,"$1"),p=(ke.test(r)?"&":"?")+"_="+we.guid+++p),m.url=r+p),m.ifModified&&(w.lastModified[r]&&T.setRequestHeader("If-Modified-Since",w.lastModified[r]),w.etag[r]&&T.setRequestHeader("If-None-Match",w.etag[r])),(m.data&&m.hasContent&&!1!==m.contentType||i.contentType)&&T.setRequestHeader("Content-Type",m.contentType),T.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Me+"; q=0.01":""):m.accepts["*"]),m.headers)T.setRequestHeader(d,m.headers[d]);if(m.beforeSend&&(!1===m.beforeSend.call(f,T,m)||c))return T.abort();if(k="abort",y.add(m.complete),T.done(m.success),T.fail(m.error),s=ze(Re,m,i,T)){if(T.readyState=1,u&&g.trigger("ajaxSend",[T,m]),c)return T;m.async&&0<m.timeout&&(l=t.setTimeout((function(){T.abort("timeout")}),m.timeout));try{c=!1,s.send(_,S)}catch(e){if(c)throw e;S(-1,e)}}else S(-1,"No Transport");function S(e,i,n,a){var h,d,p,b,_,E=i;c||(c=!0,l&&t.clearTimeout(l),s=void 0,o=a||"",T.readyState=0<e?4:0,h=200<=e&&e<300||304===e,n&&(b=function(t,e,i){for(var s,r,n,o,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===s&&(s=t.mimeType||e.getResponseHeader("Content-Type"));if(s)for(r in a)if(a[r]&&a[r].test(s)){l.unshift(r);break}if(l[0]in i)n=l[0];else{for(r in i){if(!l[0]||t.converters[r+" "+l[0]]){n=r;break}o||(o=r)}n=n||o}if(n)return n!==l[0]&&l.unshift(n),i[n]}(m,T,n)),!h&&-1<w.inArray("script",m.dataTypes)&&w.inArray("json",m.dataTypes)<0&&(m.converters["text script"]=function(){}),b=function(t,e,i,s){var r,n,o,a,l,h={},c=t.dataTypes.slice();if(c[1])for(o in t.converters)h[o.toLowerCase()]=t.converters[o];for(n=c.shift();n;)if(t.responseFields[n]&&(i[t.responseFields[n]]=e),!l&&s&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=n,n=c.shift())if("*"===n)n=l;else if("*"!==l&&l!==n){if(!(o=h[l+" "+n]||h["* "+n]))for(r in h)if((a=r.split(" "))[1]===n&&(o=h[l+" "+a[0]]||h["* "+a[0]])){!0===o?o=h[r]:!0!==h[r]&&(n=a[0],c.unshift(a[1]));break}if(!0!==o)if(o&&t.throws)e=o(e);else try{e=o(e)}catch(t){return{state:"parsererror",error:o?t:"No conversion from "+l+" to "+n}}}return{state:"success",data:e}}(m,b,T,h),h?(m.ifModified&&((_=T.getResponseHeader("Last-Modified"))&&(w.lastModified[r]=_),(_=T.getResponseHeader("etag"))&&(w.etag[r]=_)),204===e||"HEAD"===m.type?E="nocontent":304===e?E="notmodified":(E=b.state,d=b.data,h=!(p=b.error))):(p=E,!e&&E||(E="error",e<0&&(e=0))),T.status=e,T.statusText=(i||E)+"",h?v.resolveWith(f,[d,E,T]):v.rejectWith(f,[T,E,p]),T.statusCode(C),C=void 0,u&&g.trigger(h?"ajaxSuccess":"ajaxError",[T,m,h?d:p]),y.fireWith(f,[T,E]),u&&(g.trigger("ajaxComplete",[T,m]),--w.active||w.event.trigger("ajaxStop")))}return T},getJSON:function(t,e,i){return w.get(t,e,i,"json")},getScript:function(t,e){return w.get(t,void 0,e,"script")}}),w.each(["get","post"],(function(t,e){w[e]=function(t,i,s,r){return g(i)&&(r=r||s,s=i,i=void 0),w.ajax(w.extend({url:t,type:e,dataType:r,data:i,success:s},w.isPlainObject(t)&&t))}})),w.ajaxPrefilter((function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")})),w._evalUrl=function(t,e,i){return w.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){w.globalEval(t,e,i)}})},w.fn.extend({wrapAll:function(t){var e;return this[0]&&(g(t)&&(t=t.call(this[0])),e=w(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return g(t)?this.each((function(e){w(this).wrapInner(t.call(this,e))})):this.each((function(){var e=w(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)}))},wrap:function(t){var e=g(t);return this.each((function(i){w(this).wrapAll(e?t.call(this,i):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){w(this).replaceWith(this.childNodes)})),this}}),w.expr.pseudos.hidden=function(t){return!w.expr.pseudos.visible(t)},w.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(t){}};var $e={0:200,1223:204},Ue=w.ajaxSettings.xhr();f.cors=!!Ue&&"withCredentials"in Ue,f.ajax=Ue=!!Ue,w.ajaxTransport((function(e){var i,s;if(f.cors||Ue&&!e.crossDomain)return{send:function(r,n){var o,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)a[o]=e.xhrFields[o];for(o in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)a.setRequestHeader(o,r[o]);i=function(t){return function(){i&&(i=s=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?n(0,"error"):n(a.status,a.statusText):n($e[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=i(),s=a.onerror=a.ontimeout=i("error"),void 0!==a.onabort?a.onabort=s:a.onreadystatechange=function(){4===a.readyState&&t.setTimeout((function(){i&&s()}))},i=i("abort");try{a.send(e.hasContent&&e.data||null)}catch(r){if(i)throw r}},abort:function(){i&&i()}}})),w.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return w.globalEval(t),t}}}),w.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),w.ajaxTransport("script",(function(t){var e,i;if(t.crossDomain||t.scriptAttrs)return{send:function(s,r){e=w("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove(),i=null,t&&r("error"===t.type?404:200,t.type)}),b.head.appendChild(e[0])},abort:function(){i&&i()}}}));var Ve,qe=[],Ke=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=qe.pop()||w.expando+"_"+we.guid++;return this[t]=!0,t}}),w.ajaxPrefilter("json jsonp",(function(e,i,s){var r,n,o,a=!1!==e.jsonp&&(Ke.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ke.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=g(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Ke,"$1"+r):!1!==e.jsonp&&(e.url+=(ke.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||w.error(r+" was not called"),o[0]},e.dataTypes[0]="json",n=t[r],t[r]=function(){o=arguments},s.always((function(){void 0===n?w(t).removeProp(r):t[r]=n,e[r]&&(e.jsonpCallback=i.jsonpCallback,qe.push(r)),o&&g(n)&&n(o[0]),o=n=void 0})),"script"})),f.createHTMLDocument=((Ve=b.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ve.childNodes.length),w.parseHTML=function(t,e,i){return"string"!=typeof t?[]:("boolean"==typeof e&&(i=e,e=!1),e||(f.createHTMLDocument?((s=(e=b.implementation.createHTMLDocument("")).createElement("base")).href=b.location.href,e.head.appendChild(s)):e=b),n=!i&&[],(r=A.exec(t))?[e.createElement(r[1])]:(r=_t([t],e,n),n&&n.length&&w(n).remove(),w.merge([],r.childNodes)));var s,r,n},w.fn.load=function(t,e,i){var s,r,o,a=this,l=t.indexOf(" ");return-1<l&&(s=ge(t.slice(l)),t=t.slice(0,l)),g(e)?(i=e,e=void 0):e&&"object"==n(e)&&(r="POST"),0<a.length&&w.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done((function(t){o=arguments,a.html(s?w("<div>").append(w.parseHTML(t)).find(s):t)})).always(i&&function(t,e){a.each((function(){i.apply(this,o||[t.responseText,e,t])}))}),this},w.expr.pseudos.animated=function(t){return w.grep(w.timers,(function(e){return t===e.elem})).length},w.offset={setOffset:function(t,e,i){var s,r,n,o,a,l,h=w.css(t,"position"),c=w(t),u={};"static"===h&&(t.style.position="relative"),a=c.offset(),n=w.css(t,"top"),l=w.css(t,"left"),("absolute"===h||"fixed"===h)&&-1<(n+l).indexOf("auto")?(o=(s=c.position()).top,r=s.left):(o=parseFloat(n)||0,r=parseFloat(l)||0),g(e)&&(e=e.call(t,i,w.extend({},a))),null!=e.top&&(u.top=e.top-a.top+o),null!=e.left&&(u.left=e.left-a.left+r),"using"in e?e.using.call(t,u):c.css(u)}},w.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){w.offset.setOffset(this,t,e)}));var e,i,s=this[0];return s?s.getClientRects().length?(e=s.getBoundingClientRect(),i=s.ownerDocument.defaultView,{top:e.top+i.pageYOffset,left:e.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,i,s=this[0],r={top:0,left:0};if("fixed"===w.css(s,"position"))e=s.getBoundingClientRect();else{for(e=this.offset(),i=s.ownerDocument,t=s.offsetParent||i.documentElement;t&&(t===i.body||t===i.documentElement)&&"static"===w.css(t,"position");)t=t.parentNode;t&&t!==s&&1===t.nodeType&&((r=w(t).offset()).top+=w.css(t,"borderTopWidth",!0),r.left+=w.css(t,"borderLeftWidth",!0))}return{top:e.top-r.top-w.css(s,"marginTop",!0),left:e.left-r.left-w.css(s,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===w.css(t,"position");)t=t.offsetParent;return t||nt}))}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var i="pageYOffset"===e;w.fn[t]=function(s){return U(this,(function(t,s,r){var n;if(v(t)?n=t:9===t.nodeType&&(n=t.defaultView),void 0===r)return n?n[e]:t[s];n?n.scrollTo(i?n.pageXOffset:r,i?r:n.pageYOffset):t[s]=r}),t,s,arguments.length)}})),w.each(["top","left"],(function(t,e){w.cssHooks[e]=Wt(f.pixelPosition,(function(t,i){if(i)return i=zt(t,e),Rt.test(i)?w(t).position()[e]+"px":i}))})),w.each({Height:"height",Width:"width"},(function(t,e){w.each({padding:"inner"+t,content:e,"":"outer"+t},(function(i,s){w.fn[s]=function(r,n){var o=arguments.length&&(i||"boolean"!=typeof r),a=i||(!0===r||!0===n?"margin":"border");return U(this,(function(e,i,r){var n;return v(e)?0===s.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(n=e.documentElement,Math.max(e.body["scroll"+t],n["scroll"+t],e.body["offset"+t],n["offset"+t],n["client"+t])):void 0===r?w.css(e,i,a):w.style(e,i,r,a)}),e,o?r:void 0,o)}}))})),w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){w.fn[e]=function(t){return this.on(e,t)}})),w.fn.extend({bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,s){return this.on(e,t,i,s)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){w.fn[e]=function(t,i){return 0<arguments.length?this.on(e,null,t,i):this.trigger(e)}}));var Ge=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;w.proxy=function(t,e){var i,s,r;if("string"==typeof e&&(i=t[e],e=t,t=i),g(t))return s=o.call(arguments,2),(r=function(){return t.apply(e||this,s.concat(o.call(arguments)))}).guid=t.guid=t.guid||w.guid++,r},w.holdReady=function(t){t?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=O,w.isFunction=g,w.isWindow=v,w.camelCase=G,w.type=_,w.now=Date.now,w.isNumeric=function(t){var e=w.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},w.trim=function(t){return null==t?"":(t+"").replace(Ge,"")},"function"==typeof define&&i.amdO&&define("jquery",[],(function(){return w}));var Ye=t.jQuery,Xe=t.$;return w.noConflict=function(e){return t.$===w&&(t.$=Xe),e&&t.jQuery===w&&(t.jQuery=Ye),w},void 0===e&&(t.jQuery=t.$=w),w},"object"==n(t)&&"object"==n(t.exports)?t.exports=s.document?r(s,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return r(t)}:r(s)},1818:function(){
/*!
 * Raphael 1.5.2 - JavaScript Vector Library
 *
 * Copyright (c) 2010 Dmitry Baranovskiy (http://raphaeljs.com)
 * Licensed under the MIT (http://raphaeljs.com/license.html) license.
 */
!function(){function t(){if(t.is(arguments[0],D)){for(var e=arguments[0],i=Ft[u](t,e.splice(0,3+t.is(e[0],S))),r=i.set(),n=0,a=e[b];n<a;n++){var l=e[n]||{};s[o](l.type)&&r[P](i[l.type]().attr(l))}return r}return Ft[u](t,arguments)}t.version="1.5.2";var e,i=/[, ]+/,s={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},r=/\{(\d+)\}/g,n="prototype",o="hasOwnProperty",a=document,l=window,h={was:Object[n][o].call(l,"Raphael"),is:l.Raphael},c=function(){this.customAttributes={}},u="apply",d="createTouch"in a,p="",m=" ",f=String,g="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend orientationchange touchcancel gesturestart gesturechange gestureend".split(m),v={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},b="length",y=f[n].toLowerCase,C=Math,_=C.max,E=C.min,w=C.abs,k=C.pow,T=C.PI,S="number",x="string",D="array",O="fill",A=Object[n].toString,P="push",I=/^url\(['"]?([^\)]+?)['"]?\)$/i,L=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,j={NaN:1,Infinity:1,"-Infinity":1},N=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,B=C.round,R=parseFloat,M=parseInt,F=" progid:DXImageTransform.Microsoft",H=f[n].toUpperCase,z={blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/",opacity:1,path:"M0,0",r:0,rotation:0,rx:0,ry:0,scale:"1 1",src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",translation:"0 0",width:0,x:0,y:0},W={along:"along",blur:S,"clip-rect":"csv",cx:S,cy:S,fill:"colour","fill-opacity":S,"font-size":S,height:S,opacity:S,path:"path",r:S,rotation:"csv",rx:S,ry:S,scale:"csv",stroke:"colour","stroke-opacity":S,"stroke-width":S,translation:"csv",width:S,x:S,y:S},$="replace",U=/^(from|to|\d+%?)$/,V=/\s*,\s*/,q={hs:1,rg:1},K=/,?([achlmqrstvxz]),?/gi,G=/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/gi,Y=/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/gi,X=/^r(?:\(([^,]+?)\s*,\s*([^\)]+?)\))?/,J=function(t,e){return t.key-e.key};if(t.type=l.SVGAngle||a.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==t.type){var Q,Z=a.createElement("div");if(Z.innerHTML='<v:shape adj="1"/>',(Q=Z.firstChild).style.behavior="url(#default#VML)",!Q||"object"!=typeof Q.adj)return t.type=null;Z=null}function tt(){for(var t=[],e=0;e<32;e++)t[e]=(~~(16*C.random())).toString(16);return t[12]=4,t[16]=(3&t[16]|8).toString(16),"r-"+t.join("")}t.svg=!(t.vml="VML"==t.type),c[n]=t[n],e=c[n],t._id=0,t._oid=0,t.fn={},t.is=function(t,e){return"finite"==(e=y.call(e))?!j[o](+t):"null"==e&&null===t||e==typeof t||"object"==e&&t===Object(t)||"array"==e&&Array.isArray&&Array.isArray(t)||A.call(t).slice(8,-1).toLowerCase()==e},t.angle=function(e,i,s,r,n,o){if(null==n){var a=e-s,l=i-r;return a||l?(180*(a<0)+180*C.atan(-l/-a)/T+360)%360:0}return t.angle(e,i,n,o)-t.angle(s,r,n,o)},t.rad=function(t){return t%360*T/180},t.deg=function(t){return 180*t/T%360},t.snapTo=function(e,i,s){if(s=t.is(s,"finite")?s:10,t.is(e,D)){for(var r=e.length;r--;)if(w(e[r]-i)<=s)return e[r]}else{var n=i%(e=+e);if(n<s)return i-n;if(n>e-s)return i-n+e}return i},t.setWindow=function(t){a=(l=t).document};var et=function(e){if(t.vml){var i,s=/^\s+|\s+$/g;try{var r=new ActiveXObject("htmlfile");r.write("<body>"),r.close(),i=r.body}catch(t){i=createPopup().document.body}var n=i.createTextRange();et=nt((function(t){try{i.style.color=f(t)[$](s,p);var e=n.queryCommandValue("ForeColor");return"#"+("000000"+(e=(255&e)<<16|65280&e|(16711680&e)>>>16).toString(16)).slice(-6)}catch(t){return"none"}}))}else{var o=a.createElement("i");o.title="Raphal Colour Picker",o.style.display="none",a.body.appendChild(o),et=nt((function(t){return o.style.color=t,a.defaultView.getComputedStyle(o,p).getPropertyValue("color")}))}return et(e)},it=function(){return"hsb("+[this.h,this.s,this.b]+")"},st=function(){return"hsl("+[this.h,this.s,this.l]+")"},rt=function(){return this.hex};function nt(t,e,i){return function s(){var r=Array[n].slice.call(arguments,0),a=r.join(""),l=s.cache=s.cache||{},h=s.count=s.count||[];return l[o](a)||(h[b]>=1e3&&delete l[h.shift()],h[P](a),l[a]=t[u](e,r)),i?i(l[a]):l[a]}}t.hsb2rgb=function(e,i,s,r){return t.is(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(s=e.b,i=e.s,r=(e=e.h).o),t.hsl2rgb(e,i,s/2,r)},t.hsl2rgb=function(e,i,s,r){t.is(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(s=e.l,i=e.s,e=e.h),(e>1||i>1||s>1)&&(e/=360,i/=100,s/=100);var n,o,a,l={},h=["r","g","b"];if(i){o=2*s-(n=s<.5?s*(1+i):s+i-s*i);for(var c=0;c<3;c++)(a=e+1/3*-(c-1))<0&&a++,a>1&&a--,l[h[c]]=6*a<1?o+6*(n-o)*a:2*a<1?n:3*a<2?o+(n-o)*(2/3-a)*6:o}else l={r:s,g:s,b:s};return l.r*=255,l.g*=255,l.b*=255,l.hex="#"+(16777216|l.b|l.g<<8|l.r<<16).toString(16).slice(1),t.is(r,"finite")&&(l.opacity=r),l.toString=rt,l},t.rgb2hsb=function(e,i,s){if(null==i&&t.is(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(s=e.b,i=e.g,e=e.r),null==i&&t.is(e,x)){var r=t.getRGB(e);e=r.r,i=r.g,s=r.b}(e>1||i>1||s>1)&&(e/=255,i/=255,s/=255);var n,o=_(e,i,s),a=E(e,i,s);if(a==o)return{h:0,s:0,b:o,toString:it};var l=o-a;return n=e==o?(i-s)/l:i==o?2+(s-e)/l:4+(e-i)/l,(n/=6)<0&&n++,n>1&&n--,{h:n,s:l/o,b:o,toString:it}},t.rgb2hsl=function(e,i,s){if(null==i&&t.is(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(s=e.b,i=e.g,e=e.r),null==i&&t.is(e,x)){var r=t.getRGB(e);e=r.r,i=r.g,s=r.b}(e>1||i>1||s>1)&&(e/=255,i/=255,s/=255);var n,o,a=_(e,i,s),l=E(e,i,s),h=(a+l)/2;if(l==a)o={h:0,s:0,l:h};else{var c=a-l;n=e==a?(i-s)/c:i==a?2+(s-e)/c:4+(e-i)/c,(n/=6)<0&&n++,n>1&&n--,o={h:n,s:h<.5?c/(a+l):c/(2-a-l),l:h}}return o.toString=st,o},t._path2string=function(){return this.join(",")[$](K,"$1")},t.getRGB=nt((function(e){if(!e||(e=f(e)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1};if("none"==e)return{r:-1,g:-1,b:-1,hex:"none"};!q[o](e.toLowerCase().substring(0,2))&&"#"!=e.charAt()&&(e=et(e));var i,s,r,n,a,l,h=e.match(L);return h?(h[2]&&(r=M(h[2].substring(5),16),s=M(h[2].substring(3,5),16),i=M(h[2].substring(1,3),16)),h[3]&&(r=M((a=h[3].charAt(3))+a,16),s=M((a=h[3].charAt(2))+a,16),i=M((a=h[3].charAt(1))+a,16)),h[4]&&(l=h[4].split(V),i=R(l[0]),"%"==l[0].slice(-1)&&(i*=2.55),s=R(l[1]),"%"==l[1].slice(-1)&&(s*=2.55),r=R(l[2]),"%"==l[2].slice(-1)&&(r*=2.55),"rgba"==h[1].toLowerCase().slice(0,4)&&(n=R(l[3])),l[3]&&"%"==l[3].slice(-1)&&(n/=100)),h[5]?(l=h[5].split(V),i=R(l[0]),"%"==l[0].slice(-1)&&(i*=2.55),s=R(l[1]),"%"==l[1].slice(-1)&&(s*=2.55),r=R(l[2]),"%"==l[2].slice(-1)&&(r*=2.55),("deg"==l[0].slice(-3)||""==l[0].slice(-1))&&(i/=360),"hsba"==h[1].toLowerCase().slice(0,4)&&(n=R(l[3])),l[3]&&"%"==l[3].slice(-1)&&(n/=100),t.hsb2rgb(i,s,r,n)):h[6]?(l=h[6].split(V),i=R(l[0]),"%"==l[0].slice(-1)&&(i*=2.55),s=R(l[1]),"%"==l[1].slice(-1)&&(s*=2.55),r=R(l[2]),"%"==l[2].slice(-1)&&(r*=2.55),("deg"==l[0].slice(-3)||""==l[0].slice(-1))&&(i/=360),"hsla"==h[1].toLowerCase().slice(0,4)&&(n=R(l[3])),l[3]&&"%"==l[3].slice(-1)&&(n/=100),t.hsl2rgb(i,s,r,n)):((h={r:i,g:s,b:r}).hex="#"+(16777216|r|s<<8|i<<16).toString(16).slice(1),t.is(n,"finite")&&(h.opacity=n),h)):{r:-1,g:-1,b:-1,hex:"none",error:1}}),t),t.getColor=function(t){var e=this.getColor.start=this.getColor.start||{h:0,s:1,b:t||.75},i=this.hsb2rgb(e.h,e.s,e.b);return e.h+=.075,e.h>1&&(e.h=0,e.s-=.2,e.s<=0&&(this.getColor.start={h:0,s:1,b:e.b})),i.hex},t.getColor.reset=function(){delete this.start},t.parsePathString=nt((function(e){if(!e)return null;var i={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},s=[];return t.is(e,D)&&t.is(e[0],D)&&(s=at(e)),s[b]||f(e)[$](G,(function(t,e,r){var n=[],o=y.call(e);for(r[$](Y,(function(t,e){e&&n[P](+e)})),"m"==o&&n[b]>2&&(s[P]([e].concat(n.splice(0,2))),o="l",e="m"==e?"l":"L");n[b]>=i[o]&&(s[P]([e].concat(n.splice(0,i[o]))),i[o]););})),s.toString=t._path2string,s})),t.findDotsAtSegment=function(t,e,i,s,r,n,o,a,l){var h=1-l,c=k(h,3)*t+3*k(h,2)*l*i+3*h*l*l*r+k(l,3)*o,u=k(h,3)*e+3*k(h,2)*l*s+3*h*l*l*n+k(l,3)*a,d=t+2*l*(i-t)+l*l*(r-2*i+t),p=e+2*l*(s-e)+l*l*(n-2*s+e),m=i+2*l*(r-i)+l*l*(o-2*r+i),f=s+2*l*(n-s)+l*l*(a-2*n+s),g=(1-l)*t+l*i,v=(1-l)*e+l*s,b=(1-l)*r+l*o,y=(1-l)*n+l*a,_=90-180*C.atan((d-m)/(p-f))/T;return(d>m||p<f)&&(_+=180),{x:c,y:u,m:{x:d,y:p},n:{x:m,y:f},start:{x:g,y:v},end:{x:b,y:y},alpha:_}};var ot=nt((function(t){if(!t)return{x:0,y:0,width:0,height:0};for(var e,i=0,s=0,r=[],n=[],o=0,a=(t=ft(t))[b];o<a;o++)if("M"==(e=t[o])[0])i=e[1],s=e[2],r[P](i),n[P](s);else{var l=mt(i,s,e[1],e[2],e[3],e[4],e[5],e[6]);r=r.concat(l.min.x,l.max.x),n=n.concat(l.min.y,l.max.y),i=e[5],s=e[6]}var h=E[u](0,r),c=E[u](0,n);return{x:h,y:c,width:_[u](0,r)-h,height:_[u](0,n)-c}})),at=function(e){var i=[];t.is(e,D)&&t.is(e&&e[0],D)||(e=t.parsePathString(e));for(var s=0,r=e[b];s<r;s++){i[s]=[];for(var n=0,o=e[s][b];n<o;n++)i[s][n]=e[s][n]}return i.toString=t._path2string,i},lt=nt((function(e){t.is(e,D)&&t.is(e&&e[0],D)||(e=t.parsePathString(e));var i=[],s=0,r=0,n=0,o=0,a=0;"M"==e[0][0]&&(n=s=e[0][1],o=r=e[0][2],a++,i[P](["M",s,r]));for(var l=a,h=e[b];l<h;l++){var c=i[l]=[],u=e[l];if(u[0]!=y.call(u[0]))switch(c[0]=y.call(u[0]),c[0]){case"a":c[1]=u[1],c[2]=u[2],c[3]=u[3],c[4]=u[4],c[5]=u[5],c[6]=+(u[6]-s).toFixed(3),c[7]=+(u[7]-r).toFixed(3);break;case"v":c[1]=+(u[1]-r).toFixed(3);break;case"m":n=u[1],o=u[2];default:for(var d=1,p=u[b];d<p;d++)c[d]=+(u[d]-(d%2?s:r)).toFixed(3)}else{c=i[l]=[],"m"==u[0]&&(n=u[1]+s,o=u[2]+r);for(var m=0,f=u[b];m<f;m++)i[l][m]=u[m]}var g=i[l][b];switch(i[l][0]){case"z":s=n,r=o;break;case"h":s+=+i[l][g-1];break;case"v":r+=+i[l][g-1];break;default:s+=+i[l][g-2],r+=+i[l][g-1]}}return i.toString=t._path2string,i}),0,at),ht=nt((function(e){t.is(e,D)&&t.is(e&&e[0],D)||(e=t.parsePathString(e));var i=[],s=0,r=0,n=0,o=0,a=0;"M"==e[0][0]&&(n=s=+e[0][1],o=r=+e[0][2],a++,i[0]=["M",s,r]);for(var l=a,h=e[b];l<h;l++){var c=i[l]=[],u=e[l];if(u[0]!=H.call(u[0]))switch(c[0]=H.call(u[0]),c[0]){case"A":c[1]=u[1],c[2]=u[2],c[3]=u[3],c[4]=u[4],c[5]=u[5],c[6]=+(u[6]+s),c[7]=+(u[7]+r);break;case"V":c[1]=+u[1]+r;break;case"H":c[1]=+u[1]+s;break;case"M":n=+u[1]+s,o=+u[2]+r;default:for(var d=1,p=u[b];d<p;d++)c[d]=+u[d]+(d%2?s:r)}else for(var m=0,f=u[b];m<f;m++)i[l][m]=u[m];switch(c[0]){case"Z":s=n,r=o;break;case"H":s=c[1];break;case"V":r=c[1];break;case"M":n=i[l][i[l][b]-2],o=i[l][i[l][b]-1];default:s=i[l][i[l][b]-2],r=i[l][i[l][b]-1]}}return i.toString=t._path2string,i}),null,at),ct=function(t,e,i,s){return[t,e,i,s,i,s]},ut=function(t,e,i,s,r,n){var o=1/3,a=2/3;return[o*t+a*i,o*e+a*s,o*r+a*i,o*n+a*s,r,n]},dt=function(t,e,i,s,r,n,o,a,l,h){var c,u=120*T/180,d=T/180*(+r||0),p=[],m=nt((function(t,e,i){return{x:t*C.cos(i)-e*C.sin(i),y:t*C.sin(i)+e*C.cos(i)}}));if(h)x=h[0],D=h[1],k=h[2],S=h[3];else{t=(c=m(t,e,-d)).x,e=c.y,a=(c=m(a,l,-d)).x,l=c.y;C.cos(T/180*r),C.sin(T/180*r);var f=(t-a)/2,g=(e-l)/2,v=f*f/(i*i)+g*g/(s*s);v>1&&(i*=v=C.sqrt(v),s*=v);var y=i*i,_=s*s,E=(n==o?-1:1)*C.sqrt(w((y*_-y*g*g-_*f*f)/(y*g*g+_*f*f))),k=E*i*g/s+(t+a)/2,S=E*-s*f/i+(e+l)/2,x=C.asin(((e-S)/s).toFixed(9)),D=C.asin(((l-S)/s).toFixed(9));(x=t<k?T-x:x)<0&&(x=2*T+x),(D=a<k?T-D:D)<0&&(D=2*T+D),o&&x>D&&(x-=2*T),!o&&D>x&&(D-=2*T)}var O=D-x;if(w(O)>u){var A=D,P=a,I=l;D=x+u*(o&&D>x?1:-1),a=k+i*C.cos(D),l=S+s*C.sin(D),p=dt(a,l,i,s,r,0,o,P,I,[D,A,k,S])}O=D-x;var L=C.cos(x),j=C.sin(x),N=C.cos(D),B=C.sin(D),R=C.tan(O/4),M=4/3*i*R,F=4/3*s*R,H=[t,e],z=[t+M*j,e-F*L],W=[a+M*B,l-F*N],$=[a,l];if(z[0]=2*H[0]-z[0],z[1]=2*H[1]-z[1],h)return[z,W,$].concat(p);for(var U=[],V=0,q=(p=[z,W,$].concat(p).join().split(","))[b];V<q;V++)U[V]=V%2?m(p[V-1],p[V],d).y:m(p[V],p[V+1],d).x;return U},pt=function(t,e,i,s,r,n,o,a,l){var h=1-l;return{x:k(h,3)*t+3*k(h,2)*l*i+3*h*l*l*r+k(l,3)*o,y:k(h,3)*e+3*k(h,2)*l*s+3*h*l*l*n+k(l,3)*a}},mt=nt((function(t,e,i,s,r,n,o,a){var l,h=r-2*i+t-(o-2*r+i),c=2*(i-t)-2*(r-i),d=t-i,p=(-c+C.sqrt(c*c-4*h*d))/2/h,m=(-c-C.sqrt(c*c-4*h*d))/2/h,f=[e,a],g=[t,o];return w(p)>"1e12"&&(p=.5),w(m)>"1e12"&&(m=.5),p>0&&p<1&&(l=pt(t,e,i,s,r,n,o,a,p),g[P](l.x),f[P](l.y)),m>0&&m<1&&(l=pt(t,e,i,s,r,n,o,a,m),g[P](l.x),f[P](l.y)),h=n-2*s+e-(a-2*n+s),d=e-s,p=(-(c=2*(s-e)-2*(n-s))+C.sqrt(c*c-4*h*d))/2/h,m=(-c-C.sqrt(c*c-4*h*d))/2/h,w(p)>"1e12"&&(p=.5),w(m)>"1e12"&&(m=.5),p>0&&p<1&&(l=pt(t,e,i,s,r,n,o,a,p),g[P](l.x),f[P](l.y)),m>0&&m<1&&(l=pt(t,e,i,s,r,n,o,a,m),g[P](l.x),f[P](l.y)),{min:{x:E[u](0,g),y:E[u](0,f)},max:{x:_[u](0,g),y:_[u](0,f)}}})),ft=nt((function(t,e){for(var i=ht(t),s=e&&ht(e),r={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=function(t,e){if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat(dt[u](0,[e.x,e.y].concat(t.slice(1))));break;case"S":t=["C",e.x+(e.x-(e.bx||e.x)),e.y+(e.y-(e.by||e.y))].concat(t.slice(1));break;case"T":e.qx=e.x+(e.x-(e.qx||e.x)),e.qy=e.y+(e.y-(e.qy||e.y)),t=["C"].concat(ut(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(ut(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(ct(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(ct(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(ct(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(ct(e.x,e.y,e.X,e.Y))}return t},a=function(t,e){if(t[e][b]>7){t[e].shift();for(var r=t[e];r[b];)t.splice(e++,0,["C"].concat(r.splice(0,6)));t.splice(e,1),c=_(i[b],s&&s[b]||0)}},l=function(t,e,r,n,o){t&&e&&"M"==t[o][0]&&"M"!=e[o][0]&&(e.splice(o,0,["M",n.x,n.y]),r.bx=0,r.by=0,r.x=t[o][1],r.y=t[o][2],c=_(i[b],s&&s[b]||0))},h=0,c=_(i[b],s&&s[b]||0);h<c;h++){i[h]=o(i[h],r),a(i,h),s&&(s[h]=o(s[h],n)),s&&a(s,h),l(i,s,r,n,h),l(s,i,n,r,h);var d=i[h],p=s&&s[h],m=d[b],f=s&&p[b];r.x=d[m-2],r.y=d[m-1],r.bx=R(d[m-4])||r.x,r.by=R(d[m-3])||r.y,n.bx=s&&(R(p[f-4])||n.x),n.by=s&&(R(p[f-3])||n.y),n.x=s&&p[f-2],n.y=s&&p[f-1]}return s?[i,s]:i}),null,at),gt=nt((function(e){for(var i=[],s=0,r=e[b];s<r;s++){var n={},o=e[s].match(/^([^:]*):?([\d\.]*)/);if(n.color=t.getRGB(o[1]),n.color.error)return null;n.color=n.color.hex,o[2]&&(n.offset=o[2]+"%"),i[P](n)}for(s=1,r=i[b]-1;s<r;s++)if(!i[s].offset){for(var a=R(i[s-1].offset||0),l=0,h=s+1;h<r;h++)if(i[h].offset){l=i[h].offset;break}l||(l=100,h=r);for(var c=((l=R(l))-a)/(h-s+1);s<h;s++)a+=c,i[s].offset=a+"%"}return i})),vt=function(e,i,s,r){var n;return t.is(e,x)||t.is(e,"object")?(n=t.is(e,x)?a.getElementById(e):e).tagName?null==i?{container:n,width:n.style.pixelWidth||n.offsetWidth,height:n.style.pixelHeight||n.offsetHeight}:{container:n,width:i,height:s}:void 0:{container:1,x:e,y:i,width:s,height:r}},bt=function(t,e){var i=this;for(var s in e)if(e[o](s)&&!(s in t))switch(typeof e[s]){case"function":!function(e){t[s]=t===i?e:function(){return e[u](i,arguments)}}(e[s]);break;case"object":t[s]=t[s]||{},bt.call(this,t[s],e[s]);break;default:t[s]=e[s]}},yt=function(t,e){t==e.top&&(e.top=t.prev),t==e.bottom&&(e.bottom=t.next),t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next)},Ct=function(t,e){e.top!==t&&(yt(t,e),t.next=null,t.prev=e.top,e.top.next=t,e.top=t)},_t=function(t,e){e.bottom!==t&&(yt(t,e),t.next=e.bottom,t.prev=null,e.bottom.prev=t,e.bottom=t)},Et=function(t,e,i){yt(t,i),e==i.top&&(i.top=t),e.next&&(e.next.prev=t),t.next=e.next,t.prev=e,e.next=t},wt=function(t,e,i){yt(t,i),e==i.bottom&&(i.bottom=t),e.prev&&(e.prev.next=t),t.prev=e.prev,e.prev=t,t.next=e},kt=function(t){return function(){throw new Error("Raphal: you are calling to method "+t+" of removed object")}};if(t.pathToRelative=lt,t.svg){e.svgns="http://www.w3.org/2000/svg",e.xlink="http://www.w3.org/1999/xlink",B=function(t){return+t+.5*(~~t===t)};var Tt=function(t,i){if(!i)return(t=a.createElementNS(e.svgns,t)).style.webkitTapHighlightColor="rgba(0,0,0,0)",t;for(var s in i)i[o](s)&&t.setAttribute(s,f(i[s]))};t.toString=function(){return"Your browser supports SVG.\nYou are running Raphal "+this.version};var St=function(t,e){var i=Tt("path");e.canvas&&e.canvas.appendChild(i);var s=new Pt(i,e);return s.type="path",Ot(s,{fill:"none",stroke:"#000",path:t}),s},xt=function(t,e,i){var s="linear",r=.5,n=.5,o=t.style;if(e=(e=f(e)[$](X,(function(t,e,i){if(s="radial",e&&i){r=R(e);var o=2*((n=R(i))>.5)-1;k(r-.5,2)+k(n-.5,2)>.25&&(n=C.sqrt(.25-k(r-.5,2))*o+.5)&&.5!=n&&(n=n.toFixed(5)-1e-5*o)}return p}))).split(/\s*\-\s*/),"linear"==s){var l=e.shift();if(l=-R(l),isNaN(l))return null;var h=[0,0,C.cos(l*T/180),C.sin(l*T/180)],c=1/(_(w(h[2]),w(h[3]))||1);h[2]*=c,h[3]*=c,h[2]<0&&(h[0]=-h[2],h[2]=0),h[3]<0&&(h[1]=-h[3],h[3]=0)}var u=gt(e);if(!u)return null;var d=t.getAttribute(O);(d=d.match(/^url\(#(.*)\)$/))&&i.defs.removeChild(a.getElementById(d[1]));var m=Tt(s+"Gradient");m.id=tt(),Tt(m,"radial"==s?{fx:r,fy:n}:{x1:h[0],y1:h[1],x2:h[2],y2:h[3]}),i.defs.appendChild(m);for(var g=0,v=u[b];g<v;g++){var y=Tt("stop");Tt(y,{offset:u[g].offset?u[g].offset:g?"100%":"0%","stop-color":u[g].color||"#fff"}),m.appendChild(y)}return Tt(t,{fill:"url(#"+m.id+")",opacity:1,"fill-opacity":1}),o.fill=p,o.opacity=1,o.fillOpacity=1,1},Dt=function(e){var i=e.getBBox();Tt(e.pattern,{patternTransform:t.format("translate({0},{1})",i.x,i.y)})},Ot=function(e,s){var r={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},n=e.node,l=e.attrs,h=e.rotate(),c=function(t,e){if(e=r[y.call(e)]){for(var i=t.attrs["stroke-width"]||"1",o={round:i,square:i,butt:0}[t.attrs["stroke-linecap"]||s["stroke-linecap"]]||0,a=[],l=e[b];l--;)a[l]=e[l]*i+(l%2?1:-1)*o;Tt(n,{"stroke-dasharray":a.join(",")})}};s[o]("rotation")&&(h=s.rotation);var u=f(h).split(i);for(var d in u.length-1?(u[1]=+u[1],u[2]=+u[2]):u=null,R(h)&&e.rotate(0,!0),s)if(s[o](d)){if(!z[o](d))continue;var g=s[d];switch(l[d]=g,d){case"blur":e.blur(g);break;case"rotation":e.rotate(g,!0);break;case"href":case"title":case"target":var v=n.parentNode;if("a"!=y.call(v.tagName)){var C=Tt("a");v.insertBefore(C,n),C.appendChild(n),v=C}"target"==d&&"blank"==g?v.setAttributeNS(e.paper.xlink,"show","new"):v.setAttributeNS(e.paper.xlink,d,g);break;case"cursor":n.style.cursor=g;break;case"clip-rect":var _=f(g).split(i);if(4==_[b]){e.clip&&e.clip.parentNode.parentNode.removeChild(e.clip.parentNode);var E=Tt("clipPath"),w=Tt("rect");E.id=tt(),Tt(w,{x:_[0],y:_[1],width:_[2],height:_[3]}),E.appendChild(w),e.paper.defs.appendChild(E),Tt(n,{"clip-path":"url(#"+E.id+")"}),e.clip=w}if(!g){var k=a.getElementById(n.getAttribute("clip-path")[$](/(^url\(#|\)$)/g,p));k&&k.parentNode.removeChild(k),Tt(n,{"clip-path":p}),delete e.clip}break;case"path":"path"==e.type&&Tt(n,{d:g?l.path=ht(g):"M0,0"});break;case"width":if(n.setAttribute(d,g),!l.fx)break;d="x",g=l.x;case"x":l.fx&&(g=-l.x-(l.width||0));case"rx":if("rx"==d&&"rect"==e.type)break;case"cx":u&&("x"==d||"cx"==d)&&(u[1]+=g-l[d]),n.setAttribute(d,g),e.pattern&&Dt(e);break;case"height":if(n.setAttribute(d,g),!l.fy)break;d="y",g=l.y;case"y":l.fy&&(g=-l.y-(l.height||0));case"ry":if("ry"==d&&"rect"==e.type)break;case"cy":u&&("y"==d||"cy"==d)&&(u[2]+=g-l[d]),n.setAttribute(d,g),e.pattern&&Dt(e);break;case"r":"rect"==e.type?Tt(n,{rx:g,ry:g}):n.setAttribute(d,g);break;case"src":"image"==e.type&&n.setAttributeNS(e.paper.xlink,"href",g);break;case"stroke-width":n.style.strokeWidth=g,n.setAttribute(d,g),l["stroke-dasharray"]&&c(e,l["stroke-dasharray"]);break;case"stroke-dasharray":c(e,g);break;case"translation":var T=f(g).split(i);T[0]=+T[0]||0,T[1]=+T[1]||0,u&&(u[1]+=T[0],u[2]+=T[1]),ge.call(e,T[0],T[1]);break;case"scale":T=f(g).split(i),e.scale(+T[0]||1,+T[1]||+T[0]||1,isNaN(R(T[2]))?null:+T[2],isNaN(R(T[3]))?null:+T[3]);break;case O:var S=f(g).match(I);if(S){E=Tt("pattern");var x=Tt("image");E.id=tt(),Tt(E,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),Tt(x,{x:0,y:0}),x.setAttributeNS(e.paper.xlink,"href",S[1]),E.appendChild(x);var D=a.createElement("img");D.style.cssText="position:absolute;left:-9999em;top-9999em",D.onload=function(){Tt(E,{width:this.offsetWidth,height:this.offsetHeight}),Tt(x,{width:this.offsetWidth,height:this.offsetHeight}),a.body.removeChild(this),e.paper.safari()},a.body.appendChild(D),D.src=S[1],e.paper.defs.appendChild(E),n.style.fill="url(#"+E.id+")",Tt(n,{fill:"url(#"+E.id+")"}),e.pattern=E,e.pattern&&Dt(e);break}var A=t.getRGB(g);if(A.error){if(({circle:1,ellipse:1}[o](e.type)||"r"!=f(g).charAt())&&xt(n,g,e.paper)){l.gradient=g,l.fill="none";break}}else delete s.gradient,delete l.gradient,!t.is(l.opacity,"undefined")&&t.is(s.opacity,"undefined")&&Tt(n,{opacity:l.opacity}),!t.is(l["fill-opacity"],"undefined")&&t.is(s["fill-opacity"],"undefined")&&Tt(n,{"fill-opacity":l["fill-opacity"]});A[o]("opacity")&&Tt(n,{"fill-opacity":A.opacity>1?A.opacity/100:A.opacity});case"stroke":A=t.getRGB(g),n.setAttribute(d,A.hex),"stroke"==d&&A[o]("opacity")&&Tt(n,{"stroke-opacity":A.opacity>1?A.opacity/100:A.opacity});break;case"gradient":({circle:1,ellipse:1}[o](e.type)||"r"!=f(g).charAt())&&xt(n,g,e.paper);break;case"opacity":l.gradient&&!l[o]("stroke-opacity")&&Tt(n,{"stroke-opacity":g>1?g/100:g});case"fill-opacity":if(l.gradient){var P=a.getElementById(n.getAttribute(O)[$](/^url\(#|\)$/g,p));if(P){var L=P.getElementsByTagName("stop");L[L[b]-1].setAttribute("stop-opacity",g)}break}default:"font-size"==d&&(g=M(g,10)+"px");var j=d[$](/(\-.)/g,(function(t){return H.call(t.substring(1))}));n.style[j]=g,n.setAttribute(d,g)}}At(e,s),u?e.rotate(u.join(m)):R(h)&&e.rotate(h,!0)},At=function(e,i){if("text"==e.type&&(i[o]("text")||i[o]("font")||i[o]("font-size")||i[o]("x")||i[o]("y"))){var s=e.attrs,r=e.node,n=r.firstChild?M(a.defaultView.getComputedStyle(r.firstChild,p).getPropertyValue("font-size"),10):10;if(i[o]("text")){for(s.text=i.text;r.firstChild;)r.removeChild(r.firstChild);for(var l=f(i.text).split("\n"),h=0,c=l[b];h<c;h++)if(l[h]){var u=Tt("tspan");h&&Tt(u,{dy:1.2*n,x:s.x}),u.appendChild(a.createTextNode(l[h])),r.appendChild(u)}}else for(h=0,c=(l=r.getElementsByTagName("tspan"))[b];h<c;h++)h&&Tt(l[h],{dy:1.2*n,x:s.x});Tt(r,{y:s.y});var d=e.getBBox(),m=s.y-(d.y+d.height/2);m&&t.is(m,"finite")&&Tt(r,{y:s.y+m})}},Pt=function(e,i){this[0]=e,this.id=t._oid++,this.node=e,e.raphael=this,this.paper=i,this.attrs=this.attrs||{},this.transformations=[],this._={tx:0,ty:0,rt:{deg:0,cx:0,cy:0},sx:1,sy:1},!i.bottom&&(i.bottom=this),this.prev=i.top,i.top&&(i.top.next=this),i.top=this,this.next=null},It=Pt[n];Pt[n].rotate=function(e,s,r){if(this.removed)return this;if(null==e)return this._.rt.cx?[this._.rt.deg,this._.rt.cx,this._.rt.cy].join(m):this._.rt.deg;var n=this.getBBox();return(e=f(e).split(i))[b]-1&&(s=R(e[1]),r=R(e[2])),e=R(e[0]),null!=s&&!1!==s?this._.rt.deg=e:this._.rt.deg+=e,null==r&&(s=null),this._.rt.cx=s,this._.rt.cy=r,s=null==s?n.x+n.width/2:s,r=null==r?n.y+n.height/2:r,this._.rt.deg?(this.transformations[0]=t.format("rotate({0} {1} {2})",this._.rt.deg,s,r),this.clip&&Tt(this.clip,{transform:t.format("rotate({0} {1} {2})",-this._.rt.deg,s,r)})):(this.transformations[0]=p,this.clip&&Tt(this.clip,{transform:p})),Tt(this.node,{transform:this.transformations.join(m)}),this},Pt[n].hide=function(){return!this.removed&&(this.node.style.display="none"),this},Pt[n].show=function(){return!this.removed&&(this.node.style.display=""),this},Pt[n].remove=function(){if(!this.removed){for(var t in yt(this,this.paper),this.node.parentNode.removeChild(this.node),this)delete this[t];this.removed=!0}},Pt[n].getBBox=function(){if(this.removed)return this;if("path"==this.type)return ot(this.attrs.path);if("none"==this.node.style.display){this.show();var t=!0}var e={};try{e=this.node.getBBox()}catch(t){}finally{e=e||{}}if("text"==this.type){e={x:e.x,y:1/0,width:0,height:0};for(var i=0,s=this.node.getNumberOfChars();i<s;i++){var r=this.node.getExtentOfChar(i);r.y<e.y&&(e.y=r.y),r.y+r.height-e.y>e.height&&(e.height=r.y+r.height-e.y),r.x+r.width-e.x>e.width&&(e.width=r.x+r.width-e.x)}}return t&&this.hide(),e},Pt[n].attr=function(e,i){if(this.removed)return this;if(null==e){var s={};for(var r in this.attrs)this.attrs[o](r)&&(s[r]=this.attrs[r]);return this._.rt.deg&&(s.rotation=this.rotate()),(1!=this._.sx||1!=this._.sy)&&(s.scale=this.scale()),s.gradient&&"none"==s.fill&&(s.fill=s.gradient)&&delete s.gradient,s}if(null==i&&t.is(e,x))return"translation"==e?ge.call(this):"rotation"==e?this.rotate():"scale"==e?this.scale():e==O&&"none"==this.attrs.fill&&this.attrs.gradient?this.attrs.gradient:this.attrs[e];if(null==i&&t.is(e,D)){for(var n={},a=0,l=e.length;a<l;a++)n[e[a]]=this.attr(e[a]);return n}if(null!=i){var h={};h[e]=i}else null!=e&&t.is(e,"object")&&(h=e);for(var c in this.paper.customAttributes)if(this.paper.customAttributes[o](c)&&h[o](c)&&t.is(this.paper.customAttributes[c],"function")){var u=this.paper.customAttributes[c].apply(this,[].concat(h[c]));for(var d in this.attrs[c]=h[c],u)u[o](d)&&(h[d]=u[d])}return Ot(this,h),this},Pt[n].toFront=function(){if(this.removed)return this;this.node.parentNode.appendChild(this.node);var t=this.paper;return t.top!=this&&Ct(this,t),this},Pt[n].toBack=function(){if(this.removed)return this;if(this.node.parentNode.firstChild!=this.node){this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),_t(this,this.paper);this.paper}return this},Pt[n].insertAfter=function(t){if(this.removed)return this;var e=t.node||t[t.length-1].node;return e.nextSibling?e.parentNode.insertBefore(this.node,e.nextSibling):e.parentNode.appendChild(this.node),Et(this,t,this.paper),this},Pt[n].insertBefore=function(t){if(this.removed)return this;var e=t.node||t[0].node;return e.parentNode.insertBefore(this.node,e),wt(this,t,this.paper),this},Pt[n].blur=function(t){var e=this;if(0!=+t){var i=Tt("filter"),s=Tt("feGaussianBlur");e.attrs.blur=t,i.id=tt(),Tt(s,{stdDeviation:+t||1.5}),i.appendChild(s),e.paper.defs.appendChild(i),e._blur=i,Tt(e.node,{filter:"url(#"+i.id+")"})}else e._blur&&(e._blur.parentNode.removeChild(e._blur),delete e._blur,delete e.attrs.blur),e.node.removeAttribute("filter")};var Lt=function(t,e,i,s){var r=Tt("circle");t.canvas&&t.canvas.appendChild(r);var n=new Pt(r,t);return n.attrs={cx:e,cy:i,r:s,fill:"none",stroke:"#000"},n.type="circle",Tt(r,n.attrs),n},jt=function(t,e,i,s,r,n){var o=Tt("rect");t.canvas&&t.canvas.appendChild(o);var a=new Pt(o,t);return a.attrs={x:e,y:i,width:s,height:r,r:n||0,rx:n||0,ry:n||0,fill:"none",stroke:"#000"},a.type="rect",Tt(o,a.attrs),a},Nt=function(t,e,i,s,r){var n=Tt("ellipse");t.canvas&&t.canvas.appendChild(n);var o=new Pt(n,t);return o.attrs={cx:e,cy:i,rx:s,ry:r,fill:"none",stroke:"#000"},o.type="ellipse",Tt(n,o.attrs),o},Bt=function(t,e,i,s,r,n){var o=Tt("image");Tt(o,{x:i,y:s,width:r,height:n,preserveAspectRatio:"none"}),o.setAttributeNS(t.xlink,"href",e),t.canvas&&t.canvas.appendChild(o);var a=new Pt(o,t);return a.attrs={x:i,y:s,width:r,height:n,src:e},a.type="image",a},Rt=function(t,e,i,s){var r=Tt("text");Tt(r,{x:e,y:i,"text-anchor":"middle"}),t.canvas&&t.canvas.appendChild(r);var n=new Pt(r,t);return n.attrs={x:e,y:i,"text-anchor":"middle",text:s,font:z.font,stroke:"none",fill:"#000"},n.type="text",Ot(n,n.attrs),n},Mt=function(t,e){return this.width=t||this.width,this.height=e||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this},Ft=function(){var e=vt[u](0,arguments),i=e&&e.container,s=e.x,r=e.y,n=e.width,o=e.height;if(!i)throw new Error("SVG container not found.");var l=Tt("svg");return s=s||0,r=r||0,Tt(l,{xmlns:"http://www.w3.org/2000/svg",version:1.1,width:n=n||512,height:o=o||342}),1==i?(l.style.cssText="position:absolute;left:"+s+"px;top:"+r+"px",a.body.appendChild(l)):i.firstChild?i.insertBefore(l,i.firstChild):i.appendChild(l),(i=new c).width=n,i.height=o,i.canvas=l,bt.call(i,i,t.fn),i.clear(),i};e.clear=function(){for(var t=this.canvas;t.firstChild;)t.removeChild(t.firstChild);this.bottom=this.top=null,(this.desc=Tt("desc")).appendChild(a.createTextNode("Created with Raphal")),t.appendChild(this.desc),t.appendChild(this.defs=Tt("defs"))},e.remove=function(){for(var t in this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this)this[t]=kt(t)}}if(t.vml){var Ht,zt={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},Wt=/([clmz]),?([^clmz]*)/gi,$t=/ progid:\S+Blur\([^\)]+\)/g,Ut=/-?[^,\s-]+/g,Vt="1000 1000",qt=10,Kt={path:1,rect:1};function Gt(e,i,s,r,n){return n?t.format("M{0},{1}l{2},0a{3},{3},0,0,1,{3},{3}l0,{5}a{3},{3},0,0,1,{4},{3}l{6},0a{3},{3},0,0,1,{4},{4}l0,{7}a{3},{3},0,0,1,{3},{4}z",e+n,i,s-2*n,n,-n,r-2*n,2*n-s,2*n-r):t.format("M{0},{1}l{2},0,0,{3},{4},0z",e,i,s,r,-s)}t.toString=function(){return"Your browser doesnt support SVG. Falling down to VML.\nYou are running Raphal "+this.version},St=function(t,e){var i=Ht("group");i.style.cssText="position:absolute;left:0;top:0;width:"+e.width+"px;height:"+e.height+"px",i.coordsize=e.coordsize,i.coordorigin=e.coordorigin;var s=Ht("shape"),r=s.style;r.width=e.width+"px",r.height=e.height+"px",s.coordsize=Vt,s.coordorigin=e.coordorigin,i.appendChild(s);var n=new Pt(s,i,e),o={fill:"none",stroke:"#000"};return t&&(o.path=t),n.type="path",n.path=[],n.Path=p,Ot(n,o),e.canvas.appendChild(i),n},Ot=function(e,s){e.attrs=e.attrs||{};var r,n=e.node,l=e.attrs,h=n.style,c=(s.x!=l.x||s.y!=l.y||s.width!=l.width||s.height!=l.height||s.r!=l.r)&&"rect"==e.type,u=e;for(var d in s)s[o](d)&&(l[d]=s[d]);if(c&&(l.path=Gt(l.x,l.y,l.width,l.height,l.r),e.X=l.x,e.Y=l.y,e.W=l.width,e.H=l.height),s.href&&(n.href=s.href),s.title&&(n.title=s.title),s.target&&(n.target=s.target),s.cursor&&(h.cursor=s.cursor),"blur"in s&&e.blur(s.blur),(s.path&&"path"==e.type||c)&&(n.path=function(t){var e=/[ahqstv]/gi,i=ht;if(f(t).match(e)&&(i=ft),e=/[clmz]/g,i==ht&&!f(t).match(e)){var s=f(t)[$](Wt,(function(t,e,i){var s=[],r="m"==y.call(e),n=zt[e];return i[$](Ut,(function(t){r&&2==s[b]&&(n+=s+zt["m"==e?"l":"L"],s=[]),s[P](B(t*qt))})),n+s}));return s}var r,n,o=i(t);s=[];for(var a=0,l=o[b];a<l;a++){r=o[a],"z"==(n=y.call(o[a][0]))&&(n="x");for(var h=1,c=r[b];h<c;h++)n+=B(r[h]*qt)+(h!=c-1?",":p);s[P](n)}return s.join(m)}(l.path)),null!=s.rotation&&e.rotate(s.rotation,!0),s.translation&&(r=f(s.translation).split(i),ge.call(e,r[0],r[1]),null!=e._.rt.cx&&(e._.rt.cx+=+r[0],e._.rt.cy+=+r[1],e.setBox(e.attrs,r[0],r[1]))),s.scale&&(r=f(s.scale).split(i),e.scale(+r[0]||1,+r[1]||+r[0]||1,+r[2]||null,+r[3]||null)),"clip-rect"in s){var g=f(s["clip-rect"]).split(i);if(4==g[b]){g[2]=+g[2]+ +g[0],g[3]=+g[3]+ +g[1];var v=n.clipRect||a.createElement("div"),C=v.style,w=n.parentNode;C.clip=t.format("rect({1}px {2}px {3}px {0}px)",g),n.clipRect||(C.position="absolute",C.top=0,C.left=0,C.width=e.paper.width+"px",C.height=e.paper.height+"px",w.parentNode.insertBefore(v,w),v.appendChild(w),n.clipRect=v)}s["clip-rect"]||n.clipRect&&(n.clipRect.style.clip=p)}if("image"==e.type&&s.src&&(n.src=s.src),"image"==e.type&&s.opacity&&(n.filterOpacity=F+".Alpha(opacity="+100*s.opacity+")",h.filter=(n.filterMatrix||p)+(n.filterOpacity||p)),s.font&&(h.font=s.font),s["font-family"]&&(h.fontFamily='"'+s["font-family"].split(",")[0][$](/^['"]+|['"]+$/g,p)+'"'),s["font-size"]&&(h.fontSize=s["font-size"]),s["font-weight"]&&(h.fontWeight=s["font-weight"]),s["font-style"]&&(h.fontStyle=s["font-style"]),null!=s.opacity||null!=s["stroke-width"]||null!=s.fill||null!=s.stroke||null!=s["stroke-width"]||null!=s["stroke-opacity"]||null!=s["fill-opacity"]||null!=s["stroke-dasharray"]||null!=s["stroke-miterlimit"]||null!=s["stroke-linejoin"]||null!=s["stroke-linecap"]){var k=(n=e.shape||n).getElementsByTagName(O)&&n.getElementsByTagName(O)[0],T=!1;if(!k&&(T=k=Ht(O)),"fill-opacity"in s||"opacity"in s){var S=((+l["fill-opacity"]+1||2)-1)*((+l.opacity+1||2)-1)*((+t.getRGB(s.fill).o+1||2)-1);S=E(_(S,0),1),k.opacity=S}if(s.fill&&(k.on=!0),null!=k.on&&"none"!=s.fill||(k.on=!1),k.on&&s.fill){var x=s.fill.match(I);x?(k.src=x[1],k.type="tile"):(k.color=t.getRGB(s.fill).hex,k.src=p,k.type="solid",t.getRGB(s.fill).error&&(u.type in{circle:1,ellipse:1}||"r"!=f(s.fill).charAt())&&xt(u,s.fill)&&(l.fill="none",l.gradient=s.fill))}T&&n.appendChild(k);var D=n.getElementsByTagName("stroke")&&n.getElementsByTagName("stroke")[0],A=!1;!D&&(A=D=Ht("stroke")),(s.stroke&&"none"!=s.stroke||s["stroke-width"]||null!=s["stroke-opacity"]||s["stroke-dasharray"]||s["stroke-miterlimit"]||s["stroke-linejoin"]||s["stroke-linecap"])&&(D.on=!0),("none"==s.stroke||null==D.on||0==s.stroke||0==s["stroke-width"])&&(D.on=!1);var L=t.getRGB(s.stroke);D.on&&s.stroke&&(D.color=L.hex),S=((+l["stroke-opacity"]+1||2)-1)*((+l.opacity+1||2)-1)*((+L.o+1||2)-1);var j=.75*(R(s["stroke-width"])||1);if(S=E(_(S,0),1),null==s["stroke-width"]&&(j=l["stroke-width"]),s["stroke-width"]&&(D.weight=j),j&&j<1&&(S*=j)&&(D.weight=1),D.opacity=S,s["stroke-linejoin"]&&(D.joinstyle=s["stroke-linejoin"]||"miter"),D.miterlimit=s["stroke-miterlimit"]||8,s["stroke-linecap"]&&(D.endcap="butt"==s["stroke-linecap"]?"flat":"square"==s["stroke-linecap"]?"square":"round"),s["stroke-dasharray"]){var N={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};D.dashstyle=N[o](s["stroke-dasharray"])?N[s["stroke-dasharray"]]:p}A&&n.appendChild(D)}if("text"==u.type)switch(h=u.paper.span.style,l.font&&(h.font=l.font),l["font-family"]&&(h.fontFamily=l["font-family"]),l["font-size"]&&(h.fontSize=l["font-size"]),l["font-weight"]&&(h.fontWeight=l["font-weight"]),l["font-style"]&&(h.fontStyle=l["font-style"]),u.node.string&&(u.paper.span.innerHTML=f(u.node.string)[$](/</g,"&#60;")[$](/&/g,"&#38;")[$](/\n/g,"<br>")),u.W=l.w=u.paper.span.offsetWidth,u.H=l.h=u.paper.span.offsetHeight,u.X=l.x,u.Y=l.y+B(u.H/2),l["text-anchor"]){case"start":u.node.style["v-text-align"]="left",u.bbx=B(u.W/2);break;case"end":u.node.style["v-text-align"]="right",u.bbx=-B(u.W/2);break;default:u.node.style["v-text-align"]="center"}},xt=function(t,e){t.attrs=t.attrs||{};t.attrs;var i,s="linear",r=".5 .5";if(t.attrs.gradient=e,e=(e=f(e)[$](X,(function(t,e,i){return s="radial",e&&i&&(e=R(e),i=R(i),k(e-.5,2)+k(i-.5,2)>.25&&(i=C.sqrt(.25-k(e-.5,2))*(2*(i>.5)-1)+.5),r=e+m+i),p}))).split(/\s*\-\s*/),"linear"==s){var n=e.shift();if(n=-R(n),isNaN(n))return null}var o=gt(e);if(!o)return null;if(!(i=(t=t.shape||t.node).getElementsByTagName(O)[0]||Ht(O)).parentNode&&t.appendChild(i),o[b]){i.on=!0,i.method="none",i.color=o[0].color,i.color2=o[o[b]-1].color;for(var a=[],l=0,h=o[b];l<h;l++)o[l].offset&&a[P](o[l].offset+m+o[l].color);i.colors&&(i.colors.value=a[b]?a.join():"0% "+i.color),"radial"==s?(i.type="gradientradial",i.focus="100%",i.focussize=r,i.focusposition=r):(i.type="gradient",i.angle=(270-n)%360)}return 1},(It=(Pt=function(e,i,s){this[0]=e,this.id=t._oid++,this.node=e,e.raphael=this,this.X=0,this.Y=0,this.attrs={},this.Group=i,this.paper=s,this._={tx:0,ty:0,rt:{deg:0},sx:1,sy:1},!s.bottom&&(s.bottom=this),this.prev=s.top,s.top&&(s.top.next=this),s.top=this,this.next=null})[n]).rotate=function(t,e,s){return this.removed?this:null==t?this._.rt.cx?[this._.rt.deg,this._.rt.cx,this._.rt.cy].join(m):this._.rt.deg:((t=f(t).split(i))[b]-1&&(e=R(t[1]),s=R(t[2])),t=R(t[0]),null!=e?this._.rt.deg=t:this._.rt.deg+=t,null==s&&(e=null),this._.rt.cx=e,this._.rt.cy=s,this.setBox(this.attrs,e,s),this.Group.style.rotation=this._.rt.deg,this)},It.setBox=function(t,e,i){if(this.removed)return this;var s=this.Group.style,r=this.shape&&this.shape.style||this.node.style;for(var n in t=t||{})t[o](n)&&(this.attrs[n]=t[n]);e=e||this._.rt.cx,i=i||this._.rt.cy;var a,l,h,c,u=this.attrs;switch(this.type){case"circle":a=u.cx-u.r,l=u.cy-u.r,h=c=2*u.r;break;case"ellipse":a=u.cx-u.rx,l=u.cy-u.ry,h=2*u.rx,c=2*u.ry;break;case"image":a=+u.x,l=+u.y,h=u.width||0,c=u.height||0;break;case"text":this.textpath.v=["m",B(u.x),", ",B(u.y-2),"l",B(u.x)+1,", ",B(u.y-2)].join(p),a=u.x-B(this.W/2),l=u.y-this.H/2,h=this.W,c=this.H;break;case"rect":case"path":if(this.attrs.path){var d=ot(this.attrs.path);a=d.x,l=d.y,h=d.width,c=d.height}else a=0,l=0,h=this.paper.width,c=this.paper.height;break;default:a=0,l=0,h=this.paper.width,c=this.paper.height}i=null==i?l+c/2:i;var m,f=(e=null==e?a+h/2:e)-this.paper.width/2,g=i-this.paper.height/2;s.left!=(m=f+"px")&&(s.left=m),s.top!=(m=g+"px")&&(s.top=m),this.X=Kt[o](this.type)?-f:a,this.Y=Kt[o](this.type)?-g:l,this.W=h,this.H=c,Kt[o](this.type)?(r.left!=(m=-f*qt+"px")&&(r.left=m),r.top!=(m=-g*qt+"px")&&(r.top=m)):"text"==this.type?(r.left!=(m=-f+"px")&&(r.left=m),r.top!=(m=-g+"px")&&(r.top=m)):(s.width!=(m=this.paper.width+"px")&&(s.width=m),s.height!=(m=this.paper.height+"px")&&(s.height=m),r.left!=(m=a-f+"px")&&(r.left=m),r.top!=(m=l-g+"px")&&(r.top=m),r.width!=(m=h+"px")&&(r.width=m),r.height!=(m=c+"px")&&(r.height=m))},It.hide=function(){return!this.removed&&(this.Group.style.display="none"),this},It.show=function(){return!this.removed&&(this.Group.style.display="block"),this},It.getBBox=function(){return this.removed?this:Kt[o](this.type)?ot(this.attrs.path):{x:this.X+(this.bbx||0),y:this.Y,width:this.W,height:this.H}},It.remove=function(){if(!this.removed){for(var t in yt(this,this.paper),this.node.parentNode.removeChild(this.node),this.Group.parentNode.removeChild(this.Group),this.shape&&this.shape.parentNode.removeChild(this.shape),this)delete this[t];this.removed=!0}},It.attr=function(e,i){if(this.removed)return this;if(null==e){var s={};for(var r in this.attrs)this.attrs[o](r)&&(s[r]=this.attrs[r]);return this._.rt.deg&&(s.rotation=this.rotate()),(1!=this._.sx||1!=this._.sy)&&(s.scale=this.scale()),s.gradient&&"none"==s.fill&&(s.fill=s.gradient)&&delete s.gradient,s}if(null==i&&t.is(e,"string"))return"translation"==e?ge.call(this):"rotation"==e?this.rotate():"scale"==e?this.scale():e==O&&"none"==this.attrs.fill&&this.attrs.gradient?this.attrs.gradient:this.attrs[e];if(this.attrs&&null==i&&t.is(e,D)){var n,a={};for(r=0,n=e[b];r<n;r++)a[e[r]]=this.attr(e[r]);return a}var l;if(null!=i&&((l={})[e]=i),null==i&&t.is(e,"object")&&(l=e),l){for(var h in this.paper.customAttributes)if(this.paper.customAttributes[o](h)&&l[o](h)&&t.is(this.paper.customAttributes[h],"function")){var c=this.paper.customAttributes[h].apply(this,[].concat(l[h]));for(var u in this.attrs[h]=l[h],c)c[o](u)&&(l[u]=c[u])}l.text&&"text"==this.type&&(this.node.string=l.text),Ot(this,l),l.gradient&&({circle:1,ellipse:1}[o](this.type)||"r"!=f(l.gradient).charAt())&&xt(this,l.gradient),(!Kt[o](this.type)||this._.rt.deg)&&this.setBox(this.attrs)}return this},It.toFront=function(){return!this.removed&&this.Group.parentNode.appendChild(this.Group),this.paper.top!=this&&Ct(this,this.paper),this},It.toBack=function(){return this.removed||this.Group.parentNode.firstChild!=this.Group&&(this.Group.parentNode.insertBefore(this.Group,this.Group.parentNode.firstChild),_t(this,this.paper)),this},It.insertAfter=function(t){return this.removed||(t.constructor==ye&&(t=t[t.length-1]),t.Group.nextSibling?t.Group.parentNode.insertBefore(this.Group,t.Group.nextSibling):t.Group.parentNode.appendChild(this.Group),Et(this,t,this.paper)),this},It.insertBefore=function(t){return this.removed||(t.constructor==ye&&(t=t[0]),t.Group.parentNode.insertBefore(this.Group,t.Group),wt(this,t,this.paper)),this},It.blur=function(e){var i=this.node.runtimeStyle,s=i.filter;s=s.replace($t,p),0!=+e?(this.attrs.blur=e,i.filter=s+m+F+".Blur(pixelradius="+(+e||1.5)+")",i.margin=t.format("-{0}px 0 0 -{0}px",B(+e||1.5))):(i.filter=s,i.margin=0,delete this.attrs.blur)},Lt=function(t,e,i,s){var r=Ht("group"),n=Ht("oval");n.style;r.style.cssText="position:absolute;left:0;top:0;width:"+t.width+"px;height:"+t.height+"px",r.coordsize=Vt,r.coordorigin=t.coordorigin,r.appendChild(n);var o=new Pt(n,r,t);return o.type="circle",Ot(o,{stroke:"#000",fill:"none"}),o.attrs.cx=e,o.attrs.cy=i,o.attrs.r=s,o.setBox({x:e-s,y:i-s,width:2*s,height:2*s}),t.canvas.appendChild(r),o},jt=function(t,e,i,s,r,n){var o=Gt(e,i,s,r,n),a=t.path(o),l=a.attrs;return a.X=l.x=e,a.Y=l.y=i,a.W=l.width=s,a.H=l.height=r,l.r=n,l.path=o,a.type="rect",a},Nt=function(t,e,i,s,r){var n=Ht("group"),o=Ht("oval");o.style;n.style.cssText="position:absolute;left:0;top:0;width:"+t.width+"px;height:"+t.height+"px",n.coordsize=Vt,n.coordorigin=t.coordorigin,n.appendChild(o);var a=new Pt(o,n,t);return a.type="ellipse",Ot(a,{stroke:"#000"}),a.attrs.cx=e,a.attrs.cy=i,a.attrs.rx=s,a.attrs.ry=r,a.setBox({x:e-s,y:i-r,width:2*s,height:2*r}),t.canvas.appendChild(n),a},Bt=function(t,e,i,s,r,n){var o=Ht("group"),a=Ht("image");o.style.cssText="position:absolute;left:0;top:0;width:"+t.width+"px;height:"+t.height+"px",o.coordsize=Vt,o.coordorigin=t.coordorigin,a.src=e,o.appendChild(a);var l=new Pt(a,o,t);return l.type="image",l.attrs.src=e,l.attrs.x=i,l.attrs.y=s,l.attrs.w=r,l.attrs.h=n,l.setBox({x:i,y:s,width:r,height:n}),t.canvas.appendChild(o),l},Rt=function(e,i,s,r){var n=Ht("group"),o=Ht("shape"),a=o.style,l=Ht("path"),h=(l.style,Ht("textpath"));n.style.cssText="position:absolute;left:0;top:0;width:"+e.width+"px;height:"+e.height+"px",n.coordsize=Vt,n.coordorigin=e.coordorigin,l.v=t.format("m{0},{1}l{2},{1}",B(10*i),B(10*s),B(10*i)+1),l.textpathok=!0,a.width=e.width,a.height=e.height,h.string=f(r),h.on=!0,o.appendChild(h),o.appendChild(l),n.appendChild(o);var c=new Pt(h,n,e);return c.shape=o,c.textpath=l,c.type="text",c.attrs.text=r,c.attrs.x=i,c.attrs.y=s,c.attrs.w=1,c.attrs.h=1,Ot(c,{font:z.font,stroke:"none",fill:"#000"}),c.setBox(),e.canvas.appendChild(n),c},Mt=function(t,e){var i=this.canvas.style;return t==+t&&(t+="px"),e==+e&&(e+="px"),i.width=t,i.height=e,i.clip="rect(0 "+t+" "+e+" 0)",this},a.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!a.namespaces.rvml&&a.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),Ht=function(t){return a.createElement("<rvml:"+t+' class="rvml">')}}catch(t){Ht=function(t){return a.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}Ft=function(){var e=vt[u](0,arguments),i=e.container,s=e.height,r=e.width,n=e.x,o=e.y;if(!i)throw new Error("VML container not found.");var l=new c,h=l.canvas=a.createElement("div"),d=h.style;return n=n||0,o=o||0,(r=r||512)==+r&&(r+="px"),(s=s||342)==+s&&(s+="px"),l.width=1e3,l.height=1e3,l.coordsize="10000 10000",l.coordorigin="0 0",l.span=a.createElement("span"),l.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",h.appendChild(l.span),d.cssText=t.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",r,s),1==i?(a.body.appendChild(h),d.left=n+"px",d.top=o+"px",d.position="absolute"):i.firstChild?i.insertBefore(h,i.firstChild):i.appendChild(h),bt.call(l,l,t.fn),l},e.clear=function(){this.canvas.innerHTML=p,this.span=a.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},e.remove=function(){for(var t in this.canvas.parentNode.removeChild(this.canvas),this)this[t]=kt(t);return!0}}var Yt=navigator.userAgent.match(/Version\/(.*?)\s/);"Apple Computer, Inc."==navigator.vendor&&(Yt&&Yt[1]<4||"iP"==navigator.platform.slice(0,2))?e.safari=function(){var t=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});l.setTimeout((function(){t.remove()}))}:e.safari=function(){};for(var Xt=function(){this.returnValue=!1},Jt=function(){return this.originalEvent.preventDefault()},Qt=function(){this.cancelBubble=!0},Zt=function(){return this.originalEvent.stopPropagation()},te=a.addEventListener?function(t,e,i,s){var r=d&&v[e]?v[e]:e,n=function(r){if(d&&v[o](e))for(var n=0,a=r.targetTouches&&r.targetTouches.length;n<a;n++)if(r.targetTouches[n].target==t){var l=r;(r=r.targetTouches[n]).originalEvent=l,r.preventDefault=Jt,r.stopPropagation=Zt;break}return i.call(s,r)};return t.addEventListener(r,n,!1),function(){return t.removeEventListener(r,n,!1),!0}}:a.attachEvent?function(t,e,i,s){var r=function(t){return(t=t||l.event).preventDefault=t.preventDefault||Xt,t.stopPropagation=t.stopPropagation||Qt,i.call(s,t)};return t.attachEvent("on"+e,r),function(){return t.detachEvent("on"+e,r),!0}}:void 0,ee=[],ie=function(t){for(var e,i=t.clientX,s=t.clientY,r=a.documentElement.scrollTop||a.body.scrollTop,n=a.documentElement.scrollLeft||a.body.scrollLeft,o=ee.length;o--;){if(e=ee[o],d){for(var l,h=t.touches.length;h--;)if((l=t.touches[h]).identifier==e.el._drag.id){i=l.clientX,s=l.clientY,(t.originalEvent?t.originalEvent:t).preventDefault();break}}else t.preventDefault();i+=n,s+=r,e.move&&e.move.call(e.move_scope||e.el,i-e.el._drag.x,s-e.el._drag.y,i,s,t)}},se=function(e){t.unmousemove(ie).unmouseup(se);for(var i,s=ee.length;s--;)(i=ee[s]).el._drag={},i.end&&i.end.call(i.end_scope||i.start_scope||i.move_scope||i.el,e);ee=[]},re=g[b];re--;)!function(e){t[e]=Pt[n][e]=function(i,s){return t.is(i,"function")&&(this.events=this.events||[],this.events.push({name:e,f:i,unbind:te(this.shape||this.node||a,e,i,s||this)})),this},t["un"+e]=Pt[n]["un"+e]=function(t){for(var i=this.events,s=i[b];s--;)if(i[s].name==e&&i[s].f==t)return i[s].unbind(),i.splice(s,1),!i.length&&delete this.events,this;return this}}(g[re]);function ne(){return this.x+m+this.y}It.hover=function(t,e,i,s){return this.mouseover(t,i).mouseout(e,s||i)},It.unhover=function(t,e){return this.unmouseover(t).unmouseout(e)},It.drag=function(e,i,s,r,n,o){return this._drag={},this.mousedown((function(l){(l.originalEvent||l).preventDefault();var h=a.documentElement.scrollTop||a.body.scrollTop,c=a.documentElement.scrollLeft||a.body.scrollLeft;this._drag.x=l.clientX+c,this._drag.y=l.clientY+h,this._drag.id=l.identifier,i&&i.call(n||r||this,l.clientX+c,l.clientY+h,l),!ee.length&&t.mousemove(ie).mouseup(se),ee.push({el:this,move:e,end:s,move_scope:r,start_scope:n,end_scope:o})})),this},It.undrag=function(e,i,s){for(var r=ee.length;r--;)ee[r].el==this&&ee[r].move==e&&ee[r].end==s&&ee.splice(r++,1);!ee.length&&t.unmousemove(ie).unmouseup(se)},e.circle=function(t,e,i){return Lt(this,t||0,e||0,i||0)},e.rect=function(t,e,i,s,r){return jt(this,t||0,e||0,i||0,s||0,r||0)},e.ellipse=function(t,e,i,s){return Nt(this,t||0,e||0,i||0,s||0)},e.path=function(e){return e&&!t.is(e,x)&&!t.is(e[0],D)&&(e+=p),St(t.format[u](t,arguments),this)},e.image=function(t,e,i,s,r){return Bt(this,t||"about:blank",e||0,i||0,s||0,r||0)},e.text=function(t,e,i){return Rt(this,t||0,e||0,f(i))},e.set=function(t){return arguments[b]>1&&(t=Array[n].splice.call(arguments,0,arguments[b])),new ye(t)},e.setSize=Mt,e.top=e.bottom=null,e.raphael=t,It.resetScale=function(){if(this.removed)return this;this._.sx=1,this._.sy=1,this.attrs.scale="1 1"},It.scale=function(t,e,i,s){if(this.removed)return this;if(null==t&&null==e)return{x:this._.sx,y:this._.sy,toString:ne};!+(e=e||t)&&(e=t);var r,n,o=this.attrs;if(0!=t){var a=this.getBBox(),l=a.x+a.width/2,h=a.y+a.height/2,c=w(t/this._.sx),u=w(e/this._.sy);i=+i||0==i?i:l,s=+s||0==s?s:h;var d=this._.sx>0,f=this._.sy>0,g=~~(t/w(t)),v=~~(e/w(e)),y=c*g,C=u*v,_=this.node.style,E=i+w(l-i)*y*(l>i==d?1:-1),k=s+w(h-s)*C*(h>s==f?1:-1),T=t*g>e*v?u:c;switch(this.type){case"rect":case"image":var S=o.width*c,x=o.height*u;this.attr({height:x,r:o.r*T,width:S,x:E-S/2,y:k-x/2});break;case"circle":case"ellipse":this.attr({rx:o.rx*c,ry:o.ry*u,r:o.r*T,cx:E,cy:k});break;case"text":this.attr({x:E,y:k});break;case"path":for(var D=lt(o.path),O=!0,A=d?y:c,P=f?C:u,I=0,L=D[b];I<L;I++){var j=D[I],N=H.call(j[0]);if("M"!=N||!O)if(O=!1,"A"==N)j[D[I][b]-2]*=A,j[D[I][b]-1]*=P,j[1]*=c,j[2]*=u,j[5]=+(g+v?!!+j[5]:!+j[5]);else if("H"==N)for(var B=1,R=j[b];B<R;B++)j[B]*=A;else if("V"==N)for(B=1,R=j[b];B<R;B++)j[B]*=P;else for(B=1,R=j[b];B<R;B++)j[B]*=B%2?A:P}var M=ot(D);r=E-M.x-M.width/2,n=k-M.y-M.height/2,D[0][1]+=r,D[0][2]+=n,this.attr({path:D})}!(this.type in{text:1,image:1})||1==g&&1==v?this.transformations?(this.transformations[2]=p,this.node.setAttribute("transform",this.transformations.join(m)),o.fx=0,o.fy=0):(this.node.filterMatrix=p,_.filter=(this.node.filterMatrix||p)+(this.node.filterOpacity||p)):this.transformations?(this.transformations[2]="scale(".concat(g,",",v,")"),this.node.setAttribute("transform",this.transformations.join(m)),r=-1==g?-o.x-(S||0):o.x,n=-1==v?-o.y-(x||0):o.y,this.attr({x:r,y:n}),o.fx=g-1,o.fy=v-1):(this.node.filterMatrix=F+".Matrix(M11=".concat(g,", M12=0, M21=0, M22=",v,", Dx=0, Dy=0, sizingmethod='auto expand', filtertype='bilinear')"),_.filter=(this.node.filterMatrix||p)+(this.node.filterOpacity||p)),o.scale=[t,e,i,s].join(m),this._.sx=t,this._.sy=e}return this},It.clone=function(){if(this.removed)return null;var t=this.attr();return delete t.scale,delete t.translation,this.paper[this.type]().attr(t)};var oe={},ae=function(e,i,s,r,n,o,a,l,h){var c,u,d=0,p=100,m=[e,i,s,r,n,o,a,l].join(),f=oe[m];(!f&&(oe[m]=f={data:[]}),f.timer&&clearTimeout(f.timer),f.timer=setTimeout((function(){delete oe[m]}),2e3),null!=h)&&(p=10*~~ae(e,i,s,r,n,o,a,l));for(var g=0;g<p+1;g++){if(f.data[h]>g?u=f.data[g*p]:(u=t.findDotsAtSegment(e,i,s,r,n,o,a,l,g/p),f.data[g]=u),g&&(d+=k(k(c.x-u.x,2)+k(c.y-u.y,2),.5)),null!=h&&d>=h)return u;c=u}if(null==h)return d},le=function(e,i){return function(s,r,n){for(var o,a,l,h,c,u="",d={},p=0,m=0,f=(s=ft(s)).length;m<f;m++){if("M"==(l=s[m])[0])o=+l[1],a=+l[2];else{if(p+(h=ae(o,a,l[1],l[2],l[3],l[4],l[5],l[6]))>r){if(i&&!d.start){if(u+=["C",(c=ae(o,a,l[1],l[2],l[3],l[4],l[5],l[6],r-p)).start.x,c.start.y,c.m.x,c.m.y,c.x,c.y],n)return u;d.start=u,u=["M",c.x,c.y+"C",c.n.x,c.n.y,c.end.x,c.end.y,l[5],l[6]].join(),p+=h,o=+l[5],a=+l[6];continue}if(!e&&!i)return{x:(c=ae(o,a,l[1],l[2],l[3],l[4],l[5],l[6],r-p)).x,y:c.y,alpha:c.alpha}}p+=h,o=+l[5],a=+l[6]}u+=l}return d.end=u,(c=e?p:i?d:t.findDotsAtSegment(o,a,l[1],l[2],l[3],l[4],l[5],l[6],1)).alpha&&(c={x:c.x,y:c.y,alpha:c.alpha}),c}},he=le(1),ce=le(),ue=le(0,1);It.getTotalLength=function(){if("path"==this.type)return this.node.getTotalLength?this.node.getTotalLength():he(this.attrs.path)},It.getPointAtLength=function(t){if("path"==this.type)return ce(this.attrs.path,t)},It.getSubpath=function(t,e){if("path"==this.type){if(w(this.getTotalLength()-e)<"1e-6")return ue(this.attrs.path,t).end;var i=ue(this.attrs.path,e,1);return t?ue(i,t).end:i}},t.easing_formulas={linear:function(t){return t},"<":function(t){return k(t,3)},">":function(t){return k(t-1,3)+1},"<>":function(t){return(t*=2)<1?k(t,3)/2:(k(t-=2,3)+2)/2},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},elastic:function(t){if(0==t||1==t)return t;return k(2,-10*t)*C.sin(2*T*(t-.075)/.3)+1},bounce:function(t){var e=7.5625,i=2.75;return t<1/i?e*t*t:t<2/i?e*(t-=1.5/i)*t+.75:t<2.5/i?e*(t-=2.25/i)*t+.9375:e*(t-=2.625/i)*t+.984375}};var de=[],pe=function(){for(var e=+new Date,i=0;i<de[b];i++){var s=de[i];if(!s.stop&&!s.el.removed){var r,n=e-s.start,a=s.ms,l=s.easing,h=s.from,c=s.diff,u=s.to,d=s.t,f=s.el,g={};if(n<a){var v=l(n/a);for(var y in h)if(h[o](y)){switch(W[y]){case"along":r=v*a*c[y],u.back&&(r=u.len-r);var C=ce(u[y],r);f.translate(c.sx-c.x||0,c.sy-c.y||0),c.x=C.x,c.y=C.y,f.translate(C.x-c.sx,C.y-c.sy),u.rot&&f.rotate(c.r+C.alpha,C.x,C.y);break;case S:r=+h[y]+v*a*c[y];break;case"colour":r="rgb("+[fe(B(h[y].r+v*a*c[y].r)),fe(B(h[y].g+v*a*c[y].g)),fe(B(h[y].b+v*a*c[y].b))].join(",")+")";break;case"path":r=[];for(var _=0,E=h[y][b];_<E;_++){r[_]=[h[y][_][0]];for(var w=1,k=h[y][_][b];w<k;w++)r[_][w]=+h[y][_][w]+v*a*c[y][_][w];r[_]=r[_].join(m)}r=r.join(m);break;case"csv":switch(y){case"translation":var T=v*a*c[y][0]-d.x,x=v*a*c[y][1]-d.y;d.x+=T,d.y+=x,r=T+m+x;break;case"rotation":r=+h[y][0]+v*a*c[y][0],h[y][1]&&(r+=","+h[y][1]+","+h[y][2]);break;case"scale":r=[+h[y][0]+v*a*c[y][0],+h[y][1]+v*a*c[y][1],2 in u[y]?u[y][2]:p,3 in u[y]?u[y][3]:p].join(m);break;case"clip-rect":for(r=[],_=4;_--;)r[_]=+h[y][_]+v*a*c[y][_]}break;default:var D=[].concat(h[y]);for(r=[],_=f.paper.customAttributes[y].length;_--;)r[_]=+D[_]+v*a*c[y][_]}g[y]=r}f.attr(g),f._run&&f._run.call(f)}else u.along&&(C=ce(u.along,u.len*!u.back),f.translate(c.sx-(c.x||0)+C.x-c.sx,c.sy-(c.y||0)+C.y-c.sy),u.rot&&f.rotate(c.r+C.alpha,C.x,C.y)),(d.x||d.y)&&f.translate(-d.x,-d.y),u.scale&&(u.scale+=p),f.attr(u),de.splice(i--,1)}}t.svg&&f&&f.paper&&f.paper.safari(),de[b]&&setTimeout(pe)},me=function(e,i,s,r,n){var o=s-r;i.timeouts.push(setTimeout((function(){t.is(n,"function")&&n.call(i),i.animate(e,o,e.easing)}),r))},fe=function(t){return _(E(t,255),0)},ge=function(t,e){if(null==t)return{x:this._.tx,y:this._.ty,toString:ne};switch(this._.tx+=+t,this._.ty+=+e,this.type){case"circle":case"ellipse":this.attr({cx:+t+this.attrs.cx,cy:+e+this.attrs.cy});break;case"rect":case"image":case"text":this.attr({x:+t+this.attrs.x,y:+e+this.attrs.y});break;case"path":var i=lt(this.attrs.path);i[0][1]+=+t,i[0][2]+=+e,this.attr({path:i})}return this};function ve(e){return function(i,s,r,n){var o={back:e};return t.is(r,"function")?n=r:o.rot=r,i&&i.constructor==Pt&&(i=i.attrs.path),i&&(o.along=i),this.animate(o,s,n)}}function be(t,e,i,s,r,n){var o=3*e,a=3*(s-e)-o,l=1-o-a,h=3*i,c=3*(r-i)-h,u=1-h-c;function d(t){return((l*t+a)*t+o)*t}return function(t,e){var i=function(t,e){var i,s,r,n,h,c;for(r=t,c=0;c<8;c++){if(n=d(r)-t,w(n)<e)return r;if(w(h=(3*l*r+2*a)*r+o)<1e-6)break;r-=n/h}if(s=1,(r=t)<(i=0))return i;if(r>s)return s;for(;i<s;){if(n=d(r),w(n-t)<e)return r;t>n?i=r:s=r,r=(s-i)/2+i}return r}(t,e);return((u*i+c)*i+h)*i}(t,1/(200*n))}It.animateWith=function(t,e,i,s,r){for(var n=0,o=de.length;n<o;n++)de[n].el.id==t.id&&(e.start=de[n].start);return this.animate(e,i,s,r)},It.animateAlong=ve(),It.animateAlongBack=ve(1),It.onAnimation=function(t){return this._run=t||0,this},It.animate=function(e,s,r,n){var a=this;if(a.timeouts=a.timeouts||[],!t.is(r,"function")&&r||(n=r||null),a.removed)return n&&n.call(a),a;var l={},h={},c=!1,u={};for(var d in e)if(e[o](d)&&(W[o](d)||a.paper.customAttributes[o](d)))switch(c=!0,l[d]=a.attr(d),null==l[d]&&(l[d]=z[d]),h[d]=e[d],W[d]){case"along":var p=he(e[d]),m=ce(e[d],p*!!e.back),g=a.getBBox();u[d]=p/s,u.tx=g.x,u.ty=g.y,u.sx=m.x,u.sy=m.y,h.rot=e.rot,h.back=e.back,h.len=p,e.rot&&(u.r=R(a.rotate())||0);break;case S:u[d]=(h[d]-l[d])/s;break;case"colour":l[d]=t.getRGB(l[d]);var v=t.getRGB(h[d]);u[d]={r:(v.r-l[d].r)/s,g:(v.g-l[d].g)/s,b:(v.b-l[d].b)/s};break;case"path":var y=ft(l[d],h[d]);l[d]=y[0];var C=y[1];u[d]=[];for(var _=0,E=l[d][b];_<E;_++){u[d][_]=[0];for(var w=1,k=l[d][_][b];w<k;w++)u[d][_][w]=(C[_][w]-l[d][_][w])/s}break;case"csv":var T=f(e[d]).split(i),x=f(l[d]).split(i);switch(d){case"translation":l[d]=[0,0],u[d]=[T[0]/s,T[1]/s];break;case"rotation":l[d]=x[1]==T[1]&&x[2]==T[2]?x:[0,T[1],T[2]],u[d]=[(T[0]-l[d][0])/s,0,0];break;case"scale":e[d]=T,l[d]=f(l[d]).split(i),u[d]=[(T[0]-l[d][0])/s,(T[1]-l[d][1])/s,0,0];break;case"clip-rect":for(l[d]=f(l[d]).split(i),u[d]=[],_=4;_--;)u[d][_]=(T[_]-l[d][_])/s}h[d]=T;break;default:for(T=[].concat(e[d]),x=[].concat(l[d]),u[d]=[],_=a.paper.customAttributes[d][b];_--;)u[d][_]=((T[_]||0)-(x[_]||0))/s}if(c){var D=t.easing_formulas[r];if(!D)if((D=f(r).match(N))&&5==D[b]){var O=D;D=function(t){return be(t,+O[1],+O[2],+O[3],+O[4],s)}}else D=function(t){return t};de.push({start:e.start||+new Date,ms:s,easing:D,from:l,diff:u,to:h,el:a,t:{x:0,y:0}}),t.is(n,"function")&&(a._ac=setTimeout((function(){n.call(a)}),s)),1==de[b]&&setTimeout(pe)}else{var A,P=[];for(var I in e)e[o](I)&&U.test(I)&&(d={value:e[I]},"from"==I&&(I=0),"to"==I&&(I=100),d.key=M(I,10),P.push(d));for(P.sort(J),P[0].key&&P.unshift({key:0,value:a.attrs}),_=0,E=P[b];_<E;_++)me(P[_].value,a,s/100*P[_].key,s/100*(P[_-1]&&P[_-1].key||0),P[_-1]&&P[_-1].value.callback);(A=P[P[b]-1].value.callback)&&a.timeouts.push(setTimeout((function(){A.call(a)}),s))}return this},It.stop=function(){for(var t=0;t<de.length;t++)de[t].el.id==this.id&&de.splice(t--,1);for(t=0,ii=this.timeouts&&this.timeouts.length;t<ii;t++)clearTimeout(this.timeouts[t]);return this.timeouts=[],clearTimeout(this._ac),delete this._ac,this},It.translate=function(t,e){return this.attr({translation:t+" "+e})},It.toString=function(){return"Raphals object"},t.ae=de;var ye=function(t){if(this.items=[],this[b]=0,this.type="set",t)for(var e=0,i=t[b];e<i;e++)!t[e]||t[e].constructor!=Pt&&t[e].constructor!=ye||(this[this.items[b]]=this.items[this.items[b]]=t[e],this[b]++)};for(var Ce in ye[n][P]=function(){for(var t,e,i=0,s=arguments[b];i<s;i++)!(t=arguments[i])||t.constructor!=Pt&&t.constructor!=ye||(this[e=this.items[b]]=this.items[e]=t,this[b]++);return this},ye[n].pop=function(){return delete this[this[b]--],this.items.pop()},It)It[o](Ce)&&(ye[n][Ce]=function(t){return function(){for(var e=0,i=this.items[b];e<i;e++)this.items[e][t][u](this.items[e],arguments);return this}}(Ce));ye[n].attr=function(e,i){if(e&&t.is(e,D)&&t.is(e[0],"object"))for(var s=0,r=e[b];s<r;s++)this.items[s].attr(e[s]);else for(var n=0,o=this.items[b];n<o;n++)this.items[n].attr(e,i);return this},ye[n].animate=function(e,i,s,r){(t.is(s,"function")||!s)&&(r=s||null);var n,o,a=this.items[b],l=a,h=this;for(r&&(o=function(){!--a&&r.call(h)}),s=t.is(s,x)?s:o,n=this.items[--l].animate(e,i,s,o);l--;)this.items[l]&&!this.items[l].removed&&this.items[l].animateWith(n,e,i,s,o);return this},ye[n].insertAfter=function(t){for(var e=this.items[b];e--;)this.items[e].insertAfter(t);return this},ye[n].getBBox=function(){for(var t=[],e=[],i=[],s=[],r=this.items[b];r--;){var n=this.items[r].getBBox();t[P](n.x),e[P](n.y),i[P](n.x+n.width),s[P](n.y+n.height)}return{x:t=E[u](0,t),y:e=E[u](0,e),width:_[u](0,i)-t,height:_[u](0,s)-e}},ye[n].clone=function(t){t=new ye;for(var e=0,i=this.items[b];e<i;e++)t[P](this.items[e].clone());return t},t.registerFont=function(t){if(!t.face)return t;this.fonts=this.fonts||{};var e={w:t.w,face:{},glyphs:{}},i=t.face["font-family"];for(var s in t.face)t.face[o](s)&&(e.face[s]=t.face[s]);if(this.fonts[i]?this.fonts[i][P](e):this.fonts[i]=[e],!t.svg)for(var r in e.face["units-per-em"]=M(t.face["units-per-em"],10),t.glyphs)if(t.glyphs[o](r)){var n=t.glyphs[r];if(e.glyphs[r]={w:n.w,k:{},d:n.d&&"M"+n.d[$](/[mlcxtrv]/g,(function(t){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[t]||"M"}))+"z"},n.k)for(var a in n.k)n[o](a)&&(e.glyphs[r].k[a]=n.k[a])}return t},e.getFont=function(e,i,s,r){if(r=r||"normal",s=s||"normal",i=+i||{normal:400,bold:700,lighter:300,bolder:800}[i]||400,t.fonts){var n,a=t.fonts[e];if(!a){var l=new RegExp("(^|\\s)"+e[$](/[^\w\d\s+!~.:_-]/g,p)+"(\\s|$)","i");for(var h in t.fonts)if(t.fonts[o](h)&&l.test(h)){a=t.fonts[h];break}}if(a)for(var c=0,u=a[b];c<u&&((n=a[c]).face["font-weight"]!=i||n.face["font-style"]!=s&&n.face["font-style"]||n.face["font-stretch"]!=r);c++);return n}},e.print=function(e,s,r,n,o,a,l){a=a||"middle",l=_(E(l||0,1),-1);var h,c=this.set(),u=f(r).split(p),d=0;if(t.is(n,r)&&(n=this.getFont(n)),n){h=(o||16)/n.face["units-per-em"];for(var m=n.face.bbox.split(i),g=+m[0],v=+m[1]+("baseline"==a?m[3]-m[1]+ +n.face.descent:(m[3]-m[1])/2),y=0,C=u[b];y<C;y++){var w=y&&n.glyphs[u[y-1]]||{},k=n.glyphs[u[y]];d+=y?(w.w||n.w)+(w.k&&w.k[u[y]]||0)+n.w*l:0,k&&k.d&&c[P](this.path(k.d).attr({fill:"#000",stroke:"none",translation:[d,0]}))}c.scale(h,h,g,v).translate(e-g,s-v)}return c},t.format=function(e,i){var s=t.is(i,D)?[0].concat(i):arguments;return e&&t.is(e,x)&&s[b]-1&&(e=e[$](r,(function(t,e){return null==s[++e]?p:s[e]}))),e||p},t.ninja=function(){return h.was?l.Raphael=h.is:delete Raphael,t},t.el=It,t.st=ye[n],h.was?l.Raphael=t:Raphael=t}()},5788:function(){!function(t){t.fn.drag=function(e,i,s){var r="string"==typeof e?e:"",n=t.isFunction(e)?e:t.isFunction(i)?i:null;return 0!==r.indexOf("drag")&&(r="drag"+r),s=(e==n?i:s)||{},n?this.bind(r,s,n):this.trigger(r)};var e=t.event,i=e.special,s=i.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",noBubble:!0,add:function(e){var i=t.data(this,s.datakey),r=e.data||{};i.related+=1,t.each(s.defaults,(function(t,e){void 0!==r[t]&&(i[t]=r[t])}))},remove:function(){t.data(this,s.datakey).related-=1},setup:function(){if(!t.data(this,s.datakey)){var i=t.extend({related:0},s.defaults);t.data(this,s.datakey,i),e.add(this,"touchstart mousedown",s.init,i),this.attachEvent&&this.attachEvent("ondragstart",s.dontstart)}},teardown:function(){(t.data(this,s.datakey)||{}).related||(t.removeData(this,s.datakey),e.remove(this,"touchstart mousedown",s.init),s.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",s.dontstart))},init:function(r){if(!s.touched){var n,o=r.data;if(!(0!=r.which&&o.which>0&&r.which!=o.which)&&!t(r.target).is(o.not)&&(!o.handle||t(r.target).closest(o.handle,r.currentTarget).length)&&(s.touched="touchstart"==r.type?this:null,o.propagates=1,o.mousedown=this,o.interactions=[s.interaction(this,o)],o.target=r.target,o.pageX=r.pageX,o.pageY=r.pageY,o.dragging=null,n=s.hijack(r,"draginit",o),o.propagates))return(n=s.flatten(n))&&n.length&&(o.interactions=[],t.each(n,(function(){o.interactions.push(s.interaction(this,o))}))),o.propagates=o.interactions.length,!1!==o.drop&&i.drop&&i.drop.handler(r,o),s.textselect(!1),s.touched?e.add(s.touched,"touchmove touchend",s.handler,o):e.add(document,"mousemove mouseup",s.handler,o),!(!s.touched||o.live)&&void 0}},interaction:function(e,i){var r=t(e)[i.relative?"position":"offset"]()||{top:0,left:0};return{drag:e,callback:new s.callback,droppable:[],offset:r}},handler:function(r){var n=r.data;switch(r.type){case!n.dragging&&"touchmove":r.preventDefault();case!n.dragging&&"mousemove":if(Math.pow(r.pageX-n.pageX,2)+Math.pow(r.pageY-n.pageY,2)<Math.pow(n.distance,2))break;r.target=n.target,s.hijack(r,"dragstart",n),n.propagates&&(n.dragging=!0);case"touchmove":r.preventDefault();case"mousemove":if(n.dragging){if(s.hijack(r,"drag",n),n.propagates){!1!==n.drop&&i.drop&&i.drop.handler(r,n);break}r.type="mouseup"}default:s.touched?e.remove(s.touched,"touchmove touchend",s.handler):e.remove(document,"mousemove mouseup",s.handler),n.dragging&&(!1!==n.drop&&i.drop&&i.drop.handler(r,n),s.hijack(r,"dragend",n)),s.textselect(!0),!1===n.click&&n.dragging&&t.data(n.mousedown,"suppress.click",(new Date).getTime()+5),n.dragging=s.touched=!1}},hijack:function(i,r,n,o,a){if(n){var l,h,c,u={event:i.originalEvent,type:i.type},d=r.indexOf("drop")?"drag":"drop",p=o||0,m=isNaN(o)?n.interactions.length:o;i.type=r,i.originalValues={pageX:i.pageX,pageY:i.pageY},i.originalEvent=null,n.results=[];do{if(h=n.interactions[p]){if("dragend"!==r&&h.cancelled)continue;c=s.properties(i,n,h),h.results=[],t(a||h[d]||n.droppable).each((function(o,a){if(c.target=a,i.isPropagationStopped=function(){return!1},!1===(l=a?e.dispatch.call(a,i,c):null)?("drag"==d&&(h.cancelled=!0,n.propagates-=1),"drop"==r&&(h[d][o]=null)):"dropinit"==r&&h.droppable.push(s.element(l)||a),"dragstart"==r&&(h.proxy=t(s.element(l)||h.drag)[0]),h.results.push(l),delete i.result,"dropinit"!==r)return l})),n.results[p]=s.flatten(h.results),"dropinit"==r&&(h.droppable=s.flatten(h.droppable)),"dragstart"!=r||h.cancelled||c.update()}}while(++p<m);return i.type=u.type,i.originalEvent=u.event,s.flatten(n.results)}},properties:function(t,e,i){var r=i.callback;return r.drag=i.drag,r.proxy=i.proxy||i.drag,r.startX=e.pageX,r.startY=e.pageY,r.deltaX=t.pageX-e.pageX,r.deltaY=t.pageY-e.pageY,r.originalX=i.offset.left,r.originalY=i.offset.top,r.offsetX=r.originalX+r.deltaX,r.offsetY=r.originalY+r.deltaY,r.drop=s.flatten((i.drop||[]).slice()),r.available=s.flatten((i.droppable||[]).slice()),r},element:function(t){if(t&&(t.jquery||1==t.nodeType))return t},flatten:function(e){return t.map(e,(function(e){return e&&e.jquery?t.makeArray(e):e&&e.length?s.flatten(e):e}))},textselect:function(e){t(document)[e?"unbind":"bind"]("selectstart",s.dontstart).css("MozUserSelect",e?"":"none"),document.unselectable=e?"off":"on"},dontstart:function(){return!1},callback:function(){}};s.callback.prototype={update:function(){i.drop&&this.available.length&&t.each(this.available,(function(t){i.drop.locate(this,t)}))}};var r=e.dispatch;e.dispatch=function(e){if(!(t.data(this,"suppress."+e.type)-(new Date).getTime()>0))return r.apply(this,arguments);t.removeData(this,"suppress."+e.type)};var n=e.fixHooks.touchstart=e.fixHooks.touchmove=e.fixHooks.touchend=e.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),filter:function(e,i){if(i){var s=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0]||null;s&&t.each(n.props,(function(t,i){e[i]=s[i]}))}return e}};i.draginit=i.dragstart=i.dragend=s}(jQuery)},244:function(){!function(t){t.fn.drop=function(e,i,s){var r="string"==typeof e?e:"",n=t.isFunction(e)?e:t.isFunction(i)?i:null;return 0!==r.indexOf("drop")&&(r="drop"+r),s=(e==n?i:s)||{},n?this.bind(r,s,n):this.trigger(r)},t.drop=function(e){e=e||{},i.multi=!0===e.multi?1/0:!1===e.multi?1:isNaN(e.multi)?i.multi:e.multi,i.delay=e.delay||i.delay,i.tolerance=t.isFunction(e.tolerance)?e.tolerance:null===e.tolerance?null:i.tolerance,i.mode=e.mode||i.mode||"intersect"};var e=t.event.special,i=t.event.special.drop={multi:1,delay:20,mode:"overlap",targets:[],datakey:"dropdata",noBubble:!0,add:function(e){t.data(this,i.datakey).related+=1},remove:function(){t.data(this,i.datakey).related-=1},setup:function(){if(!t.data(this,i.datakey)){t.data(this,i.datakey,{related:0,active:[],anyactive:0,winner:0,location:{}}),i.targets.push(this)}},teardown:function(){if(!(t.data(this,i.datakey)||{}).related){t.removeData(this,i.datakey);var e=this;i.targets=t.grep(i.targets,(function(t){return t!==e}))}},handler:function(s,r){var n;if(r)switch(s.type){case"mousedown":case"touchstart":n=t(i.targets),"string"==typeof r.drop&&(n=n.filter(r.drop)),n.each((function(){var e=t.data(this,i.datakey);e.active=[],e.anyactive=0,e.winner=0})),r.droppable=n,e.drag.hijack(s,"dropinit",r);break;case"mousemove":case"touchmove":i.event=s,i.timer||i.tolerate(r);break;case"mouseup":case"touchend":i.timer=clearTimeout(i.timer),r.propagates&&(e.drag.hijack(s,"drop",r),e.drag.hijack(s,"dropend",r))}},locate:function(e,s){var r=t.data(e,i.datakey),n=t(e),o=n.offset()||{},a=n.outerHeight(),l=n.outerWidth(),h={elem:e,width:l,height:a,top:o.top,left:o.left,right:o.left+l,bottom:o.top+a};return r&&(r.location=h,r.index=s,r.elem=e),h},contains:function(t,e){return(e[0]||e.left)>=t.left&&(e[0]||e.right)<=t.right&&(e[1]||e.top)>=t.top&&(e[1]||e.bottom)<=t.bottom},modes:{intersect:function(t,e,i){return this.contains(i,[t.pageX,t.pageY])?1e9:this.modes.overlap.apply(this,arguments)},overlap:function(t,e,i){return Math.max(0,Math.min(i.bottom,e.bottom)-Math.max(i.top,e.top))*Math.max(0,Math.min(i.right,e.right)-Math.max(i.left,e.left))},fit:function(t,e,i){return this.contains(i,e)?1:0},middle:function(t,e,i){return this.contains(i,[e.left+.5*e.width,e.top+.5*e.height])?1:0}},sort:function(t,e){return e.winner-t.winner||t.index-e.index},tolerate:function(s){var r,n,o,a,l,h,c,u,d=0,p=s.interactions.length,m=[i.event.pageX,i.event.pageY],f=i.tolerance||i.modes[i.mode];do{if(u=s.interactions[d]){if(!u)return;u.drop=[],l=[],h=u.droppable.length,f&&(o=i.locate(u.proxy)),r=0;do{if(c=u.droppable[r]){if(!(n=(a=t.data(c,i.datakey)).location))continue;a.winner=f?f.call(i,i.event,o,n):i.contains(n,m)?1:0,l.push(a)}}while(++r<h);l.sort(i.sort),r=0;do{(a=l[r])&&(a.winner&&u.drop.length<i.multi?(a.active[d]||a.anyactive||(!1!==e.drag.hijack(i.event,"dropstart",s,d,a.elem)[0]?(a.active[d]=1,a.anyactive+=1):a.winner=0),a.winner&&u.drop.push(a.elem)):a.active[d]&&1==a.anyactive&&(e.drag.hijack(i.event,"dropend",s,d,a.elem),a.active[d]=0,a.anyactive-=1))}while(++r<h)}}while(++d<p);i.last&&m[0]==i.last.pageX&&m[1]==i.last.pageY?delete i.timer:i.timer=setTimeout((function(){i.tolerate(s)}),i.delay),i.last=i.event}};e.dropinit=e.dropstart=e.dropend=i}(jQuery)},4864:function(){!function(t){"use strict";!function(t,e){var i=!1,s={beforeShow:m,move:m,change:m,show:m,hide:m,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null,omnisDataGridColorPicker:!1},r=[],n=!!/msie/i.exec(window.navigator.userAgent),o=function(){function t(t,e){return!!~(""+t).indexOf(e)}var e=document.createElement("div").style;return e.cssText="background-color:rgba(0,0,0,.5)",t(e.backgroundColor,"rgba")||t(e.backgroundColor,"hsla")}(),a=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),l=function(){var t="";if(n)for(var e=1;e<=6;e++)t+="<div class='sp-"+e+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",t,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}();function h(e,i,s,r){for(var n=[],a=0;a<e.length;a++){var l=e[a];if(l){var h=tinycolor(l),c=h.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";c+=tinycolor.equals(i,l)?" sp-thumb-active":"";var u=h.toString(r.preferredFormat||"rgb"),d=o?"background-color:"+h.toRgbString():"filter:"+h.toFilter();n.push('<span title="'+u+'" data-color="'+h.toRgbString()+'" class="'+c+'"><span class="sp-thumb-inner" style="'+d+';" /></span>')}else{var p="sp-clear-display";n.push(t("<div />").append(t('<span data-color="" style="background-color:transparent;" class="'+p+'"></span>').attr("title",r.noColorSelectedText)).html())}}return"<div class='sp-cf "+s+"'>"+n.join("")+"</div>"}function c(){for(var t=0;t<r.length;t++)r[t]&&r[t].hide()}function u(e,i){var r=t.extend({},s,e);return r.callbacks={move:g(r.move,i),change:g(r.change,i),show:g(r.show,i),hide:g(r.hide,i),beforeShow:g(r.beforeShow,i)},r}function d(s,d){var m=u(d,s),g=m.flat,C=m.showSelectionPalette,_=m.localStorageKey,E=m.theme,w=m.callbacks,k=b(Kt,10),T=!1,S=!1,x=0,D=0,O=0,A=0,P=0,I=0,L=0,j=0,N=0,B=0,R=1,M=[],F=[],H={},z=m.selectionPalette.slice(0),W=m.maxSelectionSize,$="sp-dragging",U=null,V=m.omnisDataGridColorPicker,q=s.ownerDocument,K=(q.body,t(s)),G=!1,Y=t(l,q).addClass(E),X=Y.find(".sp-picker-container"),J=Y.find(".sp-color"),Q=Y.find(".sp-dragger"),Z=Y.find(".sp-hue"),tt=Y.find(".sp-slider"),et=Y.find(".sp-alpha-inner"),it=Y.find(".sp-alpha"),st=Y.find(".sp-alpha-handle"),rt=Y.find(".sp-input"),nt=Y.find(".sp-palette"),ot=Y.find(".sp-initial"),at=Y.find(".sp-cancel"),lt=Y.find(".sp-clear"),ht=Y.find(".sp-choose"),ct=Y.find(".sp-palette-toggle"),ut=K.is("input"),dt=ut&&"color"===K.attr("type")&&y(),pt=ut&&!g&&!V,mt=pt?t(a).addClass(E).addClass(m.className).addClass(m.replacerClassName):t([]),ft=pt?mt:K,gt=mt.find(".sp-preview-inner"),vt=m.color||ut&&K.val(),bt=!1,yt=m.preferredFormat,Ct=!m.showButtons||m.clickoutFiresChange,_t=!vt,Et=m.allowEmpty&&!dt;function wt(){if(m.showPaletteOnly&&(m.showPalette=!0),ct.text(m.showPaletteOnly?m.togglePaletteMoreText:m.togglePaletteLessText),m.palette){M=m.palette.slice(0),F=t.isArray(M[0])?M:[M],H={};for(var e=0;e<F.length;e++)for(var i=0;i<F[e].length;i++){var s=tinycolor(F[e][i]).toRgbString();H[s]=!0}}Y.toggleClass("sp-flat",g),Y.toggleClass("sp-input-disabled",!m.showInput),Y.toggleClass("sp-alpha-enabled",m.showAlpha),Y.toggleClass("sp-clear-enabled",Et),Y.toggleClass("sp-buttons-disabled",!m.showButtons),Y.toggleClass("sp-palette-buttons-disabled",!m.togglePaletteOnly),Y.toggleClass("sp-palette-disabled",!m.showPalette),Y.toggleClass("sp-palette-only",m.showPaletteOnly),Y.toggleClass("sp-initial-disabled",!m.showInitial),Y.addClass(m.className).addClass(m.containerClassName),Kt()}function kt(){if(n&&Y.find("*:not(input)").attr("unselectable","on"),wt(),pt&&K.after(mt).hide(),Et||lt.hide(),V&&K.hide(),g)K.after(Y).hide();else{var e="parent"===m.appendTo?K.parent():t(m.appendTo);1!==e.length&&(e=t("body")),e.append(Y)}function i(e){return e.data&&e.data.ignore?(Ht(t(e.target).closest(".sp-thumb-el").data("color")),$t()):(Ht(t(e.target).closest(".sp-thumb-el").data("color")),$t(),m.hideAfterPaletteSelect?(qt(!0),Rt()):qt()),!1}Tt(),ft.on("click.spectrum touchstart.spectrum",(function(e){G||Lt(),e.stopPropagation(),t(e.target).is("input")||e.preventDefault()})),(K.is(":disabled")||!0===m.disabled)&&Jt(),Y.click(f),rt.change(It),rt.on("paste",(function(){setTimeout(It,1)})),rt.keydown((function(t){13==t.keyCode&&It()})),at.text(m.cancelText),at.on("click.spectrum",(function(t){t.stopPropagation(),t.preventDefault(),Ft(),Rt(V)})),lt.attr("title",m.clearText),lt.on("click.spectrum",(function(t){t.stopPropagation(),t.preventDefault(),_t=!0,$t(),(g||V)&&qt(!0)})),ht.text(m.chooseText),ht.on("click.spectrum",(function(t){t.stopPropagation(),t.preventDefault(),n&&rt.is(":focus")&&rt.trigger("change"),Wt()&&(qt(!0),Rt(V,!0))})),ct.text(m.showPaletteOnly?m.togglePaletteMoreText:m.togglePaletteLessText),ct.on("click.spectrum",(function(t){t.stopPropagation(),t.preventDefault(),m.showPaletteOnly=!m.showPaletteOnly,m.showPaletteOnly||g||Y.css("left","-="+(X.outerWidth(!0)+5)),wt()})),v(it,(function(t,e,i){R=t/P,_t=!1,i.shiftKey&&(R=Math.round(10*R)/10),$t()}),At,Pt),v(Z,(function(t,e){j=parseFloat(e/A),_t=!1,m.showAlpha||(R=1),$t()}),At,Pt),v(J,(function(t,e,i){if(i.shiftKey){if(!U){var s=N*x,r=D-B*D,n=Math.abs(t-s)>Math.abs(e-r);U=n?"x":"y"}}else U=null;var o=!U||"y"===U;(!U||"x"===U)&&(N=parseFloat(t/x)),o&&(B=parseFloat((D-e)/D)),_t=!1,m.showAlpha||(R=1),$t()}),At,Pt),vt?(Ht(vt),Ut(),yt=m.preferredFormat||tinycolor(vt).format,St(vt)):Ut(),(g||V)&&jt();var s=n?"mousedown.spectrum":"click.spectrum touchstart.spectrum";nt.on(s,".sp-thumb-el",i),ot.on(s,".sp-thumb-el:nth-child(1)",{ignore:!0},i)}function Tt(){if(_&&window.localStorage){try{var e=window.localStorage[_].split(",#");e.length>1&&(delete window.localStorage[_],t.each(e,(function(t,e){St(e)})))}catch(t){}try{z=window.localStorage[_].split(";")}catch(t){}}}function St(e){if(C){var i=tinycolor(e).toRgbString();if(!H[i]&&-1===t.inArray(i,z))for(z.push(i);z.length>W;)z.shift();if(_&&window.localStorage)try{window.localStorage[_]=z.join(";")}catch(t){}}}function xt(){var t=[];if(m.showPalette)for(var e=0;e<z.length;e++){var i=tinycolor(z[e]).toRgbString();H[i]||t.push(z[e])}return t.reverse().slice(0,m.maxSelectionSize)}function Dt(){var e=zt(),i=t.map(F,(function(t,i){return h(t,e,"sp-palette-row sp-palette-row-"+i,m)}));Tt(),z&&i.push(h(xt(),e,"sp-palette-row sp-palette-row-selection",m)),nt.html(i.join(""))}function Ot(){if(m.showInitial){var t=bt,e=zt();ot.html(h([t,e],e,"sp-palette-row-initial",m))}}function At(){(D<=0||x<=0||A<=0)&&Kt(),S=!0,Y.addClass($),U=null,K.trigger("dragstart.spectrum",[zt()])}function Pt(){S=!1,Y.removeClass($),K.trigger("dragstop.spectrum",[zt()])}function It(){var t=rt.val();if(null!==t&&""!==t||!Et){var e=tinycolor(t);e.isValid()?(Ht(e),$t(),qt()):rt.addClass("sp-validation-error")}else Ht(null),$t(),qt()}function Lt(){T?Rt():jt()}function jt(){var e=t.Event("beforeShow.spectrum");T?Kt():(K.trigger(e,[zt()]),!1===w.beforeShow(zt())||e.isDefaultPrevented()||(c(),T=!0,t(q).on("keydown.spectrum",Nt),t(q).on("click.spectrum",Bt),t(window).on("resize.spectrum",k),mt.addClass("sp-active"),Y.removeClass("sp-hidden"),Kt(),Ut(),bt=zt(),Ot(),w.show(bt),K.trigger("show.spectrum",[bt])))}function Nt(t){switch(OmnisKeyboardHandler.getNormalizedEventKey(t)){case"Escape":Rt(V);break;case"Tab":if(V&&t.target.offsetParent){var e=t.target.offsetParent.querySelector(".sp-input"),i=t.target.offsetParent.querySelector(".sp-choose");jOmnis.tabFocusTrap(e,i,t)}}}function Bt(t){2!=t.button&&(S||(Ct?qt(!0):(i&&Ft(),i=!1),Rt()))}function Rt(e,i){if(T&&!g&&(!V||e)&&(T=!1,t(q).off("keydown.spectrum",Nt),t(q).off("click.spectrum",Bt),t(window).off("resize.spectrum",k),mt.removeClass("sp-active"),Y.addClass("sp-hidden"),w.hide(zt()),K.trigger("hide.spectrum",[zt()]),e)){var s=K.parents(".omnis-datagrid")[0];s&&(s.omnisObject.commitColorEdit=i),K.parents(".slick-cell").focus()}}function Mt(){return T}function Ft(){Ht(bt,!0),qt(!0)}function Ht(t,e){var i,s;tinycolor.equals(t,zt())?Ut():(!t&&Et?_t=!0:(_t=!1,s=(i=tinycolor(t)).toHsv(),j=s.h%360/360,N=s.s,B=s.v,R=s.a),Ut(),i&&i.isValid()&&!e&&(yt=m.preferredFormat||i.getFormat()))}function zt(t){return t=t||{},Et&&_t?null:tinycolor.fromRatio({h:j,s:N,v:B,a:Math.round(1e3*R)/1e3},{format:t.format||yt})}function Wt(){return!rt.hasClass("sp-validation-error")}function $t(){Ut(),w.move(zt()),K.trigger("move.spectrum",[zt()])}function Ut(){rt.removeClass("sp-validation-error"),Vt();var t=tinycolor.fromRatio({h:j,s:1,v:1});J.css("background-color",t.toHexString());var e=yt;R<1&&(0!==R||"name"!==e)&&("hex"!==e&&"hex3"!==e&&"hex6"!==e&&"name"!==e||(e="rgb"));var i=zt({format:e}),s="";if(gt.removeClass("sp-clear-display"),gt.css("background-color","transparent"),!i&&Et)gt.addClass("sp-clear-display");else{var r=i.toHexString(),a=i.toRgbString();if(o||1===i.alpha?gt.css("background-color",a):(gt.css("background-color","transparent"),gt.css("filter",i.toFilter())),m.showAlpha){var l=i.toRgb();l.a=0;var h=tinycolor(l).toRgbString(),c="linear-gradient(left, "+h+", "+r+")";n?et.css("filter",tinycolor(h).toFilter({gradientType:1},r)):(et.css("background","-webkit-"+c),et.css("background","-moz-"+c),et.css("background","-ms-"+c),et.css("background","linear-gradient(to right, "+h+", "+r+")"))}s=i.toString(e)}m.showInput&&rt.val(s),m.showPalette&&Dt(),Ot()}function Vt(){var t=N,e=B;if(Et&&_t)st.hide(),tt.hide(),Q.hide();else{st.show(),tt.show(),Q.show();var i=t*x,s=D-e*D;i=Math.max(-O,Math.min(x-O,i-O)),s=Math.max(-O,Math.min(D-O,s-O)),Q.css({top:s+"px",left:i+"px"});var r=R*P;st.css({left:r-I/2+"px"});var n=j*A;tt.css({top:n-L+"px"})}}function qt(t){var e=zt(),i="",s=!tinycolor.equals(e,bt);e&&(i=e.toString(yt),St(e)),ut&&K.val(i),t&&s&&(w.change(e),K.trigger("change",[e]))}function Kt(){if(T){if(x=J.width(),D=J.height(),O=Q.height(),Z.width(),A=Z.height(),L=tt.height(),P=it.width(),I=st.width(),!g)if(Y.css("position","absolute"),V){var e=t(Y)[0].getBoundingClientRect(),i=t(Y.parent())[0].getBoundingClientRect(),s=20,r=window.innerWidth||document.documentElement.clientWidth;r<e.right&&(i.left-e.right-s>s?Y.css("left",r-e.right-s):Y.css("left",-s));var n=window.innerHeight||document.documentElement.clientHeight;n<e.bottom&&(i.top-e.bottom-s>s?Y.css("top",n-e.bottom-s):Y.css("top",s))}else m.offset?Y.offset(m.offset):Y.offset(p(Y,ft));Vt(),m.showPalette&&Dt(),K.trigger("reflow.spectrum")}}function Gt(){K.show(),ft.off("click.spectrum touchstart.spectrum"),Y.remove(),mt.remove(),r[Zt.id]=null}function Yt(i,s){return i===e?t.extend({},m):s===e?m[i]:(m[i]=s,"preferredFormat"===i&&(yt=m.preferredFormat),void wt())}function Xt(){G=!1,K.attr("disabled",!1),ft.removeClass("sp-disabled")}function Jt(){Rt(),G=!0,K.attr("disabled",!0),ft.addClass("sp-disabled")}function Qt(t){m.offset=t,Kt()}kt();var Zt={show:jt,hide:Rt,toggle:Lt,reflow:Kt,option:Yt,enable:Xt,disable:Jt,offset:Qt,set:function(t){Ht(t),qt()},get:zt,destroy:Gt,isOpen:Mt,container:Y};return Zt.id=r.push(Zt)-1,Zt}function p(e,i){var s=0,r=e.outerWidth(),n=e.outerHeight(),o=i.outerHeight(),a=e[0].ownerDocument,l=a.documentElement,h=l.clientWidth+t(a).scrollLeft(),c=l.clientHeight+t(a).scrollTop(),u=i.offset(),d=u.left,p=u.top;return p+=o,d-=Math.min(d,d+r>h&&h>r?Math.abs(d+r-h):0),{top:p-=Math.min(p,p+n>c&&c>n?Math.abs(n+o-s):s),bottom:u.bottom,left:d,right:u.right,width:u.width,height:u.height}}function m(){}function f(t){t.stopPropagation()}function g(t,e){var i=Array.prototype.slice,s=i.call(arguments,2);return function(){return t.apply(e,s.concat(i.call(arguments)))}}function v(e,s,r,o){s=s||function(){},r=r||function(){},o=o||function(){};var a=document,l=!1,h={},c=0,u=0,d="ontouchstart"in window,p={};function m(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.returnValue=!1}function f(t){if(l){if(n&&a.documentMode<9&&!t.button)return v();var i=t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches[0],r=i&&i.pageX||t.pageX,o=i&&i.pageY||t.pageY,p=Math.max(0,Math.min(r-h.left,u)),f=Math.max(0,Math.min(o-h.top,c));d&&m(t),s.apply(e,[p,f,t])}}function g(s){i=!0,(s.which?3==s.which:2==s.button)||l||!1!==r.apply(e,arguments)&&(l=!0,c=t(e).height(),u=t(e).width(),h=t(e).offset(),t(a).on(p),t(a.body).addClass("sp-dragging"),f(s),m(s))}function v(){l&&(t(a).off(p),t(a.body).removeClass("sp-dragging"),setTimeout((function(){o.apply(e,arguments)}),0)),l=!1}p.selectstart=m,p.dragstart=m,p["touchmove mousemove"]=f,p["touchend mouseup"]=v,t(e).on("touchstart mousedown",g)}function b(t,e,i){var s;return function(){var r=this,n=arguments,o=function(){s=null,t.apply(r,n)};i&&clearTimeout(s),!i&&s||(s=setTimeout(o,e))}}function y(){return t.fn.spectrum.inputTypeColorSupport()}var C="spectrum.id";t.fn.spectrum=function(e,i){if("string"==typeof e){var s=this,n=Array.prototype.slice.call(arguments,1);return this.each((function(){var i=r[t(this).data(C)];if(i){var o=i[e];if(!o)throw new Error("Spectrum: no such method: '"+e+"'");"get"==e?s=i.get():"container"==e?s=i.container:"option"==e?s=i.option.apply(i,n):"destroy"==e?(i.destroy(),t(this).removeData(C)):"isOpen"==e?s=i.isOpen():o.apply(i,n)}})),s}return this.spectrum("destroy").each((function(){var i=d(this,t.extend({},t(this).data(),e));t(this).data(C,i.id)}))},t.fn.spectrum.load=!0,t.fn.spectrum.loadOpts={},t.fn.spectrum.draggable=v,t.fn.spectrum.defaults=s,t.fn.spectrum.inputTypeColorSupport=function e(){if(void 0===e._cachedResult){var i=t("<input type='color'/>")[0];e._cachedResult="color"===i.type&&""!==i.value}return e._cachedResult},t.spectrum={},t.spectrum.localization={},t.spectrum.palettes={},t.fn.spectrum.processNativeColorInputs=function(){var e=t("input[type=color]");e.length&&!y()&&e.spectrum({preferredFormat:"hex6"})},function(){var t=/^[\s,#]+/,e=/\s+$/,i=0,s=Math,r=s.round,n=s.min,o=s.max,a=s.random,l=function(t,e){if(e=e||{},(t=t||"")instanceof l)return t;if(!(this instanceof l))return new l(t,e);var s=h(t);this._originalInput=t,this._r=s.r,this._g=s.g,this._b=s.b,this._a=s.a,this._roundA=r(1e3*this._a)/1e3,this._format=e.format||s.format,this._gradientType=e.gradientType,this._r<1&&(this._r=r(this._r)),this._g<1&&(this._g=r(this._g)),this._b<1&&(this._b=r(this._b)),this._ok=s.ok,this._tc_id=i++};function h(t){var e={r:0,g:0,b:0},i=1,s=!1,r=!1;return"string"==typeof t&&(t=K(t)),"object"==typeof t&&(t.hasOwnProperty("r")&&t.hasOwnProperty("g")&&t.hasOwnProperty("b")?(e=c(t.r,t.g,t.b),s=!0,r="%"===String(t.r).substr(-1)?"prgb":"rgb"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("v")?(t.s=H(t.s),t.v=H(t.v),e=m(t.h,t.s,t.v),s=!0,r="hsv"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("l")&&(t.s=H(t.s),t.l=H(t.l),e=d(t.h,t.s,t.l),s=!0,r="hsl"),t.hasOwnProperty("a")&&(i=t.a)),i=L(i),{ok:s,format:t.format||r,r:n(255,o(e.r,0)),g:n(255,o(e.g,0)),b:n(255,o(e.b,0)),a:i}}function c(t,e,i){return{r:255*j(t,255),g:255*j(e,255),b:255*j(i,255)}}function u(t,e,i){t=j(t,255),e=j(e,255),i=j(i,255);var s,r,a=o(t,e,i),l=n(t,e,i),h=(a+l)/2;if(a==l)s=r=0;else{var c=a-l;switch(r=h>.5?c/(2-a-l):c/(a+l),a){case t:s=(e-i)/c+(e<i?6:0);break;case e:s=(i-t)/c+2;break;case i:s=(t-e)/c+4}s/=6}return{h:s,s:r,l:h}}function d(t,e,i){var s,r,n;function o(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}if(t=j(t,360),e=j(e,100),i=j(i,100),0===e)s=r=n=i;else{var a=i<.5?i*(1+e):i+e-i*e,l=2*i-a;s=o(l,a,t+1/3),r=o(l,a,t),n=o(l,a,t-1/3)}return{r:255*s,g:255*r,b:255*n}}function p(t,e,i){t=j(t,255),e=j(e,255),i=j(i,255);var s,r,a=o(t,e,i),l=n(t,e,i),h=a,c=a-l;if(r=0===a?0:c/a,a==l)s=0;else{switch(a){case t:s=(e-i)/c+(e<i?6:0);break;case e:s=(i-t)/c+2;break;case i:s=(t-e)/c+4}s/=6}return{h:s,s:r,v:h}}function m(t,e,i){t=6*j(t,360),e=j(e,100),i=j(i,100);var r=s.floor(t),n=t-r,o=i*(1-e),a=i*(1-n*e),l=i*(1-(1-n)*e),h=r%6;return{r:255*[i,a,o,o,l,i][h],g:255*[l,i,i,a,o,o][h],b:255*[o,o,l,i,i,a][h]}}function f(t,e,i,s){var n=[F(r(t).toString(16)),F(r(e).toString(16)),F(r(i).toString(16))];return s&&n[0].charAt(0)==n[0].charAt(1)&&n[1].charAt(0)==n[1].charAt(1)&&n[2].charAt(0)==n[2].charAt(1)?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0):n.join("")}function g(t,e,i,s){return[F(z(s)),F(r(t).toString(16)),F(r(e).toString(16)),F(r(i).toString(16))].join("")}function v(t,e){e=0===e?0:e||10;var i=l(t).toHsl();return i.s-=e/100,i.s=N(i.s),l(i)}function b(t,e){e=0===e?0:e||10;var i=l(t).toHsl();return i.s+=e/100,i.s=N(i.s),l(i)}function y(t){return l(t).desaturate(100)}function C(t,e){e=0===e?0:e||10;var i=l(t).toHsl();return i.l+=e/100,i.l=N(i.l),l(i)}function _(t,e){e=0===e?0:e||10;var i=l(t).toRgb();return i.r=o(0,n(255,i.r-r(-e/100*255))),i.g=o(0,n(255,i.g-r(-e/100*255))),i.b=o(0,n(255,i.b-r(-e/100*255))),l(i)}function E(t,e){e=0===e?0:e||10;var i=l(t).toHsl();return i.l-=e/100,i.l=N(i.l),l(i)}function w(t,e){var i=l(t).toHsl(),s=(r(i.h)+e)%360;return i.h=s<0?360+s:s,l(i)}function k(t){var e=l(t).toHsl();return e.h=(e.h+180)%360,l(e)}function T(t){var e=l(t).toHsl(),i=e.h;return[l(t),l({h:(i+120)%360,s:e.s,l:e.l}),l({h:(i+240)%360,s:e.s,l:e.l})]}function S(t){var e=l(t).toHsl(),i=e.h;return[l(t),l({h:(i+90)%360,s:e.s,l:e.l}),l({h:(i+180)%360,s:e.s,l:e.l}),l({h:(i+270)%360,s:e.s,l:e.l})]}function x(t){var e=l(t).toHsl(),i=e.h;return[l(t),l({h:(i+72)%360,s:e.s,l:e.l}),l({h:(i+216)%360,s:e.s,l:e.l})]}function D(t,e,i){e=e||6,i=i||30;var s=l(t).toHsl(),r=360/i,n=[l(t)];for(s.h=(s.h-(r*e>>1)+720)%360;--e;)s.h=(s.h+r)%360,n.push(l(s));return n}function O(t,e){e=e||6;for(var i=l(t).toHsv(),s=i.h,r=i.s,n=i.v,o=[],a=1/e;e--;)o.push(l({h:s,s:r,v:n})),n=(n+a)%1;return o}l.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},setAlpha:function(t){return this._a=L(t),this._roundA=r(1e3*this._a)/1e3,this},toHsv:function(){var t=p(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=p(this._r,this._g,this._b),e=r(360*t.h),i=r(100*t.s),s=r(100*t.v);return 1==this._a?"hsv("+e+", "+i+"%, "+s+"%)":"hsva("+e+", "+i+"%, "+s+"%, "+this._roundA+")"},toHsl:function(){var t=u(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=u(this._r,this._g,this._b),e=r(360*t.h),i=r(100*t.s),s=r(100*t.l);return 1==this._a?"hsl("+e+", "+i+"%, "+s+"%)":"hsla("+e+", "+i+"%, "+s+"%, "+this._roundA+")"},toHex:function(t){return f(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(){return g(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:r(this._r),g:r(this._g),b:r(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+r(this._r)+", "+r(this._g)+", "+r(this._b)+")":"rgba("+r(this._r)+", "+r(this._g)+", "+r(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:r(100*j(this._r,255))+"%",g:r(100*j(this._g,255))+"%",b:r(100*j(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+r(100*j(this._r,255))+"%, "+r(100*j(this._g,255))+"%, "+r(100*j(this._b,255))+"%)":"rgba("+r(100*j(this._r,255))+"%, "+r(100*j(this._g,255))+"%, "+r(100*j(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(P[f(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+g(this._r,this._g,this._b,this._a),i=e,s=this._gradientType?"GradientType = 1, ":"";t&&(i=l(t).toHex8String());return"progid:DXImageTransform.Microsoft.gradient("+s+"startColorstr="+e+",endColorstr="+i+")"},toString:function(t){var e=!!t;t=t||this._format;var i=!1,s=this._a<1&&this._a>=0;return e||!s||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"name"!==t?("rgb"===t&&(i=this.toRgbString()),"prgb"===t&&(i=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(i=this.toHexString()),"hex3"===t&&(i=this.toHexString(!0)),"hex8"===t&&(i=this.toHex8String()),"name"===t&&(i=this.toName()),"hsl"===t&&(i=this.toHslString()),"hsv"===t&&(i=this.toHsvString()),i||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},_applyModification:function(t,e){var i=t.apply(null,[this].concat([].slice.call(e)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(C,arguments)},brighten:function(){return this._applyModification(_,arguments)},darken:function(){return this._applyModification(E,arguments)},desaturate:function(){return this._applyModification(v,arguments)},saturate:function(){return this._applyModification(b,arguments)},greyscale:function(){return this._applyModification(y,arguments)},spin:function(){return this._applyModification(w,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(D,arguments)},complement:function(){return this._applyCombination(k,arguments)},monochromatic:function(){return this._applyCombination(O,arguments)},splitcomplement:function(){return this._applyCombination(x,arguments)},triad:function(){return this._applyCombination(T,arguments)},tetrad:function(){return this._applyCombination(S,arguments)}},l.fromRatio=function(t,e){if("object"==typeof t){var i={};for(var s in t)t.hasOwnProperty(s)&&(i[s]="a"===s?t[s]:H(t[s]));t=i}return l(t,e)},l.equals=function(t,e){return!(!t||!e)&&l(t).toRgbString()==l(e).toRgbString()},l.random=function(){return l.fromRatio({r:a(),g:a(),b:a()})},l.mix=function(t,e,i){i=0===i?0:i||50;var s,r=l(t).toRgb(),n=l(e).toRgb(),o=i/100,a=2*o-1,h=n.a-r.a,c=1-(s=((s=a*h==-1?a:(a+h)/(1+a*h))+1)/2),u={r:n.r*s+r.r*c,g:n.g*s+r.g*c,b:n.b*s+r.b*c,a:n.a*o+r.a*(1-o)};return l(u)},l.readability=function(t,e){var i=l(t),s=l(e),r=i.toRgb(),n=s.toRgb(),o=i.getBrightness(),a=s.getBrightness(),h=Math.max(r.r,n.r)-Math.min(r.r,n.r)+Math.max(r.g,n.g)-Math.min(r.g,n.g)+Math.max(r.b,n.b)-Math.min(r.b,n.b);return{brightness:Math.abs(o-a),color:h}},l.isReadable=function(t,e){var i=l.readability(t,e);return i.brightness>125&&i.color>500},l.mostReadable=function(t,e){for(var i=null,s=0,r=!1,n=0;n<e.length;n++){var o=l.readability(t,e[n]),a=o.brightness>125&&o.color>500,h=o.brightness/125*3+o.color/500;(a&&!r||a&&r&&h>s||!a&&!r&&h>s)&&(r=a,s=h,i=l(e[n]))}return i};var A=l.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},P=l.hexNames=I(A);function I(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[t[i]]=i);return e}function L(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function j(t,e){R(t)&&(t="100%");var i=M(t);return t=n(e,o(0,parseFloat(t))),i&&(t=parseInt(t*e,10)/100),s.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function N(t){return n(1,o(0,t))}function B(t){return parseInt(t,16)}function R(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)}function M(t){return"string"==typeof t&&-1!=t.indexOf("%")}function F(t){return 1==t.length?"0"+t:""+t}function H(t){return t<=1&&(t=100*t+"%"),t}function z(t){return Math.round(255*parseFloat(t)).toString(16)}function W(t){return B(t)/255}var $,U,V,q=(U="[\\s|\\(]+("+($="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+$+")[,|\\s]+("+$+")\\s*\\)?",V="[\\s|\\(]+("+$+")[,|\\s]+("+$+")[,|\\s]+("+$+")[,|\\s]+("+$+")\\s*\\)?",{rgb:new RegExp("rgb"+U),rgba:new RegExp("rgba"+V),hsl:new RegExp("hsl"+U),hsla:new RegExp("hsla"+V),hsv:new RegExp("hsv"+U),hsva:new RegExp("hsva"+V),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function K(i){i=i.replace(t,"").replace(e,"").toLowerCase();var s,r=!1;if(A[i])i=A[i],r=!0;else if("transparent"==i)return{r:0,g:0,b:0,a:0,format:"name"};return(s=q.rgb.exec(i))?{r:s[1],g:s[2],b:s[3]}:(s=q.rgba.exec(i))?{r:s[1],g:s[2],b:s[3],a:s[4]}:(s=q.hsl.exec(i))?{h:s[1],s:s[2],l:s[3]}:(s=q.hsla.exec(i))?{h:s[1],s:s[2],l:s[3],a:s[4]}:(s=q.hsv.exec(i))?{h:s[1],s:s[2],v:s[3]}:(s=q.hsva.exec(i))?{h:s[1],s:s[2],v:s[3],a:s[4]}:(s=q.hex8.exec(i))?{a:W(s[1]),r:B(s[2]),g:B(s[3]),b:B(s[4]),format:r?"name":"hex8"}:(s=q.hex6.exec(i))?{r:B(s[1]),g:B(s[2]),b:B(s[3]),format:r?"name":"hex"}:!!(s=q.hex3.exec(i))&&{r:B(s[1]+""+s[1]),g:B(s[2]+""+s[2]),b:B(s[3]+""+s[3]),format:r?"name":"hex"}}window.tinycolor=l}(),t((function(){t.fn.spectrum.load&&t.fn.spectrum.processNativeColorInputs()}))}(jQuery)}()},6618:function(){!function(t){function e(e,i){function s(e){a.logging&&("undefined"!=typeof console?console.log(e):t("body").append("<br /> * "+e))}function r(e){if(e.originalEvent&&void 0!==e.originalEvent.touches){if(s("Touchable Touchstart touches length "+e.originalEvent.touches.length),1!==e.originalEvent.touches.length&&2!==e.originalEvent.touches.length)return!1;if(a.isCurrentlyTouching)return!1;a.isCurrentlyTouching=!0,1==e.originalEvent.touches.length?(a.isOneFingerGesture=!0,a.startTouch.x=a.previousTouch.x=e.originalEvent.touches[0].clientX,a.startTouch.y=a.previousTouch.y=e.originalEvent.touches[0].clientY):2==e.originalEvent.touches.length&&(a.isOneFingerGesture=!1,e.originalEvent.touches[0].clientY>e.originalEvent.touches[1].clientY?(a.startTouch.x=a.previousTouch.x=e.originalEvent.touches[0].clientX,a.startTouch.y=a.previousTouch.y=e.originalEvent.touches[0].clientY):(a.startTouch.x=a.previousTouch.x=e.originalEvent.touches[1].clientX,a.startTouch.y=a.previousTouch.y=e.originalEvent.touches[1].clientY))}else s("Touchable Touchstart touches length "+e.pageX+" "+e.pageY),a.startTouch.x=a.previousTouch.x=e.pageX,a.startTouch.y=a.previousTouch.y=e.pageY,t(document).bind("mousemove",n),t(document).bind("mouseup",o);a.target=e.target,a.currentTarget=e.currentTarget;var i=a.startTouch.x,r=a.startTouch.y;a.hitTarget=document.elementFromPoint?document.elementFromPoint(i,r):"",a.inDoubleTap?(s("Touchable doubleTap"),a.$elem.trigger("doubleTap",a),clearTimeout(a.doubleTapTimer),a.inDoubleTap=!1):(a.inDoubleTap=!0,a.doubleTapTimer=setTimeout((function(){a.inDoubleTap=!1}),500)),a.longTapTimer=setTimeout((function(){s("Touchable longTap"),t(a.elem).trigger("longTap",a)}),1e3),s("Touchable Tap"),t(a.elem).trigger("tap",a),t(a.elem).trigger("touchablestart",a)}function n(e){if(e.originalEvent&&void 0!==e.originalEvent.touches){if(s("Touchable Touchsmove touches length "+e.originalEvent.touches.length),1!==e.originalEvent.touches.length&&2!==e.originalEvent.touches.length)return!1;1==e.originalEvent.touches.length||a.isOneFingerGesture?(a.currentTouch.x=e.originalEvent.touches[0].clientX,a.currentTouch.y=e.originalEvent.touches[0].clientY):2!=e.originalEvent.touches.length||a.isOneFingerGesture||(e.originalEvent.touches[0].clientY>e.originalEvent.touches[1].clientY?(a.currentTouch.x=e.originalEvent.touches[0].clientX,a.currentTouch.y=e.originalEvent.touches[0].clientY):(a.currentTouch.x=e.originalEvent.touches[1].clientX,a.currentTouch.y=e.originalEvent.touches[1].clientY))}else e.preventDefault(),a.currentTouch.x=e.pageX,a.currentTouch.y=e.pageY;t(a.elem).removeClass("webkitAnimate"),a.currentDelta.x=a.currentTouch.x-a.previousTouch.x,a.currentDelta.y=a.currentTouch.y-a.previousTouch.y,a.currentStartDelta.x=a.currentTouch.x-a.startTouch.x,a.currentStartDelta.y=a.currentTouch.y-a.startTouch.y,a.currentPosition.x=a.currentPosition.x+a.currentDelta.x,a.currentPosition.y=a.currentPosition.y+a.currentDelta.y,a.previousTouch.x=a.currentTouch.x,a.previousTouch.y=a.currentTouch.y,s("Touchable Touchablemove self e.target"+e.target+"e.currentTarget "+e.currentTarget+" x:"+a.currentStartDelta.x),a.target=e.target,a.currentTarget=e.currentTarget;var i=a.currentTouch.x,r=a.currentTouch.y;a.hitTarget=document.elementFromPoint?document.elementFromPoint(i,r):"",t(a.elem).trigger("touchablemove",a),a.longTapTimer&&clearTimeout(a.longTapTimer)}function o(e){if(e.originalEvent&&void 0!==e.originalEvent.touches){if(e.originalEvent.targetTouches.length>0)return!1}else t(document).unbind("mousemove",n),t(document).unbind("mouseup",o);a.isCurrentlyTouching=!1,a.longTapTimer&&clearTimeout(a.longTapTimer),s("Touchable Touchend self "+a.currentStartDelta.x),t(a.elem).trigger("touchableend",a),s("Touchable: touchableend"),s("Touchable: Hittarget click")}this.logging=!1,this.elem=e,this.$elem=t(e),this.is_doubleTap=!1,this.is_currentlyTouching=!1,this.isOneFingerGesture=!1,this.startTouch={x:0,y:0},this.currentTouch={x:0,y:0},this.previousTouch={x:0,y:0},this.currentDelta={x:0,y:0},this.currentStartDelta={x:0,y:0},this.currentPosition={x:0,y:0},this.doubleTapTimer=null,this.longTapTimer=null,this.touchStartSupported=!1;var a=this;void 0!==i&&(void 0!==i.logging&&(this.logging=i.logging),void 0!==i.preventClick&&(this.preventClick=i.preventClick)),this.$elem.bind("touchstart",(function(t){a.touchStartSupported=!0,r(t)})),this.$elem.bind("mousedown",(function(t){return a.touchStartSupported||r(t),!1})),this.$elem.bind("touchmove",n),this.$elem.bind("touchend",o),this.preventClick&&this.$elem.bind("click",(function(t){t.preventDefault()}))}t.fn.Touchable=function(i){return this.each((function(){return t(this).data.Touchable=new e(this,i)}))},t.fn.newHover=function(e,i,s){return this.each((function(){t(this).bind("newHoverIn",e).bind("newHoverOut",i)}))},t.fn.newHover2=function(e,i){return this.each((function(){t(this).bind("newHoverIn2",e).bind("newHoverOut2",i)}))},t.Touchable=e}(jQuery)},764:function(){
/*!
 * Picker.js v1.2.1
 * https://fengyuanchen.github.io/pickerjs
 *
 * Copyright 2016-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2019-02-18T13:08:12.801Z
 */
window.Picker=function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function s(t,e,s){return e&&i(t.prototype,e),s&&i(t,s),t}function r(t){return n(t)||o(t)||a()}function n(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}function o(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance")}var l={container:null,controls:!1,date:null,daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],format:"YYYY-MM-DD HH:mm",headers:!1,increment:1,inline:!1,language:"",momentum:2,months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],omnisDisableSystemFocus:!1,rows:5,text:{title:"Pick a date and time",cancel:"Cancel",confirm:"OK",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",second:"Second",millisecond:"Millisecond"},translate:function(t,e){return e},show:null,shown:null,hide:null,hidden:null,pick:null},h='<div class="picker" data-picker-action="hide" touch-action="none" tabindex="-1" role="dialog"><div class="picker-dialog"><div class="picker-header"><h4 class="picker-title">{{ title }}</h4><button type="button" class="picker-close" data-picker-action="hide" aria-label="Close">&times;</button></div><div class="picker-body"><div class="picker-grid"></div></div><div class="picker-footer"><button type="button" class="picker-cancel" data-picker-action="hide">{{ cancel }}</button><button type="button" class="picker-confirm" data-picker-action="pick">{{ confirm }}</button></div></div></div>',c="undefined"!=typeof window,u=c?window:{},d=!!c&&"ontouchstart"in u.document.documentElement,p=!!c&&"PointerEvent"in u,m="picker",f={},g="hide",v="next",b="pick",y="prev",C="".concat(m,"-open"),_="".concat(m,"-opened"),E="".concat(m,"-picked"),w="showFocus",k="".concat(m,"Action"),T="token",S="type",x="name",D="value",O="click",A="focus",P="blur",I="hidden",L="hide",j="keydown",N="pick",B=d?"touchstart":"mousedown",R=d?"touchmove":"mousemove",M=d?"touchend touchcancel":"mouseup",F=p?"pointerdown":B,H=p?"pointermove":R,z=p?"pointerup pointercancel":M,W="show",$="shown",U="wheel mousewheel DOMMouseScroll",V=Object.prototype,q=V.hasOwnProperty,K=V.toString;function G(t){return K.call(t).slice(8,-1).toLowerCase()}function Y(t){return"string"==typeof t}var X=Number.isFinite||u.isFinite,J=Number.isNaN||u.isNaN;function Q(t){return"number"==typeof t&&!J(t)}var Z=["year","month","day","weekday"];function tt(t){return Z.indexOf(t)>-1}function et(e){return"object"===t(e)&&null!==e}function it(t){if(!et(t))return!1;try{var e=t.constructor,i=e.prototype;return e&&i&&q.call(i,"isPrototypeOf")}catch(t){return!1}}function st(t){return"function"==typeof t}function rt(t){return"date"===G(t)}function nt(t){return rt(t)&&"Invalid Date"!==t.toString()}function ot(t,e){if(t&&st(e))if(Array.isArray(t)||Q(t.length)){var i,s=t.length;for(i=0;i<s&&!1!==e.call(t,t[i],i,t);i+=1);}else et(t)&&Object.keys(t).forEach((function(i){e.call(t,t[i],i,t)}));return t}function at(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];return et(t)&&i.length>0&&i.forEach((function(e){et(e)&&Object.keys(e).forEach((function(i){it(t[i])&&it(e[i])?t[i]=at({},t[i],e[i]):t[i]=e[i]}))})),t}function lt(t,e){if(e)if(Q(t.length))ot(t,(function(t){lt(t,e)}));else if(t.classList)t.classList.add(e);else{var i=t.className.trim();i?i.indexOf(e)<0&&(t.className="".concat(i," ").concat(e)):t.className=e}}function ht(t,e){e&&(Q(t.length)?ot(t,(function(t){ht(t,e)})):t.classList?t.classList.remove(e):t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,"")))}var ct=/([a-z\d])([A-Z])/g;function ut(t){return t.replace(ct,"$1-$2").toLowerCase()}function dt(t,e){return et(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(ut(e)))}function pt(t,e,i){et(i)?(i.getTime&&(t[e]=i.getTime()+""),t[e]=i):t.dataset?t.dataset[e]=i:t.setAttribute("data-".concat(ut(e)),i)}function mt(t,e){if(et(t[e]))try{delete t[e]}catch(i){t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch(i){t.dataset[e]=void 0}else t.removeAttribute("data-".concat(ut(e)))}var ft=/\s\s*/,gt=function(){var t=!1;if(c){var e=!1,i=function(){},s=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(t){e=t}});u.addEventListener("test",i,s),u.removeEventListener("test",i,s)}return t}();function vt(t,e,i){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=i;e.trim().split(ft).forEach((function(e){if(!gt){var n=t.listeners;n&&n[e]&&n[e][i]&&(r=n[e][i],delete n[e][i],0===Object.keys(n[e]).length&&delete n[e],0===Object.keys(n).length&&delete t.listeners)}t.removeEventListener(e,r,s)}))}function bt(t,e,i){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=i;e.trim().split(ft).forEach((function(e){if(s.once&&!gt){var n=t.listeners,o=void 0===n?{}:n;r=function(){delete o[e][i],t.removeEventListener(e,r,s);for(var n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];i.apply(t,a)},o[e]||(o[e]={}),o[e][i]&&t.removeEventListener(e,o[e][i],s),o[e][i]=r,t.listeners=o}t.addEventListener(e,r,s)}))}function yt(t,e,i){var s;return st(Event)&&st(CustomEvent)?s=new CustomEvent(e,{detail:i,bubbles:!0,cancelable:!0}):(s=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,i),t.dispatchEvent(s)}function Ct(t){return t%4==0&&t%100!=0||t%400==0}function _t(t,e){return[31,Ct(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]}function Et(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=String(Math.abs(t)),s=i.length,r="";for(t<0&&(r+="-");s<e;)s+=1,r+="0";return r+i}function wt(t){return{Y:"year",M:"month",D:"day",H:"hour",m:"minute",s:"second",S:"millisecond","!":"date",W:"weekday","(":"open",")":"close"}[t.charAt(0)]}var kt=/(Y|M|D|H|m|s|S|!|W|\(|\))\1*/g,Tt=/(Y|M|D|W)\1*/g;function St(t,e){e||(e=kt);var i=t.match(e);if(!i&&e===kt)throw new Error("Invalid format.");var s={start:i.indexOf("("),end:i.indexOf(")")};if(s.start>-1&&s.end>-1&&s.start<s.end){var r=St(i.splice(s.start,s.end-s.start+1,"!").join(""),Tt);if(r.weekday&&!r.day&&(delete r.weekday,r.tokens.splice(r.tokens.indexOf("W"),1)),1===r.tokens.length)i[i.indexOf("!")]=r.tokens[0];else if(r.tokens.length<1)i.splice(i.indexOf("!"),1);else var n=!0}if(i=i.filter((function(t,e){return i.indexOf(t)===e})),n){var o=i.indexOf("W");o>-1&&i.splice(o,1)}var a={tokens:i};return i.forEach((function(t){a[wt(t)]=t})),r&&(a.groupedDatePicker=r),a}var xt={bind:function(){var t=this.element,e=this.options,i=this.grid;st(e.show)&&bt(t,W,e.show),st(e.shown)&&bt(t,$,e.shown),st(e.hide)&&bt(t,L,e.hide),st(e.hidden)&&bt(t,I,e.hidden),st(e.pick)&&bt(t,N,e.pick),bt(t,A,this.onFocus=this.focus.bind(this),!0),bt(t,P,this.blur.bind(this),!0),bt(t,O,this.onFocus),bt(this.picker,O,this.onClick=this.click.bind(this)),bt(i,U,this.onWheel=this.wheel.bind(this)),bt(i,F,this.onPointerDown=this.pointerdown.bind(this)),bt(document,H,this.onPointerMove=this.pointermove.bind(this)),bt(document,z,this.onPointerUp=this.pointerup.bind(this)),bt(i,j,this.onKeyDown=this.keydown.bind(this))},unbind:function(){var t=this.element,e=this.options,i=this.grid;st(e.show)&&vt(t,W,e.show),st(e.shown)&&vt(t,$,e.shown),st(e.hide)&&vt(t,L,e.hide),st(e.hidden)&&vt(t,I,e.hidden),st(e.pick)&&vt(t,N,e.pick),vt(t,A,this.onFocus),vt(t,O,this.onFocus),vt(this.picker,O,this.onClick),vt(i,U,this.onWheel),vt(i,F,this.onPointerDown),vt(document,H,this.onPointerMove),vt(document,z,this.onPointerUp),vt(document,j,this.onKeyDown)}},Dt={focus:function(t){var e=t.target;if("ul"!==e.tagName.toLowerCase());else if(e.showFocus=!this.options.omnisDisableSystemFocus,e.showFocus){var i=e.querySelector("."+E);i&&lt(i,w)}},blur:function(t){var e=t.target;if(e&&"ul"===e.tagName.toLowerCase()){e.showFocus=!1;var i=e.querySelector("."+w);i&&ht(i,w)}},click:function(t){if(this.element.omnisObject.isEnabled()){var e=t.target,i=dt(e,k);switch(i){case g:this.hide();break;case b:this.pick();break;case y:case v:this[i](dt(e.parentElement,S))}}},wheel:function(t){var e=t.target;if(e!==this.grid&&this.element.omnisObject.isEnabled()){t.preventDefault();var i=Math.abs(t.deltaY);this.totalDeltaY=this.totalDeltaY?this.totalDeltaY+i:i;var s=Date.now();this.lastScrollTime||(this.lastScrollTime=s);var r=s-this.lastScrollTime;if(!(r>0&&(i<2||r<50&&i<6||r<100&&i<50&&this.totalDeltaY<50))){for(this.lastScrollTime=s,this.totalDeltaY=0;e.parentElement&&e.parentElement!==this.grid;)e=e.parentElement;var n=dt(e,S);t.deltaY<0?this.prev(n):this.next(n)}}},pointerdown:function(t){if(!(t.button&&t.button>0)&&this.element.omnisObject.isEnabled()){this.isInMomentum&&(this.stopMomentum=!0),this.pointerClicked=!0,this.currentSpeed=0,this.dragSpeed=[];var e=t.target;if(e!==this.grid&&!dt(e,k)){for(t.preventDefault();e.parentElement&&e.parentElement!==this.grid;)e=e.parentElement;this.cell&&(this.prevCell=this.cell);var i=e.querySelector(".".concat(m,"-list")),s=i.firstElementChild.offsetHeight;this.cell={elem:e,list:i,moveY:0,maxMoveY:s,minMoveY:s/2,startY:t.changedTouches?t.changedTouches[0].pageY:t.pageY,type:dt(e,S)},this.pointerHasBeenDown=!0}}},pointermove:function(t){if(this.cell&&this.pointerClicked&&this.element.omnisObject.isEnabled()){t.preventDefault();var e=t.changedTouches?t.changedTouches[0].pageY:t.pageY;this.dragMovement(e)}},dragMovement:function(t){var e=this.cell;if(e&&this.element.omnisObject.isEnabled()){var i=e.moveY+(t-e.startY);e.startY=t,e.moveY=i;var s=(new Date).getTime();if(this.dragSpeed.push({time:s,yPos:t}),this.dragSpeed.length>3&&this.dragSpeed.shift(),Math.abs(i)<e.maxMoveY)return e.list.style.top="".concat(i,"px"),void(this.currentSpeed=0);e.list.style.top=0,e.moveY=0,i>=e.maxMoveY?this.prev(e.type):i<=-e.maxMoveY&&this.next(e.type)}},momentumScroll:function(t){if(this.options.momentum){var e=this,i=((new Date).getTime()-this.momentumTime.startTime)/1e3,s=.4;if(Math.abs(this.currentSpeed)>s&&i<this.momentumTime.duration&&!e.stopMomentum)e.cell.snapped=!1,setTimeout((function(){e.isInMomentum=!0;var s=t+e.currentSpeed;e.dragMovement(s),e.currentSpeed=e.momentumEase(i,e.initialSpeed,-e.initialSpeed,e.momentumTime.duration),e.momentumScroll(s)}),0);else{e.isInMomentum=!1,e.stopMomentum=!1;var r=this.prevCell?this.prevCell:this.cell;this.prevCell&&!this.prevCell.snapped?r=this.prevCell:this.cell&&!this.cell.snapped&&(r=this.cell),r&&!r.snapped&&(r.list.style.top=0,r.moveY>=r.minMoveY?this.prev(r.type):r.moveY<=-r.minMoveY&&this.next(r.type),r.snapped=!0),this.prevCell=null}}},momentumEase:function(t,e,i,s){return-i*(t/=s)*(t-2)+e},pointerup:function(t){var e=this.cell;function i(t){return t.length>1?(t[t.length-1].yPos-t[0].yPos)/(t[t.length-1].time-t[0].time):0}e&&this.pointerHasBeenDown&&this.element.omnisObject.isEnabled()&&(this.pointerHasBeenDown=!1,this.pointerClicked=!1,t.preventDefault(),e.list.style.top=0,e.moveY>=e.minMoveY?this.prev(e.type):e.moveY<=-e.minMoveY&&this.next(e.type),this.initialSpeed=this.currentSpeed=i(this.dragSpeed),this.momentumTime={startTime:(new Date).getTime(),duration:this.options.momentum},Math.abs(this.currentSpeed)<=1?(this.cell&&(this.cell.list.style.top=0,this.cell.moveY>=this.cell.minMoveY?this.prev(this.cell.type):this.cell.moveY<=-this.cell.minMoveY&&this.next(this.cell.type)),this.cell=null):this.momentumScroll(e.startY+e.moveY))},keydown:function(t){if(this.element.omnisObject.isEnabled()){for(var e=OmnisKeyboardHandler.getNormalizedEventKey(t),i=t.target;i.parentElement&&i.parentElement!==this.grid;)i=i.parentElement;var s=dt(i,S);switch(e){case"ArrowUp":case"ArrowLeft":this.prev(s),t.preventDefault();break;case"ArrowDown":case"ArrowRight":this.next(s),t.preventDefault()}}}},Ot={render:function(t){var e=this;if(t){var i=this.options,s=this.data[t],r=this.current(t),n=st(s.max)?s.max():s.max,o=st(s.min)?s.min():s.min,a=0;X(n)&&(a=o>0?n:n+1),s.list.innerHTML="",s.current=r,this.container.omnisObject.isActive()?s.list.setAttribute("tabindex","0"):s.list.removeAttribute("tabindex"),s.list.setAttribute("role","spinbutton"),s.list.setAttribute("aria-valuemin",o),s.list.setAttribute("aria-valuemax",n),s.list.setAttribute("aria-labelledby",this.element.id+"_header-"+t);for(var l=0;l<i.rows+2;l+=1){var h=document.createElement("li"),c=l-s.index;if("date"!==t){var u=r+c*s.increment;a&&(u%=a)<o&&(u+=a),h.textContent=i.translate(t,s.aliases?s.aliases[u]:Et(u+s.offset,s.digit))}else{var d=new Date(r);d.setDate(d.getDate()+c*s.increment),this.format.groupedDatePicker.order=[],this.format.groupedDatePicker.tokens.forEach((function(t){var i=wt(t);tt(i)&&e.format.groupedDatePicker.order.push(i)})),h.textContent=this.getDateTextContent(d),u=d.getTime()}pt(h,x,t),pt(h,D,u),lt(h,"".concat(m,"-item")),h.setAttribute("role","presentation"),0===c&&(lt(h,E),s.item=h,s.list.setAttribute("aria-valuenow",u),"month"===t&&s.list.setAttribute("aria-valuetext",i.months[u])),s.list.appendChild(h)}}else this.format&&this.format.tokens.forEach((function(t){return e.render(wt(t))}))},current:function(t,e){var i=this.date,s=this.format,r=s[t];switch(r.charAt(0)){case"Y":return Q(e)&&(i.setFullYear(2===r.length?2e3+e:e),s.month&&this.render(wt(s.month)),s.day&&this.render(wt(s.day)),this.groupedDatePickerRendered&&this.render(wt(s.date))),i.getFullYear();case"M":return Q(e)&&(i.setMonth(e,Math.min(i.getDate(),_t(i.getFullYear(),e))),s.day&&this.render(wt(s.day))),this.groupedDatePickerRendered&&this.render(wt(s.date)),i.getMonth();case"D":return Q(e)&&i.setDate(e),this.groupedDatePickerRendered&&this.render(wt(s.date)),i.getDate();case"H":return Q(e)&&i.setHours(e),this.groupedDatePickerRendered&&this.render(wt(s.date)),i.getHours();case"m":return Q(e)&&i.setMinutes(e),this.groupedDatePickerRendered&&this.render(wt(s.date)),i.getMinutes();case"s":return Q(e)&&i.setSeconds(e),this.groupedDatePickerRendered&&this.render(wt(s.date)),i.getSeconds();case"S":return Q(e)&&i.setMilliseconds(e),this.groupedDatePickerRendered&&this.render(wt(s.date)),i.getMilliseconds();case"!":return Q(e)&&i.setTime(e),i.getTime()}return i},getValue:function(){var t=this.element;if(this.isInput)return t.value;var e=t.getAttribute("data-value");return+e?new Date(+e):e},setValue:function(t){var e=this.element;this.isInput?e.value=t:this.options.container&&e.setAttribute("data-value",t)},open:function(){var t=this.body;t.style.overflow="hidden",t.style.paddingRight="".concat(this.scrollBarWidth+(parseFloat(this.initialBodyPaddingRight)||0),"px")},close:function(){var t=this.body;t.style.overflow="",t.style.paddingRight=this.initialBodyPaddingRight}},At={show:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.element,i=this.picker;if(this.inline||this.shown)return this;if(!1===yt(e,W))return this;this.shown=!0,this.open(),lt(i,C);var s=function(){yt(e,$)};return t||i.offsetWidth,lt(i,_),t?s():setTimeout(s,300),this},hide:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.element,s=this.picker;if(this.inline||!this.shown)return this;if(!1===yt(i,L))return this;this.shown=!1,ht(s,_);var r=function(){t.close(),ht(s,C),yt(i,I)};return e?r():setTimeout(r,300),this},prev:function(t){var e=this.options,i=this.format[t],s=this.data[t],r=s.list,n=r.lastElementChild,o=st(s.max)?s.max():s.max,a=st(s.min)?s.min():s.min,l=s.item.previousElementSibling,h=Number(dt(r.firstElementChild,D));if("date"!==t)h-=s.increment;else{var c=new Date(h);c.setDate(c.getDate()-s.increment),h=c.getTime()}return h<a&&(h+=o-a+1),n.textContent="date"!==t?e.translate(t,s.aliases?s.aliases[h]:Et(h+s.offset,i.length)):this.getDateTextContent(c),pt(n,D,h),n.setAttribute("role","presentation"),l&&(ht(s.item,E),lt(l,E),r.showFocus&&(ht(s.item,w),lt(l,w)),s.item=l),r.insertBefore(n,r.firstElementChild),s.current=Number(dt(s.item,D)),r.setAttribute("aria-valuenow",s.current),"month"===t&&s.list.setAttribute("aria-valuetext",e.months[s.current]),this.current(t,s.current),this.inline&&e.container&&this.pick(),this},next:function(t){var e=this.options,i=this.format[t],s=this.data[t],r=s.list,n=r.firstElementChild,o=st(s.max)?s.max():s.max,a=st(s.min)?s.min():s.min,l=s.item.nextElementSibling,h=Number(dt(r.lastElementChild,D));if("date"!==t)h+=s.increment;else{var c=new Date(h);c.setDate(c.getDate()+s.increment),h=c.getTime()}return h>o&&(h-=o-a+1),n.textContent="date"!==t?e.translate(t,s.aliases?s.aliases[h]:Et(h+s.offset,i.length)):this.getDateTextContent(c),pt(n,D,h),r.appendChild(n),n.setAttribute("role","presentation"),l&&(ht(s.item,E),lt(l,E),r.showFocus&&(ht(s.item,w),lt(l,w)),s.item=l),s.current=Number(dt(s.item,D)),r.setAttribute("aria-valuenow",s.current),"month"===t&&s.list.setAttribute("aria-valuetext",e.months[s.current]),this.current(t,s.current),this.inline&&e.container&&this.pick(),this},pick:function(){var t=this.element,e=this.date.getTime();return this.setValue(e),!1===yt(t,N)||(this.isInput&&!1===yt(t,"change")&&this.reset(),this.hide()),this},getDate:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.date;return t?this.formatDate(e):new Date(e)},setDate:function(t){return t&&(this.date=this.parseDate(t),this.render(),this.setValue(this.date.getTime())),this},getDateTextContent:function(t){var e={day:t.getDate(),weekday:this.data.date.aliases.day[t.getDay()],month:this.data.date.aliases.month[t.getMonth()],year:t.getFullYear()},i="";return this.format.groupedDatePicker.order.forEach((function(t){i+=e[t]+" "})),i.substr(0,i.length-1)},update:function(){return this.date=this.parseDate(this.getValue()),this.render(),this},reset:function(){return this.setValue(this.initialValue),this.date=new Date(this.initialDate),this.render(),this},parseDate:function(t){var e=this.options,i=this.format,s=[];if(rt(t))return new Date(t);if(Y(t)){var n=[].concat(r(e.months),r(e.monthsShort),["\\d+"]);if((s=t.match(new RegExp("(".concat(n.join("|"),")"),"g")))&&t.length===e.format.length&&s.length!==i.tokens.length&&(s=i.tokens.map((function(i){return t.substr(e.format.indexOf(i),i.length)}))),!s||s.length!==i.tokens.length)return new Date}var o=new Date;return s.forEach((function(s,r){var n=i.tokens[r],a=Number(s);switch(n){case"YYYY":case"YYY":case"Y":var l=t.indexOf(s),h="-"===t.substr(l-1,1),c=l>1&&h&&/\S/.test(t.substr(l-2,1))||1===l&&h;o.setFullYear(c?-a:a);break;case"YY":o.setFullYear(2e3+a);break;case"MMMM":o.setMonth(e.months.indexOf(s));break;case"MMM":o.setMonth(e.monthsShort.indexOf(s));break;case"MM":case"M":o.setMonth(a-1);break;case"DD":case"D":o.setDate(a);break;case"HH":case"H":o.setHours(a);break;case"mm":case"m":o.setMinutes(a);break;case"ss":case"s":o.setSeconds(a);break;case"SSS":case"SS":case"S":o.setMilliseconds(a)}})),o},formatDate:function(t){var e=this.options,i=this.format,s="";if(nt(t)){var r=t.getFullYear(),n=t.getMonth(),o=t.getDate(),a=t.getHours(),l=t.getMinutes(),h=t.getSeconds(),c=t.getMilliseconds();s=e.format,i.tokens.forEach((function(t){var i="";switch(t){case"YYYY":case"YYY":case"Y":i=Et(r,t.length);break;case"YY":i=Et(r%100,2);break;case"MMMM":i=e.months[n];break;case"MMM":i=e.monthsShort[n];break;case"MM":case"M":i=Et(n+1,t.length);break;case"DD":case"D":i=Et(o,t.length);break;case"HH":case"H":i=Et(a,t.length);break;case"mm":case"m":i=Et(l,t.length);break;case"ss":case"s":i=Et(h,t.length);break;case"SSS":case"SS":case"S":i=Et(c,t.length)}s=s.replace(t,i)}))}return s},destroy:function(){var t=this.element,e=this.picker;return dt(t,m)?(this.hide(!0),this.unbind(),mt(t,m),e.parentNode.removeChild(e),this):this}},Pt=/\{\{\s*(\w+)\s*\}\}/g,It=/input|textarea/i,Lt=u.Picker,jt=function(){function t(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e(this,t),!i||1!==i.nodeType)throw new Error("The first argument is required and must be an element.");this.element=i,this.options=at({},l,f[s.language],it(s)&&s),this.shown=!1,this.init()}return s(t,[{key:"init",value:function(){var t=this,e=this.element;if(!dt(e,m)){pt(e,m,this);var i=this.options,s=It.test(e.tagName),r=i.inline&&(i.container||!s),n=document.createElement("div");n.insertAdjacentHTML("afterbegin",h.replace(Pt,(function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return i.text[e[1]]})));var o=n.getElementsByClassName(m)[0],a=o.getElementsByClassName("".concat(m,"-grid"))[0],l=i.container;if(Y(l)&&(l=document.querySelector(l)),r)lt(o,C),lt(o,_),l||(l=e);else{var c=e.ownerDocument,d=c.body||c.documentElement;this.body=d,this.scrollBarWidth=u.innerWidth-c.documentElement.clientWidth,this.initialBodyPaddingRight=u.getComputedStyle(d).paddingRight,lt(o,"".concat(m,"-fixed")),l||(l=document.body)}this.isInput=s,this.inline=r,this.container=l,this.picker=o,this.grid=a,this.cell=null,this.format=St(i.format);var p=this.getValue(),f=this.parseDate(i.date||p);this.date=f,this.initialDate=new Date(f),this.initialValue=p,this.data={};var g=Number(i.rows);g%2||(g+=1),i.rows=g||5,lt(a,"".concat(m,"-").concat(i.rows>1?"multiple":"single")),i.controls&&lt(a,"".concat(m,"-controls"));var b=i.headers,E=i.increment;if(b){lt(a,"".concat(m,"-headers"));var w=jGetOmnisLocalizedValue(this.element.omnisObject.form.inst,"date_units",null,["Day","Month","Year"]),x=jGetOmnisLocalizedValue(this.element.omnisObject.form.inst,"time_units",null,["Hour","Minute","Second","Millisecond"]);(b=i.text).cancel=jOmnis.cancelString,b.confirm=jOmnis.okString,w&&(b.year=w[2],b.month=w[1],b.day=w[0]),x&&(b.hour=x[0],b.minute=x[1],b.second=x[2],b.millisecond=x[3])}it(E)||(E={year:E,month:E,day:E,hour:E,minute:E,second:E,millisecond:E}),this.format.tokens.forEach((function(e,s){var r=wt(e),n=document.createElement("div"),o=document.createElement("div"),l=document.createElement("ul"),h={digit:e.length,increment:Math.abs(Number(E[r]))||1,list:l,max:1/0,min:-1/0,index:Math.floor((i.rows+2)/2),offset:0};switch(e.charAt(0)){case"Y":2===h.digit&&(h.max=99,h.min=0);break;case"M":h.max=11,h.min=0,h.offset=1,3===h.digit?h.aliases=jGetOmnisLocalizedValue(t.element.omnisObject.form.inst,"month_names_short",null,i.monthsShort):4===h.digit&&(h.aliases=jGetOmnisLocalizedValue(t.element.omnisObject.form.inst,"month_names",null,i.months));break;case"D":h.max=function(){return _t(t.date.getFullYear(),t.date.getMonth())},h.min=1;break;case"H":h.max=23,h.min=0;break;case"m":case"s":h.max=59,h.min=0;break;case"S":h.max=999,h.min=0;break;case"!":h.aliases={day:jGetOmnisLocalizedValue(t.element.omnisObject.form.inst,"day_names_short",null,i.daysShort),month:jGetOmnisLocalizedValue(t.element.omnisObject.form.inst,"month_names_short",null,i.monthsShort)};var c=parseInt(t.element.style.width),u=Math.max(t.format.groupedDatePicker.tokens.length-1,1);c=u/(t.format.tokens.length-1+u)*100+"%",t.groupedDatePickerRendered=!0}if(pt(n,S,r),pt(n,T,e),b){var d=document.createElement("div");lt(d,"".concat(m,"-cell__header")),d.id=t.element.id+"_header-"+r,d.textContent=b[r]||r[0].toUpperCase()+r.substr(1),n.appendChild(d)}if(i.controls){var p=document.createElement("div");lt(p,"".concat(m,"-cell__control")),lt(p,"".concat(m,"-cell__control--prev")),pt(p,k,y),n.appendChild(p)}if(lt(l,"".concat(m,"-list")),lt(o,"".concat(m,"-cell__body")),0===s&&lt(o,"firstcellbody"),lt(n,"".concat(m,"-cell")),lt(n,"".concat(m,"-").concat(r,"s")),o.appendChild(l),n.appendChild(o),i.controls){var f=document.createElement("div");lt(f,"".concat(m,"-cell__control")),lt(f,"".concat(m,"-cell__control--next")),pt(f,k,v),n.appendChild(f)}c&&(n.style.width=c),a.appendChild(n),t.data[r]=h,t.render(r)})),r&&(l.innerHTML=""),l.appendChild(o),this.bind()}}}],[{key:"noConflict",value:function(){return u.Picker=Lt,t}},{key:"setDefaults",value:function(t){at(l,f[t.language],it(t)&&t)}}]),t}();return at(jt.prototype,xt,Dt,Ot,At),jt.languages=f,jt}()},6775:function(){void 0===window.tail&&(window.tail={}),window.tail.DateTime=function(t){"use strict";var e=t,i=t.document;function s(t,e){return new RegExp("\\b"+e+"\\b").test(t.className||"")}function r(t,e){return new RegExp("\\b"+e+"\\b").test(t.className||e)||(t.className+=" "+e),t}function n(t,e,i){return(i=new RegExp("\\b("+e+")\\b"))&&i.test(t.className||"")&&(t.className=t.className.replace(i,"")),t}function o(t,e,s){if(CustomEvent&&CustomEvent.name)var r=new CustomEvent(e,s);else(r=i.createEvent("CustomEvent")).initCustomEvent(e,!!s.bubbles,!!s.cancelable,s.detail);return t.dispatchEvent(r)}function a(t,e){if(Object.assign)return Object.assign({},t,e||{});var i=Object.constructor();for(var s in t)i[s]=s in e?e[s]:t[s];return i}function l(t){return t.charAt(0).toUpperCase()+t.slice(1)}function h(t,e,i){var s=t instanceof Date?t:!!t&&new Date(t);return s instanceof Date&&!isNaN(s.getDate())&&(i&&s.setHours(0,0,0,0),!0===e?s.getTime():s)}var c=function(t,e){if((t="string"==typeof t?i.querySelectorAll(t):t)instanceof NodeList||t instanceof HTMLCollection||t instanceof Array){for(var s=[],r=t.length,n=0;n<r;n++)s.push(new c(t[n],e));return 1===s.length?s[0]:0!==s.length&&s}if(!(t instanceof Element))return!1;if(!(this instanceof c))return new c(t,e);if(c.inst[t.getAttribute("data-tail-datetime")])return c.inst[t.getAttribute("data-tail-datetime")];if(t.getAttribute("data-datetime")){var o=JSON.parse(t.getAttribute("data-datetime").replace(/\'/g,'"'));o instanceof Object&&(e=a(e,o))}return this.e=t,this.id=++c.count,this.con=a(c.defaults,e),c.inst["tail-"+this.id]=this,this.init()};return c.version="0.4.6",c.status="beta",c.count=0,c.inst={},c.defaults={animate:!0,classNames:!1,closeButton:!0,dateFormat:"YYYY-mm-dd",dateStart:!1,dateRanges:[],dateBlacklist:!0,dateEnd:!1,locale:"en",position:"bottom",rtl:"auto",startOpen:!1,stayOpen:!1,timeFormat:"HH:ii:ss",timeHours:null,timeMinutes:null,timeSeconds:0,timeIncrement:!0,timeStepHours:1,timeStepMinutes:5,timeStepSeconds:5,today:!0,tooltips:[],viewDefault:"days",viewDecades:!0,viewYears:!0,viewMonths:!0,viewDays:!0,weekStart:0,dateSelection:{rangeMode:!1,start:null,end:null}},c.strings=function(){for(var t=jOmnis.deepCopy(jGetOmnisLocalizedValue(this.e.omnisObject.form.inst,"day_names_short",null,c.defaultStrings.shorts)),e=0;e<t.length;e++)t[e]=t[e].toUpperCase();return{months:jGetOmnisLocalizedValue(this.e.omnisObject.form.inst,"month_names",null,c.defaultStrings.months),days:jGetOmnisLocalizedValue(this.e.omnisObject.form.inst,"day_names",null,c.defaultStrings.days),shorts:t,time:jGetOmnisLocalizedValue(this.e.omnisObject.form.inst,"time_units",null,c.defaultStrings.time),header:jGetOmnisLocalizedValue(this.e.omnisObject.form.inst,"ctrl_date_header",null,c.defaultStrings.header)}},c.defaultStrings={months:["January","February","March","April","May","June","July","August","September","October","November","December"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shorts:["SUN","MON","TUE","WED","THU","FRI","SAT"],time:["Hours","Minutes","Seconds"],header:["Select a Month","Select a Year","Select a Decade","Select a Time"]},c.DATESELECTION={FIRST_SELECT:0,SECOND_SELECT:1},c.CLASSNAMES={OPENRIGHT:"date-open-right",OPENLEFT:"date-open-left",RANGE:"date-range",SELECT:"date-select"},c.prototype={init:function(){var t,e=this;if(this.__=c.strings.call(e),this.con.dateStart=h(this.con.dateStart,!0,!0)||0,this.con.dateEnd=h(this.con.dateEnd,!0,!0)||9999999999999,this.con.viewDefault=this.con.dateFormat?this.con.viewDefault:"time","string"==typeof this.con.weekStart&&(this.con.weekStart=c.defaultStrings.shorts.indexOf(this.con.weekStart)),this.con.weekStart<0&&this.con.weekStart>6&&(this.con.weekStart=0),this.con.dateRanges.length>0){for(var r=[],n=(p=this.con.dateRanges).length,o=0;o<n;o++)p[o]instanceof Object&&(p[o].start||p[o].days)&&(!1===(p[o].start=h(p[o].start||!1,!0,!0))?p[o].start=p[o].end=1/0:(!1===(p[o].end=h(p[o].end||!1,!0,!0))&&(p[o].end=p[o].start),p[o].start=p[o].start>p[o].end?[p[o].end,p[o].end=p[o].start][0]:p[o].start),p[o].days=!("days"in p[o])||p[o].days,p[o].days="boolean"!=typeof p[o].days?function(t){for(var e=[],i=t.length,s=0;s<i;s++)"string"==typeof t[s]&&(t[s]=c.defaultStrings.shorts.indexOf(t[s])),t[s]>=0&&t[s]<=6&&e.push(t[s]);return e}(p[o].days instanceof Array?p[o].days:[p[o].days]):[0,1,2,3,4,5,6],r.push({start:p[o].start,end:p[o].end,days:p[o].days}));this.con.dateRanges=r}if(this.con.dateSelection.rangeMode&&(this.con.dateSelection.nextSelect=c.DATESELECTION.FIRST_SELECT),this.con.tooltips.length>0){r=[];var a,l=this.con.tooltips;for(n=l.length,o=0;o<n;o++)l[o]instanceof Object&&l[o].date&&(l[o].date instanceof Array?(a=h(l[o].date[0]||!1,!0,!0),p=h(l[o].date[0]||!1,!0,!0)||a):a=p=h(l[o].date||!1,!0,!0),a&&r.push({date:a!==p?[a,p]:a,text:l[o].text||"Tooltip",color:l[o].color||"inherit",element:l[o].element||(t=i.createElement("DIV"),t.className="calendar-tooltip",t.innerHTML='<div class="tooltip-inner">'+l[o].text||0,t)}));this.con.tooltips=r}var u=this.__.shorts.slice(this.con.weekStart).concat(this.__.shorts.slice(0,this.con.weekStart));for(this.weekdays="<thead>\n<tr>\n",o=0;o<7;o++)this.weekdays+='<th class="calendar-week">'+u[o]+"</th>";this.weekdays+="\n</tr>\n</thead>";var d=+this.e.getAttribute("data-value")||+this.e.value;for(this.select=!!d&&new Date(d),(!this.select||this.select<this.con.dateStart||this.select>this.con.dateEnd)&&(this.select=null),null==this.view&&(this.view={type:this.con.viewDefault,date:this.select||new Date}),n=["Hours","Minutes","Seconds"],o=0;o<3;o++)"number"==typeof this.con["time"+n[o]]&&this.view.date["set"+n[o]](this.con["time"+n[o]]);if(this.events={},this.dt=this.renderCalendar(),null==this._bind){var p="addEventListener";this.e[p]("focusin",(function(t){e.open.call(e)})),this.e[p]("keyup",(function(t){e.bind.call(e,t)})),i[p]("keyup",(function(t){e.dt.contains(t.target)&&e.bind.call(e,t)})),this.e[p]("keydown",(function(t){e.bind.call(e,t)})),i[p]("click",(function(t){e.dt.contains(t.target)?e.bind.call(e,t):!e.e.contains(t.target)&&s(e.dt,"calendar-open")&&(t.target==e.dt||t.target==e.e||e.con.stayOpen||e.close.call(e))})),i[p]("mouseover",(function(t){e.dt.contains(t.target)&&e.bind.call(e,t)})),this._bind=!0}return this.e.setAttribute("data-tail-datetime","tail-"+this.id),this.con.startOpen&&this.open(),this.con.dateSelection.rangeMode?[this.con.dateSelection.start,this.con.dateSelection.end].forEach((function(t,i,s){var r=s.length>1&&0===i;t&&e.selectDate(t,null,null,null,null,null,r)})):this.select&&this.selectDate(this.select,null,null,null,null,null,!0),this},bind:function(t){var e,i=t.target,s="getAttribute",r="data-action",n="data-view",o=i[s](r)?i:i.parentNode[s](r)?i.parentNode:i,a="data-tooltip";if("mouseover"==t.type&&(!1!==(e=i[s](a)?i:!!o[s](a)&&o)?this.dt.querySelector("#tooltip-"+e[s](a)+"-"+e[s](a+"-time"))||this.showTooltip(e[s](a),e,e[s](a+"-time")):this.dt.querySelector(".calendar-tooltip:not(.remove)")&&this.hideTooltip(this.dt.querySelector(".calendar-tooltip").id.slice(8)),this.updateDateRangeSelection(i)),"click"==t.type){if(!o||1!=t.buttons&&1!=(t.which||t.button))return;if(o.hasAttribute("data-disabled")||!this.e.omnisObject.isEnabled())return;switch(o[s](r)){case"prev":case"next":return this.browseView(o[s](r));case"submit":return this.selectDate(this.fetchDate(parseInt(o[s]("data-date"))));case"cancel":this.con.stayOpen||this.close();break;case"view":return this.switchDate(o[s]("data-year")||null,o[s]("data-month")||null,o[s]("data-day")||null),this.switchView(o[s](n))}}if("keydown"===t.type){var l=OmnisKeyboardHandler.getNormalizedEventKey(t);-1!==["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].indexOf(l)&&t.preventDefault()}if("keyup"===t.type){if(!this.e.omnisObject.isEnabled())return;l=OmnisKeyboardHandler.getNormalizedEventKey(t);var h=t.target,c=this.view.type;switch(c){case"days":var u=7;break;case"months":u=3;break;case"years":u=4}switch(l){case" ":case"Enter":switch(t.preventDefault(),jOmnis.stopEventNow(t),h[s](r)){case"prev":case"next":return this.browseView(h[s](r));case"submit":return this.selectDate(this.fetchDate(parseInt(h[s]("data-date")))),void((p=this.dt.querySelector(".calendar-datepicker [tabindex='0']"))&&p.focus());case"cancel":this.con.stayOpen||this.close();break;case"view":return this.switchDate(h[s]("data-year")||null,h[s]("data-month")||null,h[s]("data-day")||null),this.switchView(h[s](n)),void(jOmnis.hasClass(h.parentElement,"calendar-actions")?((p=document.activeElement).blur(),p.focus()):(p=this.dt.querySelector(".calendar-datepicker [tabindex='0']"))&&p.focus());default:return}case"ArrowUp":var d=-u;break;case"ArrowDown":d=u;break;case"ArrowLeft":d=-1;break;case"ArrowRight":d=1}if(d&&"td"===document.activeElement.tagName.toLowerCase()){var p,m=new Date(this.focusedDate.getTime());switch(c){case"days":if(this.focusedDate.setDate(this.focusedDate.getDate()+d),m.getMonth()!==this.focusedDate.getMonth()){var f=!0;this.focusedMonth=this.focusedDate.getMonth(),this.focusedYear=this.focusedDate.getYear()}break;case"months":this.focusedDate.setMonth(this.focusedDate.getMonth()+d),this.focusedMonth=this.focusedDate.getMonth(),this.focusedYear=this.focusedDate.getYear(),m.getYear()!==this.focusedDate.getYear()&&(f=!0);break;case"years":this.focusedDate.setFullYear(this.focusedDate.getFullYear()+d),this.focusedMonth=this.focusedDate.getMonth(),this.focusedYear=this.focusedDate.getYear();var g=this.dt.querySelectorAll(".calendar-year[data-year]"),v=+g[0].getAttribute("data-year"),b=+g[g.length-1].getAttribute("data-year"),y=this.focusedDate.getFullYear();(y<v||y>b)&&(f=!0)}f&&this.browseView(d<0?"prev":"next"),this.renderDatePicker(this.dt,c),(p=this.dt.querySelector(".calendar-datepicker [tabindex='0']"))&&p.focus(),this.updateDateRangeSelection(p)}}},trigger:function(t){var e={bubbles:!1,cancelable:!0,detail:{args:arguments,self:this}};"change"==t&&(o(this.e,"input",e),o(this.e,"change",e)),o(this.dt,"tail::"+t,e);for(var i=(this.events[t]||[]).length,s=0;s<i;s++)this.events[t][s].cb.apply(this,function(t,e,i){for(var s=e.length,r=0;r<s;++r)t[r-1]=e[r];return t[r]=i,t}(new Array(arguments.length),arguments,this.events[t][s].args));return!0},updateDateRangeSelection:function(t){if(this.con.dateSelection.rangeMode){var e=this.con.dateSelection;if(e.rangeMode&&e.start&&!e.end){var i=c.CLASSNAMES.OPENRIGHT,s=c.CLASSNAMES.OPENLEFT,r=c.CLASSNAMES.RANGE;"SPAN"===t.tagName&&(t=t.parentNode);var n=+t.getAttribute("data-date"),o=e.start.getTime();Array.prototype.slice.call(this.e.querySelectorAll("TD"),0).forEach((function(t){var e=+t.getAttribute("data-date"),a=[i,r,s];a.forEach((function(e){jOmnis.removeClass(t,e)})),a=[];var l=n<o;n!==o&&(e===o?a.push(l?s:i):e===n?a.push(l?i:s):(l&&e>n&&e<o||!l&&e<n&&e>o)&&a.push(r)),a.forEach((function(e){jOmnis.addClass(t,e)}))}))}}},getAriaAttributes:function(t,e,i){var s=this;function r(){return s.__.days[e.getDay()]}function n(){return e.getDate()}function o(){return s.__.months[e.getMonth()]}function a(){return e.getFullYear()}var l="";switch(t){case"day":l+=' aria-label="'+r()+" "+n()+" "+o()+" "+a()+'"',i&&(l+=' aria-selected="true"');break;case"month":l+=' aria-label="'+o()+" "+a()+'"';break;case"year":l+=' aria-label="'+a()+'"'}return l},calcPosition:function(){var t=this.dt.style,i=e.getComputedStyle(this.dt),s=parseInt(i.marginLeft)+parseInt(i.marginRight),r=parseInt(i.marginTop)+parseInt(i.marginBottom),n=function(t,e){for(e={top:t.offsetTop||0,left:t.offsetLeft||0,width:t.offsetWidth||0,height:t.offsetHeight||0};t=t.offsetParent;)e.top+=t.offsetTop,e.left+=t.offsetLeft;return e}(this.e,{});switch(this.con.position){case"top":var o=n.top-(this.dt.offsetHeight+r),a=n.left+n.width/2-(this.dt.offsetWidth/2+s/2);break;case"left":o=n.top+n.height/2-(this.dt.offsetHeight/2+r),a=n.left-(this.dt.offsetWidth+s);break;case"right":o=n.top+n.height/2-(this.dt.offsetHeight/2+r),a=n.left+n.width;break;default:o=n.top+n.height,a=n.left+n.width/2-(this.dt.offsetWidth/2+s/2)}return t.top=(o>=0?o:this.e.offsetTop)+"px",t.left=(a>=0?a:0)+"px",this},convertDate:function(t,e){var i,s={H:String("00"+t.getHours()).toString().slice(-2),G:(i=t.getHours(),i%12?i%12:12),A:t.getHours()>=12?"PM":"AM",a:t.getHours()>=12?"pm":"am",i:String("00"+t.getMinutes()).toString().slice(-2),s:String("00"+t.getSeconds()).toString().slice(-2),Y:t.getFullYear(),y:parseInt(t.getFullYear().toString().slice(2)),m:String("00"+(t.getMonth()+1)).toString().slice(-2),M:this.__.months[t.getMonth()].slice(0,3),F:this.__.months[t.getMonth()],d:String("00"+t.getDate()).toString().slice(-2),D:this.__.days[t.getDay()],l:this.__.shorts[t.getDay()].toLowerCase()};return e.replace(/([HGismd]{1,2}|[Y]{2,4}|y{2})/g,(function(t){return 4==t.length||2==t.length?s[t.slice(-1)].toString().slice(-Math.abs(t.length)):1==t.length&&"0"==datePart[0]?s[t.slice(-1)].toString().slice(-1):s[t.slice(-1)].toString()})).replace(/(A|a|M|F|D|l)/g,(function(t){return s[t]}))},renderCalendar:function(){var t,e=["tail-datetime-calendar","calendar-close"],s=i.createElement("DIV"),r=!0===this.con.classNames?this.e.className:this.con.classNames;["top","left","right","bottom"].indexOf(this.con.position)<0&&(t=i.querySelector(this.con.position),e.push("calendar-static")),("string"==typeof r||r instanceof Array)&&(e=e.concat("string"==typeof r?r.split(" "):r));var n=["ar","he","mdr","sam","syr"],o=this.con.rtl;if((!0===o||"auto"===o&&n.indexOf(this.con.locale)>=0)&&e.push("rtl"),this.con.stayOpen&&e.push("calendar-stay"),s.setAttribute("role","application"),s.setAttribute("aria-label","Calendar"),s.id="tail-datetime-"+this.id,s.className=e.join(" "),s.style.cssText=this.con.rtl?"direction:rtl;":"direction:ltr;",this.con.dateFormat){s.innerHTML='<div class="calendar-actions"></div>';const t=s.firstElementChild,e=this.e.omnisObject.isActive();function i(i){const s=document.createElement("span");s.setAttribute("role","button"),s.setAttribute("data-action",i),e&&(s.tabIndex="0"),t.appendChild(s);let r="right";switch(i){case"prev":r="left";case"next":s.className=`action action-${i}`,jIcons.replaceOrAddToElem(s,`images/keyboard_arrow_${r}.svg?`,null,{width:24,height:24,viewBox:"0 0 24 24"});break;case"view":s.className="label",s.setAttribute("data-view","up")}}i("prev"),i("view"),i("next")}else if(this.con.timeFormat)var a='<span class="action action-submit" data-action="submit"></span><span class="label"></span><span class="action action-cancel" data-action="cancel"></span>';if(void 0!==a&&(s.innerHTML='<div class="calendar-actions">'+a+"</div>"),this.con.dateFormat&&this.renderDatePicker(s,this.con.viewDefault),this.con.timeFormat&&this.renderTimePicker(s),this.con.closeButton&&!t){var l=i.createElement("BUTTON"),h=this;l.className="calendar-close",l.addEventListener("click",(function(t){t.preventDefault(),h.close()})),s.appendChild(l)}return s.style.cssText=t?"position:static;":"top:0;left:0;z-index:999;position:absolute;",(t||document.body).appendChild(s),s},renderDatePicker:function(t,e){if((!e||["decades","years","months","days"].indexOf(e)<0)&&(e=this.con.viewDays?"days":this.con.viewMonths?"months":this.con.viewYears?"years":!!this.con.viewDecades&&"decades"),!e||!this.con["view"+l(e)]||!this.con.dateFormat)return!1;var s=i.createElement("DIV");return s.className="calendar-datepicker calendar-view-"+e,s.innerHTML=this["view"+l(e)](),t.querySelector(".calendar-datepicker")?t.replaceChild(s,t.querySelector(".calendar-datepicker")):t.appendChild(s),this.view.type=e,this.handleLabel(t)},renderTimePicker:function(t){if(!this.con.timeFormat)return!1;var e=this.con.timeStepHours,s=this.con.timeStepMinutes,r=this.con.timeStepSeconds;e='<div class="timepicker-field timepicker-hours"><input type="number" name="dt[h]" value="" min="00" max="23" step="'+e+'" /><label>'+this.__.time[0]+"</label></div>",s='<div class="timepicker-field timepicker-minutes"><input type="number" name="dt[m]" value="" min="00" max="59" step="'+s+'" /><label>'+this.__.time[1]+"</label></div>",r='<div class="timepicker-field timepicker-seconds"><input type="number" name="dt[s]" value="" min="00" max="59" step="'+r+'" /><label>'+this.__.time[2]+"</label></div>";var n=i.createElement("DIV");n.className="calendar-timepicker",n.innerHTML=e+s+r;for(var o=this,a=n.querySelectorAll("input"),l=["Hours","Minutes","Seconds"],h=0;h<3;h++)a[h].value=this.view.date["get"+l[h]](),a[h].disabled=!1===this.con["time"+l[h]],a[h].addEventListener("input",(function(t){o.handleTime.call(o,t,this)})),a[h].addEventListener("keydown",(function(t){o.handleTime.call(o,t,this)}));return t.querySelector(".calendar-timepicker")?t.replaceChild(n,t.querySelector(".calendar-timepicker")):t.appendChild(n),this.handleLabel(t)},handleTime:function(t,e){var i=parseInt(e.getAttribute("min")),s=parseInt(e.getAttribute("max")),r=parseInt(e.getAttribute("step")),n=parseInt(e.value),o="none";if((38==(t.keyCode||t.which)||n>s)&&(o="up"),(40==(t.keyCode||t.which)||n<i)&&(o="down"),"up"==o&&n+r>s){var a=1;e.value=n-(s+1)}else"down"==o&&n-r<0&&(a=-1,e.value=s+1+n);if(a&&this.con.timeIncrement&&e.parentElement.previousElementSibling){var l=e.parentElement.previousElementSibling.querySelector("input");if(!1===l.disabled)return l.value=parseInt(l.value)+a,this.handleTime({},l)}var h=e.parentElement.parentElement.querySelectorAll("input");this.selectTime(h[0].value,h[1].value,h[2].value)},handleLabel:function(t){var e,i,s=t.querySelector(".label"),r=this.e.omnisObject.form.inst,n=this.e.id+"_label",o=jGetOmnisLocalizedValue(r,"date_units",null,["Day","Month","Year","Decade"]);switch(this.view.type){case"days":e=this.__.months[this.view.date.getMonth()]+", "+this.view.date.getFullYear();var a=o[1];break;case"months":e=this.view.date.getFullYear(),a=o[2];break;case"years":e=(i=parseInt(this.view.date.getFullYear().toString().slice(0,3)+"0"))+" - "+(i+10),a=o[3];break;case"decades":e=(i=parseInt(this.view.date.getFullYear().toString().slice(0,2)+"00"))+" - "+(i+100);break;case"time":e=this.__.header[3]}if(a)for(var l=t.querySelectorAll(".action"),h=0;h<l.length;h++){var c=jOmnis.hasClass(l[h],"action-prev")?jGetOmnisString(r,"ctrl_date_decrease"):jGetOmnisString(r,"ctrl_date_increase");l[h].setAttribute("aria-label",c+" "+a+" - "+e)}return s.id=n,s.innerText=e,t},viewDecades:function(){var t=this.view.date.getFullYear(),e=new Date(this.view.date.getTime()),i=this.con.today?(new Date).getYear():0;e.setFullYear(t-parseInt(t.toString()[3])-30);for(var s,r,n,o=[],a=[],l=[],h=1;h<=16;h++)s="calendar-decade"+(i>=e.getYear()&&i<=e.getYear()+10?" date-today":""),r='data-action="view" data-view="down" data-year="'+e.getFullYear()+'"',o.push('<td role="gridcell" class="'+s+'" '+r+'><span class="inner">'+e.getFullYear()+" - "+(e.getFullYear()+10)+"</span></td>"),h>=4&&h%4==0&&(a.push("<tr role='presentation'>\n"+o.join("\n")+"\n</tr>"),o=[]),e.setFullYear(e.getFullYear()+10),h>=13&&(n="calendar-decade",l.push('<td class="'+n+"\"><span><div style='min-height:10px;cursor:auto;'></div></span></td>"),4===l.length&&(a.push("<tr>\n"+l.join("\n")+"\n</tr>"),l=[]));return'<table class="calendar-decades"><thead><tr><th colspan="4">'+this.__.header[2]+"</th></tr></thead><tbody>"+a.join("\n")+"</tbody></table>"},viewYears:function(){var t=this.view.date.getFullYear(),e=new Date(this.view.date.getTime()),i=this.con.today?(new Date).getYear():0,s=this.select?new Date(this.select.getTime()):null;e.setFullYear(t-parseInt(t.toString()[3])-2),s&&s.setHours(0,0,0,0);for(var r,n,o,a=[],l=[],h=[],c=1;c<=16;c++){r="calendar-year"+(e.getYear()==i?" date-today":""),n='data-action="view" data-view="down" data-year="'+e.getFullYear()+'"';var u=' tabindex="-1"';if(1===c){var d=e.getYear(),p=this.focusedYear-d,m=p>=0&&p<16;if(s)var f=(p=s.getYear()-d)>=0&&p<16;var g=(p=i-d)>=0&&p<16}this.focusedYear&&m?this.focusedYear===e.getYear()&&(u=' tabindex="0"'):s&&f?s.getYear()===e.getYear()&&(u=' tabindex="0"',this.focusedDate=new Date(e.getTime())):0!==i&&g?i===e.getYear()&&(u=' tabindex="0"',this.focusedDate=new Date(e.getTime())):1===c&&(u=' tabindex="0"',this.focusedDate=new Date(e.getTime())),this.e.omnisObject.isActive()||(u="");var v=this.getAriaAttributes("year",e,!1);a.push('<td role="gridcell" class="'+r+'" '+n+u+v+'><span class="inner">'+e.getFullYear()+"</span></td>"),c>=4&&c%4==0&&(l.push("<tr role='presentation'>\n"+a.join("\n")+"\n</tr>"),a=[]),e.setFullYear(e.getFullYear()+1),c>=13&&(o="calendar-year",h.push('<td class="'+o+"\"><span><div style='min-height:10px;cursor:auto;'></div></span></td>"),4===h.length&&(l.push("<tr>\n"+h.join("\n")+"\n</tr>"),h=[]))}return'<table class="calendar-years"><thead><tr><th colspan="4">'+this.__.header[1]+"</th></tr></thead><tbody>"+l.join("\n")+"</tbody></table>"},viewMonths:function(){var t=this.__.months,e=this.con.today?(new Date).getMonth():-1,i=this.select?new Date(this.select.getTime()):null,s=new Date;i&&i.setHours(0,0,0,0),e=this.view.date.getYear()==(new Date).getYear()?e:-1;for(var r,n,o,a=[],l=[],h=[],c=0;c<12;c++){r="calendar-month"+(e==c?" date-today":""),n='data-action="view" data-view="down" data-month="'+c+'"';var u=' tabindex="-1"';this.focusedMonth||0===this.focusedMonth?this.focusedMonth===c&&(u=' tabindex="0"'):i?i.getMonth()===c&&(u=' tabindex="0"'):-1!==e?e===c&&(u=' tabindex="0"'):0===c&&(u=' tabindex="0"'),this.e.omnisObject.isActive()||(u=""),s.setMonth(c);var d=this.getAriaAttributes("month",s,!1);a.push('<td role="gridcell" class="'+r+'" '+n+u+d+'><span class="inner">'+t[c]+"</span></td>"),3==a.length&&(l.push("<tr role='presentation'>\n"+a.join("\n")+"\n</tr>"),a=[]),c>=9&&(o="calendar-month"+(e==c?" date-today":""),h.push('<td class="'+o+"\"><span><div style='min-height:10px;cursor:auto;'></div></span></td>"),3===h.length&&(l.push("<tr>\n"+h.join("\n")+"\n</tr>"),h=[]))}return'<table class="calendar-months"><thead><tr><th colspan="3">'+this.__.header[0]+"</th></tr></thead><tbody>"+l.join("\n")+"</tbody></table>"},viewDays:function(){var t,e,i,s,r,n,o,a=new Date(this.view.date.getTime()),l=(new Date).toDateString(),h=a.getFullYear(),u=a.getMonth(),d=[],p=[],m=[],f=[0,[]],g=[].concat(this.con.dateRanges),v=([].concat(this.con.tooltips),[0,0]),b=new Date,y=this.con.dateSelection.rangeMode,C=this.select?new Date(this.select.getTime()):null;b.setHours(0,0,0,0),C&&C.setHours(0,0,0,0);var _=" "+c.CLASSNAMES.SELECT;if(y)var E=_+" "+c.CLASSNAMES.OPENRIGHT,w=_+" "+c.CLASSNAMES.OPENLEFT,k=_+" "+c.CLASSNAMES.RANGE,T=this.con.dateSelection,S=T.start?T.start.getTime():0,x=T.end?T.end.getTime():0;a.setHours(0,0,0,0),a.setDate(1);var D=1-(a.getDay()-this.con.weekStart);for(a.setDate(D),D>0&&a.setTime(a.getTime()-6048e5),a.setHours(0,0,0,0);p.length<6;){t=a.getTime(),i='data-action="submit" data-date="'+a.getTime()+'"',e="calendar-day date-"+(a.getMonth()>u?"next":a.getMonth()<u?"previous":"current"),this.con.today&&l==a.toDateString()&&(e+=" date-today"),this.con.dateBlacklist&&(t<this.con.dateStart||t>this.con.dateEnd)?f=[t<this.con.dateStart?this.con.dateStart:1/0,[0,1,2,3,4,5,6],!0]:0==f[0]?g=g.filter((function(e){return e.start==1/0||t>=e.start&&t<=e.end?(f=[e.end,e.days],!1):e.start>t}),this):3==f.length&&(f=[0,[0,1,2,3,4,5,6]]),this.con.tooltips.length>0&&this.con.tooltips.filter((function(e,i){e.date instanceof Array?e.date[0]<=t&&e.date[1]>=t&&(v=[e.date[1],i,e.color]):e.date==t&&(v=[e.date,i,e.color])}),this),v[0]<t&&(v=[0,0]),(o=f[0]>=t&&f[1].indexOf(a.getDay())>=0)&&this.con.dateBlacklist||!o&&!this.con.dateBlacklist?(e+=" date-disabled",i+=' data-disabled="true"'):0!==f[0]&&f[0]<=t&&(f=[0,[]]),y?S===t?e+=x&&S!==x?E:_:x===t?e+=w:t>S&&t<x&&(e+=k):C&&C.toDateString()===a.toDateString()&&(e+=" date-select"),r=e;var O=' tabindex="-1"';this.focusedDate&&this.focusedDate.getMonth()===u&&this.focusedDate.getFullYear()===h?this.focusedDate.getTime()===t&&(O=' tabindex="0"'):C&&C.getMonth()===u&&C.getFullYear()===h?C.toDateString()===a.toDateString()&&(O=' tabindex="0"',this.focusedDate=C):b.getMonth()===u&&b.getFullYear()===h?l===a.toDateString()&&(O=' tabindex="0"',this.focusedDate=b):1===a.getDate()&&(O=' tabindex="0"',this.focusedDate=new Date(a.getTime())),this.e.omnisObject.isActive()||(O="");var A=this.getAriaAttributes("day",a,!!C&&C.toDateString()===a.toDateString());s='<span class="inner">'+a.getDate()+"</span>",v[0]>0&&(e+=" date-tooltip",i+=' data-tooltip="'+v[1]+'" data-tooltip-time="'+t+'"',"inherit"!==v[2]?s+='<span class="tooltip-tick" style="background:'+v[2]+';"></span>':s+='<span class="tooltip-tick"></span>'),d.push('<td role="gridcell" class="'+e+'" '+i+O+A+">"+s+"</td>"),5===p.length&&(m.push('<td class="'+r+"\"><span><div style='min-height:10px;cursor:auto;'></div></span></td>"),7===m.length&&(n="<tr>\n"+m.join("\n")+"\n</tr>",m=[])),7==d.length&&(p.push("<tr>\n"+d.join("\n")+"\n</tr>"),d=[]),a.setDate(a.getDate()+1)}return p="<tbody>"+p.join("\n")+n+"</tbody>",this.focusedMonth=this.focusedDate.getMonth(),this.focusedYear=this.focusedDate.getYear(),'<table class="calendar-days">'+this.weekdays+p+"</table>"},showTooltip:function(t,e,i){var s,r=this.con.tooltips[t].element,n=r.style,o=this.dt.querySelector(".calendar-datepicker");n.cssText="opacity:0;visibility:hidden;",r.id="tooltip-"+t+"-"+i,o.appendChild(r),s=r.offsetWidth,r.offsetHeight,n.top=e.offsetTop+e.offsetHeight+"px",n.left=e.offsetLeft+e.offsetWidth/2-s/2+"px",n.visibility="visible",this.con.animate?(r.setAttribute("data-top",parseInt(n.top)),n.top=parseInt(n.top)+5+"px",function t(){parseFloat(n.top)>r.getAttribute("data-top")&&(n.top=parseFloat(n.top)-.5+"px"),(n.opacity=parseFloat(n.opacity)+.125)<1&&setTimeout(t,20)}()):n.opacity=1},hideTooltip:function(t){var e=this.dt.querySelector("#tooltip-"+t),i=e.style;this.con.animate?(e.className+=" remove",function t(){if(parseFloat(i.top)<parseInt(e.getAttribute("data-top"))+5&&(i.top=parseFloat(i.top)+.5+"px"),(i.opacity-=.125)<0)return(e.className="calendar-tooltip")?e.parentElement.removeChild(e):"";setTimeout(t,20)}()):e.parentElement.removeChild(e)},switchView:function(t){var e=[null,"days","months","years","decades",null];return-1==e.indexOf(t)&&("up"==t?t=e[(e.indexOf(this.view.type)||5)+1]||null:"down"==t&&(t=e[(e.indexOf(this.view.type)||1)-1]||null),t&&this.con["view"+l(t)]||(t=!1)),!!t&&(this.renderDatePicker(this.dt,t),this.trigger("view",t))},switchDate:function(t,e,i,s){if(this.view.date.setFullYear(null==t?this.view.date.getFullYear():t),this.view.date.setMonth(null==e?this.view.date.getMonth():e),"auto"==i){var r=this.view.date,n=new Date;i=r.getMonth()==n.getMonth()&&r.getYear()==n.getYear()?n.getDate():1}return this.view.date.setDate(i||this.view.date.getDate()),!0===s||this.switchView(this.view.type)},switchMonth:function(t,e){return"string"==typeof t&&(t=["previous","prev"].indexOf(t)>=0?-1:1,t=this.view.date.getMonth()+type),this.switchDate(e||this.getFullYear(),t)},switchYear:function(t){return"string"==typeof t&&(t=["previous","prev"].indexOf(t)>=0?-1:1,t=this.view.date.getFullYear()+type),this.switchDate(t)},browseView:function(t){switch(t=["previous","prev"].indexOf(t)>=0?-1:1,this.view.type){case"days":return this.switchDate(null,this.view.date.getMonth()+t,"auto");case"months":return this.switchDate(this.view.date.getFullYear()+t,null,"auto");case"years":return this.switchDate(this.view.date.getFullYear()+10*t,null,"auto");case"decades":return this.switchDate(this.view.date.getFullYear()+100*t,null,"auto")}return!1},fetchDate:function(t){t=h(t||!1)||this.view.date;var e=this.dt.querySelectorAll("input[type=number]");return e&&3==e.length&&t.setHours(e[0].value||0,e[1].value||0,e[2].value||0,0),t},selectDate:function(t,e,i,s,r,n,o,a){var l=new Date,h=[];this.con.dateFormat&&h.push(this.con.dateFormat),this.con.timeFormat&&h.push(this.con.timeFormat),this.select=t instanceof Date?t:new Date(t||(null==t?this.view.date.getFullYear():l.getFullYear()),e||0===e?e:null==e?this.view.date.getMonth():l.getMonth(),i||(null==i?this.view.date.getDate():l.getDate()),s||(null==s?this.view.date.getHours():0),r||(null==r?this.view.date.getMinutes():0),n||(null==n?this.view.date.getSeconds():0)),this.view.date=new Date(this.select.getTime());var u="data-value",d=this.select.getTime();if(this.con.dateSelection.rangeMode)switch(null==a?this.con.dateSelection.nextSelect:a){case c.DATESELECTION.FIRST_SELECT:this.e.setAttribute(u,""),this.e.setAttribute("data-startchanged","1"),this.con.dateSelection.start=new Date(d),null==a&&(this.con.dateSelection.end=null),null!=a&&this.con.dateSelection.end||(this.con.dateSelection.nextSelect=c.DATESELECTION.SECOND_SELECT);break;case c.DATESELECTION.SECOND_SELECT:var p=new Date(d);if(p<this.con.dateSelection.start){this.e.setAttribute("data-startchanged","1"),this.con.dateSelection.end=this.con.dateSelection.start,this.con.dateSelection.start=p;var m=this.e.getAttribute(u);this.e.setAttribute(u,d),d=m}else this.con.dateSelection.end=p;this.e.setAttribute("data-endchanged","1"),u="data-valueto",this.con.dateSelection.nextSelect=c.DATESELECTION.FIRST_SELECT}if((d!==+this.e.getAttribute(u)||this.con.dateSelection.rangeMode)&&(this.e.value=d,this.e.setAttribute(u,d),this.focusedDate=null,this.switchView("days")),!o)return this.trigger("change")},selectTime:function(t,e,i){return this.selectDate(void 0,void 0,void 0,t,e,i)},open:function(){if(!s(this.dt,"calendar-close"))return this;var t=this,e=this.dt.style;return e.opacity=this.con.animate?0:1,e.display="block",r(n(this.dt,"calendar-close"),"calender-idle"),!s(this.dt,"calendar-static")&&this.calcPosition(),function i(){if((e.opacity=parseFloat(e.opacity)+.125)>=1)return r(n(t.dt,"calendar-idle"),"calendar-open"),t.trigger("open");setTimeout(i,20)}(),this},close:function(){if(!s(this.dt,"calendar-open"))return this;var t=this,e=this.dt.style;return r(n(this.dt,"calendar-open"),"calender-idle"),e.opacity=this.con.animate?1:0,e.display="block",function i(){if((e.opacity-=.125)<=0)return r(n(t.dt,"calendar-idle"),"calendar-close"),e.display="none",t.trigger("close");setTimeout(i,20)}(),this},toggle:function(){return s(this.dt,"calendar-open")?this.close():s(this.dt,"calendar-close")?this.open():this},on:function(t,e,i){return!(["open","close","change","view"].indexOf(t)<0||"function"!=typeof e)&&(t in this.events||(this.events[t]=[]),this.events[t].push({cb:e,args:i instanceof Array?i:[]}),this)},remove:function(){return this.e.removeAttribute("data-tail-datetime"),this.dt.parentElement.removeChild(this.dt),this},reload:function(){return this.remove(),this.init()},config:function(t,e,i){if(t instanceof Object){for(var s in t)this.config(s,t[s],!1);return this.reload(),this.con}return void 0===t?this.con:t in this.con&&(void 0===e?this.con[t]:(this.con[t]=e,!1!==this.rebuild&&this.reload(),this))}},c}(window)},4794:function(){!function(t){function e(e){if("string"==typeof e.data){var i=e.handler,s=e.data.toLowerCase().split(" ");e.handler=function(e){if(this===e.target||!/textarea|select/i.test(e.target.nodeName)&&"text"!==e.target.type){var r="keypress"!==e.type&&t.hotkeys.specialKeys[e.which],n=String.fromCharCode(e.which).toLowerCase(),o="",a={};e.altKey&&"alt"!==r&&(o+="alt+"),e.ctrlKey&&"ctrl"!==r&&(o+="ctrl+"),e.metaKey&&!e.ctrlKey&&"meta"!==r&&(o+="meta+"),e.shiftKey&&"shift"!==r&&(o+="shift+"),r?a[o+r]=!0:(a[o+n]=!0,a[o+t.hotkeys.shiftNums[n]]=!0,"shift+"===o&&(a[t.hotkeys.shiftNums[n]]=!0));for(var l=0,h=s.length;l<h;l++)if(a[s[l]])return i.apply(this,arguments)}}}}t.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}},t.each(["keydown","keyup","keypress"],(function(){t.event.special[this]={add:e}}))}(jQuery)},4081:function(){"use strict";!function(){if(!jQuery||!jQuery.jstree){!function(t){t.vakata={},t.vakata.css={get_css:function(t,e,i){t=t.toLowerCase();var s=i.cssRules||i.rules,r=0;do{if(s.length&&r>s.length+5)return!1;if(s[r].selectorText&&s[r].selectorText.toLowerCase()==t)return!0===e?(i.removeRule&&i.removeRule(r),i.deleteRule&&i.deleteRule(r),!0):s[r]}while(s[++r]);return!1},add_css:function(e,i){return!t.jstree.css.get_css(e,!1,i)&&(i.insertRule?i.insertRule(e+" { }",0):i.addRule(e,null,0),t.vakata.css.get_css(e))},remove_css:function(e,i){return t.vakata.css.get_css(e,!0,i)},add_sheet:function(e){var i=!1,s=!0;if(e.str)return e.title&&(i=t("style[id='"+e.title+"-stylesheet']")[0]),i?s=!1:((i=document.createElement("style")).setAttribute("type","text/css"),e.title&&i.setAttribute("id",e.title+"-stylesheet")),i.styleSheet?s?(document.getElementsByTagName("head")[0].appendChild(i),i.styleSheet.cssText=e.str):i.styleSheet.cssText=i.styleSheet.cssText+" "+e.str:(i.appendChild(document.createTextNode(e.str)),document.getElementsByTagName("head")[0].appendChild(i)),i.sheet||i.styleSheet;if(e.url){if(!document.createStyleSheet)return(i=document.createElement("link")).rel="stylesheet",i.type="text/css",i.media="all",i.href=e.url,document.getElementsByTagName("head")[0].appendChild(i),i.styleSheet;try{i=document.createStyleSheet(e.url)}catch(t){}}}};var e=[],i=-1,s={},r={};t.fn.jstree=function(i){var r="string"==typeof i,n=Array.prototype.slice.call(arguments,1),o=this;if(r){if("_"==i.substring(0,1))return o;this.each((function(){var s=e[t.data(this,"jstree_instance_id")],r=s&&t.isFunction(s[i])?s[i].apply(s,n):s;if(void 0!==r&&(0===i.indexOf("is_")||!0!==r&&!1!==r))return o=r,!1}))}else this.each((function(){var r=t.data(this,"jstree_instance_id"),o=[],a=i?t.extend({},!0,i):{},l=t(this),h=!1,c=[];o=o.concat(n),l.data("jstree")&&o.push(l.data("jstree")),a=o.length?t.extend.apply(null,[!0,a].concat(o)):a,void 0!==r&&e[r]&&e[r].destroy(),r=parseInt(e.push({}),10)-1,t.data(this,"jstree_instance_id",r),a.plugins=t.isArray(a.plugins)?a.plugins:t.jstree.defaults.plugins.slice(),a.plugins.unshift("core"),a.plugins=a.plugins.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(","),(h=t.extend(!0,{},t.jstree.defaults,a)).plugins=a.plugins,t.each(s,(function(e,i){-1===t.inArray(e,h.plugins)?(h[e]=null,delete h[e]):c.push(e)})),h.plugins=c,e[r]=new t.jstree._instance(r,t(this).addClass("jstree jstree-"+r),h),t.each(e[r]._get_settings().plugins,(function(t,i){e[r].data[i]={}})),t.each(e[r]._get_settings().plugins,(function(t,i){s[i]&&s[i].__init.apply(e[r])})),e[r]&&e[r]._get_settings().updateNow?e[r].init():setTimeout((function(){e[r]&&e[r].init()}),0)}));return o},t.jstree={defaults:{plugins:[]},_focused:function(){return e[i]||null},_reference:function(i){if(e[i])return e[i];var s=t(i);return s.length||"string"!=typeof i||(s=t("#"+i)),s.length&&e[s.closest(".jstree").data("jstree_instance_id")]||null},_instance:function(e,i,s){this.data={core:{}},this.get_settings=function(){return t.extend(!0,{},s)},this._get_settings=function(){return s},this.get_index=function(){return e},this.get_container=function(){return i},this.get_container_ul=function(){return i.children("ul:eq(0)")},this._set_settings=function(e){s=t.extend(!0,{},s,e)}},_fn:{},plugin:function(e,i){i=t.extend({},{__init:t.noop,__destroy:t.noop,_fn:{},defaults:!1},i),s[e]=i,t.jstree.defaults[e]=i.defaults,t.each(i._fn,(function(i,s){s.plugin=e,s.old=t.jstree._fn[i],t.jstree._fn[i]=function(){var e,r=s,n=Array.prototype.slice.call(arguments),o=new t.Event("before.jstree"),a=!1;if(!0!==this.data.core.locked||"unlock"===i||"is_locked"===i){do{if(r&&r.plugin&&-1!==t.inArray(r.plugin,this._get_settings().plugins))break;r=r.old}while(r);if(r){if(0===i.indexOf("_"))e=r.apply(this,n);else{if(!1===(e=this.get_container().triggerHandler(o,{func:i,inst:this,args:n,plugin:r.plugin})))return;void 0!==e&&(n=e),e=r.apply(t.extend({},this,{__callback:function(t){this.get_container().triggerHandler(i+".jstree",{inst:this,args:n,rslt:t,rlbk:a})},__rollback:function(){return a=this.get_rollback()},__call_old:function(t){return r.old.apply(this,t?Array.prototype.slice.call(arguments,1):n)}}),n)}return e}}},t.jstree._fn[i].old=s.old,t.jstree._fn[i].plugin=e}))},rollback:function(i){i&&(t.isArray(i)||(i=[i]),t.each(i,(function(t,i){e[i.i].set_rollback(i.h,i.d)})))}},t.jstree._fn=t.jstree._instance.prototype={},t((function(){var e=navigator.userAgent.toLowerCase(),i=(e.match(/.+?(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],s=".jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; } .jstree li { display:block; min-height:18px; white-space:nowrap; min-width:18px; } .jstree-rtl li { margin-left:0; margin-right:18px; } .jstree > ul > li { margin-left:0px; } .jstree-rtl > ul > li { margin-right:0px; } .jstree ins { float:left; text-decoration:none; width:24px; height:24px; margin:0 0 0 0; padding:0; } .jstree a { display:block; color:black; white-space:nowrap; padding:"+ctrl_tree.DEFAULT_PADDING+"px 0; margin:0; } .jstree a:focus { outline: none; } .jstree a > ins { height:16px; width:16px; } .jstree a > .jstree-icon { margin-right:3px; } .jstree-rtl a > .jstree-icon { margin-left:3px; margin-right:0; } li.jstree-open > ul { display:block; } li.jstree-closed > ul { display:none; } ";/msie/.test(e)&&7==parseInt(i,10)&&(!0,s+=".jstree li a { border-width:0 !important; padding:0px 2px !important; } "),!/compatible/.test(e)&&/mozilla/.test(e)&&parseFloat(i,10)<1.9&&(!0,s+=".jstree ins { display:-moz-inline-box; } .jstree a { display:-moz-inline-box; } .jstree .jstree-no-icons .jstree-checkbox { display:-moz-inline-stack !important; } "),t.vakata.css.add_sheet({str:s,title:"jstree"})})),t.jstree.plugin("core",{__init:function(){this.data.core.locked=!1,this.data.core.to_open=this.get_settings().core.initially_open,this.data.core.to_load=this.get_settings().core.initially_load},defaults:{html_titles:!1,animation:500,initially_open:[],initially_load:[],open_parents:!0,notify_plugins:!0,rtl:!1,load_open:!1,strings:{loading:"Loading ...",new_node:"New node",multiple_selection:"Multiple selection"}},_fn:{init:function(){this.set_focus(),this._get_settings().core.rtl&&this.get_container().addClass("jstree-rtl").css("direction","rtl");var e=this.get_container().parents()[0].omnisObject.getSVGArrowHTML();this.get_container().html("<ul><li class='jstree-last jstree-leaf'><ins></ins><a class='jstree-loading' href='#'><ins class='jstree-icon' tabindex='-1'>"+e+"</ins>"+this._get_string("loading")+"</a></li></ul>"),this.data.core.li_height=this.get_container_ul().find("li.jstree-closed, li.jstree-leaf").eq(0).height()||18,this.get_container().delegate("li > ins","click.jstree",t.proxy((function(e){if(!this.get_container().parents()[0].omnisObject.isEnabled())return!1;var i=t(e.target);this.toggle_node(i)}),this)).bind("mousedown.jstree",t.proxy((function(){this.set_focus()}),this)).bind("dblclick.jstree",(function(t){var e;if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){e=window.getSelection();try{e.removeAllRanges(),e.collapse()}catch(t){}}})),this._get_settings().core.notify_plugins&&this.get_container().bind("load_node.jstree",t.proxy((function(e,i){var s=this._get_node(i.rslt.obj),r=this;-1===s&&(s=this.get_container_ul()),s.length&&s.find("li").each((function(){var e=t(this);e.data("jstree")&&t.each(e.data("jstree"),(function(i,s){r.data[i]&&t.isFunction(r["_"+i+"_notify"])&&r["_"+i+"_notify"].call(r,e,s)}))}))}),this)),this._get_settings().core.load_open&&this.get_container().bind("load_node.jstree",t.proxy((function(e,i){var s=this._get_node(i.rslt.obj),r=this;-1===s&&(s=this.get_container_ul()),s.length&&s.find("li.jstree-open:not(:has(ul))").each((function(){r.load_node(this,t.noop,t.noop)}))}),this)),this.__callback(),this.load_node(-1,(function(){this.loaded(),this.reload_nodes()}))},destroy:function(){var r,n=this.get_index(),o=this._get_settings(),a=this;if(t.each(o.plugins,(function(t,e){try{s[e].__destroy.apply(a)}catch(t){}})),this.__callback(),this.is_focused())for(r in e)if(e.hasOwnProperty(r)&&r!=n){e[r].set_focus();break}n===i&&(i=-1),this.get_container().unbind(".jstree").undelegate(".jstree").removeData("jstree_instance_id").find("[class^='jstree']").andSelf().attr("class",(function(){return this.className.replace(/jstree[^ ]*|$/gi,"")})),t(document).unbind(".jstree-"+n).undelegate(".jstree-"+n),e[n]=null,delete e[n]},_core_notify:function(t,e){e.opened&&this.open_node(t,!1,!0)},lock:function(){this.data.core.locked=!0,this.get_container().children("ul").addClass("jstree-locked").css("opacity","0.7"),this.__callback({})},unlock:function(){this.data.core.locked=!1,this.get_container().children("ul").removeClass("jstree-locked").css("opacity","1"),this.__callback({})},is_locked:function(){return this.data.core.locked},save_opened:function(){var t=this;this.data.core.to_open=[],this.get_container_ul().find("li.jstree-open").each((function(){this.id&&t.data.core.to_open.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))})),this.__callback(t.data.core.to_open)},save_loaded:function(){},reload_nodes:function(e){var i=this,s=!0,r=[],n=[];e||(this.data.core.reopen=!1,this.data.core.refreshing=!0,this.data.core.to_open=t.map(t.makeArray(this.data.core.to_open),(function(t){return"#"+t.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")})),this.data.core.to_load=t.map(t.makeArray(this.data.core.to_load),(function(t){return"#"+t.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")})),this.data.core.to_open.length&&(this.data.core.to_load=this.data.core.to_load.concat(this.data.core.to_open))),this.data.core.to_load.length&&(t.each(this.data.core.to_load,(function(e,i){if("#"==i)return!0;t(i).length?r.push(i):n.push(i)})),r.length&&(this.data.core.to_load=n,t.each(r,(function(t,e){i._is_loaded(e)||(i.load_node(e,(function(){i.reload_nodes(!0)}),(function(){i.reload_nodes(!0)})),s=!1)})))),this.data.core.to_open.length&&t.each(this.data.core.to_open,(function(t,e){i.open_node(e,!1,!0)})),s&&(this.data.core.reopen&&clearTimeout(this.data.core.reopen),this.data.core.reopen=setTimeout((function(){i.__callback({},i)}),50),this.data.core.refreshing=!1,this.reopen())},reopen:function(){var e=this;this.data.core.to_open.length&&t.each(this.data.core.to_open,(function(t,i){e.open_node(i,!1,!0)})),this.__callback({})},refresh:function(t){var e=this;this.save_opened(),t||(t=-1),(t=this._get_node(t))||(t=-1),-1!==t?t.children("UL").remove():this.get_container_ul().empty(),this.load_node(t,(function(){e.__callback({obj:t}),e.reload_nodes()}))},loaded:function(){this.__callback()},set_focus:function(){var e=this.get_container().parents()[0].omnisObject;if(!this.data.ui.hovered&&(e.multisel||!e.keyboardChangesCurrentLine)){var s=this.get_container().find("> ul > li:first-child");this.hover_node(s)}if(!this.is_focused()){var r=t.jstree._focused();r&&r.unset_focus(),this.get_container().addClass("jstree-focused"),i=this.get_index(),this.__callback()}},is_focused:function(){return i==this.get_index()},unset_focus:function(){this.is_focused()&&(this.get_container().removeClass("jstree-focused"),i=-1),this.__callback()},_get_node:function(e){var i=t(e,this.get_container());return i.is(".jstree")||-1==e?-1:!!(i=i.closest("li",this.get_container())).length&&i},_get_next:function(t,e){return-1===(t=this._get_node(t))?this.get_container().find("> ul > li:first-child"):!!t.length&&(e?t.nextAll("li").size()>0&&t.nextAll("li:eq(0)"):t.hasClass("jstree-open")?t.find("li:eq(0)"):t.nextAll("li").size()>0?t.nextAll("li:eq(0)"):t.parentsUntil(".jstree","li").next("li").eq(0))},_get_prev:function(t,e){if(-1===(t=this._get_node(t)))return this.get_container().find("> ul > li:last-child");if(!t.length)return!1;if(e)return t.prevAll("li").length>0&&t.prevAll("li:eq(0)");if(t.prev("li").length){for(t=t.prev("li").eq(0);t.hasClass("jstree-open");)t=t.children("ul:eq(0)").children("li:last");return t}var i=t.parentsUntil(".jstree","li:eq(0)");return!!i.length&&i},_get_parent:function(t){if(-1==(t=this._get_node(t))||!t.length)return!1;var e=t.parentsUntil(".jstree","li:eq(0)");return e.length?e:-1},_get_children:function(t){return-1===(t=this._get_node(t))?this.get_container().children("ul:eq(0)").children("li"):!!t.length&&t.children("ul:eq(0)").children("li")},get_path:function(t,e){var i=[],s=this;return!(-1===(t=this._get_node(t))||!t||!t.length)&&(t.parentsUntil(".jstree","li").each((function(){i.push(e?this.id:s.get_text(this))})),i.reverse(),i.push(e?t.attr("id"):this.get_text(t)),i)},_get_string:function(t){return this._get_settings().core.strings[t]||t},is_open:function(t){return(t=this._get_node(t))&&-1!==t&&t.hasClass("jstree-open")},is_closed:function(t){return(t=this._get_node(t))&&-1!==t&&t.hasClass("jstree-closed")},is_leaf:function(t){return(t=this._get_node(t))&&-1!==t&&t.hasClass("jstree-leaf")},correct_state:function(t){if(!(t=this._get_node(t))||-1===t)return!1;t.removeClass("jstree-closed jstree-open").addClass("jstree-leaf").children("ul").remove(),this.__callback({obj:t})},open_node:function(t,e,i){if(!(t=this._get_node(t)).length)return!1;if(!t.hasClass("jstree-closed"))return e&&e.call(),!1;var s=i?0:this._get_settings().core.animation,r=this;this._is_loaded(t)?(this._get_settings().core.open_parents&&t.parentsUntil(".jstree",".jstree-closed").each((function(){r.open_node(this,!1,!0)})),s&&t.children("ul").css("display","none"),t.removeClass("jstree-closed").addClass("jstree-open").children("a").removeClass("jstree-loading"),s?t.children("ul").stop(!0,!0).slideDown(s,(function(){this.style.display="",r.after_open(t)})):r.after_open(t),this.__callback({obj:t}),e&&e.call()):(t.children("a").addClass("jstree-loading"),this.load_node(t,(function(){r.open_node(t,e,i)}),e))},after_open:function(t){this.__callback({obj:t})},close_node:function(t,e,i){t=this._get_node(t);var s=e?0:this._get_settings().core.animation,r=this;if(!t.length||!t.hasClass("jstree-open"))return!1;s&&t.children("ul").attr("style","display:block !important"),t.removeClass("jstree-open").addClass("jstree-closed"),s?t.children("ul").stop(!0,!0).slideUp(s,(function(){this.style.display="",r.after_close(t,i)})):r.after_close(t,i),this.__callback({obj:t})},after_close:function(t,e){if(e&&(t.discard=!0),this.__callback({obj:t}),this.data.ui.last_selected){var i=this.data.ui.last_selected;if(i)if(!i.is(":visible")){this.select_node(t);for(var s=0;s<this.data.ui.selected.length;s++)if(this.data.ui.selected[s]===t){var r=!0;break}r||this.deselect_node(t)}}},toggle_node:function(t){return(t=this._get_node(t)).hasClass("jstree-closed")?this.open_node(t):t.hasClass("jstree-open")?this.close_node(t):void 0},open_all:function(t,e,i){(t=t?this._get_node(t):-1)&&-1!==t||(t=this.get_container_ul()),i?t=t.find("li.jstree-closed"):(i=t,t=t.is(".jstree-closed")?t.find("li.jstree-closed").andSelf():t.find("li.jstree-closed"));var s=this;t.each((function(){var t=this;s._is_loaded(this)?s.open_node(this,!1,!e):s.open_node(this,(function(){s.open_all(t,e,i)}),!e)})),0===i.find("li.jstree-closed").length&&this.__callback({obj:i})},close_all:function(t,e){var i=this;(t=t?this._get_node(t):this.get_container())&&-1!==t||(t=this.get_container_ul()),t.find("li.jstree-open").andSelf().each((function(){i.close_node(this,!e)})),this.__callback({obj:t})},clean_node:function(e){(e=(e=e&&-1!=e?t(e):this.get_container_ul()).is("li")?e.find("li").andSelf():e.find("li")).removeClass("jstree-last").filter("li:last-child").addClass("jstree-last").end().filter(":has(li)").not(".jstree-open").removeClass("jstree-leaf").addClass("jstree-closed"),e.not(".jstree-open, .jstree-closed").addClass("jstree-leaf").children("ul").remove(),this.__callback({obj:e})},get_rollback:function(){return this.__callback(),{i:this.get_index(),h:this.get_container().children("ul").clone(!0),d:this.data}},set_rollback:function(t,e){this.get_container().empty().append(t),this.data=e,this.__callback()},load_node:function(t,e,i){this.__callback({obj:t})},_is_loaded:function(t){return!0},create_node:function(e,i,s,r,n){e=this._get_node(e),i=void 0===i?"last":i;var o,a=t("<li />"),l=this._get_settings().core,h=this.get_container().parents()[0].omnisObject,c=h.getSVGArrowHTML();if(-1!==e&&!e.length)return!1;if(!n&&!this._is_loaded(e))return h.addLineDataToIgnore(s.attr["data-ident"]),this.load_node(e,(function(){this.create_node(e,i,s,r,!0)})),!1;if(this.__rollback(),"string"==typeof s&&(s={data:s}),s||(s={}),s.attr&&a.attr(s.attr),s.metadata&&a.data(s.metadata),s.state&&a.addClass("jstree-"+s.state),s.data||(s.data=this._get_string("new_node")),t.isArray(s.data)||(o=s.data,s.data=[],s.data.push(o)),t.each(s.data,(function(e,i){o=t("<a />"),t.isFunction(i)&&(i=i.call(this,s)),"string"==typeof i?o.attr("href","#")[l.html_titles?"html":"text"](i):(i.attr||(i.attr={}),i.attr.href||(i.attr.href="#"),o.attr(i.attr)[l.html_titles?"html":"text"](i.title),i.language&&o.addClass(i.language)),o.prepend("<ins class='jstree-icon' style='margin-top:0;' tabindex='-1'></ins>");const r=h.getSVGIconData(s.attr.rel);r?jIcons.replaceOrAddToElem(o.children("ins")[0],r):(!i.icon&&s.icon&&(i.icon=s.icon),i.icon&&(-1===i.icon.indexOf("/")?o.children("ins").addClass(i.icon):o.children("ins").css("background","url('"+i.icon+"') center center no-repeat").css("backgroundSize",jIcons.getIconBackSize(i.icon)))),o[0].tabIndex=-1,a.append(o)})),o[0]&&o[0].parentNode&&o[0].parentNode.hasAttribute("listcolumn"))var u=+o[0].parentNode.getAttribute("listcolumn")-1;else e.parentsUntil&&(u=e.parentsUntil(".jstree","ul").length);var d=u?"style='margin-left:"+18*u+"px;'":"";switch(a.prepend("<ins class='jstree-icon omnis-tree-button' tabindex='-1' "+d+">"+c+"</ins>"),-1===e&&(e=this.get_container(),"before"===i&&(i="first"),"after"===i&&(i="last")),i){case"before":e.before(a),o=this._get_parent(e);break;case"after":e.after(a),o=this._get_parent(e);break;case"inside":case"first":e.children("ul").length||e.append("<ul />"),e.children("ul").prepend(a),o=e;break;case"last":e.children("ul").length||e.append("<ul />"),e.children("ul").append(a),o=e;break;default:e.children("ul").length||e.append("<ul />"),i||(i=0),(o=e.children("ul").children("li").eq(i)).length?o.before(a):e.children("ul").append(a),o=e}return-1!==o&&o.get(0)!==this.get_container().get(0)||(o=-1),this.clean_node(o),this.__callback({obj:a,parent:o}),r&&r.call(this,a),a},get_text:function(t){if(!(t=this._get_node(t)).length)return!1;var e=this._get_settings().core.html_titles;return t=t.children("a:eq(0)"),e?((t=t.clone()).children("INS").remove(),t.html()):(t=t.contents().filter((function(){return 3==this.nodeType}))[0]).nodeValue},set_text:function(t,e){if(!(t=this._get_node(t)).length)return!1;if(t=t.children("a:eq(0)"),this._get_settings().core.html_titles){var i=t.children("INS").clone();return t.html(e).prepend(i),this.__callback({obj:t,name:e}),!0}return t=t.contents().filter((function(){return 3==this.nodeType}))[0],this.__callback({obj:t,name:e}),t.nodeValue=e},rename_node:function(t,e){t=this._get_node(t),this.__rollback(),t&&t.length&&this.set_text.apply(this,Array.prototype.slice.call(arguments))&&this.__callback({obj:t,name:e});var i=this.get_container().parents()[0].omnisObject;i.isRenaming=!1},delete_node:function(e){if(!(e=this._get_node(e)).length)return!1;this.__rollback();var i=this._get_parent(e),s=t([]),r=this;return e.each((function(){s=s.add(r._get_prev(this))})),e=e.detach(),-1!==i&&0===i.find("> ul > li").length&&i.removeClass("jstree-open jstree-closed").addClass("jstree-leaf"),this.clean_node(i),this.__callback({obj:e,prev:s,parent:i}),e},prepare_move:function(e,i,s,n,o){var a={};if(a.ot=t.jstree._reference(e)||this,a.o=a.ot._get_node(e),a.r=-1===i?-1:this._get_node(i),a.p=void 0===s||!1===s?"last":s,!o&&r.o&&r.o[0]===a.o[0]&&r.r[0]===a.r[0]&&r.p===a.p)return this.__callback(r),void(n&&n.call(this,r));if(a.ot=t.jstree._reference(a.o)||this,a.rt=t.jstree._reference(a.r)||this,-1!==a.r&&a.r){if(!/^(before|after)$/.test(a.p)&&!this._is_loaded(a.r))return this.load_node(a.r,(function(){this.prepare_move(e,i,s,n,!0)}));switch(a.p){case"before":a.cp=a.r.index(),a.cr=a.rt._get_parent(a.r);break;case"after":a.cp=a.r.index()+1,a.cr=a.rt._get_parent(a.r);break;case"inside":case"first":a.cp=0,a.cr=a.r;break;case"last":a.cp=a.r.find(" > ul > li").length,a.cr=a.r;break;default:a.cp=a.p,a.cr=a.r}}else switch(a.cr=-1,a.p){case"first":case"before":case"inside":a.cp=0;break;case"after":case"last":a.cp=a.rt.get_container().find(" > ul > li").length;break;default:a.cp=a.p}a.np=-1==a.cr?a.rt.get_container():a.cr,a.op=a.ot._get_parent(a.o),a.cop=a.o.index(),-1===a.op&&(a.op=a.ot?a.ot.get_container():this.get_container()),!/^(before|after)$/.test(a.p)&&a.op&&a.np&&a.op[0]===a.np[0]&&a.o.index()<a.cp&&a.cp++,a.or=a.np.find(" > ul > li:nth-child("+(a.cp+1)+")"),r=a,this.__callback(r),n&&n.call(this,r)},check_move:function(){var t=r,e=!0,i=-1===t.r?this.get_container():t.r;return!(!t||!t.o||t.or[0]===t.o[0])&&((!t.op||!t.np||t.op[0]!==t.np[0]||t.cp-1!==t.o.index())&&(t.o.each((function(){if(-1!==i.parentsUntil(".jstree","li").andSelf().index(this))return e=!1,!1})),e))},move_node:function(e,i,s,n,o,a){if(!o)return this.prepare_move(e,i,s,(function(t){this.move_node(t,!1,!1,n,!0,a)}));if(n&&(r.cy=!0),!a&&!this.check_move())return!1;this.__rollback();var l=!1;n?(l=e.o.clone(!0)).find("*[id]").andSelf().each((function(){this.id&&(this.id="copy_"+this.id)})):l=e.o,e.or.length?e.or.before(l):(e.np.children("ul").length||t("<ul />").appendTo(e.np),e.np.children("ul:eq(0)").append(l));try{e.ot.clean_node(e.op),e.rt.clean_node(e.np),e.op.find("> ul > li").length||e.op.removeClass("jstree-open jstree-closed").addClass("jstree-leaf").children("ul").remove()}catch(t){}return n&&(r.cy=!0,r.oc=l),this.__callback(r),r},_get_move:function(){return r}}})}(jQuery),function(t){var e,i,s;t((function(){/msie/.test(navigator.userAgent.toLowerCase())?(i=t('<textarea cols="10" rows="2"></textarea>').css({position:"absolute",top:-1e3,left:0}).appendTo("body"),s=t('<textarea cols="10" rows="2" style="overflow: hidden;"></textarea>').css({position:"absolute",top:-1e3,left:0}).appendTo("body"),e=i.width()-s.width(),i.add(s).remove()):(i=t("<div />").css({width:100,height:100,overflow:"auto",position:"absolute",top:-1e3,left:0}).prependTo("body").append("<div />").find("div").css({width:"100%",height:200}),e=100-i.width(),i.parent().remove())})),t.jstree.plugin("ui",{__init:function(){this.data.ui.selected=t(),this.data.ui.last_selected=!1,this.data.ui.hovered=null,this.data.ui.to_select=this.get_settings().ui.initially_select,this.get_container().delegate("a","click.jstree",t.proxy((function(e){if(e.preventDefault(),!this.get_container().parents()[0].omnisObject.isEnabled())return!1;t(e.currentTarget).hasClass("jstree-loading")||this.select_node(e.currentTarget,!0,e)}),this)).delegate("a","mouseenter.jstree",t.proxy((function(e){t(e.currentTarget).hasClass("jstree-loading")||this.hover_node(e.target,!0)}),this)).delegate("a","mouseleave.jstree",t.proxy((function(e){t(e.currentTarget).hasClass("jstree-loading")||this.dehover_node(e.target)}),this)).bind("reopen.jstree",t.proxy((function(){this.reselect()}),this)).bind("get_rollback.jstree",t.proxy((function(){this.dehover_node(),this.save_selected()}),this)).bind("set_rollback.jstree",t.proxy((function(){this.reselect()}),this)).bind("close_node.jstree",t.proxy((function(e,i){var s=this._get_settings().ui,r=this._get_node(i.rslt.obj),n=r&&r.length?r.children("ul").find("a.jstree-clicked"):t(),o=this;!1!==s.selected_parent_close&&n.length&&n.each((function(){o.deselect_node(this),"select_parent"===s.selected_parent_close&&o.select_node(r)}))}),this)).bind("delete_node.jstree",t.proxy((function(t,e){var i=this._get_settings().ui.select_prev_on_delete,s=this._get_node(e.rslt.obj),r=s&&s.length?s.find("a.jstree-clicked"):[],n=this;r.each((function(){n.deselect_node(this)})),i&&r.length&&e.rslt.prev.each((function(){if(this.parentNode)return n.select_node(this),!1}))}),this)).bind("move_node.jstree",t.proxy((function(t,e){e.rslt.cy&&(e.rslt.oc.find("a.jstree-clicked").removeClass("jstree-clicked"),e.rslt.oc.find("ins.jstree-svg-clicked").removeClass("jstree-svg-clicked"));const i=e.rslt.o;if(i&&i.parentsUntil){const t=i.parentsUntil(".jstree","ul").length-1;i.find("ins").first().css("marginLeft",18*t+"px")}}),this))},defaults:{select_limit:-1,select_multiple_modifier:uagent.search(deviceMacPpc)>-1?"meta":"ctrl",select_range_modifier:"shift",selected_parent_close:"select_parent",selected_parent_open:!0,select_prev_on_delete:!0,disable_selecting_children:!1,initially_select:[]},_fn:{_get_node:function(e,i){if(null==e)return i?this.data.ui.selected:this.data.ui.last_selected;var s=t(e,this.get_container());return s.is(".jstree")||-1==e?-1:!!(s=s.closest("li",this.get_container())).length&&s},_ui_notify:function(t,e){e.selected&&this.select_node(t,!1)},save_selected:function(){var t=this;this.data.ui.to_select=[],this.data.ui.selected.each((function(){this.id&&t.data.ui.to_select.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))})),this.__callback(this.data.ui.to_select)},reselect:function(){var e=this,i=this.data.ui.to_select;i=t.map(t.makeArray(i),(function(t){return"#"+t.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")})),t.each(i,(function(t,i){i&&"#"!==i&&e.select_node(i)})),this.data.ui.selected=this.data.ui.selected.filter((function(){return this.parentNode})),this.__callback()},refresh:function(t){return this.save_selected(),this.__call_old()},hover_node:function(t,e){if(!(t=this._get_node(t)).length)return!1;t.hasClass("jstree-hovered")||this.dehover_node(),this.data.ui.hovered=t.children("a").parent();var i=this.get_container().parents()[0].omnisObject;!i.multisel&&i.keyboardChangesCurrentLine||t.children("a").addClass("jstree-hovered").parent(),t.hoverFromMouseOver=!!e,this._fix_scroll(t),this.__callback({obj:t})},dehover_node:function(){var t,e=this.data.ui.hovered;if(!e||!e.length)return!1;t=e.children("a").removeClass("jstree-hovered").parent(),this.data.ui.hovered[0]===t[0]&&(this.data.ui.hovered=null),this.__callback({obj:e})},select_node:function(t,e,i,s){if(-1==(t=this._get_node(t))||!t||!t.length)return!1;const r=this.get_container().parents()[0].omnisObject;var n=this._get_settings().ui,o=i?i.keyCode?i.keyCode:i.which:null,a=o&&65===o&&!1!==n.select_multiple_modifier&&i[n.select_multiple_modifier+"Key"],l=i&&i.keyCode&&32===i.keyCode,h=!r.multisel,c=!h&&("on"==n.select_multiple_modifier||!1!==n.select_multiple_modifier&&i&&i[n.select_multiple_modifier+"Key"]),u=o&&(35===o||36===o)&&c,d=!h&&(!1!==n.select_range_modifier&&i&&i[n.select_range_modifier+"Key"]&&(this.data.ui.last_selected&&this.data.ui.last_selected[0]!==t[0]||u)||a),p=this.is_selected(t),m=!0,f=this;if(e){if(n.disable_selecting_children&&c&&(t.parentsUntil(".jstree","li").children("a.jstree-clicked").length||t.children("ul").find("a.jstree-clicked:eq(0)").length))return!1;switch(m=!1,!0){case d:if(!this.data.ui.last_selected){var g=this.get_container().find("> ul > li:first-child");this.hover_node(g),this.select_node(g)}this.data.ui.last_selected.addClass("jstree-last-selected");for(var v=t.parentsUntil(".omnis-tree","div").find("li"),b=0;b<v.length;b++){if(t[0]===v[b])var y=b;if(this.data.ui.last_selected[0]===v[b])var C=b}const e=t;(t=v.filter((function(){if(C<y)var t=C,e=y;else t=y,e=C;for(b=t;b<e+1;b++)if(this===v[b])return!0;return!1}))).contextObj=e,-1==n.select_limit||t.length<n.select_limit?(this.data.ui.last_selected.removeClass("jstree-last-selected"),this.data.ui.selected.each((function(){this===f.data.ui.last_selected[0]||l||u||s||(r.preventClickEvent=!0,f.deselect_node(this),r.preventClickEvent=!1)})),p=!1,m=!0):m=!1;break;case s:p=!1,m=!0;break;case p&&!c:this.deselect_all(),p=!1,m=!0;break;case l:-1==n.select_limit||t.length<n.select_limit||this.deselect_all(),m=!0;break;case!p&&!c:(-1==n.select_limit||n.select_limit>0)&&this.deselect_all(),m=!0;break;case p&&c&&!s:this.deselect_node(t);break;case!p&&c:(-1==n.select_limit||this.data.ui.selected.length+1<=n.select_limit)&&(m=!0)}}m&&!p&&(d||(this.data.ui.last_selected=t),t.children("a").addClass("jstree-clicked").children("ins").addClass("jstree-svg-clicked"),t.children("ins").addClass("jstree-svg-clicked"),n.selected_parent_open&&t.parents(".jstree-closed").each((function(){f.open_node(this,!1,!0)})),this.data.ui.selected=this.data.ui.selected.add(t),this._fix_scroll(t.eq(0)),this.__callback({obj:t,e:i}))},_fix_scroll:function(t){var i,s=this.get_container()[0];if(s.scrollHeight>s.offsetHeight){if(!(t=this._get_node(t))||-1===t||!t.length||!t.is(":visible"))return;(i=t.offset().top-this.get_container().offset().top)<0&&(s.scrollTop=s.scrollTop+i-1),i+this.data.core.li_height+(s.scrollWidth>s.offsetWidth?e:0)>s.offsetHeight&&(s.scrollTop=s.scrollTop+(i-s.offsetHeight+this.data.core.li_height+1+(s.scrollWidth>s.offsetWidth?e:0)))}},scrollObjToView:function(t){var e=this.get_container()[0];if((t=this._get_node(t))&&-1!==t&&t.length&&t.is(":visible")){var i=t[0].offsetTop,s=t[0].offsetHeight,r=e.parentNode.scrollTop,n=e.parentNode.clientHeight;i<r?e.parentNode.scrollTop=i:(i>=r+n||i+s-1>=r+n)&&(e.parentNode.scrollTop=i-n+s)}},deselect_node:function(t){if(!(t=this._get_node(t)).length)return!1;this.is_selected(t)&&(t.children("a").removeClass("jstree-clicked").children("ins").removeClass("jstree-svg-clicked"),t.children("ins").removeClass("jstree-svg-clicked"),this.data.ui.selected=this.data.ui.selected.not(t),this.data.ui.last_selected.get(0)===t.get(0)&&(this.data.ui.last_selected=this.data.ui.selected.eq(0)),this.__callback({obj:t}))},toggle_select:function(t){if(!(t=this._get_node(t)).length)return!1;this.is_selected(t)?this.deselect_node(t):this.select_node(t)},is_selected:function(t){return this.data.ui.selected.index(this._get_node(t))>=0},get_selected:function(e){return e?t(e).find("a.jstree-clicked").parent():this.data.ui.selected},deselect_all:function(e){var i=e?t(e).find("a.jstree-clicked").parent():this.get_container().find("a.jstree-clicked").parent();i.children("a.jstree-clicked").removeClass("jstree-clicked").children("ins.jstree-svg-clicked").removeClass("jstree-svg-clicked"),i.children("ins.jstree-svg-clicked").removeClass("jstree-svg-clicked"),this.data.ui.selected=t([]),this.data.ui.last_selected=!1,this.__callback({obj:i})}}}),t.jstree.defaults.plugins.push("ui")}(jQuery),function(t){t.jstree.plugin("crrm",{__init:function(){this.get_container().bind("move_node.jstree",t.proxy((function(t,e){if(this._get_settings().crrm.move.open_onmove){var i=this;e.rslt.np.parentsUntil(".jstree").andSelf().filter(".jstree-closed").each((function(){i.open_node(this,!1,!0)}))}}),this))},defaults:{input_width_limit:200,move:{always_copy:!1,open_onmove:!0,default_position:"last",check_move:function(t){return!0}}},_fn:{_show_input:function(e,i){for(var s=(e=this._get_node(e))[0];s&&!s.omnisObject;)s=s.parentNode;var r=s&&s.omnisObject?s.omnisObject.mFontHeight:this.data.core.li_height-2,n=this._get_settings().core.rtl,o=this._get_settings().crrm.input_width_limit,a=e.children("ins").width(),l=e.find("> a:visible > ins").width()*e.find("> a:visible > ins").length,h=this.get_text(e),c=t("<div />",{css:{position:"absolute",top:"-200px",left:n?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),u=e.css("position","relative").append(t("<input />",{value:h,class:"jstree-rename-input",css:{padding:"0",border:"1px solid silver",position:"absolute",left:n?"auto":a+l+4+"px",right:n?a+l+4+"px":"auto",top:"0px",height:r+"px",lineHeight:r+"px",width:"150px",fontFamily:s&&s.omnisObject?s.omnisObject.clientElem.style.fontFamily:"",fontSize:s&&s.omnisObject?s.omnisObject.clientElem.style.fontSize:"",fontWeight:s&&s.omnisObject?s.omnisObject.clientElem.style.fontWeight:"",fontStyle:s&&s.omnisObject?s.omnisObject.clientElem.style.fontStyle:"",textDecoration:s&&s.omnisObject?s.omnisObject.clientElem.style.textDecoration:""},blur:t.proxy((function(){var t=e.children(".jstree-rename-input"),s=t.val();""===s&&(s=h),c.remove(),t.remove(),this.set_text(e,h),this.rename_node(e,s),i.call(this,e,s,h),e.css("position","")}),this),keyup:function(t){var e=t.keyCode||t.which;if(27==e)return this.value=h,void this.blur();13!=e?u.width(Math.min(c.text("pW"+this.value).width(),o)):this.blur()},keypress:function(t){if(13==(t.keyCode||t.which))return!1}})).children(".jstree-rename-input");this.set_text(e,""),c.css({fontFamily:u.css("fontFamily")||"",fontSize:u.css("fontSize")||"",fontWeight:u.css("fontWeight")||"",fontStyle:u.css("fontStyle")||"",fontStretch:u.css("fontStretch")||"",fontVariant:u.css("fontVariant")||"",letterSpacing:u.css("letterSpacing")||"",wordSpacing:u.css("wordSpacing")||""}),u.width(Math.min(c.text("pW"+u[0].value).width(),o))[0].select()},rename:function(t){t=this._get_node(t),this.__rollback();var e=this.__callback;this._show_input(t,(function(t,i,s){e.call(this,{obj:t,new_name:i,old_name:s})}))},create:function(e,i,s,r,n){var o,a=this;return(e=this._get_node(e))||(e=-1),this.__rollback(),o=this.create_node(e,i,s,(function(e){var i=this._get_parent(e),s=t(e).index();r&&r.call(this,e),i.length&&i.hasClass("jstree-closed")&&this.open_node(i,!1,!0),n?a.__callback({obj:e,name:this.get_text(e),parent:i,position:s}):this._show_input(e,(function(t,e,r){a.__callback({obj:t,name:e,parent:i,position:s})}))})),o},remove:function(t){t=this._get_node(t,!0);var e=this._get_parent(t),i=this._get_prev(t);this.__rollback(),!1!==(t=this.delete_node(t))&&this.__callback({obj:t,prev:i,parent:e})},check_move:function(){return!!this.__call_old()&&!!this._get_settings().crrm.move.check_move.call(this,this._get_move())},move_node:function(t,e,i,s,r,n){var o=this._get_settings().crrm.move;if(!r)return void 0===i&&(i=o.default_position),"inside"!==i||o.default_position.match(/^(before|after)$/)||(i=o.default_position),this.__call_old(!0,t,e,i,s,!1,n);(!0===o.always_copy||"multitree"===o.always_copy&&t.rt.get_index()!==t.ot.get_index())&&(s=!0),this.__call_old(!0,t,e,i,s,!0,n)},cut:function(t){if(!(t=this._get_node(t,!0))||!t.length)return!1;this.data.crrm.cp_nodes=!1,this.data.crrm.ct_nodes=t,this.__callback({obj:t})},copy:function(t){if(!(t=this._get_node(t,!0))||!t.length)return!1;this.data.crrm.ct_nodes=!1,this.data.crrm.cp_nodes=t,this.__callback({obj:t})},paste:function(t){if(!(t=this._get_node(t))||!t.length)return!1;var e=this.data.crrm.ct_nodes?this.data.crrm.ct_nodes:this.data.crrm.cp_nodes;if(!this.data.crrm.ct_nodes&&!this.data.crrm.cp_nodes)return!1;this.data.crrm.ct_nodes&&(this.move_node(this.data.crrm.ct_nodes,t),this.data.crrm.ct_nodes=!1),this.data.crrm.cp_nodes&&this.move_node(this.data.crrm.cp_nodes,t,!1,!0),this.__callback({obj:t,nodes:e})}}})}(jQuery),function(t){t.jstree._themes=!1,t.jstree.plugin("themes",{__init:function(){this.get_container().bind("init.jstree",t.proxy((function(){var t=this._get_settings().themes;this.data.themes.dots=t.dots,this.data.themes.icons=t.icons,this.set_theme(t.theme,t.url)}),this)).bind("loaded.jstree",t.proxy((function(){this.data.themes.dots?this.show_dots():this.hide_dots(),this.data.themes.icons?this.show_icons():this.hide_icons()}),this))},defaults:{theme:"default",url:!1,dots:!0,icons:!0},_fn:{set_theme:function(t,e){if(!t)return!1;this.data.themes.theme!=t&&(this.get_container().removeClass("jstree-"+this.data.themes.theme),this.data.themes.theme=t),this.get_container().addClass("jstree-"+t),this.data.themes.dots?this.show_dots():this.hide_dots(),this.data.themes.icons?this.show_icons():this.hide_icons(),this.__callback()},get_theme:function(){return this.data.themes.theme},show_dots:function(){this.data.themes.dots=!0,this.get_container().children("ul").removeClass("jstree-no-dots")},hide_dots:function(){this.data.themes.dots=!1,this.get_container().children("ul").addClass("jstree-no-dots")},toggle_dots:function(){this.data.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this.data.themes.icons=!0,this.get_container().children("ul").removeClass("jstree-no-icons")},hide_icons:function(){this.data.themes.icons=!1,this.get_container().children("ul").addClass("jstree-no-icons")},toggle_icons:function(){this.data.themes.icons?this.hide_icons():this.show_icons()}}}),t((function(){!1===t.jstree._themes&&t("script").each((function(){var e=this.src.toString().toLowerCase(),i=e.indexOf("/scripts/");if(-1!=i)return t.jstree._themes=e.substr(0,i)+"/css/ctl_tree/",!1})),!1===t.jstree._themes&&(t.jstree._themes="../css/ctl_tree/")})),t.jstree.defaults.plugins.push("themes")}(jQuery),function(t){var e=[];t.jstree.plugin("hotkeys",{__init:function(){if(void 0===t.hotkeys)throw"jsTree hotkeys: jQuery hotkeys plugin not included.";if(!this.data.ui)throw"jsTree hotkeys: jsTree UI plugin not included.";t.each(this._get_settings().hotkeys,(function(i,s){!1!==s&&-1==t.inArray(i,e)&&(t(document).bind("keydown",i,(function(e){return function(e,i){var s,r=t.jstree._focused();if(r&&r.data&&r.data.hotkeys&&r.data.hotkeys.enabled&&(s=r._get_settings().hotkeys[e]))return s.call(r,i)}(i,e)})),e.push(i))})),this.get_container().bind("lock.jstree",t.proxy((function(){this.data.hotkeys.enabled&&(this.data.hotkeys.enabled=!1,this.data.hotkeys.revert=!0)}),this)).bind("unlock.jstree",t.proxy((function(){this.data.hotkeys.revert&&(this.data.hotkeys.enabled=!0)}),this)),this.enable_hotkeys()},defaults:{up:function(){var t=this.data.ui.hovered||this.data.ui.last_selected||-1,e=this._get_prev(t);this.hover_node(e);var i=this.get_container().parents()[0].omnisObject;return e&&!i.multisel&&i.keyboardChangesCurrentLine&&this.select_node(e.children("a:eq(0)")[0],!0,event),this.scrollObjToView(e),!1},"ctrl+up":function(){var t=this.data.ui.hovered||this.data.ui.last_selected||-1,e=this._get_prev(t);this.hover_node(e);var i=this.get_container().parents()[0].omnisObject;return e&&!i.multisel&&i.keyboardChangesCurrentLine&&this.select_node(e.children("a:eq(0)")[0],!0,event),this.scrollObjToView(e),!1},"meta+up":function(){var t=this.data.ui.hovered||this.data.ui.last_selected||-1,e=this._get_prev(t);this.hover_node(e);var i=this.get_container().parents()[0].omnisObject;return e&&!i.multisel&&i.keyboardChangesCurrentLine&&this.select_node(e.children("a:eq(0)")[0],!0,event),this.scrollObjToView(e),!1},"shift+up":function(t){if(!this.get_container().parents()[0].omnisObject.isEnabled())return!1;var e=this.data.ui.hovered||this.data.ui.last_selected||-1,i=this._get_prev(e);this.hover_node(i);var s=this.get_container().parents()[0].omnisObject;return i&&!s.multisel&&s.keyboardChangesCurrentLine?(this.select_node(i.children("a:eq(0)")[0],!0,t),this.scrollObjToView(i)):(this.is_selected(e)||this.select_node(e.children("a:eq(0)")[0],!0,t),i&&(this.select_node(i.children("a:eq(0)")[0],!0,t),this.scrollObjToView(i))),!1},down:function(){var t=this.data.ui.hovered||this.data.ui.last_selected||-1,e=this._get_next(t);this.hover_node(e);var i=this.get_container().parents()[0].omnisObject;return e&&!i.multisel&&i.keyboardChangesCurrentLine&&this.select_node(e.children("a:eq(0)")[0],!0,event),this.scrollObjToView(e),!1},"ctrl+down":function(){var t=this.data.ui.hovered||this.data.ui.last_selected||-1,e=this._get_next(t);this.hover_node(e);var i=this.get_container().parents()[0].omnisObject;return e&&!i.multisel&&i.keyboardChangesCurrentLine&&this.select_node(e.children("a:eq(0)")[0],!0,event),this.scrollObjToView(e),!1},"meta+down":function(){var t=this.data.ui.hovered||this.data.ui.last_selected||-1,e=this._get_next(t);this.hover_node(e);var i=this.get_container().parents()[0].omnisObject;return e&&!i.multisel&&i.keyboardChangesCurrentLine&&this.select_node(e.children("a:eq(0)")[0],!0,event),this.scrollObjToView(e),!1},"shift+down":function(t){if(!this.get_container().parents()[0].omnisObject.isEnabled())return!1;var e=this.data.ui.hovered||this.data.ui.last_selected||-1,i=this._get_next(e);if(i&&i[0]&&"li"===i[0].tagName.toLowerCase()){this.hover_node(i);var s=this.get_container().parents()[0].omnisObject;!s.multisel&&s.keyboardChangesCurrentLine||this.is_selected(e)||this.select_node(e.children("a:eq(0)")[0],!0,t),this.select_node(i.children("a:eq(0)")[0],!0,t),this.scrollObjToView(i)}return!1},home:function(){var t=this.get_container().find("> ul > li:first-child");this.hover_node(t);var e=this.get_container().parents()[0].omnisObject;return t&&!e.multisel&&e.keyboardChangesCurrentLine&&this.select_node(t.children("a:eq(0)")[0],!0,event),this.scrollObjToView(t),!1},"ctrl+shift+home":function(t){var e=this.get_container().parents()[0].omnisObject;if(!e.multisel||!e.isEnabled())return!1;var i=this._get_settings().ui,s=this.data.ui.hovered||this.data.ui.last_selected||-1,r=this.get_container().find("> ul > li:first-child");return-1===i.select_limit||s.length<i.select_limit?(this.select_node(s.children("a:eq(0)")[0],!0,null,!0),this.select_node(r.children("a:eq(0)")[0],!0,t)):this.hover_node(r),this.scrollObjToView(r),!1},"meta+shift+home":function(t){var e=this.get_container().parents()[0].omnisObject;if(!e.multisel||!e.isEnabled())return!1;var i=this._get_settings().ui,s=this.data.ui.hovered||this.data.ui.last_selected||-1,r=this.get_container().find("> ul > li:first-child");return-1===i.select_limit||s.length<i.select_limit?(this.select_node(s.children("a:eq(0)")[0],!0,null,!0),this.select_node(r.children("a:eq(0)")[0],!0,t)):this.hover_node(r),this.scrollObjToView(r),!1},end:function(){for(var e=this.get_container().find("> ul > li:last-child"),i=0;i++<50&&!t(e).hasClass("jstree-closed")&&!t(e).hasClass("jstree-leaf");)e=e.find("> ul > li:last-child");this.hover_node(e);var s=this.get_container().parents()[0].omnisObject;return e&&!s.multisel&&s.keyboardChangesCurrentLine&&this.select_node(e.children("a:eq(0)")[0],!0,event),this.scrollObjToView(e),!1},"ctrl+shift+end":function(e){var i=this.get_container().parents()[0].omnisObject;if(!i.multisel||!i.isEnabled())return!1;for(var s=this._get_settings().ui,r=this.data.ui.hovered||this.data.ui.last_selected||-1,n=this.get_container().find("> ul > li:last-child"),o=0;o++<50&&!t(n).hasClass("jstree-closed")&&!t(n).hasClass("jstree-leaf");)n=n.find("> ul > li:last-child");return-1===s.select_limit||r.length<s.select_limit?(this.select_node(r.children("a:eq(0)")[0],!0,null,!0),this.select_node(n.children("a:eq(0)")[0],!0,e)):this.hover_node(n),this.scrollObjToView(n),!1},"meta+shift+end":function(e){var i=this.get_container().parents()[0].omnisObject;if(!i.multisel||!i.isEnabled())return!1;for(var s=this._get_settings().ui,r=this.data.ui.hovered||this.data.ui.last_selected||-1,n=this.get_container().find("> ul > li:last-child"),o=0;o++<50&&!t(n).hasClass("jstree-closed")&&!t(n).hasClass("jstree-leaf");)n=n.find("> ul > li:last-child");return-1===s.select_limit||r.length<s.select_limit?(this.select_node(r.children("a:eq(0)")[0],!0,null,!0),this.select_node(n.children("a:eq(0)")[0],!0,e)):this.hover_node(n),this.scrollObjToView(n),!1},left:function(){if(!this.get_container().parents()[0].omnisObject.isEnabled())return!1;var t=this.data.ui.hovered||this.data.ui.last_selected;if(t)if(t.hasClass("jstree-open"))this.close_node(t);else{var e=this._get_prev(t);this.hover_node(e);var i=this.get_container().parents()[0].omnisObject;e&&!i.multisel&&i.keyboardChangesCurrentLine&&this.select_node(e.children("a:eq(0)")[0],!0,event)}return this.scrollObjToView(t),!1},right:function(){if(!this.get_container().parents()[0].omnisObject.isEnabled())return!1;var t=this.data.ui.hovered||this.data.ui.last_selected;if(t&&t.length)if(t.hasClass("jstree-closed"))this.open_node(t);else{var e=this._get_next(t);this.hover_node(e);var i=this.get_container().parents()[0].omnisObject;e&&!i.multisel&&i.keyboardChangesCurrentLine&&this.select_node(e.children("a:eq(0)")[0],!0,event)}return this.scrollObjToView(t),!1},return:function(){if(!this.get_container().parents()[0].omnisObject.isEnabled())return!1;var t=this.data.ui.hovered||this.data.ui.last_selected;return t&&t.length&&(t.hasClass("jstree-closed")?this.open_node(t):this.data.ui.hovered&&(this.data.checkbox||this.deselect_all(),this.data.ui.hovered.children("a:eq(0)").click())),!1},space:function(t){var e=this.get_container().parents()[0].omnisObject;if(!e.isEnabled())return!1;if(this.data.checkbox)this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").click();else if(this.data.ui.hovered){var i=this.data.ui.hovered||this.data.ui.last_selected;e.multisel&&i.children("a:eq(0)").hasClass("jstree-clicked")?this.deselect_node(i.children("a:eq(0)")[0],!0,t):this.select_node(i.children("a:eq(0)")[0],!0,t)}return!1},"ctrl+space":function(t){if(!this.get_container().parents()[0].omnisObject.isEnabled())return!1;if(this.data.checkbox)this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").click();else if(this.data.ui.hovered){this.deselect_all();var e=this.data.ui.hovered||this.data.ui.last_selected;this.select_node(e.children("a:eq(0)")[0],!0,t)}return!1},"meta+space":function(t){if(!this.get_container().parents()[0].omnisObject.isEnabled())return!1;if(this.data.checkbox)this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").click();else if(this.data.ui.hovered){this.deselect_all();var e=this.data.ui.hovered||this.data.ui.last_selected;this.select_node(e.children("a:eq(0)")[0],!0,t)}return!1},"shift+space":function(t){if(!this.get_container().parents()[0].omnisObject.isEnabled())return!1;if(this.data.ui.hovered){var e=this.data.ui.hovered||this.data.ui.last_selected;e.children("a:eq(0)").hasClass("jstree-clicked")?this.deselect_node(e.children("a:eq(0)")[0],!0,t):this.select_node(e.children("a:eq(0)")[0],!0,t)}return!1},"ctrl+a":function(e){if(!this.get_container().parents()[0].omnisObject.isEnabled())return!1;var i=this._get_settings().ui,s=this.data.ui.hovered||this.data.ui.last_selected||-1,r=this.get_container().find("> ul > li:first-child"),n=this.get_container().find("> ul > li:last-child");if(n.parentsUntil(".omnis-tree","div").find("a").not(".jstree-clicked").length>0){for(var o=0;o++<50&&!t(n).hasClass("jstree-closed")&&!t(n).hasClass("jstree-leaf");)n=n.find("> ul > li:last-child");(-1===i.select_limit||s.length<i.select_limit)&&(this.select_node(r.children("a:eq(0)")[0],!0,null,!0),this.select_node(n.children("a:eq(0)")[0],!0,e))}else this.deselect_all();return e.preventDefault?e.preventDefault():e.returnValue=!1,!1},"meta+a":function(e){if(!this.get_container().parents()[0].omnisObject.isEnabled())return!1;var i=this._get_settings().ui,s=this.data.ui.hovered||this.data.ui.last_selected||-1,r=this.get_container().find("> ul > li:first-child"),n=this.get_container().find("> ul > li:last-child");if(n.parentsUntil(".omnis-tree","div").find("a").not(".jstree-clicked").length>0){for(var o=0;o++<50&&!t(n).hasClass("jstree-closed")&&!t(n).hasClass("jstree-leaf");)n=n.find("> ul > li:last-child");(-1===i.select_limit||s.length<i.select_limit)&&(this.select_node(r.children("a:eq(0)")[0],!0,null,!0),this.select_node(n.children("a:eq(0)")[0],!0,e))}else this.deselect_all();return e.preventDefault?e.preventDefault():e.returnValue=!1,!1},f2:function(){var t=this.get_container().parents()[0].omnisObject;if(!t.isEnabled()||!t.canRenameByKeypress())return!1;t.isRenaming=!0,this.rename(this.data.ui.hovered||this.data.ui.last_selected)},del:function(){if(!this.get_container().parents()[0].omnisObject.isEnabled())return!1;this.remove(this.data.ui.hovered||this._get_node(null))}},_fn:{enable_hotkeys:function(){this.data.hotkeys.enabled=!0},disable_hotkeys:function(){this.data.hotkeys.enabled=!1}}})}(jQuery),function(t){t.jstree.plugin("json_data",{__init:function(){this._get_settings().json_data.progressive_unload&&this.get_container().bind("after_close.jstree",(function(t,e){e.rslt.obj.children("ul").remove()}))},defaults:{data:!1,ajax:!1,correct_state:!0,progressive_render:!1,progressive_unload:!1},_fn:{load_node:function(t,e,i){var s=this;this.load_node_json(t,(function(){s.__callback({obj:s._get_node(t)}),e.call(this)}),i)},_is_loaded:function(e){var i=this._get_settings().json_data;return-1==(e=this._get_node(e))||!e||!i.ajax&&!i.progressive_render&&!t.isFunction(i.data)||e.is(".jstree-open, .jstree-leaf")||e.children("ul").children("li").length>0},refresh:function(e){e=this._get_node(e);var i=this._get_settings().json_data;return e&&-1!==e&&i.progressive_unload&&(t.isFunction(i.data)||i.ajax)&&e.removeData("jstree_children"),this.__call_old()},load_node_json:function(e,i,s){var r,n=this.get_settings().json_data,o=function(){},a=function(){};if((e=this._get_node(e))&&-1!==e&&(n.progressive_render||n.progressive_unload)&&!e.is(".jstree-open, .jstree-leaf")&&0===e.children("ul").children("li").length&&e.data("jstree_children"))return(r=this._parse_json(e.data("jstree_children"),e))&&(e.append(r),n.progressive_unload||e.removeData("jstree_children")),this.clean_node(e),void(i&&i.call(this));if(e&&-1!==e){if(e.data("jstree_is_loading"))return;e.data("jstree_is_loading",!0)}switch(!0){case!n.data&&!n.ajax:throw"Neither data nor ajax settings supplied.";case t.isFunction(n.data):n.data.call(this,e,t.proxy((function(t){(t=this._parse_json(t,e))?(-1!==e&&e?(e.append(t).children("a.jstree-loading").removeClass("jstree-loading"),e.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(t.children()),this.clean_node(e),i&&(i.call(this),e&&e.data&&this.get_container()[0].parentNode.omnisObject.loadNodeFinished(e.data("ident")))):(-1!==e&&e?(e.children("a.jstree-loading").removeClass("jstree-loading"),e.removeData("jstree_is_loading"),n.correct_state&&this.correct_state(e)):n.correct_state&&this.get_container().children("ul").empty(),s&&s.call(this))}),this));break;case!!n.data&&!n.ajax||!!n.data&&!!n.ajax&&(!e||-1===e):e&&-1!=e||((r=this._parse_json(n.data,e))?(this.get_container().children("ul").empty().append(r.children()),this.clean_node()):n.correct_state&&this.get_container().children("ul").empty()),i&&i.call(this);break;case!n.data&&!!n.ajax||!!n.data&&!!n.ajax&&e&&-1!==e:o=function(t,i,r){var o=this.get_settings().json_data.ajax.error;o&&o.call(this,t,i,r),-1!=e&&e.length?(e.children("a.jstree-loading").removeClass("jstree-loading"),e.removeData("jstree_is_loading"),"success"===i&&n.correct_state&&this.correct_state(e)):"success"===i&&n.correct_state&&this.get_container().children("ul").empty(),s&&s.call(this)},a=function(s,r,a){var l=this.get_settings().json_data.ajax.success;if(l&&(s=l.call(this,s,r,a)||s),""===s||s&&s.toString&&""===s.toString().replace(/^[\s\n]+$/,"")||!t.isArray(s)&&!t.isPlainObject(s))return o.call(this,a,r,"");(s=this._parse_json(s,e))?(-1!==e&&e?(e.append(s).children("a.jstree-loading").removeClass("jstree-loading"),e.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(s.children()),this.clean_node(e),i&&i.call(this)):-1!==e&&e?(e.children("a.jstree-loading").removeClass("jstree-loading"),e.removeData("jstree_is_loading"),n.correct_state&&(this.correct_state(e),i&&i.call(this))):n.correct_state&&(this.get_container().children("ul").empty(),i&&i.call(this))},n.ajax.context=this,n.ajax.error=o,n.ajax.success=a,n.ajax.dataType||(n.ajax.dataType="json"),t.isFunction(n.ajax.url)&&(n.ajax.url=n.ajax.url.call(this,e)),t.isFunction(n.ajax.data)&&(n.ajax.data=n.ajax.data.call(this,e)),t.ajax(n.ajax)}},_parse_json:function(e,i,s,r){var n,o,a,l,h,c=!1,u=this._get_settings(),d=u.json_data,p=u.core.html_titles,m=this.get_container().parents()[0].omnisObject,f=m.getSVGArrowHTML();if(r=r||0,!e)return c;if(d.progressive_unload&&i&&-1!==i&&i.data("jstree_children",c),t.isArray(e)){if(c=t(),!e.length)return!1;for(o=0,a=e.length;o<a;o++)(n=this._parse_json(e[o],i,!0,r)).length&&(c=c.add(n))}else{if("string"==typeof e&&(e={data:e}),!e.data&&""!==e.data)return c;if(c=t("<li />"),e.attr&&c.attr(e.attr),e.metadata&&c.data(e.metadata),c.addClass("noFocus"),e.state&&c.addClass("jstree-"+e.state),t.isArray(e.data)||(n=e.data,e.data=[],e.data.push(n)),t.each(e.data,(function(i,s){n=t("<a />"),t.isFunction(s)&&(s=s.call(this,e)),"string"==typeof s?n.attr("href","#")[p?"html":"text"](s):(s.attr||(s.attr={}),s.attr.href||(s.attr.href="#"),n.attr(s.attr)[p?"html":"text"](s.title),s.language&&n.addClass(s.language)),n.prepend("<ins class='jstree-icon' style='margin-top:0;' tabindex='-1'></ins>");const r=m.getSVGIconData(e.attr.rel);r?jIcons.replaceOrAddToElem(n.children("ins")[0],r):(!s.icon&&e.icon&&(s.icon=e.icon),s.icon&&(-1===s.icon.indexOf("/")?n.children("ins").addClass(s.icon):n.children("ins").css("background","url('"+s.icon+"') center center no-repeat").css("backgroundSize",jIcons.getIconBackSize(s.icon)))),n[0].tabIndex=-1,c.append(n)})),n[0]&&n[0].parentNode&&n[0].parentNode.hasAttribute("listcolumn"))var g=+n[0].parentNode.getAttribute("listcolumn")-1;else g=i.parentsUntil?Math.max(i.parentsUntil(".jstree","ul").length,r):r;var v=g?"style='margin-left:"+18*g+"px;'":"";c.prepend("<ins class='jstree-icon omnis-tree-button' tabindex='-1' "+v+">"+f+"</ins>"),e.children&&(d.progressive_render&&"open"!==e.state?c.addClass("jstree-closed").data("jstree_children",e.children):(d.progressive_unload&&c.data("jstree_children",e.children),t.isArray(e.children)&&e.children.length&&(n=this._parse_json(e.children,i,!0,g+1)).length&&((h=t("<ul />")).append(n),c.append(h))))}return s||((l=t("<ul />")).append(c),c=l),c},get_json:function(e,i,s,r){var n,o,a,l,h,c,u=[],d=this._get_settings(),p=this;return(e=this._get_node(e))&&-1!==e||(e=this.get_container().find("> ul > li")),i=t.isArray(i)?i:["id","class"],!r&&this.data.types&&i.push(d.types.type_attr),s=t.isArray(s)?s:[],e.each((function(){a=t(this),n={data:[]},i.length&&(n.attr={}),t.each(i,(function(t,e){(o=a.attr(e))&&o.length&&o.replace(/jstree[^ ]*/gi,"").length&&(n.attr[e]=(" "+o).replace(/ jstree[^ ]*/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,""))})),a.hasClass("jstree-open")&&(n.state="open"),a.hasClass("jstree-closed")&&(n.state="closed"),a.data()&&(n.metadata=a.data()),(l=a.children("a")).each((function(){h=t(this),s.length||-1!==t.inArray("languages",d.plugins)||h.children("ins").get(0).style.backgroundImage.length||h.children("ins").get(0).className&&h.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").length?(c=!1,-1!==t.inArray("languages",d.plugins)&&t.isArray(d.languages)&&d.languages.length&&t.each(d.languages,(function(t,e){if(h.hasClass(e))return c=e,!1})),o={attr:{},title:p.get_text(h,c)},t.each(s,(function(t,e){o.attr[e]=(" "+(h.attr(e)||"")).replace(/ jstree[^ ]*/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,"")})),-1!==t.inArray("languages",d.plugins)&&t.isArray(d.languages)&&d.languages.length&&t.each(d.languages,(function(t,e){if(h.hasClass(e))return o.language=e,!0})),h.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").replace(/^\s+$/gi,"").length&&(o.icon=h.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,"")),h.children("ins").get(0).style.backgroundImage.length&&(o.icon=h.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")",""))):o=p.get_text(h),l.length>1?n.data.push(o):n.data=o})),(a=a.find("> ul > li")).length&&(n.children=p.get_json(a,i,s,!0)),u.push(n)})),u}}})}(jQuery),function(t){t.jstree.plugin("checkbox",{__init:function(){this.data.checkbox.noui=this._get_settings().checkbox.override_ui,this.data.ui&&this.data.checkbox.noui&&(this.select_node=this.deselect_node=this.deselect_all=t.noop,this.get_selected=this.get_checked),this.get_container().bind("open_node.jstree create_node.jstree clean_node.jstree refresh.jstree",t.proxy((function(t,e){this._prepare_checkboxes(e.rslt.obj)}),this)).bind("loaded.jstree",t.proxy((function(t){this._prepare_checkboxes()}),this)).delegate(this.data.ui&&this.data.checkbox.noui?"a":"ins.jstree-checkbox","click.jstree",t.proxy((function(t){return t.preventDefault(),this.get_container().parents()[0].omnisObject.isEnabled()?(this._get_node(t.target).hasClass("jstree-checked")?this.uncheck_node(t.target):this.check_node(t.target),this.data.ui&&this.data.checkbox.noui?(this.save_selected(),void(this.data.cookies&&this.save_cookie("select_node"))):(t.stopImmediatePropagation(),!1)):(t.stopImmediatePropagation(),!1)}),this))},defaults:{override_ui:!1,two_state:!1,real_checkboxes:!1,checked_parent_open:!0,real_checkboxes_names:function(t){return["check_"+(t[0].id||Math.ceil(1e4*Math.random())),1]}},__destroy:function(){this.get_container().find("input.jstree-real-checkbox").removeClass("jstree-real-checkbox").end().find("ins.jstree-checkbox").remove()},_fn:{_checkbox_notify:function(t,e){e.checked&&this.check_node(t,!1)},_prepare_checkboxes:function(e){e=e&&-1!=e?this._get_node(e):this.get_container().find("> ul > li");var i=this.get_container().parents()[0].omnisObject;if(!1!==e){var s,r,n=this,o=this._get_settings().checkbox.two_state,a=this._get_settings().checkbox.real_checkboxes,l=this._get_settings().checkbox.real_checkboxes_names;e.each((function(){r=t(this),s=r.is("li")&&(r.hasClass("jstree-checked")||a&&r.children(":checked").length)?"jstree-checked":"jstree-unchecked",r.find("li").andSelf().each((function(){var e,r=t(this),h=document.createElement("ins");h.style.position="relative",h.className="jstree-checkbox omnis-checkbox";var c=r.children("a"+(n.data.languages?"":":eq(0)"));i.addCheckboxElem(h,!1,c.text()),c.not(":has(.jstree-checkbox)").prepend(h).parent().not(".jstree-checked, .jstree-unchecked").addClass(o?"jstree-unchecked":s),a&&(r.children(":checkbox").length?r.children(":checkbox").addClass("jstree-real-checkbox"):(e=l.call(n,r),r.prepend("<input type='checkbox' class='jstree-real-checkbox' id='"+e[0]+"' name='"+e[0]+"' value='"+e[1]+"' />"))),o?(r.hasClass("jstree-checked")||r.children(":checked").length)&&r.addClass("jstree-checked").children(":checkbox").prop("checked",!0):("jstree-checked"===s||r.hasClass("jstree-checked")||r.children(":checked").length)&&r.find("li").andSelf().addClass("jstree-checked").children(":checkbox").prop("checked",!0)}))})),o||e.find(".jstree-checked").parent().parent().each((function(){n._repair_state(this)}))}},change_state:function(e,i){e=this._get_node(e);var s=this.get_container().parents()[0].omnisObject,r=!1,n=this._get_settings().checkbox.real_checkboxes;if(!e||-1===e)return!1;if(i=!1===i||!0===i?i:e.hasClass("jstree-checked"),this._get_settings().checkbox.two_state)s.setCheckboxValue(e.children("a").children(".omnis-checkbox")[0],!i),i?(e.removeClass("jstree-checked").addClass("jstree-unchecked"),n&&e.children(":checkbox").prop("checked",!1)):(e.removeClass("jstree-unchecked").addClass("jstree-checked"),n&&e.children(":checkbox").prop("checked",!0));else{if(i){if(!(r=e.find("li").andSelf()).filter(".jstree-checked, .jstree-undetermined").length)return!1;r.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked"),r.children("a").children(".omnis-checkbox").each((function(){s.setCheckboxValue(t(this)[0],!1)})),n&&r.children(":checkbox").prop("checked",!1)}else{if(!(r=e.find("li").andSelf()).filter(".jstree-unchecked, .jstree-undetermined").length)return!1;r.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked"),r.children("a").children(".omnis-checkbox").each((function(){s.setCheckboxValue(t(this)[0],!0)})),n&&r.children(":checkbox").prop("checked",!0),this.data.ui&&(this.data.ui.last_selected=e),this.data.checkbox.last_selected=e}e.parentsUntil(".jstree","li").each((function(){var e=t(this);if(i){if(e.children("ul").children("li.jstree-checked, li.jstree-undetermined").length)return e.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),e.parentsUntil(".jstree","li").andSelf().children("a").children(".omnis-checkbox").each((function(){s.setCheckboxValue(t(this)[0],!1)})),n&&e.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",!1),!1;e.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked"),e.parentsUntil(".jstree","li").andSelf().children("a").children(".omnis-checkbox").each((function(){s.setCheckboxValue(t(this)[0],!1)})),n&&e.children(":checkbox").prop("checked",!1)}else{if(e.children("ul").children("li.jstree-unchecked, li.jstree-undetermined").length)return e.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),e.parentsUntil(".jstree","li").andSelf().children("a").children(".omnis-checkbox").each((function(){s.setCheckboxValue(t(this)[0],!1)})),n&&e.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",!1),!1;e.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked"),e.parentsUntil(".jstree","li").andSelf().children("a").children(".omnis-checkbox").each((function(){s.setCheckboxValue(t(this)[0],!0)})),n&&e.children(":checkbox").prop("checked",!0)}}))}return this.data.ui&&this.data.checkbox.noui&&(this.data.ui.selected=this.get_checked()),this.__callback(e),!0},check_node:function(t){if(this.change_state(t,!1)){if(t=this._get_node(t),this._get_settings().checkbox.checked_parent_open){var e=this;t.parents(".jstree-closed").each((function(){e.open_node(this,!1,!0)}))}this.__callback({obj:t})}},uncheck_node:function(t){this.change_state(t,!0)&&this.__callback({obj:this._get_node(t)})},check_all:function(){var t=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each((function(){t.change_state(this,!1)})),this.__callback()},uncheck_all:function(){var t=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each((function(){t.change_state(this,!0)})),this.__callback()},is_checked:function(t){return!!(t=this._get_node(t)).length&&t.is(".jstree-checked")},get_checked:function(t,e){return t=t&&-1!==t?this._get_node(t):this.get_container(),e||this._get_settings().checkbox.two_state?t.find(".jstree-checked"):t.find("> ul > .jstree-checked, .jstree-undetermined > ul > .jstree-checked")},get_unchecked:function(t,e){return t=t&&-1!==t?this._get_node(t):this.get_container(),e||this._get_settings().checkbox.two_state?t.find(".jstree-unchecked"):t.find("> ul > .jstree-unchecked, .jstree-undetermined > ul > .jstree-unchecked")},show_checkboxes:function(){this.get_container().children("ul").removeClass("jstree-no-checkboxes")},hide_checkboxes:function(){this.get_container().children("ul").addClass("jstree-no-checkboxes")},_repair_state:function(t){if((t=this._get_node(t)).length)if(this._get_settings().checkbox.two_state)t.find("li").andSelf().not(".jstree-checked").removeClass("jstree-undetermined").addClass("jstree-unchecked").children(":checkbox").prop("checked",!0);else{var e=this._get_settings().checkbox.real_checkboxes,i=t.find("> ul > .jstree-checked").length,s=t.find("> ul > .jstree-undetermined").length,r=t.find("> ul > li").length;0===r?t.hasClass("jstree-undetermined")&&this.change_state(t,!1):0===i&&0===s?this.change_state(t,!0):i===r?this.change_state(t,!1):(t.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),e&&t.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",!1))}},reselect:function(){if(this.data.ui&&this.data.checkbox.noui){var e=this,i=this.data.ui.to_select;i=t.map(t.makeArray(i),(function(t){return"#"+t.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")})),this.deselect_all(),t.each(i,(function(t,i){e.check_node(i)})),this.__callback()}else this.__call_old()},save_loaded:function(){var t=this;this.data.core.to_load=[],this.get_container_ul().find("li.jstree-closed.jstree-undetermined").each((function(){this.id&&t.data.core.to_load.push("#"+this.id)}))}}}),t((function(){t.vakata.css.add_sheet({str:".jstree .jstree-real-checkbox { display:none; } ",title:"jstree"})}))}(jQuery),function(t){t.jstree.plugin("types",{__init:function(){var e=this._get_settings().types;this.data.types.attach_to=[];const i=this.get_container().parents()[0].omnisObject;this.get_container().bind("init.jstree",t.proxy((function(){var s=e.types,r=e.type_attr,n="",o=this;t.each(s,(function(e,s){if("number"!=typeof s){if(t.each(s,(function(t,e){/^(max_depth|max_children|icon|valid_children)$/.test(t)||o.data.types.attach_to.push(t)})),!s.icon)return!0;(s.icon.image||s.icon.position)&&(n+="default"==e?".jstree-"+o.get_index()+" a > .jstree-icon { ":".jstree-"+o.get_index()+" li["+r+'="'+e+'"] > a > .jstree-icon { ',s.icon.image&&(jIcons.isSVG(s.icon.image)?i.addSVGIconData(e,s.icon.image):(n+=" background-image:url("+s.icon.image+"); ",n+=jIcons.getIconSize(s.icon.image,!0))),s.icon.position?n+=" background-position:"+s.icon.position+"; ":n+=" background-position:0 0; ",n+=" background-repeat: no-repeat;",n+="} ")}})),""!==n&&t.vakata.css.add_sheet({str:n,title:"jstree-types"})}),this)).bind("before.jstree",t.proxy((function(e,i){var s,r,n=!!this._get_settings().types.use_data&&this._get_node(i.args[0]),o=!(!n||-1===n||!n.length)&&n.data("jstree");if(o&&o.types&&!1===o.types[i.func])return e.stopImmediatePropagation(),!1;if(-1!==t.inArray(i.func,this.data.types.attach_to)){if(!i.args[0]||!i.args[0].tagName&&!i.args[0].jquery)return;if(((s=this._get_settings().types.types)[r=this._get_type(i.args[0])]&&void 0!==s[r][i.func]||s.default&&void 0!==s.default[i.func])&&!1===this._check(i.func,i.args[0]))return e.stopImmediatePropagation(),!1}}),this))},defaults:{max_children:-1,max_depth:-1,valid_children:"all",use_data:!1,type_attr:"rel",types:{default:{max_children:-1,max_depth:-1,valid_children:"all"}}},_fn:{_types_notify:function(t,e){e.type&&this._get_settings().types.use_data&&this.set_type(e.type,t)},_get_type:function(t){return!(!(t=this._get_node(t))||!t.length)&&(t.attr(this._get_settings().types.type_attr)||"default")},set_type:function(t,e){var i=!(!(e=this._get_node(e)).length||!t)&&e.attr(this._get_settings().types.type_attr,t);return i&&this.__callback({obj:e,type:t}),i},_check:function(e,i,s){i=this._get_node(i);var r=!1,n=this._get_type(i),o=0,a=this,l=this._get_settings().types,h=!1;if(-1===i){if(!l[e])return;r=l[e]}else{if(!1===n)return;(h=!!l.use_data&&i.data("jstree"))&&h.types&&void 0!==h.types[e]?r=h.types[e]:l.types[n]&&void 0!==l.types[n][e]?r=l.types[n][e]:l.types.default&&void 0!==l.types.default[e]&&(r=l.types.default[e])}return t.isFunction(r)&&(r=r.call(this,i)),"max_depth"===e&&-1!==i&&!1!==s&&-2!==l.max_depth&&0!==r&&i.children("a:eq(0)").parentsUntil(".jstree","li").each((function(t){return-1!==l.max_depth&&l.max_depth-(t+1)<=0||-1!==(o=0===t?r:a._check(e,this,!1))&&o-(t+1)<=0?(r=0,!1):(o>=0&&(o-(t+1)<r||r<0)&&(r=o-(t+1)),void(l.max_depth>=0&&(l.max_depth-(t+1)<r||r<0)&&(r=l.max_depth-(t+1))))})),r},check_move:function(){if(!this.__call_old())return!1;var e,i=this._get_move(),s=i.rt._get_settings().types,r=i.rt._check("max_children",i.cr),n=i.rt._check("max_depth",i.cr),o=i.rt._check("valid_children",i.cr),a=1;if("none"===o)return!1;if(t.isArray(o)&&i.ot&&i.ot._get_type&&(i.o.each((function(){if(-1===t.inArray(i.ot._get_type(this),o))return a=!1,!1})),!1===a))return!1;if(-2!==s.max_children&&-1!==r&&(-1===i.cr?this.get_container().find("> ul > li").not(i.o).length:i.cr.find("> ul > li").not(i.o).length)+i.o.length>r)return!1;if(-2!==s.max_depth&&-1!==n){if(a=0,0===n)return!1;if(void 0===i.o.d){for(e=i.o;e.length>0;)e=e.find("> ul > li"),a++;i.o.d=a}if(n-i.o.d<0)return!1}return!0},create_node:function(e,i,s,r,n,o){if(!o&&(n||this._is_loaded(e))){var a="string"==typeof i&&i.match(/^before|after$/i)&&-1!==e?this._get_parent(e):this._get_node(e),l=this._get_settings().types,h=this._check("max_children",a),c=this._check("max_depth",a),u=this._check("valid_children",a);if("string"==typeof s&&(s={data:s}),s||(s={}),"none"===u)return!1;if(t.isArray(u))if(s.attr&&s.attr[l.type_attr]){if(-1===t.inArray(s.attr[l.type_attr],u))return!1}else s.attr||(s.attr={}),s.attr[l.type_attr]=u[0];if(-2!==l.max_children&&-1!==h&&(-1===a?this.get_container().find("> ul > li").length:a.find("> ul > li").length)+1>h)return!1;if(-2!==l.max_depth&&-1!==c&&c-1<0)return!1}return this.__call_old(!0,e,i,s,r,n,o)}}})}(jQuery)}}()}},function(t){t.O(0,[216,597],(function(){return e=7910,t(t.s=e);var e}));t.O()}]);